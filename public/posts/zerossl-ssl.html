

<!DOCTYPE html>
<html lang="zh-CN" data-default-color-scheme=auto>



<head>
  <meta charset="UTF-8">

  <link rel="apple-touch-icon" sizes="76x76" href="https://cravatar.cn/avatar/4214719ec961227dd3a14fd5995844c7?&amp;r=pg">
  <link rel="icon" href="https://cravatar.cn/avatar/4214719ec961227dd3a14fd5995844c7?&amp;r=pg">
  

  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, shrink-to-fit=no">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  
  <meta name="theme-color" content="#2f4154">
  <meta name="author" content="InkDust">
  <meta name="keywords" content="inkdust,ink dust,ink blog.inkdust blog,墨尘,墨尘的博客">
  
    <meta name="description" content="引入现如今，向像腾讯，阿里云等大厂的免费SSL证书，都由一年缩短为3个月。 https:&#x2F;&#x2F;cloud.tencent.com&#x2F;document&#x2F;product&#x2F;400&#x2F;104538 在如今的形式下，签发免费的3个月的单域名证书显然不如直接签发Let’s Encrypt、ZeroSSL等ACME提供的泛域名证书来的方便。 而acme.sh常用于Linux端上证书的自动化签发与续约，对于不使用服务器">
<meta property="og:type" content="article">
<meta property="og:title" content="SSL系列二之快速签发免费ZeroSSL泛域名证书">
<meta property="og:url" content="https://www.inkdust.top/posts/zerossl-ssl.html">
<meta property="og:site_name" content="墨尘の网络日志">
<meta property="og:description" content="引入现如今，向像腾讯，阿里云等大厂的免费SSL证书，都由一年缩短为3个月。 https:&#x2F;&#x2F;cloud.tencent.com&#x2F;document&#x2F;product&#x2F;400&#x2F;104538 在如今的形式下，签发免费的3个月的单域名证书显然不如直接签发Let’s Encrypt、ZeroSSL等ACME提供的泛域名证书来的方便。 而acme.sh常用于Linux端上证书的自动化签发与续约，对于不使用服务器">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://cdnn.boochi.cn/gh/inkdust-dev/ink-oss@main/qexo-upload/24/8/zerossl-ssl_646c1327b09c5fd73ab7de952c42df84.png">
<meta property="article:published_time" content="2024-08-12T09:51:02.708Z">
<meta property="article:modified_time" content="2024-08-12T10:24:22.549Z">
<meta property="article:author" content="InkDust">
<meta property="article:tag" content="inkdust,ink dust,ink blog.inkdust blog,墨尘,墨尘的博客">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:image" content="https://cdnn.boochi.cn/gh/inkdust-dev/ink-oss@main/qexo-upload/24/8/zerossl-ssl_646c1327b09c5fd73ab7de952c42df84.png">
  
  
  
  <title>SSL系列二之快速签发免费ZeroSSL泛域名证书 - 墨尘の网络日志</title>

  <link  rel="stylesheet" href="https://mirrors.sustech.edu.cn/cdnjs/ajax/libs/twitter-bootstrap/4.6.1/css/bootstrap.min.css" />



  <link  rel="stylesheet" href="https://mirrors.sustech.edu.cn/cdnjs/ajax/libs/github-markdown-css/4.0.0/github-markdown.min.css" />

  <link  rel="stylesheet" href="https://mirrors.sustech.edu.cn/cdnjs/ajax/libs/hint.css/2.7.0/hint.min.css" />

  <link  rel="stylesheet" href="https://mirrors.sustech.edu.cn/cdnjs/ajax/libs/fancybox/3.5.7/jquery.fancybox.min.css" />



<!-- 主题依赖的图标库，不要自行修改 -->
<!-- Do not modify the link that theme dependent icons -->

<link rel="stylesheet" href="//at.alicdn.com/t/c/font_1749284_5i9bdhy70f8.css">



<link rel="stylesheet" href="//at.alicdn.com/t/c/font_1736178_k526ubmyhba.css">


<link  rel="stylesheet" href="/css/main.css" />


  <link id="highlight-css" rel="stylesheet" href="/css/highlight.css" />
  
    <link id="highlight-css-dark" rel="stylesheet" href="/css/highlight-dark.css" />
  




  <script id="fluid-configs">
    var Fluid = window.Fluid || {};
    Fluid.ctx = Object.assign({}, Fluid.ctx)
    var CONFIG = {"hostname":"www.inkdust.top","root":"/","version":"1.9.8","typing":{"enable":true,"typeSpeed":70,"cursorChar":"_","loop":false,"scope":[]},"anchorjs":{"enable":true,"element":"h1,h2,h3,h4,h5,h6","placement":"left","visible":"hover","icon":""},"progressbar":{"enable":true,"height_px":3,"color":"#29d","options":{"showSpinner":false,"trickleSpeed":100}},"code_language":{"enable":true,"default":"TEXT"},"copy_btn":true,"image_caption":{"enable":true},"image_zoom":{"enable":true,"img_url_replace":["",""]},"toc":{"enable":true,"placement":"right","headingSelector":"h1,h2,h3,h4,h5,h6","collapseDepth":0},"lazyload":{"enable":true,"loading_img":"/img/loading.gif","onlypost":false,"offset_factor":2},"web_analytics":{"enable":false,"follow_dnt":true,"baidu":null,"google":{"measurement_id":null},"tencent":{"sid":null,"cid":null},"leancloud":{"app_id":null,"app_key":null,"server_url":null,"path":"window.location.pathname","ignore_local":false},"umami":{"src":null,"website_id":null,"domains":null,"start_time":"2024-01-01T00:00:00.000Z","token":null,"api_server":null}},"search_path":"/local-search.xml","include_content_in_search":true};

    if (CONFIG.web_analytics.follow_dnt) {
      var dntVal = navigator.doNotTrack || window.doNotTrack || navigator.msDoNotTrack;
      Fluid.ctx.dnt = dntVal && (dntVal.startsWith('1') || dntVal.startsWith('yes') || dntVal.startsWith('on'));
    }
  </script>
  <script  src="/js/utils.js" ></script>
  <script  src="/js/color-schema.js" ></script>
  


  
<meta name="generator" content="Hexo 7.3.0"></head>


<body>
  

  <header>
    

<div class="header-inner" style="height: 70vh;">
  <nav id="navbar" class="navbar fixed-top  navbar-expand-lg navbar-dark scrolling-navbar">
  <div class="container">
    <a class="navbar-brand" href="/">
      <strong>墨尘の网络日志</strong>
    </a>

    <button id="navbar-toggler-btn" class="navbar-toggler" type="button" data-toggle="collapse"
            data-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <div class="animated-icon"><span></span><span></span><span></span></div>
    </button>

    <!-- Collapsible content -->
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav ml-auto text-center">
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/" target="_self">
                <i class="iconfont icon-home-fill"></i>
                <span>首页</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/archives/" target="_self">
                <i class="iconfont icon-archive-fill"></i>
                <span>归档</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/categories/" target="_self">
                <i class="iconfont icon-category-fill"></i>
                <span>分类</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/tags/" target="_self">
                <i class="iconfont icon-tags-fill"></i>
                <span>标签</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/about/" target="_self">
                <i class="iconfont icon-user-fill"></i>
                <span>关于</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/links/" target="_self">
                <i class="iconfont icon-link-fill"></i>
                <span>友链</span>
              </a>
            </li>
          
        
        
          <li class="nav-item" id="search-btn">
            <a class="nav-link" target="_self" href="javascript:;" data-toggle="modal" data-target="#modalSearch" aria-label="Search">
              <i class="iconfont icon-search"></i>
            </a>
          </li>
          
        
        
          <li class="nav-item" id="color-toggle-btn">
            <a class="nav-link" target="_self" href="javascript:;" aria-label="Color Toggle">
              <i class="iconfont icon-dark" id="color-toggle-icon"></i>
            </a>
          </li>
        
      </ul>
    </div>
  </div>
</nav>

  

<div id="banner" class="banner" parallax=true
     style="background: url('https://cdnn.boochi.cn/gh/inkdust-dev/ink-oss@main/blog-image/blog-banner.png') no-repeat center center; background-size: cover;">
  <div class="full-bg-img">
    <div class="mask flex-center" style="background-color: rgba(0, 0, 0, 0.3)">
      <div class="banner-text text-center fade-in-up">
        <div class="h2">
          
            <span id="subtitle" data-typed-text="SSL系列二之快速签发免费ZeroSSL泛域名证书"></span>
          
        </div>

        
          
  <div class="mt-3">
    
      <span class="post-meta mr-2">
        <i class="iconfont icon-author" aria-hidden="true"></i>
        InkDust
      </span>
    
    
      <span class="post-meta">
        <i class="iconfont icon-date-fill" aria-hidden="true"></i>
        <time datetime="2024-08-12 09:51" pubdate>
          2024年8月12日 上午
        </time>
      </span>
    
  </div>

  <div class="mt-1">
    
      <span class="post-meta mr-2">
        <i class="iconfont icon-chart"></i>
        
          24k 字
        
      </span>
    

    
      <span class="post-meta mr-2">
        <i class="iconfont icon-clock-fill"></i>
        
        
        
          204 分钟
        
      </span>
    

    
    
      
        <span id="umami-page-views-container" class="post-meta" style="display: none">
          <i class="iconfont icon-eye" aria-hidden="true"></i>
          <span id="umami-page-views"></span> 次
        </span>
        
      
    
  </div>


        
      </div>

      
    </div>
  </div>
</div>

</div>

  </header>

  <main>
    
      

<div class="container-fluid nopadding-x">
  <div class="row nomargin-x">
    <div class="side-col d-none d-lg-block col-lg-2">
      

    </div>

    <div class="col-lg-8 nopadding-x-md">
      <div class="container nopadding-x-md" id="board-ctn">
        <div id="board">
          <article class="post-content mx-auto">
            <h1 id="seo-header">SSL系列二之快速签发免费ZeroSSL泛域名证书</h1>
            
            
              <div class="markdown-body">
                
                <h2 id="引入"><a href="#引入" class="headerlink" title="引入"></a>引入</h2><p>现如今，向像腾讯，阿里云等大厂的免费SSL证书，都由一年缩短为3个月。</p>
<p><a target="_blank" rel="noopener" href="https://cloud.tencent.com/document/product/400/104538">https://cloud.tencent.com/document/product/400/104538</a></p>
<p>在如今的形式下，签发免费的3个月的单域名证书显然不如直接签发Let’s Encrypt、ZeroSSL等ACME提供的泛域名证书来的方便。</p>
<p>而acme.sh常用于Linux端上证书的自动化签发与续约，对于不使用服务器的人群，显然造成了许多麻烦，那么可以通过Web端直接签发这些ACME的泛域名证书吗？</p>
<p>Github开源项目ACME-Web-Browser-Client告诉了我们这并非是一件不可能实现的事情。</p>
<p>简介：</p>
<p>本网页客户端（仅一个静态HTML网页文件）用于：向 Let’s Encrypt、ZeroSSL、Google 等支持 ACME 协议的证书颁发机构，免费申请获得用于 HTTPS 的 SSL&#x2F;TLS 域名证书（RSA、ECC&#x2F;ECDSA），支持多域名和通配符泛域名；只需在现代浏览器上操作即可获得 PEM 格式纯文本的域名证书，不依赖操作系统环境（Windows、macOS都能用），无需下载和安装软件，无需注册登录，纯手动操作，只专注于申请获得证书这一件事，简单易用，非常适用于希望手动快捷申请获得证书的使用场景。</p>
<p>Github开源地址：<a target="_blank" rel="noopener" href="https://github.com/xiangyuecn/ACME-HTML-Web-Browser-Client">https://github.com/xiangyuecn/ACME-HTML-Web-Browser-Client</a></p>
<p>Gitee开源地址：</p>
<p><a target="_blank" rel="noopener" href="https://gitee.com/xiangyuecn/ACME-HTML-Web-Browser-Client">https://gitee.com/xiangyuecn/ACME-HTML-Web-Browser-Client</a></p>
<h2 id="使用"><a href="#使用" class="headerlink" title="使用"></a>使用</h2><p>提示：可将其私有化部署到Vercel，Netlify等上，可弥补Github Pages速度的不足。</p>
<p>任意点击下列一个网页使用：</p>
<p><a target="_blank" rel="noopener" href="https://xiangyuecn.github.io/ACME-HTML-Web-Browser-Client/ACME-HTML-Web-Browser-Client.html">https://xiangyuecn.github.io/ACME-HTML-Web-Browser-Client/ACME-HTML-Web-Browser-Client.html</a> （作者Github Pages）</p>
<p><a target="_blank" rel="noopener" href="https://ssl.dev.inkdust.top/">https://ssl.dev.inkdust.top/</a> （本人Vercel）</p>
<h2 id="签发ZeroSSL"><a href="#签发ZeroSSL" class="headerlink" title="签发ZeroSSL"></a>签发ZeroSSL</h2><p>本文为签发ZeroSSL篇教程，签发Let’s Encrypt或Google，请看Let’s Encrypt篇和Google篇。</p>
<h3 id="步骤一：注册ZeroSSL"><a href="#步骤一：注册ZeroSSL" class="headerlink" title="步骤一：注册ZeroSSL"></a>步骤一：注册ZeroSSL</h3><p>来到<a target="_blank" rel="noopener" href="https://zerossl.com/">https://zerossl.com/</a></p>
<p>注册ZeroSSL，请使用魔法网络环境，如无法使用魔法网络环境，请使用<code>Header Eidtor</code> 来将 <code>reCAPTCHA</code>的地址重写到国内镜像。</p>
<p>Header Eidtor谷歌商店：<a target="_blank" rel="noopener" href="https://chromewebstore.google.com/detail/header-editor/eningockdidmgiojffjmkdblpjocbhgh?hl=zh-CN&utm_source=ext_sidebar">https://chromewebstore.google.com/detail/header-editor/eningockdidmgiojffjmkdblpjocbhgh?hl=zh-CN&amp;utm_source=ext_sidebar</a></p>
<p>Header Eidtor Edge商店：<a target="_blank" rel="noopener" href="https://microsoftedge.microsoft.com/addons/detail/header-editor/djbcdihpmcbpkljpjibeiedjenilallo">https://microsoftedge.microsoft.com/addons/detail/header-editor/djbcdihpmcbpkljpjibeiedjenilallo</a></p>
<p>Header Eidtor Crx搜搜：<a target="_blank" rel="noopener" href="https://www.crxsoso.com/webstore/detail/eningockdidmgiojffjmkdblpjocbhgh">https://www.crxsoso.com/webstore/detail/eningockdidmgiojffjmkdblpjocbhgh</a><br><img src="https://cdnn.boochi.cn/gh/inkdust-dev/ink-oss@main/qexo-upload/24/8/image_38fa68a496e6a63cd50b294b0776d192.png" srcset="/img/loading.gif" lazyload alt="https://cdnn.boochi.cn/gh/inkdust-dev/ink-oss@main/qexo-upload/24/8/image_38fa68a496e6a63cd50b294b0776d192.png"></p>
<p>重写规则：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">名称：reCAPTCHA<br><br>匹配类型：正则表达式<br><br>规则类型：重定向规则<br><br>匹配规则：^http(s?)://(?:www\.|recaptcha\.|)google\.com/recaptcha/(.*)<br><br>执行类型：常规<br><br>重定向至：https://recaptcha.net/recaptcha/$2<br></code></pre></td></tr></table></figure>

<p>导入TXT文件：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">&#123;<br>	&quot;request&quot;: [],<br>	&quot;sendHeader&quot;: [],<br>	&quot;receiveHeader&quot;: [<br>		&#123;<br>			&quot;enable&quot;: false,<br>			&quot;name&quot;: &quot;Content Security Policy Header Modification&quot;,<br>			&quot;ruleType&quot;: &quot;modifyReceiveHeader&quot;,<br>			&quot;matchType&quot;: &quot;all&quot;,<br>			&quot;pattern&quot;: &quot;&quot;,<br>			&quot;exclude&quot;: &quot;&quot;,<br>			&quot;isFunction&quot;: true,<br>			&quot;code&quot;: &quot;let rt = detail.type;\nif (rt === &#x27;script&#x27; || rt === &#x27;stylesheet&#x27; || rt === &#x27;main_frame&#x27; || rt === &#x27;sub_frame&#x27;) &#123;\n  for (let i in val) &#123;\n    if (val[i].name.toLowerCase() === &#x27;content-security-policy&#x27;) &#123;\n      let s = val[i].value;\n      s = s.replace(/googleapis\\.com/g, &#x27;$&amp; https://gapis.geekzu.org&#x27;);\n      s = s.replace(/recaptcha\\.google\\.com/g, &#x27;$&amp; https://recaptcha.net&#x27;);\n      s = s.replace(/google\\.com/g, &#x27;$&amp; https://recaptcha.net&#x27;);\n      s = s.replace(/gstatic\\.com/g, &#x27;$&amp; https://*.gstatic.cn&#x27;);\n      val[i].value = s;\n    &#125;\n  &#125;\n&#125;&quot;,<br>			&quot;group&quot;: &quot;未分组&quot;<br>		&#125;<br>	],<br>	&quot;receiveBody&quot;: []<br>&#125;<br></code></pre></td></tr></table></figure>

<p><img src="https://cdnn.boochi.cn/gh/inkdust-dev/ink-oss@main/qexo-upload/24/8/image_18ab541cb20291a0419ffeb09a1c83bf.png" srcset="/img/loading.gif" lazyload alt="https://cdnn.boochi.cn/gh/inkdust-dev/ink-oss@main/qexo-upload/24/8/image_18ab541cb20291a0419ffeb09a1c83bf.png"></p>
<p>注册，并登录ZeroSSL。点击<code>Developers</code>,<code>EAB Credentials for ACME Clients</code>下方的<code>Generate</code>,保存好生成的<strong>EAB KID</strong>和<strong>EAB HMAC Key</strong>。<br><img src="https://cdnn.boochi.cn/gh/inkdust-dev/ink-oss@main/qexo-upload/24/8/image_d8176d5822392d6870b8b1f38becddd3.png" srcset="/img/loading.gif" lazyload alt="https://cdnn.boochi.cn/gh/inkdust-dev/ink-oss@main/qexo-upload/24/8/image_d8176d5822392d6870b8b1f38becddd3.png"></p>
<p>任意点击下列一个网页打开签发SSL：</p>
<p><a target="_blank" rel="noopener" href="https://xiangyuecn.github.io/ACME-HTML-Web-Browser-Client/ACME-HTML-Web-Browser-Client.html">https://xiangyuecn.github.io/ACME-HTML-Web-Browser-Client/ACME-HTML-Web-Browser-Client.html</a> （作者Github Pages）</p>
<p><a target="_blank" rel="noopener" href="https://ssl.dev.inkdust.top/">https://ssl.dev.inkdust.top/</a> （本人Vercel）</p>
<h3 id="步骤二：选择证书颁发机构"><a href="#步骤二：选择证书颁发机构" class="headerlink" title="步骤二：选择证书颁发机构"></a>步骤二：选择证书颁发机构</h3><p>在“证书颁发机构 ACME(v2, RFC 8555) 服务URL”下选择ZeroSSL，点击 <code>读取服务目录</code>并等待出现：</p>
<p>测试此ACME服务对浏览器的支持情况，发生错误：GetNonce:** <strong>此ACME服务对浏览器访问支持太差，无法跨域获取Replay-Nonce响应头。</strong></p>
<p>关闭改网页，直接打开<a target="_blank" rel="noopener" href="https://acme.zerossl.com/v2/DV90/directory%EF%BC%8C%E6%8C%89%60F12%60%E9%94%AE%E6%89%93%E5%BC%80%E5%BC%80%E5%8F%91%E8%80%85%E6%8E%A7%E5%88%B6%E5%8F%B0%EF%BC%8C%E7%82%B9%E5%87%BB%60%E6%8E%A7%E5%88%B6%E5%8F%B0%60">https://acme.zerossl.com/v2/DV90/directory，按`F12`键打开开发者控制台，点击`控制台`</a> 或<code>Console</code>，输入以下代码（代码安全开源）：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br><span class="line">368</span><br><span class="line">369</span><br><span class="line">370</span><br><span class="line">371</span><br><span class="line">372</span><br><span class="line">373</span><br><span class="line">374</span><br><span class="line">375</span><br><span class="line">376</span><br><span class="line">377</span><br><span class="line">378</span><br><span class="line">379</span><br><span class="line">380</span><br><span class="line">381</span><br><span class="line">382</span><br><span class="line">383</span><br><span class="line">384</span><br><span class="line">385</span><br><span class="line">386</span><br><span class="line">387</span><br><span class="line">388</span><br><span class="line">389</span><br><span class="line">390</span><br><span class="line">391</span><br><span class="line">392</span><br><span class="line">393</span><br><span class="line">394</span><br><span class="line">395</span><br><span class="line">396</span><br><span class="line">397</span><br><span class="line">398</span><br><span class="line">399</span><br><span class="line">400</span><br><span class="line">401</span><br><span class="line">402</span><br><span class="line">403</span><br><span class="line">404</span><br><span class="line">405</span><br><span class="line">406</span><br><span class="line">407</span><br><span class="line">408</span><br><span class="line">409</span><br><span class="line">410</span><br><span class="line">411</span><br><span class="line">412</span><br><span class="line">413</span><br><span class="line">414</span><br><span class="line">415</span><br><span class="line">416</span><br><span class="line">417</span><br><span class="line">418</span><br><span class="line">419</span><br><span class="line">420</span><br><span class="line">421</span><br><span class="line">422</span><br><span class="line">423</span><br><span class="line">424</span><br><span class="line">425</span><br><span class="line">426</span><br><span class="line">427</span><br><span class="line">428</span><br><span class="line">429</span><br><span class="line">430</span><br><span class="line">431</span><br><span class="line">432</span><br><span class="line">433</span><br><span class="line">434</span><br><span class="line">435</span><br><span class="line">436</span><br><span class="line">437</span><br><span class="line">438</span><br><span class="line">439</span><br><span class="line">440</span><br><span class="line">441</span><br><span class="line">442</span><br><span class="line">443</span><br><span class="line">444</span><br><span class="line">445</span><br><span class="line">446</span><br><span class="line">447</span><br><span class="line">448</span><br><span class="line">449</span><br><span class="line">450</span><br><span class="line">451</span><br><span class="line">452</span><br><span class="line">453</span><br><span class="line">454</span><br><span class="line">455</span><br><span class="line">456</span><br><span class="line">457</span><br><span class="line">458</span><br><span class="line">459</span><br><span class="line">460</span><br><span class="line">461</span><br><span class="line">462</span><br><span class="line">463</span><br><span class="line">464</span><br><span class="line">465</span><br><span class="line">466</span><br><span class="line">467</span><br><span class="line">468</span><br><span class="line">469</span><br><span class="line">470</span><br><span class="line">471</span><br><span class="line">472</span><br><span class="line">473</span><br><span class="line">474</span><br><span class="line">475</span><br><span class="line">476</span><br><span class="line">477</span><br><span class="line">478</span><br><span class="line">479</span><br><span class="line">480</span><br><span class="line">481</span><br><span class="line">482</span><br><span class="line">483</span><br><span class="line">484</span><br><span class="line">485</span><br><span class="line">486</span><br><span class="line">487</span><br><span class="line">488</span><br><span class="line">489</span><br><span class="line">490</span><br><span class="line">491</span><br><span class="line">492</span><br><span class="line">493</span><br><span class="line">494</span><br><span class="line">495</span><br><span class="line">496</span><br><span class="line">497</span><br><span class="line">498</span><br><span class="line">499</span><br><span class="line">500</span><br><span class="line">501</span><br><span class="line">502</span><br><span class="line">503</span><br><span class="line">504</span><br><span class="line">505</span><br><span class="line">506</span><br><span class="line">507</span><br><span class="line">508</span><br><span class="line">509</span><br><span class="line">510</span><br><span class="line">511</span><br><span class="line">512</span><br><span class="line">513</span><br><span class="line">514</span><br><span class="line">515</span><br><span class="line">516</span><br><span class="line">517</span><br><span class="line">518</span><br><span class="line">519</span><br><span class="line">520</span><br><span class="line">521</span><br><span class="line">522</span><br><span class="line">523</span><br><span class="line">524</span><br><span class="line">525</span><br><span class="line">526</span><br><span class="line">527</span><br><span class="line">528</span><br><span class="line">529</span><br><span class="line">530</span><br><span class="line">531</span><br><span class="line">532</span><br><span class="line">533</span><br><span class="line">534</span><br><span class="line">535</span><br><span class="line">536</span><br><span class="line">537</span><br><span class="line">538</span><br><span class="line">539</span><br><span class="line">540</span><br><span class="line">541</span><br><span class="line">542</span><br><span class="line">543</span><br><span class="line">544</span><br><span class="line">545</span><br><span class="line">546</span><br><span class="line">547</span><br><span class="line">548</span><br><span class="line">549</span><br><span class="line">550</span><br><span class="line">551</span><br><span class="line">552</span><br><span class="line">553</span><br><span class="line">554</span><br><span class="line">555</span><br><span class="line">556</span><br><span class="line">557</span><br><span class="line">558</span><br><span class="line">559</span><br><span class="line">560</span><br><span class="line">561</span><br><span class="line">562</span><br><span class="line">563</span><br><span class="line">564</span><br><span class="line">565</span><br><span class="line">566</span><br><span class="line">567</span><br><span class="line">568</span><br><span class="line">569</span><br><span class="line">570</span><br><span class="line">571</span><br><span class="line">572</span><br><span class="line">573</span><br><span class="line">574</span><br><span class="line">575</span><br><span class="line">576</span><br><span class="line">577</span><br><span class="line">578</span><br><span class="line">579</span><br><span class="line">580</span><br><span class="line">581</span><br><span class="line">582</span><br><span class="line">583</span><br><span class="line">584</span><br><span class="line">585</span><br><span class="line">586</span><br><span class="line">587</span><br><span class="line">588</span><br><span class="line">589</span><br><span class="line">590</span><br><span class="line">591</span><br><span class="line">592</span><br><span class="line">593</span><br><span class="line">594</span><br><span class="line">595</span><br><span class="line">596</span><br><span class="line">597</span><br><span class="line">598</span><br><span class="line">599</span><br><span class="line">600</span><br><span class="line">601</span><br><span class="line">602</span><br><span class="line">603</span><br><span class="line">604</span><br><span class="line">605</span><br><span class="line">606</span><br><span class="line">607</span><br><span class="line">608</span><br><span class="line">609</span><br><span class="line">610</span><br><span class="line">611</span><br><span class="line">612</span><br><span class="line">613</span><br><span class="line">614</span><br><span class="line">615</span><br><span class="line">616</span><br><span class="line">617</span><br><span class="line">618</span><br><span class="line">619</span><br><span class="line">620</span><br><span class="line">621</span><br><span class="line">622</span><br><span class="line">623</span><br><span class="line">624</span><br><span class="line">625</span><br><span class="line">626</span><br><span class="line">627</span><br><span class="line">628</span><br><span class="line">629</span><br><span class="line">630</span><br><span class="line">631</span><br><span class="line">632</span><br><span class="line">633</span><br><span class="line">634</span><br><span class="line">635</span><br><span class="line">636</span><br><span class="line">637</span><br><span class="line">638</span><br><span class="line">639</span><br><span class="line">640</span><br><span class="line">641</span><br><span class="line">642</span><br><span class="line">643</span><br><span class="line">644</span><br><span class="line">645</span><br><span class="line">646</span><br><span class="line">647</span><br><span class="line">648</span><br><span class="line">649</span><br><span class="line">650</span><br><span class="line">651</span><br><span class="line">652</span><br><span class="line">653</span><br><span class="line">654</span><br><span class="line">655</span><br><span class="line">656</span><br><span class="line">657</span><br><span class="line">658</span><br><span class="line">659</span><br><span class="line">660</span><br><span class="line">661</span><br><span class="line">662</span><br><span class="line">663</span><br><span class="line">664</span><br><span class="line">665</span><br><span class="line">666</span><br><span class="line">667</span><br><span class="line">668</span><br><span class="line">669</span><br><span class="line">670</span><br><span class="line">671</span><br><span class="line">672</span><br><span class="line">673</span><br><span class="line">674</span><br><span class="line">675</span><br><span class="line">676</span><br><span class="line">677</span><br><span class="line">678</span><br><span class="line">679</span><br><span class="line">680</span><br><span class="line">681</span><br><span class="line">682</span><br><span class="line">683</span><br><span class="line">684</span><br><span class="line">685</span><br><span class="line">686</span><br><span class="line">687</span><br><span class="line">688</span><br><span class="line">689</span><br><span class="line">690</span><br><span class="line">691</span><br><span class="line">692</span><br><span class="line">693</span><br><span class="line">694</span><br><span class="line">695</span><br><span class="line">696</span><br><span class="line">697</span><br><span class="line">698</span><br><span class="line">699</span><br><span class="line">700</span><br><span class="line">701</span><br><span class="line">702</span><br><span class="line">703</span><br><span class="line">704</span><br><span class="line">705</span><br><span class="line">706</span><br><span class="line">707</span><br><span class="line">708</span><br><span class="line">709</span><br><span class="line">710</span><br><span class="line">711</span><br><span class="line">712</span><br><span class="line">713</span><br><span class="line">714</span><br><span class="line">715</span><br><span class="line">716</span><br><span class="line">717</span><br><span class="line">718</span><br><span class="line">719</span><br><span class="line">720</span><br><span class="line">721</span><br><span class="line">722</span><br><span class="line">723</span><br><span class="line">724</span><br><span class="line">725</span><br><span class="line">726</span><br><span class="line">727</span><br><span class="line">728</span><br><span class="line">729</span><br><span class="line">730</span><br><span class="line">731</span><br><span class="line">732</span><br><span class="line">733</span><br><span class="line">734</span><br><span class="line">735</span><br><span class="line">736</span><br><span class="line">737</span><br><span class="line">738</span><br><span class="line">739</span><br><span class="line">740</span><br><span class="line">741</span><br><span class="line">742</span><br><span class="line">743</span><br><span class="line">744</span><br><span class="line">745</span><br><span class="line">746</span><br><span class="line">747</span><br><span class="line">748</span><br><span class="line">749</span><br><span class="line">750</span><br><span class="line">751</span><br><span class="line">752</span><br><span class="line">753</span><br><span class="line">754</span><br><span class="line">755</span><br><span class="line">756</span><br><span class="line">757</span><br><span class="line">758</span><br><span class="line">759</span><br><span class="line">760</span><br><span class="line">761</span><br><span class="line">762</span><br><span class="line">763</span><br><span class="line">764</span><br><span class="line">765</span><br><span class="line">766</span><br><span class="line">767</span><br><span class="line">768</span><br><span class="line">769</span><br><span class="line">770</span><br><span class="line">771</span><br><span class="line">772</span><br><span class="line">773</span><br><span class="line">774</span><br><span class="line">775</span><br><span class="line">776</span><br><span class="line">777</span><br><span class="line">778</span><br><span class="line">779</span><br><span class="line">780</span><br><span class="line">781</span><br><span class="line">782</span><br><span class="line">783</span><br><span class="line">784</span><br><span class="line">785</span><br><span class="line">786</span><br><span class="line">787</span><br><span class="line">788</span><br><span class="line">789</span><br><span class="line">790</span><br><span class="line">791</span><br><span class="line">792</span><br><span class="line">793</span><br><span class="line">794</span><br><span class="line">795</span><br><span class="line">796</span><br><span class="line">797</span><br><span class="line">798</span><br><span class="line">799</span><br><span class="line">800</span><br><span class="line">801</span><br><span class="line">802</span><br><span class="line">803</span><br><span class="line">804</span><br><span class="line">805</span><br><span class="line">806</span><br><span class="line">807</span><br><span class="line">808</span><br><span class="line">809</span><br><span class="line">810</span><br><span class="line">811</span><br><span class="line">812</span><br><span class="line">813</span><br><span class="line">814</span><br><span class="line">815</span><br><span class="line">816</span><br><span class="line">817</span><br><span class="line">818</span><br><span class="line">819</span><br><span class="line">820</span><br><span class="line">821</span><br><span class="line">822</span><br><span class="line">823</span><br><span class="line">824</span><br><span class="line">825</span><br><span class="line">826</span><br><span class="line">827</span><br><span class="line">828</span><br><span class="line">829</span><br><span class="line">830</span><br><span class="line">831</span><br><span class="line">832</span><br><span class="line">833</span><br><span class="line">834</span><br><span class="line">835</span><br><span class="line">836</span><br><span class="line">837</span><br><span class="line">838</span><br><span class="line">839</span><br><span class="line">840</span><br><span class="line">841</span><br><span class="line">842</span><br><span class="line">843</span><br><span class="line">844</span><br><span class="line">845</span><br><span class="line">846</span><br><span class="line">847</span><br><span class="line">848</span><br><span class="line">849</span><br><span class="line">850</span><br><span class="line">851</span><br><span class="line">852</span><br><span class="line">853</span><br><span class="line">854</span><br><span class="line">855</span><br><span class="line">856</span><br><span class="line">857</span><br><span class="line">858</span><br><span class="line">859</span><br><span class="line">860</span><br><span class="line">861</span><br><span class="line">862</span><br><span class="line">863</span><br><span class="line">864</span><br><span class="line">865</span><br><span class="line">866</span><br><span class="line">867</span><br><span class="line">868</span><br><span class="line">869</span><br><span class="line">870</span><br><span class="line">871</span><br><span class="line">872</span><br><span class="line">873</span><br><span class="line">874</span><br><span class="line">875</span><br><span class="line">876</span><br><span class="line">877</span><br><span class="line">878</span><br><span class="line">879</span><br><span class="line">880</span><br><span class="line">881</span><br><span class="line">882</span><br><span class="line">883</span><br><span class="line">884</span><br><span class="line">885</span><br><span class="line">886</span><br><span class="line">887</span><br><span class="line">888</span><br><span class="line">889</span><br><span class="line">890</span><br><span class="line">891</span><br><span class="line">892</span><br><span class="line">893</span><br><span class="line">894</span><br><span class="line">895</span><br><span class="line">896</span><br><span class="line">897</span><br><span class="line">898</span><br><span class="line">899</span><br><span class="line">900</span><br><span class="line">901</span><br><span class="line">902</span><br><span class="line">903</span><br><span class="line">904</span><br><span class="line">905</span><br><span class="line">906</span><br><span class="line">907</span><br><span class="line">908</span><br><span class="line">909</span><br><span class="line">910</span><br><span class="line">911</span><br><span class="line">912</span><br><span class="line">913</span><br><span class="line">914</span><br><span class="line">915</span><br><span class="line">916</span><br><span class="line">917</span><br><span class="line">918</span><br><span class="line">919</span><br><span class="line">920</span><br><span class="line">921</span><br><span class="line">922</span><br><span class="line">923</span><br><span class="line">924</span><br><span class="line">925</span><br><span class="line">926</span><br><span class="line">927</span><br><span class="line">928</span><br><span class="line">929</span><br><span class="line">930</span><br><span class="line">931</span><br><span class="line">932</span><br><span class="line">933</span><br><span class="line">934</span><br><span class="line">935</span><br><span class="line">936</span><br><span class="line">937</span><br><span class="line">938</span><br><span class="line">939</span><br><span class="line">940</span><br><span class="line">941</span><br><span class="line">942</span><br><span class="line">943</span><br><span class="line">944</span><br><span class="line">945</span><br><span class="line">946</span><br><span class="line">947</span><br><span class="line">948</span><br><span class="line">949</span><br><span class="line">950</span><br><span class="line">951</span><br><span class="line">952</span><br><span class="line">953</span><br><span class="line">954</span><br><span class="line">955</span><br><span class="line">956</span><br><span class="line">957</span><br><span class="line">958</span><br><span class="line">959</span><br><span class="line">960</span><br><span class="line">961</span><br><span class="line">962</span><br><span class="line">963</span><br><span class="line">964</span><br><span class="line">965</span><br><span class="line">966</span><br><span class="line">967</span><br><span class="line">968</span><br><span class="line">969</span><br><span class="line">970</span><br><span class="line">971</span><br><span class="line">972</span><br><span class="line">973</span><br><span class="line">974</span><br><span class="line">975</span><br><span class="line">976</span><br><span class="line">977</span><br><span class="line">978</span><br><span class="line">979</span><br><span class="line">980</span><br><span class="line">981</span><br><span class="line">982</span><br><span class="line">983</span><br><span class="line">984</span><br><span class="line">985</span><br><span class="line">986</span><br><span class="line">987</span><br><span class="line">988</span><br><span class="line">989</span><br><span class="line">990</span><br><span class="line">991</span><br><span class="line">992</span><br><span class="line">993</span><br><span class="line">994</span><br><span class="line">995</span><br><span class="line">996</span><br><span class="line">997</span><br><span class="line">998</span><br><span class="line">999</span><br><span class="line">1000</span><br><span class="line">1001</span><br><span class="line">1002</span><br><span class="line">1003</span><br><span class="line">1004</span><br><span class="line">1005</span><br><span class="line">1006</span><br><span class="line">1007</span><br><span class="line">1008</span><br><span class="line">1009</span><br><span class="line">1010</span><br><span class="line">1011</span><br><span class="line">1012</span><br><span class="line">1013</span><br><span class="line">1014</span><br><span class="line">1015</span><br><span class="line">1016</span><br><span class="line">1017</span><br><span class="line">1018</span><br><span class="line">1019</span><br><span class="line">1020</span><br><span class="line">1021</span><br><span class="line">1022</span><br><span class="line">1023</span><br><span class="line">1024</span><br><span class="line">1025</span><br><span class="line">1026</span><br><span class="line">1027</span><br><span class="line">1028</span><br><span class="line">1029</span><br><span class="line">1030</span><br><span class="line">1031</span><br><span class="line">1032</span><br><span class="line">1033</span><br><span class="line">1034</span><br><span class="line">1035</span><br><span class="line">1036</span><br><span class="line">1037</span><br><span class="line">1038</span><br><span class="line">1039</span><br><span class="line">1040</span><br><span class="line">1041</span><br><span class="line">1042</span><br><span class="line">1043</span><br><span class="line">1044</span><br><span class="line">1045</span><br><span class="line">1046</span><br><span class="line">1047</span><br><span class="line">1048</span><br><span class="line">1049</span><br><span class="line">1050</span><br><span class="line">1051</span><br><span class="line">1052</span><br><span class="line">1053</span><br><span class="line">1054</span><br><span class="line">1055</span><br><span class="line">1056</span><br><span class="line">1057</span><br><span class="line">1058</span><br><span class="line">1059</span><br><span class="line">1060</span><br><span class="line">1061</span><br><span class="line">1062</span><br><span class="line">1063</span><br><span class="line">1064</span><br><span class="line">1065</span><br><span class="line">1066</span><br><span class="line">1067</span><br><span class="line">1068</span><br><span class="line">1069</span><br><span class="line">1070</span><br><span class="line">1071</span><br><span class="line">1072</span><br><span class="line">1073</span><br><span class="line">1074</span><br><span class="line">1075</span><br><span class="line">1076</span><br><span class="line">1077</span><br><span class="line">1078</span><br><span class="line">1079</span><br><span class="line">1080</span><br><span class="line">1081</span><br><span class="line">1082</span><br><span class="line">1083</span><br><span class="line">1084</span><br><span class="line">1085</span><br><span class="line">1086</span><br><span class="line">1087</span><br><span class="line">1088</span><br><span class="line">1089</span><br><span class="line">1090</span><br><span class="line">1091</span><br><span class="line">1092</span><br><span class="line">1093</span><br><span class="line">1094</span><br><span class="line">1095</span><br><span class="line">1096</span><br><span class="line">1097</span><br><span class="line">1098</span><br><span class="line">1099</span><br><span class="line">1100</span><br><span class="line">1101</span><br><span class="line">1102</span><br><span class="line">1103</span><br><span class="line">1104</span><br><span class="line">1105</span><br><span class="line">1106</span><br><span class="line">1107</span><br><span class="line">1108</span><br><span class="line">1109</span><br><span class="line">1110</span><br><span class="line">1111</span><br><span class="line">1112</span><br><span class="line">1113</span><br><span class="line">1114</span><br><span class="line">1115</span><br><span class="line">1116</span><br><span class="line">1117</span><br><span class="line">1118</span><br><span class="line">1119</span><br><span class="line">1120</span><br><span class="line">1121</span><br><span class="line">1122</span><br><span class="line">1123</span><br><span class="line">1124</span><br><span class="line">1125</span><br><span class="line">1126</span><br><span class="line">1127</span><br><span class="line">1128</span><br><span class="line">1129</span><br><span class="line">1130</span><br><span class="line">1131</span><br><span class="line">1132</span><br><span class="line">1133</span><br><span class="line">1134</span><br><span class="line">1135</span><br><span class="line">1136</span><br><span class="line">1137</span><br><span class="line">1138</span><br><span class="line">1139</span><br><span class="line">1140</span><br><span class="line">1141</span><br><span class="line">1142</span><br><span class="line">1143</span><br><span class="line">1144</span><br><span class="line">1145</span><br><span class="line">1146</span><br><span class="line">1147</span><br><span class="line">1148</span><br><span class="line">1149</span><br><span class="line">1150</span><br><span class="line">1151</span><br><span class="line">1152</span><br><span class="line">1153</span><br><span class="line">1154</span><br><span class="line">1155</span><br><span class="line">1156</span><br><span class="line">1157</span><br><span class="line">1158</span><br><span class="line">1159</span><br><span class="line">1160</span><br><span class="line">1161</span><br><span class="line">1162</span><br><span class="line">1163</span><br><span class="line">1164</span><br><span class="line">1165</span><br><span class="line">1166</span><br><span class="line">1167</span><br><span class="line">1168</span><br><span class="line">1169</span><br><span class="line">1170</span><br><span class="line">1171</span><br><span class="line">1172</span><br><span class="line">1173</span><br><span class="line">1174</span><br><span class="line">1175</span><br><span class="line">1176</span><br><span class="line">1177</span><br><span class="line">1178</span><br><span class="line">1179</span><br><span class="line">1180</span><br><span class="line">1181</span><br><span class="line">1182</span><br><span class="line">1183</span><br><span class="line">1184</span><br><span class="line">1185</span><br><span class="line">1186</span><br><span class="line">1187</span><br><span class="line">1188</span><br><span class="line">1189</span><br><span class="line">1190</span><br><span class="line">1191</span><br><span class="line">1192</span><br><span class="line">1193</span><br><span class="line">1194</span><br><span class="line">1195</span><br><span class="line">1196</span><br><span class="line">1197</span><br><span class="line">1198</span><br><span class="line">1199</span><br><span class="line">1200</span><br><span class="line">1201</span><br><span class="line">1202</span><br><span class="line">1203</span><br><span class="line">1204</span><br><span class="line">1205</span><br><span class="line">1206</span><br><span class="line">1207</span><br><span class="line">1208</span><br><span class="line">1209</span><br><span class="line">1210</span><br><span class="line">1211</span><br><span class="line">1212</span><br><span class="line">1213</span><br><span class="line">1214</span><br><span class="line">1215</span><br><span class="line">1216</span><br><span class="line">1217</span><br><span class="line">1218</span><br><span class="line">1219</span><br><span class="line">1220</span><br><span class="line">1221</span><br><span class="line">1222</span><br><span class="line">1223</span><br><span class="line">1224</span><br><span class="line">1225</span><br><span class="line">1226</span><br><span class="line">1227</span><br><span class="line">1228</span><br><span class="line">1229</span><br><span class="line">1230</span><br><span class="line">1231</span><br><span class="line">1232</span><br><span class="line">1233</span><br><span class="line">1234</span><br><span class="line">1235</span><br><span class="line">1236</span><br><span class="line">1237</span><br><span class="line">1238</span><br><span class="line">1239</span><br><span class="line">1240</span><br><span class="line">1241</span><br><span class="line">1242</span><br><span class="line">1243</span><br><span class="line">1244</span><br><span class="line">1245</span><br><span class="line">1246</span><br><span class="line">1247</span><br><span class="line">1248</span><br><span class="line">1249</span><br><span class="line">1250</span><br><span class="line">1251</span><br><span class="line">1252</span><br><span class="line">1253</span><br><span class="line">1254</span><br><span class="line">1255</span><br><span class="line">1256</span><br><span class="line">1257</span><br><span class="line">1258</span><br><span class="line">1259</span><br><span class="line">1260</span><br><span class="line">1261</span><br><span class="line">1262</span><br><span class="line">1263</span><br><span class="line">1264</span><br><span class="line">1265</span><br><span class="line">1266</span><br><span class="line">1267</span><br><span class="line">1268</span><br><span class="line">1269</span><br><span class="line">1270</span><br><span class="line">1271</span><br><span class="line">1272</span><br><span class="line">1273</span><br><span class="line">1274</span><br><span class="line">1275</span><br><span class="line">1276</span><br><span class="line">1277</span><br><span class="line">1278</span><br><span class="line">1279</span><br><span class="line">1280</span><br><span class="line">1281</span><br><span class="line">1282</span><br><span class="line">1283</span><br><span class="line">1284</span><br><span class="line">1285</span><br><span class="line">1286</span><br><span class="line">1287</span><br><span class="line">1288</span><br><span class="line">1289</span><br><span class="line">1290</span><br><span class="line">1291</span><br><span class="line">1292</span><br><span class="line">1293</span><br><span class="line">1294</span><br><span class="line">1295</span><br><span class="line">1296</span><br><span class="line">1297</span><br><span class="line">1298</span><br><span class="line">1299</span><br><span class="line">1300</span><br><span class="line">1301</span><br><span class="line">1302</span><br><span class="line">1303</span><br><span class="line">1304</span><br><span class="line">1305</span><br><span class="line">1306</span><br><span class="line">1307</span><br><span class="line">1308</span><br><span class="line">1309</span><br><span class="line">1310</span><br><span class="line">1311</span><br><span class="line">1312</span><br><span class="line">1313</span><br><span class="line">1314</span><br><span class="line">1315</span><br><span class="line">1316</span><br><span class="line">1317</span><br><span class="line">1318</span><br><span class="line">1319</span><br><span class="line">1320</span><br><span class="line">1321</span><br><span class="line">1322</span><br><span class="line">1323</span><br><span class="line">1324</span><br><span class="line">1325</span><br><span class="line">1326</span><br><span class="line">1327</span><br><span class="line">1328</span><br><span class="line">1329</span><br><span class="line">1330</span><br><span class="line">1331</span><br><span class="line">1332</span><br><span class="line">1333</span><br><span class="line">1334</span><br><span class="line">1335</span><br><span class="line">1336</span><br><span class="line">1337</span><br><span class="line">1338</span><br><span class="line">1339</span><br><span class="line">1340</span><br><span class="line">1341</span><br><span class="line">1342</span><br><span class="line">1343</span><br><span class="line">1344</span><br><span class="line">1345</span><br><span class="line">1346</span><br><span class="line">1347</span><br><span class="line">1348</span><br><span class="line">1349</span><br><span class="line">1350</span><br><span class="line">1351</span><br><span class="line">1352</span><br><span class="line">1353</span><br><span class="line">1354</span><br><span class="line">1355</span><br><span class="line">1356</span><br><span class="line">1357</span><br><span class="line">1358</span><br><span class="line">1359</span><br><span class="line">1360</span><br><span class="line">1361</span><br><span class="line">1362</span><br><span class="line">1363</span><br><span class="line">1364</span><br><span class="line">1365</span><br><span class="line">1366</span><br><span class="line">1367</span><br><span class="line">1368</span><br><span class="line">1369</span><br><span class="line">1370</span><br><span class="line">1371</span><br><span class="line">1372</span><br><span class="line">1373</span><br><span class="line">1374</span><br><span class="line">1375</span><br><span class="line">1376</span><br><span class="line">1377</span><br><span class="line">1378</span><br><span class="line">1379</span><br><span class="line">1380</span><br><span class="line">1381</span><br><span class="line">1382</span><br><span class="line">1383</span><br><span class="line">1384</span><br><span class="line">1385</span><br><span class="line">1386</span><br><span class="line">1387</span><br><span class="line">1388</span><br><span class="line">1389</span><br><span class="line">1390</span><br><span class="line">1391</span><br><span class="line">1392</span><br><span class="line">1393</span><br><span class="line">1394</span><br><span class="line">1395</span><br><span class="line">1396</span><br><span class="line">1397</span><br><span class="line">1398</span><br><span class="line">1399</span><br><span class="line">1400</span><br><span class="line">1401</span><br><span class="line">1402</span><br><span class="line">1403</span><br><span class="line">1404</span><br><span class="line">1405</span><br><span class="line">1406</span><br><span class="line">1407</span><br><span class="line">1408</span><br><span class="line">1409</span><br><span class="line">1410</span><br><span class="line">1411</span><br><span class="line">1412</span><br><span class="line">1413</span><br><span class="line">1414</span><br><span class="line">1415</span><br><span class="line">1416</span><br><span class="line">1417</span><br><span class="line">1418</span><br><span class="line">1419</span><br><span class="line">1420</span><br><span class="line">1421</span><br><span class="line">1422</span><br><span class="line">1423</span><br><span class="line">1424</span><br><span class="line">1425</span><br><span class="line">1426</span><br><span class="line">1427</span><br><span class="line">1428</span><br><span class="line">1429</span><br><span class="line">1430</span><br><span class="line">1431</span><br><span class="line">1432</span><br><span class="line">1433</span><br><span class="line">1434</span><br><span class="line">1435</span><br><span class="line">1436</span><br><span class="line">1437</span><br><span class="line">1438</span><br><span class="line">1439</span><br><span class="line">1440</span><br><span class="line">1441</span><br><span class="line">1442</span><br><span class="line">1443</span><br><span class="line">1444</span><br><span class="line">1445</span><br><span class="line">1446</span><br><span class="line">1447</span><br><span class="line">1448</span><br><span class="line">1449</span><br><span class="line">1450</span><br><span class="line">1451</span><br><span class="line">1452</span><br><span class="line">1453</span><br><span class="line">1454</span><br><span class="line">1455</span><br><span class="line">1456</span><br><span class="line">1457</span><br><span class="line">1458</span><br><span class="line">1459</span><br><span class="line">1460</span><br><span class="line">1461</span><br><span class="line">1462</span><br><span class="line">1463</span><br><span class="line">1464</span><br><span class="line">1465</span><br><span class="line">1466</span><br><span class="line">1467</span><br><span class="line">1468</span><br><span class="line">1469</span><br><span class="line">1470</span><br><span class="line">1471</span><br><span class="line">1472</span><br><span class="line">1473</span><br><span class="line">1474</span><br><span class="line">1475</span><br><span class="line">1476</span><br><span class="line">1477</span><br><span class="line">1478</span><br><span class="line">1479</span><br><span class="line">1480</span><br><span class="line">1481</span><br><span class="line">1482</span><br><span class="line">1483</span><br><span class="line">1484</span><br><span class="line">1485</span><br><span class="line">1486</span><br><span class="line">1487</span><br><span class="line">1488</span><br><span class="line">1489</span><br><span class="line">1490</span><br><span class="line">1491</span><br><span class="line">1492</span><br><span class="line">1493</span><br><span class="line">1494</span><br><span class="line">1495</span><br><span class="line">1496</span><br><span class="line">1497</span><br><span class="line">1498</span><br><span class="line">1499</span><br><span class="line">1500</span><br><span class="line">1501</span><br><span class="line">1502</span><br><span class="line">1503</span><br><span class="line">1504</span><br><span class="line">1505</span><br><span class="line">1506</span><br><span class="line">1507</span><br><span class="line">1508</span><br><span class="line">1509</span><br><span class="line">1510</span><br><span class="line">1511</span><br><span class="line">1512</span><br><span class="line">1513</span><br><span class="line">1514</span><br><span class="line">1515</span><br><span class="line">1516</span><br><span class="line">1517</span><br><span class="line">1518</span><br><span class="line">1519</span><br><span class="line">1520</span><br><span class="line">1521</span><br><span class="line">1522</span><br><span class="line">1523</span><br><span class="line">1524</span><br><span class="line">1525</span><br><span class="line">1526</span><br><span class="line">1527</span><br><span class="line">1528</span><br><span class="line">1529</span><br><span class="line">1530</span><br><span class="line">1531</span><br><span class="line">1532</span><br><span class="line">1533</span><br><span class="line">1534</span><br><span class="line">1535</span><br><span class="line">1536</span><br><span class="line">1537</span><br><span class="line">1538</span><br><span class="line">1539</span><br><span class="line">1540</span><br><span class="line">1541</span><br><span class="line">1542</span><br><span class="line">1543</span><br><span class="line">1544</span><br><span class="line">1545</span><br><span class="line">1546</span><br><span class="line">1547</span><br><span class="line">1548</span><br><span class="line">1549</span><br><span class="line">1550</span><br><span class="line">1551</span><br><span class="line">1552</span><br><span class="line">1553</span><br><span class="line">1554</span><br><span class="line">1555</span><br><span class="line">1556</span><br><span class="line">1557</span><br><span class="line">1558</span><br><span class="line">1559</span><br><span class="line">1560</span><br><span class="line">1561</span><br><span class="line">1562</span><br><span class="line">1563</span><br><span class="line">1564</span><br><span class="line">1565</span><br><span class="line">1566</span><br><span class="line">1567</span><br><span class="line">1568</span><br><span class="line">1569</span><br><span class="line">1570</span><br><span class="line">1571</span><br><span class="line">1572</span><br><span class="line">1573</span><br><span class="line">1574</span><br><span class="line">1575</span><br><span class="line">1576</span><br><span class="line">1577</span><br><span class="line">1578</span><br><span class="line">1579</span><br><span class="line">1580</span><br><span class="line">1581</span><br><span class="line">1582</span><br><span class="line">1583</span><br><span class="line">1584</span><br><span class="line">1585</span><br><span class="line">1586</span><br><span class="line">1587</span><br><span class="line">1588</span><br><span class="line">1589</span><br><span class="line">1590</span><br><span class="line">1591</span><br><span class="line">1592</span><br><span class="line">1593</span><br><span class="line">1594</span><br><span class="line">1595</span><br><span class="line">1596</span><br><span class="line">1597</span><br><span class="line">1598</span><br><span class="line">1599</span><br><span class="line">1600</span><br><span class="line">1601</span><br><span class="line">1602</span><br><span class="line">1603</span><br><span class="line">1604</span><br><span class="line">1605</span><br><span class="line">1606</span><br><span class="line">1607</span><br><span class="line">1608</span><br><span class="line">1609</span><br><span class="line">1610</span><br><span class="line">1611</span><br><span class="line">1612</span><br><span class="line">1613</span><br><span class="line">1614</span><br><span class="line">1615</span><br><span class="line">1616</span><br><span class="line">1617</span><br><span class="line">1618</span><br><span class="line">1619</span><br><span class="line">1620</span><br><span class="line">1621</span><br><span class="line">1622</span><br><span class="line">1623</span><br><span class="line">1624</span><br><span class="line">1625</span><br><span class="line">1626</span><br><span class="line">1627</span><br><span class="line">1628</span><br><span class="line">1629</span><br><span class="line">1630</span><br><span class="line">1631</span><br><span class="line">1632</span><br><span class="line">1633</span><br><span class="line">1634</span><br><span class="line">1635</span><br><span class="line">1636</span><br><span class="line">1637</span><br><span class="line">1638</span><br><span class="line">1639</span><br><span class="line">1640</span><br><span class="line">1641</span><br><span class="line">1642</span><br><span class="line">1643</span><br><span class="line">1644</span><br><span class="line">1645</span><br><span class="line">1646</span><br><span class="line">1647</span><br><span class="line">1648</span><br><span class="line">1649</span><br><span class="line">1650</span><br><span class="line">1651</span><br><span class="line">1652</span><br><span class="line">1653</span><br><span class="line">1654</span><br><span class="line">1655</span><br><span class="line">1656</span><br><span class="line">1657</span><br><span class="line">1658</span><br><span class="line">1659</span><br><span class="line">1660</span><br><span class="line">1661</span><br><span class="line">1662</span><br><span class="line">1663</span><br><span class="line">1664</span><br><span class="line">1665</span><br><span class="line">1666</span><br><span class="line">1667</span><br><span class="line">1668</span><br><span class="line">1669</span><br><span class="line">1670</span><br><span class="line">1671</span><br><span class="line">1672</span><br><span class="line">1673</span><br><span class="line">1674</span><br><span class="line">1675</span><br><span class="line">1676</span><br><span class="line">1677</span><br><span class="line">1678</span><br><span class="line">1679</span><br><span class="line">1680</span><br><span class="line">1681</span><br><span class="line">1682</span><br><span class="line">1683</span><br><span class="line">1684</span><br><span class="line">1685</span><br><span class="line">1686</span><br><span class="line">1687</span><br><span class="line">1688</span><br><span class="line">1689</span><br><span class="line">1690</span><br><span class="line">1691</span><br><span class="line">1692</span><br><span class="line">1693</span><br><span class="line">1694</span><br><span class="line">1695</span><br><span class="line">1696</span><br><span class="line">1697</span><br><span class="line">1698</span><br><span class="line">1699</span><br><span class="line">1700</span><br><span class="line">1701</span><br><span class="line">1702</span><br><span class="line">1703</span><br><span class="line">1704</span><br><span class="line">1705</span><br><span class="line">1706</span><br><span class="line">1707</span><br><span class="line">1708</span><br><span class="line">1709</span><br><span class="line">1710</span><br><span class="line">1711</span><br><span class="line">1712</span><br><span class="line">1713</span><br><span class="line">1714</span><br><span class="line">1715</span><br><span class="line">1716</span><br><span class="line">1717</span><br><span class="line">1718</span><br><span class="line">1719</span><br><span class="line">1720</span><br><span class="line">1721</span><br><span class="line">1722</span><br><span class="line">1723</span><br><span class="line">1724</span><br><span class="line">1725</span><br><span class="line">1726</span><br><span class="line">1727</span><br><span class="line">1728</span><br><span class="line">1729</span><br><span class="line">1730</span><br><span class="line">1731</span><br><span class="line">1732</span><br><span class="line">1733</span><br><span class="line">1734</span><br><span class="line">1735</span><br><span class="line">1736</span><br><span class="line">1737</span><br><span class="line">1738</span><br><span class="line">1739</span><br><span class="line">1740</span><br><span class="line">1741</span><br><span class="line">1742</span><br><span class="line">1743</span><br><span class="line">1744</span><br><span class="line">1745</span><br><span class="line">1746</span><br><span class="line">1747</span><br><span class="line">1748</span><br><span class="line">1749</span><br><span class="line">1750</span><br><span class="line">1751</span><br><span class="line">1752</span><br><span class="line">1753</span><br><span class="line">1754</span><br><span class="line">1755</span><br><span class="line">1756</span><br><span class="line">1757</span><br><span class="line">1758</span><br><span class="line">1759</span><br><span class="line">1760</span><br><span class="line">1761</span><br><span class="line">1762</span><br><span class="line">1763</span><br><span class="line">1764</span><br><span class="line">1765</span><br><span class="line">1766</span><br><span class="line">1767</span><br><span class="line">1768</span><br><span class="line">1769</span><br><span class="line">1770</span><br><span class="line">1771</span><br><span class="line">1772</span><br><span class="line">1773</span><br><span class="line">1774</span><br><span class="line">1775</span><br><span class="line">1776</span><br><span class="line">1777</span><br><span class="line">1778</span><br><span class="line">1779</span><br><span class="line">1780</span><br><span class="line">1781</span><br><span class="line">1782</span><br><span class="line">1783</span><br><span class="line">1784</span><br><span class="line">1785</span><br><span class="line">1786</span><br><span class="line">1787</span><br><span class="line">1788</span><br><span class="line">1789</span><br><span class="line">1790</span><br><span class="line">1791</span><br><span class="line">1792</span><br><span class="line">1793</span><br><span class="line">1794</span><br><span class="line">1795</span><br><span class="line">1796</span><br><span class="line">1797</span><br><span class="line">1798</span><br><span class="line">1799</span><br><span class="line">1800</span><br><span class="line">1801</span><br><span class="line">1802</span><br><span class="line">1803</span><br><span class="line">1804</span><br><span class="line">1805</span><br><span class="line">1806</span><br><span class="line">1807</span><br><span class="line">1808</span><br><span class="line">1809</span><br><span class="line">1810</span><br><span class="line">1811</span><br><span class="line">1812</span><br><span class="line">1813</span><br><span class="line">1814</span><br><span class="line">1815</span><br><span class="line">1816</span><br><span class="line">1817</span><br><span class="line">1818</span><br><span class="line">1819</span><br><span class="line">1820</span><br><span class="line">1821</span><br><span class="line">1822</span><br><span class="line">1823</span><br><span class="line">1824</span><br><span class="line">1825</span><br><span class="line">1826</span><br><span class="line">1827</span><br><span class="line">1828</span><br><span class="line">1829</span><br><span class="line">1830</span><br><span class="line">1831</span><br><span class="line">1832</span><br><span class="line">1833</span><br><span class="line">1834</span><br><span class="line">1835</span><br><span class="line">1836</span><br><span class="line">1837</span><br><span class="line">1838</span><br><span class="line">1839</span><br><span class="line">1840</span><br><span class="line">1841</span><br><span class="line">1842</span><br><span class="line">1843</span><br><span class="line">1844</span><br><span class="line">1845</span><br><span class="line">1846</span><br><span class="line">1847</span><br><span class="line">1848</span><br><span class="line">1849</span><br><span class="line">1850</span><br><span class="line">1851</span><br><span class="line">1852</span><br><span class="line">1853</span><br><span class="line">1854</span><br><span class="line">1855</span><br><span class="line">1856</span><br><span class="line">1857</span><br><span class="line">1858</span><br><span class="line">1859</span><br><span class="line">1860</span><br><span class="line">1861</span><br><span class="line">1862</span><br><span class="line">1863</span><br><span class="line">1864</span><br><span class="line">1865</span><br><span class="line">1866</span><br><span class="line">1867</span><br><span class="line">1868</span><br><span class="line">1869</span><br><span class="line">1870</span><br><span class="line">1871</span><br><span class="line">1872</span><br><span class="line">1873</span><br><span class="line">1874</span><br><span class="line">1875</span><br><span class="line">1876</span><br><span class="line">1877</span><br><span class="line">1878</span><br><span class="line">1879</span><br><span class="line">1880</span><br><span class="line">1881</span><br><span class="line">1882</span><br><span class="line">1883</span><br><span class="line">1884</span><br><span class="line">1885</span><br><span class="line">1886</span><br><span class="line">1887</span><br><span class="line">1888</span><br><span class="line">1889</span><br><span class="line">1890</span><br><span class="line">1891</span><br><span class="line">1892</span><br><span class="line">1893</span><br><span class="line">1894</span><br><span class="line">1895</span><br><span class="line">1896</span><br><span class="line">1897</span><br><span class="line">1898</span><br><span class="line">1899</span><br><span class="line">1900</span><br><span class="line">1901</span><br><span class="line">1902</span><br><span class="line">1903</span><br><span class="line">1904</span><br><span class="line">1905</span><br><span class="line">1906</span><br><span class="line">1907</span><br><span class="line">1908</span><br><span class="line">1909</span><br><span class="line">1910</span><br><span class="line">1911</span><br><span class="line">1912</span><br><span class="line">1913</span><br><span class="line">1914</span><br><span class="line">1915</span><br><span class="line">1916</span><br><span class="line">1917</span><br><span class="line">1918</span><br><span class="line">1919</span><br><span class="line">1920</span><br><span class="line">1921</span><br><span class="line">1922</span><br><span class="line">1923</span><br><span class="line">1924</span><br><span class="line">1925</span><br><span class="line">1926</span><br><span class="line">1927</span><br><span class="line">1928</span><br><span class="line">1929</span><br><span class="line">1930</span><br><span class="line">1931</span><br><span class="line">1932</span><br><span class="line">1933</span><br><span class="line">1934</span><br><span class="line">1935</span><br><span class="line">1936</span><br><span class="line">1937</span><br><span class="line">1938</span><br><span class="line">1939</span><br><span class="line">1940</span><br><span class="line">1941</span><br><span class="line">1942</span><br><span class="line">1943</span><br><span class="line">1944</span><br><span class="line">1945</span><br><span class="line">1946</span><br><span class="line">1947</span><br><span class="line">1948</span><br><span class="line">1949</span><br><span class="line">1950</span><br><span class="line">1951</span><br><span class="line">1952</span><br><span class="line">1953</span><br><span class="line">1954</span><br><span class="line">1955</span><br><span class="line">1956</span><br><span class="line">1957</span><br><span class="line">1958</span><br><span class="line">1959</span><br><span class="line">1960</span><br><span class="line">1961</span><br><span class="line">1962</span><br><span class="line">1963</span><br><span class="line">1964</span><br><span class="line">1965</span><br><span class="line">1966</span><br><span class="line">1967</span><br><span class="line">1968</span><br><span class="line">1969</span><br><span class="line">1970</span><br><span class="line">1971</span><br><span class="line">1972</span><br><span class="line">1973</span><br><span class="line">1974</span><br><span class="line">1975</span><br><span class="line">1976</span><br><span class="line">1977</span><br><span class="line">1978</span><br><span class="line">1979</span><br><span class="line">1980</span><br><span class="line">1981</span><br><span class="line">1982</span><br><span class="line">1983</span><br><span class="line">1984</span><br><span class="line">1985</span><br><span class="line">1986</span><br><span class="line">1987</span><br><span class="line">1988</span><br><span class="line">1989</span><br><span class="line">1990</span><br><span class="line">1991</span><br><span class="line">1992</span><br><span class="line">1993</span><br><span class="line">1994</span><br><span class="line">1995</span><br><span class="line">1996</span><br><span class="line">1997</span><br><span class="line">1998</span><br><span class="line">1999</span><br><span class="line">2000</span><br><span class="line">2001</span><br><span class="line">2002</span><br><span class="line">2003</span><br><span class="line">2004</span><br><span class="line">2005</span><br><span class="line">2006</span><br><span class="line">2007</span><br><span class="line">2008</span><br><span class="line">2009</span><br><span class="line">2010</span><br><span class="line">2011</span><br><span class="line">2012</span><br><span class="line">2013</span><br><span class="line">2014</span><br><span class="line">2015</span><br><span class="line">2016</span><br><span class="line">2017</span><br><span class="line">2018</span><br><span class="line">2019</span><br><span class="line">2020</span><br><span class="line">2021</span><br><span class="line">2022</span><br><span class="line">2023</span><br><span class="line">2024</span><br><span class="line">2025</span><br><span class="line">2026</span><br><span class="line">2027</span><br><span class="line">2028</span><br><span class="line">2029</span><br><span class="line">2030</span><br><span class="line">2031</span><br><span class="line">2032</span><br><span class="line">2033</span><br><span class="line">2034</span><br><span class="line">2035</span><br><span class="line">2036</span><br><span class="line">2037</span><br><span class="line">2038</span><br><span class="line">2039</span><br><span class="line">2040</span><br><span class="line">2041</span><br><span class="line">2042</span><br><span class="line">2043</span><br><span class="line">2044</span><br><span class="line">2045</span><br><span class="line">2046</span><br><span class="line">2047</span><br><span class="line">2048</span><br><span class="line">2049</span><br><span class="line">2050</span><br><span class="line">2051</span><br><span class="line">2052</span><br><span class="line">2053</span><br><span class="line">2054</span><br><span class="line">2055</span><br><span class="line">2056</span><br><span class="line">2057</span><br><span class="line">2058</span><br><span class="line">2059</span><br><span class="line">2060</span><br><span class="line">2061</span><br><span class="line">2062</span><br><span class="line">2063</span><br><span class="line">2064</span><br><span class="line">2065</span><br><span class="line">2066</span><br><span class="line">2067</span><br><span class="line">2068</span><br><span class="line">2069</span><br><span class="line">2070</span><br><span class="line">2071</span><br><span class="line">2072</span><br><span class="line">2073</span><br><span class="line">2074</span><br><span class="line">2075</span><br><span class="line">2076</span><br><span class="line">2077</span><br><span class="line">2078</span><br><span class="line">2079</span><br><span class="line">2080</span><br><span class="line">2081</span><br><span class="line">2082</span><br><span class="line">2083</span><br><span class="line">2084</span><br><span class="line">2085</span><br><span class="line">2086</span><br><span class="line">2087</span><br><span class="line">2088</span><br><span class="line">2089</span><br><span class="line">2090</span><br><span class="line">2091</span><br><span class="line">2092</span><br><span class="line">2093</span><br><span class="line">2094</span><br><span class="line">2095</span><br><span class="line">2096</span><br><span class="line">2097</span><br><span class="line">2098</span><br><span class="line">2099</span><br><span class="line">2100</span><br><span class="line">2101</span><br><span class="line">2102</span><br><span class="line">2103</span><br><span class="line">2104</span><br><span class="line">2105</span><br><span class="line">2106</span><br><span class="line">2107</span><br><span class="line">2108</span><br><span class="line">2109</span><br><span class="line">2110</span><br><span class="line">2111</span><br><span class="line">2112</span><br><span class="line">2113</span><br><span class="line">2114</span><br><span class="line">2115</span><br><span class="line">2116</span><br><span class="line">2117</span><br><span class="line">2118</span><br><span class="line">2119</span><br><span class="line">2120</span><br><span class="line">2121</span><br><span class="line">2122</span><br><span class="line">2123</span><br><span class="line">2124</span><br><span class="line">2125</span><br><span class="line">2126</span><br><span class="line">2127</span><br><span class="line">2128</span><br><span class="line">2129</span><br><span class="line">2130</span><br><span class="line">2131</span><br><span class="line">2132</span><br><span class="line">2133</span><br><span class="line">2134</span><br><span class="line">2135</span><br><span class="line">2136</span><br><span class="line">2137</span><br><span class="line">2138</span><br><span class="line">2139</span><br><span class="line">2140</span><br><span class="line">2141</span><br><span class="line">2142</span><br><span class="line">2143</span><br><span class="line">2144</span><br><span class="line">2145</span><br><span class="line">2146</span><br><span class="line">2147</span><br><span class="line">2148</span><br><span class="line">2149</span><br><span class="line">2150</span><br><span class="line">2151</span><br><span class="line">2152</span><br><span class="line">2153</span><br><span class="line">2154</span><br><span class="line">2155</span><br><span class="line">2156</span><br><span class="line">2157</span><br><span class="line">2158</span><br><span class="line">2159</span><br><span class="line">2160</span><br><span class="line">2161</span><br><span class="line">2162</span><br><span class="line">2163</span><br><span class="line">2164</span><br><span class="line">2165</span><br><span class="line">2166</span><br><span class="line">2167</span><br><span class="line">2168</span><br><span class="line">2169</span><br><span class="line">2170</span><br><span class="line">2171</span><br><span class="line">2172</span><br><span class="line">2173</span><br><span class="line">2174</span><br><span class="line">2175</span><br><span class="line">2176</span><br><span class="line">2177</span><br><span class="line">2178</span><br><span class="line">2179</span><br><span class="line">2180</span><br><span class="line">2181</span><br><span class="line">2182</span><br><span class="line">2183</span><br><span class="line">2184</span><br><span class="line">2185</span><br><span class="line">2186</span><br><span class="line">2187</span><br><span class="line">2188</span><br><span class="line">2189</span><br><span class="line">2190</span><br><span class="line">2191</span><br><span class="line">2192</span><br><span class="line">2193</span><br><span class="line">2194</span><br><span class="line">2195</span><br><span class="line">2196</span><br><span class="line">2197</span><br><span class="line">2198</span><br><span class="line">2199</span><br><span class="line">2200</span><br><span class="line">2201</span><br><span class="line">2202</span><br><span class="line">2203</span><br><span class="line">2204</span><br><span class="line">2205</span><br><span class="line">2206</span><br><span class="line">2207</span><br><span class="line">2208</span><br><span class="line">2209</span><br><span class="line">2210</span><br><span class="line">2211</span><br><span class="line">2212</span><br><span class="line">2213</span><br><span class="line">2214</span><br><span class="line">2215</span><br><span class="line">2216</span><br><span class="line">2217</span><br><span class="line">2218</span><br><span class="line">2219</span><br><span class="line">2220</span><br><span class="line">2221</span><br><span class="line">2222</span><br><span class="line">2223</span><br><span class="line">2224</span><br><span class="line">2225</span><br><span class="line">2226</span><br><span class="line">2227</span><br><span class="line">2228</span><br><span class="line">2229</span><br><span class="line">2230</span><br><span class="line">2231</span><br><span class="line">2232</span><br><span class="line">2233</span><br><span class="line">2234</span><br><span class="line">2235</span><br><span class="line">2236</span><br><span class="line">2237</span><br><span class="line">2238</span><br><span class="line">2239</span><br><span class="line">2240</span><br><span class="line">2241</span><br><span class="line">2242</span><br><span class="line">2243</span><br><span class="line">2244</span><br><span class="line">2245</span><br><span class="line">2246</span><br><span class="line">2247</span><br><span class="line">2248</span><br><span class="line">2249</span><br><span class="line">2250</span><br><span class="line">2251</span><br><span class="line">2252</span><br><span class="line">2253</span><br><span class="line">2254</span><br><span class="line">2255</span><br><span class="line">2256</span><br><span class="line">2257</span><br><span class="line">2258</span><br><span class="line">2259</span><br><span class="line">2260</span><br><span class="line">2261</span><br><span class="line">2262</span><br><span class="line">2263</span><br><span class="line">2264</span><br><span class="line">2265</span><br><span class="line">2266</span><br><span class="line">2267</span><br><span class="line">2268</span><br><span class="line">2269</span><br><span class="line">2270</span><br><span class="line">2271</span><br><span class="line">2272</span><br><span class="line">2273</span><br><span class="line">2274</span><br><span class="line">2275</span><br><span class="line">2276</span><br><span class="line">2277</span><br><span class="line">2278</span><br><span class="line">2279</span><br><span class="line">2280</span><br><span class="line">2281</span><br><span class="line">2282</span><br><span class="line">2283</span><br><span class="line">2284</span><br><span class="line">2285</span><br><span class="line">2286</span><br><span class="line">2287</span><br><span class="line">2288</span><br><span class="line">2289</span><br><span class="line">2290</span><br><span class="line">2291</span><br><span class="line">2292</span><br><span class="line">2293</span><br><span class="line">2294</span><br><span class="line">2295</span><br><span class="line">2296</span><br><span class="line">2297</span><br><span class="line">2298</span><br><span class="line">2299</span><br><span class="line">2300</span><br><span class="line">2301</span><br><span class="line">2302</span><br><span class="line">2303</span><br><span class="line">2304</span><br><span class="line">2305</span><br><span class="line">2306</span><br><span class="line">2307</span><br><span class="line">2308</span><br><span class="line">2309</span><br><span class="line">2310</span><br><span class="line">2311</span><br><span class="line">2312</span><br><span class="line">2313</span><br><span class="line">2314</span><br><span class="line">2315</span><br><span class="line">2316</span><br><span class="line">2317</span><br><span class="line">2318</span><br><span class="line">2319</span><br><span class="line">2320</span><br><span class="line">2321</span><br><span class="line">2322</span><br><span class="line">2323</span><br><span class="line">2324</span><br><span class="line">2325</span><br><span class="line">2326</span><br><span class="line">2327</span><br><span class="line">2328</span><br><span class="line">2329</span><br><span class="line">2330</span><br><span class="line">2331</span><br><span class="line">2332</span><br><span class="line">2333</span><br><span class="line">2334</span><br><span class="line">2335</span><br><span class="line">2336</span><br><span class="line">2337</span><br><span class="line">2338</span><br><span class="line">2339</span><br><span class="line">2340</span><br><span class="line">2341</span><br><span class="line">2342</span><br><span class="line">2343</span><br><span class="line">2344</span><br><span class="line">2345</span><br><span class="line">2346</span><br><span class="line">2347</span><br><span class="line">2348</span><br><span class="line">2349</span><br><span class="line">2350</span><br><span class="line">2351</span><br><span class="line">2352</span><br><span class="line">2353</span><br><span class="line">2354</span><br><span class="line">2355</span><br><span class="line">2356</span><br><span class="line">2357</span><br><span class="line">2358</span><br><span class="line">2359</span><br><span class="line">2360</span><br><span class="line">2361</span><br><span class="line">2362</span><br><span class="line">2363</span><br><span class="line">2364</span><br><span class="line">2365</span><br><span class="line">2366</span><br><span class="line">2367</span><br><span class="line">2368</span><br><span class="line">2369</span><br><span class="line">2370</span><br><span class="line">2371</span><br><span class="line">2372</span><br><span class="line">2373</span><br><span class="line">2374</span><br><span class="line">2375</span><br><span class="line">2376</span><br><span class="line">2377</span><br><span class="line">2378</span><br><span class="line">2379</span><br><span class="line">2380</span><br><span class="line">2381</span><br><span class="line">2382</span><br><span class="line">2383</span><br><span class="line">2384</span><br><span class="line">2385</span><br><span class="line">2386</span><br><span class="line">2387</span><br><span class="line">2388</span><br><span class="line">2389</span><br><span class="line">2390</span><br><span class="line">2391</span><br><span class="line">2392</span><br><span class="line">2393</span><br><span class="line">2394</span><br><span class="line">2395</span><br><span class="line">2396</span><br><span class="line">2397</span><br><span class="line">2398</span><br><span class="line">2399</span><br><span class="line">2400</span><br><span class="line">2401</span><br><span class="line">2402</span><br><span class="line">2403</span><br><span class="line">2404</span><br><span class="line">2405</span><br><span class="line">2406</span><br><span class="line">2407</span><br><span class="line">2408</span><br><span class="line">2409</span><br><span class="line">2410</span><br><span class="line">2411</span><br><span class="line">2412</span><br><span class="line">2413</span><br><span class="line">2414</span><br><span class="line">2415</span><br><span class="line">2416</span><br><span class="line">2417</span><br><span class="line">2418</span><br><span class="line">2419</span><br><span class="line">2420</span><br><span class="line">2421</span><br><span class="line">2422</span><br><span class="line">2423</span><br><span class="line">2424</span><br><span class="line">2425</span><br><span class="line">2426</span><br><span class="line">2427</span><br><span class="line">2428</span><br><span class="line">2429</span><br><span class="line">2430</span><br><span class="line">2431</span><br><span class="line">2432</span><br><span class="line">2433</span><br><span class="line">2434</span><br><span class="line">2435</span><br><span class="line">2436</span><br><span class="line">2437</span><br><span class="line">2438</span><br><span class="line">2439</span><br><span class="line">2440</span><br><span class="line">2441</span><br><span class="line">2442</span><br><span class="line">2443</span><br><span class="line">2444</span><br><span class="line">2445</span><br><span class="line">2446</span><br><span class="line">2447</span><br><span class="line">2448</span><br><span class="line">2449</span><br><span class="line">2450</span><br><span class="line">2451</span><br><span class="line">2452</span><br><span class="line">2453</span><br><span class="line">2454</span><br><span class="line">2455</span><br><span class="line">2456</span><br><span class="line">2457</span><br><span class="line">2458</span><br><span class="line">2459</span><br><span class="line">2460</span><br><span class="line">2461</span><br><span class="line">2462</span><br><span class="line">2463</span><br><span class="line">2464</span><br><span class="line">2465</span><br><span class="line">2466</span><br><span class="line">2467</span><br><span class="line">2468</span><br><span class="line">2469</span><br><span class="line">2470</span><br><span class="line">2471</span><br><span class="line">2472</span><br><span class="line">2473</span><br><span class="line">2474</span><br><span class="line">2475</span><br><span class="line">2476</span><br><span class="line">2477</span><br><span class="line">2478</span><br><span class="line">2479</span><br><span class="line">2480</span><br><span class="line">2481</span><br><span class="line">2482</span><br><span class="line">2483</span><br><span class="line">2484</span><br><span class="line">2485</span><br><span class="line">2486</span><br><span class="line">2487</span><br><span class="line">2488</span><br><span class="line">2489</span><br><span class="line">2490</span><br><span class="line">2491</span><br><span class="line">2492</span><br><span class="line">2493</span><br><span class="line">2494</span><br><span class="line">2495</span><br><span class="line">2496</span><br><span class="line">2497</span><br><span class="line">2498</span><br><span class="line">2499</span><br><span class="line">2500</span><br><span class="line">2501</span><br><span class="line">2502</span><br><span class="line">2503</span><br><span class="line">2504</span><br><span class="line">2505</span><br><span class="line">2506</span><br><span class="line">2507</span><br><span class="line">2508</span><br><span class="line">2509</span><br><span class="line">2510</span><br><span class="line">2511</span><br><span class="line">2512</span><br><span class="line">2513</span><br><span class="line">2514</span><br><span class="line">2515</span><br><span class="line">2516</span><br><span class="line">2517</span><br><span class="line">2518</span><br><span class="line">2519</span><br><span class="line">2520</span><br><span class="line">2521</span><br><span class="line">2522</span><br><span class="line">2523</span><br><span class="line">2524</span><br><span class="line">2525</span><br><span class="line">2526</span><br><span class="line">2527</span><br><span class="line">2528</span><br><span class="line">2529</span><br><span class="line">2530</span><br><span class="line">2531</span><br><span class="line">2532</span><br><span class="line">2533</span><br><span class="line">2534</span><br><span class="line">2535</span><br><span class="line">2536</span><br><span class="line">2537</span><br><span class="line">2538</span><br><span class="line">2539</span><br><span class="line">2540</span><br><span class="line">2541</span><br><span class="line">2542</span><br><span class="line">2543</span><br><span class="line">2544</span><br><span class="line">2545</span><br><span class="line">2546</span><br><span class="line">2547</span><br><span class="line">2548</span><br><span class="line">2549</span><br><span class="line">2550</span><br><span class="line">2551</span><br><span class="line">2552</span><br><span class="line">2553</span><br><span class="line">2554</span><br><span class="line">2555</span><br><span class="line">2556</span><br><span class="line">2557</span><br><span class="line">2558</span><br><span class="line">2559</span><br><span class="line">2560</span><br><span class="line">2561</span><br><span class="line">2562</span><br><span class="line">2563</span><br><span class="line">2564</span><br><span class="line">2565</span><br><span class="line">2566</span><br><span class="line">2567</span><br><span class="line">2568</span><br><span class="line">2569</span><br><span class="line">2570</span><br><span class="line">2571</span><br><span class="line">2572</span><br><span class="line">2573</span><br><span class="line">2574</span><br><span class="line">2575</span><br><span class="line">2576</span><br><span class="line">2577</span><br><span class="line">2578</span><br><span class="line">2579</span><br><span class="line">2580</span><br><span class="line">2581</span><br><span class="line">2582</span><br><span class="line">2583</span><br><span class="line">2584</span><br><span class="line">2585</span><br><span class="line">2586</span><br><span class="line">2587</span><br><span class="line">2588</span><br><span class="line">2589</span><br><span class="line">2590</span><br><span class="line">2591</span><br><span class="line">2592</span><br><span class="line">2593</span><br><span class="line">2594</span><br><span class="line">2595</span><br><span class="line">2596</span><br><span class="line">2597</span><br><span class="line">2598</span><br><span class="line">2599</span><br><span class="line">2600</span><br><span class="line">2601</span><br><span class="line">2602</span><br><span class="line">2603</span><br><span class="line">2604</span><br><span class="line">2605</span><br><span class="line">2606</span><br><span class="line">2607</span><br><span class="line">2608</span><br><span class="line">2609</span><br><span class="line">2610</span><br><span class="line">2611</span><br><span class="line">2612</span><br><span class="line">2613</span><br><span class="line">2614</span><br><span class="line">2615</span><br><span class="line">2616</span><br><span class="line">2617</span><br><span class="line">2618</span><br><span class="line">2619</span><br><span class="line">2620</span><br><span class="line">2621</span><br><span class="line">2622</span><br><span class="line">2623</span><br><span class="line">2624</span><br><span class="line">2625</span><br><span class="line">2626</span><br><span class="line">2627</span><br><span class="line">2628</span><br><span class="line">2629</span><br><span class="line">2630</span><br><span class="line">2631</span><br><span class="line">2632</span><br><span class="line">2633</span><br><span class="line">2634</span><br><span class="line">2635</span><br><span class="line">2636</span><br><span class="line">2637</span><br><span class="line">2638</span><br><span class="line">2639</span><br><span class="line">2640</span><br><span class="line">2641</span><br><span class="line">2642</span><br><span class="line">2643</span><br><span class="line">2644</span><br><span class="line">2645</span><br><span class="line">2646</span><br><span class="line">2647</span><br><span class="line">2648</span><br><span class="line">2649</span><br><span class="line">2650</span><br><span class="line">2651</span><br><span class="line">2652</span><br><span class="line">2653</span><br><span class="line">2654</span><br><span class="line">2655</span><br><span class="line">2656</span><br><span class="line">2657</span><br><span class="line">2658</span><br><span class="line">2659</span><br><span class="line">2660</span><br><span class="line">2661</span><br><span class="line">2662</span><br><span class="line">2663</span><br><span class="line">2664</span><br><span class="line">2665</span><br><span class="line">2666</span><br><span class="line">2667</span><br><span class="line">2668</span><br><span class="line">2669</span><br><span class="line">2670</span><br><span class="line">2671</span><br><span class="line">2672</span><br><span class="line">2673</span><br><span class="line">2674</span><br><span class="line">2675</span><br><span class="line">2676</span><br><span class="line">2677</span><br><span class="line">2678</span><br><span class="line">2679</span><br><span class="line">2680</span><br><span class="line">2681</span><br><span class="line">2682</span><br><span class="line">2683</span><br><span class="line">2684</span><br><span class="line">2685</span><br><span class="line">2686</span><br><span class="line">2687</span><br><span class="line">2688</span><br><span class="line">2689</span><br><span class="line">2690</span><br><span class="line">2691</span><br><span class="line">2692</span><br><span class="line">2693</span><br><span class="line">2694</span><br><span class="line">2695</span><br><span class="line">2696</span><br><span class="line">2697</span><br><span class="line">2698</span><br><span class="line">2699</span><br><span class="line">2700</span><br><span class="line">2701</span><br><span class="line">2702</span><br><span class="line">2703</span><br><span class="line">2704</span><br><span class="line">2705</span><br><span class="line">2706</span><br><span class="line">2707</span><br><span class="line">2708</span><br><span class="line">2709</span><br><span class="line">2710</span><br><span class="line">2711</span><br><span class="line">2712</span><br><span class="line">2713</span><br><span class="line">2714</span><br><span class="line">2715</span><br><span class="line">2716</span><br><span class="line">2717</span><br><span class="line">2718</span><br><span class="line">2719</span><br><span class="line">2720</span><br><span class="line">2721</span><br><span class="line">2722</span><br><span class="line">2723</span><br><span class="line">2724</span><br><span class="line">2725</span><br><span class="line">2726</span><br><span class="line">2727</span><br><span class="line">2728</span><br><span class="line">2729</span><br><span class="line">2730</span><br><span class="line">2731</span><br><span class="line">2732</span><br><span class="line">2733</span><br><span class="line">2734</span><br><span class="line">2735</span><br><span class="line">2736</span><br><span class="line">2737</span><br><span class="line">2738</span><br><span class="line">2739</span><br><span class="line">2740</span><br><span class="line">2741</span><br><span class="line">2742</span><br><span class="line">2743</span><br><span class="line">2744</span><br><span class="line">2745</span><br><span class="line">2746</span><br><span class="line">2747</span><br><span class="line">2748</span><br><span class="line">2749</span><br><span class="line">2750</span><br><span class="line">2751</span><br><span class="line">2752</span><br><span class="line">2753</span><br><span class="line">2754</span><br><span class="line">2755</span><br><span class="line">2756</span><br><span class="line">2757</span><br><span class="line">2758</span><br><span class="line">2759</span><br><span class="line">2760</span><br><span class="line">2761</span><br><span class="line">2762</span><br><span class="line">2763</span><br><span class="line">2764</span><br><span class="line">2765</span><br><span class="line">2766</span><br><span class="line">2767</span><br><span class="line">2768</span><br><span class="line">2769</span><br><span class="line">2770</span><br><span class="line">2771</span><br><span class="line">2772</span><br><span class="line">2773</span><br><span class="line">2774</span><br><span class="line">2775</span><br><span class="line">2776</span><br><span class="line">2777</span><br><span class="line">2778</span><br><span class="line">2779</span><br><span class="line">2780</span><br><span class="line">2781</span><br><span class="line">2782</span><br><span class="line">2783</span><br><span class="line">2784</span><br><span class="line">2785</span><br><span class="line">2786</span><br><span class="line">2787</span><br><span class="line">2788</span><br><span class="line">2789</span><br><span class="line">2790</span><br><span class="line">2791</span><br><span class="line">2792</span><br><span class="line">2793</span><br><span class="line">2794</span><br><span class="line">2795</span><br><span class="line">2796</span><br><span class="line">2797</span><br><span class="line">2798</span><br><span class="line">2799</span><br><span class="line">2800</span><br><span class="line">2801</span><br><span class="line">2802</span><br><span class="line">2803</span><br><span class="line">2804</span><br><span class="line">2805</span><br><span class="line">2806</span><br><span class="line">2807</span><br><span class="line">2808</span><br><span class="line">2809</span><br><span class="line">2810</span><br><span class="line">2811</span><br><span class="line">2812</span><br><span class="line">2813</span><br><span class="line">2814</span><br><span class="line">2815</span><br><span class="line">2816</span><br><span class="line">2817</span><br><span class="line">2818</span><br><span class="line">2819</span><br><span class="line">2820</span><br><span class="line">2821</span><br><span class="line">2822</span><br><span class="line">2823</span><br><span class="line">2824</span><br><span class="line">2825</span><br><span class="line">2826</span><br><span class="line">2827</span><br><span class="line">2828</span><br><span class="line">2829</span><br><span class="line">2830</span><br><span class="line">2831</span><br><span class="line">2832</span><br><span class="line">2833</span><br><span class="line">2834</span><br><span class="line">2835</span><br><span class="line">2836</span><br><span class="line">2837</span><br><span class="line">2838</span><br><span class="line">2839</span><br><span class="line">2840</span><br><span class="line">2841</span><br><span class="line">2842</span><br><span class="line">2843</span><br><span class="line">2844</span><br><span class="line">2845</span><br><span class="line">2846</span><br><span class="line">2847</span><br><span class="line">2848</span><br><span class="line">2849</span><br><span class="line">2850</span><br><span class="line">2851</span><br><span class="line">2852</span><br><span class="line">2853</span><br><span class="line">2854</span><br><span class="line">2855</span><br><span class="line">2856</span><br><span class="line">2857</span><br><span class="line">2858</span><br><span class="line">2859</span><br><span class="line">2860</span><br><span class="line">2861</span><br><span class="line">2862</span><br><span class="line">2863</span><br><span class="line">2864</span><br><span class="line">2865</span><br><span class="line">2866</span><br><span class="line">2867</span><br><span class="line">2868</span><br><span class="line">2869</span><br><span class="line">2870</span><br><span class="line">2871</span><br><span class="line">2872</span><br><span class="line">2873</span><br><span class="line">2874</span><br><span class="line">2875</span><br><span class="line">2876</span><br><span class="line">2877</span><br><span class="line">2878</span><br><span class="line">2879</span><br><span class="line">2880</span><br><span class="line">2881</span><br><span class="line">2882</span><br><span class="line">2883</span><br><span class="line">2884</span><br><span class="line">2885</span><br><span class="line">2886</span><br><span class="line">2887</span><br><span class="line">2888</span><br><span class="line">2889</span><br><span class="line">2890</span><br><span class="line">2891</span><br><span class="line">2892</span><br><span class="line">2893</span><br><span class="line">2894</span><br><span class="line">2895</span><br><span class="line">2896</span><br><span class="line">2897</span><br><span class="line">2898</span><br><span class="line">2899</span><br><span class="line">2900</span><br><span class="line">2901</span><br><span class="line">2902</span><br><span class="line">2903</span><br><span class="line">2904</span><br><span class="line">2905</span><br><span class="line">2906</span><br><span class="line">2907</span><br><span class="line">2908</span><br><span class="line">2909</span><br><span class="line">2910</span><br><span class="line">2911</span><br><span class="line">2912</span><br><span class="line">2913</span><br><span class="line">2914</span><br><span class="line">2915</span><br><span class="line">2916</span><br><span class="line">2917</span><br><span class="line">2918</span><br><span class="line">2919</span><br><span class="line">2920</span><br><span class="line">2921</span><br><span class="line">2922</span><br><span class="line">2923</span><br><span class="line">2924</span><br><span class="line">2925</span><br><span class="line">2926</span><br><span class="line">2927</span><br><span class="line">2928</span><br><span class="line">2929</span><br><span class="line">2930</span><br><span class="line">2931</span><br><span class="line">2932</span><br><span class="line">2933</span><br><span class="line">2934</span><br><span class="line">2935</span><br><span class="line">2936</span><br><span class="line">2937</span><br><span class="line">2938</span><br><span class="line">2939</span><br><span class="line">2940</span><br><span class="line">2941</span><br><span class="line">2942</span><br><span class="line">2943</span><br><span class="line">2944</span><br><span class="line">2945</span><br><span class="line">2946</span><br><span class="line">2947</span><br><span class="line">2948</span><br><span class="line">2949</span><br><span class="line">2950</span><br><span class="line">2951</span><br><span class="line">2952</span><br><span class="line">2953</span><br><span class="line">2954</span><br><span class="line">2955</span><br><span class="line">2956</span><br><span class="line">2957</span><br><span class="line">2958</span><br><span class="line">2959</span><br><span class="line">2960</span><br><span class="line">2961</span><br><span class="line">2962</span><br><span class="line">2963</span><br><span class="line">2964</span><br><span class="line">2965</span><br><span class="line">2966</span><br><span class="line">2967</span><br><span class="line">2968</span><br><span class="line">2969</span><br><span class="line">2970</span><br><span class="line">2971</span><br><span class="line">2972</span><br><span class="line">2973</span><br><span class="line">2974</span><br><span class="line">2975</span><br><span class="line">2976</span><br><span class="line">2977</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-comment">// 请复制本代码到打开的ACME服务URL页面的浏览器控制台中运行。</span><br><br><span class="hljs-keyword">var</span> <span class="hljs-title class_">Default</span>_ACME_URL=<span class="hljs-string">&quot;https://acme.zerossl.com/v2/DV90/directory&quot;</span>;<br><span class="hljs-keyword">var</span> <span class="hljs-title class_">IsReadDirGotoCORS</span>=<span class="hljs-literal">true</span>;<br><span class="hljs-keyword">var</span> <span class="hljs-title class_">PageRawHTML</span>=<span class="hljs-string">`&lt;html&gt;&lt;head&gt;</span><br><span class="hljs-string">&lt;meta http-equiv=&quot;Content-Type&quot; content=&quot;text/html; charset=utf-8&quot;&gt;</span><br><span class="hljs-string">&lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0&quot;&gt;</span><br><span class="hljs-string">&lt;link rel=&quot;shortcut icon&quot; type=&quot;image/png&quot; href=&quot;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAAe1BMVEUDuu3///8AtuwAue1c0/QAt+1a0vSZ4/gOve4Ju+4AtOzf9v31/P4iw/DS8/yf5fnE7/tNzvMsxvHw+/7t+v7k+P2U4veO4PeA3Pbp+f7h9/3Y9f3I8Pxt1/Vi1PRQz/NDzPIzyPEWv+76/v/3/f+87fqn5/mI3/Z82vb+fQDoAAAA10lEQVQ4y63T2c7CIBCGYWamUwFZurfuy7/e/xVaeySlYmJ8T78nISQgPh0xU2pGZa1EfrazHJz5an2FT3brYKoul4UqAHx5Hhqoq6VTMAc4aER9acDjEviFPd2voP9gKykGVECHkzyBsRzvI+g1jWG5BFDIPXRKjqkcTKUwPISPbvsN9XpqA9DuehXsF4g64APALAY+AHkMVm+CzToNVld1NAmwE0zaJ0DBQughAcxZ66tLAGj6f/f2NdMgewXKGHSPgOTPfG/Dh0vqlAXlluefahaLT3UDvrAKrj7jLKkAAAAASUVORK5CYII=&quot;&gt;</span><br><span class="hljs-string"></span><br><span class="hljs-string">&lt;title&gt;ACME Web Browser Client | ACME客户端H5网页单文件版，在线免费申请签发SSL/TLS通配符泛域名HTTPS证书，支持Let&#x27;s Encrypt、ZeroSSL，无需账号免登录注册 | Windows macOS Get Wildcard Certificates Online For Free - Single HTML File&lt;/title&gt;</span><br><span class="hljs-string">&lt;/head&gt;</span><br><span class="hljs-string"></span><br><span class="hljs-string">&lt;body&gt;</span><br><span class="hljs-string">&lt;script&gt;</span><br><span class="hljs-string">var Version=&quot;1.0.230820&quot;;</span><br><span class="hljs-string">console.log(&quot;LICENSE: GPL-3.0, https://github.com/xiangyuecn/ACME-HTML-Web-Browser-Client/blob/main/LICENSE&quot;);</span><br><span class="hljs-string">/***********************************</span><br><span class="hljs-string">中英对照翻译主要来自：Chrome自带翻译+百度翻译，由中文翻译成English（作者英文很菜）。</span><br><span class="hljs-string">The Chinese-English translation is mainly from: Chrome comes with translation + Baidu translation, which is translated from Chinese to English (the author&#x27;s English level is very low)</span><br><span class="hljs-string"></span><br><span class="hljs-string">感谢围观本客户端源码，所有功能的代码都在本页面一个文件内，逻辑上会比较长和比较丑（关键地方或多或少有写注释），如感不适，请转头看看旁边的大长腿，再深呼吸一下继续看下一行~</span><br><span class="hljs-string">Thank you for watching the source code of this client. The code of all functions is in one file on this page, which is logically long and ugly (more or less comments are written in key places). If you feel uncomfortable, please turn your head and look at the Big Long Legs next to you, take another deep breath and continue to look at the next line~</span><br><span class="hljs-string">************************************/</span><br><span class="hljs-string">&lt;/script&gt;</span><br><span class="hljs-string"></span><br><span class="hljs-string"></span><br><span class="hljs-string">&lt;div class=&quot;main-load&quot; style=&quot;padding-top:40vh;text-align:center;font-size:28px&quot;&gt;Loading...&lt;/div&gt;</span><br><span class="hljs-string">&lt;div class=&quot;main&quot; style=&quot;display:none&quot;&gt;</span><br><span class="hljs-string">&lt;div class=&quot;mainBox acmeReadDirGotoCORSState&quot; style=&quot;display:none&quot;&gt;&lt;/div&gt;</span><br><span class="hljs-string"></span><br><span class="hljs-string">&lt;div class=&quot;mainBox&quot;&gt;</span><br><span class="hljs-string">	&lt;span style=&quot;font-size:32px;font-weight:bold;color:#03baed;&quot;&gt;</span><br><span class="hljs-string">		&lt;span class=&quot;langCN clientNameCN&quot;&gt;HTML5网页版ACME客户端&lt;/span&gt;</span><br><span class="hljs-string">		&lt;span class=&quot;langEN clientNameEN&quot;&gt;ACME Web Browser Client&lt;/span&gt;</span><br><span class="hljs-string">	&lt;/span&gt;</span><br><span class="hljs-string">	&lt;span class=&quot;versionBox&quot; style=&quot;font-size:14px;color:#03baed;margin-right:80px&quot;&gt;&lt;/span&gt;</span><br><span class="hljs-string">	&lt;span style=&quot;display:inline-block&quot;&gt;</span><br><span class="hljs-string">		&lt;span class=&quot;langCN&quot;&gt;开源代码：&lt;/span&gt;</span><br><span class="hljs-string">		&lt;span class=&quot;langEN&quot;&gt;Open source: &lt;/span&gt;</span><br><span class="hljs-string">		&lt;a href=&quot;https://github.com/xiangyuecn/ACME-HTML-Web-Browser-Client&quot; target=&quot;_blank&quot;&gt;GitHub &amp;gt;&amp;gt;&lt;/a&gt;</span><br><span class="hljs-string">		&lt;span class=&quot;langCN&quot;&gt;</span><br><span class="hljs-string">			| &lt;a href=&quot;https://gitee.com/xiangyuecn/ACME-HTML-Web-Browser-Client&quot; target=&quot;_blank&quot;&gt;Gitee &amp;gt;&amp;gt;&lt;/a&gt;</span><br><span class="hljs-string">		&lt;/span&gt;</span><br><span class="hljs-string">	&lt;/span&gt;</span><br><span class="hljs-string">	</span><br><span class="hljs-string">	&lt;ul class=&quot;itemBox feature_ul&quot; style=&quot;list-style-type: none;margin:8px 0 0 0;padding:0 8px 0 8px;color:#666&quot;&gt;</span><br><span class="hljs-string">		&lt;li class=&quot;langCN&quot;&gt;&lt;i&gt;功能用途&lt;/i&gt;本网页客户端用于：向 &lt;a href=&quot;https://letsencrypt.org/&quot; target=&quot;_blank&quot;&gt;Let&#x27;s Encrypt&lt;/a&gt;、&lt;a href=&quot;https://zerossl.com/&quot; target=&quot;_blank&quot;&gt;ZeroSSL&lt;/a&gt;、&lt;a href=&quot;https://pki.goog/&quot; target=&quot;_blank&quot;&gt;Google&lt;/a&gt; 等支持 ACME 协议的证书颁发机构，免费申请获得用于 HTTPS 的 SSL/TLS 域名证书（RSA、ECC/ECDSA），支持多域名和通配符泛域名；只需在现代浏览器上操作即可获得 PEM 格式纯文本的域名证书，不依赖操作系统环境，无需下载和安装软件，纯手动操作，&lt;span class=&quot;Bold&quot;&gt;只专注于申请获得证书这一件事。&lt;/span&gt;&lt;/li&gt;</span><br><span class="hljs-string">		&lt;li class=&quot;langEN&quot;&gt;&lt;i&gt;Functional use&lt;/i&gt;This web client is used to: apply for free SSL/TLS domain name certificates (RSA, ECC/ECDSA) for HTTPS from &lt;a href=&quot;https://letsencrypt.org/&quot; target=&quot;_blank&quot;&gt;Let&#x27;s Encrypt&lt;/a&gt; , &lt;a href=&quot;https://zerossl.com/&quot; target=&quot;_blank&quot;&gt;ZeroSSL&lt;/a&gt; , &lt;a href=&quot;https://pki.goog/&quot; target=&quot;_blank&quot;&gt;Google&lt;/a&gt; and other certificate authorities that support the ACME protocol, and support multiple domain names and wildcard pan-domain names; Simply operate on a modern browser to obtain a domain name certificate in plain text in PEM format, does not depend on the operating system environment, does not need to download and install software, and is purely manual, &lt;span class=&quot;Bold&quot;&gt;only focus on the only thing that is to apply for and obtain a certificate.&lt;/span&gt;&lt;/li&gt;</span><br><span class="hljs-string">		</span><br><span class="hljs-string">		&lt;li class=&quot;langCN&quot;&gt;&lt;i&gt;简单易用&lt;/i&gt;点点鼠标 Ctrl+C Ctrl+V 就能完成证书的申请，全程需要的操作少，每一步都有保姆级操作提示，UI友好大气美观；&lt;span class=&quot;Bold&quot;&gt;本客户端不需要注册账号、更不需要登录。&lt;/span&gt;&lt;/li&gt;</span><br><span class="hljs-string">		&lt;li class=&quot;langEN&quot;&gt;&lt;i&gt;Easy to use&lt;/i&gt;Click the mouse and Ctrl+C Ctrl+V to complete the certificate application. The whole process requires less operations, and there are nanny level operation prompts at each step; UI friendly, atmospheric and beautiful; &lt;span class=&quot;Bold&quot;&gt;This client does not need to register an account, and does not need to log in.&lt;/span&gt;&lt;/li&gt;</span><br><span class="hljs-string">		</span><br><span class="hljs-string">		&lt;li class=&quot;langCN&quot;&gt;&lt;i&gt;开源项目&lt;/i&gt;本网页客户端源码已开源，访问网址由托管仓库提供，源码透明可追溯。&lt;/li&gt;</span><br><span class="hljs-string">		&lt;li class=&quot;langEN&quot;&gt;&lt;i&gt;Open source project&lt;/i&gt;The source code of the client side of this webpage has been open sourced, and the access URL is provided by the hosting warehouse, and the source code is transparent and traceable.&lt;/li&gt;</span><br><span class="hljs-string">		</span><br><span class="hljs-string">		&lt;li class=&quot;langCN&quot;&gt;&lt;i&gt;单一文件&lt;/i&gt;本网页客户端仅一个静态 HTML 文件，不依赖其他任何文件；因此可以直接保存到你本地（右键-另存为），即可通过浏览器打开。&lt;/li&gt;</span><br><span class="hljs-string">		&lt;li class=&quot;langEN&quot;&gt;&lt;i&gt;A single file&lt;/i&gt;This web client is only a single static HTML web page file and does not depend on any other files; therefore, it can be directly saved to your local (right-click - save as), and you can open it through a browser.&lt;/li&gt;</span><br><span class="hljs-string">		</span><br><span class="hljs-string">		&lt;li class=&quot;langCN&quot;&gt;&lt;i&gt;数据安全&lt;/i&gt;除了你指定证书颁发机构的 ACME 接口地址外，本网页客户端不会向其他任何地址发送数据，通过浏览器控制台很容易做到网络数据审查。&lt;/li&gt;</span><br><span class="hljs-string">		&lt;li class=&quot;langEN&quot;&gt;&lt;i&gt;Data security&lt;/i&gt;Except for the ACME interface address of the certificate authority you specify, this web client will not send data to any other address, and it is easy to check the network data through the browser console.&lt;/li&gt;</span><br><span class="hljs-string">		</span><br><span class="hljs-string">		&lt;li class=&quot;langCN&quot;&gt;&lt;i&gt;系统安全&lt;/i&gt;纯网页应用，不会也无法对你的电脑系统做出任何修改。&lt;/li&gt;</span><br><span class="hljs-string">		&lt;li class=&quot;langEN&quot;&gt;&lt;i&gt;System security&lt;/i&gt;Pure web application, will not and cannot make any modification to your computer system.&lt;/li&gt;</span><br><span class="hljs-string">		</span><br><span class="hljs-string">		&lt;li class=&quot;langCN&quot; style=&quot;color:#cb1d1d&quot;&gt;&lt;i style=&quot;background:#cb1d1d&quot;&gt;证书过期风险提醒&lt;/i&gt;由于本网页客户端只能纯手动操作，不支持自动续期，需注意在证书过期前重新生申请新证书（免费证书普遍90天有效期，届时只需重复操作一遍即可），或使用 acme.sh 等客户端自动化续期。&lt;/li&gt;</span><br><span class="hljs-string">		&lt;li class=&quot;langEN&quot; style=&quot;color:#cb1d1d&quot;&gt;&lt;i style=&quot;background:#cb1d1d&quot;&gt;Certificate Expiration Risk Alert&lt;/i&gt;Since this web client can only be operated manually and does not support automatic renewal, you should pay attention to apply for a new certificate before the certificate expires (free certificates are generally valid for 90 days, you only need to repeat the operation at that time), or use acme.sh and other client automatic renewal.&lt;/li&gt;</span><br><span class="hljs-string">	&lt;/ul&gt;</span><br><span class="hljs-string">	&lt;style&gt;</span><br><span class="hljs-string">		.feature_ul li&#123;margin: 8px 0;&#125;</span><br><span class="hljs-string">		.feature_ul i&#123;</span><br><span class="hljs-string">			font-style: normal;</span><br><span class="hljs-string">			margin-right:8px;</span><br><span class="hljs-string">			display: inline-block;</span><br><span class="hljs-string">			vertical-align: middle;</span><br><span class="hljs-string">			background: #03baed;</span><br><span class="hljs-string">			color: #fff;</span><br><span class="hljs-string">			font-size: 14px;</span><br><span class="hljs-string">			padding: 2px 8px;</span><br><span class="hljs-string">			border-radius: 99px;</span><br><span class="hljs-string">		&#125;</span><br><span class="hljs-string">	&lt;/style&gt;</span><br><span class="hljs-string">&lt;/div&gt;</span><br><span class="hljs-string"></span><br><span class="hljs-string"></span><br><span class="hljs-string"></span><br><span class="hljs-string"></span><br><span class="hljs-string"></span><br><span class="hljs-string">&lt;div class=&quot;mainBox&quot;&gt;</span><br><span class="hljs-string">	&lt;div class=&quot;pd itemTitle&quot;&gt;</span><br><span class="hljs-string">		&lt;span class=&quot;langCN&quot;&gt;步骤一：选择证书颁发机构&lt;/span&gt;</span><br><span class="hljs-string">		&lt;span class=&quot;langEN&quot;&gt;Step 1: Select a Certificate Authority&lt;/span&gt;</span><br><span class="hljs-string">	&lt;/div&gt;</span><br><span class="hljs-string">	&lt;div class=&quot;itemBox&quot;&gt;</span><br><span class="hljs-string">		&lt;div class=&quot;pd Bold&quot;&gt;</span><br><span class="hljs-string">			&lt;i class=&quot;must&quot;&gt;*&lt;/i&gt;</span><br><span class="hljs-string">			&lt;span class=&quot;langCN&quot;&gt;证书颁发机构 ACME(v2, &lt;a href=&quot;https://www.rfc-editor.org/rfc/rfc8555.html&quot; target=&quot;_blank&quot;&gt;RFC 8555&lt;/a&gt;) 服务URL：&lt;/span&gt;</span><br><span class="hljs-string">			&lt;span class=&quot;langEN&quot;&gt;Certificate Authority ACME (v2, &lt;a href=&quot;https://www.rfc-editor.org/rfc/rfc8555.html&quot; target=&quot;_blank&quot;&gt;RFC 8555&lt;/a&gt;) Service URL:&lt;/span&gt;</span><br><span class="hljs-string">		&lt;/div&gt;</span><br><span class="hljs-string">		&lt;div class=&quot;pd&quot;&gt;</span><br><span class="hljs-string">			&lt;label&gt;&lt;input type=&quot;radio&quot; name=&quot;choice_acmeURL&quot; value=&quot;https://acme-v02.api.letsencrypt.org/directory&quot; desckey=&quot;descLetsEncrypt&quot;&gt;Let&#x27;s Encrypt&lt;/label&gt;</span><br><span class="hljs-string">			&lt;label&gt;&lt;input type=&quot;radio&quot; name=&quot;choice_acmeURL&quot; value=&quot;https://acme.zerossl.com/v2/DV90/directory&quot; desckey=&quot;descZeroSSL&quot;&gt;ZeroSSL&lt;/label&gt;</span><br><span class="hljs-string">			&lt;label&gt;&lt;input type=&quot;radio&quot; name=&quot;choice_acmeURL&quot; value=&quot;https://dv.acme-v02.api.pki.goog/directory&quot; desckey=&quot;descGoogle&quot;&gt;Google&lt;/label&gt;</span><br><span class="hljs-string">			&lt;label&gt;</span><br><span class="hljs-string">				&lt;input type=&quot;radio&quot; name=&quot;choice_acmeURL&quot; value=&quot;manual&quot;&gt;</span><br><span class="hljs-string">				&lt;span class=&quot;langCN&quot;&gt;手动填写URL&lt;/span&gt;</span><br><span class="hljs-string">				&lt;span class=&quot;langEN&quot;&gt;Fill in the URL manually&lt;/span&gt;</span><br><span class="hljs-string">			&lt;/label&gt;</span><br><span class="hljs-string">			&lt;label&gt;</span><br><span class="hljs-string">				&lt;input type=&quot;radio&quot; name=&quot;choice_acmeURL&quot; value=&quot;https://acme-staging-v02.api.letsencrypt.org/directory&quot;&gt;</span><br><span class="hljs-string">				&lt;span class=&quot;langCN&quot;&gt;测试用[不要选]&lt;/span&gt;</span><br><span class="hljs-string">				&lt;span class=&quot;langEN&quot;&gt;For testing, don&#x27;t choose&lt;/span&gt;</span><br><span class="hljs-string">			&lt;/label&gt;</span><br><span class="hljs-string">		&lt;/div&gt;</span><br><span class="hljs-string">		</span><br><span class="hljs-string">		&lt;div style=&quot;font-size:13px;color:#aaa&quot;&gt;</span><br><span class="hljs-string">			&lt;div class=&quot;pd descAcmeURL descLetsEncrypt&quot; style=&quot;display:none&quot;&gt;</span><br><span class="hljs-string">				&lt;a href=&quot;https://letsencrypt.org/&quot; target=&quot;_blank&quot;&gt;Let&#x27;s Encrypt&lt;/a&gt;:</span><br><span class="hljs-string">				&lt;span class=&quot;langCN&quot;&gt;请按照下面的操作步骤提示进行申请即可得到证书，证书有效期90天。&lt;/span&gt;</span><br><span class="hljs-string">				&lt;span class=&quot;langEN&quot;&gt;Please follow the operation steps prompts below to apply, and you can get the certificate, which is valid for 90 days.&lt;/span&gt;</span><br><span class="hljs-string">			&lt;/div&gt;</span><br><span class="hljs-string">			&lt;div class=&quot;pd descAcmeURL descZeroSSL&quot; style=&quot;display:none&quot;&gt;</span><br><span class="hljs-string">				&lt;a href=&quot;https://zerossl.com/&quot; target=&quot;_blank&quot;&gt;ZeroSSL&lt;/a&gt;:</span><br><span class="hljs-string">				&lt;span style=&quot;color:#f80&quot;&gt;</span><br><span class="hljs-string">					&lt;span class=&quot;langCN&quot;&gt;此URL可能需要先根据下面的提示进行操作来消除跨域不能访问的问题。&lt;/span&gt;</span><br><span class="hljs-string">					&lt;span class=&quot;langEN&quot;&gt;This URL may need to be operated according to the prompts below to eliminate the problem of cross-domain inaccessibility.&lt;/span&gt;</span><br><span class="hljs-string">				&lt;/span&gt;</span><br><span class="hljs-string">				&lt;span class=&quot;langCN&quot;&gt;申请证书前，你需要根据ZeroSSL的&lt;a href=&quot;https://zerossl.com/documentation/acme/&quot; target=&quot;_blank&quot;&gt;官方文档&lt;/a&gt;，先注册ZeroSSL账号并生成一个EAB凭据，每次申请证书时使用此EAB凭据，按照下面的操作步骤提示进行申请即可得到证书，证书有效期90天。&lt;/span&gt;</span><br><span class="hljs-string">				&lt;span class=&quot;langEN&quot;&gt;Before applying for a certificate, you need to follow ZeroSSL&#x27;s &lt;a href=&quot;https://zerossl.com/documentation/acme/&quot; target=&quot;_blank&quot;&gt;official documents&lt;/a&gt;, register a ZeroSSL account and generate an EAB credential, and use this EAB credential every time you apply for a certificate, follow the operation steps prompts below to apply, and you can get the certificate, which is valid for 90 days.&lt;/span&gt;</span><br><span class="hljs-string">			&lt;/div&gt;</span><br><span class="hljs-string">			&lt;div class=&quot;pd descAcmeURL descGoogle&quot; style=&quot;display:none&quot;&gt;</span><br><span class="hljs-string">				&lt;a href=&quot;https://pki.goog/&quot; target=&quot;_blank&quot;&gt;Google Trust Services&lt;/a&gt;:</span><br><span class="hljs-string">				&lt;span style=&quot;color:#f80&quot;&gt;</span><br><span class="hljs-string">					&lt;span class=&quot;langCN&quot;&gt;此URL可能需要先根据下面的提示进行操作来消除跨域不能访问的问题。&lt;/span&gt;</span><br><span class="hljs-string">					&lt;span class=&quot;langEN&quot;&gt;This URL may need to be operated according to the prompts below to eliminate the problem of cross-domain inaccessibility.&lt;/span&gt;</span><br><span class="hljs-string">				&lt;/span&gt;</span><br><span class="hljs-string">				&lt;span class=&quot;langCN&quot;&gt;申请证书前，你需要根据Google的&lt;a href=&quot;https://cloud.google.com/certificate-manager/docs/public-ca-tutorial&quot; target=&quot;_blank&quot;&gt;官方文档&lt;/a&gt;，在Google Cloud中生成一个EAB凭据，每次申请证书时使用此EAB凭据，按照下面的操作步骤提示进行申请即可得到证书，证书有效期90天。&lt;/span&gt;</span><br><span class="hljs-string">				&lt;span class=&quot;langEN&quot;&gt;Before applying for a certificate, you need to follow Google&#x27;s &lt;a href=&quot;https://cloud.google.com/certificate-manager/docs/public-ca-tutorial&quot; target=&quot;_blank&quot;&gt;official documents&lt;/a&gt;, generate an EAB credential in Google Cloud, and use this EAB credential every time you apply for a certificate, follow the operation steps prompts below to apply, and you can get the certificate, which is valid for 90 days.&lt;/span&gt;</span><br><span class="hljs-string">				&lt;span style=&quot;color:#f80&quot;&gt;</span><br><span class="hljs-string">					&lt;span class=&quot;langCN&quot;&gt;注意：因为同一个Google EAB凭据只能绑定到一个ACME账户（私钥），因此你在首次申请证书时，&lt;span style=&quot;font-weight:bold;font-size:20px&quot;&gt;必须同时保存好在第二步操作中新创建的或手动填写的ACME账户私钥&lt;/span&gt;，下次申请证书时使用此EAB凭据必须和已保存的ACME账户私钥一起使用。&lt;/span&gt;</span><br><span class="hljs-string">					&lt;span class=&quot;langEN&quot;&gt;Note: Because the same Google EAB credential can only be bound to one ACME account (Private key), when you apply for a certificate for the first time, &lt;span style=&quot;font-weight:bold;font-size:20px&quot;&gt;you must also save the newly generated or manually filled ACME account private key in the second step&lt;/span&gt;, this EAB credential must be used together with the saved ACME account private key when applying for a certificate next time.&lt;/span&gt;</span><br><span class="hljs-string">				&lt;/span&gt;</span><br><span class="hljs-string">			&lt;/div&gt;</span><br><span class="hljs-string">		&lt;/div&gt;</span><br><span class="hljs-string">		</span><br><span class="hljs-string">		&lt;div class=&quot;pd FlexBox&quot;&gt;</span><br><span class="hljs-string">			&lt;div class=&quot;FlexItem&quot;&gt;</span><br><span class="hljs-string">				&lt;input class=&quot;in_acmeURL inputLang&quot; style=&quot;width:100%&quot; placeholder-cn=&quot;请填写证书颁发机构ACME服务URL&quot; placeholder-en=&quot;Please fill in the Certificate Authority ACME Service URL&quot;&gt;</span><br><span class="hljs-string">			&lt;/div&gt;</span><br><span class="hljs-string">			&lt;div style=&quot;padding-left:12px&quot;&gt;</span><br><span class="hljs-string">				&lt;span class=&quot;mainBtn mainBtnMin&quot; onclick=&quot;acmeReadDirClick()&quot; style=&quot;padding:0 50px&quot;&gt;</span><br><span class="hljs-string">					&lt;span class=&quot;langCN&quot;&gt;读取服务目录&lt;/span&gt;</span><br><span class="hljs-string">					&lt;span class=&quot;langEN&quot;&gt;Read service directory&lt;/span&gt;</span><br><span class="hljs-string">				&lt;/span&gt;</span><br><span class="hljs-string">			&lt;/div&gt;</span><br><span class="hljs-string">		&lt;/div&gt;</span><br><span class="hljs-string">		&lt;div class=&quot;acmeReadDirState&quot;&gt;&lt;/div&gt;</span><br><span class="hljs-string">&lt;script&gt;</span><br><span class="hljs-string">//跨域支持的不好的ACME服务，直接复制源码到他们网站里面运行</span><br><span class="hljs-string">var acmeReadDirGotoCORSInit=function()&#123;</span><br><span class="hljs-string">	if(!window.IsReadDirGotoCORS)return;</span><br><span class="hljs-string">	var stateEl=$(&quot;.acmeReadDirGotoCORSState&quot;).show().html(\`</span><br><span class="hljs-string">&lt;div style=&quot;color:#cb1d1d&quot;&gt;</span><br><span class="hljs-string">	&lt;span class=&quot;langCN&quot;&gt;本客户端正在以跨域兼容模式运行，请按正常流程操作即可，目标ACME服务URL=$\&#123;window.Default_ACME_URL&#125;&lt;/span&gt;</span><br><span class="hljs-string">	&lt;span class=&quot;langEN&quot;&gt;This client is running in cross-domain compatibility mode, please follow the normal process, the target ACME service URL=$\&#123;window.Default_ACME_URL&#125;&lt;/span&gt;</span><br><span class="hljs-string">&lt;/div&gt;</span><br><span class="hljs-string">	\`);</span><br><span class="hljs-string">	LangReview(stateEl);</span><br><span class="hljs-string">&#125;;</span><br><span class="hljs-string">var acmeReadDirGotoCORS=function(title)&#123;</span><br><span class="hljs-string">	&quot;use strict&quot;;</span><br><span class="hljs-string">	var codes=&quot;// &quot;+Lang(&quot;请复制本代码到打开的ACME服务URL页面的浏览器控制台中运行。&quot;,&quot;Please copy this code to the browser console of the opened ACME service URL page to run.&quot;,true)</span><br><span class="hljs-string">		+&quot;\\n\\nvar Default_ACME_URL=&quot;+JSON.stringify(ACME.URL)+&quot;;&quot;</span><br><span class="hljs-string">		+&quot;\\nvar IsReadDirGotoCORS=true;&quot;</span><br><span class="hljs-string">		+&quot;\\nvar PageRawHTML=\`&quot;</span><br><span class="hljs-string">			+PageRawHTML.replace(/\\\\/g,&quot;\\\\\\\\&quot;).replace(/\`/g,&quot;\\\\\`&quot;).replace(/\\$\\&#123;/g,&quot;$\\\\&#123;&quot;)</span><br><span class="hljs-string">		+&quot;\`;&quot;;</span><br><span class="hljs-string">	codes+=&quot;\\n(&quot;+(function()&#123;</span><br><span class="hljs-string">		console.clear();</span><br><span class="hljs-string">		document.head.innerHTML=/&lt;head[^&gt;]*&gt;([\\S\\s]+?)&lt;\\/head&gt;/i.exec(PageRawHTML)[1];</span><br><span class="hljs-string">		document.body.innerHTML=/&lt;body[^&gt;]*&gt;([\\S\\s]+)&lt;\\/body&gt;/i.exec(PageRawHTML)[1];</span><br><span class="hljs-string">		var js=/&lt;script[^&gt;]*&gt;([\\S\\s]+?)&lt;\\/script&gt;/ig,m;</span><br><span class="hljs-string">		while(m=js.exec(PageRawHTML)) eval.call(window, m[1]);</span><br><span class="hljs-string">	&#125;).toString()+&quot;)()&quot;;</span><br><span class="hljs-string">	$(&quot;.gotoCORSBox&quot;).hide();</span><br><span class="hljs-string">	var stateEl=$(&quot;.acmeReadDirState&quot;).append(\`</span><br><span class="hljs-string">&lt;div class=&quot;gotoCORSBox&quot; style=&quot;padding-top:15px&quot;&gt;</span><br><span class="hljs-string">	&lt;div class=&quot;pd Bold&quot; style=&quot;color:red&quot;&gt;</span><br><span class="hljs-string">		&lt;i class=&quot;must&quot;&gt;*&lt;/i&gt;</span><br><span class="hljs-string">		\`+(title||\`</span><br><span class="hljs-string">		&lt;span class=&quot;langCN&quot;&gt;由于此ACME服务对跨域访问支持不良，&lt;/span&gt;</span><br><span class="hljs-string">		&lt;span class=&quot;langEN&quot;&gt;Because this ACME service has poor support for cross-domain access, &lt;/span&gt;</span><br><span class="hljs-string">		&lt;span style=&quot;font-size:24px&quot;&gt;</span><br><span class="hljs-string">			&lt;span class=&quot;langCN&quot;&gt;请按下面步骤操作：&lt;/span&gt;</span><br><span class="hljs-string">			&lt;span class=&quot;langEN&quot;&gt;please follow the steps below:&lt;/span&gt;</span><br><span class="hljs-string">		&lt;/span&gt;\`)+\`</span><br><span class="hljs-string">	&lt;/div&gt;</span><br><span class="hljs-string">&lt;div style=&quot;padding-left:40px&quot;&gt;</span><br><span class="hljs-string">	&lt;div class=&quot;pd&quot;&gt;</span><br><span class="hljs-string">		&lt;span class=&quot;langCN&quot;&gt;1. 请在浏览器中直接打开此ACME服务URL，&lt;a href=&quot;$\&#123;ACME.URL&#125;&quot; target=&quot;_blank&quot;&gt;点此打开&lt;/a&gt;；&lt;/span&gt;</span><br><span class="hljs-string">		&lt;span class=&quot;langEN&quot;&gt;1. Please open the ACME service URL directly in the browser, &lt;a href=&quot;$\&#123;ACME.URL&#125;&quot; target=&quot;_blank&quot;&gt;click here to open&lt;/a&gt;;&lt;/span&gt;</span><br><span class="hljs-string">	&lt;/div&gt;</span><br><span class="hljs-string">	&lt;div class=&quot;pd&quot;&gt;</span><br><span class="hljs-string">		&lt;span class=&quot;langCN&quot;&gt;2. 在上一步打开的页面中打开浏览器控制台（需等页面加载完成后，再按F12键）；&lt;/span&gt;</span><br><span class="hljs-string">		&lt;span class=&quot;langEN&quot;&gt;2. Open the browser console in the page opened in the previous step (after the page is loaded, press the F12 key);&lt;/span&gt;</span><br><span class="hljs-string">	&lt;/div&gt;</span><br><span class="hljs-string">	&lt;div class=&quot;pd&quot;&gt;</span><br><span class="hljs-string">		&lt;span class=&quot;langCN&quot;&gt;3. 复制以下代码，在第2步打开的浏览器控制台中运行，然后就可以正常申请证书了。&lt;/span&gt;</span><br><span class="hljs-string">		&lt;span class=&quot;langEN&quot;&gt;3. Copy the following code, run it in the browser console opened in step 2, and then you can apply for the certificate normally.&lt;/span&gt;</span><br><span class="hljs-string">	&lt;/div&gt;</span><br><span class="hljs-string">	&lt;div class=&quot;pd&quot; style=&quot;font-size:13px;color:#aaa&quot;&gt;</span><br><span class="hljs-string">		&lt;span class=&quot;langCN&quot;&gt;工作原理：代码内包含了本页面源码，在目标页面内运行后将原样的显示出本客户端，然后按正常流程操作即可，此时已没有跨域问题了（既然打不过，那就加入他们）。&lt;/span&gt;</span><br><span class="hljs-string">		&lt;span class=&quot;langEN&quot;&gt;Working principle: The code contains the source code of this page. After running in the target page, the client will be displayed as it is, and then operate according to the normal process. At this time, there is no cross-domain problem (if we can&#x27;t beat them, we&#x27;d better join them).&lt;/span&gt;</span><br><span class="hljs-string">	&lt;/div&gt;</span><br><span class="hljs-string">&lt;/div&gt;</span><br><span class="hljs-string">	&lt;div style=&quot;padding-top:20px&quot;&gt;</span><br><span class="hljs-string">		&lt;textarea class=&quot;gotoCORSText&quot; style=&quot;width:100%;height:200px&quot; readonly&gt;&lt;/textarea&gt;</span><br><span class="hljs-string">	&lt;/div&gt;</span><br><span class="hljs-string">&lt;/div&gt;</span><br><span class="hljs-string">	\`);</span><br><span class="hljs-string">	$(&quot;.gotoCORSText&quot;).val(codes);</span><br><span class="hljs-string">	LangReview(stateEl);</span><br><span class="hljs-string">&#125;;</span><br><span class="hljs-string">&lt;/script&gt;</span><br><span class="hljs-string">	&lt;/div&gt;</span><br><span class="hljs-string">&lt;/div&gt;</span><br><span class="hljs-string"></span><br><span class="hljs-string"></span><br><span class="hljs-string"></span><br><span class="hljs-string"></span><br><span class="hljs-string"></span><br><span class="hljs-string">&lt;div class=&quot;mainBox&quot;&gt;</span><br><span class="hljs-string">	&lt;div class=&quot;pd itemTitle&quot;&gt;</span><br><span class="hljs-string">		&lt;span class=&quot;langCN&quot;&gt;步骤二：证书配置&lt;/span&gt;</span><br><span class="hljs-string">		&lt;span class=&quot;langEN&quot;&gt;Step 2: Certificate Configuration&lt;/span&gt;</span><br><span class="hljs-string">	&lt;/div&gt;</span><br><span class="hljs-string">	&lt;div class=&quot;step2Hide step1Show&quot;&gt;</span><br><span class="hljs-string">		&lt;div class=&quot;itemBox&quot; style=&quot;color:#999&quot;&gt;</span><br><span class="hljs-string">			&lt;span class=&quot;langCN&quot;&gt;等待中，请先完成第一步...&lt;/span&gt;</span><br><span class="hljs-string">			&lt;span class=&quot;langEN&quot;&gt;Waiting, please complete step 1 first...&lt;/span&gt;</span><br><span class="hljs-string">		&lt;/div&gt;</span><br><span class="hljs-string">	&lt;/div&gt;</span><br><span class="hljs-string">	&lt;div class=&quot;step1Hide step2Show&quot;&gt;</span><br><span class="hljs-string">		</span><br><span class="hljs-string">		</span><br><span class="hljs-string">		&lt;div class=&quot;pd&quot; style=&quot;font-size:13px;color:#aaa&quot;&gt;</span><br><span class="hljs-string">			&lt;span class=&quot;langCN&quot;&gt;温馨提示：如果上次申请过证书，可以拖拽已下载保存的记录LOG文件到本页面，将自动填充上次的配置信息。&lt;/span&gt;</span><br><span class="hljs-string">			&lt;span class=&quot;langEN&quot;&gt;Reminder: If you have applied for a certificate last time, you can drag and drop the downloaded and saved record LOG file to this page, and the last configuration information will be automatically filled in.&lt;/span&gt;</span><br><span class="hljs-string">		&lt;/div&gt;</span><br><span class="hljs-string">		</span><br><span class="hljs-string">		</span><br><span class="hljs-string">		&lt;div class=&quot;itemBox&quot;&gt;</span><br><span class="hljs-string">			&lt;div class=&quot;pd Bold&quot;&gt;</span><br><span class="hljs-string">				&lt;i class=&quot;must&quot;&gt;*&lt;/i&gt;</span><br><span class="hljs-string">				&lt;span class=&quot;langCN&quot;&gt;证书中要包含的域名：&lt;/span&gt;</span><br><span class="hljs-string">				&lt;span class=&quot;langEN&quot;&gt;Domain name to be included in the certificate:&lt;/span&gt;</span><br><span class="hljs-string">			&lt;/div&gt;</span><br><span class="hljs-string">			&lt;div class=&quot;pd&quot; style=&quot;font-size:13px;color:#aaa&quot;&gt;</span><br><span class="hljs-string">				&lt;span class=&quot;langCN&quot;&gt;一个证书可以包含多个域名（支持通配符），比如填写：&lt;i class=&quot;i&quot;&gt;a.com, *.a.com, b.com, *.b.com&lt;/i&gt;；第一个域名将作为证书的通用名称（Common Name）；带通配符的域名只支持DNS验证，其他域名支持上传文件验证；注意：填了&lt;i class=&quot;i&quot;&gt;www.a.com&lt;/i&gt;时，一般需要额外填上&lt;i class=&quot;i&quot;&gt;a.com&lt;/i&gt;。&lt;/span&gt;</span><br><span class="hljs-string">				&lt;span class=&quot;langEN&quot;&gt;A certificate can contain multiple domain names (wildcard are supported), for example, fill in: &lt;i class=&quot;i&quot;&gt;a.com, *.a.com, b.com, *.b.com&lt;/i&gt;; the first domain name will be used as the Common Name of the certificate; Domain names with wildcard only support DNS verification, and other domain names support upload file verification ; Note: When &lt;i class=&quot;i&quot;&gt;www.a.com&lt;/i&gt; is filled in, it is generally necessary to fill in &lt;i class=&quot;i&quot;&gt;a.com&lt;/i&gt; additionally.&lt;/span&gt;</span><br><span class="hljs-string">			&lt;/div&gt;</span><br><span class="hljs-string">			&lt;div class=&quot;FlexBox&quot;&gt;</span><br><span class="hljs-string">				&lt;div class=&quot;FlexItem&quot;&gt;</span><br><span class="hljs-string">					&lt;input class=&quot;in_domains inputLang&quot; style=&quot;width:100%&quot; placeholder-cn=&quot;请填写你的域名，多个用逗号隔开&quot; placeholder-en=&quot;Please fill in your domain name, multiple separated by commas&quot;&gt;</span><br><span class="hljs-string">				&lt;/div&gt;</span><br><span class="hljs-string">				&lt;div style=&quot;padding-left:15px;line-height:30px;font-size:13px;color:#aaa&quot;&gt;</span><br><span class="hljs-string">					&lt;label&gt;</span><br><span class="hljs-string">						&lt;input type=&quot;checkbox&quot; class=&quot;choice_domains_store&quot;&gt;</span><br><span class="hljs-string">						&lt;span class=&quot;langCN&quot;&gt;记住&lt;/span&gt;</span><br><span class="hljs-string">						&lt;span class=&quot;langEN&quot;&gt;Remember&lt;/span&gt;</span><br><span class="hljs-string">					&lt;/label&gt;</span><br><span class="hljs-string">				&lt;/div&gt;</span><br><span class="hljs-string">			&lt;/div&gt;</span><br><span class="hljs-string">		&lt;/div&gt;</span><br><span class="hljs-string">		</span><br><span class="hljs-string">		</span><br><span class="hljs-string">		&lt;div class=&quot;itemBox&quot;&gt;</span><br><span class="hljs-string">			&lt;div class=&quot;pd Bold&quot;&gt;</span><br><span class="hljs-string">				&lt;i class=&quot;must&quot;&gt;*&lt;/i&gt;</span><br><span class="hljs-string">				&lt;span class=&quot;langCN&quot;&gt;证书的私钥：&lt;/span&gt;</span><br><span class="hljs-string">				&lt;span class=&quot;langEN&quot;&gt;Private key of certificate:&lt;/span&gt;</span><br><span class="hljs-string">			&lt;/div&gt;</span><br><span class="hljs-string">			&lt;div class=&quot;pd&quot; style=&quot;font-size:13px;color:#aaa&quot;&gt;</span><br><span class="hljs-string">				&lt;span class=&quot;langCN&quot;&gt;生成或填写的私钥仅用于ACME接口签名，支持&lt;i class=&quot;i&quot;&gt;RSA(2048位+)&lt;/i&gt;、&lt;i class=&quot;i&quot;&gt;ECC(&lt;span class=&quot;eccCurveNames&quot;&gt;&lt;/span&gt;曲线)&lt;/i&gt;私钥；&lt;span style=&quot;color:#f80&quot;&gt;注意：证书私钥的类型决定了申请到的证书是RSA证书还是ECC(ECDSA)证书，RSA类型适用性更广也更常见&lt;/span&gt;；本客户端不会对此私钥进行保存或发送给其他任何人；证书签发后在部署到服务器时，需使用到此私钥；建议每次申请证书时均生成新的证书私钥。&lt;/span&gt;</span><br><span class="hljs-string">				&lt;span class=&quot;langEN&quot;&gt;The generated or filled private key is only used for ACME interface signature, and supports &lt;i class=&quot;i&quot;&gt;RSA (2048-bit+)&lt;/i&gt; and &lt;i class=&quot;i&quot;&gt;ECC (&lt;span class=&quot;eccCurveNames&quot;&gt;&lt;/span&gt; curve)&lt;/i&gt; private keys; &lt;span style=&quot;color:#f80&quot;&gt;Note: The type of certificate private key determines whether the applied certificate is an RSA certificate or a ECC(ECDSA) certificate, RSA type is more widely applicable and more common;&lt;/span&gt; this client will not save or send this private key to anyone else; this private key needs to be used when deploying to the server after the certificate is issued; it is recommended to generate a new certificate private key every time you apply for a certificate.&lt;/span&gt;</span><br><span class="hljs-string">			&lt;/div&gt;</span><br><span class="hljs-string">			&lt;div class=&quot;pd&quot;&gt;</span><br><span class="hljs-string">				&lt;label&gt;</span><br><span class="hljs-string">					&lt;input type=&quot;radio&quot; name=&quot;choice_privateKey&quot; value=&quot;generateRSA&quot;&gt;</span><br><span class="hljs-string">					&lt;span class=&quot;langCN&quot;&gt;创建新RSA私钥&lt;/span&gt;</span><br><span class="hljs-string">					&lt;span class=&quot;langEN&quot;&gt;Generate RSA private key&lt;/span&gt;</span><br><span class="hljs-string">				&lt;/label&gt;</span><br><span class="hljs-string">				&lt;label&gt;</span><br><span class="hljs-string">					&lt;input type=&quot;radio&quot; name=&quot;choice_privateKey&quot; value=&quot;generateECC&quot;&gt;</span><br><span class="hljs-string">					&lt;span class=&quot;langCN&quot;&gt;创建新ECC私钥&lt;/span&gt;</span><br><span class="hljs-string">					&lt;span class=&quot;langEN&quot;&gt;Generate ECC private key&lt;/span&gt;</span><br><span class="hljs-string">				&lt;/label&gt;</span><br><span class="hljs-string">				&lt;label&gt;</span><br><span class="hljs-string">					&lt;input type=&quot;radio&quot; name=&quot;choice_privateKey&quot; value=&quot;manual&quot;&gt;</span><br><span class="hljs-string">					&lt;span class=&quot;langCN&quot;&gt;手动填写私钥&lt;/span&gt;</span><br><span class="hljs-string">					&lt;span class=&quot;langEN&quot;&gt;Manually fill in the private key&lt;/span&gt;</span><br><span class="hljs-string">				&lt;/label&gt;</span><br><span class="hljs-string">			&lt;/div&gt;</span><br><span class="hljs-string">			&lt;div class=&quot;privateKeyBox&quot;&gt;</span><br><span class="hljs-string">				&lt;textarea class=&quot;in_privateKey inputLang&quot; style=&quot;width:100%;height:60px&quot; placeholder-cn=&quot;请填写pem私钥，私钥文本以 -----BEGIN PRIVATE KEY----- 开头（这是PKCS#8格式，里面带有 RSA|EC 字符的PKCS#1格式也是支持的）&quot; placeholder-en=&quot;Please fill in the pem private key. The private key text starts with -----BEGIN PRIVATE KEY----- (this is in PKCS#8 format, and PKCS#1 format with RSA|EC characters in it is also supported)&quot;&gt;&lt;/textarea&gt;</span><br><span class="hljs-string">			&lt;/div&gt;</span><br><span class="hljs-string">			&lt;div class=&quot;privateKeyState&quot;&gt;&lt;/div&gt;</span><br><span class="hljs-string">		&lt;/div&gt;</span><br><span class="hljs-string">		</span><br><span class="hljs-string">		</span><br><span class="hljs-string">		&lt;div class=&quot;itemBox&quot;&gt;</span><br><span class="hljs-string">			&lt;div class=&quot;pd Bold&quot;&gt;</span><br><span class="hljs-string">				&lt;i class=&quot;must&quot;&gt;*&lt;/i&gt;</span><br><span class="hljs-string">				&lt;span class=&quot;langCN&quot;&gt;ACME账户的私钥：&lt;/span&gt;</span><br><span class="hljs-string">				&lt;span class=&quot;langEN&quot;&gt;Private key of ACME account:&lt;/span&gt;</span><br><span class="hljs-string">			&lt;/div&gt;</span><br><span class="hljs-string">			&lt;div class=&quot;pd&quot; style=&quot;font-size:13px;color:#aaa&quot;&gt;</span><br><span class="hljs-string">				&lt;span class=&quot;langCN&quot;&gt;生成或填写的私钥仅用于ACME接口签名，支持&lt;i class=&quot;i&quot;&gt;RSA(2048位+)&lt;/i&gt;、&lt;i class=&quot;i&quot;&gt;ECC(&lt;span class=&quot;eccCurveNames&quot;&gt;&lt;/span&gt;曲线)&lt;/i&gt;私钥；账户私钥类型对证书无影响；本客户端不会对此私钥进行保存或发送给其他任何人；一个私钥相当于一个账户，可用于吊销已签发的证书；建议每次申请证书时使用相同的一个私钥（这样短期内多次申请证书时，验证域名所有权的参数极有可能会保持相同），不过每次都生成一个新的私钥大部分情况下也不会有问题。&lt;/span&gt;</span><br><span class="hljs-string">				&lt;span class=&quot;langEN&quot;&gt;The generated or filled private key is only used for ACME interface signature, and supports &lt;i class=&quot;i&quot;&gt;RSA (2048-bit+)&lt;/i&gt; and &lt;i class=&quot;i&quot;&gt;ECC (&lt;span class=&quot;eccCurveNames&quot;&gt;&lt;/span&gt; curve)&lt;/i&gt; private keys; the account private key type has no effect on the certificate; this client will not save or send this private key to anyone else; A private key is equivalent to an account and can be used to revoke an issued certificate; it is recommended to use the same private key every time you apply for a certificate (in this way, the parameters used to verify the domain name ownership are likely to remain identical when multiple certificate applications are made in a short period of time); However, generating a new private key every time will not be a problem in most cases.&lt;/span&gt;</span><br><span class="hljs-string">				&lt;span class=&quot;eabShow&quot; style=&quot;color:#f80&quot;&gt;</span><br><span class="hljs-string">					&lt;span class=&quot;langCN&quot;&gt;注意：如果你选择的ACME服务（比如Google）要求提供EAB凭据并且限制了同一个EAB凭据只能绑定到一个ACME账户（私钥），那每次使用此EAB凭据时必须使用相同的一个私钥（首次时如果新创建了私钥，此新私钥需立即保存起来下次和此EAB凭据一起使用）。&lt;/span&gt;</span><br><span class="hljs-string">					&lt;span class=&quot;langEN&quot;&gt;Note: If the ACME service you choose (such as Google) requires EAB credentials and limits the same EAB credentials to only one ACME account (private key), then you must use the same private key every time you use this EAB credential (if you generate a new private key for the first time, this new private key needs to be saved immediately and used with this EAB credential next time).&lt;/span&gt;</span><br><span class="hljs-string">				&lt;/span&gt;</span><br><span class="hljs-string">			&lt;/div&gt;</span><br><span class="hljs-string">			&lt;div class=&quot;pd&quot;&gt;</span><br><span class="hljs-string">				&lt;label&gt;</span><br><span class="hljs-string">					&lt;input type=&quot;radio&quot; name=&quot;choice_accountKey&quot; value=&quot;generateRSA&quot;&gt;</span><br><span class="hljs-string">					&lt;span class=&quot;langCN&quot;&gt;创建新RSA私钥&lt;/span&gt;</span><br><span class="hljs-string">					&lt;span class=&quot;langEN&quot;&gt;Generate RSA private key&lt;/span&gt;</span><br><span class="hljs-string">				&lt;/label&gt;</span><br><span class="hljs-string">				&lt;label&gt;</span><br><span class="hljs-string">					&lt;input type=&quot;radio&quot; name=&quot;choice_accountKey&quot; value=&quot;generateECC&quot;&gt;</span><br><span class="hljs-string">					&lt;span class=&quot;langCN&quot;&gt;创建新ECC私钥&lt;/span&gt;</span><br><span class="hljs-string">					&lt;span class=&quot;langEN&quot;&gt;Generate ECC private key&lt;/span&gt;</span><br><span class="hljs-string">				&lt;/label&gt;</span><br><span class="hljs-string">				&lt;label&gt;</span><br><span class="hljs-string">					&lt;input type=&quot;radio&quot; name=&quot;choice_accountKey&quot; value=&quot;manual&quot;&gt;</span><br><span class="hljs-string">					&lt;span class=&quot;langCN&quot;&gt;手动填写私钥&lt;/span&gt;</span><br><span class="hljs-string">					&lt;span class=&quot;langEN&quot;&gt;Manually fill in the private key&lt;/span&gt;</span><br><span class="hljs-string">				&lt;/label&gt;</span><br><span class="hljs-string">			&lt;/div&gt;</span><br><span class="hljs-string">			&lt;div class=&quot;accountKeyBox&quot;&gt;</span><br><span class="hljs-string">				&lt;textarea class=&quot;in_accountKey inputLang&quot; style=&quot;width:100%;height:60px&quot; placeholder-cn=&quot;请填写pem私钥，私钥文本以 -----BEGIN PRIVATE KEY----- 开头（这是PKCS#8格式，里面带有 RSA|EC 字符的PKCS#1格式也是支持的）&quot; placeholder-en=&quot;Please fill in the pem private key. The private key text starts with -----BEGIN PRIVATE KEY----- (this is in PKCS#8 format, and PKCS#1 format with RSA|EC characters in it is also supported)&quot;&gt;&lt;/textarea&gt;</span><br><span class="hljs-string">			&lt;/div&gt;</span><br><span class="hljs-string">			&lt;div class=&quot;accountKeyState&quot;&gt;&lt;/div&gt;</span><br><span class="hljs-string">		&lt;/div&gt;</span><br><span class="hljs-string">		</span><br><span class="hljs-string">		</span><br><span class="hljs-string">		&lt;div class=&quot;itemBox&quot;&gt;</span><br><span class="hljs-string">			&lt;div class=&quot;pd Bold&quot;&gt;</span><br><span class="hljs-string">				&lt;i class=&quot;must&quot;&gt;*&lt;/i&gt;</span><br><span class="hljs-string">				&lt;span class=&quot;langCN&quot;&gt;ACME账户的联系邮箱：&lt;/span&gt;</span><br><span class="hljs-string">				&lt;span class=&quot;langEN&quot;&gt;Contact email of ACME account:&lt;/span&gt;</span><br><span class="hljs-string">			&lt;/div&gt;</span><br><span class="hljs-string">			&lt;div class=&quot;pd&quot; style=&quot;font-size:13px;color:#aaa&quot;&gt;</span><br><span class="hljs-string">				&lt;span class=&quot;langCN&quot;&gt;此邮箱地址用于证书颁发机构给你发送邮件，比如：证书过期前的续期通知提醒。&lt;/span&gt;</span><br><span class="hljs-string">				&lt;span class=&quot;langEN&quot;&gt;This email address is used by the certificate authority to send you emails, such as a reminder of renewal notice before the certificate expires.&lt;/span&gt;</span><br><span class="hljs-string">			&lt;/div&gt;</span><br><span class="hljs-string">			&lt;div class=&quot;FlexBox&quot;&gt;</span><br><span class="hljs-string">				&lt;div class=&quot;FlexItem&quot;&gt;</span><br><span class="hljs-string">					&lt;input class=&quot;in_email inputLang&quot; style=&quot;width:100%&quot; placeholder-cn=&quot;请填写一个你的邮箱&quot; placeholder-en=&quot;Please fill in one of your email addresses&quot;&gt;</span><br><span class="hljs-string">				&lt;/div&gt;</span><br><span class="hljs-string">				&lt;div style=&quot;padding-left:15px;line-height:30px;font-size:13px;color:#aaa&quot;&gt;</span><br><span class="hljs-string">					&lt;label&gt;</span><br><span class="hljs-string">						&lt;input type=&quot;checkbox&quot; class=&quot;choice_email_store&quot;&gt;</span><br><span class="hljs-string">						&lt;span class=&quot;langCN&quot;&gt;记住&lt;/span&gt;</span><br><span class="hljs-string">						&lt;span class=&quot;langEN&quot;&gt;Remember&lt;/span&gt;</span><br><span class="hljs-string">					&lt;/label&gt;</span><br><span class="hljs-string">				&lt;/div&gt;</span><br><span class="hljs-string">			&lt;/div&gt;</span><br><span class="hljs-string">		&lt;/div&gt;</span><br><span class="hljs-string">		</span><br><span class="hljs-string">		</span><br><span class="hljs-string">		&lt;div class=&quot;itemBox eabShow&quot;&gt;</span><br><span class="hljs-string">			&lt;div class=&quot;pd Bold&quot;&gt;</span><br><span class="hljs-string">				&lt;span class=&quot;langCN&quot;&gt;EAB凭据：&lt;/span&gt;</span><br><span class="hljs-string">				&lt;span class=&quot;langEN&quot;&gt;EAB Credentials:&lt;/span&gt;</span><br><span class="hljs-string">			&lt;/div&gt;</span><br><span class="hljs-string">			&lt;div class=&quot;pd&quot; style=&quot;font-size:13px;color:#aaa&quot;&gt;</span><br><span class="hljs-string">				&lt;span class=&quot;langCN&quot;&gt;当前ACME服务要求提供外部账号绑定凭据（External Account Binding），比如ZeroSSL：你可以在ZeroSSL的管理控制台的 Developer 中获得此凭据，所以你需要先注册一个ZeroSSL的账号。&lt;/span&gt;</span><br><span class="hljs-string">				&lt;span class=&quot;langEN&quot;&gt;The current ACME service requires external account binding credentials, such as ZeroSSL: You can obtain this credentials in the Developer of the ZeroSSL management console, so you need to register a ZeroSSL account first.&lt;/span&gt;</span><br><span class="hljs-string">			&lt;/div&gt;</span><br><span class="hljs-string">			&lt;div class=&quot;FlexBox&quot; style=&quot;line-height:30px&quot;&gt;</span><br><span class="hljs-string">				&lt;div&gt;&lt;i class=&quot;must&quot;&gt;*&lt;/i&gt;EAB KID:&lt;/div&gt;</span><br><span class="hljs-string">				&lt;div class=&quot;FlexItem&quot; style=&quot;padding:0 50px 0 6px&quot;&gt;</span><br><span class="hljs-string">					&lt;input class=&quot;in_eab_kid inputLang&quot; style=&quot;width:100%&quot; placeholder-cn=&quot;请填写EAB KID&quot; placeholder-en=&quot;Please fill in EAB KID&quot;&gt;</span><br><span class="hljs-string">				&lt;/div&gt;</span><br><span class="hljs-string">				&lt;div style=&quot;padding:0 6px 0 0&quot;&gt;&lt;i class=&quot;must&quot;&gt;*&lt;/i&gt;HMAC KEY:&lt;/div&gt;</span><br><span class="hljs-string">				&lt;div class=&quot;FlexItem&quot;&gt;</span><br><span class="hljs-string">					&lt;input class=&quot;in_eab_key inputLang&quot; style=&quot;width:100%&quot; placeholder-cn=&quot;请填写EAB HMAC KEY&quot; placeholder-en=&quot;Please fill in EAB HMAC KEY&quot;&gt;</span><br><span class="hljs-string">				&lt;/div&gt;</span><br><span class="hljs-string">			&lt;/div&gt;</span><br><span class="hljs-string">		&lt;/div&gt;</span><br><span class="hljs-string">		</span><br><span class="hljs-string">		&lt;div class=&quot;pd termsAgreeBox&quot;&gt;</span><br><span class="hljs-string">			&lt;label&gt;</span><br><span class="hljs-string">				&lt;input type=&quot;checkbox&quot; class=&quot;choice_termsAgree&quot;&gt;</span><br><span class="hljs-string">				&lt;span class=&quot;termsAgreeTips&quot;&gt;&lt;/span&gt;</span><br><span class="hljs-string">			&lt;/label&gt;</span><br><span class="hljs-string">		&lt;/div&gt;</span><br><span class="hljs-string">		</span><br><span class="hljs-string">		&lt;div class=&quot;Center&quot; style=&quot;padding:15px 0 10px&quot;&gt;</span><br><span class="hljs-string">			&lt;span class=&quot;mainBtn&quot; onclick=&quot;configStepClick()&quot; style=&quot;width:300px&quot;&gt;</span><br><span class="hljs-string">				&lt;span class=&quot;langCN&quot;&gt;确定&lt;/span&gt;</span><br><span class="hljs-string">				&lt;span class=&quot;langEN&quot;&gt;OK&lt;/span&gt;</span><br><span class="hljs-string">			&lt;/span&gt;</span><br><span class="hljs-string">		&lt;/div&gt;</span><br><span class="hljs-string">		&lt;div class=&quot;configStepState&quot;&gt;&lt;/div&gt;</span><br><span class="hljs-string">		</span><br><span class="hljs-string">	&lt;/div&gt;</span><br><span class="hljs-string">&lt;/div&gt;</span><br><span class="hljs-string"></span><br><span class="hljs-string"></span><br><span class="hljs-string"></span><br><span class="hljs-string"></span><br><span class="hljs-string"></span><br><span class="hljs-string"></span><br><span class="hljs-string">&lt;div class=&quot;mainBox&quot;&gt;</span><br><span class="hljs-string">	&lt;div class=&quot;pd itemTitle&quot;&gt;</span><br><span class="hljs-string">		&lt;span class=&quot;langCN&quot;&gt;步骤三：验证域名所有权&lt;/span&gt;</span><br><span class="hljs-string">		&lt;span class=&quot;langEN&quot;&gt;Step 3: Verify Domain Ownership&lt;/span&gt;</span><br><span class="hljs-string">	&lt;/div&gt;</span><br><span class="hljs-string">	&lt;div class=&quot;step3Hide step2Show step1Show&quot;&gt;</span><br><span class="hljs-string">		&lt;div class=&quot;itemBox&quot; style=&quot;color:#999&quot;&gt;</span><br><span class="hljs-string">			&lt;span class=&quot;langCN&quot;&gt;等待中，请先完成第二步...&lt;/span&gt;</span><br><span class="hljs-string">			&lt;span class=&quot;langEN&quot;&gt;Waiting, please complete step 2 first...&lt;/span&gt;</span><br><span class="hljs-string">		&lt;/div&gt;</span><br><span class="hljs-string">	&lt;/div&gt;</span><br><span class="hljs-string">	&lt;div class=&quot;step1Hide step2Hide step3Show&quot;&gt;</span><br><span class="hljs-string">		</span><br><span class="hljs-string">		&lt;div class=&quot;pd&quot; style=&quot;font-size:13px;color:#f80&quot;&gt;</span><br><span class="hljs-string">			&lt;span class=&quot;langCN&quot;&gt;请给每个域名选择一个你合适的验证方式（推荐采用DNS验证，比较简单和通用），然后根据显示的提示完成对应的配置操作。&lt;/span&gt;</span><br><span class="hljs-string">			&lt;span class=&quot;langEN&quot;&gt;Please select a suitable verification method for each domain name (DNS Verify is recommended, which is relatively simple and common), and then complete the corresponding configuration operations according to the displayed prompts.&lt;/span&gt;</span><br><span class="hljs-string">		&lt;/div&gt;</span><br><span class="hljs-string">		</span><br><span class="hljs-string">		&lt;div class=&quot;verifyBox&quot;&gt;&lt;/div&gt;</span><br><span class="hljs-string">&lt;script&gt;</span><br><span class="hljs-string">//显示所有域名的验证界面，html太多</span><br><span class="hljs-string">var verifyBoxShow=function()&#123;</span><br><span class="hljs-string">	&quot;use strict&quot;;</span><br><span class="hljs-string">	var boxEl=$(&quot;.verifyBox&quot;).html(&quot;&quot;);</span><br><span class="hljs-string">	var auths=JSON.parse(JSON.stringify(ACME.StepData.auths));//避免改动原始数据</span><br><span class="hljs-string">	var domains=ACME.StepData.config.domains;</span><br><span class="hljs-string">	for(var i0=0;i0&lt;domains.length;i0++)&#123;</span><br><span class="hljs-string">		var domain=domains[i0],auth=auths[domain]</span><br><span class="hljs-string">		</span><br><span class="hljs-string">		var challs=auth.challenges;</span><br><span class="hljs-string">		for(var i=0;i&lt;challs.length;i++)&#123;//排序，dns排前面</span><br><span class="hljs-string">			var o=challs[i];</span><br><span class="hljs-string">			o.challIdx=i;</span><br><span class="hljs-string">			o.name=ACME.ChallName(o);</span><br><span class="hljs-string">			o._sort=ACME.ChallSort(o);</span><br><span class="hljs-string">		&#125;</span><br><span class="hljs-string">		challs.sort(function(a,b)&#123;return a._sort.localeCompare(b._sort)&#125;);</span><br><span class="hljs-string">		var choiceHtml=&quot;&quot;;</span><br><span class="hljs-string">		for(var i=0;i&lt;challs.length;i++)&#123;</span><br><span class="hljs-string">			var chall=challs[i];</span><br><span class="hljs-string">			choiceHtml+=\`</span><br><span class="hljs-string">&lt;label&gt;</span><br><span class="hljs-string">	&lt;input type=&quot;radio&quot; name=&quot;choice_authItem_$\&#123;i0&#125;&quot;</span><br><span class="hljs-string">		class=&quot;choice_authChall choice_authChall_$\&#123;i0&#125; choice_authChall_$\&#123;i0&#125;_$\&#123;i&#125;&quot;</span><br><span class="hljs-string">		value=&quot;$\&#123;i0&#125;_$\&#123;i&#125;&quot; challidx=&quot;$\&#123;chall.challIdx&#125;&quot;&gt;$\&#123;chall.name&#125;</span><br><span class="hljs-string">&lt;/label&gt;</span><br><span class="hljs-string">			\`;</span><br><span class="hljs-string">		&#125;</span><br><span class="hljs-string">		</span><br><span class="hljs-string">		boxEl.append(\`</span><br><span class="hljs-string">&lt;div class=&quot;itemBox&quot;&gt;</span><br><span class="hljs-string">	&lt;div class=&quot;pd FlexBox&quot; style=&quot;line-height:26px&quot;&gt;</span><br><span class="hljs-string">		&lt;div&gt;&lt;i class=&quot;must&quot;&gt;*&lt;/i&gt;&lt;/div&gt;</span><br><span class="hljs-string">		&lt;div style=&quot;width:180px;padding-right:5px;text-align:right;background:#03baed;color:#fff;border-radius: 4px;&quot;&gt;$\&#123;domain&#125;&lt;/div&gt;</span><br><span class="hljs-string">		&lt;div class=&quot;FlexItem&quot; style=&quot;padding-left:10px;&quot;&gt;$\&#123;choiceHtml&#125;&lt;/div&gt;</span><br><span class="hljs-string">	&lt;/div&gt;</span><br><span class="hljs-string">	&lt;div class=&quot;verifyItemBox_$\&#123;i0&#125;&quot;&gt;&lt;/div&gt;</span><br><span class="hljs-string">	&lt;div class=&quot;verifyItemState_$\&#123;i0&#125;&quot;&gt;&lt;/div&gt;</span><br><span class="hljs-string">&lt;/div&gt;</span><br><span class="hljs-string">		\`);</span><br><span class="hljs-string">	&#125;;</span><br><span class="hljs-string">	LangReview(boxEl);</span><br><span class="hljs-string">	</span><br><span class="hljs-string">	$(&quot;.choice_authChall&quot;).bind(&quot;click&quot;,function(e)&#123;</span><br><span class="hljs-string">		var el=e.target,vals=el.value.split(&quot;_&quot;),i0=+vals[0],i2=+vals[1];</span><br><span class="hljs-string">		var domain=domains[i0],auth=auths[domain],chall=auth.challenges[i2];</span><br><span class="hljs-string">		var html=[&#x27;&lt;div class=&quot;pd&quot; style=&quot;padding-left:10px;font-size:13px;color:#aaa&quot;&gt;&#x27;];</span><br><span class="hljs-string">		var nameCss=&#x27;width:195px;text-align:right;padding-right:10px&#x27;;</span><br><span class="hljs-string">		if(chall.type==&quot;dns-01&quot;)&#123;</span><br><span class="hljs-string">			html.push(Lang(&#x27;请到你的域名DNS解析管理中，给下面这个子域名增加一条&lt;i class=&quot;i&quot;&gt;TXT记录&lt;/i&gt;（一个子域名可以同时存在多条TXT记录，可以修改或删除老的记录）。&#x27;,&#x27;Please go to the DNS resolution management of your domain name and add a &lt;i class=&quot;i&quot;&gt;TXT record&lt;/i&gt; for the following subdomain name (a subdomain name can have multiple TXT records at the same time, and the old records can be modified or deleted).&#x27;)+&#x27;&lt;/div&gt;&#x27;);</span><br><span class="hljs-string">			html.push(\`&lt;div class=&quot;pd FlexBox&quot;&gt;</span><br><span class="hljs-string">				&lt;div style=&quot;$\&#123;nameCss&#125;&quot;&gt;$\&#123;Lang(&#x27;子域名&#x27;,&#x27;Sub Domain&#x27;)&#125;:&lt;/div&gt;</span><br><span class="hljs-string">				&lt;div class=&quot;FlexItem&quot;&gt;</span><br><span class="hljs-string">					&lt;input style=&quot;width:100%&quot; readonly value=&quot;_acme-challenge.$\&#123;auth.identifier.value&#125;&quot; /&gt;</span><br><span class="hljs-string">				&lt;/div&gt;</span><br><span class="hljs-string">			&lt;/div&gt;</span><br><span class="hljs-string">			&lt;div class=&quot;pd FlexBox&quot;&gt;</span><br><span class="hljs-string">				&lt;div style=&quot;$\&#123;nameCss&#125;&quot;&gt;$\&#123;Lang(&#x27;TXT记录&#x27;,&#x27;TXT Record&#x27;)&#125;:&lt;/div&gt;</span><br><span class="hljs-string">				&lt;div class=&quot;FlexItem&quot;&gt;</span><br><span class="hljs-string">					&lt;input style=&quot;width:100%&quot; readonly value=&quot;$\&#123;chall.authTxtSHA256&#125;&quot; /&gt;</span><br><span class="hljs-string">				&lt;/div&gt;</span><br><span class="hljs-string">			&lt;/div&gt;\`);</span><br><span class="hljs-string">		&#125;else if(chall.type==&quot;http-01&quot;)&#123;</span><br><span class="hljs-string">			html.push(Lang(&#x27;请在你的网站根目录中创建&lt;i class=&quot;i&quot;&gt;/.well-known/acme-challenge/&lt;/i&gt;目录，目录内创建&lt;i class=&quot;i&quot;&gt;&#x27;+FormatText(chall.token)+&#x27;&lt;/i&gt;文件，文件内保存下面的文件内容，保存好后&lt;a href=&quot;http://&#x27;+auth.identifier.value+&#x27;/.well-known/acme-challenge/&#x27;+FormatText(chall.token)+&#x27;&quot; target=&quot;_blank&quot;&gt;请点此打开此文件URL&lt;/a&gt;测试能否正常访问；注意：这个文件URL必须是80端口，并且公网可以访问，否则ACME无法访问到此地址将会验证失败。Windows操作提示：Windows中用&lt;i class=&quot;i&quot;&gt;.well-known.&lt;/i&gt;作为文件夹名称就能创建&lt;i class=&quot;i&quot;&gt;.well-known&lt;/i&gt;文件夹；IIS可能需在此文件夹下的MIME类型中给 &lt;i class=&quot;i&quot;&gt;.&lt;/i&gt; （扩展名就是一个字&quot;.&quot;）添加 &lt;i class=&quot;i&quot;&gt;text/plain&lt;/i&gt; 才能正常访问。&#x27;,&#x27;Please create the &lt;i class=&quot;i&quot;&gt;/.well-known/acme-challenge/&lt;/i&gt; directory in the root directory of your website, create the &lt;i class=&quot;i&quot;&gt;&#x27;+FormatText(chall.token)+&#x27;&lt;/i&gt; file in the directory, and save the following file content in the file; After saving, &lt;a href=&quot;http://&#x27;+auth.identifier.value+&#x27;/.well-known/acme-challenge/&#x27;+FormatText(chall.token)+&#x27;&quot; target=&quot;_blank&quot;&gt;please click here to open the URL&lt;/a&gt; of this file to test whether Normal access; note: the URL of this file must be 80 The port and the public network can be accessed, otherwise ACME cannot access this address and the verification will fail. Windows operation tips: In Windows, you can create a &lt;i class=&quot;i&quot;&gt;.well-known&lt;/i&gt; folder by using &lt;i class=&quot;i&quot;&gt;.well-known.&lt;/i&gt; as the folder name; IIS may need to give &lt;i class=&quot;i&quot;&gt;.&lt;/i&gt; in the MIME type under this folder (the extension is a word &quot;.&quot;) Add &lt;i class=&quot;i&quot;&gt;text/plain&lt;/i&gt; for normal access.&#x27;)+&#x27;&lt;/div&gt;&#x27;);</span><br><span class="hljs-string">			html.push(\`&lt;div class=&quot;pd FlexBox&quot;&gt;</span><br><span class="hljs-string">				&lt;div style=&quot;$\&#123;nameCss&#125;&quot;&gt;$\&#123;Lang(&#x27;文件URL&#x27;,&#x27;File URL&#x27;)&#125;:&lt;/div&gt;</span><br><span class="hljs-string">				&lt;div class=&quot;FlexItem&quot;&gt;</span><br><span class="hljs-string">					&lt;input style=&quot;width:100%&quot; readonly value=&quot;http://$\&#123;auth.identifier.value&#125;/.well-known/acme-challenge/$\&#123;FormatText(chall.token)&#125;&quot; /&gt;</span><br><span class="hljs-string">				&lt;/div&gt;</span><br><span class="hljs-string">			&lt;/div&gt;</span><br><span class="hljs-string">			&lt;div class=&quot;pd FlexBox&quot;&gt;</span><br><span class="hljs-string">				&lt;div style=&quot;$\&#123;nameCss&#125;&quot;&gt;$\&#123;Lang(&#x27;文件内容&#x27;,&#x27;File Content&#x27;)&#125;:&lt;/div&gt;</span><br><span class="hljs-string">				&lt;div class=&quot;FlexItem&quot;&gt;</span><br><span class="hljs-string">					&lt;input style=&quot;width:100%&quot; readonly value=&quot;$\&#123;chall.authTxt&#125;&quot; /&gt;</span><br><span class="hljs-string">				&lt;/div&gt;</span><br><span class="hljs-string">			&lt;/div&gt;\`);</span><br><span class="hljs-string">		&#125;else&#123;</span><br><span class="hljs-string">			html.push(Lang(&#x27;非预定义验证类型，请使用&lt;i class=&quot;i&quot;&gt;Key Authorizations (Token+.+指纹)&lt;/i&gt;自行处理，&lt;i class=&quot;i&quot;&gt;Digest&lt;/i&gt;为Key Authorizations的SHA-256 Base64值。&#x27;,&#x27;For non-predefined authentication types, please use &lt;i class=&quot;i&quot;&gt;Key Authorizations (Token+.+Thumbprint)&lt;/i&gt; to handle it yourself. &lt;i class=&quot;i&quot;&gt;Digest&lt;/i&gt; is the SHA-256 Base64 value of Key Authorizations.&#x27;)+&#x27;&lt;/div&gt;&#x27;);</span><br><span class="hljs-string">			html.push(\`&lt;div class=&quot;pd FlexBox&quot;&gt;</span><br><span class="hljs-string">				&lt;div style=&quot;$\&#123;nameCss&#125;&quot;&gt;Key Authorizations:&lt;/div&gt;</span><br><span class="hljs-string">				&lt;div class=&quot;FlexItem&quot;&gt;</span><br><span class="hljs-string">					&lt;input style=&quot;width:100%&quot; readonly value=&quot;$\&#123;chall.authTxt&#125;&quot; /&gt;</span><br><span class="hljs-string">				&lt;/div&gt;</span><br><span class="hljs-string">			&lt;/div&gt;</span><br><span class="hljs-string">			&lt;div class=&quot;pd FlexBox&quot;&gt;</span><br><span class="hljs-string">				&lt;div style=&quot;$\&#123;nameCss&#125;&quot;&gt;Digest(SHA-256 Base64):&lt;/div&gt;</span><br><span class="hljs-string">				&lt;div class=&quot;FlexItem&quot;&gt;</span><br><span class="hljs-string">					&lt;input style=&quot;width:100%&quot; readonly value=&quot;$\&#123;chall.authTxtSHA256Base64&#125;&quot; /&gt;</span><br><span class="hljs-string">				&lt;/div&gt;</span><br><span class="hljs-string">			&lt;/div&gt;\`);</span><br><span class="hljs-string">		&#125;</span><br><span class="hljs-string">		$(&quot;.verifyItemBox_&quot;+i0).html(html.join(&#x27;\\n&#x27;));</span><br><span class="hljs-string">	&#125;);</span><br><span class="hljs-string">	for(var i0=0;i0&lt;domains.length;i0++)&#123;</span><br><span class="hljs-string">		var el=$(&quot;.choice_authChall_&quot;+i0+&quot;_0&quot;);</span><br><span class="hljs-string">		el[0]&amp;&amp;el[0].click(); //默认选中每个域名的第一个</span><br><span class="hljs-string">	&#125;</span><br><span class="hljs-string">&#125;;</span><br><span class="hljs-string">&lt;/script&gt;</span><br><span class="hljs-string">		</span><br><span class="hljs-string">		&lt;div class=&quot;itemBox&quot;&gt;</span><br><span class="hljs-string">			&lt;div class=&quot;pd&quot; style=&quot;font-size:15px&quot;&gt;</span><br><span class="hljs-string">				&lt;span class=&quot;langCN&quot;&gt;请每个域名选择好对应的验证方式，根据显示的提示进行对应的配置操作；&lt;span style=&quot;color:#cb1d1d&quot;&gt;必须所有域名配置完成后，再来点击下面的“开始验证”按钮进行验证，&lt;/span&gt;如果验证失败，需要返回第二步重新开始操作。&lt;/span&gt;</span><br><span class="hljs-string">				&lt;span class=&quot;langEN&quot;&gt;Please select the corresponding verify method for each domain name, and perform the corresponding configuration operation according to the displayed prompts; &lt;span style=&quot;color:#cb1d1d&quot;&gt;after all domain names are configured, click the &quot;Start Verify&quot; button below to verify,&lt;/span&gt; if the verify fails, you need to go back to the step 2 Start the operation.&lt;/span&gt;</span><br><span class="hljs-string">			&lt;/div&gt;</span><br><span class="hljs-string">			</span><br><span class="hljs-string">			&lt;div class=&quot;Center&quot; style=&quot;padding:15px 0 10px&quot;&gt;</span><br><span class="hljs-string">				&lt;span class=&quot;mainBtn verifyStepBtn&quot; onclick=&quot;verifyStepClick()&quot; style=&quot;width:300px&quot;&gt;</span><br><span class="hljs-string">					&lt;span class=&quot;langCN&quot;&gt;开始验证&lt;/span&gt;</span><br><span class="hljs-string">					&lt;span class=&quot;langEN&quot;&gt;Start Verify&lt;/span&gt;</span><br><span class="hljs-string">				&lt;/span&gt;</span><br><span class="hljs-string">				&lt;span class=&quot;mainBtn verifyRunStopBtn&quot; onclick=&quot;verifyRunStopClick()&quot; style=&quot;width:300px;background:#aaa&quot;&gt;</span><br><span class="hljs-string">					&lt;span class=&quot;langCN&quot;&gt;取消&lt;/span&gt;</span><br><span class="hljs-string">					&lt;span class=&quot;langEN&quot;&gt;Cancel&lt;/span&gt;</span><br><span class="hljs-string">				&lt;/span&gt;</span><br><span class="hljs-string">				&lt;span class=&quot;mainBtn finalizeOrderBtn&quot; onclick=&quot;finalizeOrderClick()&quot; style=&quot;width:300px&quot;&gt;</span><br><span class="hljs-string">					&lt;span class=&quot;langCN&quot;&gt;重试&lt;/span&gt;</span><br><span class="hljs-string">					&lt;span class=&quot;langEN&quot;&gt;Retry&lt;/span&gt;</span><br><span class="hljs-string">				&lt;/span&gt;</span><br><span class="hljs-string">			&lt;/div&gt;</span><br><span class="hljs-string">			&lt;div class=&quot;verifyStepState&quot;&gt;&lt;/div&gt;</span><br><span class="hljs-string">		&lt;/div&gt;</span><br><span class="hljs-string">		</span><br><span class="hljs-string">	&lt;/div&gt;</span><br><span class="hljs-string">&lt;/div&gt;</span><br><span class="hljs-string"></span><br><span class="hljs-string"></span><br><span class="hljs-string"></span><br><span class="hljs-string"></span><br><span class="hljs-string"></span><br><span class="hljs-string"></span><br><span class="hljs-string">&lt;div class=&quot;mainBox&quot;&gt;</span><br><span class="hljs-string">	&lt;div class=&quot;pd itemTitle&quot;&gt;</span><br><span class="hljs-string">		&lt;span class=&quot;langCN&quot;&gt;步骤四：下载保存证书PEM文件&lt;/span&gt;</span><br><span class="hljs-string">		&lt;span class=&quot;langEN&quot;&gt;Step 4: Download and save the certificate PEM file&lt;/span&gt;</span><br><span class="hljs-string">	&lt;/div&gt;</span><br><span class="hljs-string">	&lt;div class=&quot;step4Hide step3Show step2Show step1Show&quot;&gt;</span><br><span class="hljs-string">		&lt;div class=&quot;itemBox&quot; style=&quot;color:#999&quot;&gt;</span><br><span class="hljs-string">			&lt;span class=&quot;langCN&quot;&gt;等待中，请先完成第三步...&lt;/span&gt;</span><br><span class="hljs-string">			&lt;span class=&quot;langEN&quot;&gt;Waiting, please complete step 3 first...&lt;/span&gt;</span><br><span class="hljs-string">		&lt;/div&gt;</span><br><span class="hljs-string">	&lt;/div&gt;</span><br><span class="hljs-string">	&lt;div class=&quot;step1Hide step2Hide step3Hide step4Show&quot;&gt;</span><br><span class="hljs-string">	</span><br><span class="hljs-string">	</span><br><span class="hljs-string">		&lt;div class=&quot;itemBox&quot;&gt;</span><br><span class="hljs-string">			&lt;div class=&quot;pd Bold&quot;&gt;</span><br><span class="hljs-string">				&lt;i class=&quot;must&quot;&gt;*&lt;/i&gt;</span><br><span class="hljs-string">				&lt;span class=&quot;langCN&quot;&gt;保存证书PEM文件：&lt;/span&gt;</span><br><span class="hljs-string">				&lt;span class=&quot;langEN&quot;&gt;Save certificate PEM file: &lt;/span&gt;</span><br><span class="hljs-string">			&lt;/div&gt;</span><br><span class="hljs-string">			&lt;div class=&quot;pd&quot; style=&quot;font-size:13px;color:#aaa&quot;&gt;</span><br><span class="hljs-string">				&lt;span class=&quot;langCN&quot;&gt;&lt;span style=&quot;color:#f80&quot;&gt;必须保存此文件，&lt;/span&gt;请点击下载按钮下载，或者将证书文本内容复制保存为&lt;i class=&quot;i downloadCertFileName&quot;&gt;&lt;/i&gt;文件（PEM纯文本格式）；文件名后缀可改成 &lt;i class=&quot;i&quot;&gt;.crt&lt;/i&gt; 或 &lt;i class=&quot;i&quot;&gt;.cer&lt;/i&gt;，这样在Windows中能直接双击打开查看。本PEM格式文件已包含你的域名证书、和完整证书链，文本中第一个CERTIFICATE为你的域名证书，后面的为证书颁发机构的中间证书和根证书，如过有需要你可以自行拆分成多个.pem文件。&lt;/span&gt;</span><br><span class="hljs-string">				&lt;span class=&quot;langEN&quot;&gt;&lt;span style=&quot;color:#f80&quot;&gt;This file must be saved,&lt;/span&gt; please click the download button to download, or copy the text content of the certificate and save it as &lt;i class=&quot;i downloadCertFileName&quot;&gt;&lt;/i&gt; file (PEM plain text format); the file name suffix can be changed to &lt;i class=&quot;i&quot;&gt;.crt &lt;/i&gt; or &lt;i class=&quot;i&quot;&gt;.cer &lt;/i&gt;, so that it can be directly double-clicked to open and view in Windows. This PEM format file already contains your domain name certificate and complete certificate chain. The first CERTIFICATE in the text is your domain name certificate, followed by the intermediate certificate and root certificate of the certificate authority, if necessary, you can split it into multiple .pem files.&lt;/span&gt;</span><br><span class="hljs-string">			&lt;/div&gt;</span><br><span class="hljs-string">			&lt;div class=&quot;FlexBox&quot;&gt;</span><br><span class="hljs-string">				&lt;div class=&quot;FlexItem&quot;&gt;</span><br><span class="hljs-string">					&lt;textarea class=&quot;txt_downloadCert&quot; style=&quot;width:100%;height:160px&quot; readonly=&quot;&quot;&gt;&lt;/textarea&gt;</span><br><span class="hljs-string">				&lt;/div&gt;</span><br><span class="hljs-string">				&lt;div style=&quot;padding-left:10px;line-height:30px;font-size:13px;color:#aaa&quot;&gt;</span><br><span class="hljs-string">					&lt;div class=&quot;mainBtn&quot; onclick=&quot;downloadBtnClick(&#x27;Cert&#x27;)&quot;&gt;</span><br><span class="hljs-string">						&lt;span class=&quot;langCN&quot;&gt;下载保存&lt;/span&gt;</span><br><span class="hljs-string">						&lt;span class=&quot;langEN&quot;&gt;Download&lt;/span&gt;</span><br><span class="hljs-string">					&lt;/div&gt;</span><br><span class="hljs-string">				&lt;/div&gt;</span><br><span class="hljs-string">			&lt;/div&gt;</span><br><span class="hljs-string">		&lt;/div&gt;</span><br><span class="hljs-string">		</span><br><span class="hljs-string">		</span><br><span class="hljs-string">		&lt;div class=&quot;itemBox&quot;&gt;</span><br><span class="hljs-string">			&lt;div class=&quot;pd Bold&quot;&gt;</span><br><span class="hljs-string">				&lt;i class=&quot;must&quot;&gt;*&lt;/i&gt;</span><br><span class="hljs-string">				&lt;span class=&quot;langCN&quot;&gt;保存证书私钥KEY文件：&lt;/span&gt;</span><br><span class="hljs-string">				&lt;span class=&quot;langEN&quot;&gt;Save the certificate private key KEY file: &lt;/span&gt;</span><br><span class="hljs-string">			&lt;/div&gt;</span><br><span class="hljs-string">			&lt;div class=&quot;pd&quot; style=&quot;font-size:13px;color:#aaa&quot;&gt;</span><br><span class="hljs-string">				&lt;span class=&quot;langCN&quot;&gt;请点击下载按钮下载，或者将私钥文本内容复制保存为&lt;i class=&quot;i downloadKeyFileName&quot;&gt;&lt;/i&gt;文件（PEM纯文本格式，.key后缀可自行修改成.pem）。如果第二步操作中你手动填写了证书私钥，此处的证书私钥和你填写的是完全一样的，可以不需要重复保存；&lt;span style=&quot;color:#f80&quot;&gt;如果你是新创建的证书私钥，则你必须下载保存此证书私钥文件。&lt;/span&gt;&lt;/span&gt;</span><br><span class="hljs-string">				&lt;span class=&quot;langEN&quot;&gt;Please click the download button to download, or copy and save the text content of the private key as &lt;i class=&quot;i downloadKeyFileName&quot;&gt;&lt;/i&gt; file (PEM plain text format, the .key suffix can be modified to .pem by yourself). If you manually filled in the certificate private key in the step 2, the certificate private key here is exactly the same as what you filled in, and you don’t need to save it repeatedly; &lt;span style=&quot;color:#f80&quot;&gt;if you are a newly created certificate private key, you must download and save it This certificate private key file.&lt;/span&gt;&lt;/span&gt;</span><br><span class="hljs-string">			&lt;/div&gt;</span><br><span class="hljs-string">			&lt;div class=&quot;FlexBox&quot;&gt;</span><br><span class="hljs-string">				&lt;div class=&quot;FlexItem&quot;&gt;</span><br><span class="hljs-string">					&lt;textarea class=&quot;txt_downloadKey&quot; style=&quot;width:100%;height:80px&quot; readonly=&quot;&quot;&gt;&lt;/textarea&gt;</span><br><span class="hljs-string">				&lt;/div&gt;</span><br><span class="hljs-string">				&lt;div style=&quot;padding-left:10px;line-height:30px;font-size:13px;color:#aaa&quot;&gt;</span><br><span class="hljs-string">					&lt;div class=&quot;mainBtn&quot; onclick=&quot;downloadBtnClick(&#x27;Key&#x27;)&quot;&gt;</span><br><span class="hljs-string">						&lt;span class=&quot;langCN&quot;&gt;下载保存&lt;/span&gt;</span><br><span class="hljs-string">						&lt;span class=&quot;langEN&quot;&gt;Download&lt;/span&gt;</span><br><span class="hljs-string">					&lt;/div&gt;</span><br><span class="hljs-string">				&lt;/div&gt;</span><br><span class="hljs-string">			&lt;/div&gt;</span><br><span class="hljs-string">		&lt;/div&gt;</span><br><span class="hljs-string">		</span><br><span class="hljs-string">		</span><br><span class="hljs-string">		&lt;div class=&quot;itemBox&quot;&gt;</span><br><span class="hljs-string">			&lt;div class=&quot;pd Bold&quot;&gt;</span><br><span class="hljs-string">				&lt;i class=&quot;must&quot;&gt;*&lt;/i&gt;</span><br><span class="hljs-string">				&lt;span class=&quot;langCN&quot;&gt;保存记录LOG文件：&lt;/span&gt;</span><br><span class="hljs-string">				&lt;span class=&quot;langEN&quot;&gt;Save the record LOG file: &lt;/span&gt;</span><br><span class="hljs-string">			&lt;/div&gt;</span><br><span class="hljs-string">			&lt;div class=&quot;pd&quot; style=&quot;font-size:13px;color:#aaa&quot;&gt;</span><br><span class="hljs-string">				&lt;span class=&quot;langCN&quot;&gt;建议下载保存此文件，本记录文件包含了所有数据，包括：证书PEM文本、证书私钥PEM文本、账户私钥PEM文本、所有配置参数。下次你需要续签新证书时，可以将本记录文件直接拖拽进本页面，会自动填写所有参数。&lt;/span&gt;</span><br><span class="hljs-string">				&lt;span class=&quot;langEN&quot;&gt;It is recommended to download and save this file. This record file contains all data, including: certificate PEM text, certificate private key PEM text, account private key PEM text, and all configuration parameters. Next time you need to renew a new certificate, you can drag and drop the record file directly into this page, and all parameters will be filled in automatically.&lt;/span&gt;</span><br><span class="hljs-string">			&lt;/div&gt;</span><br><span class="hljs-string">			&lt;div class=&quot;FlexBox&quot;&gt;</span><br><span class="hljs-string">				&lt;div class=&quot;FlexItem&quot;&gt;</span><br><span class="hljs-string">					&lt;textarea class=&quot;txt_downloadLog&quot; style=&quot;width:100%;height:80px&quot; readonly=&quot;&quot;&gt;&lt;/textarea&gt;</span><br><span class="hljs-string">				&lt;/div&gt;</span><br><span class="hljs-string">				&lt;div style=&quot;padding-left:10px;line-height:30px;font-size:13px;color:#aaa&quot;&gt;</span><br><span class="hljs-string">					&lt;div class=&quot;mainBtn&quot; onclick=&quot;downloadBtnClick(&#x27;Log&#x27;)&quot;&gt;</span><br><span class="hljs-string">						&lt;span class=&quot;langCN&quot;&gt;下载保存&lt;/span&gt;</span><br><span class="hljs-string">						&lt;span class=&quot;langEN&quot;&gt;Download&lt;/span&gt;</span><br><span class="hljs-string">					&lt;/div&gt;</span><br><span class="hljs-string">				&lt;/div&gt;</span><br><span class="hljs-string">			&lt;/div&gt;</span><br><span class="hljs-string">		&lt;/div&gt;</span><br><span class="hljs-string">		</span><br><span class="hljs-string">		</span><br><span class="hljs-string">	&lt;/div&gt;</span><br><span class="hljs-string">&lt;/div&gt;</span><br><span class="hljs-string"></span><br><span class="hljs-string"></span><br><span class="hljs-string"></span><br><span class="hljs-string"></span><br><span class="hljs-string"></span><br><span class="hljs-string"></span><br><span class="hljs-string">&lt;div class=&quot;mainBox&quot;&gt;</span><br><span class="hljs-string">		</span><br><span class="hljs-string">	&lt;div class=&quot;itemBox&quot;&gt;</span><br><span class="hljs-string">		&lt;div class=&quot;pd Bold&quot;&gt;</span><br><span class="hljs-string">			&lt;span class=&quot;langCN&quot;&gt;你需要其他格式的证书文件？&lt;/span&gt;</span><br><span class="hljs-string">			&lt;span class=&quot;langEN&quot;&gt;Do you need certificate files in other formats?&lt;/span&gt;</span><br><span class="hljs-string">		&lt;/div&gt;</span><br><span class="hljs-string">		&lt;div class=&quot;pd&quot; style=&quot;font-size:13px;color:#aaa&quot;&gt;</span><br><span class="hljs-string">			&lt;span class=&quot;langCN&quot;&gt;大部分服务器程序支持直接使用 &lt;i class=&quot;i downloadCertFileName&quot;&gt;&lt;/i&gt;+&lt;i class=&quot;i downloadKeyFileName&quot;&gt;&lt;/i&gt; 来配置开启HTTPS（比如Nginx），如果你需要 &lt;i class=&quot;i&quot;&gt;*.pfx&lt;/i&gt;、&lt;i class=&quot;i&quot;&gt;*.p12&lt;/i&gt; 格式的证书（比如用于IIS），请用下面命令将PEM证书转换成 &lt;i class=&quot;i&quot;&gt;pfx/p12&lt;/i&gt; 格式：&lt;/span&gt;</span><br><span class="hljs-string">			&lt;span class=&quot;langEN&quot;&gt;Most server programs support directly using &lt;i class=&quot;i downloadCertFileName&quot;&gt;&lt;/i&gt;+&lt;i class=&quot;i downloadKeyFileName&quot;&gt;&lt;/i&gt; to configure and enable HTTPS (such as Nginx). If you need a certificate in &lt;i class=&quot;i&quot;&gt;*.pfx&lt;/i&gt; or &lt;i class=&quot;i&quot;&gt;*.p12&lt;/i&gt; format (such as for IIS), please use the following command to convert the PEM certificate Convert to &lt;i class=&quot;i&quot;&gt;pfx/p12&lt;/i&gt; format:&lt;/span&gt;</span><br><span class="hljs-string">		&lt;/div&gt;</span><br><span class="hljs-string">		&lt;div class=&quot;code&quot;&gt;openssl pkcs12 -export -out &lt;span class=&quot;downloadFileName&quot;&gt;&lt;/span&gt;.pfx -inkey &lt;span class=&quot;downloadKeyFileName&quot;&gt;&lt;/span&gt; -in &lt;span class=&quot;downloadCertFileName&quot;&gt;&lt;/span&gt;&lt;/div&gt;</span><br><span class="hljs-string">	&lt;/div&gt;</span><br><span class="hljs-string">	</span><br><span class="hljs-string">	&lt;div class=&quot;itemBox&quot;&gt;</span><br><span class="hljs-string">		&lt;div class=&quot;pd Bold&quot;&gt;</span><br><span class="hljs-string">			&lt;span class=&quot;langCN&quot;&gt;IIS证书链缺失？&lt;/span&gt;</span><br><span class="hljs-string">			&lt;span class=&quot;langEN&quot;&gt;IIS certificate chain missing?&lt;/span&gt;</span><br><span class="hljs-string">		&lt;/div&gt;</span><br><span class="hljs-string">		&lt;div class=&quot;pd&quot; style=&quot;font-size:13px;color:#aaa&quot;&gt;</span><br><span class="hljs-string">			&lt;span class=&quot;langCN&quot;&gt;对于Windows IIS服务器，你需要将证书链安装到“本地计算机”的“中间证书颁发机构”中；请将PEM证书中的所有证书拆分成单个PEM文件（后缀改成&lt;i class=&quot;i&quot;&gt;.crt&lt;/i&gt;或&lt;i class=&quot;i&quot;&gt;.cer&lt;/i&gt;），然后将系统中缺失的中间证书双击打开然后安装进去；详细参考：&lt;/span&gt;</span><br><span class="hljs-string">			&lt;span class=&quot;langEN&quot;&gt;For Windows IIS server, you need to install the certificate chain into &quot;Intermediate Certification Authorities&quot; in &quot;Local Computer&quot;; please split all certificates in PEM certificate into a single PEM file (change the suffix to &lt;i class=&quot;i&quot;&gt;.crt&lt;/i&gt; or &lt;i class=&quot;i&quot;&gt;.cer&lt;/i&gt;), then double-click to open the missing intermediate certificate in the system Then install it; detailed reference:&lt;/span&gt;</span><br><span class="hljs-string">			&lt;a href=&quot;http://support.microsoft.com/kb/954755&quot; target=&quot;_blank&quot;&gt;http://support.microsoft.com/kb/954755&lt;/a&gt;</span><br><span class="hljs-string">		&lt;/div&gt;</span><br><span class="hljs-string">	&lt;/div&gt;</span><br><span class="hljs-string">	</span><br><span class="hljs-string">	&lt;div class=&quot;itemBox&quot;&gt;</span><br><span class="hljs-string">		&lt;div class=&quot;pd Bold&quot;&gt;</span><br><span class="hljs-string">			&lt;span class=&quot;langCN&quot;&gt;本客户端部分原理简介&lt;/span&gt;</span><br><span class="hljs-string">			&lt;span class=&quot;langEN&quot;&gt;Introduction to the principle of this client&lt;/span&gt;</span><br><span class="hljs-string">		&lt;/div&gt;</span><br><span class="hljs-string">		&lt;div class=&quot;pd&quot; style=&quot;font-size:13px;color:#aaa&quot;&gt;</span><br><span class="hljs-string">			&lt;span class=&quot;langCN&quot;&gt;得益于现代浏览器的 &lt;a href=&quot;https://developer.mozilla.org/en-US/docs/Web/API/SubtleCrypto&quot; target=&quot;_blank&quot;&gt;crypto.subtle&lt;/a&gt; 对加密功能标准化，不依赖其他任何js库就能在网页上实现 &lt;i class=&quot;i&quot;&gt;RSA&lt;/i&gt;、&lt;i class=&quot;i&quot;&gt;ECC&lt;/i&gt; 的加密、解密、签名、验证、和密钥对生成。在本客户端内的 &lt;i class=&quot;i&quot;&gt;X509&lt;/i&gt; 对象中：用 X509.CreateCSR 来生成CSR，用 X509.KeyGenerate 来创建PEM格式密钥，用 X509.KeyParse 来解析PEM格式密钥，用 X509.KeyExport 来导出PEM格式密钥；这些功能都是根据相应的标准用js代码在二进制层面上实现的，二进制数据操作封装在了 &lt;i class=&quot;i&quot;&gt;ASN1&lt;/i&gt; 对象中：实现了 ASN.1 标准的二进制解析和封包，使用 ASN1.ParsePEM 方法可以解析任意的PEM格式密钥或证书。以上这些都是实现ACME网页客户端的核心基础。&lt;/span&gt;</span><br><span class="hljs-string">			&lt;span class=&quot;langEN&quot;&gt;Thanks to the standardization of encryption functions by &lt;a href=&quot;https://developer.mozilla.org/en-US/docs/Web/API/SubtleCrypto&quot; target=&quot;_blank&quot;&gt;crypto.subtle&lt;/a&gt; of modern browsers, &lt;i class=&quot;i&quot;&gt;RSA&lt;/i&gt; and &lt;i class=&quot;i&quot;&gt;ECC&lt;/i&gt; encryption, decryption, signature, verification, and key pair generation can be implemented on web pages without relying on any other js library. In the &lt;i class=&quot;i&quot;&gt;X509&lt;/i&gt; object in this client: use X509.CreateCSR to generate CSR, use X509.KeyGenerate to create PEM format key, use X509.KeyParse to parse PEM format key, use X509.KeyExport to export PEM format key; These functions are implemented at the binary level with js code according to the corresponding standards, and binary data operations are encapsulated in &lt;i class=&quot;i&quot;&gt;ASN1&lt;/i&gt; objects: ASN.1 standard binary parsing and encapsulation are implemented, Arbitrary PEM format keys or certificates can be parsed using the ASN1.ParsePEM method. These are the core foundations for implementing the ACME web client.&lt;/span&gt;</span><br><span class="hljs-string">		&lt;/div&gt;</span><br><span class="hljs-string">		&lt;div class=&quot;pd&quot; style=&quot;font-size:13px;color:#aaa&quot;&gt;</span><br><span class="hljs-string">			&lt;span class=&quot;langCN&quot;&gt;然后就是对接ACME实现证书的签发，和实现交互UI；对接ACME可以直接参考 RFC 8555 标准。有些证书颁发机构的ACME服务对浏览器支持不良，未提供齐全的 &lt;i class=&quot;i&quot;&gt;Access-Control-*&lt;/i&gt; 响应头，导致网页内无法直接调用服务接口；目前采用的解决办法非常简单粗暴，比如ZeroSSL：检测到此ACME服务存在跨域问题时，会调用 &lt;i class=&quot;i&quot;&gt;acmeReadDirGotoCORS()&lt;/i&gt; 方法告诉用户操作步骤（你可以&lt;a onclick=&quot;acmeReadDirGotoCORS();alert(&#x27;调用成功，请到第一步操作&#x27;)&quot;&gt;点此&lt;/a&gt;手动调用此方法），通过在他们的页面内运行本客户端来消除跨域问题（既然打不过，那就加入他们）。&lt;/span&gt;</span><br><span class="hljs-string">			&lt;span class=&quot;langEN&quot;&gt;Then it is to connect with ACME to realize certificate issuance and realize interactive UI; for connecting with ACME, you can directly refer to the RFC 8555 standard. The ACME services of some certificate authorities do not support browsers well, and do not provide complete &lt;i class=&quot;i&quot;&gt;Access-Control-*&lt;/i&gt; response headers, so that the service interface cannot be called directly in the web page; the current solution is very simple and rude, such as ZeroSSL: detect this ACME When there is a cross-domain problem with the service, the &lt;i class=&quot;i&quot;&gt;acmeReadDirGotoCORS()&lt;/i&gt; method will be called to tell the user the operation steps (you can call this method manually by &lt;a onclick=&quot;acmeReadDirGotoCORS();alert(&#x27;Call succeeded, please go to step 1&#x27;)&quot;&gt;clicking here&lt;/a&gt;), and the cross-domain problem will be eliminated by running this client in their page (if we can&#x27;t beat them, we&#x27;d better join them).&lt;/span&gt;</span><br><span class="hljs-string">		&lt;/div&gt;</span><br><span class="hljs-string">	&lt;/div&gt;</span><br><span class="hljs-string">	</span><br><span class="hljs-string">	&lt;div class=&quot;itemBox&quot;&gt;</span><br><span class="hljs-string">		&lt;div class=&quot;pd Bold&quot;&gt;</span><br><span class="hljs-string">			&lt;span class=&quot;langCN&quot;&gt;QQ群：交流与支持&lt;/span&gt;</span><br><span class="hljs-string">			&lt;span class=&quot;langEN&quot;&gt;QQ group: communication and support&lt;/span&gt;</span><br><span class="hljs-string">		&lt;/div&gt;</span><br><span class="hljs-string">		&lt;div class=&quot;pd&quot; style=&quot;font-size:13px;color:#aaa&quot;&gt;</span><br><span class="hljs-string">			&lt;span class=&quot;langCN&quot;&gt;欢迎加QQ群：&lt;i class=&quot;i&quot;&gt;421882406&lt;/i&gt;，纯小写口令：&lt;i class=&quot;i&quot;&gt;xiangyuecn&lt;/i&gt;。如需功能定制，网站、App、小程序、前端和后端等开发需求，请加此QQ群，联系群主（即作者），谢谢~&lt;/span&gt;</span><br><span class="hljs-string">			&lt;span class=&quot;langEN&quot;&gt;Welcome to join the QQ group: &lt;i class=&quot;i&quot;&gt;421882406&lt;/i&gt; , code: &lt;i class=&quot;i&quot;&gt;xiangyuecn&lt;/i&gt; . If you need function customization, website, app, applet, front-end and back-end development needs, please join this QQ group and contact the group owner (ie the author), thank you~&lt;/span&gt;</span><br><span class="hljs-string">		&lt;/div&gt;</span><br><span class="hljs-string">	&lt;/div&gt;</span><br><span class="hljs-string">	</span><br><span class="hljs-string">&lt;/div&gt;</span><br><span class="hljs-string"></span><br><span class="hljs-string"></span><br><span class="hljs-string"></span><br><span class="hljs-string"></span><br><span class="hljs-string">&lt;div style=&quot;padding-top:20px;font-size:13px;color:#aaa&quot;&gt;</span><br><span class="hljs-string">	&lt;div class=&quot;pd langEN&quot;&gt;The Chinese-English translation is mainly from: Chrome comes with translation + Baidu translation, which is translated from Chinese to English.&lt;/div&gt;</span><br><span class="hljs-string">	</span><br><span class="hljs-string">	&lt;div class=&quot;pd&quot;&gt;</span><br><span class="hljs-string">		&lt;span class=&quot;versionBox&quot;&gt;&lt;/span&gt;</span><br><span class="hljs-string">		&lt;a style=&quot;margin-left:15px&quot; href=&quot;https://github.com/xiangyuecn/ACME-HTML-Web-Browser-Client/blob/main/LICENSE&quot; target=&quot;_blank&quot;&gt;License: GPL-3.0&lt;/a&gt;</span><br><span class="hljs-string">	&lt;/div&gt;</span><br><span class="hljs-string">&lt;/div&gt;</span><br><span class="hljs-string"></span><br><span class="hljs-string"></span><br><span class="hljs-string"></span><br><span class="hljs-string">&lt;div class=&quot;toastState&quot; style=&quot;display:none;position:fixed;padding:10px;bottom:10px;right:10px;width:360px;max-height:120px;overflow-y:auto;background:#fff;box-shadow: 0px 0px 3px #aaa;border-radius: 10px;&quot;&gt;&lt;/div&gt;</span><br><span class="hljs-string"></span><br><span class="hljs-string">&lt;div class=&quot;donateWidget&quot; style=&quot;position:fixed;top:30%;right:5px;width:160px&quot;&gt;</span><br><span class="hljs-string">	&lt;div style=&quot;border-radius:12px;background:linear-gradient(160deg, rgba(0,179,255,.7) 20%, rgba(177,0,255,.7) 80%);max-width:300px;padding:20px 10px;text-align: center;&quot;&gt;</span><br><span class="hljs-string">		&lt;div style=&quot;font-size:18px;color:#fff;&quot;&gt;</span><br><span class="hljs-string">			&lt;span class=&quot;langCN&quot;&gt;赏包辣条？&lt;/span&gt;</span><br><span class="hljs-string">			&lt;span class=&quot;langEN&quot;&gt;Donate a Coke?&lt;/span&gt;</span><br><span class="hljs-string">		&lt;/div&gt;</span><br><span class="hljs-string">		&lt;div style=&quot;font-size:14px;color:#fff;&quot;&gt;</span><br><span class="hljs-string">			&lt;div class=&quot;langCN&quot; style=&quot;padding:10px 0&quot;&gt;客户端工具开发维护不易，期望本项目对你能有所帮助，欢迎通过下面按钮打赏作者~&lt;/div&gt;</span><br><span class="hljs-string">			&lt;span class=&quot;langEN&quot;&gt;It is not easy to develop and maintain client tools. I hope this project can help you. Welcome to reward the author through the following buttons~&lt;/span&gt;</span><br><span class="hljs-string">		&lt;/div&gt;</span><br><span class="hljs-string">		&lt;div&gt;</span><br><span class="hljs-string">			&lt;span class=&quot;langCN&quot;&gt;</span><br><span class="hljs-string">				&lt;a id=&quot;id_ek8v&quot; target=&quot;_blank&quot; class=&quot;mainBtn mainBtnMin&quot; style=&quot;color:#fff&quot; href=&quot;https://xiangyuecn.github.io/Docs/about.html&quot;&gt;打赏 &lt;span class=&quot;donateBtnIco&quot;&gt;&lt;/span&gt;&lt;/a&gt;</span><br><span class="hljs-string">				&lt;script&gt; id_ek8v.href=/gitee\\.io/.test(location.host)?&quot;https://xiangyuecn.gitee.io/docs/about.html&quot;:&quot;https://xiangyuecn.github.io/Docs/about.html&quot; &lt;/script&gt;</span><br><span class="hljs-string">			&lt;/span&gt;</span><br><span class="hljs-string">			&lt;span class=&quot;langEN&quot;&gt;</span><br><span class="hljs-string">				&lt;a href=&quot;https://xiangyuecn.github.io/Docs/about.html&quot; target=&quot;_blank&quot; class=&quot;mainBtn mainBtnMin&quot; style=&quot;color:#fff&quot;&gt;Donate &lt;span class=&quot;donateBtnIco&quot;&gt;&lt;/span&gt;&lt;/a&gt;</span><br><span class="hljs-string">			&lt;/span&gt;</span><br><span class="hljs-string">		&lt;/div&gt;</span><br><span class="hljs-string">	&lt;/div&gt;</span><br><span class="hljs-string">&lt;/div&gt;</span><br><span class="hljs-string"></span><br><span class="hljs-string">&lt;div class=&quot;langBtnBox&quot; style=&quot;position:fixed;top:0;right:0;padding:5px 10px;font-size:14px;border-radius:0 0 0 10px;background:#f5f5f5;&quot;&gt;</span><br><span class="hljs-string">	Language:</span><br><span class="hljs-string">	  &lt;a class=&quot;langBtn langBtn_cn&quot; onclick=&quot;LangClick(&#x27;cn&#x27;)&quot;&gt;中文&lt;/a&gt;</span><br><span class="hljs-string">	| &lt;a class=&quot;langBtn langBtn_en&quot; onclick=&quot;LangClick(&#x27;en&#x27;)&quot;&gt;EN&lt;/a&gt;</span><br><span class="hljs-string">&lt;/div&gt;</span><br><span class="hljs-string"></span><br><span class="hljs-string">&lt;/div&gt;</span><br><span class="hljs-string"></span><br><span class="hljs-string"></span><br><span class="hljs-string"></span><br><span class="hljs-string">&lt;style&gt;</span><br><span class="hljs-string">body&#123;</span><br><span class="hljs-string">	word-wrap: break-word;</span><br><span class="hljs-string">	--word-break: break-all;</span><br><span class="hljs-string">	background:#f5f5f5 center top no-repeat;</span><br><span class="hljs-string">	background-size: auto 680px;</span><br><span class="hljs-string">&#125;</span><br><span class="hljs-string">pre&#123;</span><br><span class="hljs-string">	white-space:pre-wrap;</span><br><span class="hljs-string">&#125;</span><br><span class="hljs-string">label,label *&#123;</span><br><span class="hljs-string">	cursor: pointer;</span><br><span class="hljs-string">&#125;</span><br><span class="hljs-string">label:hover&#123;</span><br><span class="hljs-string">	color:#06c;</span><br><span class="hljs-string">&#125;</span><br><span class="hljs-string">a&#123;</span><br><span class="hljs-string">	text-decoration: none;</span><br><span class="hljs-string">	color:#06c;</span><br><span class="hljs-string">	cursor: pointer;</span><br><span class="hljs-string">&#125;</span><br><span class="hljs-string">a:hover&#123;</span><br><span class="hljs-string">	color:#f00;</span><br><span class="hljs-string">&#125;</span><br><span class="hljs-string">input, textarea &#123;</span><br><span class="hljs-string">	--outline: 0;</span><br><span class="hljs-string">	border: 1px solid #999;</span><br><span class="hljs-string">	padding: 2px;</span><br><span class="hljs-string">	box-sizing: border-box;</span><br><span class="hljs-string">	font-size: 15px;</span><br><span class="hljs-string">	line-height:24px;</span><br><span class="hljs-string">&#125;</span><br><span class="hljs-string"></span><br><span class="hljs-string">.main&#123;</span><br><span class="hljs-string">	max-width:900px;</span><br><span class="hljs-string">	margin:0 auto;</span><br><span class="hljs-string">	padding-bottom:80px</span><br><span class="hljs-string">&#125;</span><br><span class="hljs-string"></span><br><span class="hljs-string">.mainBox&#123;</span><br><span class="hljs-string">	margin-top:12px;</span><br><span class="hljs-string">	padding: 12px;</span><br><span class="hljs-string">	border-radius: 6px;</span><br><span class="hljs-string">	background: #fff;</span><br><span class="hljs-string">	box-shadow: 2px 2px 3px #aaa;</span><br><span class="hljs-string">&#125;</span><br><span class="hljs-string"></span><br><span class="hljs-string"></span><br><span class="hljs-string">.mainBtn&#123;</span><br><span class="hljs-string">	display: inline-block;</span><br><span class="hljs-string">	cursor: pointer;</span><br><span class="hljs-string">	border: none;</span><br><span class="hljs-string">	border-radius: 3px;</span><br><span class="hljs-string">	background: #f80;</span><br><span class="hljs-string">	color:#fff;</span><br><span class="hljs-string">	padding: 0 15px;</span><br><span class="hljs-string">	line-height: 36px;</span><br><span class="hljs-string">	height: 36px;</span><br><span class="hljs-string">	overflow: hidden;</span><br><span class="hljs-string">	vertical-align: middle;</span><br><span class="hljs-string">&#125;</span><br><span class="hljs-string">.mainBtnMin&#123;</span><br><span class="hljs-string">	height: 30px;</span><br><span class="hljs-string">	line-height: 30px;</span><br><span class="hljs-string">	font-size: 14px;</span><br><span class="hljs-string">	padding: 0 12px;</span><br><span class="hljs-string">&#125;</span><br><span class="hljs-string">.mainBtn:hover&#123;</span><br><span class="hljs-string">	opacity:0.8;</span><br><span class="hljs-string">&#125;</span><br><span class="hljs-string">.mainBtn:active&#123;</span><br><span class="hljs-string">	opacity:1;</span><br><span class="hljs-string">	background: #f00;</span><br><span class="hljs-string">&#125;</span><br><span class="hljs-string"></span><br><span class="hljs-string">.pd&#123;</span><br><span class="hljs-string">	padding:0 0 8px 0;</span><br><span class="hljs-string">&#125;</span><br><span class="hljs-string">.pdT&#123;</span><br><span class="hljs-string">	padding:8px 0 0 0;</span><br><span class="hljs-string">&#125;</span><br><span class="hljs-string">.lb&#123;</span><br><span class="hljs-string">	display:inline-block;</span><br><span class="hljs-string">	vertical-align: middle;</span><br><span class="hljs-string">	background:#00940e;</span><br><span class="hljs-string">	color:#fff;</span><br><span class="hljs-string">	font-size:14px;</span><br><span class="hljs-string">	padding:2px 8px;</span><br><span class="hljs-string">	border-radius: 99px;</span><br><span class="hljs-string">&#125;</span><br><span class="hljs-string"></span><br><span class="hljs-string">.Fill &#123;</span><br><span class="hljs-string">	position: absolute;</span><br><span class="hljs-string">	top: 0;</span><br><span class="hljs-string">	left: 0;</span><br><span class="hljs-string">	width: 100%;</span><br><span class="hljs-string">	height: 100%;</span><br><span class="hljs-string">	overflow: hidden;</span><br><span class="hljs-string">&#125;</span><br><span class="hljs-string">.Center&#123;</span><br><span class="hljs-string">	text-align: center;</span><br><span class="hljs-string">&#125;</span><br><span class="hljs-string">.CenterV &#123;</span><br><span class="hljs-string">	display: -webkit-flex;</span><br><span class="hljs-string">	display: -ms-flex;</span><br><span class="hljs-string">	display: -moz-flex;</span><br><span class="hljs-string">	display: flex;</span><br><span class="hljs-string">	-webkit-align-items: center;</span><br><span class="hljs-string">	-ms-align-items: center;</span><br><span class="hljs-string">	-moz-align-items: center;</span><br><span class="hljs-string">	align-items: center;</span><br><span class="hljs-string">&#125;</span><br><span class="hljs-string">.FlexBox &#123;</span><br><span class="hljs-string">	display: -webkit-flex;</span><br><span class="hljs-string">	display: -ms-flex;</span><br><span class="hljs-string">	display: -moz-flex;</span><br><span class="hljs-string">	display: flex;</span><br><span class="hljs-string">&#125;</span><br><span class="hljs-string">.FlexBoxV&#123;</span><br><span class="hljs-string">	-webkit-flex-direction:column;</span><br><span class="hljs-string">	-ms-flex-direction:column;</span><br><span class="hljs-string">	-moz-flex-direction:column;</span><br><span class="hljs-string">	flex-direction:column;</span><br><span class="hljs-string">&#125;</span><br><span class="hljs-string">.FlexCenter&#123;</span><br><span class="hljs-string">	-webkit-box-pack:center;</span><br><span class="hljs-string">	-ms-box-pack:center;</span><br><span class="hljs-string">	-moz-box-pack:center;</span><br><span class="hljs-string">	box-pack:center;</span><br><span class="hljs-string">	-webkit-justify-content:center;</span><br><span class="hljs-string">	-ms-justify-content:center;</span><br><span class="hljs-string">	-moz-justify-content:center;</span><br><span class="hljs-string">	justify-content:center;</span><br><span class="hljs-string">&#125;</span><br><span class="hljs-string">.FlexCenterV&#123;</span><br><span class="hljs-string">	-webkit-box-align:center;</span><br><span class="hljs-string">	-ms-box-align:center;</span><br><span class="hljs-string">	-moz-box-align:center;</span><br><span class="hljs-string">	box-align:center;</span><br><span class="hljs-string">	-webkit-align-items:center;</span><br><span class="hljs-string">	-ms-align-items:center;</span><br><span class="hljs-string">	-moz-align-items:center;</span><br><span class="hljs-string">	align-items:center;</span><br><span class="hljs-string">&#125;</span><br><span class="hljs-string">.FlexItem &#123;</span><br><span class="hljs-string">	-webkit-flex: 1;</span><br><span class="hljs-string">	-ms-flex: 1;</span><br><span class="hljs-string">	-moz-flex: 1;</span><br><span class="hljs-string">	flex: 1;</span><br><span class="hljs-string">&#125;</span><br><span class="hljs-string"></span><br><span class="hljs-string"></span><br><span class="hljs-string">.Bold&#123;</span><br><span class="hljs-string">	font-weight: bold;</span><br><span class="hljs-string">&#125;</span><br><span class="hljs-string">.code&#123;</span><br><span class="hljs-string">	padding: 15px;</span><br><span class="hljs-string">	background-color: #000;</span><br><span class="hljs-string">	vertical-align: middle;</span><br><span class="hljs-string">	color: #fff;</span><br><span class="hljs-string">	font-size: 14px;</span><br><span class="hljs-string">	white-space: pre-wrap;</span><br><span class="hljs-string">	border-radius: 6px;</span><br><span class="hljs-string">	font-style: normal;</span><br><span class="hljs-string">&#125;</span><br><span class="hljs-string">.i&#123;</span><br><span class="hljs-string">	padding: 2px 4px;</span><br><span class="hljs-string">	background-color: #f6f6f6;</span><br><span class="hljs-string">	vertical-align: top;</span><br><span class="hljs-string">	color: #c7254e;</span><br><span class="hljs-string">	font-size: 12px;</span><br><span class="hljs-string">	white-space: pre-wrap;</span><br><span class="hljs-string">	border-radius: 4px;</span><br><span class="hljs-string">	font-style: normal;</span><br><span class="hljs-string">&#125;</span><br><span class="hljs-string">i.must&#123;</span><br><span class="hljs-string">	color:red;</span><br><span class="hljs-string">	font-style:normal;</span><br><span class="hljs-string">&#125;</span><br><span class="hljs-string">.itemTitle&#123;</span><br><span class="hljs-string">	font-size: 24px;</span><br><span class="hljs-string">	font-weight: bold;</span><br><span class="hljs-string">	color: #03baed;</span><br><span class="hljs-string">&#125;</span><br><span class="hljs-string">.itemBox&#123;</span><br><span class="hljs-string">	padding:8px;</span><br><span class="hljs-string">	margin-bottom:6px;</span><br><span class="hljs-string">	border:1px #ccc dashed;</span><br><span class="hljs-string">	border-radius: 6px;</span><br><span class="hljs-string">&#125;</span><br><span class="hljs-string">&lt;/style&gt;</span><br><span class="hljs-string"></span><br><span class="hljs-string"></span><br><span class="hljs-string"></span><br><span class="hljs-string"></span><br><span class="hljs-string">&lt;script&gt;</span><br><span class="hljs-string">//=================================================</span><br><span class="hljs-string">//================= UI functions ==================</span><br><span class="hljs-string">//=================================================</span><br><span class="hljs-string">//LICENSE: GPL-3.0, https://github.com/xiangyuecn/ACME-HTML-Web-Browser-Client</span><br><span class="hljs-string">(function()&#123;</span><br><span class="hljs-string">&quot;use strict&quot;;</span><br><span class="hljs-string">var ChoiceAcmeURLStoreKey=&quot;ACME_HTML_choice_acmeURL&quot;;</span><br><span class="hljs-string">var InputDomainsStoreKey=&quot;ACME_HTML_input_domains&quot;;</span><br><span class="hljs-string">var InputEmailStoreKey=&quot;ACME_HTML_input_email&quot;;</span><br><span class="hljs-string">var DropConfigFile=&#123;&#125;; //拖拽进来的上次配置文件</span><br><span class="hljs-string"></span><br><span class="hljs-string">/************** UI: Initialize on Launch **************/</span><br><span class="hljs-string">window.initMainUI=function()&#123;</span><br><span class="hljs-string">	$(&quot;.eccCurveNames&quot;).html(X509.SupportECCType2Names().join(Lang(&quot;、&quot;,&quot;, &quot;)));</span><br><span class="hljs-string">	$(&quot;.donateBtnIco&quot;).html(unescape(&quot;%uD83D%uDE18&quot;));</span><br><span class="hljs-string">	$(&quot;.versionBox&quot;).html(Lang(&quot;版本: &quot;+Version,&quot;Ver: &quot;+Version));</span><br><span class="hljs-string">	</span><br><span class="hljs-string">	if(/mobile/i.test(navigator.userAgent))&#123;</span><br><span class="hljs-string">		$(&quot;.main&quot;).prepend($(&quot;.langBtnBox&quot;).css(&quot;position&quot;,null));</span><br><span class="hljs-string">		$(&quot;.donateWidget&quot;).css(&quot;position&quot;,null);</span><br><span class="hljs-string">	&#125;</span><br><span class="hljs-string">	</span><br><span class="hljs-string">	CLog(&quot;initMainUI&quot;,0,Lang(</span><br><span class="hljs-string">\`一些高级配置：</span><br><span class="hljs-string">- 设置 X509.DefaultType2_RSA=&quot;4096&quot; 可以调整新生成的RSA密钥位数。</span><br><span class="hljs-string">- 设置 X509.DefaultType2_ECC=&quot;P-384&quot; 可以调整新生成的ECC密钥曲线，X509.SupportECCType2内为支持的曲线。</span><br><span class="hljs-string">- 设置 DefaultDownloadFileNames 内的属性可以修改对应下载的文件默认名称。</span><br><span class="hljs-string">- UI调试：完成第二步后允许进行UI调试，手动调用 Test_AllStepData_Save() 保存数据，刷新页面可恢复界面。\`,</span><br><span class="hljs-string">\`Some advanced configurations:</span><br><span class="hljs-string">- Set X509.DefaultType2_RSA=&quot;4096&quot; The number of newly generated RSA keys can be adjusted.</span><br><span class="hljs-string">- Set X509.DefaultType2_ECC=&quot;P-384&quot; The newly generated ECC key curve can be adjusted. The supported curve is in X509.SupportECCType2.</span><br><span class="hljs-string">- Setting the property in DefaultDownloadFileNames can modify the default name of the corresponding downloaded file.</span><br><span class="hljs-string">- UI debugging: Allow UI debugging after completing the step 2 . Manually call Test_AllStepData_Save() to save the data, and refresh the page to restore the interface.\`));</span><br><span class="hljs-string">	</span><br><span class="hljs-string">	initTest_Restore();</span><br><span class="hljs-string">	acmeReadDirGotoCORSInit();</span><br><span class="hljs-string">	downloadFileNameShow();</span><br><span class="hljs-string">	initStep1();</span><br><span class="hljs-string">	initStep2();</span><br><span class="hljs-string">	initStep4();</span><br><span class="hljs-string">&#125;;</span><br><span class="hljs-string">var initStep1=function()&#123;</span><br><span class="hljs-string">	$(&quot;input[name=choice_acmeURL]&quot;).bind(&quot;click&quot;,function(e)&#123;</span><br><span class="hljs-string">		var el=e.target;</span><br><span class="hljs-string">		var isManual=el.value==&quot;manual&quot;;</span><br><span class="hljs-string">		$(&quot;.in_acmeURL&quot;).css(&quot;opacity&quot;,isManual?1:0.4)</span><br><span class="hljs-string">			.val(isManual?step1ChoiceStoreVal:el.value)</span><br><span class="hljs-string">			.attr(&quot;readonly&quot;,isManual?null:&quot;&quot;);</span><br><span class="hljs-string">		</span><br><span class="hljs-string">		var descKey=$(el).attr(&quot;desckey&quot;);</span><br><span class="hljs-string">		$(&quot;.descAcmeURL&quot;).hide();</span><br><span class="hljs-string">		if(descKey)$(&quot;.&quot;+descKey).show();</span><br><span class="hljs-string">		</span><br><span class="hljs-string">		step1ChoiceStoreVal=&quot;&quot;;</span><br><span class="hljs-string">		choiceAcmeURLChangeAfter();</span><br><span class="hljs-string">	&#125;);</span><br><span class="hljs-string">	resetStep1();</span><br><span class="hljs-string">&#125;;</span><br><span class="hljs-string">var step1ChoiceStoreVal;</span><br><span class="hljs-string">var resetStep1=function()&#123;</span><br><span class="hljs-string">	//选中上次选择的证书颁发机构</span><br><span class="hljs-string">	step1ChoiceStoreVal=DropConfigFile.acmeURL||window.Default_ACME_URL||localStorage[ChoiceAcmeURLStoreKey]||&quot;&quot;;</span><br><span class="hljs-string">	var choices=$(&quot;input[name=choice_acmeURL]&quot;)</span><br><span class="hljs-string">	var idx=0;</span><br><span class="hljs-string">	if(step1ChoiceStoreVal)&#123;</span><br><span class="hljs-string">		var manualIdx=0;</span><br><span class="hljs-string">		for(var i=0;i&lt;choices.length;i++)&#123;</span><br><span class="hljs-string">			if(choices[i].value==step1ChoiceStoreVal) idx=i+1;</span><br><span class="hljs-string">			if(choices[i].value==&quot;manual&quot;) manualIdx=i+1;</span><br><span class="hljs-string">		&#125;</span><br><span class="hljs-string">		if(!idx)idx=manualIdx //手动填写</span><br><span class="hljs-string">		idx--;</span><br><span class="hljs-string">	&#125;</span><br><span class="hljs-string">	choices[idx].click();</span><br><span class="hljs-string">&#125;;</span><br><span class="hljs-string">var initStep2=function()&#123;</span><br><span class="hljs-string">	//证书私钥UI</span><br><span class="hljs-string">	$(&quot;.privateKeyBox&quot;).hide();</span><br><span class="hljs-string">	$(&quot;input[name=choice_privateKey]&quot;).bind(&quot;click&quot;,function(e)&#123;</span><br><span class="hljs-string">		var el=e.target;</span><br><span class="hljs-string">		var isManual=el.value==&quot;manual&quot;;</span><br><span class="hljs-string">		$(&quot;.in_privateKey&quot;).css(&quot;opacity&quot;,isManual?1:0.4)</span><br><span class="hljs-string">			.val(&quot;&quot;)</span><br><span class="hljs-string">			.attr(&quot;readonly&quot;,isManual?null:&quot;&quot;);</span><br><span class="hljs-string">		$(&quot;.privateKeyBox&quot;).show();</span><br><span class="hljs-string">		</span><br><span class="hljs-string">		configPrivateKeyGenerate(el.value);//生成密钥</span><br><span class="hljs-string">		configStepShow();//重新显示界面</span><br><span class="hljs-string">	&#125;);</span><br><span class="hljs-string">	</span><br><span class="hljs-string">	//ACME账户私钥UI</span><br><span class="hljs-string">	$(&quot;.accountKeyBox&quot;).hide();</span><br><span class="hljs-string">	$(&quot;input[name=choice_accountKey]&quot;).bind(&quot;click&quot;,function(e)&#123;</span><br><span class="hljs-string">		var el=e.target;</span><br><span class="hljs-string">		var isManual=el.value==&quot;manual&quot;;</span><br><span class="hljs-string">		$(&quot;.in_accountKey&quot;).css(&quot;opacity&quot;,isManual?1:0.4)</span><br><span class="hljs-string">			.val(&quot;&quot;)</span><br><span class="hljs-string">			.attr(&quot;readonly&quot;,isManual?null:&quot;&quot;);</span><br><span class="hljs-string">		$(&quot;.accountKeyBox&quot;).show();</span><br><span class="hljs-string">		</span><br><span class="hljs-string">		configAccountKeyGenerate(el.value);//生成密钥</span><br><span class="hljs-string">		configStepShow();//重新显示界面</span><br><span class="hljs-string">	&#125;);</span><br><span class="hljs-string">&#125;;</span><br><span class="hljs-string"></span><br><span class="hljs-string"></span><br><span class="hljs-string">//下一步操作提示</span><br><span class="hljs-string">var NextStepTips=function()&#123;</span><br><span class="hljs-string">	return &#x27;&lt;span style=&quot;font-size:24px;font-weight:bold;&quot;&gt;&#x27;+Lang(&quot;请进行下一步操作。&quot;,&quot; Please proceed to the next step.&quot;)+&#x27;&lt;/span&gt;&#x27;;</span><br><span class="hljs-string">&#125;;</span><br><span class="hljs-string">//请稍候提示</span><br><span class="hljs-string">var PleaseWaitTips=function()&#123;</span><br><span class="hljs-string">	return Lang(&quot; 请稍候... &quot;,&quot; Please wait... &quot;);</span><br><span class="hljs-string">&#125;;</span><br><span class="hljs-string">//请重试提示</span><br><span class="hljs-string">var TryAgainTips=function()&#123;</span><br><span class="hljs-string">	return Lang(&quot; 请重试！&quot;,&quot; Please try again! &quot;);</span><br><span class="hljs-string">&#125;;</span><br><span class="hljs-string">//每一步的状态更新显示</span><br><span class="hljs-string">var ShowState=function(elem,msg,color,tag)&#123;</span><br><span class="hljs-string">	var now=new Date();</span><br><span class="hljs-string">	var t=(&quot;0&quot;+now.getHours()).substr(-2)</span><br><span class="hljs-string">		+&quot;:&quot;+(&quot;0&quot;+now.getMinutes()).substr(-2)</span><br><span class="hljs-string">		+&quot;:&quot;+(&quot;0&quot;+now.getSeconds()).substr(-2);</span><br><span class="hljs-string">	$(elem).html(msg===false?&#x27;&#x27;:&#x27;&lt;div style=&quot;color:&#x27;+(!color?&quot;&quot;:color==1?&quot;red&quot;:color==2?&quot;#0b1&quot;:color==3?&quot;#fa0&quot;:color)+&#x27;&quot;&gt;&#x27;+(tag==null?&#x27;[&#x27;+t+&#x27;] &#x27;:tag)+msg+&#x27;&lt;/div&gt;&#x27;);</span><br><span class="hljs-string">	return msg;</span><br><span class="hljs-string">&#125;;</span><br><span class="hljs-string">window.Toast=function(msg,color,time)&#123;</span><br><span class="hljs-string">	ShowState(&quot;.toastState&quot;,msg,color,&quot;&quot;);</span><br><span class="hljs-string">	</span><br><span class="hljs-string">	$(&quot;.toastState&quot;).show();</span><br><span class="hljs-string">	clearTimeout(Toast._int);</span><br><span class="hljs-string">	Toast._int=setTimeout(function()&#123; $(&quot;.toastState&quot;).hide(); &#125;, time||5000);</span><br><span class="hljs-string">&#125;;</span><br><span class="hljs-string">window.onerror=function(message, url, lineNo, columnNo, error)&#123;</span><br><span class="hljs-string">	//https://www.cnblogs.com/xianyulaodi/p/6201829.html</span><br><span class="hljs-string">	Toast(&#x27;【Uncaught Error】&#x27;+message+&#x27;&lt;pre&gt;&#x27;+&quot;at:&quot;+lineNo+&quot;:&quot;+columnNo+&quot; url:&quot;+url+&quot;\\n&quot;+(error&amp;&amp;error.stack||&quot;-&quot;)+&#x27;&lt;/pre&gt;&#x27;,1,15000);</span><br><span class="hljs-string">&#125;;</span><br><span class="hljs-string"></span><br><span class="hljs-string"></span><br><span class="hljs-string"></span><br><span class="hljs-string">//用户点击操作同步控制，新点击操作要终止之前未完成的操作</span><br><span class="hljs-string">var UserClickSyncID=0;</span><br><span class="hljs-string">var UserClickSyncKill=function(id,tag,msg)&#123;</span><br><span class="hljs-string">	if(id!=UserClickSyncID)&#123;</span><br><span class="hljs-string">		var abort=Lang(&quot;被终止&quot;,&quot;Abort&quot;,1);</span><br><span class="hljs-string">		CLog(tag+&quot; &quot;+abort,3,&quot;From: &quot;+msg+&quot; [&quot;+abort+&quot;]&quot;);</span><br><span class="hljs-string">		return true;</span><br><span class="hljs-string">	&#125;</span><br><span class="hljs-string">&#125;;</span><br><span class="hljs-string"></span><br><span class="hljs-string"></span><br><span class="hljs-string"></span><br><span class="hljs-string"></span><br><span class="hljs-string"></span><br><span class="hljs-string">/************** UI Step1: Read ACME service directory **************/</span><br><span class="hljs-string">//证书颁发机构单选按钮点击后处理</span><br><span class="hljs-string">var choiceAcmeURLChangeAfter=function()&#123;</span><br><span class="hljs-string">	UserClickSyncID++;</span><br><span class="hljs-string">	</span><br><span class="hljs-string">	$(&quot;.step1Hide&quot;).hide();</span><br><span class="hljs-string">	$(&quot;.step1Show&quot;).show();</span><br><span class="hljs-string">	ShowState(&quot;.acmeReadDirState&quot;,false);</span><br><span class="hljs-string">	</span><br><span class="hljs-string">	if($(&quot;.in_acmeURL&quot;).val())acmeReadDirClick();</span><br><span class="hljs-string">&#125;;</span><br><span class="hljs-string">//点击读取服务目录按钮</span><br><span class="hljs-string">window.acmeReadDirClick=function()&#123;</span><br><span class="hljs-string">	var id=++UserClickSyncID;</span><br><span class="hljs-string">	</span><br><span class="hljs-string">	$(&quot;.step1Hide&quot;).hide();</span><br><span class="hljs-string">	$(&quot;.step1Show&quot;).show();</span><br><span class="hljs-string">	var tag=&quot;Step-1&quot;,sEl=&quot;.acmeReadDirState&quot;;</span><br><span class="hljs-string">	</span><br><span class="hljs-string">	var url=$(&quot;.in_acmeURL&quot;).val().trim();</span><br><span class="hljs-string">	if(!url)&#123;</span><br><span class="hljs-string">		ShowState(sEl,Lang(&quot;请填写服务URL！&quot;,&quot;Please fill in the service URL!&quot;),1);</span><br><span class="hljs-string">		return;</span><br><span class="hljs-string">	&#125;</span><br><span class="hljs-string">	localStorage[ChoiceAcmeURLStoreKey]=url;</span><br><span class="hljs-string">	url=ACME.URL=url.replace(/\\/$/,&quot;&quot;);</span><br><span class="hljs-string">	</span><br><span class="hljs-string">	var msg0=CLog(tag,0, ShowState(sEl,PleaseWaitTips()+Lang(&quot;正在读取服务目录，&quot;,&quot;Reading service directory, &quot;)+&quot; URL=&quot;+ACME.URL, 2));</span><br><span class="hljs-string">	var reqDir=function()&#123;</span><br><span class="hljs-string">		ACME.Directory(function(cache,saveCache)&#123;</span><br><span class="hljs-string">			saveCacheCors=function(corsOK,err)&#123;</span><br><span class="hljs-string">				cache.corsOK=corsOK?1:-1;</span><br><span class="hljs-string">				cache.corsError=err||&quot;&quot;;</span><br><span class="hljs-string">				saveCache();</span><br><span class="hljs-string">			&#125;;</span><br><span class="hljs-string">			if(cache.corsOK==1) dirOK();//已缓存的，此ACME服务正常</span><br><span class="hljs-string">			else if(cache.corsOK==-1) testCORSFail(cache.corsError, true);//不正常已缓存</span><br><span class="hljs-string">			else testCORS();//检测是否能正常调用接口，是否支持跨域</span><br><span class="hljs-string">		&#125;,function(err,status)&#123;</span><br><span class="hljs-string">			if(UserClickSyncKill(id,tag,msg0+&quot; err: &quot;+err))return;</span><br><span class="hljs-string">			if(status===0)&#123; //可能是跨域无法读取到任何数据</span><br><span class="hljs-string">				CLog(tag,1, ShowState(sEl,Lang(&quot;读取服务目录出错：无法访问此URL。&quot;,&quot;Read service directory error: This URL cannot be accessed.&quot;)+TryAgainTips(), 1));</span><br><span class="hljs-string">				</span><br><span class="hljs-string">				acmeReadDirGotoCORS(Lang(&quot;如果你可以在浏览器中直接打开并访问此ACME服务URL，代表此ACME服务对跨域访问支持不良，则请按下面步骤操作：&quot;,&quot;If you can open and access this ACME service URL directly in your browser, it represents that this ACME service has poor support for cross-domain access, please follow the steps below:&quot;));</span><br><span class="hljs-string">			&#125;else&#123;</span><br><span class="hljs-string">				CLog(tag,1, ShowState(sEl,Lang(&quot;读取服务目录出错：&quot;+err,&quot;Read service directory error: &quot;+err)+TryAgainTips(), 1));</span><br><span class="hljs-string">			&#125;;</span><br><span class="hljs-string">		&#125;);</span><br><span class="hljs-string">	&#125;;</span><br><span class="hljs-string">	var saveCacheCors;</span><br><span class="hljs-string">	var dirOK=function()&#123;</span><br><span class="hljs-string">		if(UserClickSyncKill(id,tag,msg0))return;</span><br><span class="hljs-string">		configStepShow();</span><br><span class="hljs-string">		CLog(tag,0, ShowState(sEl,Lang(&quot;读取服务目录成功，&quot;,&quot;Read service directory OK,&quot;)</span><br><span class="hljs-string">			+NextStepTips()+&quot; URL=&quot;+ACME.URL, 2), ACME.DirData);</span><br><span class="hljs-string">	&#125;;</span><br><span class="hljs-string">	</span><br><span class="hljs-string">	//ZeroSSL接口跨域支持太差，发现这种就直接在他们网站里面跑</span><br><span class="hljs-string">	var testCORS=function()&#123;</span><br><span class="hljs-string">		if(UserClickSyncKill(id,tag,msg0))return;</span><br><span class="hljs-string">		msg0=CLog(tag,0, ShowState(sEl,PleaseWaitTips()+Lang(&quot;正在测试此ACME服务对浏览器的支持情况，&quot;,&quot;Testing browser support for this ACME service, &quot;)+&quot; URL=&quot;+ACME.URL, 2));</span><br><span class="hljs-string">		ACME.GetNonce(true,function()&#123;</span><br><span class="hljs-string">			ACME.TestAccountCORS(function()&#123;</span><br><span class="hljs-string">				CLog(tag,0, Lang(&quot;此ACME服务对浏览器的支持良好。&quot;,&quot;This ACME service has good browser support.&quot;));</span><br><span class="hljs-string">				saveCacheCors(true);</span><br><span class="hljs-string">				dirOK();</span><br><span class="hljs-string">			&#125;,testCORSFail);</span><br><span class="hljs-string">		&#125;,function(err,corsFail)&#123; //GetNonce 能明确检测到是否支持跨域可以缓存起来，账户地址可能是网络错误不缓存</span><br><span class="hljs-string">			if(corsFail) saveCacheCors(false, err);</span><br><span class="hljs-string">			testCORSFail(err,corsFail);</span><br><span class="hljs-string">		&#125;);</span><br><span class="hljs-string">	&#125;;</span><br><span class="hljs-string">	var testCORSFail=function(err,corsFail)&#123;</span><br><span class="hljs-string">		if(UserClickSyncKill(id,tag,msg0+&quot; err: &quot;+err))return;</span><br><span class="hljs-string">		CLog(tag,1, ShowState(sEl,Lang(</span><br><span class="hljs-string">			&quot;测试此ACME服务对浏览器的支持情况，发生错误：&quot;+err</span><br><span class="hljs-string">			,&quot;Test browser support for this ACME service, An error occurred: &quot;+err)</span><br><span class="hljs-string">			+(corsFail?&quot;&quot;:TryAgainTips()), 1));</span><br><span class="hljs-string">		LangReview(sEl);//err from cache</span><br><span class="hljs-string">		if(corsFail) acmeReadDirGotoCORS();</span><br><span class="hljs-string">	&#125;;</span><br><span class="hljs-string">	</span><br><span class="hljs-string">	reqDir();</span><br><span class="hljs-string">&#125;;</span><br><span class="hljs-string"></span><br><span class="hljs-string"></span><br><span class="hljs-string"></span><br><span class="hljs-string"></span><br><span class="hljs-string"></span><br><span class="hljs-string"></span><br><span class="hljs-string">/************** UI Step2: Certificate Configuration **************/</span><br><span class="hljs-string">//显示第二步界面</span><br><span class="hljs-string">var configStepShow=function()&#123;</span><br><span class="hljs-string">	$(&quot;.step2Hide&quot;).hide();</span><br><span class="hljs-string">	$(&quot;.step2Show&quot;).show();</span><br><span class="hljs-string">	ShowState(&quot;.configStepState&quot;,false);</span><br><span class="hljs-string">	</span><br><span class="hljs-string">	$(&quot;.eabShow&quot;)[ACME.StepData.needEAB?&#x27;show&#x27;:&#x27;hide&#x27;]();</span><br><span class="hljs-string">	if(DropConfigFile.eabKid)$(&quot;.in_eab_kid&quot;).val(DropConfigFile.eabKid);</span><br><span class="hljs-string">	if(DropConfigFile.eabKey)$(&quot;.in_eab_key&quot;).val(DropConfigFile.eabKey);</span><br><span class="hljs-string">	</span><br><span class="hljs-string">	$(&quot;.termsAgreeBox&quot;)[ACME.StepData.termsURL?&#x27;show&#x27;:&#x27;hide&#x27;]();</span><br><span class="hljs-string">	$(&quot;.termsAgreeTips&quot;).html(Lang(&#x27;我同意此证书颁发机构ACME服务的&lt;a href=&quot;&#x27;+ACME.StepData.termsURL+&#x27;&quot; target=&quot;_blank&quot;&gt;服务条款&lt;/a&gt;。&#x27;, &#x27;I agree to the &lt;a href=&quot;&#x27;+ACME.StepData.termsURL+&#x27;&quot; target=&quot;_blank&quot;&gt;terms of service&lt;/a&gt; for this Certificate Authority ACME Service.&#x27;));</span><br><span class="hljs-string">	$(&quot;.choice_termsAgree&quot;).prop(&quot;checked&quot;,true);</span><br><span class="hljs-string">	</span><br><span class="hljs-string">	var el=$(&quot;.in_domains&quot;);//填充上次填写的域名列表</span><br><span class="hljs-string">	var valS=localStorage[InputDomainsStoreKey];</span><br><span class="hljs-string">	var val=DropConfigFile.domains&amp;&amp;DropConfigFile.domains.join(&quot;, &quot;)||valS;</span><br><span class="hljs-string">	if(!el.val())&#123;</span><br><span class="hljs-string">		el.val(val||&quot;&quot;);</span><br><span class="hljs-string">	&#125;</span><br><span class="hljs-string">	$(&quot;.choice_domains_store&quot;).prop(&quot;checked&quot;, !!valS);</span><br><span class="hljs-string">	</span><br><span class="hljs-string">	var el=$(&quot;.in_email&quot;);//填充上次填写的联系邮箱</span><br><span class="hljs-string">	var valS=localStorage[InputEmailStoreKey];</span><br><span class="hljs-string">	var val=DropConfigFile.email||valS;</span><br><span class="hljs-string">	if(!el.val())&#123;</span><br><span class="hljs-string">		el.val(val||&quot;&quot;);</span><br><span class="hljs-string">	&#125;</span><br><span class="hljs-string">	$(&quot;.choice_email_store&quot;).prop(&quot;checked&quot;, !!valS);</span><br><span class="hljs-string">	</span><br><span class="hljs-string">	var setKey=function(k)&#123;</span><br><span class="hljs-string">		if(DropConfigFile[k])&#123;</span><br><span class="hljs-string">			$(&quot;input[name=choice_&quot;+k+&quot;][value=manual]&quot;)[0].click();</span><br><span class="hljs-string">			$(&quot;.in_&quot;+k).val(DropConfigFile[k]);</span><br><span class="hljs-string">		&#125;</span><br><span class="hljs-string">	&#125;;</span><br><span class="hljs-string">	setKey(&quot;privateKey&quot;);setKey(&quot;accountKey&quot;);</span><br><span class="hljs-string">	</span><br><span class="hljs-string">	DropConfigFile=&#123;&#125;;//配置完成，丢弃拖拽进来的配置信息</span><br><span class="hljs-string">&#125;;</span><br><span class="hljs-string">//生成证书的密钥对</span><br><span class="hljs-string">var configPrivateKeyGenerate=function(type)&#123;</span><br><span class="hljs-string">	var id=++UserClickSyncID;</span><br><span class="hljs-string">	var tag=&quot;Step-2&quot;,sEl=&quot;.privateKeyState&quot;;</span><br><span class="hljs-string">	</span><br><span class="hljs-string">	var keyTag=&quot;&quot;,type2;</span><br><span class="hljs-string">	if(type==&quot;generateRSA&quot;)&#123;</span><br><span class="hljs-string">		type=&quot;RSA&quot;;type2=X509.DefaultType2_RSA;</span><br><span class="hljs-string">		keyTag=Lang(&quot;证书RSA私钥(&quot;+type2+&quot;位)&quot;,&quot;Certificate RSA private key (&quot;+type2+&quot; bits)&quot;);</span><br><span class="hljs-string">	&#125;else if(type==&quot;generateECC&quot;)&#123;</span><br><span class="hljs-string">		type=&quot;ECC&quot;;type2=X509.DefaultType2_ECC; var type2N=X509.SupportECCType2[type2]||type2;</span><br><span class="hljs-string">		keyTag=Lang(&quot;证书ECC私钥(&quot;+type2N+&quot;曲线)&quot;,&quot;Certificate ECC Private Key (&quot;+type2N+&quot; curve)&quot;);</span><br><span class="hljs-string">	&#125;else&#123;</span><br><span class="hljs-string">		ShowState(sEl,false);</span><br><span class="hljs-string">		return;</span><br><span class="hljs-string">	&#125;;</span><br><span class="hljs-string">	</span><br><span class="hljs-string">	var msg0=CLog(tag,0, ShowState(sEl,PleaseWaitTips()+Lang(&quot;正在创建&quot;,&quot;Generating &quot;)+keyTag, 2));</span><br><span class="hljs-string">	X509.KeyGenerate(type,type2,function(pem)&#123;</span><br><span class="hljs-string">		if(UserClickSyncKill(id,tag,msg0))return;</span><br><span class="hljs-string">		$(&quot;.in_privateKey&quot;).val(pem);</span><br><span class="hljs-string">		CLog(tag,0, ShowState(sEl,keyTag+Lang(&quot;，创建成功。&quot;,&quot;, generated successfully.&quot;), 2), &#x27;\\n&#x27;+pem);</span><br><span class="hljs-string">	&#125;,function(err)&#123;</span><br><span class="hljs-string">		if(UserClickSyncKill(id,tag,msg0+&quot; err: &quot;+err))return;</span><br><span class="hljs-string">		CLog(tag,1, ShowState(sEl,keyTag+Lang(&quot;，发生错误：&quot;+err,&quot;, An error occurred: &quot;+err), 1));</span><br><span class="hljs-string">	&#125;);</span><br><span class="hljs-string">&#125;;</span><br><span class="hljs-string">//生成ACME账户的密钥对</span><br><span class="hljs-string">var configAccountKeyGenerate=function(type)&#123;</span><br><span class="hljs-string">	var id=++UserClickSyncID;</span><br><span class="hljs-string">	var tag=&quot;Step-2&quot;,sEl=&quot;.accountKeyState&quot;;</span><br><span class="hljs-string">	</span><br><span class="hljs-string">	var keyTag=&quot;&quot;,type2;</span><br><span class="hljs-string">	if(type==&quot;generateRSA&quot;)&#123;</span><br><span class="hljs-string">		type=&quot;RSA&quot;;type2=X509.DefaultType2_RSA;</span><br><span class="hljs-string">		keyTag=Lang(&quot;ACME账户RSA私钥(&quot;+type2+&quot;位)&quot;,&quot;ACME account RSA private key (&quot;+type2+&quot; bits)&quot;);</span><br><span class="hljs-string">	&#125;else if(type==&quot;generateECC&quot;)&#123;</span><br><span class="hljs-string">		type=&quot;ECC&quot;;type2=X509.DefaultType2_ECC; var type2N=X509.SupportECCType2[type2]||type2;</span><br><span class="hljs-string">		keyTag=Lang(&quot;ACME账户ECC私钥(&quot;+type2N+&quot;曲线)&quot;,&quot;ACME account ECC Private Key (&quot;+type2N+&quot; curve)&quot;);</span><br><span class="hljs-string">	&#125;else&#123;</span><br><span class="hljs-string">		ShowState(sEl,false);</span><br><span class="hljs-string">		return;</span><br><span class="hljs-string">	&#125;;</span><br><span class="hljs-string">	</span><br><span class="hljs-string">	var msg0=CLog(tag,0, ShowState(sEl,PleaseWaitTips()+Lang(&quot;正在创建&quot;,&quot;Generating &quot;)+keyTag, 2));</span><br><span class="hljs-string">	X509.KeyGenerate(type,type2,function(pem)&#123;</span><br><span class="hljs-string">		if(UserClickSyncKill(id,tag,msg0))return;</span><br><span class="hljs-string">		$(&quot;.in_accountKey&quot;).val(pem);</span><br><span class="hljs-string">		CLog(tag,0, ShowState(sEl,keyTag+Lang(&quot;，创建成功。&quot;,&quot;, generated successfully.&quot;), 2), &#x27;\\n&#x27;+pem);</span><br><span class="hljs-string">	&#125;,function(err)&#123;</span><br><span class="hljs-string">		if(UserClickSyncKill(id,tag,msg0+&quot; err: &quot;+err))return;</span><br><span class="hljs-string">		CLog(tag,1, ShowState(sEl,keyTag+Lang(&quot;，发生错误：&quot;+err,&quot;, An error occurred: &quot;+err), 1));</span><br><span class="hljs-string">	&#125;);</span><br><span class="hljs-string">&#125;;</span><br><span class="hljs-string">//点击确定按钮，完成配置域名和私钥的配置</span><br><span class="hljs-string">window.configStepClick=function()&#123;</span><br><span class="hljs-string">	var id=++UserClickSyncID;</span><br><span class="hljs-string">	var tag=&quot;Step-2&quot;,sEl=&quot;.configStepState&quot;;</span><br><span class="hljs-string">	</span><br><span class="hljs-string">	$(&quot;.step2Hide&quot;).hide();</span><br><span class="hljs-string">	$(&quot;.step2Show&quot;).show();</span><br><span class="hljs-string">	ShowState(sEl,false);</span><br><span class="hljs-string">	</span><br><span class="hljs-string">	var domains=$(&quot;.in_domains&quot;).val().trim();</span><br><span class="hljs-string">	var domainsStore=$(&quot;.choice_domains_store&quot;).prop(&quot;checked&quot;);</span><br><span class="hljs-string">	var privateKey=$(&quot;.in_privateKey&quot;).val().trim();</span><br><span class="hljs-string">	var accountKey=$(&quot;.in_accountKey&quot;).val().trim();</span><br><span class="hljs-string">	var email=$(&quot;.in_email&quot;).val().trim();</span><br><span class="hljs-string">	var emailStore=$(&quot;.choice_email_store&quot;).prop(&quot;checked&quot;);</span><br><span class="hljs-string">	var eabKid=$(&quot;.in_eab_kid&quot;).val().trim();</span><br><span class="hljs-string">	var eabKey=$(&quot;.in_eab_key&quot;).val().trim();</span><br><span class="hljs-string">	var termsAgree=$(&quot;.choice_termsAgree&quot;).prop(&quot;checked&quot;);</span><br><span class="hljs-string">	</span><br><span class="hljs-string">	//域名转成数组</span><br><span class="hljs-string">	domains=domains.replace(/\\s+/g,&quot;,&quot;).replace(/，+/g,&quot;,&quot;).split(/,+/);</span><br><span class="hljs-string">	for(var i=0,mp=&#123;&#125;;i&lt;domains.length;i++)&#123;</span><br><span class="hljs-string">		var domain=domains[i];</span><br><span class="hljs-string">		if(!domain)&#123;</span><br><span class="hljs-string">			domains.splice(i,1); i--; continue;</span><br><span class="hljs-string">		&#125;else if(mp[domain])</span><br><span class="hljs-string">			return ShowState(sEl,Lang(&quot;域名&quot;+domain+&quot;重复！&quot;,&quot;Duplicate domain name &quot;+domain+&quot;!&quot;),1);</span><br><span class="hljs-string">		if(/[:\\/;]/.test(domain))//简单校验域名格式</span><br><span class="hljs-string">			return ShowState(sEl,Lang(&quot;域名&quot;+domain+&quot;格式错误！&quot;,&quot;Format error of domain name &quot;+domain+&quot;!&quot;),1);</span><br><span class="hljs-string">		mp[domain]=1;</span><br><span class="hljs-string">	&#125;</span><br><span class="hljs-string">	localStorage[InputDomainsStoreKey]=domainsStore?domains.join(&quot;, &quot;):&quot;&quot;;</span><br><span class="hljs-string">	localStorage[InputEmailStoreKey]=emailStore?email:&quot;&quot;;</span><br><span class="hljs-string">	</span><br><span class="hljs-string">	//校验是否输入</span><br><span class="hljs-string">	if(!domains.length)</span><br><span class="hljs-string">		return ShowState(sEl,Lang(&quot;请填写证书中要包含的域名！&quot;,&quot;Please fill in domain name to be included in the certificate!&quot;),1);</span><br><span class="hljs-string">	if(!privateKey)</span><br><span class="hljs-string">		return ShowState(sEl,Lang(&quot;请选择证书的私钥！&quot;,&quot;Please select the private key of the certificate!&quot;),1);</span><br><span class="hljs-string">	if(!accountKey)</span><br><span class="hljs-string">		return ShowState(sEl,Lang(&quot;请选择ACME账户的私钥！&quot;,&quot;Please select the private key of ACME account!&quot;),1);</span><br><span class="hljs-string">	if(!/.+@.+\\..+/.test(email) || /[\\s,;]/.test(email))</span><br><span class="hljs-string">		return ShowState(sEl,Lang(&quot;请正确填写联系邮箱！&quot;,&quot;Please fill in the contact email correctly!&quot;),1);</span><br><span class="hljs-string">	if(ACME.StepData.needEAB &amp;&amp; !(eabKid &amp;&amp; eabKey))</span><br><span class="hljs-string">		return ShowState(sEl,Lang(&quot;请填写EAB KID和HMAC KEY！&quot;,&quot;Please fill in EAB KID and HMAC KEY!&quot;),1);</span><br><span class="hljs-string">	if(ACME.StepData.termsURL &amp;&amp; !termsAgree)</span><br><span class="hljs-string">		return ShowState(sEl,Lang(&quot;未同意此ACME服务的服务条款！&quot;,&quot;Do not agree to the terms of service of this acme service!&quot;),1);</span><br><span class="hljs-string">	</span><br><span class="hljs-string">	//校验私钥格式是否支持</span><br><span class="hljs-string">	var privateKeyInfo, parsePrivateKey=function()&#123;</span><br><span class="hljs-string">		X509.KeyParse(privateKey,function(info)&#123;</span><br><span class="hljs-string">			privateKeyInfo=info; parseAccountKey();</span><br><span class="hljs-string">		&#125;,function(err)&#123;</span><br><span class="hljs-string">			ShowState(sEl,Lang(&quot;证书的私钥无效：&quot;,&quot;The private key of the certificate is invalid: &quot;)+err,1);</span><br><span class="hljs-string">		&#125;,1);</span><br><span class="hljs-string">	&#125;;</span><br><span class="hljs-string">	var accountKeyInfo,parseAccountKey=function()&#123;</span><br><span class="hljs-string">		X509.KeyParse(accountKey,function(info)&#123;</span><br><span class="hljs-string">			accountKeyInfo=info; parseKeyOK();</span><br><span class="hljs-string">		&#125;,function(err)&#123;</span><br><span class="hljs-string">			ShowState(sEl,Lang(&quot;ACME账户的私钥无效：&quot;,&quot;The private key of the ACME account is invalid: &quot;)+err,1);</span><br><span class="hljs-string">		&#125;,1);</span><br><span class="hljs-string">	&#125;;</span><br><span class="hljs-string">	</span><br><span class="hljs-string">	var msg0=CLog(tag,0, ShowState(sEl,PleaseWaitTips(), 2));</span><br><span class="hljs-string">	//设置配置数据</span><br><span class="hljs-string">	var parseKeyOK=function()&#123;</span><br><span class="hljs-string">		if(UserClickSyncKill(id,tag,msg0))return;</span><br><span class="hljs-string">		</span><br><span class="hljs-string">		ACME.StepData.config=&#123;</span><br><span class="hljs-string">			domains:domains</span><br><span class="hljs-string">			,privateKey:privateKeyInfo</span><br><span class="hljs-string">			,accountKey:accountKeyInfo</span><br><span class="hljs-string">			,email:email</span><br><span class="hljs-string">			,eabKid:eabKid</span><br><span class="hljs-string">			,eabKey:eabKey</span><br><span class="hljs-string">		&#125;;</span><br><span class="hljs-string">		CLog(tag, 0, &quot;config&quot;, ACME.StepData.config);</span><br><span class="hljs-string">		</span><br><span class="hljs-string">		acmeNewAccount();</span><br><span class="hljs-string">	&#125;;</span><br><span class="hljs-string">	</span><br><span class="hljs-string">	//ACME账户接口调用</span><br><span class="hljs-string">	var acmeNewAccount=function()&#123;</span><br><span class="hljs-string">		var msg0=CLog(tag,0, ShowState(sEl,PleaseWaitTips()+Lang(&quot;正在调用ACME服务的newAccount接口：&quot;,&quot;The newAccount interface that is calling the ACME service: &quot;)+ACME.DirData.newAccount, 2));</span><br><span class="hljs-string">		ACME.StepAccount(function()&#123;</span><br><span class="hljs-string">			if(UserClickSyncKill(id,tag,msg0))return;</span><br><span class="hljs-string">			acmeNewOrder();</span><br><span class="hljs-string">		&#125;,function(err)&#123;</span><br><span class="hljs-string">			if(UserClickSyncKill(id,tag,msg0+&quot; err: &quot;+err))return;</span><br><span class="hljs-string">			CLog(tag,1, ShowState(sEl,Lang(&quot;调用ACME服务的newAccount接口：&quot;,&quot;Call the newAccount interface of the ACME service: &quot;)</span><br><span class="hljs-string">				+ACME.DirData.newAccount+Lang(&quot;，发生错误：&quot;+err,&quot;, An error occurred: &quot;+err), 1));</span><br><span class="hljs-string">		&#125;);</span><br><span class="hljs-string">	&#125;;</span><br><span class="hljs-string">	//ACME订单创建接口调用</span><br><span class="hljs-string">	var acmeNewOrder=function()&#123;</span><br><span class="hljs-string">		var msg0,onProgress=function(tips)&#123;</span><br><span class="hljs-string">			if(id!=UserClickSyncID)return;</span><br><span class="hljs-string">			msg0=CLog(tag,0, ShowState(sEl,PleaseWaitTips()+Lang(&quot;正在调用ACME服务的订单接口。&quot;,&quot;The order interface that is calling the ACME service.&quot;)+&#x27; &#x27;+tips+&quot; URL:&quot;+ACME.DirData.newOrder, 2));</span><br><span class="hljs-string">		&#125;; onProgress(&quot;&quot;);</span><br><span class="hljs-string">		ACME.StepOrder(onProgress,function()&#123;</span><br><span class="hljs-string">			if(UserClickSyncKill(id,tag,msg0))return;</span><br><span class="hljs-string">			acmeOK();</span><br><span class="hljs-string">		&#125;,function(err)&#123;</span><br><span class="hljs-string">			if(UserClickSyncKill(id,tag,msg0+&quot; err: &quot;+err))return;</span><br><span class="hljs-string">			CLog(tag,1, ShowState(sEl,Lang(&quot;调用ACME服务的订单接口：&quot;,&quot;Call the order interface of the ACME service: &quot;)</span><br><span class="hljs-string">				+ACME.DirData.newOrder+Lang(&quot;，发生错误：&quot;+err,&quot;, An error occurred: &quot;+err), 1));</span><br><span class="hljs-string">		&#125;);</span><br><span class="hljs-string">	&#125;;</span><br><span class="hljs-string">	//ACME接口调用完成，显示下一步</span><br><span class="hljs-string">	var acmeOK=function()&#123;</span><br><span class="hljs-string">		verifyStepShow();</span><br><span class="hljs-string">		</span><br><span class="hljs-string">		CLog(tag,0, ShowState(sEl,Lang(</span><br><span class="hljs-string">			 &quot;配置完成，&quot;</span><br><span class="hljs-string">			,&quot;Configuration is complete, &quot;)</span><br><span class="hljs-string">			+NextStepTips(), 2), ACME.StepData);</span><br><span class="hljs-string">	&#125;;</span><br><span class="hljs-string">	</span><br><span class="hljs-string">	parsePrivateKey();</span><br><span class="hljs-string">&#125;;</span><br><span class="hljs-string"></span><br><span class="hljs-string"></span><br><span class="hljs-string"></span><br><span class="hljs-string"></span><br><span class="hljs-string"></span><br><span class="hljs-string"></span><br><span class="hljs-string">/************** UI Step3: Verify Domain Ownership **************/</span><br><span class="hljs-string">//显示第三步界面</span><br><span class="hljs-string">var verifyStepShow=function()&#123;</span><br><span class="hljs-string">	$(&quot;.step3Hide&quot;).hide();</span><br><span class="hljs-string">	$(&quot;.step3Show&quot;).show();</span><br><span class="hljs-string">	$(&quot;.verifyStepBtn&quot;).show();</span><br><span class="hljs-string">	$(&quot;.verifyRunStopBtn&quot;).hide();</span><br><span class="hljs-string">	$(&quot;.finalizeOrderBtn&quot;).hide();</span><br><span class="hljs-string">	ShowState(&quot;.verifyStepState&quot;,false);</span><br><span class="hljs-string">	</span><br><span class="hljs-string">	//显示所有域名的验证界面</span><br><span class="hljs-string">	verifyBoxShow();</span><br><span class="hljs-string">&#125;;</span><br><span class="hljs-string">//停止验证</span><br><span class="hljs-string">window.verifyRunStopClick=function()&#123;</span><br><span class="hljs-string">	var id=++UserClickSyncID;</span><br><span class="hljs-string">	$(&quot;.verifyStepBtn&quot;).show();</span><br><span class="hljs-string">	$(&quot;.verifyRunStopBtn&quot;).hide();</span><br><span class="hljs-string">	$(&quot;.finalizeOrderBtn&quot;).hide();</span><br><span class="hljs-string">	ShowState(&quot;.verifyStepState&quot;,false);</span><br><span class="hljs-string">	verifyRunStopFn&amp;&amp;verifyRunStopFn();</span><br><span class="hljs-string">&#125;;</span><br><span class="hljs-string">var verifyRunStopFn;</span><br><span class="hljs-string">//点击开始验证按钮，验证所有域名所有权</span><br><span class="hljs-string">window.verifyStepClick=function()&#123;</span><br><span class="hljs-string">	var id=++UserClickSyncID;</span><br><span class="hljs-string">	var tag=&quot;Step-3&quot;,sEl=&quot;.verifyStepState&quot;;</span><br><span class="hljs-string">	</span><br><span class="hljs-string">	$(&quot;.step3Hide&quot;).hide();</span><br><span class="hljs-string">	$(&quot;.step3Show&quot;).show();</span><br><span class="hljs-string">	$(&quot;.verifyStepBtn&quot;).hide();</span><br><span class="hljs-string">	$(&quot;.verifyRunStopBtn&quot;).show();</span><br><span class="hljs-string">	$(&quot;.finalizeOrderBtn&quot;).hide();</span><br><span class="hljs-string">	ShowState(sEl,false);</span><br><span class="hljs-string">	</span><br><span class="hljs-string">	var domains=ACME.StepData.config.domains,auths=ACME.StepData.auths;</span><br><span class="hljs-string">	//验证中更新状态显示</span><br><span class="hljs-string">	var updateState=function(init,stopNow,isFail)&#123;</span><br><span class="hljs-string">		var isStop=stopNow||id!=UserClickSyncID;</span><br><span class="hljs-string">		var okCount=0,errCount=0,execCount=0;</span><br><span class="hljs-string">		for(var i0=0;i0&lt;domains.length;i0++)&#123;</span><br><span class="hljs-string">			var domain=domains[i0],auth=auths[domain],challs=auth.challenges;</span><br><span class="hljs-string">			var stateEl=$(&quot;.verifyItemState_&quot;+i0);</span><br><span class="hljs-string">			//authState: 0 待验证，1验证中，2等待重试authTryCount，11验证成功，12验证失败authError</span><br><span class="hljs-string">			if(auth.authState==11)&#123;//验证成功的，初始化也不要修改验证方式了</span><br><span class="hljs-string">				ShowState(stateEl,ACME.ChallName(challs[auth.challIdx])+&quot; OK!&quot;,2,&quot;&quot;);</span><br><span class="hljs-string">				okCount++;</span><br><span class="hljs-string">				continue;</span><br><span class="hljs-string">			&#125;</span><br><span class="hljs-string">			if(init)&#123; //记住选中的验证类型</span><br><span class="hljs-string">				var choiceEl=$(&quot;input[name=choice_authItem_&quot;+i0+&quot;]&quot;);</span><br><span class="hljs-string">				for(var i=0;i&lt;choiceEl.length;i++)&#123;</span><br><span class="hljs-string">					var el=choiceEl[i];</span><br><span class="hljs-string">					if(!el.checked)&#123; //未选中的隐藏掉</span><br><span class="hljs-string">						$(el.parentNode).hide();</span><br><span class="hljs-string">					&#125;else&#123;</span><br><span class="hljs-string">						auth.challIdx=+$(el).attr(&quot;challidx&quot;);</span><br><span class="hljs-string">					&#125;</span><br><span class="hljs-string">				&#125;</span><br><span class="hljs-string">				auth.authState=0;</span><br><span class="hljs-string">				auth.authTryCount=0;</span><br><span class="hljs-string">				auth.authError=&quot;&quot;;</span><br><span class="hljs-string">				auth.authTimer=0;</span><br><span class="hljs-string">			&#125;</span><br><span class="hljs-string">			var challName=ACME.ChallName(challs[auth.challIdx]);</span><br><span class="hljs-string">			if(auth.authState==12)&#123;//验证失败</span><br><span class="hljs-string">				ShowState(stateEl,challName+Lang(&quot;，验证失败：&quot;,&quot;, Verify failed: &quot;)</span><br><span class="hljs-string">					+auth.authError,1,&quot;&quot;);</span><br><span class="hljs-string">				errCount++;</span><br><span class="hljs-string">				continue;</span><br><span class="hljs-string">			&#125;</span><br><span class="hljs-string">			execCount++;</span><br><span class="hljs-string">			if(isStop)&#123;</span><br><span class="hljs-string">				ShowState(stateEl,false);</span><br><span class="hljs-string">				clearTimeout(auth.authTimer); auth.authTimer=0;</span><br><span class="hljs-string">			&#125;else if(auth.authState==2)</span><br><span class="hljs-string">				ShowState(stateEl,Lang(&quot;等待重试中...&quot;,&quot;Waiting for retry...&quot;)</span><br><span class="hljs-string">					+&quot; &quot;+auth.authTryCount+&quot; &quot;+auth.authError,3,&quot;&quot;);</span><br><span class="hljs-string">			else if(auth.authState==1)</span><br><span class="hljs-string">				ShowState(stateEl,Lang(&quot;验证中...&quot;,&quot;Verify in progress...&quot;),0,&quot;&quot;);</span><br><span class="hljs-string">			else ShowState(stateEl,Lang(&quot;等待验证...&quot;,&quot;Waiting for verify...&quot;),0,&quot;&quot;);</span><br><span class="hljs-string">		&#125;</span><br><span class="hljs-string">		if(!isStop || stopNow)&#123;</span><br><span class="hljs-string">			var goto2=Lang(&quot;请返回第二步重新开始操作！&quot;,&quot;Please go back to step 2 and start over! &quot;);</span><br><span class="hljs-string">			var msg=ShowState(sEl,(isFail?Lang(&quot;验证失败，&quot;,&quot;Verify failed, &quot;)+goto2:</span><br><span class="hljs-string">					isStop?Lang(&quot;已取消，&quot;,&quot;Canceled, &quot;)+goto2:</span><br><span class="hljs-string">					Lang(&quot;正在验证，请耐心等待... &quot;,&quot;Verifying, please wait... &quot;))</span><br><span class="hljs-string">				+&quot;&lt;div&gt;&quot;</span><br><span class="hljs-string">					+Lang(&quot;验证通过：&quot;,&quot;Verify pass: &quot;)+okCount+&quot;, &quot;</span><br><span class="hljs-string">					+Lang(&quot;未通过：&quot;,&quot;Failed: &quot;)+errCount+&quot;, &quot;</span><br><span class="hljs-string">					+Lang(&quot;验证中：&quot;,&quot;Verify in progress: &quot;)+execCount</span><br><span class="hljs-string">				+&quot;&lt;/div&gt;&quot;</span><br><span class="hljs-string">				, isStop?1:0);</span><br><span class="hljs-string">			if(isStop)&#123;</span><br><span class="hljs-string">				CLog(tag, 1, msg);</span><br><span class="hljs-string">			&#125;</span><br><span class="hljs-string">		&#125;</span><br><span class="hljs-string">	&#125;</span><br><span class="hljs-string">	updateState(1);</span><br><span class="hljs-string">	//取一个进行验证</span><br><span class="hljs-string">	var run=function()&#123;</span><br><span class="hljs-string">		if(id!=UserClickSyncID)return;</span><br><span class="hljs-string">		updateState();</span><br><span class="hljs-string">		var authItem,hasRunning=0,okCount=0,errCount=0;</span><br><span class="hljs-string">		for(var i0=0;i0&lt;domains.length;i0++)&#123;</span><br><span class="hljs-string">			var domain=domains[i0],auth=auths[domain];</span><br><span class="hljs-string">			if(!authItem &amp;&amp; !auth.authState) authItem=auth;</span><br><span class="hljs-string">			if(auth.authState==1)hasRunning++;</span><br><span class="hljs-string">			if(auth.authState==11)okCount++;</span><br><span class="hljs-string">			if(auth.authState==12)errCount++;</span><br><span class="hljs-string">		&#125;</span><br><span class="hljs-string">		if(okCount==domains.length)//全部验证成功</span><br><span class="hljs-string">			return verifyOK();</span><br><span class="hljs-string">		if(okCount+errCount==domains.length)//全部验证完成，存在不通过的</span><br><span class="hljs-string">			return verifyFail();</span><br><span class="hljs-string">		if(!authItem || hasRunning)return;//没有待验证的或已有验证中，继续等待</span><br><span class="hljs-string">		</span><br><span class="hljs-string">		authItem.authState=1;</span><br><span class="hljs-string">		authItem.authTryCount++;</span><br><span class="hljs-string">		authItem.authError=&quot;&quot;;</span><br><span class="hljs-string">		updateState();</span><br><span class="hljs-string">		ACME.StepVerifyAuthItem(authItem, authItem.challIdx, function(isOk, retryTime, err)&#123;</span><br><span class="hljs-string">			if(id!=UserClickSyncID)return;</span><br><span class="hljs-string">			if(isOk)&#123;</span><br><span class="hljs-string">				authItem.authState=11;</span><br><span class="hljs-string">			&#125;else&#123;</span><br><span class="hljs-string">				authItem.authState=2;</span><br><span class="hljs-string">				authItem.authError=err;</span><br><span class="hljs-string">				authItem.authTimer=setTimeout(function()&#123;</span><br><span class="hljs-string">					authItem.authState=0;</span><br><span class="hljs-string">					authItem.authTimer=0;</span><br><span class="hljs-string">					run();</span><br><span class="hljs-string">				&#125;, retryTime);</span><br><span class="hljs-string">			&#125;</span><br><span class="hljs-string">			run();</span><br><span class="hljs-string">		&#125;, function(err)&#123;</span><br><span class="hljs-string">			if(id!=UserClickSyncID)return;</span><br><span class="hljs-string">			authItem.authState=12;</span><br><span class="hljs-string">			authItem.authError=err;</span><br><span class="hljs-string">			run();</span><br><span class="hljs-string">		&#125;);</span><br><span class="hljs-string">	&#125;;</span><br><span class="hljs-string">	</span><br><span class="hljs-string">	CLog(tag,0,&quot;==========Verify Start==========&quot;);</span><br><span class="hljs-string">	var verifyEnd=function()&#123;</span><br><span class="hljs-string">		$(&quot;.verifyRunStopBtn&quot;).hide();</span><br><span class="hljs-string">		verifyRunStopFn=null;</span><br><span class="hljs-string">		CLog(tag,0,&quot;==========Verify End==========&quot;);</span><br><span class="hljs-string">	&#125;;</span><br><span class="hljs-string">	//中途停止控制</span><br><span class="hljs-string">	verifyRunStopFn=function()&#123;</span><br><span class="hljs-string">		verifyEnd();</span><br><span class="hljs-string">		updateState(0,1);</span><br><span class="hljs-string">	&#125;;</span><br><span class="hljs-string">	//验证完成，存在不通过的</span><br><span class="hljs-string">	var verifyFail=function()&#123;</span><br><span class="hljs-string">		CLog(tag,1,&quot;Verify Fail!&quot;);</span><br><span class="hljs-string">		updateState(0,1,1);</span><br><span class="hljs-string">		verifyEnd();</span><br><span class="hljs-string">	&#125;;</span><br><span class="hljs-string">	//全部验证成功</span><br><span class="hljs-string">	var verifyOK=function()&#123;</span><br><span class="hljs-string">		CLog(tag,0,&quot;Verify OK!&quot;);</span><br><span class="hljs-string">		verifyEnd();</span><br><span class="hljs-string">		</span><br><span class="hljs-string">		finalizeOrderClick();</span><br><span class="hljs-string">	&#125;;</span><br><span class="hljs-string">	</span><br><span class="hljs-string">	//调用完成订单接口，生成证书</span><br><span class="hljs-string">	window.finalizeOrderClick=function()&#123;</span><br><span class="hljs-string">		$(&quot;.finalizeOrderBtn&quot;).hide();</span><br><span class="hljs-string">		var msg0,onProgress=function(tips)&#123;</span><br><span class="hljs-string">			if(id!=UserClickSyncID)return;</span><br><span class="hljs-string">			msg0=CLog(tag,0, ShowState(sEl,PleaseWaitTips()</span><br><span class="hljs-string">			+Lang(&quot;验证已通过，正在签发证书。&quot;,&quot;Verify passed, issuing certificate.&quot;)</span><br><span class="hljs-string">			+&#x27; &#x27;+tips, 2));</span><br><span class="hljs-string">		&#125;; onProgress(&quot;&quot;);</span><br><span class="hljs-string">		ACME.StepFinalizeOrder(onProgress,function()&#123;</span><br><span class="hljs-string">			if(UserClickSyncKill(id,tag,msg0))return;</span><br><span class="hljs-string">			//显示下一步</span><br><span class="hljs-string">			downloadStepShow();</span><br><span class="hljs-string">			</span><br><span class="hljs-string">			CLog(tag,0, ShowState(sEl,Lang(</span><br><span class="hljs-string">				 &quot;验证已通过，证书已签发，&quot;</span><br><span class="hljs-string">				,&quot;Verification passed, The certificate has been issued, &quot;)</span><br><span class="hljs-string">				+NextStepTips(), 2), ACME.StepData);</span><br><span class="hljs-string">		&#125;,function(err)&#123;</span><br><span class="hljs-string">			if(UserClickSyncKill(id,tag,msg0+&quot; err: &quot;+err))return;</span><br><span class="hljs-string">			$(&quot;.finalizeOrderBtn&quot;).show();</span><br><span class="hljs-string">			CLog(tag,1, ShowState(sEl,Lang(&quot;签发证书发生错误，&quot;,&quot;Error issuing certificate, &quot;)+TryAgainTips()</span><br><span class="hljs-string">				+Lang(&quot;如果多次重试都无法签发证书，可能需要返回第二步重新开始操作。&quot;,&quot;If the certificate cannot be issued after multiple retries, you may need to return to step 2 to restart the operation.&quot;)</span><br><span class="hljs-string">				+&quot; Error: &quot;+err, 1));</span><br><span class="hljs-string">		&#125;);</span><br><span class="hljs-string">	&#125;;</span><br><span class="hljs-string">	</span><br><span class="hljs-string">	run();</span><br><span class="hljs-string">&#125;;</span><br><span class="hljs-string"></span><br><span class="hljs-string"></span><br><span class="hljs-string"></span><br><span class="hljs-string"></span><br><span class="hljs-string"></span><br><span class="hljs-string"></span><br><span class="hljs-string"></span><br><span class="hljs-string">/************** UI Step4: Download and save the certificate PEM file **************/</span><br><span class="hljs-string">//显示第四步界面</span><br><span class="hljs-string">var downloadStepShow=function()&#123;</span><br><span class="hljs-string">	$(&quot;.step4Hide&quot;).hide();</span><br><span class="hljs-string">	$(&quot;.step4Show&quot;).show();</span><br><span class="hljs-string">	ShowState(&quot;.downloadStepState&quot;,false);</span><br><span class="hljs-string">	</span><br><span class="hljs-string">	var config=ACME.StepData.config;</span><br><span class="hljs-string">	var hasPEM=ACME.StepData.order.downloadPEM;</span><br><span class="hljs-string">	var pemTxt=hasPEM||Lang(&quot;未发现证书，请到第二步重新操作！&quot;,&quot;No certificate found, please go to the step 2 to operate again!&quot;,true);</span><br><span class="hljs-string">	</span><br><span class="hljs-string">	$(&quot;.txt_downloadCert&quot;).val(pemTxt);</span><br><span class="hljs-string">	$(&quot;.txt_downloadKey&quot;).val(config.privateKey.pem);</span><br><span class="hljs-string">	</span><br><span class="hljs-string">	downFileName=config.domains[0].replace(/^\\*\\./g,&quot;&quot;).replace(/[^\\w]/g,&quot;_&quot;);</span><br><span class="hljs-string">	downloadFileNameShow(downFileName);</span><br><span class="hljs-string">	</span><br><span class="hljs-string">	var logTxts=[];</span><br><span class="hljs-string">	var SP=function(tag)&#123;</span><br><span class="hljs-string">		logTxts.push(&quot;\\n=========== &quot;+tag+&quot; ===========&quot;);</span><br><span class="hljs-string">		return logTxts</span><br><span class="hljs-string">	&#125;</span><br><span class="hljs-string">	var logSet=Object.assign(&#123;</span><br><span class="hljs-string">		acmeURL:ACME.URL</span><br><span class="hljs-string">		,accountURL:ACME.StepData.account.url</span><br><span class="hljs-string">		,X509:&#123;</span><br><span class="hljs-string">			DefaultType2_RSA:X509.DefaultType2_RSA</span><br><span class="hljs-string">			,DefaultType2_ECC:X509.DefaultType2_ECC</span><br><span class="hljs-string">		&#125;</span><br><span class="hljs-string">		,Window:&#123;</span><br><span class="hljs-string">			DefaultDownloadFileNames:DefaultDownloadFileNames</span><br><span class="hljs-string">		&#125;</span><br><span class="hljs-string">	&#125;,config);</span><br><span class="hljs-string">	logSet.privateKey=config.privateKey.pem;</span><br><span class="hljs-string">	logSet.accountKey=config.accountKey.pem;</span><br><span class="hljs-string">	</span><br><span class="hljs-string">	var logTitle=&#x27;/********** &#x27;+Lang($(&quot;.clientNameCN&quot;).html(),$(&quot;.clientNameEN&quot;).html(),true)+&#x27; *********/&#x27;;</span><br><span class="hljs-string">	logTxts.push(logTitle);</span><br><span class="hljs-string">	logTxts.push(Lang(&quot;在线网址（GitHub）：&quot;,&quot;Online website (GitHub): &quot;, true)+&#x27;https://xiangyuecn.github.io/ACME-HTML-Web-Browser-Client/ACME-HTML-Web-Browser-Client.html&#x27;);</span><br><span class="hljs-string">	logTxts.push(Lang(&quot;在线网址（Gitee）：&quot;,&quot;Online website (Gitee): &quot;, true)+&#x27;https://xiangyuecn.gitee.io/acme-html-web-browser-client/ACME-HTML-Web-Browser-Client.html&#x27;);</span><br><span class="hljs-string">	logTxts.push(&quot;&quot;);</span><br><span class="hljs-string">	logTxts.push(&#x27;GitHub: https://github.com/xiangyuecn/ACME-HTML-Web-Browser-Client&#x27;);</span><br><span class="hljs-string">	logTxts.push(&#x27;Gitee: https://gitee.com/xiangyuecn/ACME-HTML-Web-Browser-Client&#x27;);</span><br><span class="hljs-string">	logTxts.push(&quot;&quot;);</span><br><span class="hljs-string">	logTxts.push(Lang(&quot;提示：你可以将本文件拖拽进客户端网页内，将自动填充本次证书申请的所有配置参数。&quot;,&quot;Tip: You can drag and drop this file into the client web page, and all configuration parameters of this certificate application will be filled automatically.&quot;,true));</span><br><span class="hljs-string">	logTxts.push(&quot;&quot;);</span><br><span class="hljs-string">	SP(Lang(&quot;证书申请时间&quot;,&quot;Certificate Application Time&quot;,true))</span><br><span class="hljs-string">		.push(new Date().toLocaleString());</span><br><span class="hljs-string">	SP(Lang(&quot;域名列表&quot;,&quot;Domain Name List&quot;,true))</span><br><span class="hljs-string">		.push(config.domains.join(&quot;, &quot;));</span><br><span class="hljs-string">	SP(Lang(&quot;ACME服务地址&quot;,&quot;ACME Service URL&quot;,true))</span><br><span class="hljs-string">		.push(ACME.URL);</span><br><span class="hljs-string">	SP(Lang(&quot;CSR文本&quot;,&quot;CSR Text&quot;,true))</span><br><span class="hljs-string">		.push(ACME.StepData.order.orderCSR);</span><br><span class="hljs-string">	SP(Lang(&quot;证书PEM文本&quot;,&quot;Certificate PEM Text&quot;,true))</span><br><span class="hljs-string">		.push(pemTxt);</span><br><span class="hljs-string">	SP(Lang(&quot;证书私钥PEM文本&quot;,&quot;Certificate Private Key PEM Text&quot;,true))</span><br><span class="hljs-string">		.push(config.privateKey.pem);</span><br><span class="hljs-string">	SP(Lang(&quot;账户私钥PEM文本&quot;,&quot;Account Private Key PEM Text&quot;,true))</span><br><span class="hljs-string">		.push(config.accountKey.pem);</span><br><span class="hljs-string">	SP(Lang(&quot;账户URL&quot;,&quot;Account URL&quot;,true))</span><br><span class="hljs-string">		.push(ACME.StepData.account.url);</span><br><span class="hljs-string">	SP(Lang(&quot;完整配置信息&quot;,&quot;Complete Configuration Information&quot;,true))</span><br><span class="hljs-string">		.push(&quot;&lt;ACME-HTML-Web-Browser-Client&gt;&quot;+JSON.stringify(logSet)+&quot;&lt;/ACME-HTML-Web-Browser-Client&gt;&quot;);</span><br><span class="hljs-string">	logTxts.push(&quot;&quot;);logTxts.push(logTitle);logTxts.push(&quot;&quot;);</span><br><span class="hljs-string">	</span><br><span class="hljs-string">	$(&quot;.txt_downloadLog&quot;).val(hasPEM?logTxts.join(&quot;\\n&quot;):pemTxt);</span><br><span class="hljs-string">&#125;;</span><br><span class="hljs-string">var initStep4=function()&#123;//页面启动时初始化，绑定配置文件拖拽事件</span><br><span class="hljs-string">	$(&quot;body&quot;).bind(&quot;dragover&quot;,function(e)&#123;</span><br><span class="hljs-string">		e.preventDefault();</span><br><span class="hljs-string">	&#125;).bind(&quot;drop&quot;,function(e)&#123;</span><br><span class="hljs-string">		e.preventDefault();</span><br><span class="hljs-string">		</span><br><span class="hljs-string">		var file=e.dataTransfer.files[0];</span><br><span class="hljs-string">		if(!file)return;</span><br><span class="hljs-string">		var reader = new FileReader();</span><br><span class="hljs-string">		reader.onload = function(e)&#123;</span><br><span class="hljs-string">			var txt=reader.result;</span><br><span class="hljs-string">			var m=/ACME-HTML-Web-Browser-Client&gt;(.+?)&lt;\\/ACME-HTML-Web-Browser-Client/.exec(txt);</span><br><span class="hljs-string">			if(!m) return Toast(Lang(&quot;拖入的文件中未发现配置信息，请拖上次申请证书时保存的记录LOG文件！&quot;,&quot;No configuration information is found in the dragged file. Please drag the LOG file saved in the last certificate application!&quot;),1);</span><br><span class="hljs-string">			</span><br><span class="hljs-string">			DropConfigFile=JSON.parse(m[1]);</span><br><span class="hljs-string">			for(var k in DropConfigFile.X509)X509[k]=DropConfigFile.X509[k];</span><br><span class="hljs-string">			for(var k in DropConfigFile.Window)window[k]=DropConfigFile.Window[k];</span><br><span class="hljs-string">			</span><br><span class="hljs-string">			CLog(&quot;DropConfigFile&quot;,0,&quot;Reset Config&quot;,DropConfigFile);</span><br><span class="hljs-string">			Toast(Lang(&quot;识别到拖入的记录LOG文件，已填充上次申请证书时使用的配置。&quot;,&quot;The LOG file of the dragged record is identified, and the configuration used in the last certificate application has been filled.&quot;),2);</span><br><span class="hljs-string">			resetStep1();//重新初始化第1步</span><br><span class="hljs-string">			downloadFileNameShow();</span><br><span class="hljs-string">		&#125;</span><br><span class="hljs-string">		reader.readAsText(file);</span><br><span class="hljs-string">	&#125;);</span><br><span class="hljs-string">&#125;;</span><br><span class="hljs-string">var downFileName=&quot;&quot;;</span><br><span class="hljs-string">window.DefaultDownloadFileNames=&#123; //允许设置默认的文件名，下载时自动使用此文件名</span><br><span class="hljs-string">	Cert:&quot;&quot; /*domain.crt*/, Key:&quot;&quot; /*domain.key*/, Log:&quot;&quot; /*domain.log*/</span><br><span class="hljs-string">&#125;;</span><br><span class="hljs-string">window.downloadBtnClick=function(type)&#123;</span><br><span class="hljs-string">	var val=$(&quot;.txt_download&quot;+type).val();</span><br><span class="hljs-string">	var fileName=downFileName;</span><br><span class="hljs-string">	if(type==&quot;Cert&quot;) fileName+=&quot;.pem&quot;;</span><br><span class="hljs-string">	if(type==&quot;Key&quot;) fileName+=&quot;.key&quot;;</span><br><span class="hljs-string">	if(type==&quot;Log&quot;) fileName+=&quot;.log&quot;;</span><br><span class="hljs-string">	fileName=DefaultDownloadFileNames[type]||fileName;</span><br><span class="hljs-string">	</span><br><span class="hljs-string">	var url=URL.createObjectURL(new Blob([val], &#123;&quot;type&quot;:&quot;text/plain&quot;&#125;));</span><br><span class="hljs-string">	var downA=document.createElement(&quot;A&quot;);</span><br><span class="hljs-string">	downA.href=url;</span><br><span class="hljs-string">	downA.download=fileName;</span><br><span class="hljs-string">	downA.click();</span><br><span class="hljs-string">&#125;;</span><br><span class="hljs-string">window.downloadFileNameShow=function(name)&#123;//显示下载文件名称，优先使用手动设置的默认名称</span><br><span class="hljs-string">	name=name||&quot;your_domain&quot;;</span><br><span class="hljs-string">	var name2=(DefaultDownloadFileNames.Cert||&quot;&quot;).replace(/\\.[^\\.]+$/g,&quot;&quot;);</span><br><span class="hljs-string">	$(&quot;.downloadFileName&quot;).html(name2||name);</span><br><span class="hljs-string">	$(&quot;.downloadKeyFileName&quot;).html(DefaultDownloadFileNames.Key||name+&quot;.key&quot;);</span><br><span class="hljs-string">	$(&quot;.downloadCertFileName&quot;).html(DefaultDownloadFileNames.Cert||name+&quot;.pem&quot;);</span><br><span class="hljs-string">&#125;;</span><br><span class="hljs-string"></span><br><span class="hljs-string"></span><br><span class="hljs-string"></span><br><span class="hljs-string"></span><br><span class="hljs-string"></span><br><span class="hljs-string"></span><br><span class="hljs-string"></span><br><span class="hljs-string"></span><br><span class="hljs-string"></span><br><span class="hljs-string"></span><br><span class="hljs-string"></span><br><span class="hljs-string"></span><br><span class="hljs-string"></span><br><span class="hljs-string">//Test_打头的方法仅供测试用：完成第二步后允许进行UI调试，手动调用Test_AllStepData_Save()，刷新页面可恢复界面</span><br><span class="hljs-string">window.Test_AllStepData_Save=function()&#123;</span><br><span class="hljs-string">	if(!ACME.StepData.order) throw new Error(Lang(&quot;未完成第二步操作&quot;,&quot;The step 2 is not completed&quot;,true));</span><br><span class="hljs-string">	</span><br><span class="hljs-string">	var config=ACME.StepData.config;</span><br><span class="hljs-string">	delete ACME.PrevNonce;</span><br><span class="hljs-string">	config.privateKey=config.privateKey.pem;</span><br><span class="hljs-string">	config.accountKey=config.accountKey.pem;</span><br><span class="hljs-string">	</span><br><span class="hljs-string">	localStorage[Test_AllStepData_StoreKey]=JSON.stringify(ACME);</span><br><span class="hljs-string">	ACME=null;</span><br><span class="hljs-string">	console.warn(Lang(&quot;仅供测试：已保存测试数据，需刷新页面&quot;,&quot;For testing only: the test data has been saved, and the page needs to be refreshed&quot;,true));</span><br><span class="hljs-string">&#125;;</span><br><span class="hljs-string">var Test_AllStepData_StoreKey=&quot;ACME_HTML_Test_AllStepData&quot;;</span><br><span class="hljs-string">var initTest_Restore=function()&#123;</span><br><span class="hljs-string">	if(localStorage[Test_AllStepData_StoreKey])&#123;</span><br><span class="hljs-string">		console.warn(Lang(&quot;仅供测试：已保存测试数据，调用Test_Restore_StepXXX()进行恢复步骤界面&quot;,&quot;For testing only: test data has been saved, call Test_Restore_StepXXX() to restore the step interface&quot;,true));</span><br><span class="hljs-string">	&#125;</span><br><span class="hljs-string">&#125;</span><br><span class="hljs-string">var Test_AllStepData_Restore=function(next)&#123;</span><br><span class="hljs-string">	var data=JSON.parse(localStorage[Test_AllStepData_StoreKey]||&quot;&#123;&#125;&quot;);</span><br><span class="hljs-string">	if(!data.StepData) throw new Error(Lang(&quot;未保存数据&quot;,&quot;No data saved&quot;,true));</span><br><span class="hljs-string">	for(var k in data) ACME[k]=data[k];</span><br><span class="hljs-string">	</span><br><span class="hljs-string">	var config=ACME.StepData.config;</span><br><span class="hljs-string">	X509.KeyParse(config.privateKey,function(info)&#123;</span><br><span class="hljs-string">		config.privateKey=info;</span><br><span class="hljs-string">		X509.KeyParse(config.accountKey,function(info)&#123;</span><br><span class="hljs-string">			config.accountKey=info;</span><br><span class="hljs-string">			console.log(&quot;ACME.StepData&quot;, ACME.StepData);</span><br><span class="hljs-string">			setTimeout(function()&#123;next()&#125;);</span><br><span class="hljs-string">		&#125;);</span><br><span class="hljs-string">	&#125;);</span><br><span class="hljs-string">&#125;;</span><br><span class="hljs-string">window.Test_Restore_StepAuth=function()&#123;</span><br><span class="hljs-string">	Test_AllStepData_Restore(function()&#123;</span><br><span class="hljs-string">		console.warn(Lang(&quot;仅供测试：已手动恢复步骤三界面&quot;,&quot;For testing only: Step 3 interface has been manually restored&quot;,true));</span><br><span class="hljs-string">		verifyStepShow();</span><br><span class="hljs-string">	&#125;);</span><br><span class="hljs-string">&#125;;</span><br><span class="hljs-string">window.Test_Restore_StepDownload=function()&#123;</span><br><span class="hljs-string">	Test_AllStepData_Restore(function()&#123;</span><br><span class="hljs-string">		console.warn(Lang(&quot;仅供测试：已手动恢复步骤四界面&quot;,&quot;For testing only: Step 4 interface has been manually restored&quot;,true));</span><br><span class="hljs-string">		downloadStepShow();</span><br><span class="hljs-string">	&#125;);</span><br><span class="hljs-string">&#125;;</span><br><span class="hljs-string"></span><br><span class="hljs-string"></span><br><span class="hljs-string"></span><br><span class="hljs-string">&#125;)();</span><br><span class="hljs-string">&lt;/script&gt;</span><br><span class="hljs-string"></span><br><span class="hljs-string"></span><br><span class="hljs-string"></span><br><span class="hljs-string"></span><br><span class="hljs-string"></span><br><span class="hljs-string">&lt;script&gt;</span><br><span class="hljs-string">//===================================================</span><br><span class="hljs-string">//================= ACME functions ==================</span><br><span class="hljs-string">//===================================================</span><br><span class="hljs-string">//LICENSE: GPL-3.0, https://github.com/xiangyuecn/ACME-HTML-Web-Browser-Client</span><br><span class="hljs-string">(function()&#123;</span><br><span class="hljs-string">&quot;use strict&quot;;</span><br><span class="hljs-string"></span><br><span class="hljs-string">/************** ACME client implementation **************/</span><br><span class="hljs-string">//RFC8555: https://www.rfc-editor.org/rfc/rfc8555.html</span><br><span class="hljs-string">window.ACME=&#123;</span><br><span class="hljs-string">	URL:&quot;&quot;</span><br><span class="hljs-string">	,SyncID:0</span><br><span class="hljs-string">	,DirData:&#123;&#125;</span><br><span class="hljs-string">	,Directory:function(True,False)&#123;</span><br><span class="hljs-string">		var id=++ACME.SyncID;</span><br><span class="hljs-string">		var url=ACME.URL,dirStoreKey=&quot;ACME_HTML_cache_&quot;+url;</span><br><span class="hljs-string">		var ok=function(cache)&#123;</span><br><span class="hljs-string">			var data=cache.data;</span><br><span class="hljs-string">			if(id!=ACME.SyncID) return False(&quot;cancel&quot;);</span><br><span class="hljs-string">			var meta=data.meta||&#123;&#125;;</span><br><span class="hljs-string">			if(!data.newOrder)</span><br><span class="hljs-string">				return False(&quot;Not newOrder found: &quot;+FormatText(JSON.stringify(data)));</span><br><span class="hljs-string">			ACME.DirData=data;</span><br><span class="hljs-string">			ACME.StepData.termsURL=meta.termsOfService;</span><br><span class="hljs-string">			ACME.StepData.needEAB=!!meta.externalAccountRequired;</span><br><span class="hljs-string">			var saveCache=function()&#123;</span><br><span class="hljs-string">				localStorage[dirStoreKey]=JSON.stringify(cache);</span><br><span class="hljs-string">			&#125;;</span><br><span class="hljs-string">			saveCache();</span><br><span class="hljs-string">			True(cache,saveCache);</span><br><span class="hljs-string">		&#125;;</span><br><span class="hljs-string">		var cache=JSON.parse(localStorage[dirStoreKey]||&#x27;&#123;&#125;&#x27;);//先读缓存</span><br><span class="hljs-string">		if(cache.time &amp;&amp; Date.now()-cache.time&lt;24*60*60*1000)&#123;</span><br><span class="hljs-string">			return ok(cache);</span><br><span class="hljs-string">		&#125;</span><br><span class="hljs-string">		request(url,null,function(data)&#123;</span><br><span class="hljs-string">			ok(&#123;data:data,time:Date.now()&#125;);</span><br><span class="hljs-string">		&#125;,False);</span><br><span class="hljs-string">	&#125;</span><br><span class="hljs-string">	</span><br><span class="hljs-string">	,StepData:&#123;&#125;</span><br><span class="hljs-string">	,ChallName:function(chall)&#123; //验证类型名称</span><br><span class="hljs-string">		if(chall.type==&quot;dns-01&quot;)&#123; // https://letsencrypt.org/docs/challenge-types/</span><br><span class="hljs-string">			return Lang(&quot;DNS验证&quot;,&quot;DNS Verify&quot;);</span><br><span class="hljs-string">		&#125;else if(chall.type==&quot;http-01&quot;)&#123;</span><br><span class="hljs-string">			return Lang(&quot;文件URL验证&quot;,&quot;File URL Verify&quot;);</span><br><span class="hljs-string">		&#125; // tls-alpn-01 https://www.rfc-editor.org/rfc/rfc8737</span><br><span class="hljs-string">		return chall.type.toUpperCase();</span><br><span class="hljs-string">	&#125;</span><br><span class="hljs-string">	,ChallSort:function(chall)&#123; //验证类型排序</span><br><span class="hljs-string">		if(chall.type==&quot;dns-01&quot;) return 1+&quot;_&quot;+chall.type;</span><br><span class="hljs-string">		else if(chall.type==&quot;http-01&quot;) return 2+&quot;_&quot;+chall.type;</span><br><span class="hljs-string">		return 3+&quot;_&quot;+chall.type;</span><br><span class="hljs-string">	&#125;</span><br><span class="hljs-string">	// 生成JSON Web Signature(JWS)，用账户私钥签名</span><br><span class="hljs-string">	,GetJwsA:async function(Protected, Payload)&#123;</span><br><span class="hljs-string">		var key=ACME.StepData.config.accountKey;</span><br><span class="hljs-string">		var alg=&quot;ES256&quot;,algorithm=&#123;name:&quot;ECDSA&quot;, hash:&quot;SHA-256&quot;&#125;;</span><br><span class="hljs-string">		if(key.type==&quot;RSA&quot;)&#123;</span><br><span class="hljs-string">			alg=&quot;RS256&quot;;algorithm=&#123;name:&quot;RSASSA-PKCS1-v1_5&quot;&#125;</span><br><span class="hljs-string">		&#125;</span><br><span class="hljs-string">		Protected.alg=alg;</span><br><span class="hljs-string">		var rtv=&#123;</span><br><span class="hljs-string">			&quot;protected&quot;:Json2UrlB64(Protected)</span><br><span class="hljs-string">			, payload:Payload?Json2UrlB64(Payload):&quot;&quot;</span><br><span class="hljs-string">		&#125;;</span><br><span class="hljs-string">		var data=Str2Bytes(rtv[&quot;protected&quot;]+&quot;.&quot;+rtv.payload);</span><br><span class="hljs-string">		var sign=await crypto.subtle.sign(algorithm, key.key, data);</span><br><span class="hljs-string">		rtv.signature=Bytes2UrlB64(sign);</span><br><span class="hljs-string">		return rtv;</span><br><span class="hljs-string">	&#125;</span><br><span class="hljs-string">	// 获得随机数Nonce</span><br><span class="hljs-string">	,GetNonceA:function(useNew)&#123;</span><br><span class="hljs-string">		return new Promise(function(resolve,reject)&#123;</span><br><span class="hljs-string">			ACME.GetNonce(useNew,function(val)&#123;</span><br><span class="hljs-string">				resolve(val);</span><br><span class="hljs-string">			&#125;,function(err)&#123;</span><br><span class="hljs-string">				reject(new Error(err));</span><br><span class="hljs-string">			&#125;);</span><br><span class="hljs-string">		&#125;);</span><br><span class="hljs-string">	&#125;</span><br><span class="hljs-string">	,GetNonce:function(useNew, True, False)&#123;</span><br><span class="hljs-string">		var old=ACME.PrevNonce;ACME.PrevNonce=&quot;&quot;;</span><br><span class="hljs-string">		if(!useNew &amp;&amp; old) return True(old);//使用上次调用返回的值</span><br><span class="hljs-string">		request(&#123;url:ACME.DirData.newNonce</span><br><span class="hljs-string">			,method:&quot;HEAD&quot;,response:false</span><br><span class="hljs-string">		&#125;, null, function(data,xhr)&#123;</span><br><span class="hljs-string">			ACME.PrevNonce=&quot;&quot;;</span><br><span class="hljs-string">			//跨域无解 Chrome ZeroSSL: Refused to get unsafe header &quot;Replay-Nonce&quot; , 需要 Access-Control-Expose-Headers: Link, Replay-Nonce, Location</span><br><span class="hljs-string">			var val=xhr.getResponseHeader(&quot;Replay-Nonce&quot;);</span><br><span class="hljs-string">			if(!val)&#123;</span><br><span class="hljs-string">				False(&quot;GetNonce: &quot;+Lang(&#x27;此ACME服务对浏览器访问支持太差，无法跨域获取Replay-Nonce响应头。&#x27;,&#x27;This ACME service has too poor browser access support to get the Replay-Nonce response header across domains.&#x27;), true);</span><br><span class="hljs-string">				return;</span><br><span class="hljs-string">			&#125;</span><br><span class="hljs-string">			True(val);</span><br><span class="hljs-string">		&#125;,function(err)&#123;</span><br><span class="hljs-string">			False(&quot;GetNonce: &quot;+err);</span><br><span class="hljs-string">		&#125;);</span><br><span class="hljs-string">	&#125;</span><br><span class="hljs-string">	//测试账户接口的跨域访问</span><br><span class="hljs-string">	,TestAccountCORS:function(True,False)&#123;</span><br><span class="hljs-string">		request(&#123;url:ACME.DirData.newAccount</span><br><span class="hljs-string">			,method:&quot;POST&quot;,response:false,nocheck:true</span><br><span class="hljs-string">		&#125;, &#123;&#125;, function(data,xhr)&#123;</span><br><span class="hljs-string">			if(xhr.status&gt;0)&#123;</span><br><span class="hljs-string">				True();</span><br><span class="hljs-string">			&#125;else&#123;</span><br><span class="hljs-string">				False(&quot;[&quot;+xhr.status+&quot;]&quot;,true);</span><br><span class="hljs-string">			&#125;</span><br><span class="hljs-string">		&#125;,function(err)&#123;</span><br><span class="hljs-string">			False(err);</span><br><span class="hljs-string">		&#125;);</span><br><span class="hljs-string">	&#125;</span><br><span class="hljs-string">	</span><br><span class="hljs-string">	//账户接口调用</span><br><span class="hljs-string">	,StepAccount:async function(True,False)&#123;</span><br><span class="hljs-string">		var id=++ACME.SyncID;</span><br><span class="hljs-string">		var tag=&quot;ACME.StepAccount&quot;;</span><br><span class="hljs-string">		CLog(tag, 0, &quot;==========Account Start==========&quot;);</span><br><span class="hljs-string">		var Err=&quot;&quot;;</span><br><span class="hljs-string">		try&#123;</span><br><span class="hljs-string">			await ACME._StepAccountA(id,tag);</span><br><span class="hljs-string">		&#125;catch(e)&#123;</span><br><span class="hljs-string">			Err=e.message||&quot;-&quot;;</span><br><span class="hljs-string">			CLog(tag, 1, Err, e);</span><br><span class="hljs-string">		&#125;</span><br><span class="hljs-string">		CLog(tag, 0, &quot;==========Account End==========&quot;);</span><br><span class="hljs-string">		if(Err) False(Err)</span><br><span class="hljs-string">		else True();</span><br><span class="hljs-string">	&#125; , _StepAccountA:async function(id,tag)&#123;</span><br><span class="hljs-string">		var url=ACME.DirData.newAccount,config=ACME.StepData.config;</span><br><span class="hljs-string">		var accountData=&#123;</span><br><span class="hljs-string">			contact:[&quot;mailto:&quot;+config.email]</span><br><span class="hljs-string">			,termsOfServiceAgreed:true</span><br><span class="hljs-string">		&#125;;</span><br><span class="hljs-string">		</span><br><span class="hljs-string">		//externalAccountRequired https://github.com/fszlin/certes/blob/08bf850bbed9e026c718f56f1bcc454afafb4f92/src/Certes/Acme/AccountContext.cs</span><br><span class="hljs-string">		if(ACME.StepData.needEAB)&#123;</span><br><span class="hljs-string">			var eab=&#123;</span><br><span class="hljs-string">				&quot;protected&quot;:Json2UrlB64(&#123; alg:&quot;HS256&quot;, kid:config.eabKid, url:url &#125;)</span><br><span class="hljs-string">				,payload:Json2UrlB64(X509.PublicKeyJwk(config.accountKey))</span><br><span class="hljs-string">			&#125;;</span><br><span class="hljs-string">			var key=await crypto.subtle.importKey(&quot;raw&quot;, UrlB642Bytes(config.eabKey)</span><br><span class="hljs-string">				,&#123;name:&quot;HMAC&quot;,hash:&quot;SHA-256&quot;&#125;, true, [&quot;sign&quot;]);</span><br><span class="hljs-string">			var data=Str2Bytes(eab[&quot;protected&quot;]+&quot;.&quot;+eab.payload);</span><br><span class="hljs-string">			var sign=await crypto.subtle.sign(&quot;HMAC&quot;, key, data);</span><br><span class="hljs-string">			eab.signature=Bytes2UrlB64(sign);</span><br><span class="hljs-string">			accountData.externalAccountBinding=eab;</span><br><span class="hljs-string">			CLog(tag,0 ,&quot;externalAccountBinding&quot;, eab);</span><br><span class="hljs-string">		&#125;;</span><br><span class="hljs-string">		</span><br><span class="hljs-string">		//组装成jws，请求接口</span><br><span class="hljs-string">		var sendData=await ACME.GetJwsA(&#123;</span><br><span class="hljs-string">			jwk: X509.PublicKeyJwk(config.accountKey)</span><br><span class="hljs-string">			,nonce: await ACME.GetNonceA(true)</span><br><span class="hljs-string">			,url: url</span><br><span class="hljs-string">		&#125;,accountData);</span><br><span class="hljs-string">		var resp=await requestA(url, sendData);</span><br><span class="hljs-string">		if(id!=ACME.SyncID) throw new Error(&quot;cancel&quot;);</span><br><span class="hljs-string">		ACME.StepData.account=&#123;</span><br><span class="hljs-string">			url:xhrHeader(resp.xhr, &quot;Location&quot;)</span><br><span class="hljs-string">			,data:resp.data</span><br><span class="hljs-string">		&#125;;</span><br><span class="hljs-string">		CLog(tag,0,&quot;Account OK&quot;,ACME.StepData.account);</span><br><span class="hljs-string">	&#125;</span><br><span class="hljs-string">	</span><br><span class="hljs-string">	//订单接口调用</span><br><span class="hljs-string">	,StepOrder:async function(Progress,True,False)&#123;</span><br><span class="hljs-string">		var id=++ACME.SyncID;</span><br><span class="hljs-string">		var tag=&quot;ACME.StepOrder&quot;;</span><br><span class="hljs-string">		CLog(tag, 0, &quot;==========Order Start==========&quot;);</span><br><span class="hljs-string">		var Err=&quot;&quot;;</span><br><span class="hljs-string">		try&#123;</span><br><span class="hljs-string">			await ACME._StepOrderA(Progress,id,tag);</span><br><span class="hljs-string">		&#125;catch(e)&#123;</span><br><span class="hljs-string">			Err=e.message||&quot;-&quot;;</span><br><span class="hljs-string">			CLog(tag, 1, Err, e);</span><br><span class="hljs-string">		&#125;</span><br><span class="hljs-string">		CLog(tag, 0, &quot;==========Order End==========&quot;);</span><br><span class="hljs-string">		if(Err) False(Err)</span><br><span class="hljs-string">		else True();</span><br><span class="hljs-string">	&#125; , _StepOrderA:async function(Progress,id,tag)&#123;</span><br><span class="hljs-string">		var url=ACME.DirData.newOrder,config=ACME.StepData.config;</span><br><span class="hljs-string">		var dnsArr=[];</span><br><span class="hljs-string">		for(var i=0;i&lt;config.domains.length;i++)&#123;</span><br><span class="hljs-string">			dnsArr.push(&#123; type:&quot;dns&quot;, value:config.domains[i] &#125;);</span><br><span class="hljs-string">		&#125;</span><br><span class="hljs-string">		var orderData=&#123;</span><br><span class="hljs-string">			identifiers:dnsArr</span><br><span class="hljs-string">		&#125;;</span><br><span class="hljs-string">		</span><br><span class="hljs-string">		Progress(&quot;newOrder...&quot;);</span><br><span class="hljs-string">		//组装成jws，请求接口</span><br><span class="hljs-string">		var sendData=await ACME.GetJwsA(&#123;</span><br><span class="hljs-string">			kid: ACME.StepData.account.url</span><br><span class="hljs-string">			,nonce: await ACME.GetNonceA()</span><br><span class="hljs-string">			,url: url</span><br><span class="hljs-string">		&#125;,orderData);</span><br><span class="hljs-string">		var resp=await requestA(url, sendData);</span><br><span class="hljs-string">		if(id!=ACME.SyncID) throw new Error(&quot;cancel&quot;);</span><br><span class="hljs-string">		resp.data.orderUrl=xhrHeader(resp.xhr, &quot;Location&quot;);</span><br><span class="hljs-string">		ACME.StepData.order=resp.data;</span><br><span class="hljs-string">		CLog(tag,0,&quot;Order OK&quot;,ACME.StepData.order);</span><br><span class="hljs-string">		</span><br><span class="hljs-string">		//准备Key Authorizations需要的参数 参考：rfc8555 8.1</span><br><span class="hljs-string">		var jwkStr=JSON.stringify(X509.PublicKeyJwk(config.accountKey));</span><br><span class="hljs-string">		var thumbprint=await crypto.subtle.digest(&#123;name: &quot;SHA-256&quot;&#125;, Str2Bytes(jwkStr));</span><br><span class="hljs-string">		thumbprint=Bytes2UrlB64(thumbprint);</span><br><span class="hljs-string">		</span><br><span class="hljs-string">		//读取所有的验证信息</span><br><span class="hljs-string">		var idfs=ACME.StepData.order.identifiers,bad=0;</span><br><span class="hljs-string">		var auths=ACME.StepData.order.authorizations;</span><br><span class="hljs-string">		for(var i=0;i&lt;idfs.length;i++)&#123;</span><br><span class="hljs-string">			if(config.domains.indexOf(idfs[i].value)==-1) bad=1;</span><br><span class="hljs-string">		&#125;</span><br><span class="hljs-string">		if(bad || idfs.length!=auths.length || idfs.length!=config.domains.length)</span><br><span class="hljs-string">			throw new Error(Lang(&quot;创建的订单中的域名和配置的不一致&quot;,&quot;The domain name in the created order is inconsistent with the configuration&quot;));</span><br><span class="hljs-string">		if(id!=ACME.SyncID) throw new Error(&quot;cancel&quot;);</span><br><span class="hljs-string">		ACME.StepData.auths=&#123;&#125;;</span><br><span class="hljs-string">		for(var i=0;i&lt;auths.length;i++)&#123;</span><br><span class="hljs-string">			Progress(&quot;auth(&quot;+(i+1)+&quot;/&quot;+auths.length+&quot;)...&quot;);</span><br><span class="hljs-string">			var url=auths[i];</span><br><span class="hljs-string">			var sendData=await ACME.GetJwsA(&#123;</span><br><span class="hljs-string">				kid: ACME.StepData.account.url</span><br><span class="hljs-string">				,nonce: await ACME.GetNonceA()</span><br><span class="hljs-string">				,url: url</span><br><span class="hljs-string">			&#125;,&quot;&quot;);</span><br><span class="hljs-string">			var resp=await requestA(url, sendData);</span><br><span class="hljs-string">			if(id!=ACME.SyncID) throw new Error(&quot;cancel&quot;);</span><br><span class="hljs-string">			resp.data.domain=idfs[i].value;</span><br><span class="hljs-string">			resp.data.authUrl=url;</span><br><span class="hljs-string">			ACME.StepData.auths[idfs[i].value]=resp.data;</span><br><span class="hljs-string">			</span><br><span class="hljs-string">			//生成Key Authorizations</span><br><span class="hljs-string">			var challs=resp.data.challenges;</span><br><span class="hljs-string">			for(var i2=0;i2&lt;challs.length;i2++)&#123;</span><br><span class="hljs-string">				var chall=challs[i2];</span><br><span class="hljs-string">				chall.authTxt=chall.token+&quot;.&quot;+thumbprint;</span><br><span class="hljs-string">				var sha=await crypto.subtle.digest(&#123;name: &quot;SHA-256&quot;&#125;</span><br><span class="hljs-string">								, Str2Bytes(chall.authTxt));</span><br><span class="hljs-string">				if(id!=ACME.SyncID) throw new Error(&quot;cancel&quot;);</span><br><span class="hljs-string">				chall.authTxtSHA256=Bytes2UrlB64(sha);</span><br><span class="hljs-string">				chall.authTxtSHA256Base64=Bytes2Base64(sha);</span><br><span class="hljs-string">			&#125;</span><br><span class="hljs-string">		&#125;</span><br><span class="hljs-string">		CLog(tag,0,&quot;Order Authorizations&quot;,ACME.StepData.auths);</span><br><span class="hljs-string">	&#125;</span><br><span class="hljs-string">	</span><br><span class="hljs-string">	//验证一个域名</span><br><span class="hljs-string">	,StepVerifyAuthItem:async function(authItem, challIdx, True,False)&#123;</span><br><span class="hljs-string">		var tag=&quot;ACME.verify[&quot;+authItem.challenges[challIdx].type+&quot;]:&quot;+authItem.domain;</span><br><span class="hljs-string">		var Err=&quot;&quot;;</span><br><span class="hljs-string">		try&#123;</span><br><span class="hljs-string">			await ACME._StepVerifyAuthItemA(authItem,challIdx, ACME.SyncID,tag, True,False);</span><br><span class="hljs-string">		&#125;catch(e)&#123;</span><br><span class="hljs-string">			Err=e.message||&quot;-&quot;;</span><br><span class="hljs-string">			CLog(tag, 1, Err, e);</span><br><span class="hljs-string">		&#125;</span><br><span class="hljs-string">		if(Err) True(false, 1000, Err); //重试</span><br><span class="hljs-string">	&#125; , _StepVerifyAuthItemA:async function(authItem,challIdx, id,tag, True,False)&#123;</span><br><span class="hljs-string">		//先通知要用的验证方式，反复发送只要成功一次即可，不管结果</span><br><span class="hljs-string">		var chall=authItem.challenges[challIdx];</span><br><span class="hljs-string">		if(!chall.isSend)&#123;</span><br><span class="hljs-string">			var url=chall.url;</span><br><span class="hljs-string">			var sendData=await ACME.GetJwsA(&#123;</span><br><span class="hljs-string">				kid: ACME.StepData.account.url</span><br><span class="hljs-string">				,nonce: await ACME.GetNonceA()</span><br><span class="hljs-string">				,url: url</span><br><span class="hljs-string">			&#125;,&#123;&#125;);</span><br><span class="hljs-string">			var resp=await requestA(&#123;url:url,nocheck:true&#125;, sendData);</span><br><span class="hljs-string">			var status=resp.xhr.status;</span><br><span class="hljs-string">			if(status&gt;=200&amp;&amp;status&lt;300)</span><br><span class="hljs-string">				chall.isSend=true;</span><br><span class="hljs-string">		&#125;</span><br><span class="hljs-string">		</span><br><span class="hljs-string">		//重新查询一下状态</span><br><span class="hljs-string">		var url=authItem.authUrl;</span><br><span class="hljs-string">		var sendData=await ACME.GetJwsA(&#123;</span><br><span class="hljs-string">			kid: ACME.StepData.account.url</span><br><span class="hljs-string">			,nonce: await ACME.GetNonceA()</span><br><span class="hljs-string">			,url: url</span><br><span class="hljs-string">		&#125;,&quot;&quot;);</span><br><span class="hljs-string">		var resp=await requestA(url, sendData);</span><br><span class="hljs-string">		var data=resp.data;</span><br><span class="hljs-string">		if(data.status==&quot;pending&quot;)&#123;</span><br><span class="hljs-string">			CLog(tag, 0, &quot;pending...&quot;);</span><br><span class="hljs-string">			return True(false, 1000, &quot;pending...&quot;);</span><br><span class="hljs-string">		&#125;</span><br><span class="hljs-string">		if(data.status==&quot;valid&quot;)&#123;</span><br><span class="hljs-string">			CLog(tag, 0, &quot;valid OK&quot;);</span><br><span class="hljs-string">			return True(true);</span><br><span class="hljs-string">		&#125;</span><br><span class="hljs-string">		CLog(tag, 1, &quot;Fail&quot;, data);</span><br><span class="hljs-string">		return False(data.status+&quot;: &quot;+FormatText(JSON.stringify(data)));</span><br><span class="hljs-string">	&#125;</span><br><span class="hljs-string">	</span><br><span class="hljs-string">	//完成订单，生成证书</span><br><span class="hljs-string">	,StepFinalizeOrder:async function(Progress,True,False)&#123;</span><br><span class="hljs-string">		var id=++ACME.SyncID;</span><br><span class="hljs-string">		var tag=&quot;ACME.StepFinalizeOrder&quot;;</span><br><span class="hljs-string">		CLog(tag, 0, &quot;==========Finalize Start==========&quot;);</span><br><span class="hljs-string">		var Err=&quot;&quot;;</span><br><span class="hljs-string">		try&#123;</span><br><span class="hljs-string">			await ACME._StepFinalizeOrderA(Progress,id,tag);</span><br><span class="hljs-string">		&#125;catch(e)&#123;</span><br><span class="hljs-string">			Err=e.message||&quot;-&quot;;</span><br><span class="hljs-string">			CLog(tag, 1, Err, e);</span><br><span class="hljs-string">		&#125;</span><br><span class="hljs-string">		CLog(tag, 0, &quot;==========Finalize End==========&quot;);</span><br><span class="hljs-string">		if(Err) False(Err)</span><br><span class="hljs-string">		else True();</span><br><span class="hljs-string">	&#125; , _StepFinalizeOrderA:async function(Progress,id,tag)&#123;</span><br><span class="hljs-string">		var order=ACME.StepData.order,config=ACME.StepData.config,domains=config.domains;</span><br><span class="hljs-string">		</span><br><span class="hljs-string">		//先请求finalize</span><br><span class="hljs-string">		if(!order.finalizeIsSend)&#123;</span><br><span class="hljs-string">			Progress(&quot;finalize...&quot;);</span><br><span class="hljs-string">			//生成csr，第一个域名做CN</span><br><span class="hljs-string">			var csr=await new Promise(function(resolve,reject)&#123;</span><br><span class="hljs-string">				X509.CreateCSR(config.privateKey, domains[0], domains, function(csr)&#123;</span><br><span class="hljs-string">					resolve(csr);</span><br><span class="hljs-string">				&#125;,function(err)&#123;</span><br><span class="hljs-string">					reject(new Error(err));</span><br><span class="hljs-string">				&#125;);</span><br><span class="hljs-string">			&#125;);</span><br><span class="hljs-string">			order.orderCSR=csr;</span><br><span class="hljs-string">			CLog(tag,0,&quot;CSR\\n&quot;+csr);</span><br><span class="hljs-string">			csr=Bytes2UrlB64(ASN1.PEM2Bytes(csr));</span><br><span class="hljs-string">			</span><br><span class="hljs-string">			var url=order.finalize;</span><br><span class="hljs-string">			//组装成jws，请求接口</span><br><span class="hljs-string">			var sendData=await ACME.GetJwsA(&#123;</span><br><span class="hljs-string">				kid: ACME.StepData.account.url</span><br><span class="hljs-string">				,nonce: await ACME.GetNonceA()</span><br><span class="hljs-string">				,url: url</span><br><span class="hljs-string">			&#125;,&#123; csr:csr &#125;);</span><br><span class="hljs-string">			var resp=await requestA(url, sendData);</span><br><span class="hljs-string">			if(id!=ACME.SyncID) throw new Error(&quot;cancel&quot;);</span><br><span class="hljs-string">			CLog(tag,0,&quot;finalize result&quot;,resp.data);</span><br><span class="hljs-string">			order.finalizeIsSend=true;</span><br><span class="hljs-string">		&#125;</span><br><span class="hljs-string">		</span><br><span class="hljs-string">		//轮询订单状态，60秒超时</span><br><span class="hljs-string">		var t1=Date.now(),tryCount=0;</span><br><span class="hljs-string">		while(!order.checkOK &amp;&amp; Date.now()-t1&lt;60*1000)&#123;</span><br><span class="hljs-string">			if(id!=ACME.SyncID) throw new Error(&quot;cancel&quot;);</span><br><span class="hljs-string">			tryCount++;</span><br><span class="hljs-string">			Progress(&quot;check retry:&quot;+tryCount+&quot;...&quot;);</span><br><span class="hljs-string">			var url=order.orderUrl;</span><br><span class="hljs-string">			//组装成jws，请求接口</span><br><span class="hljs-string">			var sendData=await ACME.GetJwsA(&#123;</span><br><span class="hljs-string">				kid: ACME.StepData.account.url</span><br><span class="hljs-string">				,nonce: await ACME.GetNonceA()</span><br><span class="hljs-string">				,url: url</span><br><span class="hljs-string">			&#125;,&quot;&quot;);</span><br><span class="hljs-string">			var resp=await requestA(url, sendData);</span><br><span class="hljs-string">			if(id!=ACME.SyncID) throw new Error(&quot;cancel&quot;);</span><br><span class="hljs-string">			var data=resp.data;</span><br><span class="hljs-string">			if(data.status==&quot;valid&quot;)&#123;</span><br><span class="hljs-string">				order.checkOK=true;</span><br><span class="hljs-string">				order.certUrl=data.certificate;</span><br><span class="hljs-string">				CLog(tag,0,&quot;check OK&quot;,data);</span><br><span class="hljs-string">				break;</span><br><span class="hljs-string">			&#125;else if(data.status==&quot;invalid&quot;)&#123;</span><br><span class="hljs-string">				CLog(tag,1,&quot;check Fail&quot;,data);</span><br><span class="hljs-string">				throw new Error(data.status+&quot;: &quot;+FormatText(JSON.stringify(data)));</span><br><span class="hljs-string">			&#125;else&#123;</span><br><span class="hljs-string">				CLog(tag,0,data.status+&quot;... wait 1s&quot;,data);</span><br><span class="hljs-string">				await new Promise(function(s)&#123; setTimeout(s, 1000) &#125;);</span><br><span class="hljs-string">			&#125;</span><br><span class="hljs-string">		&#125;</span><br><span class="hljs-string">		</span><br><span class="hljs-string">		//下载证书</span><br><span class="hljs-string">		if(!order.downloadPEM)&#123;</span><br><span class="hljs-string">			Progress(&quot;download...&quot;);</span><br><span class="hljs-string">			var url=order.certUrl;</span><br><span class="hljs-string">			//组装成jws，请求接口</span><br><span class="hljs-string">			var sendData=await ACME.GetJwsA(&#123;</span><br><span class="hljs-string">				kid: ACME.StepData.account.url</span><br><span class="hljs-string">				,nonce: await ACME.GetNonceA()</span><br><span class="hljs-string">				,url: url</span><br><span class="hljs-string">			&#125;,&quot;&quot;);</span><br><span class="hljs-string">			var resp=await requestA(&#123;url:url,response:false&#125;, sendData);</span><br><span class="hljs-string">			if(id!=ACME.SyncID) throw new Error(&quot;cancel&quot;);</span><br><span class="hljs-string">			var pem=resp.xhr.responseText;</span><br><span class="hljs-string">			order.downloadPEM=pem;</span><br><span class="hljs-string">			CLog(tag,0,&quot;download OK\\n&quot;+pem);</span><br><span class="hljs-string">		&#125;</span><br><span class="hljs-string">	&#125;</span><br><span class="hljs-string">&#125;;</span><br><span class="hljs-string"></span><br><span class="hljs-string"></span><br><span class="hljs-string">// 读取响应头，读不到就当做跨域无法读取处理，自定义的头需要 Access-Control-Expose-Headers: Link, Replay-Nonce, Location</span><br><span class="hljs-string">var xhrHeader=function(xhr,key)&#123;</span><br><span class="hljs-string">	var val=xhr.getResponseHeader(key);</span><br><span class="hljs-string">	if(!val)&#123;</span><br><span class="hljs-string">		acmeReadDirGotoCORS();</span><br><span class="hljs-string">		throw new Error(Lang(&quot;无法读取响应头&quot;+key+&quot;，可能是因为此ACME服务对跨域访问支持不良，请按第一步显示的提示操作。&quot;</span><br><span class="hljs-string">			,&quot;The response header &quot;+key+&quot; cannot be read, This may be because this ACME service does not support cross domain access, Please follow the prompt displayed in step 1.&quot;));</span><br><span class="hljs-string">	&#125;</span><br><span class="hljs-string">	return val;</span><br><span class="hljs-string">&#125;;</span><br><span class="hljs-string"></span><br><span class="hljs-string">// ajax</span><br><span class="hljs-string">var requestA=function(url,post)&#123;</span><br><span class="hljs-string">	return new Promise(function(resolve,reject)&#123;</span><br><span class="hljs-string">		request(url,post,function(data,xhr)&#123;</span><br><span class="hljs-string">			resolve(&#123;data:data,xhr:xhr&#125;);</span><br><span class="hljs-string">		&#125;,function(err)&#123;</span><br><span class="hljs-string">			reject(new Error(err));</span><br><span class="hljs-string">		&#125;);</span><br><span class="hljs-string">	&#125;);</span><br><span class="hljs-string">&#125;</span><br><span class="hljs-string">var request=function(url,post,True,False)&#123;</span><br><span class="hljs-string">	var set=typeof(url)==&quot;string&quot;?&#123;url:url&#125;:url; url=set.url;</span><br><span class="hljs-string">	var method=set.method||(post?&quot;POST&quot;:&quot;GET&quot;);</span><br><span class="hljs-string">	var tag=&quot;ACME.Request&quot;; CLog(tag,4,&quot;send &quot;+method,set,post);</span><br><span class="hljs-string">	</span><br><span class="hljs-string">	var xhr=new XMLHttpRequest();</span><br><span class="hljs-string">	xhr.timeout=30000;</span><br><span class="hljs-string">	xhr.open(method,url,true);</span><br><span class="hljs-string">	xhr.onreadystatechange=function()&#123;</span><br><span class="hljs-string">		if(xhr.readyState==4)&#123;</span><br><span class="hljs-string">			ACME.PrevNonce=xhr.getResponseHeader(&quot;Replay-Nonce&quot;)||&quot;&quot;;//将此值存起来</span><br><span class="hljs-string">			</span><br><span class="hljs-string">			var isBad=xhr.status&lt;200 || xhr.status&gt;=300;</span><br><span class="hljs-string">			var useResp=set.response==null || set.response;</span><br><span class="hljs-string">			var err=&quot;&quot;,data,logObj;</span><br><span class="hljs-string">			if(useResp || isBad)&#123;</span><br><span class="hljs-string">				logObj=xhr.responseText;</span><br><span class="hljs-string">				try&#123;</span><br><span class="hljs-string">					data=JSON.parse(logObj);</span><br><span class="hljs-string">					logObj=data;</span><br><span class="hljs-string">				&#125;catch(e)&#123; &#125;;</span><br><span class="hljs-string">			&#125;</span><br><span class="hljs-string">			CLog(tag,4,&quot;send End&quot;,set, &#123;</span><br><span class="hljs-string">				status:xhr.status</span><br><span class="hljs-string">				,headers:xhr.getAllResponseHeaders()</span><br><span class="hljs-string">			&#125;, logObj);</span><br><span class="hljs-string">			if(set.nocheck || !isBad &amp;&amp; (!useResp || data))&#123;</span><br><span class="hljs-string">				return True(data, xhr);</span><br><span class="hljs-string">			&#125;</span><br><span class="hljs-string">			False((isBad?&quot;[&quot;+xhr.status+&quot;]&quot;:&quot;&quot;)+FormatText(xhr.responseText), xhr.status);</span><br><span class="hljs-string">		&#125;</span><br><span class="hljs-string">	&#125;;</span><br><span class="hljs-string">	if(post)&#123;</span><br><span class="hljs-string">		if(typeof(post)==&quot;object&quot;)post=JSON.stringify(post);</span><br><span class="hljs-string">		xhr.setRequestHeader(&quot;Content-Type&quot;,set.contentType||&quot;application/jose+json&quot;);</span><br><span class="hljs-string">		xhr.send(post);</span><br><span class="hljs-string">	&#125;else&#123;</span><br><span class="hljs-string">		xhr.send();</span><br><span class="hljs-string">	&#125;</span><br><span class="hljs-string">&#125;;</span><br><span class="hljs-string"></span><br><span class="hljs-string">&#125;)();</span><br><span class="hljs-string">&lt;/script&gt;</span><br><span class="hljs-string"></span><br><span class="hljs-string"></span><br><span class="hljs-string"></span><br><span class="hljs-string"></span><br><span class="hljs-string"></span><br><span class="hljs-string">&lt;script&gt;</span><br><span class="hljs-string">//==================================================================</span><br><span class="hljs-string">//================= RSA/ECC/X.509/ASN.1 functions ==================</span><br><span class="hljs-string">//==================================================================</span><br><span class="hljs-string">//LICENSE: GPL-3.0, https://github.com/xiangyuecn/ACME-HTML-Web-Browser-Client</span><br><span class="hljs-string">(function()&#123;</span><br><span class="hljs-string">&quot;use strict&quot;;</span><br><span class="hljs-string"></span><br><span class="hljs-string">window.X509=&#123;</span><br><span class="hljs-string">	DefaultType2_RSA:&quot;2048&quot; //默认创建RSA密钥位数</span><br><span class="hljs-string">	,DefaultType2_ECC:&quot;P-256&quot; //默认创建ECC曲线</span><br><span class="hljs-string">	,SupportECCType2:&#123; //支持的ECC曲线和常见名称</span><br><span class="hljs-string">		&quot;P-256&quot;:&quot;prime256v1&quot;, &quot;P-384&quot;:&quot;secp384r1&quot;, &quot;P-521&quot;:&quot;secp521r1&quot;</span><br><span class="hljs-string">	&#125;</span><br><span class="hljs-string">	,SupportECCType2Names:function()&#123; var str=[]; for(var k in X509.SupportECCType2)str.push(X509.SupportECCType2[k]); return str; &#125;</span><br><span class="hljs-string">	</span><br><span class="hljs-string">	//创建RSA/ECC密钥对 type2取值：type=RSA时为密钥位数数值，type=ECC时为支持的曲线（X509.SupportECCType2）</span><br><span class="hljs-string">	,KeyGenerate:function(type,type2,True,False)&#123;</span><br><span class="hljs-string">		var algorithm=0;</span><br><span class="hljs-string">		if(type==&quot;RSA&quot;)&#123;</span><br><span class="hljs-string">			algorithm=&#123; publicExponent: new Uint8Array([1, 0, 1]) //E: AQAB</span><br><span class="hljs-string">				,name:&quot;RSASSA-PKCS1-v1_5&quot;, modulusLength:+type2, hash:&quot;SHA-256&quot; &#125;;</span><br><span class="hljs-string">		&#125;else if(type==&quot;ECC&quot;)&#123;</span><br><span class="hljs-string">			algorithm=&#123; name:&quot;ECDSA&quot;, namedCurve:type2 &#125;;</span><br><span class="hljs-string">		&#125;else&#123;</span><br><span class="hljs-string">			False(&quot;Not support &quot;+type);</span><br><span class="hljs-string">			return;</span><br><span class="hljs-string">		&#125;;</span><br><span class="hljs-string">		crypto.subtle.generateKey(algorithm,true,[&quot;sign&quot;,&quot;verify&quot;])</span><br><span class="hljs-string">			.then(function(key)&#123;</span><br><span class="hljs-string">				//FireFox不支持导出pkcs8参数的ECC私钥，Chrome没问题，使用jwk获得最大兼容</span><br><span class="hljs-string">				crypto.subtle.exportKey(&quot;jwk&quot;, key.privateKey).then(function(jwk)&#123;</span><br><span class="hljs-string">					True(X509.KeyExport(jwk));</span><br><span class="hljs-string">				&#125;).catch(function(e)&#123;</span><br><span class="hljs-string">					False(Lang(&#x27;此浏览器不支持导出&#x27;+algorithm.name+&#x27;+PKCS#8格式密钥：&#x27;,&#x27;This browser does not support exporting &#x27;+algorithm.name+&#x27;+PKCS#8 format keys: &#x27;)+e.message);</span><br><span class="hljs-string">				&#125;);</span><br><span class="hljs-string">			&#125;).catch(function(e)&#123;</span><br><span class="hljs-string">				False(Lang(&#x27;此浏览器不支持生成&#x27;+algorithm.name+&#x27;：&#x27;,&#x27;This browser does not support generating &#x27;+algorithm.name+&#x27;: &#x27;)+e.message);</span><br><span class="hljs-string">			&#125;);</span><br><span class="hljs-string">	&#125;</span><br><span class="hljs-string">	//解析密钥，检查是否支持，通过回调返回格式或错误信息，pem支持公钥和私钥</span><br><span class="hljs-string">	,KeyParse:function(pem, True, False, mustPrivate)&#123;</span><br><span class="hljs-string">		var rtv=&#123;&#125;;</span><br><span class="hljs-string">		var Err=function(msg)&#123; rtv.error=msg; False(msg, rtv); &#125;;</span><br><span class="hljs-string">		//浏览器crypto不支持PKCS#1的pem导入，提取参数转成jwk导入</span><br><span class="hljs-string">		</span><br><span class="hljs-string">		if(!/BEGIN\\s*(RSA|EC)?\\s*(PUBLIC|PRIVATE)\\s*KEY/.test(pem))</span><br><span class="hljs-string">			return Err(Lang(&#x27;不是RSA或ECC密钥&#x27;,&#x27;Not an RSA or ECC key&#x27;));</span><br><span class="hljs-string">		rtv.type=RegExp.$1==&quot;EC&quot;?&quot;ECC&quot;:RegExp.$1;</span><br><span class="hljs-string">		var isPKCS1=!!RegExp.$1;</span><br><span class="hljs-string">		var isPub=RegExp.$2==&quot;PUBLIC&quot;;</span><br><span class="hljs-string">		if(isPub &amp;&amp; mustPrivate)</span><br><span class="hljs-string">			return Err(Lang(&#x27;不是私钥&#x27;,&#x27;Is not a private key&#x27;));</span><br><span class="hljs-string">		</span><br><span class="hljs-string">		//解析提取参数信息</span><br><span class="hljs-string">		try&#123;</span><br><span class="hljs-string">			var paramAsn1=null;</span><br><span class="hljs-string">			var asn1=ASN1.ParsePEM(pem);</span><br><span class="hljs-string">			rtv.asn1=asn1;</span><br><span class="hljs-string">			</span><br><span class="hljs-string">			if(isPKCS1)&#123;</span><br><span class="hljs-string">				if(rtv.type==&quot;RSA&quot;)&#123;</span><br><span class="hljs-string">					paramAsn1=asn1; //直接按顺序存放的参数</span><br><span class="hljs-string">				&#125;else if(rtv.type==&quot;ECC&quot;)&#123;</span><br><span class="hljs-string">					if(isPub) //没见过这种ecc公钥</span><br><span class="hljs-string">						return Err(Lang(&#x27;不支持ECC PKCS#1格式公钥&#x27;,&#x27;ECC PKCS#1 format public key is not supported&#x27;));</span><br><span class="hljs-string">					var oid2=asn1.sub[2].sub[0].oid;</span><br><span class="hljs-string">					rtv.type2=ASN1.OID[oid2]||&quot;&quot;;</span><br><span class="hljs-string">					paramAsn1=asn1;</span><br><span class="hljs-string">				&#125;</span><br><span class="hljs-string">			&#125;else&#123;</span><br><span class="hljs-string">				var idx=isPub?0:1; //跳过私钥开头的version，就和公钥一样了</span><br><span class="hljs-string">				var oid=asn1.sub[idx].sub[0].oid;</span><br><span class="hljs-string">				var oid2=asn1.sub[idx].sub[1].oid;</span><br><span class="hljs-string">				rtv.type=ASN1.OID[oid]||&quot;&quot;;</span><br><span class="hljs-string">				rtv.type2=ASN1.OID[oid2]||&quot;&quot;;</span><br><span class="hljs-string">				</span><br><span class="hljs-string">				if(rtv.type==&quot;ECC&quot;&amp;&amp;isPub)//ECC公钥直接就是值</span><br><span class="hljs-string">					paramAsn1=asn1;</span><br><span class="hljs-string">				else</span><br><span class="hljs-string">					paramAsn1=new ASN1().parse(asn1.sub[idx+1].bytes);//密钥参数</span><br><span class="hljs-string">			&#125;</span><br><span class="hljs-string">			rtv.paramAsn1=paramAsn1;</span><br><span class="hljs-string">		&#125;catch(e)&#123;</span><br><span class="hljs-string">			return Err(Lang(&#x27;密钥解析失败：&#x27;,&#x27;Key resolution failed: &#x27;)+e.message);</span><br><span class="hljs-string">		&#125;</span><br><span class="hljs-string">		if(rtv.type==&quot;RSA&quot;)&#123;</span><br><span class="hljs-string">			var idx=isPub?0:1; //私钥开头多一个版本号</span><br><span class="hljs-string">			rtv.param=&#123;</span><br><span class="hljs-string">				n:paramAsn1.sub[idx].bytes //Modulus</span><br><span class="hljs-string">				,e:paramAsn1.sub[idx+1].bytes //Exponent</span><br><span class="hljs-string">				,d:isPub?null:paramAsn1.sub[idx+2].bytes //D</span><br><span class="hljs-string">			&#125;;</span><br><span class="hljs-string">			var keys=&quot;p,q,dp,dq,qi&quot;.split(&quot;,&quot;);</span><br><span class="hljs-string">			for(var i=0;i&lt;5;i++)</span><br><span class="hljs-string">				rtv.param[keys[i]]=isPub?null:paramAsn1.sub[idx+3+i].bytes;</span><br><span class="hljs-string">			rtv.type2=rtv.param.n.length*8+&quot;&quot;;</span><br><span class="hljs-string">		&#125;else if(rtv.type==&quot;ECC&quot;)&#123;</span><br><span class="hljs-string">			if(!X509.SupportECCType2[rtv.type2])&#123;</span><br><span class="hljs-string">				return Err(Lang(&#x27;只支持&#x27;+X509.SupportECCType2Names().join(&quot;、&quot;)+&#x27;曲线的ECC密钥&#x27;,&#x27;ECC key only supported for &#x27;+X509.SupportECCType2Names().join(&quot;,&quot;)+&#x27; curve&#x27;));</span><br><span class="hljs-string">			&#125;</span><br><span class="hljs-string">			if(isPub)&#123;</span><br><span class="hljs-string">				var b2=paramAsn1.sub[1].bytes;</span><br><span class="hljs-string">			&#125;else&#123;</span><br><span class="hljs-string">				var idx=isPKCS1?3:2;</span><br><span class="hljs-string">				var b2=paramAsn1.sub[idx].sub[0].bytes;</span><br><span class="hljs-string">			&#125;</span><br><span class="hljs-string">			if(b2[0]!=0x04)//0x04代表公钥未压缩 https://www.rfc-editor.org/rfc/rfc5480#section-2.2</span><br><span class="hljs-string">				return Err(&quot;ECC !0x04: &quot;+b2[0]);</span><br><span class="hljs-string">			var bits=(b2.length-1)/2;</span><br><span class="hljs-string">			rtv.param=&#123;</span><br><span class="hljs-string">				x:b2.slice(1,1+bits) //xy为公钥</span><br><span class="hljs-string">				,y:b2.slice(1+bits)</span><br><span class="hljs-string">				,d:isPub?null:paramAsn1.sub[1].bytes //D</span><br><span class="hljs-string">			&#125;;</span><br><span class="hljs-string">		&#125;else&#123;</span><br><span class="hljs-string">			return Err(Lang(&#x27;不支持的密钥类型：&#x27;,&#x27;Unsupported key type: &#x27;)+oid);</span><br><span class="hljs-string">		&#125;</span><br><span class="hljs-string">		rtv.isPKCS1=isPKCS1;</span><br><span class="hljs-string">		rtv.hasPrivate=!isPub;</span><br><span class="hljs-string">		rtv.pem=pem;</span><br><span class="hljs-string">		</span><br><span class="hljs-string">		//转成CryptoKey</span><br><span class="hljs-string">		var algorithm,jwk;</span><br><span class="hljs-string">		if(rtv.type==&quot;RSA&quot;)&#123;</span><br><span class="hljs-string">			algorithm=&#123; publicExponent: new Uint8Array(rtv.param.n.buffer)</span><br><span class="hljs-string">			,name:&quot;RSASSA-PKCS1-v1_5&quot;, modulusLength:+rtv.type2, hash:&quot;SHA-256&quot; &#125;;</span><br><span class="hljs-string">			jwk=&#123; kty:&quot;RSA&quot;, alg: &quot;RS256&quot; &#125;;</span><br><span class="hljs-string">		&#125;else if(rtv.type==&quot;ECC&quot;)&#123;</span><br><span class="hljs-string">			algorithm=&#123; name:&quot;ECDSA&quot;, namedCurve:rtv.type2 &#125;;</span><br><span class="hljs-string">			jwk=&#123; kty:&quot;EC&quot;, crv:rtv.type2 &#125;;</span><br><span class="hljs-string">		&#125;</span><br><span class="hljs-string">		jwk=Object.assign(jwk,&#123; ext:true, key_ops:[isPub?&quot;verify&quot;:&quot;sign&quot;] &#125;);</span><br><span class="hljs-string">		for(var k in rtv.param)</span><br><span class="hljs-string">			rtv.param[k]&amp;&amp;( jwk[k]=Bytes2UrlB64(rtv.param[k]) );</span><br><span class="hljs-string">		</span><br><span class="hljs-string">		crypto.subtle.importKey(</span><br><span class="hljs-string">			&quot;jwk&quot;,jwk,algorithm,true,[isPub?&quot;verify&quot;:&quot;sign&quot;]</span><br><span class="hljs-string">		).then(function(key)&#123;</span><br><span class="hljs-string">			rtv.key=key;</span><br><span class="hljs-string">			True(rtv);</span><br><span class="hljs-string">		&#125;).catch(function(e)&#123;</span><br><span class="hljs-string">			Err(Lang(&#x27;密钥转成CryptoKey失败：&#x27;,&#x27;Failed to convert key to CryptoKey: &#x27;)+e.message);</span><br><span class="hljs-string">		&#125;);</span><br><span class="hljs-string">	&#125;</span><br><span class="hljs-string">	//解析出来的公钥转换成JSON Web Key(JWK)</span><br><span class="hljs-string">	,PublicKeyJwk:function(info)&#123; // https://www.rfc-editor.org/rfc/rfc7638</span><br><span class="hljs-string">		var p=info.param;</span><br><span class="hljs-string">		if(info.type==&quot;RSA&quot;)&#123;</span><br><span class="hljs-string">			return &#123; e:Bytes2UrlB64(p.e), kty:&quot;RSA&quot;, n:Bytes2UrlB64(p.n) &#125;;</span><br><span class="hljs-string">		&#125;else if(info.type==&quot;ECC&quot;)&#123;</span><br><span class="hljs-string">			return &#123; crv:info.type2, kty:&quot;EC&quot;, x:Bytes2UrlB64(p.x),y:Bytes2UrlB64(p.y) &#125;;</span><br><span class="hljs-string">		&#125;else&#123;</span><br><span class="hljs-string">			throw new Error(&quot;Jwk: &quot;+info.type);</span><br><span class="hljs-string">		&#125;</span><br><span class="hljs-string">	&#125;</span><br><span class="hljs-string">	//解析出来的密钥或jwk对象转成PKCS#8格式 publicOnly：提供私钥时仅导出公钥 returnType：1 bytes，2 asn1，other pem</span><br><span class="hljs-string">	,KeyExport:function(info,publicOnly,returnType)&#123;</span><br><span class="hljs-string">		var tag=&quot;KeyExport: &quot;, S=ASN1.S,V=ASN1.V; //ASN1快捷创建方式</span><br><span class="hljs-string">		var param=info.param,type=param&amp;&amp;info.type,type2=info.type2;//解析出来的格式</span><br><span class="hljs-string">		if(!param)&#123;//jwk</span><br><span class="hljs-string">			if(info.kty)&#123;</span><br><span class="hljs-string">				type=info.kty==&quot;EC&quot;?&quot;ECC&quot;:info.kty;</span><br><span class="hljs-string">				if(type==&quot;ECC&quot;)type2=info.crv;</span><br><span class="hljs-string">			&#125;else throw new Error(tag+&quot;bad key&quot;);</span><br><span class="hljs-string">		&#125;</span><br><span class="hljs-string">		var keys=(type==&quot;ECC&quot;?&quot;x,y,d&quot;:&quot;n,e,d,p,q,dp,dq,qi&quot;).split(&quot;,&quot;);</span><br><span class="hljs-string">		if(!param)&#123;//jwk参数需转成二进制</span><br><span class="hljs-string">			param=&#123;&#125;;</span><br><span class="hljs-string">			for(var i=0;i&lt;keys.length;i++)&#123;</span><br><span class="hljs-string">				var k=keys[i],b64=info[k];</span><br><span class="hljs-string">				if(b64)param[k]=UrlB642Bytes(b64);</span><br><span class="hljs-string">			&#125;</span><br><span class="hljs-string">		&#125;</span><br><span class="hljs-string">		var useD=!publicOnly&amp;&amp;param.d;//导出私钥</span><br><span class="hljs-string">		</span><br><span class="hljs-string">		var bytes;//封装参数</span><br><span class="hljs-string">		if(type==&quot;RSA&quot;)&#123;</span><br><span class="hljs-string">			var asn1=S(0x30, V(0x02, param.n), V(0x02, param.e));</span><br><span class="hljs-string">			if(useD)&#123;//公钥只需n、e参数，私钥要全部</span><br><span class="hljs-string">				asn1.sub.splice(0,0,V(0x02, [0]));//开头插入版本号</span><br><span class="hljs-string">				for(var i=2;i&lt;keys.length;i++)&#123;</span><br><span class="hljs-string">					asn1.push(V(0x02, param[keys[i]]));</span><br><span class="hljs-string">				&#125;</span><br><span class="hljs-string">			&#125;</span><br><span class="hljs-string">			bytes=asn1.toBytes();</span><br><span class="hljs-string">		&#125;else if(type==&quot;ECC&quot;)&#123; //公钥x、y参数，私钥外面再套一层d</span><br><span class="hljs-string">			var pubB=new Uint8Array(1+param.x.length*2); pubB[0]=0x04;</span><br><span class="hljs-string">			pubB.set(param.x, 1);</span><br><span class="hljs-string">			pubB.set(param.y, 1+param.x.length);</span><br><span class="hljs-string">			if(useD)&#123;</span><br><span class="hljs-string">				bytes=S(0x30, V(0x02,[1]), V(0x04, param.d)</span><br><span class="hljs-string">					, S(0xA1, V(0x03, pubB)) ).toBytes();</span><br><span class="hljs-string">			&#125;else bytes=pubB;</span><br><span class="hljs-string">		&#125;else&#123; throw new Error(tag+type); &#125;</span><br><span class="hljs-string">		</span><br><span class="hljs-string">		var typeASN1=S(0x30 //封装类型</span><br><span class="hljs-string">			,V(0x06, ASN1.OID2Bytes(ASN1.OID[type]))</span><br><span class="hljs-string">			,type==&quot;RSA&quot;?V(0x05,[])</span><br><span class="hljs-string">					:V(0x06, ASN1.OID2Bytes(ASN1.OID[type2]))</span><br><span class="hljs-string">		);</span><br><span class="hljs-string">		</span><br><span class="hljs-string">		if(useD)&#123;//封装私钥</span><br><span class="hljs-string">			var keyA=S(0x30, V(0x02, [0]), typeASN1, V(0x04, bytes));</span><br><span class="hljs-string">		&#125;else&#123; //封装公钥</span><br><span class="hljs-string">			var keyA=S(0x30 ,typeASN1, V(0x03, bytes));</span><br><span class="hljs-string">		&#125;;</span><br><span class="hljs-string">		if(returnType==2) return keyA;</span><br><span class="hljs-string">		bytes=keyA.toBytes();</span><br><span class="hljs-string">		if(returnType==1) return bytes;</span><br><span class="hljs-string">		var str=Bytes2Base64(bytes).replace(/(.&#123;64&#125;)/g,&quot;$1\\n&quot;).trim();</span><br><span class="hljs-string">		var sp=useD?&quot;PRIVATE&quot;:&quot;PUBLIC&quot;;</span><br><span class="hljs-string">		return &#x27;-----BEGIN &#x27;+sp+&#x27; KEY-----\\n&#x27;+str+&#x27;\\n-----END &#x27;+sp+&#x27; KEY-----&#x27;;</span><br><span class="hljs-string">	&#125;</span><br><span class="hljs-string">	</span><br><span class="hljs-string">	</span><br><span class="hljs-string">	//创建证书请求CSR，提供私钥用于CSR签名</span><br><span class="hljs-string">	,CreateCSR:function(keyInfo,commonName,domains,True,False)&#123;</span><br><span class="hljs-string">		//CSR格式：rfc2986，太复杂了，直接拿openssl生成csr用ASN1.ParsePEM来观看格式</span><br><span class="hljs-string">		var S=ASN1.S,V=ASN1.V; //ASN1快捷创建方式</span><br><span class="hljs-string">		</span><br><span class="hljs-string">		//封装公钥</span><br><span class="hljs-string">		try&#123;</span><br><span class="hljs-string">			var pubA=X509.KeyExport(keyInfo, true, 2);</span><br><span class="hljs-string">		&#125;catch(e)&#123; return False(e.message) &#125;</span><br><span class="hljs-string">		</span><br><span class="hljs-string">		//封装域名列表扩展属性</span><br><span class="hljs-string">		var altNameA=S(0x30);</span><br><span class="hljs-string">		for(var i=0;i&lt;domains.length;i++)</span><br><span class="hljs-string">			altNameA.push(V(0x82, Str2Bytes(domains[i])));</span><br><span class="hljs-string">		</span><br><span class="hljs-string">		//组装CSR主体</span><br><span class="hljs-string">		var bodyA=S(0x30</span><br><span class="hljs-string">			,V(0x02, [0]) //版本号 固定值0</span><br><span class="hljs-string">			,S(0x30, S(0x31 ,S(0x30 //只提供一个属性：CN</span><br><span class="hljs-string">				,V(0x06, ASN1.OID2Bytes(&quot;2.5.4.3&quot;))</span><br><span class="hljs-string">				,V(0x0C, Str2Bytes(commonName))</span><br><span class="hljs-string">			)))</span><br><span class="hljs-string">			,pubA //公钥</span><br><span class="hljs-string">			,S(0xA0, S(0x30 //扩展属性，域名列表</span><br><span class="hljs-string">				,V(0x06, ASN1.OID2Bytes(&quot;1.2.840.113549.1.9.14&quot;))</span><br><span class="hljs-string">				,S(0x31, S(0x30, S(0x30</span><br><span class="hljs-string">					,V(0x06, ASN1.OID2Bytes(&quot;2.5.29.17&quot;))</span><br><span class="hljs-string">					,V(0x04, altNameA.toBytes())</span><br><span class="hljs-string">				)))</span><br><span class="hljs-string">			))</span><br><span class="hljs-string">		);</span><br><span class="hljs-string">		</span><br><span class="hljs-string">		//签名生成CSR rfc2315</span><br><span class="hljs-string">		var bodyBytes=bodyA.toBytes();</span><br><span class="hljs-string">		var algorithm=&#123;name:&quot;ECDSA&quot;, hash:&quot;SHA-256&quot;&#125;;</span><br><span class="hljs-string">		if(keyInfo.type==&quot;RSA&quot;)&#123;</span><br><span class="hljs-string">			algorithm=&#123;name:&quot;RSASSA-PKCS1-v1_5&quot;&#125;</span><br><span class="hljs-string">		&#125;</span><br><span class="hljs-string">		crypto.subtle.sign(algorithm, keyInfo.key, bodyBytes).then(function(arr)&#123;</span><br><span class="hljs-string">			var signBytes=new Uint8Array(arr);</span><br><span class="hljs-string">			if(keyInfo.type==&quot;ECC&quot;)&#123;//ECC分两段重新封装一下</span><br><span class="hljs-string">				var s1=signBytes.subarray(0,keyInfo.param.x.length);</span><br><span class="hljs-string">				var s2=signBytes.subarray(keyInfo.param.x.length);</span><br><span class="hljs-string">				signBytes=S(0x30, V(0x02,s1), V(0x02,s2)).toBytes();</span><br><span class="hljs-string">			&#125;</span><br><span class="hljs-string">			var csrA=S(0x30, bodyA</span><br><span class="hljs-string">				,S(0x30 //签名类型</span><br><span class="hljs-string">					,V(0x06, ASN1.OID2Bytes(ASN1.OID[&quot;SHA256_&quot;+keyInfo.type]))</span><br><span class="hljs-string">					,keyInfo.type==&quot;RSA&quot;?V(0x05,[]):null //ECC没有第二个参数</span><br><span class="hljs-string">				)</span><br><span class="hljs-string">				,V(0x03, signBytes)</span><br><span class="hljs-string">			);</span><br><span class="hljs-string">			var bytes=csrA.toBytes();</span><br><span class="hljs-string">			var str=Bytes2Base64(bytes).replace(/(.&#123;64&#125;)/g,&quot;$1\\n&quot;).trim();</span><br><span class="hljs-string">			True(&#x27;-----BEGIN CERTIFICATE REQUEST-----\\n&#x27;+str+&#x27;\\n-----END CERTIFICATE REQUEST-----&#x27;);</span><br><span class="hljs-string">		&#125;).catch(function(e)&#123;</span><br><span class="hljs-string">			False(&quot;CSR sign:&quot;+e.message);</span><br><span class="hljs-string">		&#125;);</span><br><span class="hljs-string">	&#125;</span><br><span class="hljs-string">&#125;;</span><br><span class="hljs-string"></span><br><span class="hljs-string"></span><br><span class="hljs-string"></span><br><span class="hljs-string">//简单实现ASN.1解析和封包</span><br><span class="hljs-string">window.ASN1=function(tag, bytes)&#123;</span><br><span class="hljs-string">	this.sub=[];</span><br><span class="hljs-string">	if(tag)this.setTag(tag);</span><br><span class="hljs-string">	if(bytes)this.setBytes(bytes);</span><br><span class="hljs-string">&#125;;</span><br><span class="hljs-string">ASN1.S=function(tag)&#123; //快捷创建容器类型，并提供任意多个子元素</span><br><span class="hljs-string">	var v=new ASN1(tag);</span><br><span class="hljs-string">	for(var i=1,a=arguments;i&lt;a.length;i++)&#123;a[i]&amp;&amp;v.push(a[i])&#125;</span><br><span class="hljs-string">	return v;</span><br><span class="hljs-string">&#125;;</span><br><span class="hljs-string">ASN1.V=function(tag, bytes)&#123; //快捷创建值类型</span><br><span class="hljs-string">	return new ASN1(tag, bytes)	</span><br><span class="hljs-string">&#125;;</span><br><span class="hljs-string">ASN1.ParsePEM=function(pem)&#123;</span><br><span class="hljs-string">	return new ASN1().parsePEM(pem);</span><br><span class="hljs-string">&#125;;</span><br><span class="hljs-string">ASN1.TagNames=&#123;</span><br><span class="hljs-string">	&#x27;01&#x27;:&#x27;BOOLEAN&#x27;,&#x27;02&#x27;:&#x27;INTEGER&#x27;,&#x27;03&#x27;:&#x27;BIT_STRING&#x27;</span><br><span class="hljs-string">	,&#x27;04&#x27;:&#x27;OCTET_STRING&#x27;,&#x27;05&#x27;:&#x27;NULL&#x27;,&#x27;06&#x27;:&#x27;OID&#x27;</span><br><span class="hljs-string">	,&#x27;0C&#x27;:&#x27;UTF8String&#x27;,&#x27;13&#x27;:&#x27;Printable_String&#x27;</span><br><span class="hljs-string">	,&#x27;17&#x27;:&#x27;UTCTime&#x27;,&#x27;18&#x27;:&#x27;GeneralizedTime&#x27;,&#x27;30&#x27;:&#x27;SEQUENCE&#x27;,&#x27;31&#x27;:&#x27;SET&#x27;</span><br><span class="hljs-string">&#125;;</span><br><span class="hljs-string">ASN1.OID=&#123;</span><br><span class="hljs-string">	 &quot;1.2.840.113549.1.1.1&quot;:&quot;RSA&quot;</span><br><span class="hljs-string">	,&quot;1.2.840.113549.1.1.11&quot;:&quot;SHA256_RSA&quot;</span><br><span class="hljs-string">	,&quot;1.2.840.10045.2.1&quot;:&quot;ECC&quot;</span><br><span class="hljs-string">	,&quot;1.2.840.10045.4.3.2&quot;:&quot;SHA256_ECC&quot;</span><br><span class="hljs-string">	,&quot;1.2.840.10045.3.1.7&quot;:&quot;P-256&quot; //secp256r1 | prime256v1</span><br><span class="hljs-string">	,&quot;1.3.132.0.34&quot;:&quot;P-384&quot; //secp384r1</span><br><span class="hljs-string">	,&quot;1.3.132.0.35&quot;:&quot;P-521&quot; //secp521r1</span><br><span class="hljs-string">&#125;;	for(var k in ASN1.OID)ASN1.OID[ASN1.OID[k]]=k;</span><br><span class="hljs-string">ASN1.OID2Bytes=function(oid)&#123;</span><br><span class="hljs-string">	var arr = oid.split(&#x27;.&#x27;), byts = [];</span><br><span class="hljs-string">	var v0=+arr[0],v1=+arr[1];</span><br><span class="hljs-string">	if (!/^[\\d\\.]+$/.test(oid)|| arr.length &lt; 3 || v0 &gt; 2 || v0 * 40 + v1 &gt; 0xff)</span><br><span class="hljs-string">		throw new Error(&quot;bad oid: &quot;+oid);</span><br><span class="hljs-string">	byts.push(v0 * 40 + v1);</span><br><span class="hljs-string">	for (var i = 2, len = arr.length; i &lt; len; i++) &#123;</span><br><span class="hljs-string">		var num = +arr[i], bits = [];</span><br><span class="hljs-string">		while (num &gt;= 0x80) &#123; bits.push(num % 0x80); num /= 0x80; &#125;</span><br><span class="hljs-string">		bits.push(num); bits.reverse();</span><br><span class="hljs-string">		for (var j = 0, jl = bits.length - 1; j &lt;= jl; j++) &#123;</span><br><span class="hljs-string">			if (j != jl) &#123;</span><br><span class="hljs-string">				byts.push(0x80 + bits[j]);</span><br><span class="hljs-string">			&#125; else &#123;</span><br><span class="hljs-string">				byts.push(bits[j]);</span><br><span class="hljs-string">			&#125;</span><br><span class="hljs-string">		&#125;</span><br><span class="hljs-string">	&#125;</span><br><span class="hljs-string">	return new Uint8Array(byts);</span><br><span class="hljs-string">&#125;;</span><br><span class="hljs-string">ASN1.OID2Text=function(bytes)&#123;</span><br><span class="hljs-string">	var str = &quot;&quot;, b0 = bytes[0];</span><br><span class="hljs-string">	var m = b0 &lt; 80 ? b0 &lt; 40 ? 0 : 1 : 2;</span><br><span class="hljs-string">	str+=m+&quot;.&quot;+(b0 - m * 40);</span><br><span class="hljs-string">	for (var i = 1, len = bytes.length; i &lt; len; ) &#123;</span><br><span class="hljs-string">		var num = 0;</span><br><span class="hljs-string">		for (; i &lt; len; ) &#123;</span><br><span class="hljs-string">			var bit = bytes[i++]; num *= 0x80;</span><br><span class="hljs-string">			if (bit &gt;= 0x80) num += bit - 0x80;</span><br><span class="hljs-string">			else &#123; num += bit; break; &#125;</span><br><span class="hljs-string">		&#125;</span><br><span class="hljs-string">		str+=&quot;.&quot;+num;</span><br><span class="hljs-string">	&#125;</span><br><span class="hljs-string">	return str;</span><br><span class="hljs-string">&#125;;</span><br><span class="hljs-string">ASN1.ParseSize=function(pos, bytes)&#123; //简单解析长度数值</span><br><span class="hljs-string">	var bitCount=bytes[pos[0]++],size=0;</span><br><span class="hljs-string">	if(bitCount &lt; 0x80) size=bitCount;</span><br><span class="hljs-string">	else if(bitCount == 0x80) size=-404; //不定长，需搜索两个0结尾，直接拒绝支持</span><br><span class="hljs-string">	else for(var i=0,len=bitCount&amp;0x7F;i&lt;len;i++)</span><br><span class="hljs-string">		size=size*256+bytes[pos[0]++];</span><br><span class="hljs-string">	if(size&lt;0 || size&gt;bytes.length-pos[0])throw new Error(&quot;ASN.1 Bad size &quot;+size);</span><br><span class="hljs-string">	return size;</span><br><span class="hljs-string">&#125;;</span><br><span class="hljs-string">ASN1.ParseBlock=function(pos, bytes, sub)&#123; //简单解析一块子内容</span><br><span class="hljs-string">	sub=sub||[];</span><br><span class="hljs-string">	while(pos[0]&lt;bytes.length)&#123;</span><br><span class="hljs-string">		var idx0=pos[0],item=new ASN1();</span><br><span class="hljs-string">		var tag=bytes[pos[0]++],size=ASN1.ParseSize(pos, bytes);</span><br><span class="hljs-string">		if((tag&amp;0x20) != 0)&#123;//结构化容器，嵌套调用</span><br><span class="hljs-string">			item.parse(bytes.slice(idx0, pos[0]+size));</span><br><span class="hljs-string">		&#125;else&#123;//普通内容</span><br><span class="hljs-string">			var chunk=bytes.slice(pos[0], pos[0]+size);</span><br><span class="hljs-string">			if(tag==0x02 || tag==0x03)&#123;//去掉开头补的0，正整数</span><br><span class="hljs-string">				if(chunk.length&gt;1 &amp;&amp; chunk[0]==0)&#123;</span><br><span class="hljs-string">					chunk=chunk.slice(1);</span><br><span class="hljs-string">				&#125;</span><br><span class="hljs-string">			&#125;</span><br><span class="hljs-string">			item.setTag(tag);</span><br><span class="hljs-string">			item.setBytes(chunk);</span><br><span class="hljs-string">		&#125;</span><br><span class="hljs-string">		sub.push(item);</span><br><span class="hljs-string">		pos[0]+=size;</span><br><span class="hljs-string">	&#125;</span><br><span class="hljs-string">	return sub;</span><br><span class="hljs-string">&#125;;</span><br><span class="hljs-string">ASN1.PEM2Bytes=function(pem)&#123;</span><br><span class="hljs-string">	pem=pem.replace(/[\\s\\r\\n]/g,&quot;&quot;);</span><br><span class="hljs-string">	var m=/^-+BEGIN\\w*-+([^-]+)-+END\\w+-+$/i.exec(pem);</span><br><span class="hljs-string">	try&#123;</span><br><span class="hljs-string">		return Base642Bytes(m[1]);</span><br><span class="hljs-string">	&#125;catch(e)&#123;</span><br><span class="hljs-string">		throw new Error(Lang(&#x27;不是pem格式。&#x27;,&#x27;Not a pem format.&#x27;));</span><br><span class="hljs-string">	&#125;</span><br><span class="hljs-string">&#125;;</span><br><span class="hljs-string">ASN1.prototype=&#123;</span><br><span class="hljs-string">	setTag:function(tag)&#123;</span><br><span class="hljs-string">		var txt=(tag&lt;16?&quot;0&quot;:&quot;&quot;)+tag.toString(16).toUpperCase();</span><br><span class="hljs-string">		this.tag=tag;</span><br><span class="hljs-string">		this.tagTxt=txt;</span><br><span class="hljs-string">		this.tagName=ASN1.TagNames[txt]||&quot;0x&quot;+txt;</span><br><span class="hljs-string">	&#125;</span><br><span class="hljs-string">	,setBytes:function(bytes)&#123;</span><br><span class="hljs-string">		if(bytes.length==null||(bytes.slice==null &amp;&amp; bytes.subarray==null))</span><br><span class="hljs-string">			throw new Error(&quot;Not Array&quot;);</span><br><span class="hljs-string">		if(this.tag==0x06) this.oid=ASN1.OID2Text(bytes);</span><br><span class="hljs-string">		if(this.tag==0x0C||this.tag==0x13) this.string=Bytes2Str(bytes);</span><br><span class="hljs-string">		this.bytes=bytes;</span><br><span class="hljs-string">	&#125;</span><br><span class="hljs-string">	,push:function(asn1)&#123;</span><br><span class="hljs-string">		if(!asn1.parsePEM) throw new Error(&quot;Not ASN1&quot;);</span><br><span class="hljs-string">		this.sub.push(asn1);</span><br><span class="hljs-string">		return this;</span><br><span class="hljs-string">	&#125;</span><br><span class="hljs-string">	,parsePEM:function(pem)&#123;</span><br><span class="hljs-string">		return this.parse(ASN1.PEM2Bytes(pem));</span><br><span class="hljs-string">	&#125;</span><br><span class="hljs-string">	,parse:function(bytes)&#123;</span><br><span class="hljs-string">		var pos=[0];</span><br><span class="hljs-string">		//最外层必须是个结构化容器，第6位为1，为0为基础类型 https://www.jianshu.com/p/ce7ab5f3f33a</span><br><span class="hljs-string">		if((bytes[0]&amp;0x20) == 0) throw new Error(&quot;ASN.1 parse: Not SEQ&quot;);</span><br><span class="hljs-string">		this.setTag(bytes[pos[0]++]);</span><br><span class="hljs-string">		var size=ASN1.ParseSize(pos, bytes);</span><br><span class="hljs-string">		bytes=bytes.slice(pos[0], pos[0]+size);</span><br><span class="hljs-string">		this.setBytes(bytes);</span><br><span class="hljs-string">		//解析子内容</span><br><span class="hljs-string">		ASN1.ParseBlock([0], bytes, this.sub);</span><br><span class="hljs-string">		return this;</span><br><span class="hljs-string">	&#125;</span><br><span class="hljs-string">	,toBytes:function(innerOlny)&#123;</span><br><span class="hljs-string">		var chunks=[],len=0;</span><br><span class="hljs-string">		if(this.sub.length)&#123;//容器类型，递归调用</span><br><span class="hljs-string">			for(var i=0;i&lt;this.sub.length;i++)&#123;</span><br><span class="hljs-string">				var arr=this.sub[i].toBytes();</span><br><span class="hljs-string">				chunks.push(arr); len+=arr.length;</span><br><span class="hljs-string">			&#125;</span><br><span class="hljs-string">		&#125;else if(this.bytes&amp;&amp;this.bytes.length)&#123;//简单类型</span><br><span class="hljs-string">			if(this.tag==0x02 &amp;&amp; this.bytes[0] &gt;= 0x80 || this.tag==0x03)&#123;</span><br><span class="hljs-string">				chunks.push([0]);len++;  //0x02负数 0x03需要开头补0</span><br><span class="hljs-string">			&#125;</span><br><span class="hljs-string">			chunks.push(this.bytes); len+=this.bytes.length;</span><br><span class="hljs-string">		&#125;</span><br><span class="hljs-string">		if(!innerOlny)&#123;//添加标签和长度</span><br><span class="hljs-string">			var arr=[], num=len;</span><br><span class="hljs-string">			if(num&lt;0x80) arr.push(num);</span><br><span class="hljs-string">			else &#123;</span><br><span class="hljs-string">				while(num&gt;0xff)&#123; arr.push(num&amp;0xff); num=num&gt;&gt;8; &#125;</span><br><span class="hljs-string">				arr.push(num&amp;0xff); arr.push(0x80+arr.length);</span><br><span class="hljs-string">			&#125;</span><br><span class="hljs-string">			arr.push(this.tag); arr.reverse();</span><br><span class="hljs-string">			chunks.splice(0,0,arr); len+=arr.length;</span><br><span class="hljs-string">		&#125;</span><br><span class="hljs-string">		var bytes=new Uint8Array(len),n=0;</span><br><span class="hljs-string">		for(var i=0;i&lt;chunks.length;i++)&#123;</span><br><span class="hljs-string">			var arr=chunks[i];</span><br><span class="hljs-string">			bytes.set(arr, n); n+=arr.length;</span><br><span class="hljs-string">		&#125;</span><br><span class="hljs-string">		return bytes;</span><br><span class="hljs-string">	&#125;</span><br><span class="hljs-string">&#125;;</span><br><span class="hljs-string"></span><br><span class="hljs-string">&#125;)();</span><br><span class="hljs-string">&lt;/script&gt;</span><br><span class="hljs-string"></span><br><span class="hljs-string"></span><br><span class="hljs-string"></span><br><span class="hljs-string"></span><br><span class="hljs-string"></span><br><span class="hljs-string"></span><br><span class="hljs-string"></span><br><span class="hljs-string">&lt;script&gt;</span><br><span class="hljs-string">//===========================================================</span><br><span class="hljs-string">//================= Common functions ==================</span><br><span class="hljs-string">//===========================================================</span><br><span class="hljs-string">//LICENSE: GPL-3.0, https://github.com/xiangyuecn/ACME-HTML-Web-Browser-Client</span><br><span class="hljs-string">(function()&#123;</span><br><span class="hljs-string">&quot;use strict&quot;;</span><br><span class="hljs-string"></span><br><span class="hljs-string">/************** Language **************/</span><br><span class="hljs-string">window.LangCur=/\\b(zh|cn)\\b/i.test(navigator.language)?&quot;cn&quot;:&quot;en&quot;;</span><br><span class="hljs-string">window.Lang=function(cn,en,txt)&#123;</span><br><span class="hljs-string">	if((cn||en) &amp;&amp; (!cn||!en))throw new Error(&quot;Lang bad args&quot;);</span><br><span class="hljs-string">	if(txt)return LangCur==&quot;cn&quot;?cn:en;</span><br><span class="hljs-string">	var html=&quot;&quot;,ks=&#123;cn:cn,en:en&#125;;</span><br><span class="hljs-string">	for(var k in ks)&#123;</span><br><span class="hljs-string">		html+=(LangCur!=k?&#x27;&lt;!--LangHide1--&gt;&#x27;:&#x27;&#x27;)</span><br><span class="hljs-string">			+&#x27;&lt;span class=&quot;lang&#x27;+k.toUpperCase()</span><br><span class="hljs-string">			+&#x27;&quot; style=&quot;&#x27;+(LangCur==k?&#x27;&#x27;:&#x27;display:none&#x27;)</span><br><span class="hljs-string">			+&#x27;&quot;&gt;&#x27;+ks[k]+&#x27;&lt;/span&gt;&#x27;</span><br><span class="hljs-string">			+(LangCur!=k?&#x27;&lt;!--LangHide2--&gt;&#x27;:&#x27;&#x27;);</span><br><span class="hljs-string">	&#125;</span><br><span class="hljs-string">	return html;</span><br><span class="hljs-string">&#125;;</span><br><span class="hljs-string">window.LangReview=function(cls)&#123;</span><br><span class="hljs-string">	var el=$(cls||&quot;body&quot;);</span><br><span class="hljs-string">	el.find(&quot;.langCN&quot;)[LangCur==&quot;cn&quot;?&quot;show&quot;:&quot;hide&quot;]();</span><br><span class="hljs-string">	el.find(&quot;.langEN&quot;)[LangCur!=&quot;cn&quot;?&quot;show&quot;:&quot;hide&quot;]();</span><br><span class="hljs-string">	var inputs=el.find(&quot;.inputLang&quot;);</span><br><span class="hljs-string">	for(var i=0;i&lt;inputs.length;i++)</span><br><span class="hljs-string">		inputs[i].setAttribute(&quot;placeholder&quot;,inputs[i].getAttribute(&quot;placeholder-&quot;+LangCur));</span><br><span class="hljs-string">&#125;;</span><br><span class="hljs-string">window.LangClick=function(lang)&#123;</span><br><span class="hljs-string">	LangCur=lang;</span><br><span class="hljs-string">	LangReview();</span><br><span class="hljs-string">	$(&quot;.langBtn&quot;).css(&quot;color&quot;,null);</span><br><span class="hljs-string">	$(&quot;.langBtn_&quot;+lang).css(&quot;color&quot;,&quot;#000&quot;);</span><br><span class="hljs-string">	$(&quot;body&quot;).css(&quot;wordBreak&quot;,lang==&quot;cn&quot;?&quot;break-all&quot;:null);</span><br><span class="hljs-string">	</span><br><span class="hljs-string">	if(!document.titleLang)document.titleLang=document.title;</span><br><span class="hljs-string">	var arr=document.titleLang.split(&quot;|&quot;),t1=[],t2=[];</span><br><span class="hljs-string">	for(var i=0;i&lt;arr.length;i++)</span><br><span class="hljs-string">		if(/[^\\x00-\\xff]/.test(arr[i]) == (LangCur==&quot;cn&quot;))t1.push(arr[i].trim());</span><br><span class="hljs-string">		else t2.push(arr[i].trim());</span><br><span class="hljs-string">	document.title=t1.concat(t2).join(&quot; | &quot;);</span><br><span class="hljs-string">&#125;;</span><br><span class="hljs-string"></span><br><span class="hljs-string"></span><br><span class="hljs-string">/************** Console log output **************/</span><br><span class="hljs-string">window.CLog=function(tag, color, msg)&#123;</span><br><span class="hljs-string">	var now=new Date();</span><br><span class="hljs-string">	var t=(&quot;0&quot;+now.getMinutes()).substr(-2)</span><br><span class="hljs-string">		+&quot;:&quot;+(&quot;0&quot;+now.getSeconds()).substr(-2)</span><br><span class="hljs-string">		+&quot;.&quot;+(&quot;00&quot;+now.getMilliseconds()).substr(-3);</span><br><span class="hljs-string">	msg=msg.replace(/&lt;!--LangHide1[\\S\\s]+?LangHide2--&gt;/g,&quot;&quot;);//去掉没有显示的语言</span><br><span class="hljs-string">	msg=msg.replace(/&lt;[^&gt;]+&gt;/g,&quot;&quot;);</span><br><span class="hljs-string">	var arr=[&quot;[&quot;+t+&quot; &quot;+tag+&quot;]&quot;+msg];</span><br><span class="hljs-string">	for(var i=3;i&lt;arguments.length;i++)&#123;</span><br><span class="hljs-string">		arr.push(arguments[i]);</span><br><span class="hljs-string">	&#125;;</span><br><span class="hljs-string">	var fn=color==1?console.error:color==3?console.warn:color==4?console.debug:console.log;</span><br><span class="hljs-string">	fn.apply(console,arr);</span><br><span class="hljs-string">	return msg;</span><br><span class="hljs-string">&#125;;</span><br><span class="hljs-string"></span><br><span class="hljs-string"></span><br><span class="hljs-string">/************** $ Selector / like jQuery **************/</span><br><span class="hljs-string">(function()&#123;</span><br><span class="hljs-string">window.$=function(cls)&#123; if(cls&amp;&amp;cls.is$) return cls; return new fn(cls) &#125;</span><br><span class="hljs-string">var fn=function(cls,node)&#123;</span><br><span class="hljs-string">	this.length=0;</span><br><span class="hljs-string">	if(!cls)return;</span><br><span class="hljs-string">	if(cls.appendChild)&#123;this.push(cls); return&#125;</span><br><span class="hljs-string">	var arr=(node||document).querySelectorAll(cls);</span><br><span class="hljs-string">	for(var i=0;i&lt;arr.length;i++)this.push(arr[i]);</span><br><span class="hljs-string">&#125;;</span><br><span class="hljs-string">fn.prototype=&#123;</span><br><span class="hljs-string">	is$:1</span><br><span class="hljs-string">	,push:function(val)&#123; this[this.length++]=val &#125;</span><br><span class="hljs-string">	,find:function(cls)&#123; var el0=this[0]; return new fn(el0?cls:&quot;&quot;,el0) &#125;</span><br><span class="hljs-string">	,val:function(val)&#123; return this.prop(&quot;value&quot;,val) &#125;</span><br><span class="hljs-string">	,hide:function()&#123; return this.css(&quot;display&quot;,&quot;none&quot;) &#125;</span><br><span class="hljs-string">	,show:function(display)&#123; return this.css(&quot;display&quot;,display===undefined?null:display) &#125;</span><br><span class="hljs-string">	</span><br><span class="hljs-string">	,html:function(html)&#123;</span><br><span class="hljs-string">		var el0=this[0];</span><br><span class="hljs-string">		if(html===undefined)return el0&amp;&amp;el0.innerHTML||&quot;&quot;;</span><br><span class="hljs-string">		for(var i=0;i&lt;this.length;i++) this[i].innerHTML=html;</span><br><span class="hljs-string">		return this;</span><br><span class="hljs-string">	&#125;</span><br><span class="hljs-string">	,append:function(html)&#123; return this._end(html) &#125;</span><br><span class="hljs-string">	,prepend:function(html)&#123; return this._end(html,1) &#125;</span><br><span class="hljs-string">	,_end:function(html,prep)&#123;</span><br><span class="hljs-string">		var el0=this[0];</span><br><span class="hljs-string">		if(html &amp;&amp; el0)&#123;</span><br><span class="hljs-string">			var nodes=html;</span><br><span class="hljs-string">			if(typeof(html)==&quot;string&quot;)&#123;</span><br><span class="hljs-string">				var div=document.createElement(&quot;div&quot;);</span><br><span class="hljs-string">				div.innerHTML=html;</span><br><span class="hljs-string">				nodes=[];</span><br><span class="hljs-string">				for(var i=0;i&lt;div.childNodes.length;i++)nodes.push(div.childNodes[i]);</span><br><span class="hljs-string">			&#125;else if(html.appendChild)&#123;</span><br><span class="hljs-string">				nodes=[html];</span><br><span class="hljs-string">			&#125;</span><br><span class="hljs-string">			if(prep)prep=el0.firstChild;</span><br><span class="hljs-string">			for(var i=0;i&lt;nodes.length;i++)&#123;</span><br><span class="hljs-string">				if(prep) el0.insertBefore(nodes[i],prep);</span><br><span class="hljs-string">				else el0.appendChild(nodes[i])</span><br><span class="hljs-string">			&#125;</span><br><span class="hljs-string">		&#125;</span><br><span class="hljs-string">		return this;</span><br><span class="hljs-string">	&#125;</span><br><span class="hljs-string">	,prop:function(key,val)&#123;</span><br><span class="hljs-string">		var el0=this[0];</span><br><span class="hljs-string">		if(val===undefined)return el0&amp;&amp;el0[key];</span><br><span class="hljs-string">		for(var i=0;i&lt;this.length;i++) this[i][key]=val;</span><br><span class="hljs-string">		return this;</span><br><span class="hljs-string">	&#125;</span><br><span class="hljs-string">	,attr:function(key,val)&#123;</span><br><span class="hljs-string">		var el0=this[0];</span><br><span class="hljs-string">		if(val===undefined)return el0&amp;&amp;el0.getAttribute(key);</span><br><span class="hljs-string">		for(var i=0;i&lt;this.length;i++)&#123;</span><br><span class="hljs-string">			if(val==null) this[i].removeAttribute(key);</span><br><span class="hljs-string">			else this[i].setAttribute(key,val);</span><br><span class="hljs-string">		&#125;</span><br><span class="hljs-string">		return this;</span><br><span class="hljs-string">	&#125;</span><br><span class="hljs-string">	,css:function(key,val)&#123;</span><br><span class="hljs-string">		for(var i=0;i&lt;this.length;i++)</span><br><span class="hljs-string">			this[i].style[key]=val;</span><br><span class="hljs-string">		return this;</span><br><span class="hljs-string">	&#125;</span><br><span class="hljs-string">	,bind:function(type,fn)&#123;</span><br><span class="hljs-string">		for(var i=0;i&lt;this.length;i++)</span><br><span class="hljs-string">			this[i].addEventListener(type,fn);</span><br><span class="hljs-string">		return this;</span><br><span class="hljs-string">	&#125;</span><br><span class="hljs-string">&#125;;</span><br><span class="hljs-string">&#125;)();</span><br><span class="hljs-string"></span><br><span class="hljs-string"></span><br><span class="hljs-string">/************** functions **************/</span><br><span class="hljs-string">window.FormatText=function(str)&#123;</span><br><span class="hljs-string">	return str.replace(/[&amp;&lt;&gt;=&#x27;&quot;]/g,function(a)&#123; return &quot;&amp;#&quot; + a.charCodeAt(0) + &quot;;&quot; &#125;);</span><br><span class="hljs-string">&#125;;</span><br><span class="hljs-string"></span><br><span class="hljs-string">window.Str2Bytes=function(str)&#123;</span><br><span class="hljs-string">	str=unescape(encodeURIComponent(str));</span><br><span class="hljs-string">	var u8arr=new Uint8Array(str.length);</span><br><span class="hljs-string">	for(var i=0;i&lt;str.length;i++)u8arr[i]=str.charCodeAt(i);</span><br><span class="hljs-string">	return u8arr;</span><br><span class="hljs-string">&#125;;</span><br><span class="hljs-string">window.Bytes2Str=function(bytes)&#123;</span><br><span class="hljs-string">	var str=&quot;&quot;;</span><br><span class="hljs-string">	for(var i=0;i&lt;bytes.length;i++) str+=String.fromCharCode(bytes[i]);</span><br><span class="hljs-string">	return decodeURIComponent(escape(str));</span><br><span class="hljs-string">&#125;;</span><br><span class="hljs-string">window.Json2UrlB64=function(data)&#123;</span><br><span class="hljs-string">	return Bytes2UrlB64(JSON.stringify(data));</span><br><span class="hljs-string">&#125;;</span><br><span class="hljs-string">window.Base642Bytes=function(b64)&#123;</span><br><span class="hljs-string">	var str=atob(b64);</span><br><span class="hljs-string">	var u8arr=new Uint8Array(str.length);</span><br><span class="hljs-string">	for(var i=0;i&lt;str.length;i++)u8arr[i]=str.charCodeAt(i);</span><br><span class="hljs-string">	return u8arr;</span><br><span class="hljs-string">&#125;;</span><br><span class="hljs-string">window.UrlB642Bytes=function(str)&#123;</span><br><span class="hljs-string">	str=str.replace(/_/g,&quot;\\/&quot;).replace(/-/g,&quot;+&quot;);</span><br><span class="hljs-string">	while(str.length%4)str+=&quot;=&quot;;</span><br><span class="hljs-string">	return Base642Bytes(str);</span><br><span class="hljs-string">&#125;;</span><br><span class="hljs-string">window.Bytes2UrlB64=function(bytes)&#123;//二进制数组转成url base64</span><br><span class="hljs-string">	return Bytes2Base64(bytes).replace(/\\//g,&quot;_&quot;).replace(/\\+/g,&quot;-&quot;).replace(/=/g,&quot;&quot;);</span><br><span class="hljs-string">&#125;;</span><br><span class="hljs-string">window.Bytes2Base64=function(bytes)&#123;</span><br><span class="hljs-string">	var str=&quot;&quot;;</span><br><span class="hljs-string">	if(typeof(bytes)==&quot;string&quot;)&#123;</span><br><span class="hljs-string">		str=unescape(encodeURIComponent(bytes));</span><br><span class="hljs-string">	&#125;else&#123;</span><br><span class="hljs-string">		if(bytes instanceof ArrayBuffer) bytes=new Uint8Array(bytes);</span><br><span class="hljs-string">		for(var i=0;i&lt;bytes.length;i++) str+=String.fromCharCode(bytes[i]);</span><br><span class="hljs-string">	&#125;</span><br><span class="hljs-string">	return btoa(str);</span><br><span class="hljs-string">&#125;;</span><br><span class="hljs-string"></span><br><span class="hljs-string">&#125;)();</span><br><span class="hljs-string">&lt;/script&gt;</span><br><span class="hljs-string"></span><br><span class="hljs-string"></span><br><span class="hljs-string">&lt;script&gt;</span><br><span class="hljs-string">//===========================================</span><br><span class="hljs-string">//================= Launch ==================</span><br><span class="hljs-string">//===========================================</span><br><span class="hljs-string">//LICENSE: GPL-3.0, https://github.com/xiangyuecn/ACME-HTML-Web-Browser-Client</span><br><span class="hljs-string">(function()&#123;</span><br><span class="hljs-string">&quot;use strict&quot;;</span><br><span class="hljs-string"></span><br><span class="hljs-string">var msg=&quot;&quot;;</span><br><span class="hljs-string">try&#123;</span><br><span class="hljs-string">	window.PageRawHTML=window.PageRawHTML||document.documentElement.outerHTML;</span><br><span class="hljs-string">	if(window.top!=window)&#123;</span><br><span class="hljs-string">		msg=Lang(</span><br><span class="hljs-string">			 &#x27;不允许在IFrame内显示本页面，请直接通过网址访问！&#x27;</span><br><span class="hljs-string">			,&#x27;This page is not allowed to be displayed in IFrame, please visit it directly through the website!&#x27;);</span><br><span class="hljs-string">		throw new Error();</span><br><span class="hljs-string">	&#125;</span><br><span class="hljs-string">	var SupportCrypto=false;</span><br><span class="hljs-string">	eval(&#x27;SupportCrypto=!!crypto.subtle.sign&#x27;);</span><br><span class="hljs-string">	eval(&#x27;\`\`;(async function()&#123;class a&#123;&#125;&#125;)&#x27;);</span><br><span class="hljs-string">&#125;catch(e)&#123;</span><br><span class="hljs-string">	if(!msg &amp;&amp; !SupportCrypto &amp;&amp; window.isSecureContext===false)&#123;</span><br><span class="hljs-string">		msg=Lang(&#x27;浏览器禁止不安全页面调用Crypto功能，可开启https解决，或使用localhost、file://访问&#x27;, &#x27;The browser prohibits unsafe pages from calling Crypto function. You can enable https to solve the problem, or use localhost, file:// to access&#x27;);</span><br><span class="hljs-string">	&#125;</span><br><span class="hljs-string">	if(!msg)&#123;</span><br><span class="hljs-string">		msg=Lang(&#x27;浏览器版本太低&#x27;+(SupportCrypto?&#x27;&#x27;:&#x27;（不支持Crypto）&#x27;)+&#x27;，请换一个浏览器再试！&#x27;, &#x27;The browser version is too low&#x27;+(SupportCrypto?&#x27;&#x27;:&#x27; (Crypto is not supported)&#x27;)+&#x27;. Please change another browser and try again!&#x27;);</span><br><span class="hljs-string">	&#125;</span><br><span class="hljs-string">	document.body.innerHTML=&#x27;&lt;div style=&quot;font-size:32px;color:red;font-weight:bold;text-align:center;padding-top:100px&quot;&gt;&#x27;+msg+&#x27;&lt;/div&gt;&#x27;;</span><br><span class="hljs-string">	return;</span><br><span class="hljs-string">&#125;</span><br><span class="hljs-string">$(&quot;.main&quot;).html($(&quot;.main&quot;).html()); //彻底干掉输入框自动完成</span><br><span class="hljs-string">$(&quot;input,textarea,select&quot;).attr(&quot;autocomplete&quot;,&quot;off&quot;);</span><br><span class="hljs-string"></span><br><span class="hljs-string">$(&quot;.main-load&quot;).hide();</span><br><span class="hljs-string">$(&quot;.main&quot;).show();</span><br><span class="hljs-string">LangClick(LangCur);</span><br><span class="hljs-string"></span><br><span class="hljs-string">initMainUI();</span><br><span class="hljs-string"></span><br><span class="hljs-string">&#125;)();</span><br><span class="hljs-string">&lt;/script&gt;&lt;/body&gt;&lt;/html&gt;`</span>;<br>(<span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)&#123;<br>		<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">clear</span>();<br>		<span class="hljs-variable language_">document</span>.<span class="hljs-property">head</span>.<span class="hljs-property">innerHTML</span>=<span class="hljs-regexp">/&lt;head[^&gt;]*&gt;([\S\s]+?)&lt;\/head&gt;/i</span>.<span class="hljs-title function_">exec</span>(<span class="hljs-title class_">PageRawHTML</span>)[<span class="hljs-number">1</span>];<br>		<span class="hljs-variable language_">document</span>.<span class="hljs-property">body</span>.<span class="hljs-property">innerHTML</span>=<span class="hljs-regexp">/&lt;body[^&gt;]*&gt;([\S\s]+)&lt;\/body&gt;/i</span>.<span class="hljs-title function_">exec</span>(<span class="hljs-title class_">PageRawHTML</span>)[<span class="hljs-number">1</span>];<br>		<span class="hljs-keyword">var</span> js=<span class="hljs-regexp">/&lt;script[^&gt;]*&gt;([\S\s]+?)&lt;\/script&gt;/ig</span>,m;<br>		<span class="hljs-keyword">while</span>(m=js.<span class="hljs-title function_">exec</span>(<span class="hljs-title class_">PageRawHTML</span>)) <span class="hljs-built_in">eval</span>.<span class="hljs-title function_">call</span>(<span class="hljs-variable language_">window</span>, m[<span class="hljs-number">1</span>]);<br>	&#125;)()<br></code></pre></td></tr></table></figure>



<p>等待出现：<strong>读取服务目录成功，</strong>请进行下一步操作。 URL&#x3D;<a target="_blank" rel="noopener" href="https://acme.zerossl.com/v2/DV90/directory">https://acme.zerossl.com/v2/DV90/directory</a></p>
<p>即已经选择ZeroSSL作为服务商。</p>
<h3 id="步骤二：证书配置"><a href="#步骤二：证书配置" class="headerlink" title="步骤二：证书配置"></a>步骤二：证书配置</h3><p>提示：如果上次申请过证书，可以拖拽已下载保存的记录LOG文件到本页面，将自动填充上次的配置信息。</p>
<p>在“证书中要包含的域名：”中填写你要签发的域名。</p>
<p>泛域名填写方式：example.com,*.example.com</p>
<p>单域名填写方式：<a target="_blank" rel="noopener" href="http://www.example.com/">www.example.com</a></p>
<p>多域名合并：<a target="_blank" rel="noopener" href="http://www.example.com,site1.example.com,site2.example.com/">www.example.com,site1.example.com,site2.example.com</a></p>
<p><code>带通配符的域名只支持DNS验证，其他域名支持上传文件验证</code></p>
<p>在 <code>证书的私钥：</code>处一般选择 <code>创建新RSA私钥</code>或 <code>创建新ECC私钥</code>，根据证书的加密形式而定。</p>
<p>在 <code>ACME账户的私钥：</code>处一般选择 <code>创建新RSA私钥 </code>或 <code>创建新ECC私钥 </code>，根据证书的加密形式而定。</p>
<p>在 <code> ACME账户的联系邮箱：</code>处填写你的邮箱，该邮箱必须真实存在。</p>
<h3 id="步骤三：验证域名所有权"><a href="#步骤三：验证域名所有权" class="headerlink" title="步骤三：验证域名所有权"></a>步骤三：验证域名所有权</h3><p>请给每个域名选择一个你合适的验证方式，泛域名只能使用DNS解析方式。</p>
<p>DNS解析方式：登陆到你的解析提供平台，如DNSPod，CloudFlare等，添加一条或多条TXT记录。</p>
<p>文件验证方式：仅限单域名，在你域名所属的文件目录下 创建 <code>/.well-known/acme-challenge/</code>目录并在内创建验证文件。</p>
<p>TLS-ALPN-01：使用Key Authorizations (Token+.+指纹)自行处理，Digest为Key Authorizations的SHA-256 Base64值。</p>
<p>完成后，点击“开始验证”即可验证。</p>
<h2 id="步骤四：下载保存证书PEM文件"><a href="#步骤四：下载保存证书PEM文件" class="headerlink" title="步骤四：下载保存证书PEM文件"></a>步骤四：下载保存证书PEM文件</h2><p>完成验证后，服务端会自动签发SSL证书，点击下载即可下载证书对应私钥，公钥和Log文件。</p>
<h3 id="其他提示"><a href="#其他提示" class="headerlink" title="其他提示"></a>其他提示</h3><p>1.你需要其他格式的证书文件？</p>
<p>大部分服务器程序支持直接使用 your_domain.pem+your_domain.key 来配置开启HTTPS（比如Nginx），如果你需要 <em>.pfx、</em>.p12 格式的证书（比如用于IIS），请用下面命令将PEM证书转换成 pfx&#x2F;p12 格式：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">openssl pkcs12 -export -out your_domain.pfx -inkey your_domain.key -in your_domain.pem<br></code></pre></td></tr></table></figure>

<p>2.IIS证书链缺失？</p>
<p>对于Windows IIS服务器，你需要将证书链安装到“本地计算机”的“中间证书颁发机构”中；请将PEM证书中的所有证书拆分成单个PEM文件（后缀改成.crt或.cer），然后将系统中缺失的中间证书双击打开然后安装进去；详细参考： <a target="_blank" rel="noopener" href="http://support.microsoft.com/kb/954755">http://support.microsoft.com/kb/954755</a></p>

                
              </div>
            
            <hr/>
            <div>
              <div class="post-metas my-3">
  
  
</div>


              
  

  <div class="license-box my-3">
    <div class="license-title">
      <div>SSL系列二之快速签发免费ZeroSSL泛域名证书</div>
      <div>https://www.inkdust.top/posts/zerossl-ssl.html</div>
    </div>
    <div class="license-meta">
      
        <div class="license-meta-item">
          <div>作者</div>
          <div>InkDust</div>
        </div>
      
      
        <div class="license-meta-item license-meta-date">
          <div>发布于</div>
          <div>2024年8月12日</div>
        </div>
      
      
      
        <div class="license-meta-item">
          <div>许可协议</div>
          <div>
            
              
              
                <a class="print-no-link" target="_blank" href="https://creativecommons.org/licenses/by/4.0/">
                  <span class="hint--top hint--rounded" aria-label="BY - 署名">
                    <i class="iconfont icon-cc-by"></i>
                  </span>
                </a>
              
            
          </div>
        </div>
      
    </div>
    <div class="license-icon iconfont"></div>
  </div>



              
                <div class="post-prevnext my-3">
                  <article class="post-prev col-6">
                    
                    
                  </article>
                  <article class="post-next col-6">
                    
                    
                      <a href="/posts/ltesencrypt-ssl.html" title="SSL系列一之快速签发免费Let&#39;s Encrypt泛域名证书">
                        <span class="hidden-mobile">SSL系列一之快速签发免费Let&#39;s Encrypt泛域名证书</span>
                        <span class="visible-mobile">下一篇</span>
                        <i class="iconfont icon-arrowright"></i>
                      </a>
                    
                  </article>
                </div>
              
            </div>

            
  
  
    <article id="comments" lazyload>
      
  <div id="twikoo"></div>
  <script type="text/javascript">
    Fluid.utils.loadComments('#comments', function() {
      Fluid.utils.createScript('https://mirrors.sustech.edu.cn/cdnjs/ajax/libs/twikoo/1.6.8/twikoo.all.min.js', function() {
        var options = Object.assign(
          {"envId":"https://ink-twikoo.netlify.app/.netlify/functions/twikoo","region":null,"path":"window.location.pathname"},
          {
            el: '#twikoo',
            path: 'window.location.pathname',
            onCommentLoaded: function() {
              Fluid.utils.listenDOMLoaded(function() {
                var imgSelector = '#twikoo .tk-content img:not(.tk-owo-emotion)';
                Fluid.plugins.imageCaption(imgSelector);
                Fluid.plugins.fancyBox(imgSelector);
              });
            }
          }
        )
        twikoo.init(options)
      });
    });
  </script>
  <noscript>Please enable JavaScript to view the comments</noscript>


    </article>
  


          </article>
        </div>
      </div>
    </div>

    <div class="side-col d-none d-lg-block col-lg-2">
      
  <aside class="sidebar" style="margin-left: -1rem">
    <div id="toc">
  <p class="toc-header">
    <i class="iconfont icon-list"></i>
    <span>目录</span>
  </p>
  <div class="toc-body" id="toc-body"></div>
</div>



  </aside>


    </div>
  </div>
</div>





  



  



  



  



  







    

    
      <a id="scroll-top-button" aria-label="TOP" href="#" role="button">
        <i class="iconfont icon-arrowup" aria-hidden="true"></i>
      </a>
    

    
      <div class="modal fade" id="modalSearch" tabindex="-1" role="dialog" aria-labelledby="ModalLabel"
     aria-hidden="true">
  <div class="modal-dialog modal-dialog-scrollable modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header text-center">
        <h4 class="modal-title w-100 font-weight-bold">搜索</h4>
        <button type="button" id="local-search-close" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body mx-3">
        <div class="md-form mb-5">
          <input type="text" id="local-search-input" class="form-control validate">
          <label data-error="x" data-success="v" for="local-search-input">关键词</label>
        </div>
        <div class="list-group" id="local-search-result"></div>
      </div>
    </div>
  </div>
</div>

    

    
  </main>

  <footer>
    <div class="footer-inner">
  
    <div class="footer-content">
       <a href="https://hexo.io" target="_blank" rel="nofollow noopener"><span>Hexo</span></a> <i class="iconfont icon-love"></i> <a href="https://github.com/fluid-dev/hexo-theme-fluid" target="_blank" rel="nofollow noopener"><span>Fluid</span></a> <p>本站由<a href="https://boochi.cn" target="_blank" rel="nofollow noopener"><span>风栖泊集</span></a>提供网站加速支持<br> Copyright © 2022-2024 墨尘 の 网络日志</p> 
    </div>
  
  
    <div class="statistics">
  
  

  
    
      <span id="umami-site-pv-container" style="display: none">
        总访问量 
        <span id="umami-site-pv"></span>
         次
      </span>
    
    
      <span id="umami-site-uv-container" style="display: none">
        总访客数 
        <span id="umami-site-uv"></span>
         人
      </span>
    
    
  

</div>

  
  
</div>

  </footer>

  <!-- Scripts -->
  
  <script  src="https://mirrors.sustech.edu.cn/cdnjs/ajax/libs/nprogress/0.2.0/nprogress.min.js" ></script>
  <link  rel="stylesheet" href="https://mirrors.sustech.edu.cn/cdnjs/ajax/libs/nprogress/0.2.0/nprogress.min.css" />

  <script>
    NProgress.configure({"showSpinner":false,"trickleSpeed":100})
    NProgress.start()
    window.addEventListener('load', function() {
      NProgress.done();
    })
  </script>


<script  src="https://mirrors.sustech.edu.cn/cdnjs/ajax/libs/jquery/3.6.4/jquery.min.js" ></script>
<script  src="https://mirrors.sustech.edu.cn/cdnjs/ajax/libs/twitter-bootstrap/4.6.1/js/bootstrap.min.js" ></script>
<script  src="/js/events.js" ></script>
<script  src="/js/plugins.js" ></script>


  <script  src="https://mirrors.sustech.edu.cn/cdnjs/ajax/libs/typed.js/2.0.12/typed.min.js" ></script>
  <script>
    (function (window, document) {
      var typing = Fluid.plugins.typing;
      var subtitle = document.getElementById('subtitle');
      if (!subtitle || !typing) {
        return;
      }
      var text = subtitle.getAttribute('data-typed-text');
      
        typing(text);
      
    })(window, document);
  </script>




  
    <script  src="/js/img-lazyload.js" ></script>
  




  
<script>
  Fluid.utils.createScript('https://mirrors.sustech.edu.cn/cdnjs/ajax/libs/tocbot/4.20.1/tocbot.min.js', function() {
    var toc = jQuery('#toc');
    if (toc.length === 0 || !window.tocbot) { return; }
    var boardCtn = jQuery('#board-ctn');
    var boardTop = boardCtn.offset().top;

    window.tocbot.init(Object.assign({
      tocSelector     : '#toc-body',
      contentSelector : '.markdown-body',
      linkClass       : 'tocbot-link',
      activeLinkClass : 'tocbot-active-link',
      listClass       : 'tocbot-list',
      isCollapsedClass: 'tocbot-is-collapsed',
      collapsibleClass: 'tocbot-is-collapsible',
      scrollSmooth    : true,
      includeTitleTags: true,
      headingsOffset  : -boardTop,
    }, CONFIG.toc));
    if (toc.find('.toc-list-item').length > 0) {
      toc.css('visibility', 'visible');
    }

    Fluid.events.registerRefreshCallback(function() {
      if ('tocbot' in window) {
        tocbot.refresh();
        var toc = jQuery('#toc');
        if (toc.length === 0 || !tocbot) {
          return;
        }
        if (toc.find('.toc-list-item').length > 0) {
          toc.css('visibility', 'visible');
        }
      }
    });
  });
</script>


  <script src=https://mirrors.sustech.edu.cn/cdnjs/ajax/libs/clipboard.js/2.0.11/clipboard.min.js></script>

  <script>Fluid.plugins.codeWidget();</script>


  
<script>
  Fluid.utils.createScript('https://mirrors.sustech.edu.cn/cdnjs/ajax/libs/anchor-js/5.0.0/anchor.min.js', function() {
    window.anchors.options = {
      placement: CONFIG.anchorjs.placement,
      visible  : CONFIG.anchorjs.visible
    };
    if (CONFIG.anchorjs.icon) {
      window.anchors.options.icon = CONFIG.anchorjs.icon;
    }
    var el = (CONFIG.anchorjs.element || 'h1,h2,h3,h4,h5,h6').split(',');
    var res = [];
    for (var item of el) {
      res.push('.markdown-body > ' + item.trim());
    }
    if (CONFIG.anchorjs.placement === 'left') {
      window.anchors.options.class = 'anchorjs-link-left';
    }
    window.anchors.add(res.join(', '));

    Fluid.events.registerRefreshCallback(function() {
      if ('anchors' in window) {
        anchors.removeAll();
        var el = (CONFIG.anchorjs.element || 'h1,h2,h3,h4,h5,h6').split(',');
        var res = [];
        for (var item of el) {
          res.push('.markdown-body > ' + item.trim());
        }
        if (CONFIG.anchorjs.placement === 'left') {
          anchors.options.class = 'anchorjs-link-left';
        }
        anchors.add(res.join(', '));
      }
    });
  });
</script>


  
<script>
  Fluid.utils.createScript('https://mirrors.sustech.edu.cn/cdnjs/ajax/libs/fancybox/3.5.7/jquery.fancybox.min.js', function() {
    Fluid.plugins.fancyBox();
  });
</script>


  <script>Fluid.plugins.imageCaption();</script>

  <script  src="/js/local-search.js" ></script>

  <script defer src="/js/umami-view.js" ></script>





<!-- 主题的启动项，将它保持在最底部 -->
<!-- the boot of the theme, keep it at the bottom -->
<script  src="/js/boot.js" ></script>


  

  <noscript>
    <div class="noscript-warning">博客在允许 JavaScript 运行的环境下浏览效果更佳</div>
  </noscript>
</body>
</html>
