{"meta":{"version":1,"warehouse":"5.0.1"},"models":{"Asset":[{"_id":"node_modules/hexo-theme-fluid/source/css/gitalk.css","path":"css/gitalk.css","modified":0,"renderable":1},{"_id":"node_modules/hexo-theme-fluid/source/css/highlight-dark.styl","path":"css/highlight-dark.styl","modified":0,"renderable":1},{"_id":"node_modules/hexo-theme-fluid/source/css/highlight.styl","path":"css/highlight.styl","modified":0,"renderable":1},{"_id":"node_modules/hexo-theme-fluid/source/css/main.styl","path":"css/main.styl","modified":0,"renderable":1},{"_id":"node_modules/hexo-theme-fluid/source/img/avatar.png","path":"img/avatar.png","modified":0,"renderable":1},{"_id":"node_modules/hexo-theme-fluid/source/img/default.png","path":"img/default.png","modified":0,"renderable":1},{"_id":"node_modules/hexo-theme-fluid/source/img/fluid.png","path":"img/fluid.png","modified":0,"renderable":1},{"_id":"node_modules/hexo-theme-fluid/source/img/loading.gif","path":"img/loading.gif","modified":0,"renderable":1},{"_id":"node_modules/hexo-theme-fluid/source/img/police_beian.png","path":"img/police_beian.png","modified":0,"renderable":1},{"_id":"node_modules/hexo-theme-fluid/source/js/boot.js","path":"js/boot.js","modified":0,"renderable":1},{"_id":"node_modules/hexo-theme-fluid/source/js/color-schema.js","path":"js/color-schema.js","modified":0,"renderable":1},{"_id":"node_modules/hexo-theme-fluid/source/js/events.js","path":"js/events.js","modified":0,"renderable":1},{"_id":"node_modules/hexo-theme-fluid/source/js/img-lazyload.js","path":"js/img-lazyload.js","modified":0,"renderable":1},{"_id":"node_modules/hexo-theme-fluid/source/js/leancloud.js","path":"js/leancloud.js","modified":0,"renderable":1},{"_id":"node_modules/hexo-theme-fluid/source/js/local-search.js","path":"js/local-search.js","modified":0,"renderable":1},{"_id":"node_modules/hexo-theme-fluid/source/js/plugins.js","path":"js/plugins.js","modified":0,"renderable":1},{"_id":"node_modules/hexo-theme-fluid/source/js/umami-view.js","path":"js/umami-view.js","modified":0,"renderable":1},{"_id":"node_modules/hexo-theme-fluid/source/js/utils.js","path":"js/utils.js","modified":0,"renderable":1},{"_id":"node_modules/hexo-theme-fluid/source/xml/local-search.xml","path":"xml/local-search.xml","modified":0,"renderable":1}],"Cache":[{"_id":"source/_posts/cloudflare-cname.md","hash":"2b5577d5f950a36a18c1193466da1959b45a8ff6","modified":1728207595621},{"_id":"source/_posts/deploy-umami-analytics-on-vercel.md","hash":"f691d6e8347f29f326ca2249ce28692b199c42d0","modified":1728207595621},{"_id":"source/_posts/kill-ewt360.md","hash":"da1056d670b0a6518339149f1d77792f6d6caf50","modified":1728207595621},{"_id":"source/_posts/ltesencrypt-ssl.md","hash":"81d304112df05581698783a627b97e849718d345","modified":1728207544381},{"_id":"source/_posts/minecraft-server-deploy.md","hash":"417f619423dcc55a2bec53dbbf76d7f358ff8dac","modified":1728207595621},{"_id":"source/_posts/new-start.md","hash":"1e533e1f3935d34da34a2cc0c6b00a2ed12edc32","modified":1728207561733},{"_id":"source/_posts/vercel-recover.md","hash":"b3b85252b8ad5bef642d9b1d12379bd868c67ce8","modified":1728207561733},{"_id":"source/_posts/wordpress-delopy.md","hash":"4af8a147fab0dff881e17b3b0344f46b5ade450e","modified":1728207546309},{"_id":"source/_posts/wordpress-high-speed.md","hash":"478af02145fd3540891161a2635327c41c15a47c","modified":1728207595685},{"_id":"source/about/index.md","hash":"e82e8623e822322f01022d7879e6028e29718239","modified":1728208163213},{"_id":"source/_posts/zerossl-ssl.md","hash":"aca806a825f720305879496764878cde9143cca0","modified":1728207595685},{"_id":"node_modules/hexo-theme-fluid/source/css/_pages/_tag/tag.styl","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1728204805909},{"_id":"node_modules/hexo-theme-fluid/LICENSE","hash":"26f9356fd6e84b5a88df6d9014378f41b65ba209","modified":1728204805501},{"_id":"node_modules/hexo-theme-fluid/README.md","hash":"ff9b0e1fb9dba665af2f1e4a577f8cb9e840464b","modified":1728204805541},{"_id":"node_modules/hexo-theme-fluid/_config.yml","hash":"e62d2e25cae57e8469e3f48c9d17be1fd284a969","modified":1728204805913},{"_id":"node_modules/hexo-theme-fluid/package.json","hash":"7746460fc2eba7439b494c46aa9b5ded81370819","modified":1728204805541},{"_id":"node_modules/hexo-theme-fluid/languages/de.yml","hash":"58dccef1d98b472dc4e6f4693c2297b0c9c5afba","modified":1728204805913},{"_id":"node_modules/hexo-theme-fluid/languages/en.yml","hash":"9c580471257f5a32bee701a059a45ea96755dcdc","modified":1728204805913},{"_id":"node_modules/hexo-theme-fluid/languages/eo.yml","hash":"7c1a0c9f6186b6643b19d3980f055329bdb4efa4","modified":1728204805913},{"_id":"node_modules/hexo-theme-fluid/languages/es.yml","hash":"026ddf1a49bf8ddfef6ed86ab4d6af143c1dd95f","modified":1728204805913},{"_id":"node_modules/hexo-theme-fluid/languages/ja.yml","hash":"550b95d3614a64592f02666938d235e9f11e449e","modified":1728204805913},{"_id":"node_modules/hexo-theme-fluid/languages/ru.yml","hash":"93818f8bf07195fb1ebffbb5210e531b0e3a6ec4","modified":1728204805913},{"_id":"node_modules/hexo-theme-fluid/languages/zh-CN.yml","hash":"a60847136709bb95586a98d9d67b50390a8d2c96","modified":1728204805913},{"_id":"node_modules/hexo-theme-fluid/languages/zh-HK.yml","hash":"51c2b4d64c6992a39bfd2586a1bdf5fbbbdf0175","modified":1728204805913},{"_id":"node_modules/hexo-theme-fluid/languages/zh-TW.yml","hash":"e1043de394f6dcf5c0647adcfdefe60637f78426","modified":1728204805917},{"_id":"node_modules/hexo-theme-fluid/layout/404.ejs","hash":"b84d575c7b7f778b4cb64e89ad3d0aed4a896820","modified":1728204805501},{"_id":"node_modules/hexo-theme-fluid/layout/about.ejs","hash":"052e9fc19c753f53fdc083c7fb098e3668880140","modified":1728204805501},{"_id":"node_modules/hexo-theme-fluid/layout/archive.ejs","hash":"7c1f44005849791feae4abaa10fae4cb983d3277","modified":1728204805505},{"_id":"node_modules/hexo-theme-fluid/layout/categories.ejs","hash":"13859726c27b6c79b5876ec174176d0f9c1ee164","modified":1728204805505},{"_id":"node_modules/hexo-theme-fluid/layout/category.ejs","hash":"f099161b738a16a32253f42085b5444f902018ed","modified":1728204805505},{"_id":"node_modules/hexo-theme-fluid/layout/index.ejs","hash":"33c3317cdcee062789de2336dd8d0cc7f86d3650","modified":1728204805513},{"_id":"node_modules/hexo-theme-fluid/layout/layout.ejs","hash":"7e0023474128fbe4d68c467704c41f1712432415","modified":1728204805513},{"_id":"node_modules/hexo-theme-fluid/layout/links.ejs","hash":"1cac32ec4579aaf7b9fa39d317497331d4c5e1dd","modified":1728204805513},{"_id":"node_modules/hexo-theme-fluid/layout/page.ejs","hash":"ed5007a3feb8f14d3d2843271bfb298eb0c56219","modified":1728204805521},{"_id":"node_modules/hexo-theme-fluid/layout/post.ejs","hash":"9bf0d357a607a282f3b9cb04525a4df0cc2a8b76","modified":1728204805521},{"_id":"node_modules/hexo-theme-fluid/layout/tag.ejs","hash":"9d686364c4d16a1a9219471623af452035c5b966","modified":1728204805521},{"_id":"node_modules/hexo-theme-fluid/layout/tags.ejs","hash":"1d06af34b6cf1d8a20d2eb565e309326ceba309f","modified":1728204805521},{"_id":"node_modules/hexo-theme-fluid/layout/_partials/archive-list.ejs","hash":"7520fbf91f762207c2ab06b2c293235cd5b23905","modified":1728204805505},{"_id":"node_modules/hexo-theme-fluid/layout/_partials/category-chains.ejs","hash":"18309584aab83bc4deb20723ebad832149dd2e24","modified":1728204805505},{"_id":"node_modules/hexo-theme-fluid/layout/_partials/category-list.ejs","hash":"f8d2f1907450e61968e6d54443e9be8138196a77","modified":1728204805505},{"_id":"node_modules/hexo-theme-fluid/layout/_partials/comments.ejs","hash":"d707c47b2638c94e489bc43d4cfd098b7c58447f","modified":1728204805509},{"_id":"node_modules/hexo-theme-fluid/layout/_partials/css.ejs","hash":"1dadb118d580280524ed0a5f69bd34d234a92276","modified":1728204805509},{"_id":"node_modules/hexo-theme-fluid/layout/_partials/footer.ejs","hash":"40c8b0852873032e7aaef3f68e8ea08706cdef13","modified":1728204805509},{"_id":"node_modules/hexo-theme-fluid/layout/_partials/head.ejs","hash":"67be642f99482c07904474f410cfbc2f99003288","modified":1728204805513},{"_id":"node_modules/hexo-theme-fluid/layout/_partials/header.ejs","hash":"0d5e397d30051e5fbabe7b47cfd1f1e6a5820af1","modified":1728204805513},{"_id":"node_modules/hexo-theme-fluid/layout/_partials/markdown-plugins.ejs","hash":"fc4bdf7de0cf1a66d0e5e4fba1b31d6f7ed49468","modified":1728204805517},{"_id":"node_modules/hexo-theme-fluid/layout/_partials/paginator.ejs","hash":"0f38a2c238169edcb63fc46c23bfc529ff3859b7","modified":1728204805521},{"_id":"node_modules/hexo-theme-fluid/layout/_partials/scripts.ejs","hash":"da5810785105e5075861593c7ac22c7aa9665a72","modified":1728204805521},{"_id":"node_modules/hexo-theme-fluid/layout/_partials/search.ejs","hash":"70e1c929e084ca8a2648cedabf29b372511ea2b8","modified":1728204805521},{"_id":"node_modules/hexo-theme-fluid/scripts/events/index.js","hash":"79de5a379b28cad759a49048351c7f6b8915bd7d","modified":1728204805537},{"_id":"node_modules/hexo-theme-fluid/scripts/filters/default-injects.js","hash":"b2013ae8e189cd07ebc8a2ff48a78e153345210f","modified":1728204805529},{"_id":"node_modules/hexo-theme-fluid/scripts/filters/locals.js","hash":"58d0fec976f6b1d35e7ea03edc45414088acf05c","modified":1728204805537},{"_id":"node_modules/hexo-theme-fluid/scripts/filters/post-filter.js","hash":"82bb06686158ebe160a631c79f156cd4fde35656","modified":1728204805541},{"_id":"node_modules/hexo-theme-fluid/scripts/generators/index-generator.js","hash":"9159fc22fa84a7b605dd15fe4104f01fe9c71147","modified":1728204805533},{"_id":"node_modules/hexo-theme-fluid/scripts/generators/local-search.js","hash":"9ac5ddad06e9b0e6015ce531430018182a4bc0fa","modified":1728204805537},{"_id":"node_modules/hexo-theme-fluid/scripts/generators/pages.js","hash":"d3e75f53c59674d171309e50702954671f31f1a4","modified":1728204805537},{"_id":"node_modules/hexo-theme-fluid/scripts/helpers/date.js","hash":"9bda6382f61b40a20c24af466fe10c8366ebb74c","modified":1728204805529},{"_id":"node_modules/hexo-theme-fluid/scripts/helpers/engine.js","hash":"d3a231d106795ce99cb0bc77eb65f9ae44515933","modified":1728204805529},{"_id":"node_modules/hexo-theme-fluid/scripts/helpers/export-config.js","hash":"8e67b522c47aa250860e3fe2c733f1f958a506c0","modified":1728204805533},{"_id":"node_modules/hexo-theme-fluid/scripts/helpers/import.js","hash":"ca53e8dbf7d44cfd372cfa79ac60f35a7d5b0076","modified":1728204805533},{"_id":"node_modules/hexo-theme-fluid/scripts/helpers/injects.js","hash":"1ad2ae6b11bd8806ee7dd6eb7140d8b54a95d613","modified":1728204805537},{"_id":"node_modules/hexo-theme-fluid/scripts/helpers/page.js","hash":"4607607445233b3029ef20ed5e91de0da0a7f9c5","modified":1728204805537},{"_id":"node_modules/hexo-theme-fluid/scripts/helpers/scope.js","hash":"d41d9d658fcb54964b388598e996747aadb85b0f","modified":1728204805541},{"_id":"node_modules/hexo-theme-fluid/scripts/helpers/url.js","hash":"2a6a8288176d0e0f6ec008056bf2745a86e8943e","modified":1728204805541},{"_id":"node_modules/hexo-theme-fluid/scripts/helpers/utils.js","hash":"966689d7c5e4320008285395fbaa2751f6209be5","modified":1728204805541},{"_id":"node_modules/hexo-theme-fluid/scripts/helpers/wordcount.js","hash":"4d48c424e47ff9a17a563167ea5f480890267adf","modified":1728204805541},{"_id":"node_modules/hexo-theme-fluid/scripts/tags/button.js","hash":"3eb43a8cdea0a64576ad6b31b4df6c2bf5698d4c","modified":1728204805529},{"_id":"node_modules/hexo-theme-fluid/scripts/tags/checkbox.js","hash":"6eaf53cf4bfc756a65bda18184cf8998a12c861d","modified":1728204805529},{"_id":"node_modules/hexo-theme-fluid/scripts/tags/fold.js","hash":"73e4fd12ce3e47981479391ed354b7d9d3279f70","modified":1728204805533},{"_id":"node_modules/hexo-theme-fluid/scripts/tags/group-image.js","hash":"4aeebb797026f1df25646a5d69f7fde79b1bcd26","modified":1728204805533},{"_id":"node_modules/hexo-theme-fluid/scripts/tags/label.js","hash":"f05a6d32cca79535b22907dc03edb9d3fa2d8176","modified":1728204805537},{"_id":"node_modules/hexo-theme-fluid/scripts/tags/mermaid.js","hash":"75160561e1ef3603b6d2ad2938464ab1cb77fd38","modified":1728204805537},{"_id":"node_modules/hexo-theme-fluid/scripts/tags/note.js","hash":"e3b456a079e5dc0032473b516c865b20f83d2c26","modified":1728204805537},{"_id":"node_modules/hexo-theme-fluid/scripts/utils/compare-versions.js","hash":"dbbc928c914fc2bd242cd66aa0c45971aec13a5d","modified":1728204805529},{"_id":"node_modules/hexo-theme-fluid/scripts/utils/crypto.js","hash":"ae4ad8a188ef5b3fa6818b01629fc962b3de8551","modified":1728204805529},{"_id":"node_modules/hexo-theme-fluid/scripts/utils/object.js","hash":"33b57e4decdc5e75c518859f168c8ba80b2c665b","modified":1728204805537},{"_id":"node_modules/hexo-theme-fluid/scripts/utils/resolve.js","hash":"8c4a8b62aa8608f12f1e9046231dff04859dc3e9","modified":1728204805541},{"_id":"node_modules/hexo-theme-fluid/scripts/utils/url-join.js","hash":"718aab5e7b2059a06b093ca738de420d9afa44ba","modified":1728204805541},{"_id":"node_modules/hexo-theme-fluid/source/css/gitalk.css","hash":"a57b3cc8e04a0a4a27aefa07facf5b5e7bca0e76","modified":1728204805501},{"_id":"node_modules/hexo-theme-fluid/source/css/highlight-dark.styl","hash":"45695ef75c31a4aa57324dd408b7e2327a337018","modified":1728204805897},{"_id":"node_modules/hexo-theme-fluid/source/css/highlight.styl","hash":"a9efc52a646a9e585439c768557e3e3c9e3326dc","modified":1728204805897},{"_id":"node_modules/hexo-theme-fluid/source/css/main.styl","hash":"855ae5fe229c51afa57f7645f6997a27a705d7e4","modified":1728204805901},{"_id":"node_modules/hexo-theme-fluid/source/img/avatar.png","hash":"fe739a158cc128f70f780eb5fa96f388b81d478f","modified":1728204805541},{"_id":"node_modules/hexo-theme-fluid/source/img/fluid.png","hash":"64b215db2cb3af98fe639e94537cb5209f959c78","modified":1728204805881},{"_id":"node_modules/hexo-theme-fluid/source/img/loading.gif","hash":"2d2fc0f947940f98c21afafef39ecf226a2e8d55","modified":1728204805525},{"_id":"node_modules/hexo-theme-fluid/source/img/police_beian.png","hash":"90efded6baa2dde599a9d6b1387973e8e64923ea","modified":1728204805881},{"_id":"node_modules/hexo-theme-fluid/source/js/boot.js","hash":"38bd26c6b7acdafda86dda3560e6a3ca488d3c76","modified":1728204805529},{"_id":"node_modules/hexo-theme-fluid/source/js/color-schema.js","hash":"1ef88c881b9f942deadde3d890387b94c617342a","modified":1728204805529},{"_id":"node_modules/hexo-theme-fluid/source/js/events.js","hash":"6869811f67e4c3de3edfa4b08464bb242b97a402","modified":1728204805533},{"_id":"node_modules/hexo-theme-fluid/source/js/img-lazyload.js","hash":"cbdeca434ec4da51f488c821d51b4d23c73294af","modified":1728204805533},{"_id":"node_modules/hexo-theme-fluid/source/js/leancloud.js","hash":"eff77c7a5c399fcaefda48884980571e15243fc9","modified":1728204805537},{"_id":"node_modules/hexo-theme-fluid/source/js/local-search.js","hash":"b9945f76f8682f3ec32edfb285b26eb559f7b7e8","modified":1728204805537},{"_id":"node_modules/hexo-theme-fluid/source/js/plugins.js","hash":"c34916291e392a774ff3e85c55badb83e8661297","modified":1728204805537},{"_id":"node_modules/hexo-theme-fluid/source/js/umami-view.js","hash":"33c4b3883fa747604074ad3921606eeeaeb50716","modified":1728204805541},{"_id":"node_modules/hexo-theme-fluid/source/js/utils.js","hash":"b82e7c289a66dfd36064470fd41c0e96fc598b43","modified":1728204805541},{"_id":"node_modules/hexo-theme-fluid/source/xml/local-search.xml","hash":"8c96ba6a064705602ce28d096fd7dd9069630a55","modified":1728204805909},{"_id":"node_modules/hexo-theme-fluid/layout/_partials/comments/changyan.ejs","hash":"c9b2d68ed3d375f1953e7007307d2a3f75ed6249","modified":1728204805505},{"_id":"node_modules/hexo-theme-fluid/layout/_partials/comments/cusdis.ejs","hash":"5f9dc012be27040bbe874d0c093c0d53958cc987","modified":1728204805509},{"_id":"node_modules/hexo-theme-fluid/layout/_partials/comments/discuss.ejs","hash":"98d065b58ce06b7d18bff3c974e96fa0f34ae03a","modified":1728204805509},{"_id":"node_modules/hexo-theme-fluid/layout/_partials/comments/disqus.ejs","hash":"aab4a4d24c55231a37db308ae94414319cecdd9b","modified":1728204805509},{"_id":"node_modules/hexo-theme-fluid/layout/_partials/comments/giscus.ejs","hash":"95f8b866b158eff9352c381c243b332a155a5110","modified":1728204805513},{"_id":"node_modules/hexo-theme-fluid/layout/_partials/comments/gitalk.ejs","hash":"843bc141a4545eb20d1c92fb63c85d459b4271ec","modified":1728204805513},{"_id":"node_modules/hexo-theme-fluid/layout/_partials/comments/livere.ejs","hash":"2264758fed57542a7389c7aa9f00f1aefa17eb87","modified":1728204805513},{"_id":"node_modules/hexo-theme-fluid/layout/_partials/comments/remark42.ejs","hash":"d4e9532feeb02aed61bd15eda536b5b631454dac","modified":1728204805521},{"_id":"node_modules/hexo-theme-fluid/layout/_partials/comments/twikoo.ejs","hash":"d84bcb5ccd78470a60c067fc914ac0ac67ac8777","modified":1728204805525},{"_id":"node_modules/hexo-theme-fluid/layout/_partials/comments/utterances.ejs","hash":"c7ccf7f28308334a6da6f5425b141a24b5eca0e2","modified":1728204805525},{"_id":"node_modules/hexo-theme-fluid/layout/_partials/comments/valine.ejs","hash":"19ba937553dddd317f827d682661a1066a7b1f30","modified":1728204805525},{"_id":"node_modules/hexo-theme-fluid/layout/_partials/comments/waline.ejs","hash":"3d08c73b77e412d2f06a24d9344565fc7dbc76f8","modified":1728204805525},{"_id":"node_modules/hexo-theme-fluid/layout/_partials/footer/beian.ejs","hash":"4fb9b5dd3f3e41a586d6af44e5069afe7c81fff2","modified":1728204805505},{"_id":"node_modules/hexo-theme-fluid/layout/_partials/footer/statistics.ejs","hash":"954a29b58d72647d20450da270b5d8fb2e0824f5","modified":1728204805521},{"_id":"node_modules/hexo-theme-fluid/layout/_partials/header/banner.ejs","hash":"e07757b59e7b89eea213d0e595cb5932f812fd32","modified":1728204805505},{"_id":"node_modules/hexo-theme-fluid/layout/_partials/header/navigation.ejs","hash":"37d750428772d7c71ba36ce0c2540780d90fadea","modified":1728204805521},{"_id":"node_modules/hexo-theme-fluid/layout/_partials/plugins/analytics.ejs","hash":"e6dcbf1c2f56314d56bb46b50aca86ff68cacebd","modified":1728204805505},{"_id":"node_modules/hexo-theme-fluid/layout/_partials/plugins/anchorjs.ejs","hash":"40181442d3a2b8734783a0ad7caf2d2522e3f2ab","modified":1728204805505},{"_id":"node_modules/hexo-theme-fluid/layout/_partials/plugins/code-widget.ejs","hash":"3a505cba37942badf62a56bbb8b605b72af330aa","modified":1728204805505},{"_id":"node_modules/hexo-theme-fluid/layout/_partials/plugins/encrypt.ejs","hash":"0fff24cf5bf99fbe5c56c292e2eac4a89bf29db4","modified":1728204805509},{"_id":"node_modules/hexo-theme-fluid/layout/_partials/plugins/fancybox.ejs","hash":"9d1ea2a46b8c8ad8c168594d578f40764818ef13","modified":1728204805509},{"_id":"node_modules/hexo-theme-fluid/layout/_partials/plugins/highlight.ejs","hash":"7529dd215b09d3557804333942377b9e20fa554e","modified":1728204805513},{"_id":"node_modules/hexo-theme-fluid/layout/_partials/plugins/math.ejs","hash":"dcbf9a381ee76f2f1f75fcbc22c50a502ec85023","modified":1728204805517},{"_id":"node_modules/hexo-theme-fluid/layout/_partials/plugins/mermaid.ejs","hash":"03ac02762f801970d1c4e73d6ec8d4c503780e50","modified":1728204805517},{"_id":"node_modules/hexo-theme-fluid/layout/_partials/plugins/moment.ejs","hash":"4ff3fb1b60ccc95a0af3bbdbd0757fedefc088b5","modified":1728204805521},{"_id":"node_modules/hexo-theme-fluid/layout/_partials/plugins/nprogress.ejs","hash":"4c2d39ce816b8a6dcd6b53113c8695f8bd650a23","modified":1728204805521},{"_id":"node_modules/hexo-theme-fluid/layout/_partials/plugins/typed.ejs","hash":"f345374885cd6a334f09a11f59c443b5d577c06c","modified":1728204805525},{"_id":"node_modules/hexo-theme-fluid/layout/_partials/post/category-bar.ejs","hash":"8772bce97ed297e7a88523f4e939ed6436c22f87","modified":1728204805505},{"_id":"node_modules/hexo-theme-fluid/layout/_partials/post/copyright.ejs","hash":"cbfa32c5f5973133afd043853b24f8200455cb2d","modified":1728204805509},{"_id":"node_modules/hexo-theme-fluid/layout/_partials/post/meta-bottom.ejs","hash":"375974ec017696e294dc12469fb0ae257800dc2d","modified":1728204805517},{"_id":"node_modules/hexo-theme-fluid/layout/_partials/post/meta-top.ejs","hash":"54dd479dbb440126e4ddd9d902229db5afaaae98","modified":1728204805521},{"_id":"node_modules/hexo-theme-fluid/layout/_partials/post/sidebar-left.ejs","hash":"9992c99b3eb728ad195970e1b84d665f2c8691c4","modified":1728204805521},{"_id":"node_modules/hexo-theme-fluid/layout/_partials/post/sidebar-right.ejs","hash":"d5fcc9b60e02f869a29a8c17a16a6028ecc1e6d8","modified":1728204805521},{"_id":"node_modules/hexo-theme-fluid/layout/_partials/post/toc.ejs","hash":"635a89060fbf72eeda066fc4bd0a97462f069417","modified":1728204805521},{"_id":"node_modules/hexo-theme-fluid/scripts/events/lib/compatible-configs.js","hash":"ef474d1fa5bbafc52619ced0f9dc7eaf2affb363","modified":1728204805529},{"_id":"node_modules/hexo-theme-fluid/scripts/events/lib/footnote.js","hash":"c19ac8050b82c3676b0332a56099ccfcc36d9d52","modified":1728204805533},{"_id":"node_modules/hexo-theme-fluid/scripts/events/lib/hello.js","hash":"bd8376e1cf7892dc2daa58f2f443574be559fdbf","modified":1728204805533},{"_id":"node_modules/hexo-theme-fluid/scripts/events/lib/highlight.js","hash":"a5fe1deccb73b5f578797dbb11038efc15f63ce8","modified":1728204805533},{"_id":"node_modules/hexo-theme-fluid/scripts/events/lib/injects.js","hash":"5ae4b07204683e54b5a1b74e931702bbce2ac23e","modified":1728204805537},{"_id":"node_modules/hexo-theme-fluid/scripts/events/lib/lazyload.js","hash":"9ba0d4bc224e22af8a5a48d6ff13e5a0fcfee2a4","modified":1728204805537},{"_id":"node_modules/hexo-theme-fluid/scripts/events/lib/merge-configs.js","hash":"7c944c43b2ece5dd84859bd9d1fe955d13427387","modified":1728204805537},{"_id":"node_modules/hexo-theme-fluid/source/css/_functions/base.styl","hash":"2e46f3f4e2c9fe34c1ff1c598738fc7349ae8188","modified":1728204805885},{"_id":"node_modules/hexo-theme-fluid/source/css/_mixins/base.styl","hash":"542e306ee9494e8a78e44d6d7d409605d94caeb3","modified":1728204805885},{"_id":"node_modules/hexo-theme-fluid/source/css/_pages/pages.styl","hash":"b8e887bc7fb3b765a1f8ec9448eff8603a41984f","modified":1728204805905},{"_id":"node_modules/hexo-theme-fluid/source/css/_variables/base.styl","hash":"4ed5f0ae105ef4c7dd92eaf652ceda176c38e502","modified":1728204805889},{"_id":"node_modules/hexo-theme-fluid/source/css/_pages/_about/about.styl","hash":"97fe42516ea531fdad771489b68aa8b2a7f6ae46","modified":1728204805881},{"_id":"node_modules/hexo-theme-fluid/source/css/_pages/_archive/archive.styl","hash":"c475e6681546d30350eaed11f23081ecae80c375","modified":1728204805881},{"_id":"node_modules/hexo-theme-fluid/source/css/_pages/_base/base.styl","hash":"643284c567665f96915f0b64e59934dda315f74d","modified":1728204805889},{"_id":"node_modules/hexo-theme-fluid/source/css/_pages/_base/color-schema.styl","hash":"85492ef64d7e5f70f0f7e46d570bbc911e686d7e","modified":1728204805889},{"_id":"node_modules/hexo-theme-fluid/source/css/_pages/_base/inline.styl","hash":"411a3fa3f924a87e00ff04d18b5c83283b049a4d","modified":1728204805901},{"_id":"node_modules/hexo-theme-fluid/source/css/_pages/_base/keyframes.styl","hash":"94065ea50f5bef7566d184f2422f6ac20866ba22","modified":1728204805901},{"_id":"node_modules/hexo-theme-fluid/source/css/_pages/_base/print.styl","hash":"166afbc596ea4b552bad7290ec372d25ec34db7b","modified":1728204805905},{"_id":"node_modules/hexo-theme-fluid/source/css/_pages/_category/category-bar.styl","hash":"cc6df43fef6bb3efecbfdd8b9e467424a1dea581","modified":1728204805889},{"_id":"node_modules/hexo-theme-fluid/source/css/_pages/_category/category-chain.styl","hash":"0cdf7ef50dfd0669d3b257821384ff31cd81b7c9","modified":1728204805889},{"_id":"node_modules/hexo-theme-fluid/source/css/_pages/_category/category-list.styl","hash":"7edfe1b571ecca7d08f5f4dbcf76f4ffdcfbf0b5","modified":1728204805889},{"_id":"node_modules/hexo-theme-fluid/source/css/_pages/_index/index.styl","hash":"25fb6fa4c783b847c632584c49a7e1593cdb2f5d","modified":1728204805901},{"_id":"node_modules/hexo-theme-fluid/source/css/_pages/_links/links.styl","hash":"5c7f2044e3f1da05a3229537c06bd879836f8d6e","modified":1728204805901},{"_id":"node_modules/hexo-theme-fluid/source/css/_pages/_post/comment.styl","hash":"780f3788e7357bcd3f3262d781cb91bb53976a93","modified":1728204805893},{"_id":"node_modules/hexo-theme-fluid/source/css/_pages/_post/highlight.styl","hash":"4df764d298fe556e501db4afc2b05686fe6ebcfb","modified":1728204805897},{"_id":"node_modules/hexo-theme-fluid/source/css/_pages/_post/markdown.styl","hash":"1e3d3a82721e7c10bcfcecec6d81cf2979039452","modified":1728204805901},{"_id":"node_modules/hexo-theme-fluid/source/css/_pages/_post/post-page.styl","hash":"7eee3f78296a3c81849a5415d1d43dcc6e03e6aa","modified":1728204805905},{"_id":"node_modules/hexo-theme-fluid/source/css/_pages/_post/post-tag.styl","hash":"c96d36aa8fe20f0c3c1a29ee2473cd8064b10f73","modified":1728204805905},{"_id":"node_modules/hexo-theme-fluid/source/css/_pages/_tag/tags.styl","hash":"65bfc01c76abc927fa1a23bf2422892b0d566c3f","modified":1728204805909},{"_id":"node_modules/hexo-theme-fluid/source/css/_pages/_base/_widget/anchorjs.styl","hash":"e0cebda4a6f499aff75e71417d88caa7ceb13b94","modified":1728204805881},{"_id":"node_modules/hexo-theme-fluid/source/css/_pages/_base/_widget/banner.styl","hash":"7a0bd629bc234fc75e3cc8e3715ffada92f09e73","modified":1728204805885},{"_id":"node_modules/hexo-theme-fluid/source/css/_pages/_base/_widget/board.styl","hash":"4397037fc3f0033dbe546c33cd9dbdabd8cb1632","modified":1728204805889},{"_id":"node_modules/hexo-theme-fluid/source/css/_pages/_base/_widget/code-widget.styl","hash":"b66ab013f0f37d724a149b85b3c7432afcf460ad","modified":1728204805889},{"_id":"node_modules/hexo-theme-fluid/source/css/_pages/_base/_widget/copyright.styl","hash":"26f71a9cd60d96bb0cb5bbdf58150b8e524d9707","modified":1728204805893},{"_id":"node_modules/hexo-theme-fluid/source/css/_pages/_base/_widget/footer.styl","hash":"2caaca71dd1ff63d583099ed817677dd267b457e","modified":1728204805897},{"_id":"node_modules/hexo-theme-fluid/source/css/_pages/_base/_widget/footnote.styl","hash":"ae9289cc89649af2042907f8a003303b987f3404","modified":1728204805897},{"_id":"node_modules/hexo-theme-fluid/source/css/_pages/_base/_widget/header.styl","hash":"d42b748f2f49ef32aafb1a21d75991d2459da927","modified":1728204805897},{"_id":"node_modules/hexo-theme-fluid/source/css/_pages/_base/_widget/modal.styl","hash":"adf6c1e5c8e1fb41c77ce6e2258001df61245aa2","modified":1728204805901},{"_id":"node_modules/hexo-theme-fluid/source/css/_pages/_base/_widget/ngrogress.styl","hash":"5d225357b4a58d46118e6616377168336ed44cb2","modified":1728204805901},{"_id":"node_modules/hexo-theme-fluid/source/css/_pages/_base/_widget/noscript.styl","hash":"0cf2f2bb44f456150d428016675d5876a9d2e2aa","modified":1728204805901},{"_id":"node_modules/hexo-theme-fluid/source/css/_pages/_base/_widget/pagination.styl","hash":"8bb1b68e5f3552cb48c2ffa31edbc53646a8fb4c","modified":1728204805905},{"_id":"node_modules/hexo-theme-fluid/source/css/_pages/_base/_widget/qrcode.styl","hash":"78704a94c0436097abfb0e0a57abeb3429c749b7","modified":1728204805909},{"_id":"node_modules/hexo-theme-fluid/source/css/_pages/_base/_widget/scroll-btn.styl","hash":"f0e429a27fa8a7658fcbddbb4d4dbe4afa12499a","modified":1728204805909},{"_id":"node_modules/hexo-theme-fluid/source/css/_pages/_base/_widget/search.styl","hash":"10f7e91a91e681fb9fe46f9df7707b9ef78707c8","modified":1728204805909},{"_id":"node_modules/hexo-theme-fluid/source/css/_pages/_base/_widget/toc.styl","hash":"9e7452aa2372153f25d7a4675c9d36d281a65d24","modified":1728204805909},{"_id":"node_modules/hexo-theme-fluid/source/img/default.png","hash":"167a12978d80371cf578c8a2e45c24a2eb25b6fb","modified":1728204805881},{"_id":"public/local-search.xml","hash":"9fcfd5fcece8bbd07060c7fc9d054e3454fe5403","modified":1728210959380},{"_id":"public/about/index.html","hash":"0980a41270bdc66cdc10d0f93fca40356c739b05","modified":1728210959380},{"_id":"public/posts/zerossl-ssl.html","hash":"72c8b654bda23fbf4c2833f8a89681e638edcee3","modified":1728210959380},{"_id":"public/posts/ltesencrypt-ssl.html","hash":"af6a4289df70d464068ebc5eaab690776d8fd913","modified":1728210959380},{"_id":"public/posts/minecraft-server-deploy.html","hash":"fa23293b61b46803fc5188dc2db71ea1d095c070","modified":1728210959380},{"_id":"public/posts/vercel-recover.html","hash":"8f4307143fbf46cb5a3117d86cd58da2382db78f","modified":1728210959380},{"_id":"public/posts/deploy-umami-analytics-on-vercel.html","hash":"b73b7ba7e2f9380538c768896209d10f5aac8dff","modified":1728210959380},{"_id":"public/posts/kill-ewt360.html","hash":"7483aad0b7547e760f8ffe6d3e312698a59b4c01","modified":1728210959380},{"_id":"public/posts/wordpress-high-speed.html","hash":"e03df5e9568b81821ed6f7f9f947bfdf8cd33efa","modified":1728210959380},{"_id":"public/posts/wordpress-delopy.html","hash":"1bb83e5771e1a8c40ff11976e69fc21a30b99cf4","modified":1728210959380},{"_id":"public/posts/cloudflare-cname.html","hash":"11cbcf2aa63be66bef2eb43545c9ab8a14e4e338","modified":1728210959380},{"_id":"public/posts/new-start.html","hash":"6018edf74a6d45f52e6f70221eb555c65eec58e7","modified":1728210959380},{"_id":"public/archives/index.html","hash":"b36aca66a0c7f9636aa04aaf6959cee030d7341b","modified":1728210959380},{"_id":"public/archives/2023/index.html","hash":"2220f301a259b4977c87ae4f1469302fe898f101","modified":1728210959380},{"_id":"public/archives/2023/05/index.html","hash":"f0f1ca7405e50818a0ebf4d8b44d067415ee50bb","modified":1728210959380},{"_id":"public/archives/2023/07/index.html","hash":"ce8d57ce418d32da539fcec6f12cb8e6087e7c1d","modified":1728210959380},{"_id":"public/archives/2023/08/index.html","hash":"e5b325742f649f6acbc295dbbd305a0b79c84e78","modified":1728210959380},{"_id":"public/archives/2023/10/index.html","hash":"ea266e8991c7a59d609f75b49c5df85a86f4a42e","modified":1728210959380},{"_id":"public/archives/2024/index.html","hash":"f5f3df0ba4dfcf03dfd018a67e38f845a8675e33","modified":1728210959380},{"_id":"public/archives/2024/04/index.html","hash":"78517623a7ae28cb15b64a26fa1d8929f1458c61","modified":1728210959380},{"_id":"public/archives/2024/08/index.html","hash":"586c195c9f44f5c2c11e755fcd635c766016c858","modified":1728210959380},{"_id":"public/categories/技术教程/index.html","hash":"4e596fc8975426fb53eca09e21d21e67edd313df","modified":1728210959380},{"_id":"public/categories/免费资源/index.html","hash":"974469610c83ca30ef302e03852445165a66cd5e","modified":1728210959380},{"_id":"public/index.html","hash":"90226ea7ac9ba93e914f97d235eeb04ad6d463c4","modified":1728210959380},{"_id":"public/tags/Cloudflare/index.html","hash":"5927e7cb499119a2708b59e39759656afc4a1556","modified":1728210959380},{"_id":"public/tags/免费CDN/index.html","hash":"d90592f7fbaeab17b941d1a167d7e58c566eed57","modified":1728210959380},{"_id":"public/tags/CNAME接入/index.html","hash":"1ec7d7bbb5ff9abe7ea5224c7f00f098efa2a94e","modified":1728210959380},{"_id":"public/tags/Minecarft/index.html","hash":"eca962f621307ca73dd361c43ead5e92f1b67299","modified":1728210959380},{"_id":"public/tags/游戏/index.html","hash":"345034fb419c104a60478d1695fc6a321dfc5c3c","modified":1728210959380},{"_id":"public/tags/私有化/index.html","hash":"963169d33379bf4e332e92e384e16e63991f92df","modified":1728210959380},{"_id":"public/tags/随记/index.html","hash":"a6d1fe3c4f5dfbf658938c13d0d24932efbd1600","modified":1728210959380},{"_id":"public/tags/Docker/index.html","hash":"f7671dab222c8fa44bcff1aee6fc65a4b8153d4c","modified":1728210959380},{"_id":"public/tags/Oneinstack/index.html","hash":"23c51bc051ad0b182dfb201dcb5c713f160f6a6f","modified":1728210959380},{"_id":"public/tags/WordPress/index.html","hash":"c792c1c752c3f302d700dfca6aaf8b1096443b5c","modified":1728210959380},{"_id":"public/tags/加速/index.html","hash":"9ea32df674cfeb4dc4c08a915370aae5dee48e22","modified":1728210959380},{"_id":"public/404.html","hash":"abbba0cc321ba4035292792410967cf0bc882486","modified":1728210959380},{"_id":"public/tags/index.html","hash":"15196f3be5e9636aa8d0dd557fda4b6e879ec73f","modified":1728210959380},{"_id":"public/categories/index.html","hash":"1a1c9fead827aac346e1a0953bd4e72042df194e","modified":1728210959380},{"_id":"public/links/index.html","hash":"12f6bb708fffc1cae83cb6c08e3a7161d80207ea","modified":1728210959380},{"_id":"public/img/avatar.png","hash":"fe739a158cc128f70f780eb5fa96f388b81d478f","modified":1728210959380},{"_id":"public/img/fluid.png","hash":"64b215db2cb3af98fe639e94537cb5209f959c78","modified":1728210959380},{"_id":"public/img/loading.gif","hash":"2d2fc0f947940f98c21afafef39ecf226a2e8d55","modified":1728210959380},{"_id":"public/img/police_beian.png","hash":"90efded6baa2dde599a9d6b1387973e8e64923ea","modified":1728210959380},{"_id":"public/xml/local-search.xml","hash":"8c96ba6a064705602ce28d096fd7dd9069630a55","modified":1728210959380},{"_id":"public/css/gitalk.css","hash":"a57b3cc8e04a0a4a27aefa07facf5b5e7bca0e76","modified":1728210959380},{"_id":"public/css/highlight-dark.css","hash":"902294bada4323c0f51502d67cba8c3a0298952f","modified":1728210959380},{"_id":"public/css/highlight.css","hash":"04d4ddbb5e1d1007447c2fe293ee05aae9b9563e","modified":1728210959380},{"_id":"public/css/main.css","hash":"14ebd9b515085666cee29bbcbe362ad3604ab62a","modified":1728210959380},{"_id":"public/js/boot.js","hash":"38bd26c6b7acdafda86dda3560e6a3ca488d3c76","modified":1728210959380},{"_id":"public/js/color-schema.js","hash":"1ef88c881b9f942deadde3d890387b94c617342a","modified":1728210959380},{"_id":"public/js/events.js","hash":"6869811f67e4c3de3edfa4b08464bb242b97a402","modified":1728210959380},{"_id":"public/js/img-lazyload.js","hash":"cbdeca434ec4da51f488c821d51b4d23c73294af","modified":1728210959380},{"_id":"public/js/leancloud.js","hash":"eff77c7a5c399fcaefda48884980571e15243fc9","modified":1728210959380},{"_id":"public/js/local-search.js","hash":"b9945f76f8682f3ec32edfb285b26eb559f7b7e8","modified":1728210959380},{"_id":"public/js/plugins.js","hash":"c34916291e392a774ff3e85c55badb83e8661297","modified":1728210959380},{"_id":"public/js/umami-view.js","hash":"33c4b3883fa747604074ad3921606eeeaeb50716","modified":1728210959380},{"_id":"public/js/utils.js","hash":"b82e7c289a66dfd36064470fd41c0e96fc598b43","modified":1728210959380},{"_id":"public/img/default.png","hash":"167a12978d80371cf578c8a2e45c24a2eb25b6fb","modified":1728210959380}],"Category":[{"name":"技术教程","_id":"cm1xg6mt200059a9o5tswbptm"},{"name":"免费资源","_id":"cm1xg6mt6000b9a9o056hagcx"}],"Data":[],"Page":[{"title":"关于墨尘の网络日志","date":"2024-10-06T09:47:00.000Z","_content":"\n欢迎来到墨尘的网络日志！在这里，我希望与大家分享我对生活的独特见解，以及我在技术与文化领域的探索。这个博客不仅是我的创作平台，更是一个开放的交流空间。我相信，思考与表达是成长的关键，而我也期待与你们一起分享这段旅程。\n\n## 内容涵盖\n\n- **生活琐事**：分享我的日常点滴与心得体会。\n- **技术探索**：记录我在编程、科技和数字创作方面的学习与实践。\n- **文化反思**：深入讨论我对书籍、电影及其他艺术形式的看法。\n\n## 联系我\n\n如果你对我的内容感兴趣或有任何想法，欢迎通过邮件或社交媒体与我联系。期待与大家的互动与交流，让我们共同深入探讨这个世界的无限可能！\n\n谢谢你的光临，愿我们在这片网络空间里一起成长、一起探索。\n\n","source":"about/index.md","raw":"---\ntitle: 关于墨尘の网络日志\ndate: 2024-10-06 09:47:00\n---\n\n欢迎来到墨尘的网络日志！在这里，我希望与大家分享我对生活的独特见解，以及我在技术与文化领域的探索。这个博客不仅是我的创作平台，更是一个开放的交流空间。我相信，思考与表达是成长的关键，而我也期待与你们一起分享这段旅程。\n\n## 内容涵盖\n\n- **生活琐事**：分享我的日常点滴与心得体会。\n- **技术探索**：记录我在编程、科技和数字创作方面的学习与实践。\n- **文化反思**：深入讨论我对书籍、电影及其他艺术形式的看法。\n\n## 联系我\n\n如果你对我的内容感兴趣或有任何想法，欢迎通过邮件或社交媒体与我联系。期待与大家的互动与交流，让我们共同深入探讨这个世界的无限可能！\n\n谢谢你的光临，愿我们在这片网络空间里一起成长、一起探索。\n\n","updated":"2024-10-06T09:49:23.213Z","path":"about/index.html","comments":1,"layout":"page","_id":"cm1xg6msu00009a9oc38u8kux","content":"<p>欢迎来到墨尘的网络日志！在这里，我希望与大家分享我对生活的独特见解，以及我在技术与文化领域的探索。这个博客不仅是我的创作平台，更是一个开放的交流空间。我相信，思考与表达是成长的关键，而我也期待与你们一起分享这段旅程。</p>\n<h2 id=\"内容涵盖\"><a href=\"#内容涵盖\" class=\"headerlink\" title=\"内容涵盖\"></a>内容涵盖</h2><ul>\n<li><strong>生活琐事</strong>：分享我的日常点滴与心得体会。</li>\n<li><strong>技术探索</strong>：记录我在编程、科技和数字创作方面的学习与实践。</li>\n<li><strong>文化反思</strong>：深入讨论我对书籍、电影及其他艺术形式的看法。</li>\n</ul>\n<h2 id=\"联系我\"><a href=\"#联系我\" class=\"headerlink\" title=\"联系我\"></a>联系我</h2><p>如果你对我的内容感兴趣或有任何想法，欢迎通过邮件或社交媒体与我联系。期待与大家的互动与交流，让我们共同深入探讨这个世界的无限可能！</p>\n<p>谢谢你的光临，愿我们在这片网络空间里一起成长、一起探索。</p>\n","excerpt":"","more":"<p>欢迎来到墨尘的网络日志！在这里，我希望与大家分享我对生活的独特见解，以及我在技术与文化领域的探索。这个博客不仅是我的创作平台，更是一个开放的交流空间。我相信，思考与表达是成长的关键，而我也期待与你们一起分享这段旅程。</p>\n<h2 id=\"内容涵盖\"><a href=\"#内容涵盖\" class=\"headerlink\" title=\"内容涵盖\"></a>内容涵盖</h2><ul>\n<li><strong>生活琐事</strong>：分享我的日常点滴与心得体会。</li>\n<li><strong>技术探索</strong>：记录我在编程、科技和数字创作方面的学习与实践。</li>\n<li><strong>文化反思</strong>：深入讨论我对书籍、电影及其他艺术形式的看法。</li>\n</ul>\n<h2 id=\"联系我\"><a href=\"#联系我\" class=\"headerlink\" title=\"联系我\"></a>联系我</h2><p>如果你对我的内容感兴趣或有任何想法，欢迎通过邮件或社交媒体与我联系。期待与大家的互动与交流，让我们共同深入探讨这个世界的无限可能！</p>\n<p>谢谢你的光临，愿我们在这片网络空间里一起成长、一起探索。</p>\n"}],"Post":[{"abbrlink":"","index_img":"https://cdnn.boochi.cn/gh/inkdust-dev/ink-oss@main/blog-image/cloudflare-saas.png","date":"2023-07-16T19:06:46.000Z","title":"CloudFlare官方免费CNAME接入及自选IP教程","updated":"2024-08-07T14:33:20.763Z","_content":"自2021年年末后，Cloudflare禁用了使用 `API_KEY`自定义CNAME接入 `Partner`的方式，自选节点IP成为了历史。\n\n真的没有办法自选IP了\n\n吗?\n\n当然是有的，而且是Cloudflare官方提供的CNAME接入，即 `Cloudflare for SaaS`，我们依旧可以通过该方式来自定义IP节点，并且共享页面规则和WAF防火墙规则。\n\n## 什么是CloudFlare SaaS\n\nCloudFlare SaaS是指CloudFlare提供的基于云计算的软件即服务（Software-as-a-Service）解决方案。CloudFlare是一家提供网络安全和性能优化服务的公司，其SaaS产品能够帮助企业提高网站的安全性、可靠性和性能。使用CloudFlare SaaS，用户无需购买、安装或管理软件，而是通过互联网访问CloudFlare的平台，在云端享受各种功能和服务。这些服务包括DDoS保护、网站加速、负载均衡、SSL证书管理、全球内容分发网络（CDN）等。通过CloudFlare SaaS，用户可以轻松改善其在线应用程序和网站的用户体验，并减轻自身的技术负担。\n（回答来自ChatGPT）\n\n## 准备工作\n\n俗话说:“工欲善其事，必先利其器”，我们需要提前准备好以下材料：以及\n\n- 域名 两个(允许免费的Freenom域名)\n- CloudFlare 账户 一枚\n- 一个支持分线解析的DNS解析平台账号\n- 外币信用卡(允许0额度卡和虚拟信用卡) 一张 `(不收取任何费用)`\n\n或者\n\n- Paypal账号一个\n\n## CloudFlare 操作篇\n\n1.打开 `CloudFlare官网`，登录/注册账号，添加好你的网站域名并修改 `NameServer`使其在Cloudflare保持 `Active`状态。(注意:该域名并不是你访问的域名，而是你通过CNAME接入的地址，所以，你可以直接放心大胆的使用 `Freenom`域名!\n\n![CloudFlare接入域名](https://cdnn.boochi.cngh/inkdust-dev/ink-oss/main/image/20230711193423.png?image_process=format,webp \"如图，已成功接入域名\")\n\n接入完成后我们直接打开账户的 `付款方式`，点击 `用户头像`，点击 `账单`-`付款信息`，在此添加Paypal或信用卡。\n\n接着订购 `CloudFlare for SaaS`，进入你的域名，按下图所示操作订购服务，可以看到100个域名的免费额度。\n\n![购买SaaS](https://cdnn.boochi.cngh/inkdust-dev/ink-oss/main/image/20230711193833.png?image_process=format,webp)\n\n接下来，就是确定源站了。\n\n添加一个DNS记录，可以是任何记录(A,CNAME,…)。记录名建议为 `origin`，然后在自定义主机名页面中添加 `origin.<YOUR_DOMAIN>`，在底下添加你的访问域名，例如 `www.example.com`。\n\n![添加回退源](https://cdnn.boochi.cngh/inkdust-dev/ink-oss/main/image/20230711194134.png?image_process=format,webp)\n![SaaS设置](https://cdnn.boochi.cngh/inkdust-dev/ink-oss/main/image/20230711194134.png?image_process=format,webp)\n\n至此，你已完成了CloudFlare的操作。\n\n## 分线解析DNS 操作\n\n登录支持分线解析的DNS控制台，这里以 `DNSPOD`为例，添加你的域名，并修改 `NameServer`，使其变为 `正常解析`状态。\n\n添加一个CNAME解析到 `origin.<YOUR_DOMAIN>`，然后添加Cloudflare证书需要添加的记录。\n\n![添加证书记录](https://alpha-q3.sourcegcdn.com/2022/08/05/OGUDjNmj.jpg/webp)\n\n如有记录冲突请自行暂停和删除部分解析。\n\n待证书状态变为有效后就可以自选IP了。\n\n例如将 `www.example.com`的电信运营商解析到 `1.1.1.1`，就可以添加电信运营商的A记录到 `1.1.1.1`。\n\n![添加最佳IP](https://cdnn.boochi.cngh/inkdust-dev/ink-oss/main/image/20230711195117.png?image_process=format,webp)\n\n然后，访问你的域名，如果能访问的话，恭喜你成功接入。\n\n## 自选IP工具\n\n([XIU2/CloudFlare Speed Test])[https://github.com/XIU2/CloudflareSpeedTest]\n\n## 最后\n\nCloudFlare的节点数目众多，但资源有限，请勿滥用。\n","source":"_posts/cloudflare-cname.md","raw":"---\nabbrlink: ''\ncategories:\n- - 技术教程\n- - 免费资源\nindex_img: https://cdnn.boochi.cn/gh/inkdust-dev/ink-oss@main/blog-image/cloudflare-saas.png\ndate: '2023-07-16 19:06:46'\ntags:\n- Cloudflare\n- 免费CDN\n- CNAME接入\ntitle: CloudFlare官方免费CNAME接入及自选IP教程\nupdated: '2024-08-07T22:33:20.763+08:00'\n---\n自2021年年末后，Cloudflare禁用了使用 `API_KEY`自定义CNAME接入 `Partner`的方式，自选节点IP成为了历史。\n\n真的没有办法自选IP了\n\n吗?\n\n当然是有的，而且是Cloudflare官方提供的CNAME接入，即 `Cloudflare for SaaS`，我们依旧可以通过该方式来自定义IP节点，并且共享页面规则和WAF防火墙规则。\n\n## 什么是CloudFlare SaaS\n\nCloudFlare SaaS是指CloudFlare提供的基于云计算的软件即服务（Software-as-a-Service）解决方案。CloudFlare是一家提供网络安全和性能优化服务的公司，其SaaS产品能够帮助企业提高网站的安全性、可靠性和性能。使用CloudFlare SaaS，用户无需购买、安装或管理软件，而是通过互联网访问CloudFlare的平台，在云端享受各种功能和服务。这些服务包括DDoS保护、网站加速、负载均衡、SSL证书管理、全球内容分发网络（CDN）等。通过CloudFlare SaaS，用户可以轻松改善其在线应用程序和网站的用户体验，并减轻自身的技术负担。\n（回答来自ChatGPT）\n\n## 准备工作\n\n俗话说:“工欲善其事，必先利其器”，我们需要提前准备好以下材料：以及\n\n- 域名 两个(允许免费的Freenom域名)\n- CloudFlare 账户 一枚\n- 一个支持分线解析的DNS解析平台账号\n- 外币信用卡(允许0额度卡和虚拟信用卡) 一张 `(不收取任何费用)`\n\n或者\n\n- Paypal账号一个\n\n## CloudFlare 操作篇\n\n1.打开 `CloudFlare官网`，登录/注册账号，添加好你的网站域名并修改 `NameServer`使其在Cloudflare保持 `Active`状态。(注意:该域名并不是你访问的域名，而是你通过CNAME接入的地址，所以，你可以直接放心大胆的使用 `Freenom`域名!\n\n![CloudFlare接入域名](https://cdnn.boochi.cngh/inkdust-dev/ink-oss/main/image/20230711193423.png?image_process=format,webp \"如图，已成功接入域名\")\n\n接入完成后我们直接打开账户的 `付款方式`，点击 `用户头像`，点击 `账单`-`付款信息`，在此添加Paypal或信用卡。\n\n接着订购 `CloudFlare for SaaS`，进入你的域名，按下图所示操作订购服务，可以看到100个域名的免费额度。\n\n![购买SaaS](https://cdnn.boochi.cngh/inkdust-dev/ink-oss/main/image/20230711193833.png?image_process=format,webp)\n\n接下来，就是确定源站了。\n\n添加一个DNS记录，可以是任何记录(A,CNAME,…)。记录名建议为 `origin`，然后在自定义主机名页面中添加 `origin.<YOUR_DOMAIN>`，在底下添加你的访问域名，例如 `www.example.com`。\n\n![添加回退源](https://cdnn.boochi.cngh/inkdust-dev/ink-oss/main/image/20230711194134.png?image_process=format,webp)\n![SaaS设置](https://cdnn.boochi.cngh/inkdust-dev/ink-oss/main/image/20230711194134.png?image_process=format,webp)\n\n至此，你已完成了CloudFlare的操作。\n\n## 分线解析DNS 操作\n\n登录支持分线解析的DNS控制台，这里以 `DNSPOD`为例，添加你的域名，并修改 `NameServer`，使其变为 `正常解析`状态。\n\n添加一个CNAME解析到 `origin.<YOUR_DOMAIN>`，然后添加Cloudflare证书需要添加的记录。\n\n![添加证书记录](https://alpha-q3.sourcegcdn.com/2022/08/05/OGUDjNmj.jpg/webp)\n\n如有记录冲突请自行暂停和删除部分解析。\n\n待证书状态变为有效后就可以自选IP了。\n\n例如将 `www.example.com`的电信运营商解析到 `1.1.1.1`，就可以添加电信运营商的A记录到 `1.1.1.1`。\n\n![添加最佳IP](https://cdnn.boochi.cngh/inkdust-dev/ink-oss/main/image/20230711195117.png?image_process=format,webp)\n\n然后，访问你的域名，如果能访问的话，恭喜你成功接入。\n\n## 自选IP工具\n\n([XIU2/CloudFlare Speed Test])[https://github.com/XIU2/CloudflareSpeedTest]\n\n## 最后\n\nCloudFlare的节点数目众多，但资源有限，请勿滥用。\n","slug":"cloudflare-cname","published":1,"comments":1,"layout":"post","photos":[],"_id":"cm1xg6msw00019a9odqlp2g0f","content":"<p>自2021年年末后，Cloudflare禁用了使用 <code>API_KEY</code>自定义CNAME接入 <code>Partner</code>的方式，自选节点IP成为了历史。</p>\n<p>真的没有办法自选IP了</p>\n<p>吗?</p>\n<p>当然是有的，而且是Cloudflare官方提供的CNAME接入，即 <code>Cloudflare for SaaS</code>，我们依旧可以通过该方式来自定义IP节点，并且共享页面规则和WAF防火墙规则。</p>\n<h2 id=\"什么是CloudFlare-SaaS\"><a href=\"#什么是CloudFlare-SaaS\" class=\"headerlink\" title=\"什么是CloudFlare SaaS\"></a>什么是CloudFlare SaaS</h2><p>CloudFlare SaaS是指CloudFlare提供的基于云计算的软件即服务（Software-as-a-Service）解决方案。CloudFlare是一家提供网络安全和性能优化服务的公司，其SaaS产品能够帮助企业提高网站的安全性、可靠性和性能。使用CloudFlare SaaS，用户无需购买、安装或管理软件，而是通过互联网访问CloudFlare的平台，在云端享受各种功能和服务。这些服务包括DDoS保护、网站加速、负载均衡、SSL证书管理、全球内容分发网络（CDN）等。通过CloudFlare SaaS，用户可以轻松改善其在线应用程序和网站的用户体验，并减轻自身的技术负担。<br>（回答来自ChatGPT）</p>\n<h2 id=\"准备工作\"><a href=\"#准备工作\" class=\"headerlink\" title=\"准备工作\"></a>准备工作</h2><p>俗话说:“工欲善其事，必先利其器”，我们需要提前准备好以下材料：以及</p>\n<ul>\n<li>域名 两个(允许免费的Freenom域名)</li>\n<li>CloudFlare 账户 一枚</li>\n<li>一个支持分线解析的DNS解析平台账号</li>\n<li>外币信用卡(允许0额度卡和虚拟信用卡) 一张 <code>(不收取任何费用)</code></li>\n</ul>\n<p>或者</p>\n<ul>\n<li>Paypal账号一个</li>\n</ul>\n<h2 id=\"CloudFlare-操作篇\"><a href=\"#CloudFlare-操作篇\" class=\"headerlink\" title=\"CloudFlare 操作篇\"></a>CloudFlare 操作篇</h2><p>1.打开 <code>CloudFlare官网</code>，登录&#x2F;注册账号，添加好你的网站域名并修改 <code>NameServer</code>使其在Cloudflare保持 <code>Active</code>状态。(注意:该域名并不是你访问的域名，而是你通过CNAME接入的地址，所以，你可以直接放心大胆的使用 <code>Freenom</code>域名!</p>\n<p><img src=\"https://cdnn.boochi.cngh/inkdust-dev/ink-oss/main/image/20230711193423.png?image_process=format,webp\" alt=\"CloudFlare接入域名\" title=\"如图，已成功接入域名\"></p>\n<p>接入完成后我们直接打开账户的 <code>付款方式</code>，点击 <code>用户头像</code>，点击 <code>账单</code>-<code>付款信息</code>，在此添加Paypal或信用卡。</p>\n<p>接着订购 <code>CloudFlare for SaaS</code>，进入你的域名，按下图所示操作订购服务，可以看到100个域名的免费额度。</p>\n<p><img src=\"https://cdnn.boochi.cngh/inkdust-dev/ink-oss/main/image/20230711193833.png?image_process=format,webp\" alt=\"购买SaaS\"></p>\n<p>接下来，就是确定源站了。</p>\n<p>添加一个DNS记录，可以是任何记录(A,CNAME,…)。记录名建议为 <code>origin</code>，然后在自定义主机名页面中添加 <code>origin.&lt;YOUR_DOMAIN&gt;</code>，在底下添加你的访问域名，例如 <code>www.example.com</code>。</p>\n<p><img src=\"https://cdnn.boochi.cngh/inkdust-dev/ink-oss/main/image/20230711194134.png?image_process=format,webp\" alt=\"添加回退源\"><br><img src=\"https://cdnn.boochi.cngh/inkdust-dev/ink-oss/main/image/20230711194134.png?image_process=format,webp\" alt=\"SaaS设置\"></p>\n<p>至此，你已完成了CloudFlare的操作。</p>\n<h2 id=\"分线解析DNS-操作\"><a href=\"#分线解析DNS-操作\" class=\"headerlink\" title=\"分线解析DNS 操作\"></a>分线解析DNS 操作</h2><p>登录支持分线解析的DNS控制台，这里以 <code>DNSPOD</code>为例，添加你的域名，并修改 <code>NameServer</code>，使其变为 <code>正常解析</code>状态。</p>\n<p>添加一个CNAME解析到 <code>origin.&lt;YOUR_DOMAIN&gt;</code>，然后添加Cloudflare证书需要添加的记录。</p>\n<p><img src=\"https://alpha-q3.sourcegcdn.com/2022/08/05/OGUDjNmj.jpg/webp\" alt=\"添加证书记录\"></p>\n<p>如有记录冲突请自行暂停和删除部分解析。</p>\n<p>待证书状态变为有效后就可以自选IP了。</p>\n<p>例如将 <code>www.example.com</code>的电信运营商解析到 <code>1.1.1.1</code>，就可以添加电信运营商的A记录到 <code>1.1.1.1</code>。</p>\n<p><img src=\"https://cdnn.boochi.cngh/inkdust-dev/ink-oss/main/image/20230711195117.png?image_process=format,webp\" alt=\"添加最佳IP\"></p>\n<p>然后，访问你的域名，如果能访问的话，恭喜你成功接入。</p>\n<h2 id=\"自选IP工具\"><a href=\"#自选IP工具\" class=\"headerlink\" title=\"自选IP工具\"></a>自选IP工具</h2><p>([XIU2&#x2F;CloudFlare Speed Test])[<a href=\"https://github.com/XIU2/CloudflareSpeedTest]\">https://github.com/XIU2/CloudflareSpeedTest]</a></p>\n<h2 id=\"最后\"><a href=\"#最后\" class=\"headerlink\" title=\"最后\"></a>最后</h2><p>CloudFlare的节点数目众多，但资源有限，请勿滥用。</p>\n","excerpt":"","more":"<p>自2021年年末后，Cloudflare禁用了使用 <code>API_KEY</code>自定义CNAME接入 <code>Partner</code>的方式，自选节点IP成为了历史。</p>\n<p>真的没有办法自选IP了</p>\n<p>吗?</p>\n<p>当然是有的，而且是Cloudflare官方提供的CNAME接入，即 <code>Cloudflare for SaaS</code>，我们依旧可以通过该方式来自定义IP节点，并且共享页面规则和WAF防火墙规则。</p>\n<h2 id=\"什么是CloudFlare-SaaS\"><a href=\"#什么是CloudFlare-SaaS\" class=\"headerlink\" title=\"什么是CloudFlare SaaS\"></a>什么是CloudFlare SaaS</h2><p>CloudFlare SaaS是指CloudFlare提供的基于云计算的软件即服务（Software-as-a-Service）解决方案。CloudFlare是一家提供网络安全和性能优化服务的公司，其SaaS产品能够帮助企业提高网站的安全性、可靠性和性能。使用CloudFlare SaaS，用户无需购买、安装或管理软件，而是通过互联网访问CloudFlare的平台，在云端享受各种功能和服务。这些服务包括DDoS保护、网站加速、负载均衡、SSL证书管理、全球内容分发网络（CDN）等。通过CloudFlare SaaS，用户可以轻松改善其在线应用程序和网站的用户体验，并减轻自身的技术负担。<br>（回答来自ChatGPT）</p>\n<h2 id=\"准备工作\"><a href=\"#准备工作\" class=\"headerlink\" title=\"准备工作\"></a>准备工作</h2><p>俗话说:“工欲善其事，必先利其器”，我们需要提前准备好以下材料：以及</p>\n<ul>\n<li>域名 两个(允许免费的Freenom域名)</li>\n<li>CloudFlare 账户 一枚</li>\n<li>一个支持分线解析的DNS解析平台账号</li>\n<li>外币信用卡(允许0额度卡和虚拟信用卡) 一张 <code>(不收取任何费用)</code></li>\n</ul>\n<p>或者</p>\n<ul>\n<li>Paypal账号一个</li>\n</ul>\n<h2 id=\"CloudFlare-操作篇\"><a href=\"#CloudFlare-操作篇\" class=\"headerlink\" title=\"CloudFlare 操作篇\"></a>CloudFlare 操作篇</h2><p>1.打开 <code>CloudFlare官网</code>，登录&#x2F;注册账号，添加好你的网站域名并修改 <code>NameServer</code>使其在Cloudflare保持 <code>Active</code>状态。(注意:该域名并不是你访问的域名，而是你通过CNAME接入的地址，所以，你可以直接放心大胆的使用 <code>Freenom</code>域名!</p>\n<p><img src=\"https://cdnn.boochi.cngh/inkdust-dev/ink-oss/main/image/20230711193423.png?image_process=format,webp\" alt=\"CloudFlare接入域名\" title=\"如图，已成功接入域名\"></p>\n<p>接入完成后我们直接打开账户的 <code>付款方式</code>，点击 <code>用户头像</code>，点击 <code>账单</code>-<code>付款信息</code>，在此添加Paypal或信用卡。</p>\n<p>接着订购 <code>CloudFlare for SaaS</code>，进入你的域名，按下图所示操作订购服务，可以看到100个域名的免费额度。</p>\n<p><img src=\"https://cdnn.boochi.cngh/inkdust-dev/ink-oss/main/image/20230711193833.png?image_process=format,webp\" alt=\"购买SaaS\"></p>\n<p>接下来，就是确定源站了。</p>\n<p>添加一个DNS记录，可以是任何记录(A,CNAME,…)。记录名建议为 <code>origin</code>，然后在自定义主机名页面中添加 <code>origin.&lt;YOUR_DOMAIN&gt;</code>，在底下添加你的访问域名，例如 <code>www.example.com</code>。</p>\n<p><img src=\"https://cdnn.boochi.cngh/inkdust-dev/ink-oss/main/image/20230711194134.png?image_process=format,webp\" alt=\"添加回退源\"><br><img src=\"https://cdnn.boochi.cngh/inkdust-dev/ink-oss/main/image/20230711194134.png?image_process=format,webp\" alt=\"SaaS设置\"></p>\n<p>至此，你已完成了CloudFlare的操作。</p>\n<h2 id=\"分线解析DNS-操作\"><a href=\"#分线解析DNS-操作\" class=\"headerlink\" title=\"分线解析DNS 操作\"></a>分线解析DNS 操作</h2><p>登录支持分线解析的DNS控制台，这里以 <code>DNSPOD</code>为例，添加你的域名，并修改 <code>NameServer</code>，使其变为 <code>正常解析</code>状态。</p>\n<p>添加一个CNAME解析到 <code>origin.&lt;YOUR_DOMAIN&gt;</code>，然后添加Cloudflare证书需要添加的记录。</p>\n<p><img src=\"https://alpha-q3.sourcegcdn.com/2022/08/05/OGUDjNmj.jpg/webp\" alt=\"添加证书记录\"></p>\n<p>如有记录冲突请自行暂停和删除部分解析。</p>\n<p>待证书状态变为有效后就可以自选IP了。</p>\n<p>例如将 <code>www.example.com</code>的电信运营商解析到 <code>1.1.1.1</code>，就可以添加电信运营商的A记录到 <code>1.1.1.1</code>。</p>\n<p><img src=\"https://cdnn.boochi.cngh/inkdust-dev/ink-oss/main/image/20230711195117.png?image_process=format,webp\" alt=\"添加最佳IP\"></p>\n<p>然后，访问你的域名，如果能访问的话，恭喜你成功接入。</p>\n<h2 id=\"自选IP工具\"><a href=\"#自选IP工具\" class=\"headerlink\" title=\"自选IP工具\"></a>自选IP工具</h2><p>([XIU2&#x2F;CloudFlare Speed Test])[<a href=\"https://github.com/XIU2/CloudflareSpeedTest]\">https://github.com/XIU2/CloudflareSpeedTest]</a></p>\n<h2 id=\"最后\"><a href=\"#最后\" class=\"headerlink\" title=\"最后\"></a>最后</h2><p>CloudFlare的节点数目众多，但资源有限，请勿滥用。</p>\n"},{"abbrlink":"","copyright_author":"Tony","copyright_author_href":"https://blog.iamsjy.com/","copyright_info":"此文章版权归Tony所有，如有转载，请注明来自原作者","copyright_url":"https://blog.iamsjy.com/2022/10/04/deploy-umami-analytics-on-vercel/","index_img":"https://cdnn.boochi.cn/gh/inkdust-dev/ink-oss@main/blog-image/umami-vercel.webp","date":"2023-08-22T09:06:04.088Z","title":"【转载】在 Vercel 部署 umami 网站统计及报错解决","updated":"2024-08-18T15:04:06.114Z","_content":"# 转载\n\n**本文转载于 [在 Vercel 部署 umami 网站统计及报错解决 | Tony's Blog (iamsjy.com)](https://blog.iamsjy.com/2022/10/04/deploy-umami-analytics-on-vercel/)，遵循 [CC BY 4.0 协议](https://creativecommons.org/licenses/by/4.0/deed.zh).**\n\n**原文作者：Tony**\n\n**原文链接：** https://blog.iamsjy.com/2022/10/04/deploy-umami-analytics-on-vercel/\n\n## 导入\n\nUmami 是一种简单、快速的网站分析替代品，可替代 Google Analytics。\n\n注：本文前两部分转载于 Lemonawa’s Blog，遵循 CC BY 4.0 协议，报错解决部分为原创。\n\n## 准备\n\n一个GitHub账号\n\n一个Vercel账号（可直接由GitHub登录）\n\n一个supabase账号（可直接由GitHub登录）\n\n## 部署\n\n访问umami的代码仓库，将其Fork至自己的账户中。\n\n登录supabase，单击New Project来新建一个数据库，根据提示设置数据库名称和密码。\n\n![https://cdnn.boochi.cn/gh/inkdust-dev/ink-oss@main/qexo-upload/24/8/image_f75e98c762deb9acd3f82a8775488231.png](https://cdnn.boochi.cn/gh/inkdust-dev/ink-oss@main/qexo-upload/24/8/image_f75e98c762deb9acd3f82a8775488231.png)\n\n进入刚刚新建的Project，点击左边的SQL Editor（命令图标）- New query来新建查询，并将此处的命令全部复制到框中，随后点击RUN，看见Success即可。\n\n![https://cdnn.boochi.cn/gh/inkdust-dev/ink-oss@main/qexo-upload/24/8/image_1b20be42f32e15cbb185f7a205a8a76a.png](https://cdnn.boochi.cn/gh/inkdust-dev/ink-oss@main/qexo-upload/24/8/image_1b20be42f32e15cbb185f7a205a8a76a.png)\n\n然后打开Vercel，登录，点击New Project，在左侧选中Fork的项目，点击Environment Variables来设置环境变量：\n\n ![https://cdnn.boochi.cn/gh/inkdust-dev/ink-oss@main/qexo-upload/24/8/image_0818371b6ab29d2d828b547b89d13ac7.png](https://cdnn.boochi.cn/gh/inkdust-dev/ink-oss@main/qexo-upload/24/8/image_0818371b6ab29d2d828b547b89d13ac7.png)\n\nDATABASE_URL: postgresql://postgres:[YOUR-PASSWORD]@[Your-URI]:5432/postgres（在supabase project-左侧设置-Database-Connection string-URI获得）\n\nHASH_SALT: 随机英文字符串（滚键盘）\n\n然后点击部署，部署完成后会给一个域名，点击即可进入\n\n用户名：admin\n\n默认密码：umami\n\n## 报错解决\n\n你需要准备一台 Linux x86 VPS（不能是 arm64）。如果没有，建议使用 GitHub Codespaces 来操作。\n\n以下是详细步骤：\n\n数据库连接失败（Unable to connect to the database）\n\n请检查 Vercel 环境变量中 DATABASE_URL 的值是否填写正确，有没有多加 DATABASE_URL。修改后重新部署即可。\n\n数据库连接失败（A migration failed to apply.）\n\n将你 fork 的 umami 仓库 clone 到本地，并进入仓库目录。\n\ngit clone https://github.com/[你的 GitHub 用户名]/umami && cd umami\n\n在本地 umami 目录中创建一个 .env 文件，填入 DATABASE_URL= ，后面粘贴数据库连接地址（与 Vercel 环境变量中 DATABASE_URL 的值相同，可以直接复制过来）。\n\n在本地 umami 目录中执行以下命令：\n\nyarn install\n\nyarn build\n\n检查详细d报错信息，并根据不同的报错执行不同的修复命令\n\n如果是 02_add_event_data 错误则执行以下命令\n\nyarn prisma migrate resolve --applied \"02_add_event_data\"\n\n如果是 03_remove_casade_delete 错误则执行以下命令\n\nyarn prisma migrate resolve --applied \"03_remove_casade_delete\"\n\n等待命令执行完成，提示 Success! 则表示成功。\n","source":"_posts/deploy-umami-analytics-on-vercel.md","raw":"---\nabbrlink: ''\ncategories: []\ncopyright_author: Tony\ncopyright_author_href: https://blog.iamsjy.com/\ncopyright_info: 此文章版权归Tony所有，如有转载，请注明来自原作者\ncopyright_url: https://blog.iamsjy.com/2022/10/04/deploy-umami-analytics-on-vercel/\nindex_img: https://cdnn.boochi.cn/gh/inkdust-dev/ink-oss@main/blog-image/umami-vercel.webp\ndate: '2023-08-22T17:06:04.088431+08:00'\ntags: []\ntitle: 【转载】在 Vercel 部署 umami 网站统计及报错解决\nupdated: '2024-08-18T23:04:06.114+08:00'\n---\n# 转载\n\n**本文转载于 [在 Vercel 部署 umami 网站统计及报错解决 | Tony's Blog (iamsjy.com)](https://blog.iamsjy.com/2022/10/04/deploy-umami-analytics-on-vercel/)，遵循 [CC BY 4.0 协议](https://creativecommons.org/licenses/by/4.0/deed.zh).**\n\n**原文作者：Tony**\n\n**原文链接：** https://blog.iamsjy.com/2022/10/04/deploy-umami-analytics-on-vercel/\n\n## 导入\n\nUmami 是一种简单、快速的网站分析替代品，可替代 Google Analytics。\n\n注：本文前两部分转载于 Lemonawa’s Blog，遵循 CC BY 4.0 协议，报错解决部分为原创。\n\n## 准备\n\n一个GitHub账号\n\n一个Vercel账号（可直接由GitHub登录）\n\n一个supabase账号（可直接由GitHub登录）\n\n## 部署\n\n访问umami的代码仓库，将其Fork至自己的账户中。\n\n登录supabase，单击New Project来新建一个数据库，根据提示设置数据库名称和密码。\n\n![https://cdnn.boochi.cn/gh/inkdust-dev/ink-oss@main/qexo-upload/24/8/image_f75e98c762deb9acd3f82a8775488231.png](https://cdnn.boochi.cn/gh/inkdust-dev/ink-oss@main/qexo-upload/24/8/image_f75e98c762deb9acd3f82a8775488231.png)\n\n进入刚刚新建的Project，点击左边的SQL Editor（命令图标）- New query来新建查询，并将此处的命令全部复制到框中，随后点击RUN，看见Success即可。\n\n![https://cdnn.boochi.cn/gh/inkdust-dev/ink-oss@main/qexo-upload/24/8/image_1b20be42f32e15cbb185f7a205a8a76a.png](https://cdnn.boochi.cn/gh/inkdust-dev/ink-oss@main/qexo-upload/24/8/image_1b20be42f32e15cbb185f7a205a8a76a.png)\n\n然后打开Vercel，登录，点击New Project，在左侧选中Fork的项目，点击Environment Variables来设置环境变量：\n\n ![https://cdnn.boochi.cn/gh/inkdust-dev/ink-oss@main/qexo-upload/24/8/image_0818371b6ab29d2d828b547b89d13ac7.png](https://cdnn.boochi.cn/gh/inkdust-dev/ink-oss@main/qexo-upload/24/8/image_0818371b6ab29d2d828b547b89d13ac7.png)\n\nDATABASE_URL: postgresql://postgres:[YOUR-PASSWORD]@[Your-URI]:5432/postgres（在supabase project-左侧设置-Database-Connection string-URI获得）\n\nHASH_SALT: 随机英文字符串（滚键盘）\n\n然后点击部署，部署完成后会给一个域名，点击即可进入\n\n用户名：admin\n\n默认密码：umami\n\n## 报错解决\n\n你需要准备一台 Linux x86 VPS（不能是 arm64）。如果没有，建议使用 GitHub Codespaces 来操作。\n\n以下是详细步骤：\n\n数据库连接失败（Unable to connect to the database）\n\n请检查 Vercel 环境变量中 DATABASE_URL 的值是否填写正确，有没有多加 DATABASE_URL。修改后重新部署即可。\n\n数据库连接失败（A migration failed to apply.）\n\n将你 fork 的 umami 仓库 clone 到本地，并进入仓库目录。\n\ngit clone https://github.com/[你的 GitHub 用户名]/umami && cd umami\n\n在本地 umami 目录中创建一个 .env 文件，填入 DATABASE_URL= ，后面粘贴数据库连接地址（与 Vercel 环境变量中 DATABASE_URL 的值相同，可以直接复制过来）。\n\n在本地 umami 目录中执行以下命令：\n\nyarn install\n\nyarn build\n\n检查详细d报错信息，并根据不同的报错执行不同的修复命令\n\n如果是 02_add_event_data 错误则执行以下命令\n\nyarn prisma migrate resolve --applied \"02_add_event_data\"\n\n如果是 03_remove_casade_delete 错误则执行以下命令\n\nyarn prisma migrate resolve --applied \"03_remove_casade_delete\"\n\n等待命令执行完成，提示 Success! 则表示成功。\n","slug":"deploy-umami-analytics-on-vercel","published":1,"comments":1,"layout":"post","photos":[],"_id":"cm1xg6msy00029a9oe4bw3t1u","content":"<h1 id=\"转载\"><a href=\"#转载\" class=\"headerlink\" title=\"转载\"></a>转载</h1><p><strong>本文转载于 <a href=\"https://blog.iamsjy.com/2022/10/04/deploy-umami-analytics-on-vercel/\">在 Vercel 部署 umami 网站统计及报错解决 | Tony’s Blog (iamsjy.com)</a>，遵循 <a href=\"https://creativecommons.org/licenses/by/4.0/deed.zh\">CC BY 4.0 协议</a>.</strong></p>\n<p><strong>原文作者：Tony</strong></p>\n<p><strong>原文链接：</strong> <a href=\"https://blog.iamsjy.com/2022/10/04/deploy-umami-analytics-on-vercel/\">https://blog.iamsjy.com/2022/10/04/deploy-umami-analytics-on-vercel/</a></p>\n<h2 id=\"导入\"><a href=\"#导入\" class=\"headerlink\" title=\"导入\"></a>导入</h2><p>Umami 是一种简单、快速的网站分析替代品，可替代 Google Analytics。</p>\n<p>注：本文前两部分转载于 Lemonawa’s Blog，遵循 CC BY 4.0 协议，报错解决部分为原创。</p>\n<h2 id=\"准备\"><a href=\"#准备\" class=\"headerlink\" title=\"准备\"></a>准备</h2><p>一个GitHub账号</p>\n<p>一个Vercel账号（可直接由GitHub登录）</p>\n<p>一个supabase账号（可直接由GitHub登录）</p>\n<h2 id=\"部署\"><a href=\"#部署\" class=\"headerlink\" title=\"部署\"></a>部署</h2><p>访问umami的代码仓库，将其Fork至自己的账户中。</p>\n<p>登录supabase，单击New Project来新建一个数据库，根据提示设置数据库名称和密码。</p>\n<p><img src=\"https://cdnn.boochi.cn/gh/inkdust-dev/ink-oss@main/qexo-upload/24/8/image_f75e98c762deb9acd3f82a8775488231.png\" alt=\"https://cdnn.boochi.cn/gh/inkdust-dev/ink-oss@main/qexo-upload/24/8/image_f75e98c762deb9acd3f82a8775488231.png\"></p>\n<p>进入刚刚新建的Project，点击左边的SQL Editor（命令图标）- New query来新建查询，并将此处的命令全部复制到框中，随后点击RUN，看见Success即可。</p>\n<p><img src=\"https://cdnn.boochi.cn/gh/inkdust-dev/ink-oss@main/qexo-upload/24/8/image_1b20be42f32e15cbb185f7a205a8a76a.png\" alt=\"https://cdnn.boochi.cn/gh/inkdust-dev/ink-oss@main/qexo-upload/24/8/image_1b20be42f32e15cbb185f7a205a8a76a.png\"></p>\n<p>然后打开Vercel，登录，点击New Project，在左侧选中Fork的项目，点击Environment Variables来设置环境变量：</p>\n<p> <img src=\"https://cdnn.boochi.cn/gh/inkdust-dev/ink-oss@main/qexo-upload/24/8/image_0818371b6ab29d2d828b547b89d13ac7.png\" alt=\"https://cdnn.boochi.cn/gh/inkdust-dev/ink-oss@main/qexo-upload/24/8/image_0818371b6ab29d2d828b547b89d13ac7.png\"></p>\n<p>DATABASE_URL: postgresql:&#x2F;&#x2F;postgres:[YOUR-PASSWORD]@[Your-URI]:5432&#x2F;postgres（在supabase project-左侧设置-Database-Connection string-URI获得）</p>\n<p>HASH_SALT: 随机英文字符串（滚键盘）</p>\n<p>然后点击部署，部署完成后会给一个域名，点击即可进入</p>\n<p>用户名：admin</p>\n<p>默认密码：umami</p>\n<h2 id=\"报错解决\"><a href=\"#报错解决\" class=\"headerlink\" title=\"报错解决\"></a>报错解决</h2><p>你需要准备一台 Linux x86 VPS（不能是 arm64）。如果没有，建议使用 GitHub Codespaces 来操作。</p>\n<p>以下是详细步骤：</p>\n<p>数据库连接失败（Unable to connect to the database）</p>\n<p>请检查 Vercel 环境变量中 DATABASE_URL 的值是否填写正确，有没有多加 DATABASE_URL。修改后重新部署即可。</p>\n<p>数据库连接失败（A migration failed to apply.）</p>\n<p>将你 fork 的 umami 仓库 clone 到本地，并进入仓库目录。</p>\n<p>git clone <a href=\"https://github.com/[%E4%BD%A0%E7%9A%84\">https://github.com/[你的</a> GitHub 用户名]&#x2F;umami &amp;&amp; cd umami</p>\n<p>在本地 umami 目录中创建一个 .env 文件，填入 DATABASE_URL&#x3D; ，后面粘贴数据库连接地址（与 Vercel 环境变量中 DATABASE_URL 的值相同，可以直接复制过来）。</p>\n<p>在本地 umami 目录中执行以下命令：</p>\n<p>yarn install</p>\n<p>yarn build</p>\n<p>检查详细d报错信息，并根据不同的报错执行不同的修复命令</p>\n<p>如果是 02_add_event_data 错误则执行以下命令</p>\n<p>yarn prisma migrate resolve –applied “02_add_event_data”</p>\n<p>如果是 03_remove_casade_delete 错误则执行以下命令</p>\n<p>yarn prisma migrate resolve –applied “03_remove_casade_delete”</p>\n<p>等待命令执行完成，提示 Success! 则表示成功。</p>\n","excerpt":"","more":"<h1 id=\"转载\"><a href=\"#转载\" class=\"headerlink\" title=\"转载\"></a>转载</h1><p><strong>本文转载于 <a href=\"https://blog.iamsjy.com/2022/10/04/deploy-umami-analytics-on-vercel/\">在 Vercel 部署 umami 网站统计及报错解决 | Tony’s Blog (iamsjy.com)</a>，遵循 <a href=\"https://creativecommons.org/licenses/by/4.0/deed.zh\">CC BY 4.0 协议</a>.</strong></p>\n<p><strong>原文作者：Tony</strong></p>\n<p><strong>原文链接：</strong> <a href=\"https://blog.iamsjy.com/2022/10/04/deploy-umami-analytics-on-vercel/\">https://blog.iamsjy.com/2022/10/04/deploy-umami-analytics-on-vercel/</a></p>\n<h2 id=\"导入\"><a href=\"#导入\" class=\"headerlink\" title=\"导入\"></a>导入</h2><p>Umami 是一种简单、快速的网站分析替代品，可替代 Google Analytics。</p>\n<p>注：本文前两部分转载于 Lemonawa’s Blog，遵循 CC BY 4.0 协议，报错解决部分为原创。</p>\n<h2 id=\"准备\"><a href=\"#准备\" class=\"headerlink\" title=\"准备\"></a>准备</h2><p>一个GitHub账号</p>\n<p>一个Vercel账号（可直接由GitHub登录）</p>\n<p>一个supabase账号（可直接由GitHub登录）</p>\n<h2 id=\"部署\"><a href=\"#部署\" class=\"headerlink\" title=\"部署\"></a>部署</h2><p>访问umami的代码仓库，将其Fork至自己的账户中。</p>\n<p>登录supabase，单击New Project来新建一个数据库，根据提示设置数据库名称和密码。</p>\n<p><img src=\"https://cdnn.boochi.cn/gh/inkdust-dev/ink-oss@main/qexo-upload/24/8/image_f75e98c762deb9acd3f82a8775488231.png\" alt=\"https://cdnn.boochi.cn/gh/inkdust-dev/ink-oss@main/qexo-upload/24/8/image_f75e98c762deb9acd3f82a8775488231.png\"></p>\n<p>进入刚刚新建的Project，点击左边的SQL Editor（命令图标）- New query来新建查询，并将此处的命令全部复制到框中，随后点击RUN，看见Success即可。</p>\n<p><img src=\"https://cdnn.boochi.cn/gh/inkdust-dev/ink-oss@main/qexo-upload/24/8/image_1b20be42f32e15cbb185f7a205a8a76a.png\" alt=\"https://cdnn.boochi.cn/gh/inkdust-dev/ink-oss@main/qexo-upload/24/8/image_1b20be42f32e15cbb185f7a205a8a76a.png\"></p>\n<p>然后打开Vercel，登录，点击New Project，在左侧选中Fork的项目，点击Environment Variables来设置环境变量：</p>\n<p> <img src=\"https://cdnn.boochi.cn/gh/inkdust-dev/ink-oss@main/qexo-upload/24/8/image_0818371b6ab29d2d828b547b89d13ac7.png\" alt=\"https://cdnn.boochi.cn/gh/inkdust-dev/ink-oss@main/qexo-upload/24/8/image_0818371b6ab29d2d828b547b89d13ac7.png\"></p>\n<p>DATABASE_URL: postgresql:&#x2F;&#x2F;postgres:[YOUR-PASSWORD]@[Your-URI]:5432&#x2F;postgres（在supabase project-左侧设置-Database-Connection string-URI获得）</p>\n<p>HASH_SALT: 随机英文字符串（滚键盘）</p>\n<p>然后点击部署，部署完成后会给一个域名，点击即可进入</p>\n<p>用户名：admin</p>\n<p>默认密码：umami</p>\n<h2 id=\"报错解决\"><a href=\"#报错解决\" class=\"headerlink\" title=\"报错解决\"></a>报错解决</h2><p>你需要准备一台 Linux x86 VPS（不能是 arm64）。如果没有，建议使用 GitHub Codespaces 来操作。</p>\n<p>以下是详细步骤：</p>\n<p>数据库连接失败（Unable to connect to the database）</p>\n<p>请检查 Vercel 环境变量中 DATABASE_URL 的值是否填写正确，有没有多加 DATABASE_URL。修改后重新部署即可。</p>\n<p>数据库连接失败（A migration failed to apply.）</p>\n<p>将你 fork 的 umami 仓库 clone 到本地，并进入仓库目录。</p>\n<p>git clone <a href=\"https://github.com/[%E4%BD%A0%E7%9A%84\">https://github.com/[你的</a> GitHub 用户名]&#x2F;umami &amp;&amp; cd umami</p>\n<p>在本地 umami 目录中创建一个 .env 文件，填入 DATABASE_URL&#x3D; ，后面粘贴数据库连接地址（与 Vercel 环境变量中 DATABASE_URL 的值相同，可以直接复制过来）。</p>\n<p>在本地 umami 目录中执行以下命令：</p>\n<p>yarn install</p>\n<p>yarn build</p>\n<p>检查详细d报错信息，并根据不同的报错执行不同的修复命令</p>\n<p>如果是 02_add_event_data 错误则执行以下命令</p>\n<p>yarn prisma migrate resolve –applied “02_add_event_data”</p>\n<p>如果是 03_remove_casade_delete 错误则执行以下命令</p>\n<p>yarn prisma migrate resolve –applied “03_remove_casade_delete”</p>\n<p>等待命令执行完成，提示 Success! 则表示成功。</p>\n"},{"abbrlink":"","index_img":"https://cdnn.boochi.cn/gh/inkdust-dev/ink-oss@main/qexo-upload/2023/8/KILL%20EWT360_a47380354d7025b6b07523359137b1b2.png","date":"2023-08-19T07:00:38.639Z","title":"升学E网通试题答案获取、自动答题全方位薄纱","updated":"2024-08-07T14:28:31.410Z","_content":"## 什么是EWT360？\n\n升学E网通集助学、助考、和升学为一体，是国内领先的高中生综合指导系统，专为高中同学打造的提供学习、助学备考、志愿填报、升学报考等服务的平台。（来自其SEO META）\n\n[升学e网通,升学助考一网通 (ewt360.com)](https://www.ewt360.com/)\n\n## 倍速视频\n\n倍速视频的方法现在已被Ewt360屏蔽，推荐使用Github上面landuoguo大佬制作的自动刷课工具。\n\n[landuoguo/ewt360: 某e网通研究 (github.com)](https://github.com/landuoguo/ewt360)](https://github.com/landuoguo/ewt360)\n\n当然也可以尝试使用[Greasy Fork](https://greasyfork.org/zh-CN)上面的油猴脚本。\n\n例如：\n\n[升学 E 网通 (EWT360) 播放速率 16 (greasyfork.org)](https://greasyfork.org/zh-CN/scripts/448697-%E5%8D%87%E5%AD%A6-e-%E7%BD%91%E9%80%9A-ewt360-%E6%92%AD%E6%94%BE%E9%80%9F%E7%8E%87-16)\n\n[升学 E 网通 (EWT360) 心晴FM 播放速率 16 (greasyfork.org)](https://greasyfork.org/zh-CN/scripts/448699-%E5%8D%87%E5%AD%A6-e-%E7%BD%91%E9%80%9A-ewt360-%E5%BF%83%E6%99%B4fm-%E6%92%AD%E6%94%BE%E9%80%9F%E7%8E%87-16)\n\n## 答案获取\n\n使用油猴脚本 `升学 E 网通 (EWT360) 试卷选择题自动完成 + 试题答案获取`可快速获取到EWT的试题答案，插件会在答题界面自动生效。\n\n预览：\n\n![https://cdnn.boochi.cn/gh/inkdust-dev/ink-oss@main/qexo-upload/2023/8/QQ截图20230821202910_fb4aed626df300ee9a7dcc1da4ae413a.png](https://cdnn.boochi.cn/gh/inkdust-dev/ink-oss@main/qexo-upload/2023/8/QQ截图20230821202910_fb4aed626df300ee9a7dcc1da4ae413a.png)\n\n## 自动答题\n\n同上\n\n## 其他程序和地址项目\n\n[用户脚本 (greasyfork.org)](https://greasyfork.org/zh-CN/scripts?q=ewt)\n\n[houtarchat-cyber/EWT-get-answer: 此脚本在 EWT 试题中获取试题答案并自动完成选择题。 (github.com)](https://github.com/houtarchat-cyber/EWT-get-answer)\n\n[SHIELDXIE/shengxue\\_ewt360: 升学e网通——http://study.ewt360.com/ (github.com)](https://github.com/SHIELDXIE/shengxue_ewt360)\n\n[lc6464/ewtPrograms: 升学E网通相关程序，具有各种不同的功能。 (github.com)](https://github.com/lc6464/ewtPrograms)\n\n[nuym/ewt360-scripts: e网通常用多合一脚本 (github.com)](https://github.com/nuym/ewt360-scripts)\n\n## 注意\n\n请注意：使用自动程序操纵在线答题平台可能会违反相关平台规定、道德和法律，本平台的内容仅供研究和学习，请勿用作违法行为，使用上述任意程序带来的不良后果与本人无关。\n","source":"_posts/kill-ewt360.md","raw":"---\nabbrlink: ''\ncategories: []\nindex_img: https://cdnn.boochi.cn/gh/inkdust-dev/ink-oss@main/qexo-upload/2023/8/KILL%20EWT360_a47380354d7025b6b07523359137b1b2.png\ndate: '2023-08-19T15:00:38.639280+08:00'\ntags: []\ntitle: 升学E网通试题答案获取、自动答题全方位薄纱\nupdated: '2024-08-07T22:28:31.410+08:00'\n---\n## 什么是EWT360？\n\n升学E网通集助学、助考、和升学为一体，是国内领先的高中生综合指导系统，专为高中同学打造的提供学习、助学备考、志愿填报、升学报考等服务的平台。（来自其SEO META）\n\n[升学e网通,升学助考一网通 (ewt360.com)](https://www.ewt360.com/)\n\n## 倍速视频\n\n倍速视频的方法现在已被Ewt360屏蔽，推荐使用Github上面landuoguo大佬制作的自动刷课工具。\n\n[landuoguo/ewt360: 某e网通研究 (github.com)](https://github.com/landuoguo/ewt360)](https://github.com/landuoguo/ewt360)\n\n当然也可以尝试使用[Greasy Fork](https://greasyfork.org/zh-CN)上面的油猴脚本。\n\n例如：\n\n[升学 E 网通 (EWT360) 播放速率 16 (greasyfork.org)](https://greasyfork.org/zh-CN/scripts/448697-%E5%8D%87%E5%AD%A6-e-%E7%BD%91%E9%80%9A-ewt360-%E6%92%AD%E6%94%BE%E9%80%9F%E7%8E%87-16)\n\n[升学 E 网通 (EWT360) 心晴FM 播放速率 16 (greasyfork.org)](https://greasyfork.org/zh-CN/scripts/448699-%E5%8D%87%E5%AD%A6-e-%E7%BD%91%E9%80%9A-ewt360-%E5%BF%83%E6%99%B4fm-%E6%92%AD%E6%94%BE%E9%80%9F%E7%8E%87-16)\n\n## 答案获取\n\n使用油猴脚本 `升学 E 网通 (EWT360) 试卷选择题自动完成 + 试题答案获取`可快速获取到EWT的试题答案，插件会在答题界面自动生效。\n\n预览：\n\n![https://cdnn.boochi.cn/gh/inkdust-dev/ink-oss@main/qexo-upload/2023/8/QQ截图20230821202910_fb4aed626df300ee9a7dcc1da4ae413a.png](https://cdnn.boochi.cn/gh/inkdust-dev/ink-oss@main/qexo-upload/2023/8/QQ截图20230821202910_fb4aed626df300ee9a7dcc1da4ae413a.png)\n\n## 自动答题\n\n同上\n\n## 其他程序和地址项目\n\n[用户脚本 (greasyfork.org)](https://greasyfork.org/zh-CN/scripts?q=ewt)\n\n[houtarchat-cyber/EWT-get-answer: 此脚本在 EWT 试题中获取试题答案并自动完成选择题。 (github.com)](https://github.com/houtarchat-cyber/EWT-get-answer)\n\n[SHIELDXIE/shengxue\\_ewt360: 升学e网通——http://study.ewt360.com/ (github.com)](https://github.com/SHIELDXIE/shengxue_ewt360)\n\n[lc6464/ewtPrograms: 升学E网通相关程序，具有各种不同的功能。 (github.com)](https://github.com/lc6464/ewtPrograms)\n\n[nuym/ewt360-scripts: e网通常用多合一脚本 (github.com)](https://github.com/nuym/ewt360-scripts)\n\n## 注意\n\n请注意：使用自动程序操纵在线答题平台可能会违反相关平台规定、道德和法律，本平台的内容仅供研究和学习，请勿用作违法行为，使用上述任意程序带来的不良后果与本人无关。\n","slug":"kill-ewt360","published":1,"comments":1,"layout":"post","photos":[],"_id":"cm1xg6mt100049a9oa8l3crnj","content":"<h2 id=\"什么是EWT360？\"><a href=\"#什么是EWT360？\" class=\"headerlink\" title=\"什么是EWT360？\"></a>什么是EWT360？</h2><p>升学E网通集助学、助考、和升学为一体，是国内领先的高中生综合指导系统，专为高中同学打造的提供学习、助学备考、志愿填报、升学报考等服务的平台。（来自其SEO META）</p>\n<p><a href=\"https://www.ewt360.com/\">升学e网通,升学助考一网通 (ewt360.com)</a></p>\n<h2 id=\"倍速视频\"><a href=\"#倍速视频\" class=\"headerlink\" title=\"倍速视频\"></a>倍速视频</h2><p>倍速视频的方法现在已被Ewt360屏蔽，推荐使用Github上面landuoguo大佬制作的自动刷课工具。</p>\n<p><a href=\"https://github.com/landuoguo/ewt360\">landuoguo&#x2F;ewt360: 某e网通研究 (github.com)</a>](<a href=\"https://github.com/landuoguo/ewt360\">https://github.com/landuoguo/ewt360</a>)</p>\n<p>当然也可以尝试使用<a href=\"https://greasyfork.org/zh-CN\">Greasy Fork</a>上面的油猴脚本。</p>\n<p>例如：</p>\n<p><a href=\"https://greasyfork.org/zh-CN/scripts/448697-%E5%8D%87%E5%AD%A6-e-%E7%BD%91%E9%80%9A-ewt360-%E6%92%AD%E6%94%BE%E9%80%9F%E7%8E%87-16\">升学 E 网通 (EWT360) 播放速率 16 (greasyfork.org)</a></p>\n<p><a href=\"https://greasyfork.org/zh-CN/scripts/448699-%E5%8D%87%E5%AD%A6-e-%E7%BD%91%E9%80%9A-ewt360-%E5%BF%83%E6%99%B4fm-%E6%92%AD%E6%94%BE%E9%80%9F%E7%8E%87-16\">升学 E 网通 (EWT360) 心晴FM 播放速率 16 (greasyfork.org)</a></p>\n<h2 id=\"答案获取\"><a href=\"#答案获取\" class=\"headerlink\" title=\"答案获取\"></a>答案获取</h2><p>使用油猴脚本 <code>升学 E 网通 (EWT360) 试卷选择题自动完成 + 试题答案获取</code>可快速获取到EWT的试题答案，插件会在答题界面自动生效。</p>\n<p>预览：</p>\n<p><img src=\"https://cdnn.boochi.cn/gh/inkdust-dev/ink-oss@main/qexo-upload/2023/8/QQ%E6%88%AA%E5%9B%BE20230821202910_fb4aed626df300ee9a7dcc1da4ae413a.png\" alt=\"https://cdnn.boochi.cn/gh/inkdust-dev/ink-oss@main/qexo-upload/2023/8/QQ截图20230821202910_fb4aed626df300ee9a7dcc1da4ae413a.png\"></p>\n<h2 id=\"自动答题\"><a href=\"#自动答题\" class=\"headerlink\" title=\"自动答题\"></a>自动答题</h2><p>同上</p>\n<h2 id=\"其他程序和地址项目\"><a href=\"#其他程序和地址项目\" class=\"headerlink\" title=\"其他程序和地址项目\"></a>其他程序和地址项目</h2><p><a href=\"https://greasyfork.org/zh-CN/scripts?q=ewt\">用户脚本 (greasyfork.org)</a></p>\n<p><a href=\"https://github.com/houtarchat-cyber/EWT-get-answer\">houtarchat-cyber&#x2F;EWT-get-answer: 此脚本在 EWT 试题中获取试题答案并自动完成选择题。 (github.com)</a></p>\n<p><a href=\"https://github.com/SHIELDXIE/shengxue_ewt360\">SHIELDXIE&#x2F;shengxue_ewt360: 升学e网通——http://study.ewt360.com/ (github.com)</a></p>\n<p><a href=\"https://github.com/lc6464/ewtPrograms\">lc6464&#x2F;ewtPrograms: 升学E网通相关程序，具有各种不同的功能。 (github.com)</a></p>\n<p><a href=\"https://github.com/nuym/ewt360-scripts\">nuym&#x2F;ewt360-scripts: e网通常用多合一脚本 (github.com)</a></p>\n<h2 id=\"注意\"><a href=\"#注意\" class=\"headerlink\" title=\"注意\"></a>注意</h2><p>请注意：使用自动程序操纵在线答题平台可能会违反相关平台规定、道德和法律，本平台的内容仅供研究和学习，请勿用作违法行为，使用上述任意程序带来的不良后果与本人无关。</p>\n","excerpt":"","more":"<h2 id=\"什么是EWT360？\"><a href=\"#什么是EWT360？\" class=\"headerlink\" title=\"什么是EWT360？\"></a>什么是EWT360？</h2><p>升学E网通集助学、助考、和升学为一体，是国内领先的高中生综合指导系统，专为高中同学打造的提供学习、助学备考、志愿填报、升学报考等服务的平台。（来自其SEO META）</p>\n<p><a href=\"https://www.ewt360.com/\">升学e网通,升学助考一网通 (ewt360.com)</a></p>\n<h2 id=\"倍速视频\"><a href=\"#倍速视频\" class=\"headerlink\" title=\"倍速视频\"></a>倍速视频</h2><p>倍速视频的方法现在已被Ewt360屏蔽，推荐使用Github上面landuoguo大佬制作的自动刷课工具。</p>\n<p><a href=\"https://github.com/landuoguo/ewt360\">landuoguo&#x2F;ewt360: 某e网通研究 (github.com)</a>](<a href=\"https://github.com/landuoguo/ewt360\">https://github.com/landuoguo/ewt360</a>)</p>\n<p>当然也可以尝试使用<a href=\"https://greasyfork.org/zh-CN\">Greasy Fork</a>上面的油猴脚本。</p>\n<p>例如：</p>\n<p><a href=\"https://greasyfork.org/zh-CN/scripts/448697-%E5%8D%87%E5%AD%A6-e-%E7%BD%91%E9%80%9A-ewt360-%E6%92%AD%E6%94%BE%E9%80%9F%E7%8E%87-16\">升学 E 网通 (EWT360) 播放速率 16 (greasyfork.org)</a></p>\n<p><a href=\"https://greasyfork.org/zh-CN/scripts/448699-%E5%8D%87%E5%AD%A6-e-%E7%BD%91%E9%80%9A-ewt360-%E5%BF%83%E6%99%B4fm-%E6%92%AD%E6%94%BE%E9%80%9F%E7%8E%87-16\">升学 E 网通 (EWT360) 心晴FM 播放速率 16 (greasyfork.org)</a></p>\n<h2 id=\"答案获取\"><a href=\"#答案获取\" class=\"headerlink\" title=\"答案获取\"></a>答案获取</h2><p>使用油猴脚本 <code>升学 E 网通 (EWT360) 试卷选择题自动完成 + 试题答案获取</code>可快速获取到EWT的试题答案，插件会在答题界面自动生效。</p>\n<p>预览：</p>\n<p><img src=\"https://cdnn.boochi.cn/gh/inkdust-dev/ink-oss@main/qexo-upload/2023/8/QQ%E6%88%AA%E5%9B%BE20230821202910_fb4aed626df300ee9a7dcc1da4ae413a.png\" alt=\"https://cdnn.boochi.cn/gh/inkdust-dev/ink-oss@main/qexo-upload/2023/8/QQ截图20230821202910_fb4aed626df300ee9a7dcc1da4ae413a.png\"></p>\n<h2 id=\"自动答题\"><a href=\"#自动答题\" class=\"headerlink\" title=\"自动答题\"></a>自动答题</h2><p>同上</p>\n<h2 id=\"其他程序和地址项目\"><a href=\"#其他程序和地址项目\" class=\"headerlink\" title=\"其他程序和地址项目\"></a>其他程序和地址项目</h2><p><a href=\"https://greasyfork.org/zh-CN/scripts?q=ewt\">用户脚本 (greasyfork.org)</a></p>\n<p><a href=\"https://github.com/houtarchat-cyber/EWT-get-answer\">houtarchat-cyber&#x2F;EWT-get-answer: 此脚本在 EWT 试题中获取试题答案并自动完成选择题。 (github.com)</a></p>\n<p><a href=\"https://github.com/SHIELDXIE/shengxue_ewt360\">SHIELDXIE&#x2F;shengxue_ewt360: 升学e网通——http://study.ewt360.com/ (github.com)</a></p>\n<p><a href=\"https://github.com/lc6464/ewtPrograms\">lc6464&#x2F;ewtPrograms: 升学E网通相关程序，具有各种不同的功能。 (github.com)</a></p>\n<p><a href=\"https://github.com/nuym/ewt360-scripts\">nuym&#x2F;ewt360-scripts: e网通常用多合一脚本 (github.com)</a></p>\n<h2 id=\"注意\"><a href=\"#注意\" class=\"headerlink\" title=\"注意\"></a>注意</h2><p>请注意：使用自动程序操纵在线答题平台可能会违反相关平台规定、道德和法律，本平台的内容仅供研究和学习，请勿用作违法行为，使用上述任意程序带来的不良后果与本人无关。</p>\n"},{"abbrlink":"","index_img":"https://cdnn.boochi.cn/gh/inkdust-dev/ink-oss@main/qexo-upload/24/8/ltesencrypt-ssl_be3d1fad61002208589a66246d0a7e78.png","date":"2024-08-07T14:26:44.564Z","title":"SSL系列一之快速签发免费Let's Encrypt泛域名证书","updated":"2024-08-07T14:27:13.280Z","_content":"## 引入\n\n现如今，向像腾讯，阿里云等大厂的免费SSL证书，都由一年缩短为3个月。\n\n[https://cloud.tencent.com/document/product/400/104538](https://cloud.tencent.com/document/product/400/104538)\n\n在如今的形式下，签发免费的3个月的单域名证书显然不如直接签发Let's Encrypt、ZeroSSL等ACME提供的泛域名证书来的方便。\n\n而acme.sh常用于Linux端上证书的自动化签发与续约，对于不使用服务器的人群，显然造成了许多麻烦，那么可以通过Web端直接签发这些ACME的泛域名证书吗？\n\nGithub开源项目ACME-Web-Browser-Client告诉了我们这并非是一件不可能实现的事情。\n\n简介：\n\n本网页客户端（仅一个静态HTML网页文件）用于：向 Let's Encrypt、ZeroSSL、Google 等支持 ACME 协议的证书颁发机构，免费申请获得用于 HTTPS 的 SSL/TLS 域名证书（RSA、ECC/ECDSA），支持多域名和通配符泛域名；只需在现代浏览器上操作即可获得 PEM 格式纯文本的域名证书，不依赖操作系统环境（Windows、macOS都能用），无需下载和安装软件，无需注册登录，纯手动操作，只专注于申请获得证书这一件事，简单易用，非常适用于希望手动快捷申请获得证书的使用场景。\n\nGithub开源地址：[https://github.com/xiangyuecn/ACME-HTML-Web-Browser-Client](https://github.com/xiangyuecn/ACME-HTML-Web-Browser-Client)\n\nGitee开源地址：\n\nhttps://gitee.com/xiangyuecn/ACME-HTML-Web-Browser-Client\n\n## 使用\n\n提示：可将其私有化部署到Vercel，Netlify等上，可弥补Github Pages速度的不足。\n\n任意点击下列一个网页使用：\n\nhttps://xiangyuecn.github.io/ACME-HTML-Web-Browser-Client/ACME-HTML-Web-Browser-Client.html （作者Github Pages）\n\nhttps://ssl.dev.inkdust.top/ （本人Vercel）\n\n## 签发Let's Encrypt\n\n本文为签发Let's Encrypt篇教程，签发ZeroSSL或Google，请看ZeroSSL篇和Google篇。\n\n### 步骤一：选择证书颁发机构\n\n在“证书颁发机构 ACME(v2, RFC 8555) 服务URL”下选择Let's Encrypt，点击 `读取服务目录`并等待出现：\n\n读取服务目录成功，请进行下一步操作。 URL=https://acme-v02.api.letsencrypt.org/directory\n\n即为成功选择Let's Encrypt。\n\n### 步骤二：证书配置\n\n提示：如果上次申请过证书，可以拖拽已下载保存的记录LOG文件到本页面，将自动填充上次的配置信息。\n\n在“证书中要包含的域名：”中填写你要签发的域名。\n\n泛域名填写方式：example.com,*.example.com\n\n单域名填写方式：www.example.com\n\n多域名合并：www.example.com,site1.example.com,site2.example.com\n\n`带通配符的域名只支持DNS验证，其他域名支持上传文件验证`\n\n在 `证书的私钥：`处一般选择 `创建新RSA私钥`或 `创建新ECC私钥`，根据证书的加密形式而定。\n\n在 `ACME账户的私钥：`处一般选择 `创建新RSA私钥 `或 `创建新ECC私钥 `，根据证书的加密形式而定。\n\n在 ` ACME账户的联系邮箱：`处填写你的邮箱，该邮箱必须真实存在。\n\n### 步骤三：验证域名所有权\n\n请给每个域名选择一个你合适的验证方式，泛域名只能使用DNS解析方式。\n\nDNS解析方式：登陆到你的解析提供平台，如DNSPod，CloudFlare等，添加一条或多条TXT记录。\n\n文件验证方式：仅限单域名，在你域名所属的文件目录下 创建 `/.well-known/acme-challenge/`目录并在内创建验证文件。\n\nTLS-ALPN-01：使用Key Authorizations (Token+.+指纹)自行处理，Digest为Key Authorizations的SHA-256 Base64值。\n\n完成后，点击“开始验证”即可验证。\n\n## 步骤四：下载保存证书PEM文件\n\n完成验证后，服务端会自动签发SSL证书，点击下载即可下载证书对应私钥，公钥和Log文件。\n\n### 其他提示\n\n1.你需要其他格式的证书文件？\n\n大部分服务器程序支持直接使用 your_domain.pem+your_domain.key 来配置开启HTTPS（比如Nginx），如果你需要 *.pfx、*.p12 格式的证书（比如用于IIS），请用下面命令将PEM证书转换成 pfx/p12 格式：\n\n```shell\nopenssl pkcs12 -export -out your_domain.pfx -inkey your_domain.key -in your_domain.pem\n```\n\n2.IIS证书链缺失？\n\n对于Windows IIS服务器，你需要将证书链安装到“本地计算机”的“中间证书颁发机构”中；请将PEM证书中的所有证书拆分成单个PEM文件（后缀改成.crt或.cer），然后将系统中缺失的中间证书双击打开然后安装进去；详细参考： http://support.microsoft.com/kb/954755\n","source":"_posts/ltesencrypt-ssl.md","raw":"---\nabbrlink: ''\ncategories: []\nindex_img: https://cdnn.boochi.cn/gh/inkdust-dev/ink-oss@main/qexo-upload/24/8/ltesencrypt-ssl_be3d1fad61002208589a66246d0a7e78.png\ndate: '2024-08-07T22:26:44.564178+08:00'\ntags: []\ntitle: SSL系列一之快速签发免费Let's Encrypt泛域名证书\nupdated: '2024-08-07T22:27:13.280+08:00'\n---\n## 引入\n\n现如今，向像腾讯，阿里云等大厂的免费SSL证书，都由一年缩短为3个月。\n\n[https://cloud.tencent.com/document/product/400/104538](https://cloud.tencent.com/document/product/400/104538)\n\n在如今的形式下，签发免费的3个月的单域名证书显然不如直接签发Let's Encrypt、ZeroSSL等ACME提供的泛域名证书来的方便。\n\n而acme.sh常用于Linux端上证书的自动化签发与续约，对于不使用服务器的人群，显然造成了许多麻烦，那么可以通过Web端直接签发这些ACME的泛域名证书吗？\n\nGithub开源项目ACME-Web-Browser-Client告诉了我们这并非是一件不可能实现的事情。\n\n简介：\n\n本网页客户端（仅一个静态HTML网页文件）用于：向 Let's Encrypt、ZeroSSL、Google 等支持 ACME 协议的证书颁发机构，免费申请获得用于 HTTPS 的 SSL/TLS 域名证书（RSA、ECC/ECDSA），支持多域名和通配符泛域名；只需在现代浏览器上操作即可获得 PEM 格式纯文本的域名证书，不依赖操作系统环境（Windows、macOS都能用），无需下载和安装软件，无需注册登录，纯手动操作，只专注于申请获得证书这一件事，简单易用，非常适用于希望手动快捷申请获得证书的使用场景。\n\nGithub开源地址：[https://github.com/xiangyuecn/ACME-HTML-Web-Browser-Client](https://github.com/xiangyuecn/ACME-HTML-Web-Browser-Client)\n\nGitee开源地址：\n\nhttps://gitee.com/xiangyuecn/ACME-HTML-Web-Browser-Client\n\n## 使用\n\n提示：可将其私有化部署到Vercel，Netlify等上，可弥补Github Pages速度的不足。\n\n任意点击下列一个网页使用：\n\nhttps://xiangyuecn.github.io/ACME-HTML-Web-Browser-Client/ACME-HTML-Web-Browser-Client.html （作者Github Pages）\n\nhttps://ssl.dev.inkdust.top/ （本人Vercel）\n\n## 签发Let's Encrypt\n\n本文为签发Let's Encrypt篇教程，签发ZeroSSL或Google，请看ZeroSSL篇和Google篇。\n\n### 步骤一：选择证书颁发机构\n\n在“证书颁发机构 ACME(v2, RFC 8555) 服务URL”下选择Let's Encrypt，点击 `读取服务目录`并等待出现：\n\n读取服务目录成功，请进行下一步操作。 URL=https://acme-v02.api.letsencrypt.org/directory\n\n即为成功选择Let's Encrypt。\n\n### 步骤二：证书配置\n\n提示：如果上次申请过证书，可以拖拽已下载保存的记录LOG文件到本页面，将自动填充上次的配置信息。\n\n在“证书中要包含的域名：”中填写你要签发的域名。\n\n泛域名填写方式：example.com,*.example.com\n\n单域名填写方式：www.example.com\n\n多域名合并：www.example.com,site1.example.com,site2.example.com\n\n`带通配符的域名只支持DNS验证，其他域名支持上传文件验证`\n\n在 `证书的私钥：`处一般选择 `创建新RSA私钥`或 `创建新ECC私钥`，根据证书的加密形式而定。\n\n在 `ACME账户的私钥：`处一般选择 `创建新RSA私钥 `或 `创建新ECC私钥 `，根据证书的加密形式而定。\n\n在 ` ACME账户的联系邮箱：`处填写你的邮箱，该邮箱必须真实存在。\n\n### 步骤三：验证域名所有权\n\n请给每个域名选择一个你合适的验证方式，泛域名只能使用DNS解析方式。\n\nDNS解析方式：登陆到你的解析提供平台，如DNSPod，CloudFlare等，添加一条或多条TXT记录。\n\n文件验证方式：仅限单域名，在你域名所属的文件目录下 创建 `/.well-known/acme-challenge/`目录并在内创建验证文件。\n\nTLS-ALPN-01：使用Key Authorizations (Token+.+指纹)自行处理，Digest为Key Authorizations的SHA-256 Base64值。\n\n完成后，点击“开始验证”即可验证。\n\n## 步骤四：下载保存证书PEM文件\n\n完成验证后，服务端会自动签发SSL证书，点击下载即可下载证书对应私钥，公钥和Log文件。\n\n### 其他提示\n\n1.你需要其他格式的证书文件？\n\n大部分服务器程序支持直接使用 your_domain.pem+your_domain.key 来配置开启HTTPS（比如Nginx），如果你需要 *.pfx、*.p12 格式的证书（比如用于IIS），请用下面命令将PEM证书转换成 pfx/p12 格式：\n\n```shell\nopenssl pkcs12 -export -out your_domain.pfx -inkey your_domain.key -in your_domain.pem\n```\n\n2.IIS证书链缺失？\n\n对于Windows IIS服务器，你需要将证书链安装到“本地计算机”的“中间证书颁发机构”中；请将PEM证书中的所有证书拆分成单个PEM文件（后缀改成.crt或.cer），然后将系统中缺失的中间证书双击打开然后安装进去；详细参考： http://support.microsoft.com/kb/954755\n","slug":"ltesencrypt-ssl","published":1,"comments":1,"layout":"post","photos":[],"_id":"cm1xg6mt200069a9o6egf4tue","content":"<h2 id=\"引入\"><a href=\"#引入\" class=\"headerlink\" title=\"引入\"></a>引入</h2><p>现如今，向像腾讯，阿里云等大厂的免费SSL证书，都由一年缩短为3个月。</p>\n<p><a href=\"https://cloud.tencent.com/document/product/400/104538\">https://cloud.tencent.com/document/product/400/104538</a></p>\n<p>在如今的形式下，签发免费的3个月的单域名证书显然不如直接签发Let’s Encrypt、ZeroSSL等ACME提供的泛域名证书来的方便。</p>\n<p>而acme.sh常用于Linux端上证书的自动化签发与续约，对于不使用服务器的人群，显然造成了许多麻烦，那么可以通过Web端直接签发这些ACME的泛域名证书吗？</p>\n<p>Github开源项目ACME-Web-Browser-Client告诉了我们这并非是一件不可能实现的事情。</p>\n<p>简介：</p>\n<p>本网页客户端（仅一个静态HTML网页文件）用于：向 Let’s Encrypt、ZeroSSL、Google 等支持 ACME 协议的证书颁发机构，免费申请获得用于 HTTPS 的 SSL&#x2F;TLS 域名证书（RSA、ECC&#x2F;ECDSA），支持多域名和通配符泛域名；只需在现代浏览器上操作即可获得 PEM 格式纯文本的域名证书，不依赖操作系统环境（Windows、macOS都能用），无需下载和安装软件，无需注册登录，纯手动操作，只专注于申请获得证书这一件事，简单易用，非常适用于希望手动快捷申请获得证书的使用场景。</p>\n<p>Github开源地址：<a href=\"https://github.com/xiangyuecn/ACME-HTML-Web-Browser-Client\">https://github.com/xiangyuecn/ACME-HTML-Web-Browser-Client</a></p>\n<p>Gitee开源地址：</p>\n<p><a href=\"https://gitee.com/xiangyuecn/ACME-HTML-Web-Browser-Client\">https://gitee.com/xiangyuecn/ACME-HTML-Web-Browser-Client</a></p>\n<h2 id=\"使用\"><a href=\"#使用\" class=\"headerlink\" title=\"使用\"></a>使用</h2><p>提示：可将其私有化部署到Vercel，Netlify等上，可弥补Github Pages速度的不足。</p>\n<p>任意点击下列一个网页使用：</p>\n<p><a href=\"https://xiangyuecn.github.io/ACME-HTML-Web-Browser-Client/ACME-HTML-Web-Browser-Client.html\">https://xiangyuecn.github.io/ACME-HTML-Web-Browser-Client/ACME-HTML-Web-Browser-Client.html</a> （作者Github Pages）</p>\n<p><a href=\"https://ssl.dev.inkdust.top/\">https://ssl.dev.inkdust.top/</a> （本人Vercel）</p>\n<h2 id=\"签发Let’s-Encrypt\"><a href=\"#签发Let’s-Encrypt\" class=\"headerlink\" title=\"签发Let’s Encrypt\"></a>签发Let’s Encrypt</h2><p>本文为签发Let’s Encrypt篇教程，签发ZeroSSL或Google，请看ZeroSSL篇和Google篇。</p>\n<h3 id=\"步骤一：选择证书颁发机构\"><a href=\"#步骤一：选择证书颁发机构\" class=\"headerlink\" title=\"步骤一：选择证书颁发机构\"></a>步骤一：选择证书颁发机构</h3><p>在“证书颁发机构 ACME(v2, RFC 8555) 服务URL”下选择Let’s Encrypt，点击 <code>读取服务目录</code>并等待出现：</p>\n<p>读取服务目录成功，请进行下一步操作。 URL&#x3D;<a href=\"https://acme-v02.api.letsencrypt.org/directory\">https://acme-v02.api.letsencrypt.org/directory</a></p>\n<p>即为成功选择Let’s Encrypt。</p>\n<h3 id=\"步骤二：证书配置\"><a href=\"#步骤二：证书配置\" class=\"headerlink\" title=\"步骤二：证书配置\"></a>步骤二：证书配置</h3><p>提示：如果上次申请过证书，可以拖拽已下载保存的记录LOG文件到本页面，将自动填充上次的配置信息。</p>\n<p>在“证书中要包含的域名：”中填写你要签发的域名。</p>\n<p>泛域名填写方式：example.com,*.example.com</p>\n<p>单域名填写方式：<a href=\"http://www.example.com/\">www.example.com</a></p>\n<p>多域名合并：<a href=\"http://www.example.com,site1.example.com,site2.example.com/\">www.example.com,site1.example.com,site2.example.com</a></p>\n<p><code>带通配符的域名只支持DNS验证，其他域名支持上传文件验证</code></p>\n<p>在 <code>证书的私钥：</code>处一般选择 <code>创建新RSA私钥</code>或 <code>创建新ECC私钥</code>，根据证书的加密形式而定。</p>\n<p>在 <code>ACME账户的私钥：</code>处一般选择 <code>创建新RSA私钥 </code>或 <code>创建新ECC私钥 </code>，根据证书的加密形式而定。</p>\n<p>在 <code> ACME账户的联系邮箱：</code>处填写你的邮箱，该邮箱必须真实存在。</p>\n<h3 id=\"步骤三：验证域名所有权\"><a href=\"#步骤三：验证域名所有权\" class=\"headerlink\" title=\"步骤三：验证域名所有权\"></a>步骤三：验证域名所有权</h3><p>请给每个域名选择一个你合适的验证方式，泛域名只能使用DNS解析方式。</p>\n<p>DNS解析方式：登陆到你的解析提供平台，如DNSPod，CloudFlare等，添加一条或多条TXT记录。</p>\n<p>文件验证方式：仅限单域名，在你域名所属的文件目录下 创建 <code>/.well-known/acme-challenge/</code>目录并在内创建验证文件。</p>\n<p>TLS-ALPN-01：使用Key Authorizations (Token+.+指纹)自行处理，Digest为Key Authorizations的SHA-256 Base64值。</p>\n<p>完成后，点击“开始验证”即可验证。</p>\n<h2 id=\"步骤四：下载保存证书PEM文件\"><a href=\"#步骤四：下载保存证书PEM文件\" class=\"headerlink\" title=\"步骤四：下载保存证书PEM文件\"></a>步骤四：下载保存证书PEM文件</h2><p>完成验证后，服务端会自动签发SSL证书，点击下载即可下载证书对应私钥，公钥和Log文件。</p>\n<h3 id=\"其他提示\"><a href=\"#其他提示\" class=\"headerlink\" title=\"其他提示\"></a>其他提示</h3><p>1.你需要其他格式的证书文件？</p>\n<p>大部分服务器程序支持直接使用 your_domain.pem+your_domain.key 来配置开启HTTPS（比如Nginx），如果你需要 <em>.pfx、</em>.p12 格式的证书（比如用于IIS），请用下面命令将PEM证书转换成 pfx&#x2F;p12 格式：</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs shell\">openssl pkcs12 -export -out your_domain.pfx -inkey your_domain.key -in your_domain.pem<br></code></pre></td></tr></table></figure>\n\n<p>2.IIS证书链缺失？</p>\n<p>对于Windows IIS服务器，你需要将证书链安装到“本地计算机”的“中间证书颁发机构”中；请将PEM证书中的所有证书拆分成单个PEM文件（后缀改成.crt或.cer），然后将系统中缺失的中间证书双击打开然后安装进去；详细参考： <a href=\"http://support.microsoft.com/kb/954755\">http://support.microsoft.com/kb/954755</a></p>\n","excerpt":"","more":"<h2 id=\"引入\"><a href=\"#引入\" class=\"headerlink\" title=\"引入\"></a>引入</h2><p>现如今，向像腾讯，阿里云等大厂的免费SSL证书，都由一年缩短为3个月。</p>\n<p><a href=\"https://cloud.tencent.com/document/product/400/104538\">https://cloud.tencent.com/document/product/400/104538</a></p>\n<p>在如今的形式下，签发免费的3个月的单域名证书显然不如直接签发Let’s Encrypt、ZeroSSL等ACME提供的泛域名证书来的方便。</p>\n<p>而acme.sh常用于Linux端上证书的自动化签发与续约，对于不使用服务器的人群，显然造成了许多麻烦，那么可以通过Web端直接签发这些ACME的泛域名证书吗？</p>\n<p>Github开源项目ACME-Web-Browser-Client告诉了我们这并非是一件不可能实现的事情。</p>\n<p>简介：</p>\n<p>本网页客户端（仅一个静态HTML网页文件）用于：向 Let’s Encrypt、ZeroSSL、Google 等支持 ACME 协议的证书颁发机构，免费申请获得用于 HTTPS 的 SSL&#x2F;TLS 域名证书（RSA、ECC&#x2F;ECDSA），支持多域名和通配符泛域名；只需在现代浏览器上操作即可获得 PEM 格式纯文本的域名证书，不依赖操作系统环境（Windows、macOS都能用），无需下载和安装软件，无需注册登录，纯手动操作，只专注于申请获得证书这一件事，简单易用，非常适用于希望手动快捷申请获得证书的使用场景。</p>\n<p>Github开源地址：<a href=\"https://github.com/xiangyuecn/ACME-HTML-Web-Browser-Client\">https://github.com/xiangyuecn/ACME-HTML-Web-Browser-Client</a></p>\n<p>Gitee开源地址：</p>\n<p><a href=\"https://gitee.com/xiangyuecn/ACME-HTML-Web-Browser-Client\">https://gitee.com/xiangyuecn/ACME-HTML-Web-Browser-Client</a></p>\n<h2 id=\"使用\"><a href=\"#使用\" class=\"headerlink\" title=\"使用\"></a>使用</h2><p>提示：可将其私有化部署到Vercel，Netlify等上，可弥补Github Pages速度的不足。</p>\n<p>任意点击下列一个网页使用：</p>\n<p><a href=\"https://xiangyuecn.github.io/ACME-HTML-Web-Browser-Client/ACME-HTML-Web-Browser-Client.html\">https://xiangyuecn.github.io/ACME-HTML-Web-Browser-Client/ACME-HTML-Web-Browser-Client.html</a> （作者Github Pages）</p>\n<p><a href=\"https://ssl.dev.inkdust.top/\">https://ssl.dev.inkdust.top/</a> （本人Vercel）</p>\n<h2 id=\"签发Let’s-Encrypt\"><a href=\"#签发Let’s-Encrypt\" class=\"headerlink\" title=\"签发Let’s Encrypt\"></a>签发Let’s Encrypt</h2><p>本文为签发Let’s Encrypt篇教程，签发ZeroSSL或Google，请看ZeroSSL篇和Google篇。</p>\n<h3 id=\"步骤一：选择证书颁发机构\"><a href=\"#步骤一：选择证书颁发机构\" class=\"headerlink\" title=\"步骤一：选择证书颁发机构\"></a>步骤一：选择证书颁发机构</h3><p>在“证书颁发机构 ACME(v2, RFC 8555) 服务URL”下选择Let’s Encrypt，点击 <code>读取服务目录</code>并等待出现：</p>\n<p>读取服务目录成功，请进行下一步操作。 URL&#x3D;<a href=\"https://acme-v02.api.letsencrypt.org/directory\">https://acme-v02.api.letsencrypt.org/directory</a></p>\n<p>即为成功选择Let’s Encrypt。</p>\n<h3 id=\"步骤二：证书配置\"><a href=\"#步骤二：证书配置\" class=\"headerlink\" title=\"步骤二：证书配置\"></a>步骤二：证书配置</h3><p>提示：如果上次申请过证书，可以拖拽已下载保存的记录LOG文件到本页面，将自动填充上次的配置信息。</p>\n<p>在“证书中要包含的域名：”中填写你要签发的域名。</p>\n<p>泛域名填写方式：example.com,*.example.com</p>\n<p>单域名填写方式：<a href=\"http://www.example.com/\">www.example.com</a></p>\n<p>多域名合并：<a href=\"http://www.example.com,site1.example.com,site2.example.com/\">www.example.com,site1.example.com,site2.example.com</a></p>\n<p><code>带通配符的域名只支持DNS验证，其他域名支持上传文件验证</code></p>\n<p>在 <code>证书的私钥：</code>处一般选择 <code>创建新RSA私钥</code>或 <code>创建新ECC私钥</code>，根据证书的加密形式而定。</p>\n<p>在 <code>ACME账户的私钥：</code>处一般选择 <code>创建新RSA私钥 </code>或 <code>创建新ECC私钥 </code>，根据证书的加密形式而定。</p>\n<p>在 <code> ACME账户的联系邮箱：</code>处填写你的邮箱，该邮箱必须真实存在。</p>\n<h3 id=\"步骤三：验证域名所有权\"><a href=\"#步骤三：验证域名所有权\" class=\"headerlink\" title=\"步骤三：验证域名所有权\"></a>步骤三：验证域名所有权</h3><p>请给每个域名选择一个你合适的验证方式，泛域名只能使用DNS解析方式。</p>\n<p>DNS解析方式：登陆到你的解析提供平台，如DNSPod，CloudFlare等，添加一条或多条TXT记录。</p>\n<p>文件验证方式：仅限单域名，在你域名所属的文件目录下 创建 <code>/.well-known/acme-challenge/</code>目录并在内创建验证文件。</p>\n<p>TLS-ALPN-01：使用Key Authorizations (Token+.+指纹)自行处理，Digest为Key Authorizations的SHA-256 Base64值。</p>\n<p>完成后，点击“开始验证”即可验证。</p>\n<h2 id=\"步骤四：下载保存证书PEM文件\"><a href=\"#步骤四：下载保存证书PEM文件\" class=\"headerlink\" title=\"步骤四：下载保存证书PEM文件\"></a>步骤四：下载保存证书PEM文件</h2><p>完成验证后，服务端会自动签发SSL证书，点击下载即可下载证书对应私钥，公钥和Log文件。</p>\n<h3 id=\"其他提示\"><a href=\"#其他提示\" class=\"headerlink\" title=\"其他提示\"></a>其他提示</h3><p>1.你需要其他格式的证书文件？</p>\n<p>大部分服务器程序支持直接使用 your_domain.pem+your_domain.key 来配置开启HTTPS（比如Nginx），如果你需要 <em>.pfx、</em>.p12 格式的证书（比如用于IIS），请用下面命令将PEM证书转换成 pfx&#x2F;p12 格式：</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs shell\">openssl pkcs12 -export -out your_domain.pfx -inkey your_domain.key -in your_domain.pem<br></code></pre></td></tr></table></figure>\n\n<p>2.IIS证书链缺失？</p>\n<p>对于Windows IIS服务器，你需要将证书链安装到“本地计算机”的“中间证书颁发机构”中；请将PEM证书中的所有证书拆分成单个PEM文件（后缀改成.crt或.cer），然后将系统中缺失的中间证书双击打开然后安装进去；详细参考： <a href=\"http://support.microsoft.com/kb/954755\">http://support.microsoft.com/kb/954755</a></p>\n"},{"abbrlink":"","index_img":"https://cdnn.boochi.cn/gh/inkdust-dev/ink-oss@main/blog-image/minecraft-server-deploy.png","date":"2024-04-05T10:18:15.056Z","title":"基于Win Server部署Minecraft服务器","updated":"2024-08-07T14:32:44.925Z","_content":"## 介绍\n\n**《我的世界》**（Minecraft）是一款沙盒类电子游戏，由马库斯·阿列克谢·泊松（Notch）创作。游戏由Mojang Studios维护，现属微软Xbox游戏工作室。最初于2009年5月17日发布Classic版本，2011年11月18日推出Java正式版。游戏可在桌面设备、移动设备和游戏主机上运行。中国版目前由网易游戏代理，自2016年5月20日起在中国大陆运营。\n\n在延斯·伯根斯坦（Jeb）加入并负责开发之前，Notch几乎独自完成了《我的世界》的开发工作。游戏音乐由丹尼尔·罗森菲尔德（C418）和莉娜·雷恩（Lena Raine）创作；克里斯托弗·泽特斯特兰绘制了游戏中的画。\n\n游戏的核心玩法是让玩家在充满方块的三维空间中自由创造和破坏各种方块。玩家可以在单人或多人模式下摧毁或建造复杂的建筑和艺术品，或者收集物品探索地图以完成游戏的成就。此外，在创造模式下，玩家还可以尝试使用红石电路和指令等功能。\n\n——摘自百度百科\n\n{% note danger %}\n\n该教程仅适用于Java版本的Minecraft游戏，不适用于网易版《我的世界》、基岩版Minecraft。\n\n{% endnote %}\n\n## 测试环境\n\n处理器\tIntel(R) Xeon(R) CPU E5-2696 v4 @ 2.20GHz   2.20 GHz  (4 个处理器)\n机带 RAM\t8.00 GB\n设备 ID\tF6EB2C89-0238-491C-BA33-7922E889987D\n产品 ID\t00455-10000-00000-AAOEM\n系统类型\t64 位操作系统, 基于 x64 的处理器\n笔和触控\t没有可用于此显示器的笔或触控输入\n\n版本\tWindows Server 2022 Datacenter\n版本号\t21H2\n安装日期\t‎2024/‎3/‎26\n操作系统内部版本\t20348.2340\n\n## Java环境安装\n\n来到Oracle官网安装Java环境。[Java Downloads | Oracle 中国](https://www.oracle.com/cn/java/technologies/downloads/)\n\n本教程使用JDK22作为演示环境。下载地址：\n\n| Product/file description | File size | Download                                                                                                                                                                                                                            |\n| ------------------------ | --------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |\n| x64 Compressed Archive   | 185.52 MB | [https://download.oracle.com/java/22/latest/jdk-22\\_windows-x64\\_bin.zip](https://download.oracle.com/java/22/latest/jdk-22_windows-x64_bin.zip) ([sha256](https://download.oracle.com/java/22/latest/jdk-22_windows-x64_bin.zip.sha256)) |\n| x64 Installer            | 163.91 MB | [https://download.oracle.com/java/22/latest/jdk-22\\_windows-x64\\_bin.exe](https://download.oracle.com/java/22/latest/jdk-22_windows-x64_bin.exe) ([sha256](https://download.oracle.com/java/22/latest/jdk-22_windows-x64_bin.exe.sha256)) |\n| x64 MSI Installer        | 162.07MB  | [https://download.oracle.com/java/22/latest/jdk-22\\_windows-x64\\_bin.msi](https://download.oracle.com/java/22/latest/jdk-22_windows-x64_bin.msi) ([sha256](https://download.oracle.com/java/22/latest/jdk-22_windows-x64_bin.msi.sha256)) |\n\n如果你的服务器出于中国境内，或在此页面下载缓慢，可以尝试使用Injdk下载。\n\nInjdk地址：[OracleJDK](https://injdk.cn/#oracle-jdk)\n\nJDK22下载地址：\n\n| Product/file description | File size | Download                                                                                                                                                                                                                                                                     |\n| ------------------------ | --------- | ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |\n| x64 Compressed Archive   | 185.52 MB | [https://d6.injdk.cn/oraclejdk/22/jdk-22_windows-x64_bin.zip]([https://d6.injdk.cn/oraclejdk/22/jdk-22_windows-x64_bin.zip](https://d6.injdk.cn/oraclejdk/22/jdk-22_windows-x64_bin.zip)) ([sha256](https://download.oracle.com/java/22/latest/jdk-22_windows-x64_bin.zip.sha256)) |\n| x64 Installer            | 163.91 MB | [https://d6.injdk.cn/oraclejdk/22/jdk-22_windows-x64_bin.exe](https://d6.injdk.cn/oraclejdk/22/jdk-22_windows-x64_bin.exe) ([sha256](https://download.oracle.com/java/22/latest/jdk-22_windows-x64_bin.exe.sha256))                                                               |\n| x64 MSI Installer        | 162.07MB  | [https://d6.injdk.cn/oraclejdk/22/jdk-22_windows-x64_bin.msi](https://d6.injdk.cn/oraclejdk/22/jdk-22_windows-x64_bin.msi) ([sha256](https://download.oracle.com/java/22/latest/jdk-22_windows-x64_bin.exe.sha256))                                                               |\n\n![https://cdnn.boochi.cn/gh/inkdust-dev/ink-oss@main/qexo-upload/24/4/image_fe44aa71038b03b1a92843ff66b698ed.png](https://cdnn.boochi.cn/gh/inkdust-dev/ink-oss@main/qexo-upload/24/4/image_fe44aa71038b03b1a92843ff66b698ed.png)\n\n一直下一步即可。\n\n安装完成后关闭弹窗即可。\n\n在搜索框搜索“查看高级系统设置”，在其他版本的Windows上可能是“高级系统设置”，请注意识别\n\n![https://cdnn.boochi.cn/gh/inkdust-dev/ink-oss@main/qexo-upload/24/4/image_1709db623d6aa13a1ccf097e0e58ce7f.png](https://cdnn.boochi.cn/gh/inkdust-dev/ink-oss@main/qexo-upload/24/4/image_1709db623d6aa13a1ccf097e0e58ce7f.png)\n\n打开后选择环境变量，新建一个用户变量。\n\n变量名为 `JAVA_HOME`\n\n变量值为你的Java安装路径，如果你安装时未选择安装路径，请填写 `C:\\Program Files\\Java\\jdk-22`\n\n如果你安装时已选择安装路径，请填写为你安装选择的路径\n\n![https://cdnn.boochi.cn/gh/inkdust-dev/ink-oss@main/qexo-upload/24/4/image_88cab5786fba2733702e956581bd449f.png](https://cdnn.boochi.cn/gh/inkdust-dev/ink-oss@main/qexo-upload/24/4/image_88cab5786fba2733702e956581bd449f.png)\n\n双击系统变量中的Path变量（如未找到请向下滑动），新建一个环境变量：`%JAVA_HOME%\\bin`\n\n![https://cdnn.boochi.cn/gh/inkdust-dev/ink-oss@main/qexo-upload/24/4/image_08bed54b5c5c36d2ff211f0e99d5c3ae.png](https://cdnn.boochi.cn/gh/inkdust-dev/ink-oss@main/qexo-upload/24/4/image_08bed54b5c5c36d2ff211f0e99d5c3ae.png)\n\n添加好变量后，按Win + R输入 `cmd`打开命令提示符。输入 `java -version`，出现版本号即代表环境配置完成。\n\n![https://cdnn.boochi.cn/gh/inkdust-dev/ink-oss@main/qexo-upload/24/4/image_f3a40b8ab04323e7836190df9fdb88ce.png](https://cdnn.boochi.cn/gh/inkdust-dev/ink-oss@main/qexo-upload/24/4/image_f3a40b8ab04323e7836190df9fdb88ce.png)\n\n## Minecraft Server端安装\n\n通过Minecraft官网下载Java版本Server端。\n\n[Download server for Minecraft | Minecraft](https://www.minecraft.net/zh-hans/download/server)\n\n如果你打不开Minecraft官网，可点击[minecraft_server.1.20.4.jar](https://piston-data.mojang.com/v1/objects/8dd1a28015f51b1803213892b50b7b4fc76e594d/server.jar)下载1.20.4版本的Server端。\n\n![https://cdnn.boochi.cn/gh/inkdust-dev/ink-oss@main/qexo-upload/24/4/image_1135144edd37d1b56adec4b769f1ab88.png](https://cdnn.boochi.cn/gh/inkdust-dev/ink-oss@main/qexo-upload/24/4/image_1135144edd37d1b56adec4b769f1ab88.png)\n\n下载后双击打开，并修改生成的eula文件中的“elua=false”为\n\n```plaintext\nelua=true\n```\n\n如果你没有正版账号，请修改“server.properties”文件中的online-mode为false。\n\n![https://cdnn.boochi.cn/gh/inkdust-dev/ink-oss@main/qexo-upload/24/4/image_4e0af366d6a00236eb6ad5af38ba47a4.png](https://cdnn.boochi.cn/gh/inkdust-dev/ink-oss@main/qexo-upload/24/4/image_4e0af366d6a00236eb6ad5af38ba47a4.png)\n\n然后点击地址栏，输入“cmd”打开命令提示符，输入：\n\n```plaintext\njava -jar server.jar --nogui\n```\n\n即可建立属于你自己的Minecraft服务器。地址即为：[ip]:25565\n\n## 安装客户端\n\n{% note danger %}\n\n安装客户端不需要在服务器上安装，请在游玩的电脑上安装。\n\n{% endnote %}\n\n如果您已购买Minecraft服务器，您可以安装第三方客户端登陆。\n\n如果你想不购买Minecraft即可游玩该游戏，您需要安装第三方客户端游玩。\n\n以第三方启动器PCL2为例子：\n\n### 下载PCL2\n\n开发者创作不易，如有条件可发电支持。\n\n[PCL 正式版下载丨龙腾猫跃丨爱发电](https://afdian.net/p/0164034c016c11ebafcb52540025c377)\n\n最新正式版永久下载地址\n\n**下载地址** 1：[https://ltcat.lanzoum.com/b0aj6gsid](https://ltcat.lanzoum.com/b0aj6gsid)（提取码：pcl2）\n\n**下载地址** 2：[https://pan.baidu.com/s/1f7ipEIkZeMNmGSs\\_fu2YoA?pwd=pcl2](https://pan.baidu.com/s/1f7ipEIkZeMNmGSs_fu2YoA?pwd=pcl2)（提取码：pcl2）\n\n下载后双击“Plain Craft Launcher 2.exe”即可。可在PCL2中安装MC、Mod、Fabric、Forge、Optifine等等。\n\n![https://cdnn.boochi.cn/gh/inkdust-dev/ink-oss@main/qexo-upload/24/4/image_204337b6bfac7022855d583fbcdbdc8c.png](https://cdnn.boochi.cn/gh/inkdust-dev/ink-oss@main/qexo-upload/24/4/image_204337b6bfac7022855d583fbcdbdc8c.png)\n\n如果在过程中出现安装MC出现问题，请参考下方内容进行解决。\n\n### MC下载问题\n\n由于受到 MCBBS 关站影响，由 MCBBS 提供服务的 MCBBS 国内源也已关闭。MCBBS 源是国内最大的 Minecraft 镜像下载源，所以PCL2启动器因此受影响，您可以更新PCL2版本来解决该问题。\n\n如无法获取版本列表。\n\n您可在PCL 2中的设置——个性化——下载——版本列表中选择尽量使用官方源。\n\n![https://cdnn.boochi.cn/gh/inkdust-dev/ink-oss@main/qexo-upload/24/4/image_86c5ea6aa39d597248b6f40fa7e9b97c.png](https://cdnn.boochi.cn/gh/inkdust-dev/ink-oss@main/qexo-upload/24/4/image_86c5ea6aa39d597248b6f40fa7e9b97c.png)\n","source":"_posts/minecraft-server-deploy.md","raw":"---\nabbrlink: ''\ncategories:\n- - 技术教程\nindex_img: https://cdnn.boochi.cn/gh/inkdust-dev/ink-oss@main/blog-image/minecraft-server-deploy.png\ndate: '2024-04-05T18:18:15.056891+08:00'\ntags:\n- Minecarft\n- 游戏\n- 私有化\ntitle: 基于Win Server部署Minecraft服务器\nupdated: '2024-08-07T22:32:44.925+08:00'\n---\n## 介绍\n\n**《我的世界》**（Minecraft）是一款沙盒类电子游戏，由马库斯·阿列克谢·泊松（Notch）创作。游戏由Mojang Studios维护，现属微软Xbox游戏工作室。最初于2009年5月17日发布Classic版本，2011年11月18日推出Java正式版。游戏可在桌面设备、移动设备和游戏主机上运行。中国版目前由网易游戏代理，自2016年5月20日起在中国大陆运营。\n\n在延斯·伯根斯坦（Jeb）加入并负责开发之前，Notch几乎独自完成了《我的世界》的开发工作。游戏音乐由丹尼尔·罗森菲尔德（C418）和莉娜·雷恩（Lena Raine）创作；克里斯托弗·泽特斯特兰绘制了游戏中的画。\n\n游戏的核心玩法是让玩家在充满方块的三维空间中自由创造和破坏各种方块。玩家可以在单人或多人模式下摧毁或建造复杂的建筑和艺术品，或者收集物品探索地图以完成游戏的成就。此外，在创造模式下，玩家还可以尝试使用红石电路和指令等功能。\n\n——摘自百度百科\n\n{% note danger %}\n\n该教程仅适用于Java版本的Minecraft游戏，不适用于网易版《我的世界》、基岩版Minecraft。\n\n{% endnote %}\n\n## 测试环境\n\n处理器\tIntel(R) Xeon(R) CPU E5-2696 v4 @ 2.20GHz   2.20 GHz  (4 个处理器)\n机带 RAM\t8.00 GB\n设备 ID\tF6EB2C89-0238-491C-BA33-7922E889987D\n产品 ID\t00455-10000-00000-AAOEM\n系统类型\t64 位操作系统, 基于 x64 的处理器\n笔和触控\t没有可用于此显示器的笔或触控输入\n\n版本\tWindows Server 2022 Datacenter\n版本号\t21H2\n安装日期\t‎2024/‎3/‎26\n操作系统内部版本\t20348.2340\n\n## Java环境安装\n\n来到Oracle官网安装Java环境。[Java Downloads | Oracle 中国](https://www.oracle.com/cn/java/technologies/downloads/)\n\n本教程使用JDK22作为演示环境。下载地址：\n\n| Product/file description | File size | Download                                                                                                                                                                                                                            |\n| ------------------------ | --------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |\n| x64 Compressed Archive   | 185.52 MB | [https://download.oracle.com/java/22/latest/jdk-22\\_windows-x64\\_bin.zip](https://download.oracle.com/java/22/latest/jdk-22_windows-x64_bin.zip) ([sha256](https://download.oracle.com/java/22/latest/jdk-22_windows-x64_bin.zip.sha256)) |\n| x64 Installer            | 163.91 MB | [https://download.oracle.com/java/22/latest/jdk-22\\_windows-x64\\_bin.exe](https://download.oracle.com/java/22/latest/jdk-22_windows-x64_bin.exe) ([sha256](https://download.oracle.com/java/22/latest/jdk-22_windows-x64_bin.exe.sha256)) |\n| x64 MSI Installer        | 162.07MB  | [https://download.oracle.com/java/22/latest/jdk-22\\_windows-x64\\_bin.msi](https://download.oracle.com/java/22/latest/jdk-22_windows-x64_bin.msi) ([sha256](https://download.oracle.com/java/22/latest/jdk-22_windows-x64_bin.msi.sha256)) |\n\n如果你的服务器出于中国境内，或在此页面下载缓慢，可以尝试使用Injdk下载。\n\nInjdk地址：[OracleJDK](https://injdk.cn/#oracle-jdk)\n\nJDK22下载地址：\n\n| Product/file description | File size | Download                                                                                                                                                                                                                                                                     |\n| ------------------------ | --------- | ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |\n| x64 Compressed Archive   | 185.52 MB | [https://d6.injdk.cn/oraclejdk/22/jdk-22_windows-x64_bin.zip]([https://d6.injdk.cn/oraclejdk/22/jdk-22_windows-x64_bin.zip](https://d6.injdk.cn/oraclejdk/22/jdk-22_windows-x64_bin.zip)) ([sha256](https://download.oracle.com/java/22/latest/jdk-22_windows-x64_bin.zip.sha256)) |\n| x64 Installer            | 163.91 MB | [https://d6.injdk.cn/oraclejdk/22/jdk-22_windows-x64_bin.exe](https://d6.injdk.cn/oraclejdk/22/jdk-22_windows-x64_bin.exe) ([sha256](https://download.oracle.com/java/22/latest/jdk-22_windows-x64_bin.exe.sha256))                                                               |\n| x64 MSI Installer        | 162.07MB  | [https://d6.injdk.cn/oraclejdk/22/jdk-22_windows-x64_bin.msi](https://d6.injdk.cn/oraclejdk/22/jdk-22_windows-x64_bin.msi) ([sha256](https://download.oracle.com/java/22/latest/jdk-22_windows-x64_bin.exe.sha256))                                                               |\n\n![https://cdnn.boochi.cn/gh/inkdust-dev/ink-oss@main/qexo-upload/24/4/image_fe44aa71038b03b1a92843ff66b698ed.png](https://cdnn.boochi.cn/gh/inkdust-dev/ink-oss@main/qexo-upload/24/4/image_fe44aa71038b03b1a92843ff66b698ed.png)\n\n一直下一步即可。\n\n安装完成后关闭弹窗即可。\n\n在搜索框搜索“查看高级系统设置”，在其他版本的Windows上可能是“高级系统设置”，请注意识别\n\n![https://cdnn.boochi.cn/gh/inkdust-dev/ink-oss@main/qexo-upload/24/4/image_1709db623d6aa13a1ccf097e0e58ce7f.png](https://cdnn.boochi.cn/gh/inkdust-dev/ink-oss@main/qexo-upload/24/4/image_1709db623d6aa13a1ccf097e0e58ce7f.png)\n\n打开后选择环境变量，新建一个用户变量。\n\n变量名为 `JAVA_HOME`\n\n变量值为你的Java安装路径，如果你安装时未选择安装路径，请填写 `C:\\Program Files\\Java\\jdk-22`\n\n如果你安装时已选择安装路径，请填写为你安装选择的路径\n\n![https://cdnn.boochi.cn/gh/inkdust-dev/ink-oss@main/qexo-upload/24/4/image_88cab5786fba2733702e956581bd449f.png](https://cdnn.boochi.cn/gh/inkdust-dev/ink-oss@main/qexo-upload/24/4/image_88cab5786fba2733702e956581bd449f.png)\n\n双击系统变量中的Path变量（如未找到请向下滑动），新建一个环境变量：`%JAVA_HOME%\\bin`\n\n![https://cdnn.boochi.cn/gh/inkdust-dev/ink-oss@main/qexo-upload/24/4/image_08bed54b5c5c36d2ff211f0e99d5c3ae.png](https://cdnn.boochi.cn/gh/inkdust-dev/ink-oss@main/qexo-upload/24/4/image_08bed54b5c5c36d2ff211f0e99d5c3ae.png)\n\n添加好变量后，按Win + R输入 `cmd`打开命令提示符。输入 `java -version`，出现版本号即代表环境配置完成。\n\n![https://cdnn.boochi.cn/gh/inkdust-dev/ink-oss@main/qexo-upload/24/4/image_f3a40b8ab04323e7836190df9fdb88ce.png](https://cdnn.boochi.cn/gh/inkdust-dev/ink-oss@main/qexo-upload/24/4/image_f3a40b8ab04323e7836190df9fdb88ce.png)\n\n## Minecraft Server端安装\n\n通过Minecraft官网下载Java版本Server端。\n\n[Download server for Minecraft | Minecraft](https://www.minecraft.net/zh-hans/download/server)\n\n如果你打不开Minecraft官网，可点击[minecraft_server.1.20.4.jar](https://piston-data.mojang.com/v1/objects/8dd1a28015f51b1803213892b50b7b4fc76e594d/server.jar)下载1.20.4版本的Server端。\n\n![https://cdnn.boochi.cn/gh/inkdust-dev/ink-oss@main/qexo-upload/24/4/image_1135144edd37d1b56adec4b769f1ab88.png](https://cdnn.boochi.cn/gh/inkdust-dev/ink-oss@main/qexo-upload/24/4/image_1135144edd37d1b56adec4b769f1ab88.png)\n\n下载后双击打开，并修改生成的eula文件中的“elua=false”为\n\n```plaintext\nelua=true\n```\n\n如果你没有正版账号，请修改“server.properties”文件中的online-mode为false。\n\n![https://cdnn.boochi.cn/gh/inkdust-dev/ink-oss@main/qexo-upload/24/4/image_4e0af366d6a00236eb6ad5af38ba47a4.png](https://cdnn.boochi.cn/gh/inkdust-dev/ink-oss@main/qexo-upload/24/4/image_4e0af366d6a00236eb6ad5af38ba47a4.png)\n\n然后点击地址栏，输入“cmd”打开命令提示符，输入：\n\n```plaintext\njava -jar server.jar --nogui\n```\n\n即可建立属于你自己的Minecraft服务器。地址即为：[ip]:25565\n\n## 安装客户端\n\n{% note danger %}\n\n安装客户端不需要在服务器上安装，请在游玩的电脑上安装。\n\n{% endnote %}\n\n如果您已购买Minecraft服务器，您可以安装第三方客户端登陆。\n\n如果你想不购买Minecraft即可游玩该游戏，您需要安装第三方客户端游玩。\n\n以第三方启动器PCL2为例子：\n\n### 下载PCL2\n\n开发者创作不易，如有条件可发电支持。\n\n[PCL 正式版下载丨龙腾猫跃丨爱发电](https://afdian.net/p/0164034c016c11ebafcb52540025c377)\n\n最新正式版永久下载地址\n\n**下载地址** 1：[https://ltcat.lanzoum.com/b0aj6gsid](https://ltcat.lanzoum.com/b0aj6gsid)（提取码：pcl2）\n\n**下载地址** 2：[https://pan.baidu.com/s/1f7ipEIkZeMNmGSs\\_fu2YoA?pwd=pcl2](https://pan.baidu.com/s/1f7ipEIkZeMNmGSs_fu2YoA?pwd=pcl2)（提取码：pcl2）\n\n下载后双击“Plain Craft Launcher 2.exe”即可。可在PCL2中安装MC、Mod、Fabric、Forge、Optifine等等。\n\n![https://cdnn.boochi.cn/gh/inkdust-dev/ink-oss@main/qexo-upload/24/4/image_204337b6bfac7022855d583fbcdbdc8c.png](https://cdnn.boochi.cn/gh/inkdust-dev/ink-oss@main/qexo-upload/24/4/image_204337b6bfac7022855d583fbcdbdc8c.png)\n\n如果在过程中出现安装MC出现问题，请参考下方内容进行解决。\n\n### MC下载问题\n\n由于受到 MCBBS 关站影响，由 MCBBS 提供服务的 MCBBS 国内源也已关闭。MCBBS 源是国内最大的 Minecraft 镜像下载源，所以PCL2启动器因此受影响，您可以更新PCL2版本来解决该问题。\n\n如无法获取版本列表。\n\n您可在PCL 2中的设置——个性化——下载——版本列表中选择尽量使用官方源。\n\n![https://cdnn.boochi.cn/gh/inkdust-dev/ink-oss@main/qexo-upload/24/4/image_86c5ea6aa39d597248b6f40fa7e9b97c.png](https://cdnn.boochi.cn/gh/inkdust-dev/ink-oss@main/qexo-upload/24/4/image_86c5ea6aa39d597248b6f40fa7e9b97c.png)\n","slug":"minecraft-server-deploy","published":1,"comments":1,"layout":"post","photos":[],"_id":"cm1xg6mt300079a9o6sfn9gz6","content":"<h2 id=\"介绍\"><a href=\"#介绍\" class=\"headerlink\" title=\"介绍\"></a>介绍</h2><p><strong>《我的世界》</strong>（Minecraft）是一款沙盒类电子游戏，由马库斯·阿列克谢·泊松（Notch）创作。游戏由Mojang Studios维护，现属微软Xbox游戏工作室。最初于2009年5月17日发布Classic版本，2011年11月18日推出Java正式版。游戏可在桌面设备、移动设备和游戏主机上运行。中国版目前由网易游戏代理，自2016年5月20日起在中国大陆运营。</p>\n<p>在延斯·伯根斯坦（Jeb）加入并负责开发之前，Notch几乎独自完成了《我的世界》的开发工作。游戏音乐由丹尼尔·罗森菲尔德（C418）和莉娜·雷恩（Lena Raine）创作；克里斯托弗·泽特斯特兰绘制了游戏中的画。</p>\n<p>游戏的核心玩法是让玩家在充满方块的三维空间中自由创造和破坏各种方块。玩家可以在单人或多人模式下摧毁或建造复杂的建筑和艺术品，或者收集物品探索地图以完成游戏的成就。此外，在创造模式下，玩家还可以尝试使用红石电路和指令等功能。</p>\n<p>——摘自百度百科</p>\n<div class=\"note note-danger\">\n            <p>该教程仅适用于Java版本的Minecraft游戏，不适用于网易版《我的世界》、基岩版Minecraft。</p>\n          </div>\n\n<h2 id=\"测试环境\"><a href=\"#测试环境\" class=\"headerlink\" title=\"测试环境\"></a>测试环境</h2><p>处理器\tIntel(R) Xeon(R) CPU E5-2696 v4 @ 2.20GHz   2.20 GHz  (4 个处理器)<br>机带 RAM\t8.00 GB<br>设备 ID\tF6EB2C89-0238-491C-BA33-7922E889987D<br>产品 ID\t00455-10000-00000-AAOEM<br>系统类型\t64 位操作系统, 基于 x64 的处理器<br>笔和触控\t没有可用于此显示器的笔或触控输入</p>\n<p>版本\tWindows Server 2022 Datacenter<br>版本号\t21H2<br>安装日期\t‎2024&#x2F;‎3&#x2F;‎26<br>操作系统内部版本\t20348.2340</p>\n<h2 id=\"Java环境安装\"><a href=\"#Java环境安装\" class=\"headerlink\" title=\"Java环境安装\"></a>Java环境安装</h2><p>来到Oracle官网安装Java环境。<a href=\"https://www.oracle.com/cn/java/technologies/downloads/\">Java Downloads | Oracle 中国</a></p>\n<p>本教程使用JDK22作为演示环境。下载地址：</p>\n<table>\n<thead>\n<tr>\n<th>Product&#x2F;file description</th>\n<th>File size</th>\n<th>Download</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>x64 Compressed Archive</td>\n<td>185.52 MB</td>\n<td><a href=\"https://download.oracle.com/java/22/latest/jdk-22_windows-x64_bin.zip\">https://download.oracle.com/java/22/latest/jdk-22_windows-x64_bin.zip</a> (<a href=\"https://download.oracle.com/java/22/latest/jdk-22_windows-x64_bin.zip.sha256\">sha256</a>)</td>\n</tr>\n<tr>\n<td>x64 Installer</td>\n<td>163.91 MB</td>\n<td><a href=\"https://download.oracle.com/java/22/latest/jdk-22_windows-x64_bin.exe\">https://download.oracle.com/java/22/latest/jdk-22_windows-x64_bin.exe</a> (<a href=\"https://download.oracle.com/java/22/latest/jdk-22_windows-x64_bin.exe.sha256\">sha256</a>)</td>\n</tr>\n<tr>\n<td>x64 MSI Installer</td>\n<td>162.07MB</td>\n<td><a href=\"https://download.oracle.com/java/22/latest/jdk-22_windows-x64_bin.msi\">https://download.oracle.com/java/22/latest/jdk-22_windows-x64_bin.msi</a> (<a href=\"https://download.oracle.com/java/22/latest/jdk-22_windows-x64_bin.msi.sha256\">sha256</a>)</td>\n</tr>\n</tbody></table>\n<p>如果你的服务器出于中国境内，或在此页面下载缓慢，可以尝试使用Injdk下载。</p>\n<p>Injdk地址：<a href=\"https://injdk.cn/#oracle-jdk\">OracleJDK</a></p>\n<p>JDK22下载地址：</p>\n<table>\n<thead>\n<tr>\n<th>Product&#x2F;file description</th>\n<th>File size</th>\n<th>Download</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>x64 Compressed Archive</td>\n<td>185.52 MB</td>\n<td><a href=\"%5Bhttps://d6.injdk.cn/oraclejdk/22/jdk-22_windows-x64_bin.zip%5D(https://d6.injdk.cn/oraclejdk/22/jdk-22_windows-x64_bin.zip)\">https://d6.injdk.cn/oraclejdk/22/jdk-22_windows-x64_bin.zip</a> (<a href=\"https://download.oracle.com/java/22/latest/jdk-22_windows-x64_bin.zip.sha256\">sha256</a>)</td>\n</tr>\n<tr>\n<td>x64 Installer</td>\n<td>163.91 MB</td>\n<td><a href=\"https://d6.injdk.cn/oraclejdk/22/jdk-22_windows-x64_bin.exe\">https://d6.injdk.cn/oraclejdk/22/jdk-22_windows-x64_bin.exe</a> (<a href=\"https://download.oracle.com/java/22/latest/jdk-22_windows-x64_bin.exe.sha256\">sha256</a>)</td>\n</tr>\n<tr>\n<td>x64 MSI Installer</td>\n<td>162.07MB</td>\n<td><a href=\"https://d6.injdk.cn/oraclejdk/22/jdk-22_windows-x64_bin.msi\">https://d6.injdk.cn/oraclejdk/22/jdk-22_windows-x64_bin.msi</a> (<a href=\"https://download.oracle.com/java/22/latest/jdk-22_windows-x64_bin.exe.sha256\">sha256</a>)</td>\n</tr>\n</tbody></table>\n<p><img src=\"https://cdnn.boochi.cn/gh/inkdust-dev/ink-oss@main/qexo-upload/24/4/image_fe44aa71038b03b1a92843ff66b698ed.png\" alt=\"https://cdnn.boochi.cn/gh/inkdust-dev/ink-oss@main/qexo-upload/24/4/image_fe44aa71038b03b1a92843ff66b698ed.png\"></p>\n<p>一直下一步即可。</p>\n<p>安装完成后关闭弹窗即可。</p>\n<p>在搜索框搜索“查看高级系统设置”，在其他版本的Windows上可能是“高级系统设置”，请注意识别</p>\n<p><img src=\"https://cdnn.boochi.cn/gh/inkdust-dev/ink-oss@main/qexo-upload/24/4/image_1709db623d6aa13a1ccf097e0e58ce7f.png\" alt=\"https://cdnn.boochi.cn/gh/inkdust-dev/ink-oss@main/qexo-upload/24/4/image_1709db623d6aa13a1ccf097e0e58ce7f.png\"></p>\n<p>打开后选择环境变量，新建一个用户变量。</p>\n<p>变量名为 <code>JAVA_HOME</code></p>\n<p>变量值为你的Java安装路径，如果你安装时未选择安装路径，请填写 <code>C:\\Program Files\\Java\\jdk-22</code></p>\n<p>如果你安装时已选择安装路径，请填写为你安装选择的路径</p>\n<p><img src=\"https://cdnn.boochi.cn/gh/inkdust-dev/ink-oss@main/qexo-upload/24/4/image_88cab5786fba2733702e956581bd449f.png\" alt=\"https://cdnn.boochi.cn/gh/inkdust-dev/ink-oss@main/qexo-upload/24/4/image_88cab5786fba2733702e956581bd449f.png\"></p>\n<p>双击系统变量中的Path变量（如未找到请向下滑动），新建一个环境变量：<code>%JAVA_HOME%\\bin</code></p>\n<p><img src=\"https://cdnn.boochi.cn/gh/inkdust-dev/ink-oss@main/qexo-upload/24/4/image_08bed54b5c5c36d2ff211f0e99d5c3ae.png\" alt=\"https://cdnn.boochi.cn/gh/inkdust-dev/ink-oss@main/qexo-upload/24/4/image_08bed54b5c5c36d2ff211f0e99d5c3ae.png\"></p>\n<p>添加好变量后，按Win + R输入 <code>cmd</code>打开命令提示符。输入 <code>java -version</code>，出现版本号即代表环境配置完成。</p>\n<p><img src=\"https://cdnn.boochi.cn/gh/inkdust-dev/ink-oss@main/qexo-upload/24/4/image_f3a40b8ab04323e7836190df9fdb88ce.png\" alt=\"https://cdnn.boochi.cn/gh/inkdust-dev/ink-oss@main/qexo-upload/24/4/image_f3a40b8ab04323e7836190df9fdb88ce.png\"></p>\n<h2 id=\"Minecraft-Server端安装\"><a href=\"#Minecraft-Server端安装\" class=\"headerlink\" title=\"Minecraft Server端安装\"></a>Minecraft Server端安装</h2><p>通过Minecraft官网下载Java版本Server端。</p>\n<p><a href=\"https://www.minecraft.net/zh-hans/download/server\">Download server for Minecraft | Minecraft</a></p>\n<p>如果你打不开Minecraft官网，可点击<a href=\"https://piston-data.mojang.com/v1/objects/8dd1a28015f51b1803213892b50b7b4fc76e594d/server.jar\">minecraft_server.1.20.4.jar</a>下载1.20.4版本的Server端。</p>\n<p><img src=\"https://cdnn.boochi.cn/gh/inkdust-dev/ink-oss@main/qexo-upload/24/4/image_1135144edd37d1b56adec4b769f1ab88.png\" alt=\"https://cdnn.boochi.cn/gh/inkdust-dev/ink-oss@main/qexo-upload/24/4/image_1135144edd37d1b56adec4b769f1ab88.png\"></p>\n<p>下载后双击打开，并修改生成的eula文件中的“elua&#x3D;false”为</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs plaintext\">elua=true<br></code></pre></td></tr></table></figure>\n\n<p>如果你没有正版账号，请修改“server.properties”文件中的online-mode为false。</p>\n<p><img src=\"https://cdnn.boochi.cn/gh/inkdust-dev/ink-oss@main/qexo-upload/24/4/image_4e0af366d6a00236eb6ad5af38ba47a4.png\" alt=\"https://cdnn.boochi.cn/gh/inkdust-dev/ink-oss@main/qexo-upload/24/4/image_4e0af366d6a00236eb6ad5af38ba47a4.png\"></p>\n<p>然后点击地址栏，输入“cmd”打开命令提示符，输入：</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs plaintext\">java -jar server.jar --nogui<br></code></pre></td></tr></table></figure>\n\n<p>即可建立属于你自己的Minecraft服务器。地址即为：[ip]:25565</p>\n<h2 id=\"安装客户端\"><a href=\"#安装客户端\" class=\"headerlink\" title=\"安装客户端\"></a>安装客户端</h2><div class=\"note note-danger\">\n            <p>安装客户端不需要在服务器上安装，请在游玩的电脑上安装。</p>\n          </div>\n\n<p>如果您已购买Minecraft服务器，您可以安装第三方客户端登陆。</p>\n<p>如果你想不购买Minecraft即可游玩该游戏，您需要安装第三方客户端游玩。</p>\n<p>以第三方启动器PCL2为例子：</p>\n<h3 id=\"下载PCL2\"><a href=\"#下载PCL2\" class=\"headerlink\" title=\"下载PCL2\"></a>下载PCL2</h3><p>开发者创作不易，如有条件可发电支持。</p>\n<p><a href=\"https://afdian.net/p/0164034c016c11ebafcb52540025c377\">PCL 正式版下载丨龙腾猫跃丨爱发电</a></p>\n<p>最新正式版永久下载地址</p>\n<p><strong>下载地址</strong> 1：<a href=\"https://ltcat.lanzoum.com/b0aj6gsid\">https://ltcat.lanzoum.com/b0aj6gsid</a>（提取码：pcl2）</p>\n<p><strong>下载地址</strong> 2：<a href=\"https://pan.baidu.com/s/1f7ipEIkZeMNmGSs_fu2YoA?pwd=pcl2\">https://pan.baidu.com/s/1f7ipEIkZeMNmGSs_fu2YoA?pwd&#x3D;pcl2</a>（提取码：pcl2）</p>\n<p>下载后双击“Plain Craft Launcher 2.exe”即可。可在PCL2中安装MC、Mod、Fabric、Forge、Optifine等等。</p>\n<p><img src=\"https://cdnn.boochi.cn/gh/inkdust-dev/ink-oss@main/qexo-upload/24/4/image_204337b6bfac7022855d583fbcdbdc8c.png\" alt=\"https://cdnn.boochi.cn/gh/inkdust-dev/ink-oss@main/qexo-upload/24/4/image_204337b6bfac7022855d583fbcdbdc8c.png\"></p>\n<p>如果在过程中出现安装MC出现问题，请参考下方内容进行解决。</p>\n<h3 id=\"MC下载问题\"><a href=\"#MC下载问题\" class=\"headerlink\" title=\"MC下载问题\"></a>MC下载问题</h3><p>由于受到 MCBBS 关站影响，由 MCBBS 提供服务的 MCBBS 国内源也已关闭。MCBBS 源是国内最大的 Minecraft 镜像下载源，所以PCL2启动器因此受影响，您可以更新PCL2版本来解决该问题。</p>\n<p>如无法获取版本列表。</p>\n<p>您可在PCL 2中的设置——个性化——下载——版本列表中选择尽量使用官方源。</p>\n<p><img src=\"https://cdnn.boochi.cn/gh/inkdust-dev/ink-oss@main/qexo-upload/24/4/image_86c5ea6aa39d597248b6f40fa7e9b97c.png\" alt=\"https://cdnn.boochi.cn/gh/inkdust-dev/ink-oss@main/qexo-upload/24/4/image_86c5ea6aa39d597248b6f40fa7e9b97c.png\"></p>\n","excerpt":"","more":"<h2 id=\"介绍\"><a href=\"#介绍\" class=\"headerlink\" title=\"介绍\"></a>介绍</h2><p><strong>《我的世界》</strong>（Minecraft）是一款沙盒类电子游戏，由马库斯·阿列克谢·泊松（Notch）创作。游戏由Mojang Studios维护，现属微软Xbox游戏工作室。最初于2009年5月17日发布Classic版本，2011年11月18日推出Java正式版。游戏可在桌面设备、移动设备和游戏主机上运行。中国版目前由网易游戏代理，自2016年5月20日起在中国大陆运营。</p>\n<p>在延斯·伯根斯坦（Jeb）加入并负责开发之前，Notch几乎独自完成了《我的世界》的开发工作。游戏音乐由丹尼尔·罗森菲尔德（C418）和莉娜·雷恩（Lena Raine）创作；克里斯托弗·泽特斯特兰绘制了游戏中的画。</p>\n<p>游戏的核心玩法是让玩家在充满方块的三维空间中自由创造和破坏各种方块。玩家可以在单人或多人模式下摧毁或建造复杂的建筑和艺术品，或者收集物品探索地图以完成游戏的成就。此外，在创造模式下，玩家还可以尝试使用红石电路和指令等功能。</p>\n<p>——摘自百度百科</p>\n<div class=\"note note-danger\">\n            <p>该教程仅适用于Java版本的Minecraft游戏，不适用于网易版《我的世界》、基岩版Minecraft。</p>\n          </div>\n\n<h2 id=\"测试环境\"><a href=\"#测试环境\" class=\"headerlink\" title=\"测试环境\"></a>测试环境</h2><p>处理器\tIntel(R) Xeon(R) CPU E5-2696 v4 @ 2.20GHz   2.20 GHz  (4 个处理器)<br>机带 RAM\t8.00 GB<br>设备 ID\tF6EB2C89-0238-491C-BA33-7922E889987D<br>产品 ID\t00455-10000-00000-AAOEM<br>系统类型\t64 位操作系统, 基于 x64 的处理器<br>笔和触控\t没有可用于此显示器的笔或触控输入</p>\n<p>版本\tWindows Server 2022 Datacenter<br>版本号\t21H2<br>安装日期\t‎2024&#x2F;‎3&#x2F;‎26<br>操作系统内部版本\t20348.2340</p>\n<h2 id=\"Java环境安装\"><a href=\"#Java环境安装\" class=\"headerlink\" title=\"Java环境安装\"></a>Java环境安装</h2><p>来到Oracle官网安装Java环境。<a href=\"https://www.oracle.com/cn/java/technologies/downloads/\">Java Downloads | Oracle 中国</a></p>\n<p>本教程使用JDK22作为演示环境。下载地址：</p>\n<table>\n<thead>\n<tr>\n<th>Product&#x2F;file description</th>\n<th>File size</th>\n<th>Download</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>x64 Compressed Archive</td>\n<td>185.52 MB</td>\n<td><a href=\"https://download.oracle.com/java/22/latest/jdk-22_windows-x64_bin.zip\">https://download.oracle.com/java/22/latest/jdk-22_windows-x64_bin.zip</a> (<a href=\"https://download.oracle.com/java/22/latest/jdk-22_windows-x64_bin.zip.sha256\">sha256</a>)</td>\n</tr>\n<tr>\n<td>x64 Installer</td>\n<td>163.91 MB</td>\n<td><a href=\"https://download.oracle.com/java/22/latest/jdk-22_windows-x64_bin.exe\">https://download.oracle.com/java/22/latest/jdk-22_windows-x64_bin.exe</a> (<a href=\"https://download.oracle.com/java/22/latest/jdk-22_windows-x64_bin.exe.sha256\">sha256</a>)</td>\n</tr>\n<tr>\n<td>x64 MSI Installer</td>\n<td>162.07MB</td>\n<td><a href=\"https://download.oracle.com/java/22/latest/jdk-22_windows-x64_bin.msi\">https://download.oracle.com/java/22/latest/jdk-22_windows-x64_bin.msi</a> (<a href=\"https://download.oracle.com/java/22/latest/jdk-22_windows-x64_bin.msi.sha256\">sha256</a>)</td>\n</tr>\n</tbody></table>\n<p>如果你的服务器出于中国境内，或在此页面下载缓慢，可以尝试使用Injdk下载。</p>\n<p>Injdk地址：<a href=\"https://injdk.cn/#oracle-jdk\">OracleJDK</a></p>\n<p>JDK22下载地址：</p>\n<table>\n<thead>\n<tr>\n<th>Product&#x2F;file description</th>\n<th>File size</th>\n<th>Download</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>x64 Compressed Archive</td>\n<td>185.52 MB</td>\n<td><a href=\"%5Bhttps://d6.injdk.cn/oraclejdk/22/jdk-22_windows-x64_bin.zip%5D(https://d6.injdk.cn/oraclejdk/22/jdk-22_windows-x64_bin.zip)\">https://d6.injdk.cn/oraclejdk/22/jdk-22_windows-x64_bin.zip</a> (<a href=\"https://download.oracle.com/java/22/latest/jdk-22_windows-x64_bin.zip.sha256\">sha256</a>)</td>\n</tr>\n<tr>\n<td>x64 Installer</td>\n<td>163.91 MB</td>\n<td><a href=\"https://d6.injdk.cn/oraclejdk/22/jdk-22_windows-x64_bin.exe\">https://d6.injdk.cn/oraclejdk/22/jdk-22_windows-x64_bin.exe</a> (<a href=\"https://download.oracle.com/java/22/latest/jdk-22_windows-x64_bin.exe.sha256\">sha256</a>)</td>\n</tr>\n<tr>\n<td>x64 MSI Installer</td>\n<td>162.07MB</td>\n<td><a href=\"https://d6.injdk.cn/oraclejdk/22/jdk-22_windows-x64_bin.msi\">https://d6.injdk.cn/oraclejdk/22/jdk-22_windows-x64_bin.msi</a> (<a href=\"https://download.oracle.com/java/22/latest/jdk-22_windows-x64_bin.exe.sha256\">sha256</a>)</td>\n</tr>\n</tbody></table>\n<p><img src=\"https://cdnn.boochi.cn/gh/inkdust-dev/ink-oss@main/qexo-upload/24/4/image_fe44aa71038b03b1a92843ff66b698ed.png\" alt=\"https://cdnn.boochi.cn/gh/inkdust-dev/ink-oss@main/qexo-upload/24/4/image_fe44aa71038b03b1a92843ff66b698ed.png\"></p>\n<p>一直下一步即可。</p>\n<p>安装完成后关闭弹窗即可。</p>\n<p>在搜索框搜索“查看高级系统设置”，在其他版本的Windows上可能是“高级系统设置”，请注意识别</p>\n<p><img src=\"https://cdnn.boochi.cn/gh/inkdust-dev/ink-oss@main/qexo-upload/24/4/image_1709db623d6aa13a1ccf097e0e58ce7f.png\" alt=\"https://cdnn.boochi.cn/gh/inkdust-dev/ink-oss@main/qexo-upload/24/4/image_1709db623d6aa13a1ccf097e0e58ce7f.png\"></p>\n<p>打开后选择环境变量，新建一个用户变量。</p>\n<p>变量名为 <code>JAVA_HOME</code></p>\n<p>变量值为你的Java安装路径，如果你安装时未选择安装路径，请填写 <code>C:\\Program Files\\Java\\jdk-22</code></p>\n<p>如果你安装时已选择安装路径，请填写为你安装选择的路径</p>\n<p><img src=\"https://cdnn.boochi.cn/gh/inkdust-dev/ink-oss@main/qexo-upload/24/4/image_88cab5786fba2733702e956581bd449f.png\" alt=\"https://cdnn.boochi.cn/gh/inkdust-dev/ink-oss@main/qexo-upload/24/4/image_88cab5786fba2733702e956581bd449f.png\"></p>\n<p>双击系统变量中的Path变量（如未找到请向下滑动），新建一个环境变量：<code>%JAVA_HOME%\\bin</code></p>\n<p><img src=\"https://cdnn.boochi.cn/gh/inkdust-dev/ink-oss@main/qexo-upload/24/4/image_08bed54b5c5c36d2ff211f0e99d5c3ae.png\" alt=\"https://cdnn.boochi.cn/gh/inkdust-dev/ink-oss@main/qexo-upload/24/4/image_08bed54b5c5c36d2ff211f0e99d5c3ae.png\"></p>\n<p>添加好变量后，按Win + R输入 <code>cmd</code>打开命令提示符。输入 <code>java -version</code>，出现版本号即代表环境配置完成。</p>\n<p><img src=\"https://cdnn.boochi.cn/gh/inkdust-dev/ink-oss@main/qexo-upload/24/4/image_f3a40b8ab04323e7836190df9fdb88ce.png\" alt=\"https://cdnn.boochi.cn/gh/inkdust-dev/ink-oss@main/qexo-upload/24/4/image_f3a40b8ab04323e7836190df9fdb88ce.png\"></p>\n<h2 id=\"Minecraft-Server端安装\"><a href=\"#Minecraft-Server端安装\" class=\"headerlink\" title=\"Minecraft Server端安装\"></a>Minecraft Server端安装</h2><p>通过Minecraft官网下载Java版本Server端。</p>\n<p><a href=\"https://www.minecraft.net/zh-hans/download/server\">Download server for Minecraft | Minecraft</a></p>\n<p>如果你打不开Minecraft官网，可点击<a href=\"https://piston-data.mojang.com/v1/objects/8dd1a28015f51b1803213892b50b7b4fc76e594d/server.jar\">minecraft_server.1.20.4.jar</a>下载1.20.4版本的Server端。</p>\n<p><img src=\"https://cdnn.boochi.cn/gh/inkdust-dev/ink-oss@main/qexo-upload/24/4/image_1135144edd37d1b56adec4b769f1ab88.png\" alt=\"https://cdnn.boochi.cn/gh/inkdust-dev/ink-oss@main/qexo-upload/24/4/image_1135144edd37d1b56adec4b769f1ab88.png\"></p>\n<p>下载后双击打开，并修改生成的eula文件中的“elua&#x3D;false”为</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs plaintext\">elua=true<br></code></pre></td></tr></table></figure>\n\n<p>如果你没有正版账号，请修改“server.properties”文件中的online-mode为false。</p>\n<p><img src=\"https://cdnn.boochi.cn/gh/inkdust-dev/ink-oss@main/qexo-upload/24/4/image_4e0af366d6a00236eb6ad5af38ba47a4.png\" alt=\"https://cdnn.boochi.cn/gh/inkdust-dev/ink-oss@main/qexo-upload/24/4/image_4e0af366d6a00236eb6ad5af38ba47a4.png\"></p>\n<p>然后点击地址栏，输入“cmd”打开命令提示符，输入：</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs plaintext\">java -jar server.jar --nogui<br></code></pre></td></tr></table></figure>\n\n<p>即可建立属于你自己的Minecraft服务器。地址即为：[ip]:25565</p>\n<h2 id=\"安装客户端\"><a href=\"#安装客户端\" class=\"headerlink\" title=\"安装客户端\"></a>安装客户端</h2><div class=\"note note-danger\">\n            <p>安装客户端不需要在服务器上安装，请在游玩的电脑上安装。</p>\n          </div>\n\n<p>如果您已购买Minecraft服务器，您可以安装第三方客户端登陆。</p>\n<p>如果你想不购买Minecraft即可游玩该游戏，您需要安装第三方客户端游玩。</p>\n<p>以第三方启动器PCL2为例子：</p>\n<h3 id=\"下载PCL2\"><a href=\"#下载PCL2\" class=\"headerlink\" title=\"下载PCL2\"></a>下载PCL2</h3><p>开发者创作不易，如有条件可发电支持。</p>\n<p><a href=\"https://afdian.net/p/0164034c016c11ebafcb52540025c377\">PCL 正式版下载丨龙腾猫跃丨爱发电</a></p>\n<p>最新正式版永久下载地址</p>\n<p><strong>下载地址</strong> 1：<a href=\"https://ltcat.lanzoum.com/b0aj6gsid\">https://ltcat.lanzoum.com/b0aj6gsid</a>（提取码：pcl2）</p>\n<p><strong>下载地址</strong> 2：<a href=\"https://pan.baidu.com/s/1f7ipEIkZeMNmGSs_fu2YoA?pwd=pcl2\">https://pan.baidu.com/s/1f7ipEIkZeMNmGSs_fu2YoA?pwd&#x3D;pcl2</a>（提取码：pcl2）</p>\n<p>下载后双击“Plain Craft Launcher 2.exe”即可。可在PCL2中安装MC、Mod、Fabric、Forge、Optifine等等。</p>\n<p><img src=\"https://cdnn.boochi.cn/gh/inkdust-dev/ink-oss@main/qexo-upload/24/4/image_204337b6bfac7022855d583fbcdbdc8c.png\" alt=\"https://cdnn.boochi.cn/gh/inkdust-dev/ink-oss@main/qexo-upload/24/4/image_204337b6bfac7022855d583fbcdbdc8c.png\"></p>\n<p>如果在过程中出现安装MC出现问题，请参考下方内容进行解决。</p>\n<h3 id=\"MC下载问题\"><a href=\"#MC下载问题\" class=\"headerlink\" title=\"MC下载问题\"></a>MC下载问题</h3><p>由于受到 MCBBS 关站影响，由 MCBBS 提供服务的 MCBBS 国内源也已关闭。MCBBS 源是国内最大的 Minecraft 镜像下载源，所以PCL2启动器因此受影响，您可以更新PCL2版本来解决该问题。</p>\n<p>如无法获取版本列表。</p>\n<p>您可在PCL 2中的设置——个性化——下载——版本列表中选择尽量使用官方源。</p>\n<p><img src=\"https://cdnn.boochi.cn/gh/inkdust-dev/ink-oss@main/qexo-upload/24/4/image_86c5ea6aa39d597248b6f40fa7e9b97c.png\" alt=\"https://cdnn.boochi.cn/gh/inkdust-dev/ink-oss@main/qexo-upload/24/4/image_86c5ea6aa39d597248b6f40fa7e9b97c.png\"></p>\n"},{"abbrlink":"","index_img":"https://cdnn.boochi.cn/gh/inkdust-dev/ink-oss@main/blog-image/new-starts.png","date":"2023-05-21T11:37:38.000Z","title":"新的开始","updated":"2024-08-07T14:28:52.403Z","_content":"## 关于博客\n\n博客在2023年5月21日正式重建，换用了Acrylic-Team基于Next修改的主题[Hexo-Theme-Acrylic-Next](https://github.com/hexo-theme-Acrylic/Hexo-Theme-Acrylic-Next)，相关文章陆续修改和迁移中，将会不断创作出更加多的优质内容。\n\n## 建站历程\n\nDec 22, 2021 由前Github账号myupup123开启了对Hexo博客的探索，使用主题Butterfly。\n\nMar 26, 2022 由前Github账号myupup123使用了Wexa进行对博客的管理。\n\nApr 16, 2022 前GitHub账号myupup123将项目权限转交给新Github账号inkdust-dev（墨尘），短暂的更换使用过cards主题。\n\nAug 5, 2022 Github账号inkdust-dev（墨尘）使用了Qexo进行对博客的管理。\n\nAug 25, 2022 Github账号inkdust-dev（墨尘）更换主题为Fluid。\n\nApr 16, 2023 Github账号inkdust-dev（墨尘）更换主题为Yun。\n\nMay 21, 2023 Github账号inkdust-dev（墨尘）重构博客（友链已合并）并更换主题为[Acrylic-Next](https://github.com/hexo-theme-Acrylic/Hexo-Theme-Acrylic-Next)。\n\n## 寄语\n\n新的开始，新的未来！\n","source":"_posts/new-start.md","raw":"---\nabbrlink: ''\ncategories: []\nindex_img: https://cdnn.boochi.cn/gh/inkdust-dev/ink-oss@main/blog-image/new-starts.png\ndate: Sun, 21 May 2023 11:37:38 GMT\ntags:\n- 随记\ntitle: 新的开始\nupdated: '2024-08-07T22:28:52.403+08:00'\n---\n## 关于博客\n\n博客在2023年5月21日正式重建，换用了Acrylic-Team基于Next修改的主题[Hexo-Theme-Acrylic-Next](https://github.com/hexo-theme-Acrylic/Hexo-Theme-Acrylic-Next)，相关文章陆续修改和迁移中，将会不断创作出更加多的优质内容。\n\n## 建站历程\n\nDec 22, 2021 由前Github账号myupup123开启了对Hexo博客的探索，使用主题Butterfly。\n\nMar 26, 2022 由前Github账号myupup123使用了Wexa进行对博客的管理。\n\nApr 16, 2022 前GitHub账号myupup123将项目权限转交给新Github账号inkdust-dev（墨尘），短暂的更换使用过cards主题。\n\nAug 5, 2022 Github账号inkdust-dev（墨尘）使用了Qexo进行对博客的管理。\n\nAug 25, 2022 Github账号inkdust-dev（墨尘）更换主题为Fluid。\n\nApr 16, 2023 Github账号inkdust-dev（墨尘）更换主题为Yun。\n\nMay 21, 2023 Github账号inkdust-dev（墨尘）重构博客（友链已合并）并更换主题为[Acrylic-Next](https://github.com/hexo-theme-Acrylic/Hexo-Theme-Acrylic-Next)。\n\n## 寄语\n\n新的开始，新的未来！\n","slug":"new-start","published":1,"comments":1,"layout":"post","photos":[],"_id":"cm1xg6mt400099a9oemay1k6p","content":"<h2 id=\"关于博客\"><a href=\"#关于博客\" class=\"headerlink\" title=\"关于博客\"></a>关于博客</h2><p>博客在2023年5月21日正式重建，换用了Acrylic-Team基于Next修改的主题<a href=\"https://github.com/hexo-theme-Acrylic/Hexo-Theme-Acrylic-Next\">Hexo-Theme-Acrylic-Next</a>，相关文章陆续修改和迁移中，将会不断创作出更加多的优质内容。</p>\n<h2 id=\"建站历程\"><a href=\"#建站历程\" class=\"headerlink\" title=\"建站历程\"></a>建站历程</h2><p>Dec 22, 2021 由前Github账号myupup123开启了对Hexo博客的探索，使用主题Butterfly。</p>\n<p>Mar 26, 2022 由前Github账号myupup123使用了Wexa进行对博客的管理。</p>\n<p>Apr 16, 2022 前GitHub账号myupup123将项目权限转交给新Github账号inkdust-dev（墨尘），短暂的更换使用过cards主题。</p>\n<p>Aug 5, 2022 Github账号inkdust-dev（墨尘）使用了Qexo进行对博客的管理。</p>\n<p>Aug 25, 2022 Github账号inkdust-dev（墨尘）更换主题为Fluid。</p>\n<p>Apr 16, 2023 Github账号inkdust-dev（墨尘）更换主题为Yun。</p>\n<p>May 21, 2023 Github账号inkdust-dev（墨尘）重构博客（友链已合并）并更换主题为<a href=\"https://github.com/hexo-theme-Acrylic/Hexo-Theme-Acrylic-Next\">Acrylic-Next</a>。</p>\n<h2 id=\"寄语\"><a href=\"#寄语\" class=\"headerlink\" title=\"寄语\"></a>寄语</h2><p>新的开始，新的未来！</p>\n","excerpt":"","more":"<h2 id=\"关于博客\"><a href=\"#关于博客\" class=\"headerlink\" title=\"关于博客\"></a>关于博客</h2><p>博客在2023年5月21日正式重建，换用了Acrylic-Team基于Next修改的主题<a href=\"https://github.com/hexo-theme-Acrylic/Hexo-Theme-Acrylic-Next\">Hexo-Theme-Acrylic-Next</a>，相关文章陆续修改和迁移中，将会不断创作出更加多的优质内容。</p>\n<h2 id=\"建站历程\"><a href=\"#建站历程\" class=\"headerlink\" title=\"建站历程\"></a>建站历程</h2><p>Dec 22, 2021 由前Github账号myupup123开启了对Hexo博客的探索，使用主题Butterfly。</p>\n<p>Mar 26, 2022 由前Github账号myupup123使用了Wexa进行对博客的管理。</p>\n<p>Apr 16, 2022 前GitHub账号myupup123将项目权限转交给新Github账号inkdust-dev（墨尘），短暂的更换使用过cards主题。</p>\n<p>Aug 5, 2022 Github账号inkdust-dev（墨尘）使用了Qexo进行对博客的管理。</p>\n<p>Aug 25, 2022 Github账号inkdust-dev（墨尘）更换主题为Fluid。</p>\n<p>Apr 16, 2023 Github账号inkdust-dev（墨尘）更换主题为Yun。</p>\n<p>May 21, 2023 Github账号inkdust-dev（墨尘）重构博客（友链已合并）并更换主题为<a href=\"https://github.com/hexo-theme-Acrylic/Hexo-Theme-Acrylic-Next\">Acrylic-Next</a>。</p>\n<h2 id=\"寄语\"><a href=\"#寄语\" class=\"headerlink\" title=\"寄语\"></a>寄语</h2><p>新的开始，新的未来！</p>\n"},{"abbrlink":"","index_img":"https://cdnn.boochi.cn/gh/inkdust-dev/ink-oss@main/blog-image/vercel-recover.png","date":"2023-10-04T07:00:38.639Z","title":"[2023.10]Vercel国内阻断解决方案","updated":"2024-08-07T14:32:23.792Z","_content":"## 简单操作\n\n将Vercel的CNAME更换成 `vercel.dns.inkdust.top`，可快速解决无法访问的情况，等待DNS刷新后即可访问到网站。\n\n## 自选IP\n\n在下面的IP列表中选择合适的Vercel IP地址（IP地址由ChenYFan提供），并自定义解析路线。\n[https://gist.github.com/ChenYFan/fc2bd4ec1795766f2613b52ba123c0f8#file-ip-txt-L3](https://gist.github.com/ChenYFan/fc2bd4ec1795766f2613b52ba123c0f8#file-ip-txt-L3)\n如果不能打开，请看下方代码块：\n\n```\n34.95.57.145 [加拿大 魁北克省蒙特利尔 Google 云计算数据中心]\n13.49.54.242 [瑞典 斯德哥尔摩 Amazon 数据中心]\n18.178.194.147 [日本 东京都东京 Amazon 数据中心]\n52.79.72.148 [韩国 首尔 Amazon 数据中心]\n35.180.16.12 [法国 巴黎 Amazon 数据中心]\n18.206.69.11 [美国 弗吉尼亚州阿什本 Amazon 数据中心]\n52.76.85.65 [新加坡 Amazon 数据中心]\n18.130.52.74 [英国 伦敦 Amazon 数据中心]\n35.202.100.12 [美国 Merit 网络公司]\n35.195.188.93 [比利时 瓦隆大区圣吉斯兰 Google 云计算数据中心]\n3.22.103.24 [美国 Amazon EC2 服务器]\n34.253.160.225 [爱尔兰 都柏林 Amazon 数据中心]\n18.229.231.184 [巴西]\n15.206.54.182 [美国 惠普 HP]\n35.235.101.253 [美国 加利福尼亚州洛杉矶 Google 云计算数据中心]\n35.196.196.42 [美国 Merit 网络公司]\n35.228.53.122 [美国 俄勒冈州达尔斯 Google 云计算数据中心]\n34.65.228.161 [美国 得克萨斯州]\n52.38.79.87 [美国 俄勒冈州波特兰 Amazon 数据中心]\n13.238.105.1 [澳大利亚 新南威尔士州悉尼 Amazon 数据中心]\n104.199.217.228 [台湾省彰化县 Google 云计算数据中心]\n52.9.164.177 [美国 加利福尼亚州旧金山 Amazon 数据中心]\n18.162.37.140 [香港 Amazon 数据中心]\n```\n\n可自行选择合适的IP解析，或在IP失效时更换其他IP。\n\n## 更换构建程序\n\n例如：Azure Static App、Aws Amplify、Netlify、CloudFlare Page/S3、4everland等，可在网上自行查询。\n","source":"_posts/vercel-recover.md","raw":"---\nabbrlink: ''\ncategories: []\nindex_img: https://cdnn.boochi.cn/gh/inkdust-dev/ink-oss@main/blog-image/vercel-recover.png\ndate: '2023-10-04T15:00:38.639280+08:00'\ntags: []\ntitle: '[2023.10]Vercel国内阻断解决方案'\nupdated: '2024-08-07T22:32:23.792+08:00'\n---\n## 简单操作\n\n将Vercel的CNAME更换成 `vercel.dns.inkdust.top`，可快速解决无法访问的情况，等待DNS刷新后即可访问到网站。\n\n## 自选IP\n\n在下面的IP列表中选择合适的Vercel IP地址（IP地址由ChenYFan提供），并自定义解析路线。\n[https://gist.github.com/ChenYFan/fc2bd4ec1795766f2613b52ba123c0f8#file-ip-txt-L3](https://gist.github.com/ChenYFan/fc2bd4ec1795766f2613b52ba123c0f8#file-ip-txt-L3)\n如果不能打开，请看下方代码块：\n\n```\n34.95.57.145 [加拿大 魁北克省蒙特利尔 Google 云计算数据中心]\n13.49.54.242 [瑞典 斯德哥尔摩 Amazon 数据中心]\n18.178.194.147 [日本 东京都东京 Amazon 数据中心]\n52.79.72.148 [韩国 首尔 Amazon 数据中心]\n35.180.16.12 [法国 巴黎 Amazon 数据中心]\n18.206.69.11 [美国 弗吉尼亚州阿什本 Amazon 数据中心]\n52.76.85.65 [新加坡 Amazon 数据中心]\n18.130.52.74 [英国 伦敦 Amazon 数据中心]\n35.202.100.12 [美国 Merit 网络公司]\n35.195.188.93 [比利时 瓦隆大区圣吉斯兰 Google 云计算数据中心]\n3.22.103.24 [美国 Amazon EC2 服务器]\n34.253.160.225 [爱尔兰 都柏林 Amazon 数据中心]\n18.229.231.184 [巴西]\n15.206.54.182 [美国 惠普 HP]\n35.235.101.253 [美国 加利福尼亚州洛杉矶 Google 云计算数据中心]\n35.196.196.42 [美国 Merit 网络公司]\n35.228.53.122 [美国 俄勒冈州达尔斯 Google 云计算数据中心]\n34.65.228.161 [美国 得克萨斯州]\n52.38.79.87 [美国 俄勒冈州波特兰 Amazon 数据中心]\n13.238.105.1 [澳大利亚 新南威尔士州悉尼 Amazon 数据中心]\n104.199.217.228 [台湾省彰化县 Google 云计算数据中心]\n52.9.164.177 [美国 加利福尼亚州旧金山 Amazon 数据中心]\n18.162.37.140 [香港 Amazon 数据中心]\n```\n\n可自行选择合适的IP解析，或在IP失效时更换其他IP。\n\n## 更换构建程序\n\n例如：Azure Static App、Aws Amplify、Netlify、CloudFlare Page/S3、4everland等，可在网上自行查询。\n","slug":"vercel-recover","published":1,"comments":1,"layout":"post","photos":[],"_id":"cm1xg6mt5000a9a9o8d6v8ace","content":"<h2 id=\"简单操作\"><a href=\"#简单操作\" class=\"headerlink\" title=\"简单操作\"></a>简单操作</h2><p>将Vercel的CNAME更换成 <code>vercel.dns.inkdust.top</code>，可快速解决无法访问的情况，等待DNS刷新后即可访问到网站。</p>\n<h2 id=\"自选IP\"><a href=\"#自选IP\" class=\"headerlink\" title=\"自选IP\"></a>自选IP</h2><p>在下面的IP列表中选择合适的Vercel IP地址（IP地址由ChenYFan提供），并自定义解析路线。<br><a href=\"https://gist.github.com/ChenYFan/fc2bd4ec1795766f2613b52ba123c0f8#file-ip-txt-L3\">https://gist.github.com/ChenYFan/fc2bd4ec1795766f2613b52ba123c0f8#file-ip-txt-L3</a><br>如果不能打开，请看下方代码块：</p>\n<figure class=\"highlight accesslog\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs accesslog\"><span class=\"hljs-number\">34.95.57.145</span> <span class=\"hljs-string\">[加拿大 魁北克省蒙特利尔 Google 云计算数据中心]</span><br><span class=\"hljs-number\">13.49.54.242</span> <span class=\"hljs-string\">[瑞典 斯德哥尔摩 Amazon 数据中心]</span><br><span class=\"hljs-number\">18.178.194.147</span> <span class=\"hljs-string\">[日本 东京都东京 Amazon 数据中心]</span><br><span class=\"hljs-number\">52.79.72.148</span> <span class=\"hljs-string\">[韩国 首尔 Amazon 数据中心]</span><br><span class=\"hljs-number\">35.180.16.12</span> <span class=\"hljs-string\">[法国 巴黎 Amazon 数据中心]</span><br><span class=\"hljs-number\">18.206.69.11</span> <span class=\"hljs-string\">[美国 弗吉尼亚州阿什本 Amazon 数据中心]</span><br><span class=\"hljs-number\">52.76.85.65</span> <span class=\"hljs-string\">[新加坡 Amazon 数据中心]</span><br><span class=\"hljs-number\">18.130.52.74</span> <span class=\"hljs-string\">[英国 伦敦 Amazon 数据中心]</span><br><span class=\"hljs-number\">35.202.100.12</span> <span class=\"hljs-string\">[美国 Merit 网络公司]</span><br><span class=\"hljs-number\">35.195.188.93</span> <span class=\"hljs-string\">[比利时 瓦隆大区圣吉斯兰 Google 云计算数据中心]</span><br><span class=\"hljs-number\">3.22.103.24</span> <span class=\"hljs-string\">[美国 Amazon EC2 服务器]</span><br><span class=\"hljs-number\">34.253.160.225</span> <span class=\"hljs-string\">[爱尔兰 都柏林 Amazon 数据中心]</span><br><span class=\"hljs-number\">18.229.231.184</span> <span class=\"hljs-string\">[巴西]</span><br><span class=\"hljs-number\">15.206.54.182</span> <span class=\"hljs-string\">[美国 惠普 HP]</span><br><span class=\"hljs-number\">35.235.101.253</span> <span class=\"hljs-string\">[美国 加利福尼亚州洛杉矶 Google 云计算数据中心]</span><br><span class=\"hljs-number\">35.196.196.42</span> <span class=\"hljs-string\">[美国 Merit 网络公司]</span><br><span class=\"hljs-number\">35.228.53.122</span> <span class=\"hljs-string\">[美国 俄勒冈州达尔斯 Google 云计算数据中心]</span><br><span class=\"hljs-number\">34.65.228.161</span> <span class=\"hljs-string\">[美国 得克萨斯州]</span><br><span class=\"hljs-number\">52.38.79.87</span> <span class=\"hljs-string\">[美国 俄勒冈州波特兰 Amazon 数据中心]</span><br><span class=\"hljs-number\">13.238.105.1</span> <span class=\"hljs-string\">[澳大利亚 新南威尔士州悉尼 Amazon 数据中心]</span><br><span class=\"hljs-number\">104.199.217.228</span> <span class=\"hljs-string\">[台湾省彰化县 Google 云计算数据中心]</span><br><span class=\"hljs-number\">52.9.164.177</span> <span class=\"hljs-string\">[美国 加利福尼亚州旧金山 Amazon 数据中心]</span><br><span class=\"hljs-number\">18.162.37.140</span> <span class=\"hljs-string\">[香港 Amazon 数据中心]</span><br></code></pre></td></tr></table></figure>\n\n<p>可自行选择合适的IP解析，或在IP失效时更换其他IP。</p>\n<h2 id=\"更换构建程序\"><a href=\"#更换构建程序\" class=\"headerlink\" title=\"更换构建程序\"></a>更换构建程序</h2><p>例如：Azure Static App、Aws Amplify、Netlify、CloudFlare Page&#x2F;S3、4everland等，可在网上自行查询。</p>\n","excerpt":"","more":"<h2 id=\"简单操作\"><a href=\"#简单操作\" class=\"headerlink\" title=\"简单操作\"></a>简单操作</h2><p>将Vercel的CNAME更换成 <code>vercel.dns.inkdust.top</code>，可快速解决无法访问的情况，等待DNS刷新后即可访问到网站。</p>\n<h2 id=\"自选IP\"><a href=\"#自选IP\" class=\"headerlink\" title=\"自选IP\"></a>自选IP</h2><p>在下面的IP列表中选择合适的Vercel IP地址（IP地址由ChenYFan提供），并自定义解析路线。<br><a href=\"https://gist.github.com/ChenYFan/fc2bd4ec1795766f2613b52ba123c0f8#file-ip-txt-L3\">https://gist.github.com/ChenYFan/fc2bd4ec1795766f2613b52ba123c0f8#file-ip-txt-L3</a><br>如果不能打开，请看下方代码块：</p>\n<figure class=\"highlight accesslog\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs accesslog\"><span class=\"hljs-number\">34.95.57.145</span> <span class=\"hljs-string\">[加拿大 魁北克省蒙特利尔 Google 云计算数据中心]</span><br><span class=\"hljs-number\">13.49.54.242</span> <span class=\"hljs-string\">[瑞典 斯德哥尔摩 Amazon 数据中心]</span><br><span class=\"hljs-number\">18.178.194.147</span> <span class=\"hljs-string\">[日本 东京都东京 Amazon 数据中心]</span><br><span class=\"hljs-number\">52.79.72.148</span> <span class=\"hljs-string\">[韩国 首尔 Amazon 数据中心]</span><br><span class=\"hljs-number\">35.180.16.12</span> <span class=\"hljs-string\">[法国 巴黎 Amazon 数据中心]</span><br><span class=\"hljs-number\">18.206.69.11</span> <span class=\"hljs-string\">[美国 弗吉尼亚州阿什本 Amazon 数据中心]</span><br><span class=\"hljs-number\">52.76.85.65</span> <span class=\"hljs-string\">[新加坡 Amazon 数据中心]</span><br><span class=\"hljs-number\">18.130.52.74</span> <span class=\"hljs-string\">[英国 伦敦 Amazon 数据中心]</span><br><span class=\"hljs-number\">35.202.100.12</span> <span class=\"hljs-string\">[美国 Merit 网络公司]</span><br><span class=\"hljs-number\">35.195.188.93</span> <span class=\"hljs-string\">[比利时 瓦隆大区圣吉斯兰 Google 云计算数据中心]</span><br><span class=\"hljs-number\">3.22.103.24</span> <span class=\"hljs-string\">[美国 Amazon EC2 服务器]</span><br><span class=\"hljs-number\">34.253.160.225</span> <span class=\"hljs-string\">[爱尔兰 都柏林 Amazon 数据中心]</span><br><span class=\"hljs-number\">18.229.231.184</span> <span class=\"hljs-string\">[巴西]</span><br><span class=\"hljs-number\">15.206.54.182</span> <span class=\"hljs-string\">[美国 惠普 HP]</span><br><span class=\"hljs-number\">35.235.101.253</span> <span class=\"hljs-string\">[美国 加利福尼亚州洛杉矶 Google 云计算数据中心]</span><br><span class=\"hljs-number\">35.196.196.42</span> <span class=\"hljs-string\">[美国 Merit 网络公司]</span><br><span class=\"hljs-number\">35.228.53.122</span> <span class=\"hljs-string\">[美国 俄勒冈州达尔斯 Google 云计算数据中心]</span><br><span class=\"hljs-number\">34.65.228.161</span> <span class=\"hljs-string\">[美国 得克萨斯州]</span><br><span class=\"hljs-number\">52.38.79.87</span> <span class=\"hljs-string\">[美国 俄勒冈州波特兰 Amazon 数据中心]</span><br><span class=\"hljs-number\">13.238.105.1</span> <span class=\"hljs-string\">[澳大利亚 新南威尔士州悉尼 Amazon 数据中心]</span><br><span class=\"hljs-number\">104.199.217.228</span> <span class=\"hljs-string\">[台湾省彰化县 Google 云计算数据中心]</span><br><span class=\"hljs-number\">52.9.164.177</span> <span class=\"hljs-string\">[美国 加利福尼亚州旧金山 Amazon 数据中心]</span><br><span class=\"hljs-number\">18.162.37.140</span> <span class=\"hljs-string\">[香港 Amazon 数据中心]</span><br></code></pre></td></tr></table></figure>\n\n<p>可自行选择合适的IP解析，或在IP失效时更换其他IP。</p>\n<h2 id=\"更换构建程序\"><a href=\"#更换构建程序\" class=\"headerlink\" title=\"更换构建程序\"></a>更换构建程序</h2><p>例如：Azure Static App、Aws Amplify、Netlify、CloudFlare Page&#x2F;S3、4everland等，可在网上自行查询。</p>\n"},{"abbrlink":"","index_img":"https://cdnn.boochi.cn/gh/inkdust-dev/ink-oss@main/blog-image/wordpress-deploy.png","date":"2023-07-19T12:07:30.000Z","title":"以多种方式部署WordPress博客","updated":"2024-08-07T14:32:10.443Z","_content":"今天来总结一下几种WordPress博客的部署方式。不说废话，直接开始!\n\n## 部署到服务器/VPS\n\n这里有几种常见的部署方式。\n\n### 使用Oneinstack部署\n\n首先确保服务器没有安装任何PHP和数据库环境。\n\n然后使用一键安装命令安装 `Oneinstack`。\n\n```shell\nsudo wget -c http://mirrors.linuxeye.com/oneinstack-full.tar.gz && tar xzf oneinstack-full.tar.gz && ./oneinstack/install.sh --nginx_option 1 --php_option 9 --phpcache_option 1 --phpmyadmin  --db_option 2 --dbinstallmethod 1 --dbrootpwd jtrof057 --node  --pureftpd  --redis  --memcached  --iptables  --reboot\n```\n\n安装可能需要 `1~3`个小时，请耐心等待。\n\n安装完成后目录里会多出一个 `oneinstack文件夹`\n\n进入文件夹并开始创建虚拟主机。\n\n```shell\ncd oneinstack && sudo ./vhost.sh\n```\n\n按照以下参考以此配置HTTPS,域名,网站根目录,防盗链,伪静态。\n\n这里为了测试方便并不开启HTTPS和防盗链，但是在正式环境中应该开启。\n\n![IMG_20220403_141613.jpg](https://alpha-q3.sourcegcdn.com/2022/04/03/UMqEq5mS.jpg/webp)\n\n然后进入你设置的网站根目录下载WordPress文件。\n\n在网站根目录下执行:\n\n```shell\nsudo wget https://cn.wordpress.org/latest-zh_CN.zip && sudo apt install unzip && sudo unzip latest-zh_CN.zip && sudo mv -r ./wordpress/* ./\n```\n\n接着添加数据库。\n\n首先查看数据库密码\n\n```shell\ncd ~/oneinstack \nsudo grep dbrootpwd options.conf\n```\n\n`dbrootpwd`项后的值即为你的MySQL数据库root用户的密码\n\n然后使用 `公网IP:80`进入 `oneinstack管理页面`,然后进入 `PhpMyAdmin`,使用用户名 `root`,刚刚查看的密码登录。\n\n在终端控制台输入:\n\n```sql\ncreate user wordpress@'%' identified by 'yourpassword'\n```\n\n创建一个名为 `wordpress`,密码为 `yourpassword`的账户,账户账号和密码可以自行输入。\n\n随后创建一个名为 `wordpress`的数据库,并授权,数据库名称可自定。\n\n```sql\ncreate database wordpress\n```\n\n```继续sql\ngrant all privileges on wordpress.* to wordpress@'%' with grant option\n```\n\n然后进入网站根目录进行授权:\n\n```shell\ncd /data/wwwroot\nsudo chown -R www test.example.com\nsudo chmod -R 777 test.example.com\n```\n\n最后重启 `NGINX`:\n\n```shell\nsudo systemctl reload nginx\n```\n\n打开网站就可以安装你的WordPress博客了，按照数据库账号,密码完成安装。\n\n### 使用Docker部署\n\n#### 环境安装\n\n##### Docker安装\n\n为了方便，推荐使用官方脚本安装。此脚本适用于常用 Linux 发行版。\n\n```shell\ncurl -fsSL https://get.docker.com | sudo sh\n```\n\n默认情况下，Docker 只能通过 root 用户运行，普通用户通常要加 `sudo`。如果觉得麻烦，可以启用 Docker 的 rootless 模式。使用普通用户执行下面这条命令即可安装：\n\n```shell\ndockerd-rootless-setuptool.sh install\n```\n\n##### 安装 Docker Compose\n\n下载二进制文件\n\n```shell\nsudo curl -L \"https://github.com/docker/compose/releases/latest/download/docker-compose-$(uname -s)-$(uname -m)\" -o /usr/local/bin/docker-compose\n```\n\n赋予执行权限\n\n```shell\nsudo chmod +x /usr/local/bin/docker-compose\n```\n\n#### 设置容器\n\n##### 创建项目\n\n1.新建项目目录，这里以 `~/my_wordpress`为例。\n\n```shell\nmkdir ~/my_wordpress\n```\n\n2.进入项目目录\n\n```shell\ncd ~/my_wordpress\n```\n\n3.编辑配置文件\n\n```shell\nnano docker-compose.yml\n```\n\n文件内容:\n\n```yml\nversion: \"3.9\"\n \nservices:\n  db:\n    image: mysql:5.7\n    volumes:\n      - db_data:/var/lib/mysql\n    restart: always\n    environment:\n      MYSQL_ROOT_PASSWORD: somewordpress\n      MYSQL_DATABASE: wordpress\n      MYSQL_USER: wordpress\n      MYSQL_PASSWORD: wordpress\n \n  wordpress:\n    depends_on:\n      - db\n    image: wordpress:latest\n    volumes:\n      - wordpress_data:/var/www/html\n    ports:\n      - \"80:80\"\n      - \"443:443\"\n    restart: always\n    environment:\n      WORDPRESS_DB_HOST: db\n      WORDPRESS_DB_USER: wordpress\n      WORDPRESS_DB_PASSWORD: wordpress\n      WORDPRESS_DB_NAME: wordpress\nvolumes:\n  db_data: {}\n  wordpress_data: {}\n```\n\n注意:\n\n这里用到了 `mysql:5.7` 和 `wordpress:latest` 两个 Docker 镜像，WordPress 镜像依赖于 `MySQL`镜像。\n\n`restart: always` 参数表明容器服务宕机后会自动重启。\n\n`MYSQL_ROOT_PASSWORD `为数据库的 root 密码，`MYSQL_PASSWORD` 为数据库的普通用户密码，请自行修改，对应的 `WORDPRESS_DB_PASSWORD` 也要同时修改。`MYSQL_USER` 为数据库普通用户的用户名，如果有需要也可以修改，对应的 `WORDPRESS_DB_USER` 也要同时修改。\n\n`80:80` 的意思是把宿主机的 80 端口映射到容器内部的 80 端口。如需通过其他端口访问，只需修改前面的 80。比如，我要通过 8080 端口访问 WordPress，填写 `8080:80`即可。\n\n执行 `Ctrl + O `保存文件，回车，再执行 `Ctrl + X` 退出。\n\n##### 启动容器\n\n在 `~/my_wordpress`目录中执行以下命令启动 WordPress：\n\n```shell\nsudo docker-compose up -d\n```\n\n构建完成后就可以通过 `http://ip:port `来访问 WordPress（请将ip替换为 VPS 的 IP，`port` 替换为你使用的端口，如果是 80 端口则可以省略）。如果提示 `Error establishing a database connection`，说明配置尚未完成，等待 1～2 分钟，刷新网页即可进入安装界面。\n\n##### 配置SSL\n\n进入容器\n\n```shell\nsudo docker-compose exec wordpress bash\n```\n\n`注意：本章中后续命令都要在容器中执行！`\n\n安装 cron 及 nano\n\n```shell\napt update && apt install -y cron nano\n```\n\n安装 acme.sh 用于签发 SSL 证书（请把 my@example.com 改为你的邮件地址）\n\n```shell\ncurl  https://get.acme.sh | sh -s email=my@example.com\n```\n\n将域名解析至 VPS 的 IP，然后执行以下命令签发证书（请把 example.com 改为你的域名）\n\n```shell\nbash ~/.acme.sh/acme.sh --issue -d example.com --apache  --tlsport 56789\n```\n\n启用模块\n\n```shell\na2enmod rewrite\na2enmod ssl\n```\n\n创建证书目录\n\n```\nmkdir -p /etc/apache2/ssl\n```\n\n复制证书（请把 `example.com` 改为你的域名1\n\n创建站点（将以下全部内容粘贴进终端 )\n\n启用站点\n\n```\na2ensite wordpress\nservice apache2 restart\n```\n\n编辑 `/var/www/html/.htaccess`，在顶部加入以下内容：\n\n```\n# BEGIN SSL Redirect\n<IfModule mod_rewrite.c>\nRewriteEngine on\nRewriteCond %{HTTPS} !=on [NC]\nRewriteRule ^(.*)$ https://%{HTTP_HOST}/$1 [R=301,L]\n</IfModule>\n# END SSL Redirect\n```\n\n最后一步，访问域名，进入 WordPress 后台，打开 「设置」-「常规选项」，并把 **WordPress地址** 和 **站点地址** 中的 `http` 改为 `https`，并保存。\n\n至此，SSL 配置已完成。\n\n该部署方法转载自\n\n[Tony's Blog:通过 Docker Compose 部署 WordPress](https://blog.iamsjy.com/2022/03/29/deploy-wordpress-with-docker-compose/)\n\n`遵循CC BY-NC-SA 4.0开源协议进行转载，已获原作者授权`\n","source":"_posts/wordpress-delopy.md","raw":"---\nabbrlink: ''\ncategories:\n- - 技术教程\nindex_img: https://cdnn.boochi.cn/gh/inkdust-dev/ink-oss@main/blog-image/wordpress-deploy.png\ndate: '2023-07-19T20:07:30+08:00'\ntags:\n- Docker\n- Oneinstack\n- WordPress\ntitle: 以多种方式部署WordPress博客\nupdated: '2024-08-07T22:32:10.443+08:00'\n---\n今天来总结一下几种WordPress博客的部署方式。不说废话，直接开始!\n\n## 部署到服务器/VPS\n\n这里有几种常见的部署方式。\n\n### 使用Oneinstack部署\n\n首先确保服务器没有安装任何PHP和数据库环境。\n\n然后使用一键安装命令安装 `Oneinstack`。\n\n```shell\nsudo wget -c http://mirrors.linuxeye.com/oneinstack-full.tar.gz && tar xzf oneinstack-full.tar.gz && ./oneinstack/install.sh --nginx_option 1 --php_option 9 --phpcache_option 1 --phpmyadmin  --db_option 2 --dbinstallmethod 1 --dbrootpwd jtrof057 --node  --pureftpd  --redis  --memcached  --iptables  --reboot\n```\n\n安装可能需要 `1~3`个小时，请耐心等待。\n\n安装完成后目录里会多出一个 `oneinstack文件夹`\n\n进入文件夹并开始创建虚拟主机。\n\n```shell\ncd oneinstack && sudo ./vhost.sh\n```\n\n按照以下参考以此配置HTTPS,域名,网站根目录,防盗链,伪静态。\n\n这里为了测试方便并不开启HTTPS和防盗链，但是在正式环境中应该开启。\n\n![IMG_20220403_141613.jpg](https://alpha-q3.sourcegcdn.com/2022/04/03/UMqEq5mS.jpg/webp)\n\n然后进入你设置的网站根目录下载WordPress文件。\n\n在网站根目录下执行:\n\n```shell\nsudo wget https://cn.wordpress.org/latest-zh_CN.zip && sudo apt install unzip && sudo unzip latest-zh_CN.zip && sudo mv -r ./wordpress/* ./\n```\n\n接着添加数据库。\n\n首先查看数据库密码\n\n```shell\ncd ~/oneinstack \nsudo grep dbrootpwd options.conf\n```\n\n`dbrootpwd`项后的值即为你的MySQL数据库root用户的密码\n\n然后使用 `公网IP:80`进入 `oneinstack管理页面`,然后进入 `PhpMyAdmin`,使用用户名 `root`,刚刚查看的密码登录。\n\n在终端控制台输入:\n\n```sql\ncreate user wordpress@'%' identified by 'yourpassword'\n```\n\n创建一个名为 `wordpress`,密码为 `yourpassword`的账户,账户账号和密码可以自行输入。\n\n随后创建一个名为 `wordpress`的数据库,并授权,数据库名称可自定。\n\n```sql\ncreate database wordpress\n```\n\n```继续sql\ngrant all privileges on wordpress.* to wordpress@'%' with grant option\n```\n\n然后进入网站根目录进行授权:\n\n```shell\ncd /data/wwwroot\nsudo chown -R www test.example.com\nsudo chmod -R 777 test.example.com\n```\n\n最后重启 `NGINX`:\n\n```shell\nsudo systemctl reload nginx\n```\n\n打开网站就可以安装你的WordPress博客了，按照数据库账号,密码完成安装。\n\n### 使用Docker部署\n\n#### 环境安装\n\n##### Docker安装\n\n为了方便，推荐使用官方脚本安装。此脚本适用于常用 Linux 发行版。\n\n```shell\ncurl -fsSL https://get.docker.com | sudo sh\n```\n\n默认情况下，Docker 只能通过 root 用户运行，普通用户通常要加 `sudo`。如果觉得麻烦，可以启用 Docker 的 rootless 模式。使用普通用户执行下面这条命令即可安装：\n\n```shell\ndockerd-rootless-setuptool.sh install\n```\n\n##### 安装 Docker Compose\n\n下载二进制文件\n\n```shell\nsudo curl -L \"https://github.com/docker/compose/releases/latest/download/docker-compose-$(uname -s)-$(uname -m)\" -o /usr/local/bin/docker-compose\n```\n\n赋予执行权限\n\n```shell\nsudo chmod +x /usr/local/bin/docker-compose\n```\n\n#### 设置容器\n\n##### 创建项目\n\n1.新建项目目录，这里以 `~/my_wordpress`为例。\n\n```shell\nmkdir ~/my_wordpress\n```\n\n2.进入项目目录\n\n```shell\ncd ~/my_wordpress\n```\n\n3.编辑配置文件\n\n```shell\nnano docker-compose.yml\n```\n\n文件内容:\n\n```yml\nversion: \"3.9\"\n \nservices:\n  db:\n    image: mysql:5.7\n    volumes:\n      - db_data:/var/lib/mysql\n    restart: always\n    environment:\n      MYSQL_ROOT_PASSWORD: somewordpress\n      MYSQL_DATABASE: wordpress\n      MYSQL_USER: wordpress\n      MYSQL_PASSWORD: wordpress\n \n  wordpress:\n    depends_on:\n      - db\n    image: wordpress:latest\n    volumes:\n      - wordpress_data:/var/www/html\n    ports:\n      - \"80:80\"\n      - \"443:443\"\n    restart: always\n    environment:\n      WORDPRESS_DB_HOST: db\n      WORDPRESS_DB_USER: wordpress\n      WORDPRESS_DB_PASSWORD: wordpress\n      WORDPRESS_DB_NAME: wordpress\nvolumes:\n  db_data: {}\n  wordpress_data: {}\n```\n\n注意:\n\n这里用到了 `mysql:5.7` 和 `wordpress:latest` 两个 Docker 镜像，WordPress 镜像依赖于 `MySQL`镜像。\n\n`restart: always` 参数表明容器服务宕机后会自动重启。\n\n`MYSQL_ROOT_PASSWORD `为数据库的 root 密码，`MYSQL_PASSWORD` 为数据库的普通用户密码，请自行修改，对应的 `WORDPRESS_DB_PASSWORD` 也要同时修改。`MYSQL_USER` 为数据库普通用户的用户名，如果有需要也可以修改，对应的 `WORDPRESS_DB_USER` 也要同时修改。\n\n`80:80` 的意思是把宿主机的 80 端口映射到容器内部的 80 端口。如需通过其他端口访问，只需修改前面的 80。比如，我要通过 8080 端口访问 WordPress，填写 `8080:80`即可。\n\n执行 `Ctrl + O `保存文件，回车，再执行 `Ctrl + X` 退出。\n\n##### 启动容器\n\n在 `~/my_wordpress`目录中执行以下命令启动 WordPress：\n\n```shell\nsudo docker-compose up -d\n```\n\n构建完成后就可以通过 `http://ip:port `来访问 WordPress（请将ip替换为 VPS 的 IP，`port` 替换为你使用的端口，如果是 80 端口则可以省略）。如果提示 `Error establishing a database connection`，说明配置尚未完成，等待 1～2 分钟，刷新网页即可进入安装界面。\n\n##### 配置SSL\n\n进入容器\n\n```shell\nsudo docker-compose exec wordpress bash\n```\n\n`注意：本章中后续命令都要在容器中执行！`\n\n安装 cron 及 nano\n\n```shell\napt update && apt install -y cron nano\n```\n\n安装 acme.sh 用于签发 SSL 证书（请把 my@example.com 改为你的邮件地址）\n\n```shell\ncurl  https://get.acme.sh | sh -s email=my@example.com\n```\n\n将域名解析至 VPS 的 IP，然后执行以下命令签发证书（请把 example.com 改为你的域名）\n\n```shell\nbash ~/.acme.sh/acme.sh --issue -d example.com --apache  --tlsport 56789\n```\n\n启用模块\n\n```shell\na2enmod rewrite\na2enmod ssl\n```\n\n创建证书目录\n\n```\nmkdir -p /etc/apache2/ssl\n```\n\n复制证书（请把 `example.com` 改为你的域名1\n\n创建站点（将以下全部内容粘贴进终端 )\n\n启用站点\n\n```\na2ensite wordpress\nservice apache2 restart\n```\n\n编辑 `/var/www/html/.htaccess`，在顶部加入以下内容：\n\n```\n# BEGIN SSL Redirect\n<IfModule mod_rewrite.c>\nRewriteEngine on\nRewriteCond %{HTTPS} !=on [NC]\nRewriteRule ^(.*)$ https://%{HTTP_HOST}/$1 [R=301,L]\n</IfModule>\n# END SSL Redirect\n```\n\n最后一步，访问域名，进入 WordPress 后台，打开 「设置」-「常规选项」，并把 **WordPress地址** 和 **站点地址** 中的 `http` 改为 `https`，并保存。\n\n至此，SSL 配置已完成。\n\n该部署方法转载自\n\n[Tony's Blog:通过 Docker Compose 部署 WordPress](https://blog.iamsjy.com/2022/03/29/deploy-wordpress-with-docker-compose/)\n\n`遵循CC BY-NC-SA 4.0开源协议进行转载，已获原作者授权`\n","slug":"wordpress-delopy","published":1,"comments":1,"layout":"post","photos":[],"_id":"cm1xg6mt7000d9a9ogtet1qur","content":"<p>今天来总结一下几种WordPress博客的部署方式。不说废话，直接开始!</p>\n<h2 id=\"部署到服务器-VPS\"><a href=\"#部署到服务器-VPS\" class=\"headerlink\" title=\"部署到服务器&#x2F;VPS\"></a>部署到服务器&#x2F;VPS</h2><p>这里有几种常见的部署方式。</p>\n<h3 id=\"使用Oneinstack部署\"><a href=\"#使用Oneinstack部署\" class=\"headerlink\" title=\"使用Oneinstack部署\"></a>使用Oneinstack部署</h3><p>首先确保服务器没有安装任何PHP和数据库环境。</p>\n<p>然后使用一键安装命令安装 <code>Oneinstack</code>。</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs shell\">sudo wget -c http://mirrors.linuxeye.com/oneinstack-full.tar.gz &amp;&amp; tar xzf oneinstack-full.tar.gz &amp;&amp; ./oneinstack/install.sh --nginx_option 1 --php_option 9 --phpcache_option 1 --phpmyadmin  --db_option 2 --dbinstallmethod 1 --dbrootpwd jtrof057 --node  --pureftpd  --redis  --memcached  --iptables  --reboot<br></code></pre></td></tr></table></figure>\n\n<p>安装可能需要 <code>1~3</code>个小时，请耐心等待。</p>\n<p>安装完成后目录里会多出一个 <code>oneinstack文件夹</code></p>\n<p>进入文件夹并开始创建虚拟主机。</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs shell\">cd oneinstack &amp;&amp; sudo ./vhost.sh<br></code></pre></td></tr></table></figure>\n\n<p>按照以下参考以此配置HTTPS,域名,网站根目录,防盗链,伪静态。</p>\n<p>这里为了测试方便并不开启HTTPS和防盗链，但是在正式环境中应该开启。</p>\n<p><img src=\"https://alpha-q3.sourcegcdn.com/2022/04/03/UMqEq5mS.jpg/webp\" alt=\"IMG_20220403_141613.jpg\"></p>\n<p>然后进入你设置的网站根目录下载WordPress文件。</p>\n<p>在网站根目录下执行:</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs shell\">sudo wget https://cn.wordpress.org/latest-zh_CN.zip &amp;&amp; sudo apt install unzip &amp;&amp; sudo unzip latest-zh_CN.zip &amp;&amp; sudo mv -r ./wordpress/* ./<br></code></pre></td></tr></table></figure>\n\n<p>接着添加数据库。</p>\n<p>首先查看数据库密码</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs shell\">cd ~/oneinstack <br>sudo grep dbrootpwd options.conf<br></code></pre></td></tr></table></figure>\n\n<p><code>dbrootpwd</code>项后的值即为你的MySQL数据库root用户的密码</p>\n<p>然后使用 <code>公网IP:80</code>进入 <code>oneinstack管理页面</code>,然后进入 <code>PhpMyAdmin</code>,使用用户名 <code>root</code>,刚刚查看的密码登录。</p>\n<p>在终端控制台输入:</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs sql\"><span class=\"hljs-keyword\">create</span> <span class=\"hljs-keyword\">user</span> wordpress@<span class=\"hljs-string\">&#x27;%&#x27;</span> identified <span class=\"hljs-keyword\">by</span> <span class=\"hljs-string\">&#x27;yourpassword&#x27;</span><br></code></pre></td></tr></table></figure>\n\n<p>创建一个名为 <code>wordpress</code>,密码为 <code>yourpassword</code>的账户,账户账号和密码可以自行输入。</p>\n<p>随后创建一个名为 <code>wordpress</code>的数据库,并授权,数据库名称可自定。</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs sql\"><span class=\"hljs-keyword\">create</span> database wordpress<br></code></pre></td></tr></table></figure>\n\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs 继续sql\">grant all privileges on wordpress.* to wordpress@&#x27;%&#x27; with grant option<br></code></pre></td></tr></table></figure>\n\n<p>然后进入网站根目录进行授权:</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs shell\">cd /data/wwwroot<br>sudo chown -R www test.example.com<br>sudo chmod -R 777 test.example.com<br></code></pre></td></tr></table></figure>\n\n<p>最后重启 <code>NGINX</code>:</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs shell\">sudo systemctl reload nginx<br></code></pre></td></tr></table></figure>\n\n<p>打开网站就可以安装你的WordPress博客了，按照数据库账号,密码完成安装。</p>\n<h3 id=\"使用Docker部署\"><a href=\"#使用Docker部署\" class=\"headerlink\" title=\"使用Docker部署\"></a>使用Docker部署</h3><h4 id=\"环境安装\"><a href=\"#环境安装\" class=\"headerlink\" title=\"环境安装\"></a>环境安装</h4><h5 id=\"Docker安装\"><a href=\"#Docker安装\" class=\"headerlink\" title=\"Docker安装\"></a>Docker安装</h5><p>为了方便，推荐使用官方脚本安装。此脚本适用于常用 Linux 发行版。</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs shell\">curl -fsSL https://get.docker.com | sudo sh<br></code></pre></td></tr></table></figure>\n\n<p>默认情况下，Docker 只能通过 root 用户运行，普通用户通常要加 <code>sudo</code>。如果觉得麻烦，可以启用 Docker 的 rootless 模式。使用普通用户执行下面这条命令即可安装：</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs shell\">dockerd-rootless-setuptool.sh install<br></code></pre></td></tr></table></figure>\n\n<h5 id=\"安装-Docker-Compose\"><a href=\"#安装-Docker-Compose\" class=\"headerlink\" title=\"安装 Docker Compose\"></a>安装 Docker Compose</h5><p>下载二进制文件</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs shell\">sudo curl -L &quot;https://github.com/docker/compose/releases/latest/download/docker-compose-$(uname -s)-$(uname -m)&quot; -o /usr/local/bin/docker-compose<br></code></pre></td></tr></table></figure>\n\n<p>赋予执行权限</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs shell\">sudo chmod +x /usr/local/bin/docker-compose<br></code></pre></td></tr></table></figure>\n\n<h4 id=\"设置容器\"><a href=\"#设置容器\" class=\"headerlink\" title=\"设置容器\"></a>设置容器</h4><h5 id=\"创建项目\"><a href=\"#创建项目\" class=\"headerlink\" title=\"创建项目\"></a>创建项目</h5><p>1.新建项目目录，这里以 <code>~/my_wordpress</code>为例。</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs shell\">mkdir ~/my_wordpress<br></code></pre></td></tr></table></figure>\n\n<p>2.进入项目目录</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs shell\">cd ~/my_wordpress<br></code></pre></td></tr></table></figure>\n\n<p>3.编辑配置文件</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs shell\">nano docker-compose.yml<br></code></pre></td></tr></table></figure>\n\n<p>文件内容:</p>\n<figure class=\"highlight yml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs yml\"><span class=\"hljs-attr\">version:</span> <span class=\"hljs-string\">&quot;3.9&quot;</span><br> <br><span class=\"hljs-attr\">services:</span><br>  <span class=\"hljs-attr\">db:</span><br>    <span class=\"hljs-attr\">image:</span> <span class=\"hljs-string\">mysql:5.7</span><br>    <span class=\"hljs-attr\">volumes:</span><br>      <span class=\"hljs-bullet\">-</span> <span class=\"hljs-string\">db_data:/var/lib/mysql</span><br>    <span class=\"hljs-attr\">restart:</span> <span class=\"hljs-string\">always</span><br>    <span class=\"hljs-attr\">environment:</span><br>      <span class=\"hljs-attr\">MYSQL_ROOT_PASSWORD:</span> <span class=\"hljs-string\">somewordpress</span><br>      <span class=\"hljs-attr\">MYSQL_DATABASE:</span> <span class=\"hljs-string\">wordpress</span><br>      <span class=\"hljs-attr\">MYSQL_USER:</span> <span class=\"hljs-string\">wordpress</span><br>      <span class=\"hljs-attr\">MYSQL_PASSWORD:</span> <span class=\"hljs-string\">wordpress</span><br> <br>  <span class=\"hljs-attr\">wordpress:</span><br>    <span class=\"hljs-attr\">depends_on:</span><br>      <span class=\"hljs-bullet\">-</span> <span class=\"hljs-string\">db</span><br>    <span class=\"hljs-attr\">image:</span> <span class=\"hljs-string\">wordpress:latest</span><br>    <span class=\"hljs-attr\">volumes:</span><br>      <span class=\"hljs-bullet\">-</span> <span class=\"hljs-string\">wordpress_data:/var/www/html</span><br>    <span class=\"hljs-attr\">ports:</span><br>      <span class=\"hljs-bullet\">-</span> <span class=\"hljs-string\">&quot;80:80&quot;</span><br>      <span class=\"hljs-bullet\">-</span> <span class=\"hljs-string\">&quot;443:443&quot;</span><br>    <span class=\"hljs-attr\">restart:</span> <span class=\"hljs-string\">always</span><br>    <span class=\"hljs-attr\">environment:</span><br>      <span class=\"hljs-attr\">WORDPRESS_DB_HOST:</span> <span class=\"hljs-string\">db</span><br>      <span class=\"hljs-attr\">WORDPRESS_DB_USER:</span> <span class=\"hljs-string\">wordpress</span><br>      <span class=\"hljs-attr\">WORDPRESS_DB_PASSWORD:</span> <span class=\"hljs-string\">wordpress</span><br>      <span class=\"hljs-attr\">WORDPRESS_DB_NAME:</span> <span class=\"hljs-string\">wordpress</span><br><span class=\"hljs-attr\">volumes:</span><br>  <span class=\"hljs-attr\">db_data:</span> &#123;&#125;<br>  <span class=\"hljs-attr\">wordpress_data:</span> &#123;&#125;<br></code></pre></td></tr></table></figure>\n\n<p>注意:</p>\n<p>这里用到了 <code>mysql:5.7</code> 和 <code>wordpress:latest</code> 两个 Docker 镜像，WordPress 镜像依赖于 <code>MySQL</code>镜像。</p>\n<p><code>restart: always</code> 参数表明容器服务宕机后会自动重启。</p>\n<p><code>MYSQL_ROOT_PASSWORD </code>为数据库的 root 密码，<code>MYSQL_PASSWORD</code> 为数据库的普通用户密码，请自行修改，对应的 <code>WORDPRESS_DB_PASSWORD</code> 也要同时修改。<code>MYSQL_USER</code> 为数据库普通用户的用户名，如果有需要也可以修改，对应的 <code>WORDPRESS_DB_USER</code> 也要同时修改。</p>\n<p><code>80:80</code> 的意思是把宿主机的 80 端口映射到容器内部的 80 端口。如需通过其他端口访问，只需修改前面的 80。比如，我要通过 8080 端口访问 WordPress，填写 <code>8080:80</code>即可。</p>\n<p>执行 <code>Ctrl + O </code>保存文件，回车，再执行 <code>Ctrl + X</code> 退出。</p>\n<h5 id=\"启动容器\"><a href=\"#启动容器\" class=\"headerlink\" title=\"启动容器\"></a>启动容器</h5><p>在 <code>~/my_wordpress</code>目录中执行以下命令启动 WordPress：</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs shell\">sudo docker-compose up -d<br></code></pre></td></tr></table></figure>\n\n<p>构建完成后就可以通过 <code>http://ip:port </code>来访问 WordPress（请将ip替换为 VPS 的 IP，<code>port</code> 替换为你使用的端口，如果是 80 端口则可以省略）。如果提示 <code>Error establishing a database connection</code>，说明配置尚未完成，等待 1～2 分钟，刷新网页即可进入安装界面。</p>\n<h5 id=\"配置SSL\"><a href=\"#配置SSL\" class=\"headerlink\" title=\"配置SSL\"></a>配置SSL</h5><p>进入容器</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs shell\">sudo docker-compose exec wordpress bash<br></code></pre></td></tr></table></figure>\n\n<p><code>注意：本章中后续命令都要在容器中执行！</code></p>\n<p>安装 cron 及 nano</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs shell\">apt update &amp;&amp; apt install -y cron nano<br></code></pre></td></tr></table></figure>\n\n<p>安装 acme.sh 用于签发 SSL 证书（请把 <a href=\"mailto:&#x6d;&#x79;&#64;&#101;&#x78;&#97;&#x6d;&#112;&#108;&#x65;&#46;&#x63;&#x6f;&#x6d;\">&#x6d;&#x79;&#64;&#101;&#x78;&#97;&#x6d;&#112;&#108;&#x65;&#46;&#x63;&#x6f;&#x6d;</a> 改为你的邮件地址）</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs shell\">curl  https://get.acme.sh | sh -s email=my@example.com<br></code></pre></td></tr></table></figure>\n\n<p>将域名解析至 VPS 的 IP，然后执行以下命令签发证书（请把 example.com 改为你的域名）</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs shell\">bash ~/.acme.sh/acme.sh --issue -d example.com --apache  --tlsport 56789<br></code></pre></td></tr></table></figure>\n\n<p>启用模块</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs shell\">a2enmod rewrite<br>a2enmod ssl<br></code></pre></td></tr></table></figure>\n\n<p>创建证书目录</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs bash\"><span class=\"hljs-built_in\">mkdir</span> -p /etc/apache2/ssl<br></code></pre></td></tr></table></figure>\n\n<p>复制证书（请把 <code>example.com</code> 改为你的域名1</p>\n<p>创建站点（将以下全部内容粘贴进终端 )</p>\n<p>启用站点</p>\n<figure class=\"highlight maxima\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs maxima\">a2ensite wordpress<br>service apache2 <span class=\"hljs-built_in\">restart</span><br></code></pre></td></tr></table></figure>\n\n<p>编辑 <code>/var/www/html/.htaccess</code>，在顶部加入以下内容：</p>\n<figure class=\"highlight apache\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs apache\"><span class=\"hljs-comment\"># BEGIN SSL Redirect</span><br><span class=\"hljs-section\">&lt;IfModule mod_rewrite.c&gt;</span><br><span class=\"hljs-attribute\">RewriteEngine</span> <span class=\"hljs-literal\">on</span><br><span class=\"hljs-attribute\">RewriteCond</span> <span class=\"hljs-variable\">%&#123;HTTPS&#125;</span> !=<span class=\"hljs-literal\">on</span><span class=\"hljs-meta\"> [NC]</span><br><span class=\"hljs-attribute\">RewriteRule</span> ^(.*)$ https://<span class=\"hljs-variable\">%&#123;HTTP_HOST&#125;</span>/$<span class=\"hljs-number\">1</span><span class=\"hljs-meta\"> [R=301,L]</span><br><span class=\"hljs-section\">&lt;/IfModule&gt;</span><br><span class=\"hljs-comment\"># END SSL Redirect</span><br></code></pre></td></tr></table></figure>\n\n<p>最后一步，访问域名，进入 WordPress 后台，打开 「设置」-「常规选项」，并把 <strong>WordPress地址</strong> 和 <strong>站点地址</strong> 中的 <code>http</code> 改为 <code>https</code>，并保存。</p>\n<p>至此，SSL 配置已完成。</p>\n<p>该部署方法转载自</p>\n<p><a href=\"https://blog.iamsjy.com/2022/03/29/deploy-wordpress-with-docker-compose/\">Tony’s Blog:通过 Docker Compose 部署 WordPress</a></p>\n<p><code>遵循CC BY-NC-SA 4.0开源协议进行转载，已获原作者授权</code></p>\n","excerpt":"","more":"<p>今天来总结一下几种WordPress博客的部署方式。不说废话，直接开始!</p>\n<h2 id=\"部署到服务器-VPS\"><a href=\"#部署到服务器-VPS\" class=\"headerlink\" title=\"部署到服务器&#x2F;VPS\"></a>部署到服务器&#x2F;VPS</h2><p>这里有几种常见的部署方式。</p>\n<h3 id=\"使用Oneinstack部署\"><a href=\"#使用Oneinstack部署\" class=\"headerlink\" title=\"使用Oneinstack部署\"></a>使用Oneinstack部署</h3><p>首先确保服务器没有安装任何PHP和数据库环境。</p>\n<p>然后使用一键安装命令安装 <code>Oneinstack</code>。</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs shell\">sudo wget -c http://mirrors.linuxeye.com/oneinstack-full.tar.gz &amp;&amp; tar xzf oneinstack-full.tar.gz &amp;&amp; ./oneinstack/install.sh --nginx_option 1 --php_option 9 --phpcache_option 1 --phpmyadmin  --db_option 2 --dbinstallmethod 1 --dbrootpwd jtrof057 --node  --pureftpd  --redis  --memcached  --iptables  --reboot<br></code></pre></td></tr></table></figure>\n\n<p>安装可能需要 <code>1~3</code>个小时，请耐心等待。</p>\n<p>安装完成后目录里会多出一个 <code>oneinstack文件夹</code></p>\n<p>进入文件夹并开始创建虚拟主机。</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs shell\">cd oneinstack &amp;&amp; sudo ./vhost.sh<br></code></pre></td></tr></table></figure>\n\n<p>按照以下参考以此配置HTTPS,域名,网站根目录,防盗链,伪静态。</p>\n<p>这里为了测试方便并不开启HTTPS和防盗链，但是在正式环境中应该开启。</p>\n<p><img src=\"https://alpha-q3.sourcegcdn.com/2022/04/03/UMqEq5mS.jpg/webp\" alt=\"IMG_20220403_141613.jpg\"></p>\n<p>然后进入你设置的网站根目录下载WordPress文件。</p>\n<p>在网站根目录下执行:</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs shell\">sudo wget https://cn.wordpress.org/latest-zh_CN.zip &amp;&amp; sudo apt install unzip &amp;&amp; sudo unzip latest-zh_CN.zip &amp;&amp; sudo mv -r ./wordpress/* ./<br></code></pre></td></tr></table></figure>\n\n<p>接着添加数据库。</p>\n<p>首先查看数据库密码</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs shell\">cd ~/oneinstack <br>sudo grep dbrootpwd options.conf<br></code></pre></td></tr></table></figure>\n\n<p><code>dbrootpwd</code>项后的值即为你的MySQL数据库root用户的密码</p>\n<p>然后使用 <code>公网IP:80</code>进入 <code>oneinstack管理页面</code>,然后进入 <code>PhpMyAdmin</code>,使用用户名 <code>root</code>,刚刚查看的密码登录。</p>\n<p>在终端控制台输入:</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs sql\"><span class=\"hljs-keyword\">create</span> <span class=\"hljs-keyword\">user</span> wordpress@<span class=\"hljs-string\">&#x27;%&#x27;</span> identified <span class=\"hljs-keyword\">by</span> <span class=\"hljs-string\">&#x27;yourpassword&#x27;</span><br></code></pre></td></tr></table></figure>\n\n<p>创建一个名为 <code>wordpress</code>,密码为 <code>yourpassword</code>的账户,账户账号和密码可以自行输入。</p>\n<p>随后创建一个名为 <code>wordpress</code>的数据库,并授权,数据库名称可自定。</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs sql\"><span class=\"hljs-keyword\">create</span> database wordpress<br></code></pre></td></tr></table></figure>\n\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs 继续sql\">grant all privileges on wordpress.* to wordpress@&#x27;%&#x27; with grant option<br></code></pre></td></tr></table></figure>\n\n<p>然后进入网站根目录进行授权:</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs shell\">cd /data/wwwroot<br>sudo chown -R www test.example.com<br>sudo chmod -R 777 test.example.com<br></code></pre></td></tr></table></figure>\n\n<p>最后重启 <code>NGINX</code>:</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs shell\">sudo systemctl reload nginx<br></code></pre></td></tr></table></figure>\n\n<p>打开网站就可以安装你的WordPress博客了，按照数据库账号,密码完成安装。</p>\n<h3 id=\"使用Docker部署\"><a href=\"#使用Docker部署\" class=\"headerlink\" title=\"使用Docker部署\"></a>使用Docker部署</h3><h4 id=\"环境安装\"><a href=\"#环境安装\" class=\"headerlink\" title=\"环境安装\"></a>环境安装</h4><h5 id=\"Docker安装\"><a href=\"#Docker安装\" class=\"headerlink\" title=\"Docker安装\"></a>Docker安装</h5><p>为了方便，推荐使用官方脚本安装。此脚本适用于常用 Linux 发行版。</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs shell\">curl -fsSL https://get.docker.com | sudo sh<br></code></pre></td></tr></table></figure>\n\n<p>默认情况下，Docker 只能通过 root 用户运行，普通用户通常要加 <code>sudo</code>。如果觉得麻烦，可以启用 Docker 的 rootless 模式。使用普通用户执行下面这条命令即可安装：</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs shell\">dockerd-rootless-setuptool.sh install<br></code></pre></td></tr></table></figure>\n\n<h5 id=\"安装-Docker-Compose\"><a href=\"#安装-Docker-Compose\" class=\"headerlink\" title=\"安装 Docker Compose\"></a>安装 Docker Compose</h5><p>下载二进制文件</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs shell\">sudo curl -L &quot;https://github.com/docker/compose/releases/latest/download/docker-compose-$(uname -s)-$(uname -m)&quot; -o /usr/local/bin/docker-compose<br></code></pre></td></tr></table></figure>\n\n<p>赋予执行权限</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs shell\">sudo chmod +x /usr/local/bin/docker-compose<br></code></pre></td></tr></table></figure>\n\n<h4 id=\"设置容器\"><a href=\"#设置容器\" class=\"headerlink\" title=\"设置容器\"></a>设置容器</h4><h5 id=\"创建项目\"><a href=\"#创建项目\" class=\"headerlink\" title=\"创建项目\"></a>创建项目</h5><p>1.新建项目目录，这里以 <code>~/my_wordpress</code>为例。</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs shell\">mkdir ~/my_wordpress<br></code></pre></td></tr></table></figure>\n\n<p>2.进入项目目录</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs shell\">cd ~/my_wordpress<br></code></pre></td></tr></table></figure>\n\n<p>3.编辑配置文件</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs shell\">nano docker-compose.yml<br></code></pre></td></tr></table></figure>\n\n<p>文件内容:</p>\n<figure class=\"highlight yml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs yml\"><span class=\"hljs-attr\">version:</span> <span class=\"hljs-string\">&quot;3.9&quot;</span><br> <br><span class=\"hljs-attr\">services:</span><br>  <span class=\"hljs-attr\">db:</span><br>    <span class=\"hljs-attr\">image:</span> <span class=\"hljs-string\">mysql:5.7</span><br>    <span class=\"hljs-attr\">volumes:</span><br>      <span class=\"hljs-bullet\">-</span> <span class=\"hljs-string\">db_data:/var/lib/mysql</span><br>    <span class=\"hljs-attr\">restart:</span> <span class=\"hljs-string\">always</span><br>    <span class=\"hljs-attr\">environment:</span><br>      <span class=\"hljs-attr\">MYSQL_ROOT_PASSWORD:</span> <span class=\"hljs-string\">somewordpress</span><br>      <span class=\"hljs-attr\">MYSQL_DATABASE:</span> <span class=\"hljs-string\">wordpress</span><br>      <span class=\"hljs-attr\">MYSQL_USER:</span> <span class=\"hljs-string\">wordpress</span><br>      <span class=\"hljs-attr\">MYSQL_PASSWORD:</span> <span class=\"hljs-string\">wordpress</span><br> <br>  <span class=\"hljs-attr\">wordpress:</span><br>    <span class=\"hljs-attr\">depends_on:</span><br>      <span class=\"hljs-bullet\">-</span> <span class=\"hljs-string\">db</span><br>    <span class=\"hljs-attr\">image:</span> <span class=\"hljs-string\">wordpress:latest</span><br>    <span class=\"hljs-attr\">volumes:</span><br>      <span class=\"hljs-bullet\">-</span> <span class=\"hljs-string\">wordpress_data:/var/www/html</span><br>    <span class=\"hljs-attr\">ports:</span><br>      <span class=\"hljs-bullet\">-</span> <span class=\"hljs-string\">&quot;80:80&quot;</span><br>      <span class=\"hljs-bullet\">-</span> <span class=\"hljs-string\">&quot;443:443&quot;</span><br>    <span class=\"hljs-attr\">restart:</span> <span class=\"hljs-string\">always</span><br>    <span class=\"hljs-attr\">environment:</span><br>      <span class=\"hljs-attr\">WORDPRESS_DB_HOST:</span> <span class=\"hljs-string\">db</span><br>      <span class=\"hljs-attr\">WORDPRESS_DB_USER:</span> <span class=\"hljs-string\">wordpress</span><br>      <span class=\"hljs-attr\">WORDPRESS_DB_PASSWORD:</span> <span class=\"hljs-string\">wordpress</span><br>      <span class=\"hljs-attr\">WORDPRESS_DB_NAME:</span> <span class=\"hljs-string\">wordpress</span><br><span class=\"hljs-attr\">volumes:</span><br>  <span class=\"hljs-attr\">db_data:</span> &#123;&#125;<br>  <span class=\"hljs-attr\">wordpress_data:</span> &#123;&#125;<br></code></pre></td></tr></table></figure>\n\n<p>注意:</p>\n<p>这里用到了 <code>mysql:5.7</code> 和 <code>wordpress:latest</code> 两个 Docker 镜像，WordPress 镜像依赖于 <code>MySQL</code>镜像。</p>\n<p><code>restart: always</code> 参数表明容器服务宕机后会自动重启。</p>\n<p><code>MYSQL_ROOT_PASSWORD </code>为数据库的 root 密码，<code>MYSQL_PASSWORD</code> 为数据库的普通用户密码，请自行修改，对应的 <code>WORDPRESS_DB_PASSWORD</code> 也要同时修改。<code>MYSQL_USER</code> 为数据库普通用户的用户名，如果有需要也可以修改，对应的 <code>WORDPRESS_DB_USER</code> 也要同时修改。</p>\n<p><code>80:80</code> 的意思是把宿主机的 80 端口映射到容器内部的 80 端口。如需通过其他端口访问，只需修改前面的 80。比如，我要通过 8080 端口访问 WordPress，填写 <code>8080:80</code>即可。</p>\n<p>执行 <code>Ctrl + O </code>保存文件，回车，再执行 <code>Ctrl + X</code> 退出。</p>\n<h5 id=\"启动容器\"><a href=\"#启动容器\" class=\"headerlink\" title=\"启动容器\"></a>启动容器</h5><p>在 <code>~/my_wordpress</code>目录中执行以下命令启动 WordPress：</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs shell\">sudo docker-compose up -d<br></code></pre></td></tr></table></figure>\n\n<p>构建完成后就可以通过 <code>http://ip:port </code>来访问 WordPress（请将ip替换为 VPS 的 IP，<code>port</code> 替换为你使用的端口，如果是 80 端口则可以省略）。如果提示 <code>Error establishing a database connection</code>，说明配置尚未完成，等待 1～2 分钟，刷新网页即可进入安装界面。</p>\n<h5 id=\"配置SSL\"><a href=\"#配置SSL\" class=\"headerlink\" title=\"配置SSL\"></a>配置SSL</h5><p>进入容器</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs shell\">sudo docker-compose exec wordpress bash<br></code></pre></td></tr></table></figure>\n\n<p><code>注意：本章中后续命令都要在容器中执行！</code></p>\n<p>安装 cron 及 nano</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs shell\">apt update &amp;&amp; apt install -y cron nano<br></code></pre></td></tr></table></figure>\n\n<p>安装 acme.sh 用于签发 SSL 证书（请把 <a href=\"mailto:&#x6d;&#x79;&#64;&#101;&#x78;&#97;&#x6d;&#112;&#108;&#x65;&#46;&#x63;&#x6f;&#x6d;\">&#x6d;&#x79;&#64;&#101;&#x78;&#97;&#x6d;&#112;&#108;&#x65;&#46;&#x63;&#x6f;&#x6d;</a> 改为你的邮件地址）</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs shell\">curl  https://get.acme.sh | sh -s email=my@example.com<br></code></pre></td></tr></table></figure>\n\n<p>将域名解析至 VPS 的 IP，然后执行以下命令签发证书（请把 example.com 改为你的域名）</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs shell\">bash ~/.acme.sh/acme.sh --issue -d example.com --apache  --tlsport 56789<br></code></pre></td></tr></table></figure>\n\n<p>启用模块</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs shell\">a2enmod rewrite<br>a2enmod ssl<br></code></pre></td></tr></table></figure>\n\n<p>创建证书目录</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs bash\"><span class=\"hljs-built_in\">mkdir</span> -p /etc/apache2/ssl<br></code></pre></td></tr></table></figure>\n\n<p>复制证书（请把 <code>example.com</code> 改为你的域名1</p>\n<p>创建站点（将以下全部内容粘贴进终端 )</p>\n<p>启用站点</p>\n<figure class=\"highlight maxima\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs maxima\">a2ensite wordpress<br>service apache2 <span class=\"hljs-built_in\">restart</span><br></code></pre></td></tr></table></figure>\n\n<p>编辑 <code>/var/www/html/.htaccess</code>，在顶部加入以下内容：</p>\n<figure class=\"highlight apache\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs apache\"><span class=\"hljs-comment\"># BEGIN SSL Redirect</span><br><span class=\"hljs-section\">&lt;IfModule mod_rewrite.c&gt;</span><br><span class=\"hljs-attribute\">RewriteEngine</span> <span class=\"hljs-literal\">on</span><br><span class=\"hljs-attribute\">RewriteCond</span> <span class=\"hljs-variable\">%&#123;HTTPS&#125;</span> !=<span class=\"hljs-literal\">on</span><span class=\"hljs-meta\"> [NC]</span><br><span class=\"hljs-attribute\">RewriteRule</span> ^(.*)$ https://<span class=\"hljs-variable\">%&#123;HTTP_HOST&#125;</span>/$<span class=\"hljs-number\">1</span><span class=\"hljs-meta\"> [R=301,L]</span><br><span class=\"hljs-section\">&lt;/IfModule&gt;</span><br><span class=\"hljs-comment\"># END SSL Redirect</span><br></code></pre></td></tr></table></figure>\n\n<p>最后一步，访问域名，进入 WordPress 后台，打开 「设置」-「常规选项」，并把 <strong>WordPress地址</strong> 和 <strong>站点地址</strong> 中的 <code>http</code> 改为 <code>https</code>，并保存。</p>\n<p>至此，SSL 配置已完成。</p>\n<p>该部署方法转载自</p>\n<p><a href=\"https://blog.iamsjy.com/2022/03/29/deploy-wordpress-with-docker-compose/\">Tony’s Blog:通过 Docker Compose 部署 WordPress</a></p>\n<p><code>遵循CC BY-NC-SA 4.0开源协议进行转载，已获原作者授权</code></p>\n"},{"abbrlink":"","index_img":"https://cdnn.boochi.cn/gh/inkdust-dev/ink-oss@main/blog-image/wordpress-high-speed.png","date":"2023-08-08T10:55:35.536Z","title":"WordPress高速加载性能优化方案","updated":"2024-08-07T14:31:49.591Z","_content":"从七个个角度优化你的个人/商务WordPress博客。\n\n# 选用层\n\n## 服务器选用\n\n若你想在中国大陆地区获得良好的速度优化，建议你购买国内服务器并完成 `网站备案`后，再开始部署你的WordPress博客程序。\n\n腾讯云网站备案指南：[网站备案 如何快速备案您的网站-快速入门-文档中心-腾讯云 (tencent.com)](https://cloud.tencent.com/document/product/243/39038)\n\n阿里云网站备案指南：[操作指南\\_备案-阿里云帮助中心 (aliyun.com)](https://help.aliyun.com/zh/icp-filing/user-guide/?spm=a2c4g.11186623.0.0.38a81d9cGvrtAA)\n\n百度云网站备案指南：[ICP备案服务-百度智能云 (baidu.com)](https://cloud.baidu.com/doc/BeiAn/index.html)\n\n网易云网站备案指南；[首次备案教程\\_域名与备案\\_产品文档\\_帮助与文档-网易数帆 (163.com)](https://sf.163.com/help/documents/190221998684819456)\n\n七牛云网站备案指南：[首次备案指南\\_使用指南\\_云主机 - 七牛开发者中心 (qiniu.com)](https://developer.qiniu.com/qvm/4184/qvm-first-guide)\n\n工业和信息化部政务服务平台（ICP/IP地址/域名信息备案管理系统）：[ICP/IP地址/域名信息备案管理系统 (miit.gov.cn)](https://beian.miit.gov.cn/#/Integrated/index)\n\n腾讯云轻量应用服务器购买（无AFF）：[轻量应用服务器Lighthouse\\_香港轻量服务器\\_海外轻量服务器-腾讯云 (tencent.com)](https://cloud.tencent.com/product/lighthouse)\n\n腾讯云CVM云服务器购买（无AFF）：[云服务器CVM\\_云主机\\_云计算服务器\\_弹性云服务器-腾讯云 (tencent.com)](https://cloud.tencent.com/product/cvm)\n\n腾讯云GPU服务器购买（无AFF）：[GPU云服务器\\_并行计算\\_弹性计算\\_人工智能\\_深度学习-腾讯云 (tencent.com)](https://cloud.tencent.com/product/gpu)\n\n阿里云轻量应用服务器购买（无AFF）：[轻量应用服务器\\_web服务器\\_个人建站\\_弹性计算-阿里云 (aliyun.com)](https://www.aliyun.com/product/swas?spm=5176.28055625.J_3207526240.20.5421154aQbMvxH&scm=20140722.S_function@@product@@65233._.ID_function@@product@@65233-RL_%E8%BD%BB%E9%87%8F-LOC_bar-OR_ser-V_3-P0_0)\n\n阿里云ECS云服务器购买（无AFF）：[云服务器ECS\\_云主机\\_服务器托管\\_弹性计算-阿里云 (aliyun.com)](https://www.aliyun.com/product/ecs?spm=5176.21213303.744563.1.cb5153c90W1CYv&scm=20140722.S_card@@%E4%BA%A7%E5%93%81@@163972.S_card0.ID_card@@%E4%BA%A7%E5%93%81@@163972-RL_%E4%BA%91%E6%9C%8D%E5%8A%A1%E5%99%A8%20ECS-OR_ser-V_3-P0_0)\n\n百度云轻量应用服务器LS购买（无AFF）：[轻量应用服务器 LS\\_web服务器\\_小规格云服务器-百度智能云 (baidu.com)](https://cloud.baidu.com/product/lightserver.html)\n\n百度云云服务器BCC购买（无AFF）：[轻量应用服务器 LS\\_web服务器\\_小规格云服务器-百度智能云 (baidu.com)](https://cloud.baidu.com/product/lightserver.html)\n\n其他IDC云服务商的服务器暂不列出。\n\n若你想在中国大陆地区获得良好的速度优化，且不想进行繁杂的网站备案，建议选择亚洲地区的云服务器/ECS/轻量应用服务器/VPS，此处不再列举。\n\n若你不想在中国大陆地区获得良好的速度优化，请关闭这篇文章。\n\n## CDN选用\n\n良好的CDN不仅可以为网站提速，还可以隐藏源站IP地址，保护服务器不受恶意攻击。\n\n关于CDN的选用，可以在各大搜索引擎上搜索到，国内已备案建议选择国内CDN，未备案则只能选择国外CDN。\n\n我个人常用的几个CDN提供商：\n\n腾讯云：[CDN 内容分发网络 \\_CDN内容加速\\_CDN加速-腾讯云 (tencent.com)](https://cloud.tencent.com/product/cdn)\n\n阿里云：[CDN\\_内容分发网络\\_CDN网站加速-阿里云 (aliyun.com)](https://www.aliyun.com/product/cdn?spm=5176.28055625.J_3207526240.50.5421154a9V4vEf&scm=20140722.S_function@@product@@96099._.ID_function@@product@@96099-RL_cdn-LOC_bar-OR_ser-V_3-P0_0)\n\n初七云：[购物车 - 初七云 - 企业级云服务器、高防服务器、香港服务器、免费CDN云计算服务商！ (chuqiyun.com)](https://chuqiyun.com/cart?fid=2&gid=3)\n\nCloudFlare：[Cloudflare 中国官网 | 智能化云服务平台 | 免费CDN安全防护 | Cloudflare (cloudflare-cn.com)](https://www.cloudflare-cn.com/)\n\nCacheFly：[Trusted CDN Provider | Faster Content Delivery | CacheFly](https://www.cachefly.com/)\n\nGcore：[Gcore | 全球托管、CDN、边缘和云服务](https://gcore.com/zh)\n\n## 主题选用\n\n尽量选择图片加载量较少的，JS较少的主题，可以显著提升加载速度。这里不列举。\n\n# 加速层\n\n## JS/CSS/图片静态文件加速\n\n建议选用WP-Rocket和对象存储+CDN的方式，对CDN路径进行映射，如果没有钱购买WP-Rocket，可以通过WPJAM实现同样的效果。\n\n对象存储配置（原文地址：[WPJAM Basic 详细介绍：一键实现 WordPress 静态资源 CDN 加速 - WordPress 果酱](https://blog.wpjam.com/m/wpjam-basic-cdn/)）：\n\n* [WordPress 博客使用阿里云对象存储 OSS 进行静态资源 CDN 加速](https://blog.wpjam.com/m/aliyun-oss-cdn/)\n* [WordPress 博客使用腾讯云对象存储 COS 进行静态资源 CDN 加速](https://blog.wpjam.com/m/qcloud-cos-cdn/)\n* [WordPress 博客使用火山引擎 veImageX 进行静态资源 CDN 加速](https://blog.wpjam.com/m/volc-veimagex/)\n\n然后就可以使用WP-Rocket映射CDN CNAME：\n\n在 `WP Rocket`插件设置中，在CDN选项里，启用CDN，并在CDN CNAME中填入配置好的CDN域名，并选中套用到所有文件，如下图：\n\n![https://cdnn.boochi.cn/gh/inkdust-dev/ink-oss@main/qexo-upload/2023/8/8-768x342_ae4f2f18235ab0d5ded34c124275f9d3.jpg](https://cdnn.boochi.cn/gh/inkdust-dev/ink-oss@main/qexo-upload/2023/8/8-768x342_ae4f2f18235ab0d5ded34c124275f9d3.jpg)\n\n或者在WPJAM中设置：\n\n![wpjam](https://cdn.97866.com/wp-content/uploads/sites/26/2023/05/1684249708-image.png?imageMogr2/auto-orient/thumbnail/!1200x722r/gravity/Center/crop/1200x722/quality/70/interlace/1|watermark/1/image/aHR0cHM6Ly9jZG4ud3BqYW0uY29tL3dwamFtL3dhdGVybWFyay5wbmc/dissolve/50#)\n\n设置完成后即可享受快速的CSS/JS/图片加速。\n\nWPJAM下载链接：[WPJAM Basic – WordPress 插件 | WordPress.org China 简体中文](https://cn.wordpress.org/plugins/wpjam-basic/)\n\nWP-Rocket开心版下载：[wp-rocket\\_v3.14.1.zip - Cloudreve (awak.top)](https://pan.awak.top/s/k5h6)\n\n## 头像/字体/后台加速\n\n说到后台核心文件加速，我想到了使用WP-China-Yes，但其对谷歌字体的加速已失效，我将其修改到了Google官方的CN镜像地址，同时将Gravatar替换为我自建的SDN地址（FallSoft SDN）。\n\n![https://cdnn.boochi.cn/gh/inkdust-dev/ink-oss@main/qexo-upload/2023/8/20230808195915_3bd36a8fd66f78a5ce2033d9ad5407f1.png](https://cdnn.boochi.cn/gh/inkdust-dev/ink-oss@main/qexo-upload/2023/8/20230808195915_3bd36a8fd66f78a5ce2033d9ad5407f1.png)\n\nWP-China-Yes自用修改版：[wp-china-yes.zip - Cloudreve (awak.top)](https://pan.awak.top/s/l5i5)\n\n## Opcache\n\n宝塔：在宝塔面板中安装PHP扩展Opache即可。\n\nOneinstack：`./install.sh --php_extensions opcache`\n\nLNMP：[LNMP安装php扩展模块（eAccelerator、xCache、memcached、imageMagick和ionCube） (biancheng.net)](http://c.biancheng.net/view/1135.html)\n\n## Redis/Memcached\n\n### Redis\n\n安装Redis：[Linux安装部署Redis(超级详细) - 长沙大鹏 - 博客园 (cnblogs.com)](https://www.cnblogs.com/hunanzp/p/12304622.html)\n\n宝塔面板直接在软件商店安装Redis即可。(无需设置)\n\n安装[Redis Object Cache – WordPress 插件](https://cn.wordpress.org/plugins/redis-cache/)。\n\n开启插件后会自动连接到Redis。\n\n### Memcached\n\n本人不熟悉，指路：\n\n[使用 Memcached 内存缓存来提高 WordPress 站点速度 - WordPress 果酱 (wpjam.com)](https://blog.wpjam.com/article/wordpress-memcached/)\n\n[Cache | Screen-by-Screen | LSCache for WordPress | LiteSpeed Documentation (litespeedtech.com)](https://docs.litespeedtech.com/lscache/lscwp/cache/#object-tab)\n\n## Service Worker\n\n参考自：[为WordPress启用Service Worker | 青空之蓝 (ixk.me)](https://blog.ixk.me/post/wordpress-enabled-service-worker)\n\n### 加入 sw-toolbox 核心至 WordPress\n\n下载[sw-toolbox.js](https://cdnn.boochi.cn/gh/inkdust-dev/ink-oss@main/js/sw-toolbox.js)并且放到博客程序的根目录.\n\n### 创建缓存规则\n\n在博客个目录创建一个serviceworker.js，根据网站情况书写，下面是[GalX次元 - 免费的galgame资源站 (galxfans.top)](https://www.galxfans.top/)的Service Worker规则示例：\n\n```javascript\n\"use strict\";\n\n(function () {\n  \"use strict\";\n  /**\n   * Service Worker Toolbox caching\n   */\n\n  var cacheVersion = \"-toolbox-v1\";\n  var dynamicVendorCacheName = \"dynamic-vendor\" + cacheVersion;\n  var staticVendorCacheName = \"static-vendor\" + cacheVersion;\n  var staticAssetsCacheName = \"static-assets\" + cacheVersion;\n  var contentCacheName = \"content\" + cacheVersion;\n  var maxEntries = 50;\n  //以下的网址请更换为博客地址(可以填写绝对链接或者相对链接)\n  self.importScripts(\"https://www.galxfans.top/sw-toolbox.js\");\n  self.toolbox.options.debug = false;\n  //由于我的博客启用Autoptimize，以及WP Super Cache，所以添加Cache目录\n//   self.toolbox.router.get(\"wp-content/cache/(.*)\", self.toolbox.cacheFirst, {\n//     cache: {\n//       name: staticAssetsCacheName,\n//       maxEntries: maxEntries\n//     }\n//   });\n  //添加毒瘤jquery的缓存规则\n  self.toolbox.router.get(\n    \"wp-includes/js/jquery/jquery.js\",\n    self.toolbox.cacheFirst,\n    {\n      cache: {\n        name: staticAssetsCacheName,\n        maxEntries: maxEntries\n      }\n    }\n  );\n  //添加主题的静态资源，具体目录请自行更换\n  self.toolbox.router.get(\n    \"wp-content/themes/Autumn-Pro/static/(.*)\",\n    self.toolbox.cacheFirst,\n    {\n      cache: {\n        name: staticAssetsCacheName,\n        maxEntries: maxEntries\n      }\n    }\n  );\n  self.toolbox.router.get(\n    \"wp-includes/css/(.*)\",\n    self.toolbox.cacheFirst,\n    {\n      cache: {\n        name: staticAssetsCacheName,\n        maxEntries: maxEntries\n      }\n    }\n  );\n  //以下均为第三方资源缓存\n  self.toolbox.router.get(\"/(.*)\", self.toolbox.cacheFirst, {\n    origin: /cdn2\\.chuqis\\.com/,\n    cache: {\n      name: staticVendorCacheName,\n      maxEntries: maxEntries\n    }\n  });\n\n  self.toolbox.router.get(\"/(.*)\", self.toolbox.cacheFirst, {\n    origin: /cdn\\.chuqis\\.com/,\n    cache: {\n      name: staticVendorCacheName,\n      maxEntries: maxEntries\n    }\n  });\n\n  // 缓存 cdn\n  self.toolbox.router.get(\"/(.*)\", self.toolbox.fastest, {\n    origin: /cdn\\.staticfile\\.org/,\n    cache: {\n      name: staticVendorCacheName,\n      maxEntries: maxEntries\n    }\n  });\n\n  self.toolbox.router.get(\"/(.*)\", self.toolbox.fastest, {\n    origin: /cravatar\\.cn/,\n    cache: {\n      name: staticVendorCacheName,\n      maxEntries: maxEntries\n    }\n  });\n  \n  self.toolbox.router.get(\"/(.*)\", self.toolbox.fastest, {\n    origin: /unpkg\\.com/,\n    cache: {\n      name: staticVendorCacheName,\n      maxEntries: maxEntries\n    }\n  });\n  self.toolbox.router.get(\"/(.*)\", self.toolbox.fastest, {\n    origin: /img\\.galx\\.umine\\.top/,\n    cache: {\n      name: staticVendorCacheName,\n      maxEntries: maxEntries\n    }\n  });\n  self.toolbox.router.get(\"/(.*)\", self.toolbox.fastest, {\n    origin: /inkdustv\\.cachefly\\.net/,\n    cache: {\n      name: staticVendorCacheName,\n      maxEntries: maxEntries\n    }\n  });\n\n\n//   self.toolbox.router.get(\"/(.*)\", self.toolbox.cacheFirst, {\n//     origin: /(fonts-gstatic\\.yecdn\\.com|www\\.google-analytics\\.com)/,\n//     cache: {\n//       name: staticVendorCacheName,\n//       maxEntries: maxEntries\n//     }\n//   });\n\n  // immediately activate this serviceworker\n  self.addEventListener(\"install\", function (event) {\n    return event.waitUntil(self.skipWaiting());\n  });\n\n  self.addEventListener(\"activate\", function (event) {\n    return event.waitUntil(self.clients.claim());\n  });\n})();\n\n```\n\n### 启用 Service Workers\n\n打开主题文件所在目录，修改 footer.php，在 `</body>` 前加入以下代码:\n\n```javascript\n<script>\n  var serviceWorkerUri = \"/serviceworker.js\";\n\n  if (\"serviceWorker\" in navigator) {\n    navigator.serviceWorker\n      .register(serviceWorkerUri)\n      .then(function () {\n        if (navigator.serviceWorker.controller) {\n          console.log(\"Assets cached by the controlling service worker.\");\n        } else {\n          console.log(\n            \"Please reload this page to allow the service worker to handle network operations.\"\n          );\n        }\n      })\n      .catch(function (error) {\n        console.log(\"ERROR: \" + error);\n      });\n  } else {\n    console.log(\"Service workers are not supported in the current browser.\");\n  }\n</script>\n\n```\n\n即刻享受Service Worker毫秒级响应加速。\n\n更多加速方法，请自行探索！\n","source":"_posts/wordpress-high-speed.md","raw":"---\nabbrlink: ''\ncategories:\n- - 技术教程\nindex_img: https://cdnn.boochi.cn/gh/inkdust-dev/ink-oss@main/blog-image/wordpress-high-speed.png\ndate: '2023-08-08T18:55:35.536284+08:00'\ntags:\n- WordPress\n- 加速\ntitle: WordPress高速加载性能优化方案\nupdated: '2024-08-07T22:31:49.591+08:00'\n---\n从七个个角度优化你的个人/商务WordPress博客。\n\n# 选用层\n\n## 服务器选用\n\n若你想在中国大陆地区获得良好的速度优化，建议你购买国内服务器并完成 `网站备案`后，再开始部署你的WordPress博客程序。\n\n腾讯云网站备案指南：[网站备案 如何快速备案您的网站-快速入门-文档中心-腾讯云 (tencent.com)](https://cloud.tencent.com/document/product/243/39038)\n\n阿里云网站备案指南：[操作指南\\_备案-阿里云帮助中心 (aliyun.com)](https://help.aliyun.com/zh/icp-filing/user-guide/?spm=a2c4g.11186623.0.0.38a81d9cGvrtAA)\n\n百度云网站备案指南：[ICP备案服务-百度智能云 (baidu.com)](https://cloud.baidu.com/doc/BeiAn/index.html)\n\n网易云网站备案指南；[首次备案教程\\_域名与备案\\_产品文档\\_帮助与文档-网易数帆 (163.com)](https://sf.163.com/help/documents/190221998684819456)\n\n七牛云网站备案指南：[首次备案指南\\_使用指南\\_云主机 - 七牛开发者中心 (qiniu.com)](https://developer.qiniu.com/qvm/4184/qvm-first-guide)\n\n工业和信息化部政务服务平台（ICP/IP地址/域名信息备案管理系统）：[ICP/IP地址/域名信息备案管理系统 (miit.gov.cn)](https://beian.miit.gov.cn/#/Integrated/index)\n\n腾讯云轻量应用服务器购买（无AFF）：[轻量应用服务器Lighthouse\\_香港轻量服务器\\_海外轻量服务器-腾讯云 (tencent.com)](https://cloud.tencent.com/product/lighthouse)\n\n腾讯云CVM云服务器购买（无AFF）：[云服务器CVM\\_云主机\\_云计算服务器\\_弹性云服务器-腾讯云 (tencent.com)](https://cloud.tencent.com/product/cvm)\n\n腾讯云GPU服务器购买（无AFF）：[GPU云服务器\\_并行计算\\_弹性计算\\_人工智能\\_深度学习-腾讯云 (tencent.com)](https://cloud.tencent.com/product/gpu)\n\n阿里云轻量应用服务器购买（无AFF）：[轻量应用服务器\\_web服务器\\_个人建站\\_弹性计算-阿里云 (aliyun.com)](https://www.aliyun.com/product/swas?spm=5176.28055625.J_3207526240.20.5421154aQbMvxH&scm=20140722.S_function@@product@@65233._.ID_function@@product@@65233-RL_%E8%BD%BB%E9%87%8F-LOC_bar-OR_ser-V_3-P0_0)\n\n阿里云ECS云服务器购买（无AFF）：[云服务器ECS\\_云主机\\_服务器托管\\_弹性计算-阿里云 (aliyun.com)](https://www.aliyun.com/product/ecs?spm=5176.21213303.744563.1.cb5153c90W1CYv&scm=20140722.S_card@@%E4%BA%A7%E5%93%81@@163972.S_card0.ID_card@@%E4%BA%A7%E5%93%81@@163972-RL_%E4%BA%91%E6%9C%8D%E5%8A%A1%E5%99%A8%20ECS-OR_ser-V_3-P0_0)\n\n百度云轻量应用服务器LS购买（无AFF）：[轻量应用服务器 LS\\_web服务器\\_小规格云服务器-百度智能云 (baidu.com)](https://cloud.baidu.com/product/lightserver.html)\n\n百度云云服务器BCC购买（无AFF）：[轻量应用服务器 LS\\_web服务器\\_小规格云服务器-百度智能云 (baidu.com)](https://cloud.baidu.com/product/lightserver.html)\n\n其他IDC云服务商的服务器暂不列出。\n\n若你想在中国大陆地区获得良好的速度优化，且不想进行繁杂的网站备案，建议选择亚洲地区的云服务器/ECS/轻量应用服务器/VPS，此处不再列举。\n\n若你不想在中国大陆地区获得良好的速度优化，请关闭这篇文章。\n\n## CDN选用\n\n良好的CDN不仅可以为网站提速，还可以隐藏源站IP地址，保护服务器不受恶意攻击。\n\n关于CDN的选用，可以在各大搜索引擎上搜索到，国内已备案建议选择国内CDN，未备案则只能选择国外CDN。\n\n我个人常用的几个CDN提供商：\n\n腾讯云：[CDN 内容分发网络 \\_CDN内容加速\\_CDN加速-腾讯云 (tencent.com)](https://cloud.tencent.com/product/cdn)\n\n阿里云：[CDN\\_内容分发网络\\_CDN网站加速-阿里云 (aliyun.com)](https://www.aliyun.com/product/cdn?spm=5176.28055625.J_3207526240.50.5421154a9V4vEf&scm=20140722.S_function@@product@@96099._.ID_function@@product@@96099-RL_cdn-LOC_bar-OR_ser-V_3-P0_0)\n\n初七云：[购物车 - 初七云 - 企业级云服务器、高防服务器、香港服务器、免费CDN云计算服务商！ (chuqiyun.com)](https://chuqiyun.com/cart?fid=2&gid=3)\n\nCloudFlare：[Cloudflare 中国官网 | 智能化云服务平台 | 免费CDN安全防护 | Cloudflare (cloudflare-cn.com)](https://www.cloudflare-cn.com/)\n\nCacheFly：[Trusted CDN Provider | Faster Content Delivery | CacheFly](https://www.cachefly.com/)\n\nGcore：[Gcore | 全球托管、CDN、边缘和云服务](https://gcore.com/zh)\n\n## 主题选用\n\n尽量选择图片加载量较少的，JS较少的主题，可以显著提升加载速度。这里不列举。\n\n# 加速层\n\n## JS/CSS/图片静态文件加速\n\n建议选用WP-Rocket和对象存储+CDN的方式，对CDN路径进行映射，如果没有钱购买WP-Rocket，可以通过WPJAM实现同样的效果。\n\n对象存储配置（原文地址：[WPJAM Basic 详细介绍：一键实现 WordPress 静态资源 CDN 加速 - WordPress 果酱](https://blog.wpjam.com/m/wpjam-basic-cdn/)）：\n\n* [WordPress 博客使用阿里云对象存储 OSS 进行静态资源 CDN 加速](https://blog.wpjam.com/m/aliyun-oss-cdn/)\n* [WordPress 博客使用腾讯云对象存储 COS 进行静态资源 CDN 加速](https://blog.wpjam.com/m/qcloud-cos-cdn/)\n* [WordPress 博客使用火山引擎 veImageX 进行静态资源 CDN 加速](https://blog.wpjam.com/m/volc-veimagex/)\n\n然后就可以使用WP-Rocket映射CDN CNAME：\n\n在 `WP Rocket`插件设置中，在CDN选项里，启用CDN，并在CDN CNAME中填入配置好的CDN域名，并选中套用到所有文件，如下图：\n\n![https://cdnn.boochi.cn/gh/inkdust-dev/ink-oss@main/qexo-upload/2023/8/8-768x342_ae4f2f18235ab0d5ded34c124275f9d3.jpg](https://cdnn.boochi.cn/gh/inkdust-dev/ink-oss@main/qexo-upload/2023/8/8-768x342_ae4f2f18235ab0d5ded34c124275f9d3.jpg)\n\n或者在WPJAM中设置：\n\n![wpjam](https://cdn.97866.com/wp-content/uploads/sites/26/2023/05/1684249708-image.png?imageMogr2/auto-orient/thumbnail/!1200x722r/gravity/Center/crop/1200x722/quality/70/interlace/1|watermark/1/image/aHR0cHM6Ly9jZG4ud3BqYW0uY29tL3dwamFtL3dhdGVybWFyay5wbmc/dissolve/50#)\n\n设置完成后即可享受快速的CSS/JS/图片加速。\n\nWPJAM下载链接：[WPJAM Basic – WordPress 插件 | WordPress.org China 简体中文](https://cn.wordpress.org/plugins/wpjam-basic/)\n\nWP-Rocket开心版下载：[wp-rocket\\_v3.14.1.zip - Cloudreve (awak.top)](https://pan.awak.top/s/k5h6)\n\n## 头像/字体/后台加速\n\n说到后台核心文件加速，我想到了使用WP-China-Yes，但其对谷歌字体的加速已失效，我将其修改到了Google官方的CN镜像地址，同时将Gravatar替换为我自建的SDN地址（FallSoft SDN）。\n\n![https://cdnn.boochi.cn/gh/inkdust-dev/ink-oss@main/qexo-upload/2023/8/20230808195915_3bd36a8fd66f78a5ce2033d9ad5407f1.png](https://cdnn.boochi.cn/gh/inkdust-dev/ink-oss@main/qexo-upload/2023/8/20230808195915_3bd36a8fd66f78a5ce2033d9ad5407f1.png)\n\nWP-China-Yes自用修改版：[wp-china-yes.zip - Cloudreve (awak.top)](https://pan.awak.top/s/l5i5)\n\n## Opcache\n\n宝塔：在宝塔面板中安装PHP扩展Opache即可。\n\nOneinstack：`./install.sh --php_extensions opcache`\n\nLNMP：[LNMP安装php扩展模块（eAccelerator、xCache、memcached、imageMagick和ionCube） (biancheng.net)](http://c.biancheng.net/view/1135.html)\n\n## Redis/Memcached\n\n### Redis\n\n安装Redis：[Linux安装部署Redis(超级详细) - 长沙大鹏 - 博客园 (cnblogs.com)](https://www.cnblogs.com/hunanzp/p/12304622.html)\n\n宝塔面板直接在软件商店安装Redis即可。(无需设置)\n\n安装[Redis Object Cache – WordPress 插件](https://cn.wordpress.org/plugins/redis-cache/)。\n\n开启插件后会自动连接到Redis。\n\n### Memcached\n\n本人不熟悉，指路：\n\n[使用 Memcached 内存缓存来提高 WordPress 站点速度 - WordPress 果酱 (wpjam.com)](https://blog.wpjam.com/article/wordpress-memcached/)\n\n[Cache | Screen-by-Screen | LSCache for WordPress | LiteSpeed Documentation (litespeedtech.com)](https://docs.litespeedtech.com/lscache/lscwp/cache/#object-tab)\n\n## Service Worker\n\n参考自：[为WordPress启用Service Worker | 青空之蓝 (ixk.me)](https://blog.ixk.me/post/wordpress-enabled-service-worker)\n\n### 加入 sw-toolbox 核心至 WordPress\n\n下载[sw-toolbox.js](https://cdnn.boochi.cn/gh/inkdust-dev/ink-oss@main/js/sw-toolbox.js)并且放到博客程序的根目录.\n\n### 创建缓存规则\n\n在博客个目录创建一个serviceworker.js，根据网站情况书写，下面是[GalX次元 - 免费的galgame资源站 (galxfans.top)](https://www.galxfans.top/)的Service Worker规则示例：\n\n```javascript\n\"use strict\";\n\n(function () {\n  \"use strict\";\n  /**\n   * Service Worker Toolbox caching\n   */\n\n  var cacheVersion = \"-toolbox-v1\";\n  var dynamicVendorCacheName = \"dynamic-vendor\" + cacheVersion;\n  var staticVendorCacheName = \"static-vendor\" + cacheVersion;\n  var staticAssetsCacheName = \"static-assets\" + cacheVersion;\n  var contentCacheName = \"content\" + cacheVersion;\n  var maxEntries = 50;\n  //以下的网址请更换为博客地址(可以填写绝对链接或者相对链接)\n  self.importScripts(\"https://www.galxfans.top/sw-toolbox.js\");\n  self.toolbox.options.debug = false;\n  //由于我的博客启用Autoptimize，以及WP Super Cache，所以添加Cache目录\n//   self.toolbox.router.get(\"wp-content/cache/(.*)\", self.toolbox.cacheFirst, {\n//     cache: {\n//       name: staticAssetsCacheName,\n//       maxEntries: maxEntries\n//     }\n//   });\n  //添加毒瘤jquery的缓存规则\n  self.toolbox.router.get(\n    \"wp-includes/js/jquery/jquery.js\",\n    self.toolbox.cacheFirst,\n    {\n      cache: {\n        name: staticAssetsCacheName,\n        maxEntries: maxEntries\n      }\n    }\n  );\n  //添加主题的静态资源，具体目录请自行更换\n  self.toolbox.router.get(\n    \"wp-content/themes/Autumn-Pro/static/(.*)\",\n    self.toolbox.cacheFirst,\n    {\n      cache: {\n        name: staticAssetsCacheName,\n        maxEntries: maxEntries\n      }\n    }\n  );\n  self.toolbox.router.get(\n    \"wp-includes/css/(.*)\",\n    self.toolbox.cacheFirst,\n    {\n      cache: {\n        name: staticAssetsCacheName,\n        maxEntries: maxEntries\n      }\n    }\n  );\n  //以下均为第三方资源缓存\n  self.toolbox.router.get(\"/(.*)\", self.toolbox.cacheFirst, {\n    origin: /cdn2\\.chuqis\\.com/,\n    cache: {\n      name: staticVendorCacheName,\n      maxEntries: maxEntries\n    }\n  });\n\n  self.toolbox.router.get(\"/(.*)\", self.toolbox.cacheFirst, {\n    origin: /cdn\\.chuqis\\.com/,\n    cache: {\n      name: staticVendorCacheName,\n      maxEntries: maxEntries\n    }\n  });\n\n  // 缓存 cdn\n  self.toolbox.router.get(\"/(.*)\", self.toolbox.fastest, {\n    origin: /cdn\\.staticfile\\.org/,\n    cache: {\n      name: staticVendorCacheName,\n      maxEntries: maxEntries\n    }\n  });\n\n  self.toolbox.router.get(\"/(.*)\", self.toolbox.fastest, {\n    origin: /cravatar\\.cn/,\n    cache: {\n      name: staticVendorCacheName,\n      maxEntries: maxEntries\n    }\n  });\n  \n  self.toolbox.router.get(\"/(.*)\", self.toolbox.fastest, {\n    origin: /unpkg\\.com/,\n    cache: {\n      name: staticVendorCacheName,\n      maxEntries: maxEntries\n    }\n  });\n  self.toolbox.router.get(\"/(.*)\", self.toolbox.fastest, {\n    origin: /img\\.galx\\.umine\\.top/,\n    cache: {\n      name: staticVendorCacheName,\n      maxEntries: maxEntries\n    }\n  });\n  self.toolbox.router.get(\"/(.*)\", self.toolbox.fastest, {\n    origin: /inkdustv\\.cachefly\\.net/,\n    cache: {\n      name: staticVendorCacheName,\n      maxEntries: maxEntries\n    }\n  });\n\n\n//   self.toolbox.router.get(\"/(.*)\", self.toolbox.cacheFirst, {\n//     origin: /(fonts-gstatic\\.yecdn\\.com|www\\.google-analytics\\.com)/,\n//     cache: {\n//       name: staticVendorCacheName,\n//       maxEntries: maxEntries\n//     }\n//   });\n\n  // immediately activate this serviceworker\n  self.addEventListener(\"install\", function (event) {\n    return event.waitUntil(self.skipWaiting());\n  });\n\n  self.addEventListener(\"activate\", function (event) {\n    return event.waitUntil(self.clients.claim());\n  });\n})();\n\n```\n\n### 启用 Service Workers\n\n打开主题文件所在目录，修改 footer.php，在 `</body>` 前加入以下代码:\n\n```javascript\n<script>\n  var serviceWorkerUri = \"/serviceworker.js\";\n\n  if (\"serviceWorker\" in navigator) {\n    navigator.serviceWorker\n      .register(serviceWorkerUri)\n      .then(function () {\n        if (navigator.serviceWorker.controller) {\n          console.log(\"Assets cached by the controlling service worker.\");\n        } else {\n          console.log(\n            \"Please reload this page to allow the service worker to handle network operations.\"\n          );\n        }\n      })\n      .catch(function (error) {\n        console.log(\"ERROR: \" + error);\n      });\n  } else {\n    console.log(\"Service workers are not supported in the current browser.\");\n  }\n</script>\n\n```\n\n即刻享受Service Worker毫秒级响应加速。\n\n更多加速方法，请自行探索！\n","slug":"wordpress-high-speed","published":1,"comments":1,"layout":"post","photos":[],"_id":"cm1xg6mt8000e9a9o7jq1hj5o","content":"<p>从七个个角度优化你的个人&#x2F;商务WordPress博客。</p>\n<h1 id=\"选用层\"><a href=\"#选用层\" class=\"headerlink\" title=\"选用层\"></a>选用层</h1><h2 id=\"服务器选用\"><a href=\"#服务器选用\" class=\"headerlink\" title=\"服务器选用\"></a>服务器选用</h2><p>若你想在中国大陆地区获得良好的速度优化，建议你购买国内服务器并完成 <code>网站备案</code>后，再开始部署你的WordPress博客程序。</p>\n<p>腾讯云网站备案指南：<a href=\"https://cloud.tencent.com/document/product/243/39038\">网站备案 如何快速备案您的网站-快速入门-文档中心-腾讯云 (tencent.com)</a></p>\n<p>阿里云网站备案指南：<a href=\"https://help.aliyun.com/zh/icp-filing/user-guide/?spm=a2c4g.11186623.0.0.38a81d9cGvrtAA\">操作指南_备案-阿里云帮助中心 (aliyun.com)</a></p>\n<p>百度云网站备案指南：<a href=\"https://cloud.baidu.com/doc/BeiAn/index.html\">ICP备案服务-百度智能云 (baidu.com)</a></p>\n<p>网易云网站备案指南；<a href=\"https://sf.163.com/help/documents/190221998684819456\">首次备案教程_域名与备案_产品文档_帮助与文档-网易数帆 (163.com)</a></p>\n<p>七牛云网站备案指南：<a href=\"https://developer.qiniu.com/qvm/4184/qvm-first-guide\">首次备案指南_使用指南_云主机 - 七牛开发者中心 (qiniu.com)</a></p>\n<p>工业和信息化部政务服务平台（ICP&#x2F;IP地址&#x2F;域名信息备案管理系统）：<a href=\"https://beian.miit.gov.cn/#/Integrated/index\">ICP&#x2F;IP地址&#x2F;域名信息备案管理系统 (miit.gov.cn)</a></p>\n<p>腾讯云轻量应用服务器购买（无AFF）：<a href=\"https://cloud.tencent.com/product/lighthouse\">轻量应用服务器Lighthouse_香港轻量服务器_海外轻量服务器-腾讯云 (tencent.com)</a></p>\n<p>腾讯云CVM云服务器购买（无AFF）：<a href=\"https://cloud.tencent.com/product/cvm\">云服务器CVM_云主机_云计算服务器_弹性云服务器-腾讯云 (tencent.com)</a></p>\n<p>腾讯云GPU服务器购买（无AFF）：<a href=\"https://cloud.tencent.com/product/gpu\">GPU云服务器_并行计算_弹性计算_人工智能_深度学习-腾讯云 (tencent.com)</a></p>\n<p>阿里云轻量应用服务器购买（无AFF）：<a href=\"https://www.aliyun.com/product/swas?spm=5176.28055625.J_3207526240.20.5421154aQbMvxH&scm=20140722.S_function@@product@@65233._.ID_function@@product@@65233-RL_%E8%BD%BB%E9%87%8F-LOC_bar-OR_ser-V_3-P0_0\">轻量应用服务器_web服务器_个人建站_弹性计算-阿里云 (aliyun.com)</a></p>\n<p>阿里云ECS云服务器购买（无AFF）：<a href=\"https://www.aliyun.com/product/ecs?spm=5176.21213303.744563.1.cb5153c90W1CYv&scm=20140722.S_card@@%E4%BA%A7%E5%93%81@@163972.S_card0.ID_card@@%E4%BA%A7%E5%93%81@@163972-RL_%E4%BA%91%E6%9C%8D%E5%8A%A1%E5%99%A8%20ECS-OR_ser-V_3-P0_0\">云服务器ECS_云主机_服务器托管_弹性计算-阿里云 (aliyun.com)</a></p>\n<p>百度云轻量应用服务器LS购买（无AFF）：<a href=\"https://cloud.baidu.com/product/lightserver.html\">轻量应用服务器 LS_web服务器_小规格云服务器-百度智能云 (baidu.com)</a></p>\n<p>百度云云服务器BCC购买（无AFF）：<a href=\"https://cloud.baidu.com/product/lightserver.html\">轻量应用服务器 LS_web服务器_小规格云服务器-百度智能云 (baidu.com)</a></p>\n<p>其他IDC云服务商的服务器暂不列出。</p>\n<p>若你想在中国大陆地区获得良好的速度优化，且不想进行繁杂的网站备案，建议选择亚洲地区的云服务器&#x2F;ECS&#x2F;轻量应用服务器&#x2F;VPS，此处不再列举。</p>\n<p>若你不想在中国大陆地区获得良好的速度优化，请关闭这篇文章。</p>\n<h2 id=\"CDN选用\"><a href=\"#CDN选用\" class=\"headerlink\" title=\"CDN选用\"></a>CDN选用</h2><p>良好的CDN不仅可以为网站提速，还可以隐藏源站IP地址，保护服务器不受恶意攻击。</p>\n<p>关于CDN的选用，可以在各大搜索引擎上搜索到，国内已备案建议选择国内CDN，未备案则只能选择国外CDN。</p>\n<p>我个人常用的几个CDN提供商：</p>\n<p>腾讯云：<a href=\"https://cloud.tencent.com/product/cdn\">CDN 内容分发网络 _CDN内容加速_CDN加速-腾讯云 (tencent.com)</a></p>\n<p>阿里云：<a href=\"https://www.aliyun.com/product/cdn?spm=5176.28055625.J_3207526240.50.5421154a9V4vEf&scm=20140722.S_function@@product@@96099._.ID_function@@product@@96099-RL_cdn-LOC_bar-OR_ser-V_3-P0_0\">CDN_内容分发网络_CDN网站加速-阿里云 (aliyun.com)</a></p>\n<p>初七云：<a href=\"https://chuqiyun.com/cart?fid=2&gid=3\">购物车 - 初七云 - 企业级云服务器、高防服务器、香港服务器、免费CDN云计算服务商！ (chuqiyun.com)</a></p>\n<p>CloudFlare：<a href=\"https://www.cloudflare-cn.com/\">Cloudflare 中国官网 | 智能化云服务平台 | 免费CDN安全防护 | Cloudflare (cloudflare-cn.com)</a></p>\n<p>CacheFly：<a href=\"https://www.cachefly.com/\">Trusted CDN Provider | Faster Content Delivery | CacheFly</a></p>\n<p>Gcore：<a href=\"https://gcore.com/zh\">Gcore | 全球托管、CDN、边缘和云服务</a></p>\n<h2 id=\"主题选用\"><a href=\"#主题选用\" class=\"headerlink\" title=\"主题选用\"></a>主题选用</h2><p>尽量选择图片加载量较少的，JS较少的主题，可以显著提升加载速度。这里不列举。</p>\n<h1 id=\"加速层\"><a href=\"#加速层\" class=\"headerlink\" title=\"加速层\"></a>加速层</h1><h2 id=\"JS-CSS-图片静态文件加速\"><a href=\"#JS-CSS-图片静态文件加速\" class=\"headerlink\" title=\"JS&#x2F;CSS&#x2F;图片静态文件加速\"></a>JS&#x2F;CSS&#x2F;图片静态文件加速</h2><p>建议选用WP-Rocket和对象存储+CDN的方式，对CDN路径进行映射，如果没有钱购买WP-Rocket，可以通过WPJAM实现同样的效果。</p>\n<p>对象存储配置（原文地址：<a href=\"https://blog.wpjam.com/m/wpjam-basic-cdn/\">WPJAM Basic 详细介绍：一键实现 WordPress 静态资源 CDN 加速 - WordPress 果酱</a>）：</p>\n<ul>\n<li><a href=\"https://blog.wpjam.com/m/aliyun-oss-cdn/\">WordPress 博客使用阿里云对象存储 OSS 进行静态资源 CDN 加速</a></li>\n<li><a href=\"https://blog.wpjam.com/m/qcloud-cos-cdn/\">WordPress 博客使用腾讯云对象存储 COS 进行静态资源 CDN 加速</a></li>\n<li><a href=\"https://blog.wpjam.com/m/volc-veimagex/\">WordPress 博客使用火山引擎 veImageX 进行静态资源 CDN 加速</a></li>\n</ul>\n<p>然后就可以使用WP-Rocket映射CDN CNAME：</p>\n<p>在 <code>WP Rocket</code>插件设置中，在CDN选项里，启用CDN，并在CDN CNAME中填入配置好的CDN域名，并选中套用到所有文件，如下图：</p>\n<p><img src=\"https://cdnn.boochi.cn/gh/inkdust-dev/ink-oss@main/qexo-upload/2023/8/8-768x342_ae4f2f18235ab0d5ded34c124275f9d3.jpg\" alt=\"https://cdnn.boochi.cn/gh/inkdust-dev/ink-oss@main/qexo-upload/2023/8/8-768x342_ae4f2f18235ab0d5ded34c124275f9d3.jpg\"></p>\n<p>或者在WPJAM中设置：</p>\n<p><img src=\"https://cdn.97866.com/wp-content/uploads/sites/26/2023/05/1684249708-image.png?imageMogr2/auto-orient/thumbnail/!1200x722r/gravity/Center/crop/1200x722/quality/70/interlace/1%7Cwatermark/1/image/aHR0cHM6Ly9jZG4ud3BqYW0uY29tL3dwamFtL3dhdGVybWFyay5wbmc/dissolve/50#\" alt=\"wpjam\"></p>\n<p>设置完成后即可享受快速的CSS&#x2F;JS&#x2F;图片加速。</p>\n<p>WPJAM下载链接：<a href=\"https://cn.wordpress.org/plugins/wpjam-basic/\">WPJAM Basic – WordPress 插件 | WordPress.org China 简体中文</a></p>\n<p>WP-Rocket开心版下载：<a href=\"https://pan.awak.top/s/k5h6\">wp-rocket_v3.14.1.zip - Cloudreve (awak.top)</a></p>\n<h2 id=\"头像-字体-后台加速\"><a href=\"#头像-字体-后台加速\" class=\"headerlink\" title=\"头像&#x2F;字体&#x2F;后台加速\"></a>头像&#x2F;字体&#x2F;后台加速</h2><p>说到后台核心文件加速，我想到了使用WP-China-Yes，但其对谷歌字体的加速已失效，我将其修改到了Google官方的CN镜像地址，同时将Gravatar替换为我自建的SDN地址（FallSoft SDN）。</p>\n<p><img src=\"https://cdnn.boochi.cn/gh/inkdust-dev/ink-oss@main/qexo-upload/2023/8/20230808195915_3bd36a8fd66f78a5ce2033d9ad5407f1.png\" alt=\"https://cdnn.boochi.cn/gh/inkdust-dev/ink-oss@main/qexo-upload/2023/8/20230808195915_3bd36a8fd66f78a5ce2033d9ad5407f1.png\"></p>\n<p>WP-China-Yes自用修改版：<a href=\"https://pan.awak.top/s/l5i5\">wp-china-yes.zip - Cloudreve (awak.top)</a></p>\n<h2 id=\"Opcache\"><a href=\"#Opcache\" class=\"headerlink\" title=\"Opcache\"></a>Opcache</h2><p>宝塔：在宝塔面板中安装PHP扩展Opache即可。</p>\n<p>Oneinstack：<code>./install.sh --php_extensions opcache</code></p>\n<p>LNMP：<a href=\"http://c.biancheng.net/view/1135.html\">LNMP安装php扩展模块（eAccelerator、xCache、memcached、imageMagick和ionCube） (biancheng.net)</a></p>\n<h2 id=\"Redis-Memcached\"><a href=\"#Redis-Memcached\" class=\"headerlink\" title=\"Redis&#x2F;Memcached\"></a>Redis&#x2F;Memcached</h2><h3 id=\"Redis\"><a href=\"#Redis\" class=\"headerlink\" title=\"Redis\"></a>Redis</h3><p>安装Redis：<a href=\"https://www.cnblogs.com/hunanzp/p/12304622.html\">Linux安装部署Redis(超级详细) - 长沙大鹏 - 博客园 (cnblogs.com)</a></p>\n<p>宝塔面板直接在软件商店安装Redis即可。(无需设置)</p>\n<p>安装<a href=\"https://cn.wordpress.org/plugins/redis-cache/\">Redis Object Cache – WordPress 插件</a>。</p>\n<p>开启插件后会自动连接到Redis。</p>\n<h3 id=\"Memcached\"><a href=\"#Memcached\" class=\"headerlink\" title=\"Memcached\"></a>Memcached</h3><p>本人不熟悉，指路：</p>\n<p><a href=\"https://blog.wpjam.com/article/wordpress-memcached/\">使用 Memcached 内存缓存来提高 WordPress 站点速度 - WordPress 果酱 (wpjam.com)</a></p>\n<p><a href=\"https://docs.litespeedtech.com/lscache/lscwp/cache/#object-tab\">Cache | Screen-by-Screen | LSCache for WordPress | LiteSpeed Documentation (litespeedtech.com)</a></p>\n<h2 id=\"Service-Worker\"><a href=\"#Service-Worker\" class=\"headerlink\" title=\"Service Worker\"></a>Service Worker</h2><p>参考自：<a href=\"https://blog.ixk.me/post/wordpress-enabled-service-worker\">为WordPress启用Service Worker | 青空之蓝 (ixk.me)</a></p>\n<h3 id=\"加入-sw-toolbox-核心至-WordPress\"><a href=\"#加入-sw-toolbox-核心至-WordPress\" class=\"headerlink\" title=\"加入 sw-toolbox 核心至 WordPress\"></a>加入 sw-toolbox 核心至 WordPress</h3><p>下载<a href=\"https://cdnn.boochi.cn/gh/inkdust-dev/ink-oss@main/js/sw-toolbox.js\">sw-toolbox.js</a>并且放到博客程序的根目录.</p>\n<h3 id=\"创建缓存规则\"><a href=\"#创建缓存规则\" class=\"headerlink\" title=\"创建缓存规则\"></a>创建缓存规则</h3><p>在博客个目录创建一个serviceworker.js，根据网站情况书写，下面是<a href=\"https://www.galxfans.top/\">GalX次元 - 免费的galgame资源站 (galxfans.top)</a>的Service Worker规则示例：</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br><span class=\"line\">121</span><br><span class=\"line\">122</span><br><span class=\"line\">123</span><br><span class=\"line\">124</span><br><span class=\"line\">125</span><br><span class=\"line\">126</span><br><span class=\"line\">127</span><br><span class=\"line\">128</span><br><span class=\"line\">129</span><br><span class=\"line\">130</span><br><span class=\"line\">131</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs javascript\"><span class=\"hljs-meta\">&quot;use strict&quot;</span>;<br><br>(<span class=\"hljs-keyword\">function</span> (<span class=\"hljs-params\"></span>) &#123;<br>  <span class=\"hljs-string\">&quot;use strict&quot;</span>;<br>  <span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">   * Service Worker Toolbox caching</span><br><span class=\"hljs-comment\">   */</span><br><br>  <span class=\"hljs-keyword\">var</span> cacheVersion = <span class=\"hljs-string\">&quot;-toolbox-v1&quot;</span>;<br>  <span class=\"hljs-keyword\">var</span> dynamicVendorCacheName = <span class=\"hljs-string\">&quot;dynamic-vendor&quot;</span> + cacheVersion;<br>  <span class=\"hljs-keyword\">var</span> staticVendorCacheName = <span class=\"hljs-string\">&quot;static-vendor&quot;</span> + cacheVersion;<br>  <span class=\"hljs-keyword\">var</span> staticAssetsCacheName = <span class=\"hljs-string\">&quot;static-assets&quot;</span> + cacheVersion;<br>  <span class=\"hljs-keyword\">var</span> contentCacheName = <span class=\"hljs-string\">&quot;content&quot;</span> + cacheVersion;<br>  <span class=\"hljs-keyword\">var</span> maxEntries = <span class=\"hljs-number\">50</span>;<br>  <span class=\"hljs-comment\">//以下的网址请更换为博客地址(可以填写绝对链接或者相对链接)</span><br>  self.<span class=\"hljs-title function_\">importScripts</span>(<span class=\"hljs-string\">&quot;https://www.galxfans.top/sw-toolbox.js&quot;</span>);<br>  self.<span class=\"hljs-property\">toolbox</span>.<span class=\"hljs-property\">options</span>.<span class=\"hljs-property\">debug</span> = <span class=\"hljs-literal\">false</span>;<br>  <span class=\"hljs-comment\">//由于我的博客启用Autoptimize，以及WP Super Cache，所以添加Cache目录</span><br><span class=\"hljs-comment\">//   self.toolbox.router.get(&quot;wp-content/cache/(.*)&quot;, self.toolbox.cacheFirst, &#123;</span><br><span class=\"hljs-comment\">//     cache: &#123;</span><br><span class=\"hljs-comment\">//       name: staticAssetsCacheName,</span><br><span class=\"hljs-comment\">//       maxEntries: maxEntries</span><br><span class=\"hljs-comment\">//     &#125;</span><br><span class=\"hljs-comment\">//   &#125;);</span><br>  <span class=\"hljs-comment\">//添加毒瘤jquery的缓存规则</span><br>  self.<span class=\"hljs-property\">toolbox</span>.<span class=\"hljs-property\">router</span>.<span class=\"hljs-title function_\">get</span>(<br>    <span class=\"hljs-string\">&quot;wp-includes/js/jquery/jquery.js&quot;</span>,<br>    self.<span class=\"hljs-property\">toolbox</span>.<span class=\"hljs-property\">cacheFirst</span>,<br>    &#123;<br>      <span class=\"hljs-attr\">cache</span>: &#123;<br>        <span class=\"hljs-attr\">name</span>: staticAssetsCacheName,<br>        <span class=\"hljs-attr\">maxEntries</span>: maxEntries<br>      &#125;<br>    &#125;<br>  );<br>  <span class=\"hljs-comment\">//添加主题的静态资源，具体目录请自行更换</span><br>  self.<span class=\"hljs-property\">toolbox</span>.<span class=\"hljs-property\">router</span>.<span class=\"hljs-title function_\">get</span>(<br>    <span class=\"hljs-string\">&quot;wp-content/themes/Autumn-Pro/static/(.*)&quot;</span>,<br>    self.<span class=\"hljs-property\">toolbox</span>.<span class=\"hljs-property\">cacheFirst</span>,<br>    &#123;<br>      <span class=\"hljs-attr\">cache</span>: &#123;<br>        <span class=\"hljs-attr\">name</span>: staticAssetsCacheName,<br>        <span class=\"hljs-attr\">maxEntries</span>: maxEntries<br>      &#125;<br>    &#125;<br>  );<br>  self.<span class=\"hljs-property\">toolbox</span>.<span class=\"hljs-property\">router</span>.<span class=\"hljs-title function_\">get</span>(<br>    <span class=\"hljs-string\">&quot;wp-includes/css/(.*)&quot;</span>,<br>    self.<span class=\"hljs-property\">toolbox</span>.<span class=\"hljs-property\">cacheFirst</span>,<br>    &#123;<br>      <span class=\"hljs-attr\">cache</span>: &#123;<br>        <span class=\"hljs-attr\">name</span>: staticAssetsCacheName,<br>        <span class=\"hljs-attr\">maxEntries</span>: maxEntries<br>      &#125;<br>    &#125;<br>  );<br>  <span class=\"hljs-comment\">//以下均为第三方资源缓存</span><br>  self.<span class=\"hljs-property\">toolbox</span>.<span class=\"hljs-property\">router</span>.<span class=\"hljs-title function_\">get</span>(<span class=\"hljs-string\">&quot;/(.*)&quot;</span>, self.<span class=\"hljs-property\">toolbox</span>.<span class=\"hljs-property\">cacheFirst</span>, &#123;<br>    <span class=\"hljs-attr\">origin</span>: <span class=\"hljs-regexp\">/cdn2\\.chuqis\\.com/</span>,<br>    <span class=\"hljs-attr\">cache</span>: &#123;<br>      <span class=\"hljs-attr\">name</span>: staticVendorCacheName,<br>      <span class=\"hljs-attr\">maxEntries</span>: maxEntries<br>    &#125;<br>  &#125;);<br><br>  self.<span class=\"hljs-property\">toolbox</span>.<span class=\"hljs-property\">router</span>.<span class=\"hljs-title function_\">get</span>(<span class=\"hljs-string\">&quot;/(.*)&quot;</span>, self.<span class=\"hljs-property\">toolbox</span>.<span class=\"hljs-property\">cacheFirst</span>, &#123;<br>    <span class=\"hljs-attr\">origin</span>: <span class=\"hljs-regexp\">/cdn\\.chuqis\\.com/</span>,<br>    <span class=\"hljs-attr\">cache</span>: &#123;<br>      <span class=\"hljs-attr\">name</span>: staticVendorCacheName,<br>      <span class=\"hljs-attr\">maxEntries</span>: maxEntries<br>    &#125;<br>  &#125;);<br><br>  <span class=\"hljs-comment\">// 缓存 cdn</span><br>  self.<span class=\"hljs-property\">toolbox</span>.<span class=\"hljs-property\">router</span>.<span class=\"hljs-title function_\">get</span>(<span class=\"hljs-string\">&quot;/(.*)&quot;</span>, self.<span class=\"hljs-property\">toolbox</span>.<span class=\"hljs-property\">fastest</span>, &#123;<br>    <span class=\"hljs-attr\">origin</span>: <span class=\"hljs-regexp\">/cdn\\.staticfile\\.org/</span>,<br>    <span class=\"hljs-attr\">cache</span>: &#123;<br>      <span class=\"hljs-attr\">name</span>: staticVendorCacheName,<br>      <span class=\"hljs-attr\">maxEntries</span>: maxEntries<br>    &#125;<br>  &#125;);<br><br>  self.<span class=\"hljs-property\">toolbox</span>.<span class=\"hljs-property\">router</span>.<span class=\"hljs-title function_\">get</span>(<span class=\"hljs-string\">&quot;/(.*)&quot;</span>, self.<span class=\"hljs-property\">toolbox</span>.<span class=\"hljs-property\">fastest</span>, &#123;<br>    <span class=\"hljs-attr\">origin</span>: <span class=\"hljs-regexp\">/cravatar\\.cn/</span>,<br>    <span class=\"hljs-attr\">cache</span>: &#123;<br>      <span class=\"hljs-attr\">name</span>: staticVendorCacheName,<br>      <span class=\"hljs-attr\">maxEntries</span>: maxEntries<br>    &#125;<br>  &#125;);<br>  <br>  self.<span class=\"hljs-property\">toolbox</span>.<span class=\"hljs-property\">router</span>.<span class=\"hljs-title function_\">get</span>(<span class=\"hljs-string\">&quot;/(.*)&quot;</span>, self.<span class=\"hljs-property\">toolbox</span>.<span class=\"hljs-property\">fastest</span>, &#123;<br>    <span class=\"hljs-attr\">origin</span>: <span class=\"hljs-regexp\">/unpkg\\.com/</span>,<br>    <span class=\"hljs-attr\">cache</span>: &#123;<br>      <span class=\"hljs-attr\">name</span>: staticVendorCacheName,<br>      <span class=\"hljs-attr\">maxEntries</span>: maxEntries<br>    &#125;<br>  &#125;);<br>  self.<span class=\"hljs-property\">toolbox</span>.<span class=\"hljs-property\">router</span>.<span class=\"hljs-title function_\">get</span>(<span class=\"hljs-string\">&quot;/(.*)&quot;</span>, self.<span class=\"hljs-property\">toolbox</span>.<span class=\"hljs-property\">fastest</span>, &#123;<br>    <span class=\"hljs-attr\">origin</span>: <span class=\"hljs-regexp\">/img\\.galx\\.umine\\.top/</span>,<br>    <span class=\"hljs-attr\">cache</span>: &#123;<br>      <span class=\"hljs-attr\">name</span>: staticVendorCacheName,<br>      <span class=\"hljs-attr\">maxEntries</span>: maxEntries<br>    &#125;<br>  &#125;);<br>  self.<span class=\"hljs-property\">toolbox</span>.<span class=\"hljs-property\">router</span>.<span class=\"hljs-title function_\">get</span>(<span class=\"hljs-string\">&quot;/(.*)&quot;</span>, self.<span class=\"hljs-property\">toolbox</span>.<span class=\"hljs-property\">fastest</span>, &#123;<br>    <span class=\"hljs-attr\">origin</span>: <span class=\"hljs-regexp\">/inkdustv\\.cachefly\\.net/</span>,<br>    <span class=\"hljs-attr\">cache</span>: &#123;<br>      <span class=\"hljs-attr\">name</span>: staticVendorCacheName,<br>      <span class=\"hljs-attr\">maxEntries</span>: maxEntries<br>    &#125;<br>  &#125;);<br><br><br><span class=\"hljs-comment\">//   self.toolbox.router.get(&quot;/(.*)&quot;, self.toolbox.cacheFirst, &#123;</span><br><span class=\"hljs-comment\">//     origin: /(fonts-gstatic\\.yecdn\\.com|www\\.google-analytics\\.com)/,</span><br><span class=\"hljs-comment\">//     cache: &#123;</span><br><span class=\"hljs-comment\">//       name: staticVendorCacheName,</span><br><span class=\"hljs-comment\">//       maxEntries: maxEntries</span><br><span class=\"hljs-comment\">//     &#125;</span><br><span class=\"hljs-comment\">//   &#125;);</span><br><br>  <span class=\"hljs-comment\">// immediately activate this serviceworker</span><br>  self.<span class=\"hljs-title function_\">addEventListener</span>(<span class=\"hljs-string\">&quot;install&quot;</span>, <span class=\"hljs-keyword\">function</span> (<span class=\"hljs-params\">event</span>) &#123;<br>    <span class=\"hljs-keyword\">return</span> event.<span class=\"hljs-title function_\">waitUntil</span>(self.<span class=\"hljs-title function_\">skipWaiting</span>());<br>  &#125;);<br><br>  self.<span class=\"hljs-title function_\">addEventListener</span>(<span class=\"hljs-string\">&quot;activate&quot;</span>, <span class=\"hljs-keyword\">function</span> (<span class=\"hljs-params\">event</span>) &#123;<br>    <span class=\"hljs-keyword\">return</span> event.<span class=\"hljs-title function_\">waitUntil</span>(self.<span class=\"hljs-property\">clients</span>.<span class=\"hljs-title function_\">claim</span>());<br>  &#125;);<br>&#125;)();<br><br></code></pre></td></tr></table></figure>\n\n<h3 id=\"启用-Service-Workers\"><a href=\"#启用-Service-Workers\" class=\"headerlink\" title=\"启用 Service Workers\"></a>启用 Service Workers</h3><p>打开主题文件所在目录，修改 footer.php，在 <code>&lt;/body&gt;</code> 前加入以下代码:</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs javascript\">&lt;script&gt;<br>  <span class=\"hljs-keyword\">var</span> serviceWorkerUri = <span class=\"hljs-string\">&quot;/serviceworker.js&quot;</span>;<br><br>  <span class=\"hljs-keyword\">if</span> (<span class=\"hljs-string\">&quot;serviceWorker&quot;</span> <span class=\"hljs-keyword\">in</span> navigator) &#123;<br>    navigator.<span class=\"hljs-property\">serviceWorker</span><br>      .<span class=\"hljs-title function_\">register</span>(serviceWorkerUri)<br>      .<span class=\"hljs-title function_\">then</span>(<span class=\"hljs-keyword\">function</span> (<span class=\"hljs-params\"></span>) &#123;<br>        <span class=\"hljs-keyword\">if</span> (navigator.<span class=\"hljs-property\">serviceWorker</span>.<span class=\"hljs-property\">controller</span>) &#123;<br>          <span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(<span class=\"hljs-string\">&quot;Assets cached by the controlling service worker.&quot;</span>);<br>        &#125; <span class=\"hljs-keyword\">else</span> &#123;<br>          <span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(<br>            <span class=\"hljs-string\">&quot;Please reload this page to allow the service worker to handle network operations.&quot;</span><br>          );<br>        &#125;<br>      &#125;)<br>      .<span class=\"hljs-title function_\">catch</span>(<span class=\"hljs-keyword\">function</span> (<span class=\"hljs-params\">error</span>) &#123;<br>        <span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(<span class=\"hljs-string\">&quot;ERROR: &quot;</span> + error);<br>      &#125;);<br>  &#125; <span class=\"hljs-keyword\">else</span> &#123;<br>    <span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(<span class=\"hljs-string\">&quot;Service workers are not supported in the current browser.&quot;</span>);<br>  &#125;<br>&lt;/script&gt;<br><br></code></pre></td></tr></table></figure>\n\n<p>即刻享受Service Worker毫秒级响应加速。</p>\n<p>更多加速方法，请自行探索！</p>\n","excerpt":"","more":"<p>从七个个角度优化你的个人&#x2F;商务WordPress博客。</p>\n<h1 id=\"选用层\"><a href=\"#选用层\" class=\"headerlink\" title=\"选用层\"></a>选用层</h1><h2 id=\"服务器选用\"><a href=\"#服务器选用\" class=\"headerlink\" title=\"服务器选用\"></a>服务器选用</h2><p>若你想在中国大陆地区获得良好的速度优化，建议你购买国内服务器并完成 <code>网站备案</code>后，再开始部署你的WordPress博客程序。</p>\n<p>腾讯云网站备案指南：<a href=\"https://cloud.tencent.com/document/product/243/39038\">网站备案 如何快速备案您的网站-快速入门-文档中心-腾讯云 (tencent.com)</a></p>\n<p>阿里云网站备案指南：<a href=\"https://help.aliyun.com/zh/icp-filing/user-guide/?spm=a2c4g.11186623.0.0.38a81d9cGvrtAA\">操作指南_备案-阿里云帮助中心 (aliyun.com)</a></p>\n<p>百度云网站备案指南：<a href=\"https://cloud.baidu.com/doc/BeiAn/index.html\">ICP备案服务-百度智能云 (baidu.com)</a></p>\n<p>网易云网站备案指南；<a href=\"https://sf.163.com/help/documents/190221998684819456\">首次备案教程_域名与备案_产品文档_帮助与文档-网易数帆 (163.com)</a></p>\n<p>七牛云网站备案指南：<a href=\"https://developer.qiniu.com/qvm/4184/qvm-first-guide\">首次备案指南_使用指南_云主机 - 七牛开发者中心 (qiniu.com)</a></p>\n<p>工业和信息化部政务服务平台（ICP&#x2F;IP地址&#x2F;域名信息备案管理系统）：<a href=\"https://beian.miit.gov.cn/#/Integrated/index\">ICP&#x2F;IP地址&#x2F;域名信息备案管理系统 (miit.gov.cn)</a></p>\n<p>腾讯云轻量应用服务器购买（无AFF）：<a href=\"https://cloud.tencent.com/product/lighthouse\">轻量应用服务器Lighthouse_香港轻量服务器_海外轻量服务器-腾讯云 (tencent.com)</a></p>\n<p>腾讯云CVM云服务器购买（无AFF）：<a href=\"https://cloud.tencent.com/product/cvm\">云服务器CVM_云主机_云计算服务器_弹性云服务器-腾讯云 (tencent.com)</a></p>\n<p>腾讯云GPU服务器购买（无AFF）：<a href=\"https://cloud.tencent.com/product/gpu\">GPU云服务器_并行计算_弹性计算_人工智能_深度学习-腾讯云 (tencent.com)</a></p>\n<p>阿里云轻量应用服务器购买（无AFF）：<a href=\"https://www.aliyun.com/product/swas?spm=5176.28055625.J_3207526240.20.5421154aQbMvxH&scm=20140722.S_function@@product@@65233._.ID_function@@product@@65233-RL_%E8%BD%BB%E9%87%8F-LOC_bar-OR_ser-V_3-P0_0\">轻量应用服务器_web服务器_个人建站_弹性计算-阿里云 (aliyun.com)</a></p>\n<p>阿里云ECS云服务器购买（无AFF）：<a href=\"https://www.aliyun.com/product/ecs?spm=5176.21213303.744563.1.cb5153c90W1CYv&scm=20140722.S_card@@%E4%BA%A7%E5%93%81@@163972.S_card0.ID_card@@%E4%BA%A7%E5%93%81@@163972-RL_%E4%BA%91%E6%9C%8D%E5%8A%A1%E5%99%A8%20ECS-OR_ser-V_3-P0_0\">云服务器ECS_云主机_服务器托管_弹性计算-阿里云 (aliyun.com)</a></p>\n<p>百度云轻量应用服务器LS购买（无AFF）：<a href=\"https://cloud.baidu.com/product/lightserver.html\">轻量应用服务器 LS_web服务器_小规格云服务器-百度智能云 (baidu.com)</a></p>\n<p>百度云云服务器BCC购买（无AFF）：<a href=\"https://cloud.baidu.com/product/lightserver.html\">轻量应用服务器 LS_web服务器_小规格云服务器-百度智能云 (baidu.com)</a></p>\n<p>其他IDC云服务商的服务器暂不列出。</p>\n<p>若你想在中国大陆地区获得良好的速度优化，且不想进行繁杂的网站备案，建议选择亚洲地区的云服务器&#x2F;ECS&#x2F;轻量应用服务器&#x2F;VPS，此处不再列举。</p>\n<p>若你不想在中国大陆地区获得良好的速度优化，请关闭这篇文章。</p>\n<h2 id=\"CDN选用\"><a href=\"#CDN选用\" class=\"headerlink\" title=\"CDN选用\"></a>CDN选用</h2><p>良好的CDN不仅可以为网站提速，还可以隐藏源站IP地址，保护服务器不受恶意攻击。</p>\n<p>关于CDN的选用，可以在各大搜索引擎上搜索到，国内已备案建议选择国内CDN，未备案则只能选择国外CDN。</p>\n<p>我个人常用的几个CDN提供商：</p>\n<p>腾讯云：<a href=\"https://cloud.tencent.com/product/cdn\">CDN 内容分发网络 _CDN内容加速_CDN加速-腾讯云 (tencent.com)</a></p>\n<p>阿里云：<a href=\"https://www.aliyun.com/product/cdn?spm=5176.28055625.J_3207526240.50.5421154a9V4vEf&scm=20140722.S_function@@product@@96099._.ID_function@@product@@96099-RL_cdn-LOC_bar-OR_ser-V_3-P0_0\">CDN_内容分发网络_CDN网站加速-阿里云 (aliyun.com)</a></p>\n<p>初七云：<a href=\"https://chuqiyun.com/cart?fid=2&gid=3\">购物车 - 初七云 - 企业级云服务器、高防服务器、香港服务器、免费CDN云计算服务商！ (chuqiyun.com)</a></p>\n<p>CloudFlare：<a href=\"https://www.cloudflare-cn.com/\">Cloudflare 中国官网 | 智能化云服务平台 | 免费CDN安全防护 | Cloudflare (cloudflare-cn.com)</a></p>\n<p>CacheFly：<a href=\"https://www.cachefly.com/\">Trusted CDN Provider | Faster Content Delivery | CacheFly</a></p>\n<p>Gcore：<a href=\"https://gcore.com/zh\">Gcore | 全球托管、CDN、边缘和云服务</a></p>\n<h2 id=\"主题选用\"><a href=\"#主题选用\" class=\"headerlink\" title=\"主题选用\"></a>主题选用</h2><p>尽量选择图片加载量较少的，JS较少的主题，可以显著提升加载速度。这里不列举。</p>\n<h1 id=\"加速层\"><a href=\"#加速层\" class=\"headerlink\" title=\"加速层\"></a>加速层</h1><h2 id=\"JS-CSS-图片静态文件加速\"><a href=\"#JS-CSS-图片静态文件加速\" class=\"headerlink\" title=\"JS&#x2F;CSS&#x2F;图片静态文件加速\"></a>JS&#x2F;CSS&#x2F;图片静态文件加速</h2><p>建议选用WP-Rocket和对象存储+CDN的方式，对CDN路径进行映射，如果没有钱购买WP-Rocket，可以通过WPJAM实现同样的效果。</p>\n<p>对象存储配置（原文地址：<a href=\"https://blog.wpjam.com/m/wpjam-basic-cdn/\">WPJAM Basic 详细介绍：一键实现 WordPress 静态资源 CDN 加速 - WordPress 果酱</a>）：</p>\n<ul>\n<li><a href=\"https://blog.wpjam.com/m/aliyun-oss-cdn/\">WordPress 博客使用阿里云对象存储 OSS 进行静态资源 CDN 加速</a></li>\n<li><a href=\"https://blog.wpjam.com/m/qcloud-cos-cdn/\">WordPress 博客使用腾讯云对象存储 COS 进行静态资源 CDN 加速</a></li>\n<li><a href=\"https://blog.wpjam.com/m/volc-veimagex/\">WordPress 博客使用火山引擎 veImageX 进行静态资源 CDN 加速</a></li>\n</ul>\n<p>然后就可以使用WP-Rocket映射CDN CNAME：</p>\n<p>在 <code>WP Rocket</code>插件设置中，在CDN选项里，启用CDN，并在CDN CNAME中填入配置好的CDN域名，并选中套用到所有文件，如下图：</p>\n<p><img src=\"https://cdnn.boochi.cn/gh/inkdust-dev/ink-oss@main/qexo-upload/2023/8/8-768x342_ae4f2f18235ab0d5ded34c124275f9d3.jpg\" alt=\"https://cdnn.boochi.cn/gh/inkdust-dev/ink-oss@main/qexo-upload/2023/8/8-768x342_ae4f2f18235ab0d5ded34c124275f9d3.jpg\"></p>\n<p>或者在WPJAM中设置：</p>\n<p><img src=\"https://cdn.97866.com/wp-content/uploads/sites/26/2023/05/1684249708-image.png?imageMogr2/auto-orient/thumbnail/!1200x722r/gravity/Center/crop/1200x722/quality/70/interlace/1%7Cwatermark/1/image/aHR0cHM6Ly9jZG4ud3BqYW0uY29tL3dwamFtL3dhdGVybWFyay5wbmc/dissolve/50#\" alt=\"wpjam\"></p>\n<p>设置完成后即可享受快速的CSS&#x2F;JS&#x2F;图片加速。</p>\n<p>WPJAM下载链接：<a href=\"https://cn.wordpress.org/plugins/wpjam-basic/\">WPJAM Basic – WordPress 插件 | WordPress.org China 简体中文</a></p>\n<p>WP-Rocket开心版下载：<a href=\"https://pan.awak.top/s/k5h6\">wp-rocket_v3.14.1.zip - Cloudreve (awak.top)</a></p>\n<h2 id=\"头像-字体-后台加速\"><a href=\"#头像-字体-后台加速\" class=\"headerlink\" title=\"头像&#x2F;字体&#x2F;后台加速\"></a>头像&#x2F;字体&#x2F;后台加速</h2><p>说到后台核心文件加速，我想到了使用WP-China-Yes，但其对谷歌字体的加速已失效，我将其修改到了Google官方的CN镜像地址，同时将Gravatar替换为我自建的SDN地址（FallSoft SDN）。</p>\n<p><img src=\"https://cdnn.boochi.cn/gh/inkdust-dev/ink-oss@main/qexo-upload/2023/8/20230808195915_3bd36a8fd66f78a5ce2033d9ad5407f1.png\" alt=\"https://cdnn.boochi.cn/gh/inkdust-dev/ink-oss@main/qexo-upload/2023/8/20230808195915_3bd36a8fd66f78a5ce2033d9ad5407f1.png\"></p>\n<p>WP-China-Yes自用修改版：<a href=\"https://pan.awak.top/s/l5i5\">wp-china-yes.zip - Cloudreve (awak.top)</a></p>\n<h2 id=\"Opcache\"><a href=\"#Opcache\" class=\"headerlink\" title=\"Opcache\"></a>Opcache</h2><p>宝塔：在宝塔面板中安装PHP扩展Opache即可。</p>\n<p>Oneinstack：<code>./install.sh --php_extensions opcache</code></p>\n<p>LNMP：<a href=\"http://c.biancheng.net/view/1135.html\">LNMP安装php扩展模块（eAccelerator、xCache、memcached、imageMagick和ionCube） (biancheng.net)</a></p>\n<h2 id=\"Redis-Memcached\"><a href=\"#Redis-Memcached\" class=\"headerlink\" title=\"Redis&#x2F;Memcached\"></a>Redis&#x2F;Memcached</h2><h3 id=\"Redis\"><a href=\"#Redis\" class=\"headerlink\" title=\"Redis\"></a>Redis</h3><p>安装Redis：<a href=\"https://www.cnblogs.com/hunanzp/p/12304622.html\">Linux安装部署Redis(超级详细) - 长沙大鹏 - 博客园 (cnblogs.com)</a></p>\n<p>宝塔面板直接在软件商店安装Redis即可。(无需设置)</p>\n<p>安装<a href=\"https://cn.wordpress.org/plugins/redis-cache/\">Redis Object Cache – WordPress 插件</a>。</p>\n<p>开启插件后会自动连接到Redis。</p>\n<h3 id=\"Memcached\"><a href=\"#Memcached\" class=\"headerlink\" title=\"Memcached\"></a>Memcached</h3><p>本人不熟悉，指路：</p>\n<p><a href=\"https://blog.wpjam.com/article/wordpress-memcached/\">使用 Memcached 内存缓存来提高 WordPress 站点速度 - WordPress 果酱 (wpjam.com)</a></p>\n<p><a href=\"https://docs.litespeedtech.com/lscache/lscwp/cache/#object-tab\">Cache | Screen-by-Screen | LSCache for WordPress | LiteSpeed Documentation (litespeedtech.com)</a></p>\n<h2 id=\"Service-Worker\"><a href=\"#Service-Worker\" class=\"headerlink\" title=\"Service Worker\"></a>Service Worker</h2><p>参考自：<a href=\"https://blog.ixk.me/post/wordpress-enabled-service-worker\">为WordPress启用Service Worker | 青空之蓝 (ixk.me)</a></p>\n<h3 id=\"加入-sw-toolbox-核心至-WordPress\"><a href=\"#加入-sw-toolbox-核心至-WordPress\" class=\"headerlink\" title=\"加入 sw-toolbox 核心至 WordPress\"></a>加入 sw-toolbox 核心至 WordPress</h3><p>下载<a href=\"https://cdnn.boochi.cn/gh/inkdust-dev/ink-oss@main/js/sw-toolbox.js\">sw-toolbox.js</a>并且放到博客程序的根目录.</p>\n<h3 id=\"创建缓存规则\"><a href=\"#创建缓存规则\" class=\"headerlink\" title=\"创建缓存规则\"></a>创建缓存规则</h3><p>在博客个目录创建一个serviceworker.js，根据网站情况书写，下面是<a href=\"https://www.galxfans.top/\">GalX次元 - 免费的galgame资源站 (galxfans.top)</a>的Service Worker规则示例：</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br><span class=\"line\">121</span><br><span class=\"line\">122</span><br><span class=\"line\">123</span><br><span class=\"line\">124</span><br><span class=\"line\">125</span><br><span class=\"line\">126</span><br><span class=\"line\">127</span><br><span class=\"line\">128</span><br><span class=\"line\">129</span><br><span class=\"line\">130</span><br><span class=\"line\">131</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs javascript\"><span class=\"hljs-meta\">&quot;use strict&quot;</span>;<br><br>(<span class=\"hljs-keyword\">function</span> (<span class=\"hljs-params\"></span>) &#123;<br>  <span class=\"hljs-string\">&quot;use strict&quot;</span>;<br>  <span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">   * Service Worker Toolbox caching</span><br><span class=\"hljs-comment\">   */</span><br><br>  <span class=\"hljs-keyword\">var</span> cacheVersion = <span class=\"hljs-string\">&quot;-toolbox-v1&quot;</span>;<br>  <span class=\"hljs-keyword\">var</span> dynamicVendorCacheName = <span class=\"hljs-string\">&quot;dynamic-vendor&quot;</span> + cacheVersion;<br>  <span class=\"hljs-keyword\">var</span> staticVendorCacheName = <span class=\"hljs-string\">&quot;static-vendor&quot;</span> + cacheVersion;<br>  <span class=\"hljs-keyword\">var</span> staticAssetsCacheName = <span class=\"hljs-string\">&quot;static-assets&quot;</span> + cacheVersion;<br>  <span class=\"hljs-keyword\">var</span> contentCacheName = <span class=\"hljs-string\">&quot;content&quot;</span> + cacheVersion;<br>  <span class=\"hljs-keyword\">var</span> maxEntries = <span class=\"hljs-number\">50</span>;<br>  <span class=\"hljs-comment\">//以下的网址请更换为博客地址(可以填写绝对链接或者相对链接)</span><br>  self.<span class=\"hljs-title function_\">importScripts</span>(<span class=\"hljs-string\">&quot;https://www.galxfans.top/sw-toolbox.js&quot;</span>);<br>  self.<span class=\"hljs-property\">toolbox</span>.<span class=\"hljs-property\">options</span>.<span class=\"hljs-property\">debug</span> = <span class=\"hljs-literal\">false</span>;<br>  <span class=\"hljs-comment\">//由于我的博客启用Autoptimize，以及WP Super Cache，所以添加Cache目录</span><br><span class=\"hljs-comment\">//   self.toolbox.router.get(&quot;wp-content/cache/(.*)&quot;, self.toolbox.cacheFirst, &#123;</span><br><span class=\"hljs-comment\">//     cache: &#123;</span><br><span class=\"hljs-comment\">//       name: staticAssetsCacheName,</span><br><span class=\"hljs-comment\">//       maxEntries: maxEntries</span><br><span class=\"hljs-comment\">//     &#125;</span><br><span class=\"hljs-comment\">//   &#125;);</span><br>  <span class=\"hljs-comment\">//添加毒瘤jquery的缓存规则</span><br>  self.<span class=\"hljs-property\">toolbox</span>.<span class=\"hljs-property\">router</span>.<span class=\"hljs-title function_\">get</span>(<br>    <span class=\"hljs-string\">&quot;wp-includes/js/jquery/jquery.js&quot;</span>,<br>    self.<span class=\"hljs-property\">toolbox</span>.<span class=\"hljs-property\">cacheFirst</span>,<br>    &#123;<br>      <span class=\"hljs-attr\">cache</span>: &#123;<br>        <span class=\"hljs-attr\">name</span>: staticAssetsCacheName,<br>        <span class=\"hljs-attr\">maxEntries</span>: maxEntries<br>      &#125;<br>    &#125;<br>  );<br>  <span class=\"hljs-comment\">//添加主题的静态资源，具体目录请自行更换</span><br>  self.<span class=\"hljs-property\">toolbox</span>.<span class=\"hljs-property\">router</span>.<span class=\"hljs-title function_\">get</span>(<br>    <span class=\"hljs-string\">&quot;wp-content/themes/Autumn-Pro/static/(.*)&quot;</span>,<br>    self.<span class=\"hljs-property\">toolbox</span>.<span class=\"hljs-property\">cacheFirst</span>,<br>    &#123;<br>      <span class=\"hljs-attr\">cache</span>: &#123;<br>        <span class=\"hljs-attr\">name</span>: staticAssetsCacheName,<br>        <span class=\"hljs-attr\">maxEntries</span>: maxEntries<br>      &#125;<br>    &#125;<br>  );<br>  self.<span class=\"hljs-property\">toolbox</span>.<span class=\"hljs-property\">router</span>.<span class=\"hljs-title function_\">get</span>(<br>    <span class=\"hljs-string\">&quot;wp-includes/css/(.*)&quot;</span>,<br>    self.<span class=\"hljs-property\">toolbox</span>.<span class=\"hljs-property\">cacheFirst</span>,<br>    &#123;<br>      <span class=\"hljs-attr\">cache</span>: &#123;<br>        <span class=\"hljs-attr\">name</span>: staticAssetsCacheName,<br>        <span class=\"hljs-attr\">maxEntries</span>: maxEntries<br>      &#125;<br>    &#125;<br>  );<br>  <span class=\"hljs-comment\">//以下均为第三方资源缓存</span><br>  self.<span class=\"hljs-property\">toolbox</span>.<span class=\"hljs-property\">router</span>.<span class=\"hljs-title function_\">get</span>(<span class=\"hljs-string\">&quot;/(.*)&quot;</span>, self.<span class=\"hljs-property\">toolbox</span>.<span class=\"hljs-property\">cacheFirst</span>, &#123;<br>    <span class=\"hljs-attr\">origin</span>: <span class=\"hljs-regexp\">/cdn2\\.chuqis\\.com/</span>,<br>    <span class=\"hljs-attr\">cache</span>: &#123;<br>      <span class=\"hljs-attr\">name</span>: staticVendorCacheName,<br>      <span class=\"hljs-attr\">maxEntries</span>: maxEntries<br>    &#125;<br>  &#125;);<br><br>  self.<span class=\"hljs-property\">toolbox</span>.<span class=\"hljs-property\">router</span>.<span class=\"hljs-title function_\">get</span>(<span class=\"hljs-string\">&quot;/(.*)&quot;</span>, self.<span class=\"hljs-property\">toolbox</span>.<span class=\"hljs-property\">cacheFirst</span>, &#123;<br>    <span class=\"hljs-attr\">origin</span>: <span class=\"hljs-regexp\">/cdn\\.chuqis\\.com/</span>,<br>    <span class=\"hljs-attr\">cache</span>: &#123;<br>      <span class=\"hljs-attr\">name</span>: staticVendorCacheName,<br>      <span class=\"hljs-attr\">maxEntries</span>: maxEntries<br>    &#125;<br>  &#125;);<br><br>  <span class=\"hljs-comment\">// 缓存 cdn</span><br>  self.<span class=\"hljs-property\">toolbox</span>.<span class=\"hljs-property\">router</span>.<span class=\"hljs-title function_\">get</span>(<span class=\"hljs-string\">&quot;/(.*)&quot;</span>, self.<span class=\"hljs-property\">toolbox</span>.<span class=\"hljs-property\">fastest</span>, &#123;<br>    <span class=\"hljs-attr\">origin</span>: <span class=\"hljs-regexp\">/cdn\\.staticfile\\.org/</span>,<br>    <span class=\"hljs-attr\">cache</span>: &#123;<br>      <span class=\"hljs-attr\">name</span>: staticVendorCacheName,<br>      <span class=\"hljs-attr\">maxEntries</span>: maxEntries<br>    &#125;<br>  &#125;);<br><br>  self.<span class=\"hljs-property\">toolbox</span>.<span class=\"hljs-property\">router</span>.<span class=\"hljs-title function_\">get</span>(<span class=\"hljs-string\">&quot;/(.*)&quot;</span>, self.<span class=\"hljs-property\">toolbox</span>.<span class=\"hljs-property\">fastest</span>, &#123;<br>    <span class=\"hljs-attr\">origin</span>: <span class=\"hljs-regexp\">/cravatar\\.cn/</span>,<br>    <span class=\"hljs-attr\">cache</span>: &#123;<br>      <span class=\"hljs-attr\">name</span>: staticVendorCacheName,<br>      <span class=\"hljs-attr\">maxEntries</span>: maxEntries<br>    &#125;<br>  &#125;);<br>  <br>  self.<span class=\"hljs-property\">toolbox</span>.<span class=\"hljs-property\">router</span>.<span class=\"hljs-title function_\">get</span>(<span class=\"hljs-string\">&quot;/(.*)&quot;</span>, self.<span class=\"hljs-property\">toolbox</span>.<span class=\"hljs-property\">fastest</span>, &#123;<br>    <span class=\"hljs-attr\">origin</span>: <span class=\"hljs-regexp\">/unpkg\\.com/</span>,<br>    <span class=\"hljs-attr\">cache</span>: &#123;<br>      <span class=\"hljs-attr\">name</span>: staticVendorCacheName,<br>      <span class=\"hljs-attr\">maxEntries</span>: maxEntries<br>    &#125;<br>  &#125;);<br>  self.<span class=\"hljs-property\">toolbox</span>.<span class=\"hljs-property\">router</span>.<span class=\"hljs-title function_\">get</span>(<span class=\"hljs-string\">&quot;/(.*)&quot;</span>, self.<span class=\"hljs-property\">toolbox</span>.<span class=\"hljs-property\">fastest</span>, &#123;<br>    <span class=\"hljs-attr\">origin</span>: <span class=\"hljs-regexp\">/img\\.galx\\.umine\\.top/</span>,<br>    <span class=\"hljs-attr\">cache</span>: &#123;<br>      <span class=\"hljs-attr\">name</span>: staticVendorCacheName,<br>      <span class=\"hljs-attr\">maxEntries</span>: maxEntries<br>    &#125;<br>  &#125;);<br>  self.<span class=\"hljs-property\">toolbox</span>.<span class=\"hljs-property\">router</span>.<span class=\"hljs-title function_\">get</span>(<span class=\"hljs-string\">&quot;/(.*)&quot;</span>, self.<span class=\"hljs-property\">toolbox</span>.<span class=\"hljs-property\">fastest</span>, &#123;<br>    <span class=\"hljs-attr\">origin</span>: <span class=\"hljs-regexp\">/inkdustv\\.cachefly\\.net/</span>,<br>    <span class=\"hljs-attr\">cache</span>: &#123;<br>      <span class=\"hljs-attr\">name</span>: staticVendorCacheName,<br>      <span class=\"hljs-attr\">maxEntries</span>: maxEntries<br>    &#125;<br>  &#125;);<br><br><br><span class=\"hljs-comment\">//   self.toolbox.router.get(&quot;/(.*)&quot;, self.toolbox.cacheFirst, &#123;</span><br><span class=\"hljs-comment\">//     origin: /(fonts-gstatic\\.yecdn\\.com|www\\.google-analytics\\.com)/,</span><br><span class=\"hljs-comment\">//     cache: &#123;</span><br><span class=\"hljs-comment\">//       name: staticVendorCacheName,</span><br><span class=\"hljs-comment\">//       maxEntries: maxEntries</span><br><span class=\"hljs-comment\">//     &#125;</span><br><span class=\"hljs-comment\">//   &#125;);</span><br><br>  <span class=\"hljs-comment\">// immediately activate this serviceworker</span><br>  self.<span class=\"hljs-title function_\">addEventListener</span>(<span class=\"hljs-string\">&quot;install&quot;</span>, <span class=\"hljs-keyword\">function</span> (<span class=\"hljs-params\">event</span>) &#123;<br>    <span class=\"hljs-keyword\">return</span> event.<span class=\"hljs-title function_\">waitUntil</span>(self.<span class=\"hljs-title function_\">skipWaiting</span>());<br>  &#125;);<br><br>  self.<span class=\"hljs-title function_\">addEventListener</span>(<span class=\"hljs-string\">&quot;activate&quot;</span>, <span class=\"hljs-keyword\">function</span> (<span class=\"hljs-params\">event</span>) &#123;<br>    <span class=\"hljs-keyword\">return</span> event.<span class=\"hljs-title function_\">waitUntil</span>(self.<span class=\"hljs-property\">clients</span>.<span class=\"hljs-title function_\">claim</span>());<br>  &#125;);<br>&#125;)();<br><br></code></pre></td></tr></table></figure>\n\n<h3 id=\"启用-Service-Workers\"><a href=\"#启用-Service-Workers\" class=\"headerlink\" title=\"启用 Service Workers\"></a>启用 Service Workers</h3><p>打开主题文件所在目录，修改 footer.php，在 <code>&lt;/body&gt;</code> 前加入以下代码:</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs javascript\">&lt;script&gt;<br>  <span class=\"hljs-keyword\">var</span> serviceWorkerUri = <span class=\"hljs-string\">&quot;/serviceworker.js&quot;</span>;<br><br>  <span class=\"hljs-keyword\">if</span> (<span class=\"hljs-string\">&quot;serviceWorker&quot;</span> <span class=\"hljs-keyword\">in</span> navigator) &#123;<br>    navigator.<span class=\"hljs-property\">serviceWorker</span><br>      .<span class=\"hljs-title function_\">register</span>(serviceWorkerUri)<br>      .<span class=\"hljs-title function_\">then</span>(<span class=\"hljs-keyword\">function</span> (<span class=\"hljs-params\"></span>) &#123;<br>        <span class=\"hljs-keyword\">if</span> (navigator.<span class=\"hljs-property\">serviceWorker</span>.<span class=\"hljs-property\">controller</span>) &#123;<br>          <span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(<span class=\"hljs-string\">&quot;Assets cached by the controlling service worker.&quot;</span>);<br>        &#125; <span class=\"hljs-keyword\">else</span> &#123;<br>          <span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(<br>            <span class=\"hljs-string\">&quot;Please reload this page to allow the service worker to handle network operations.&quot;</span><br>          );<br>        &#125;<br>      &#125;)<br>      .<span class=\"hljs-title function_\">catch</span>(<span class=\"hljs-keyword\">function</span> (<span class=\"hljs-params\">error</span>) &#123;<br>        <span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(<span class=\"hljs-string\">&quot;ERROR: &quot;</span> + error);<br>      &#125;);<br>  &#125; <span class=\"hljs-keyword\">else</span> &#123;<br>    <span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(<span class=\"hljs-string\">&quot;Service workers are not supported in the current browser.&quot;</span>);<br>  &#125;<br>&lt;/script&gt;<br><br></code></pre></td></tr></table></figure>\n\n<p>即刻享受Service Worker毫秒级响应加速。</p>\n<p>更多加速方法，请自行探索！</p>\n"},{"abbrlink":"","index_img":"https://cdnn.boochi.cn/gh/inkdust-dev/ink-oss@main/qexo-upload/24/8/zerossl-ssl_646c1327b09c5fd73ab7de952c42df84.png","date":"2024-08-12T09:51:02.708Z","title":"SSL系列二之快速签发免费ZeroSSL泛域名证书","updated":"2024-08-12T10:24:22.549Z","_content":"## 引入\n\n现如今，向像腾讯，阿里云等大厂的免费SSL证书，都由一年缩短为3个月。\n\n[https://cloud.tencent.com/document/product/400/104538](https://cloud.tencent.com/document/product/400/104538)\n\n在如今的形式下，签发免费的3个月的单域名证书显然不如直接签发Let's Encrypt、ZeroSSL等ACME提供的泛域名证书来的方便。\n\n而acme.sh常用于Linux端上证书的自动化签发与续约，对于不使用服务器的人群，显然造成了许多麻烦，那么可以通过Web端直接签发这些ACME的泛域名证书吗？\n\nGithub开源项目ACME-Web-Browser-Client告诉了我们这并非是一件不可能实现的事情。\n\n简介：\n\n本网页客户端（仅一个静态HTML网页文件）用于：向 Let's Encrypt、ZeroSSL、Google 等支持 ACME 协议的证书颁发机构，免费申请获得用于 HTTPS 的 SSL/TLS 域名证书（RSA、ECC/ECDSA），支持多域名和通配符泛域名；只需在现代浏览器上操作即可获得 PEM 格式纯文本的域名证书，不依赖操作系统环境（Windows、macOS都能用），无需下载和安装软件，无需注册登录，纯手动操作，只专注于申请获得证书这一件事，简单易用，非常适用于希望手动快捷申请获得证书的使用场景。\n\nGithub开源地址：[https://github.com/xiangyuecn/ACME-HTML-Web-Browser-Client](https://github.com/xiangyuecn/ACME-HTML-Web-Browser-Client)\n\nGitee开源地址：\n\nhttps://gitee.com/xiangyuecn/ACME-HTML-Web-Browser-Client\n\n## 使用\n\n提示：可将其私有化部署到Vercel，Netlify等上，可弥补Github Pages速度的不足。\n\n任意点击下列一个网页使用：\n\nhttps://xiangyuecn.github.io/ACME-HTML-Web-Browser-Client/ACME-HTML-Web-Browser-Client.html （作者Github Pages）\n\nhttps://ssl.dev.inkdust.top/ （本人Vercel）\n\n## 签发ZeroSSL\n\n本文为签发ZeroSSL篇教程，签发Let's Encrypt或Google，请看Let's Encrypt篇和Google篇。\n\n### 步骤一：注册ZeroSSL\n\n来到https://zerossl.com/\n\n注册ZeroSSL，请使用魔法网络环境，如无法使用魔法网络环境，请使用`Header Eidtor` 来将 `reCAPTCHA`的地址重写到国内镜像。\n\nHeader Eidtor谷歌商店：https://chromewebstore.google.com/detail/header-editor/eningockdidmgiojffjmkdblpjocbhgh?hl=zh-CN&utm_source=ext_sidebar\n\nHeader Eidtor Edge商店：https://microsoftedge.microsoft.com/addons/detail/header-editor/djbcdihpmcbpkljpjibeiedjenilallo\n\nHeader Eidtor Crx搜搜：https://www.crxsoso.com/webstore/detail/eningockdidmgiojffjmkdblpjocbhgh\n![https://cdnn.boochi.cn/gh/inkdust-dev/ink-oss@main/qexo-upload/24/8/image_38fa68a496e6a63cd50b294b0776d192.png](https://cdnn.boochi.cn/gh/inkdust-dev/ink-oss@main/qexo-upload/24/8/image_38fa68a496e6a63cd50b294b0776d192.png)\n\n重写规则：\n\n```plaintext\n名称：reCAPTCHA\n\n匹配类型：正则表达式\n\n规则类型：重定向规则\n\n匹配规则：^http(s?)://(?:www\\.|recaptcha\\.|)google\\.com/recaptcha/(.*)\n\n执行类型：常规\n\n重定向至：https://recaptcha.net/recaptcha/$2\n```\n\n导入TXT文件：\n\n```plaintext\n{\n\t\"request\": [],\n\t\"sendHeader\": [],\n\t\"receiveHeader\": [\n\t\t{\n\t\t\t\"enable\": false,\n\t\t\t\"name\": \"Content Security Policy Header Modification\",\n\t\t\t\"ruleType\": \"modifyReceiveHeader\",\n\t\t\t\"matchType\": \"all\",\n\t\t\t\"pattern\": \"\",\n\t\t\t\"exclude\": \"\",\n\t\t\t\"isFunction\": true,\n\t\t\t\"code\": \"let rt = detail.type;\\nif (rt === 'script' || rt === 'stylesheet' || rt === 'main_frame' || rt === 'sub_frame') {\\n  for (let i in val) {\\n    if (val[i].name.toLowerCase() === 'content-security-policy') {\\n      let s = val[i].value;\\n      s = s.replace(/googleapis\\\\.com/g, '$& https://gapis.geekzu.org');\\n      s = s.replace(/recaptcha\\\\.google\\\\.com/g, '$& https://recaptcha.net');\\n      s = s.replace(/google\\\\.com/g, '$& https://recaptcha.net');\\n      s = s.replace(/gstatic\\\\.com/g, '$& https://*.gstatic.cn');\\n      val[i].value = s;\\n    }\\n  }\\n}\",\n\t\t\t\"group\": \"未分组\"\n\t\t}\n\t],\n\t\"receiveBody\": []\n}\n```\n\n![https://cdnn.boochi.cn/gh/inkdust-dev/ink-oss@main/qexo-upload/24/8/image_18ab541cb20291a0419ffeb09a1c83bf.png](https://cdnn.boochi.cn/gh/inkdust-dev/ink-oss@main/qexo-upload/24/8/image_18ab541cb20291a0419ffeb09a1c83bf.png)\n\n注册，并登录ZeroSSL。点击`Developers`,`EAB Credentials for ACME Clients`下方的`Generate`,保存好生成的**EAB KID**和**EAB HMAC Key**。\n![https://cdnn.boochi.cn/gh/inkdust-dev/ink-oss@main/qexo-upload/24/8/image_d8176d5822392d6870b8b1f38becddd3.png](https://cdnn.boochi.cn/gh/inkdust-dev/ink-oss@main/qexo-upload/24/8/image_d8176d5822392d6870b8b1f38becddd3.png)\n\n任意点击下列一个网页打开签发SSL：\n\nhttps://xiangyuecn.github.io/ACME-HTML-Web-Browser-Client/ACME-HTML-Web-Browser-Client.html （作者Github Pages）\n\nhttps://ssl.dev.inkdust.top/ （本人Vercel）\n\n### 步骤二：选择证书颁发机构\n\n在“证书颁发机构 ACME(v2, RFC 8555) 服务URL”下选择ZeroSSL，点击 `读取服务目录`并等待出现：\n\n测试此ACME服务对浏览器的支持情况，发生错误：GetNonce:** **此ACME服务对浏览器访问支持太差，无法跨域获取Replay-Nonce响应头。**\n\n关闭改网页，直接打开https://acme.zerossl.com/v2/DV90/directory，按`F12`键打开开发者控制台，点击`控制台` 或`Console`，输入以下代码（代码安全开源）：\n\n```javascript\n// 请复制本代码到打开的ACME服务URL页面的浏览器控制台中运行。\n\nvar Default_ACME_URL=\"https://acme.zerossl.com/v2/DV90/directory\";\nvar IsReadDirGotoCORS=true;\nvar PageRawHTML=`<html><head>\n<meta http-equiv=\"Content-Type\" content=\"text/html; charset=utf-8\">\n<meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0\">\n<link rel=\"shortcut icon\" type=\"image/png\" href=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAAe1BMVEUDuu3///8AtuwAue1c0/QAt+1a0vSZ4/gOve4Ju+4AtOzf9v31/P4iw/DS8/yf5fnE7/tNzvMsxvHw+/7t+v7k+P2U4veO4PeA3Pbp+f7h9/3Y9f3I8Pxt1/Vi1PRQz/NDzPIzyPEWv+76/v/3/f+87fqn5/mI3/Z82vb+fQDoAAAA10lEQVQ4y63T2c7CIBCGYWamUwFZurfuy7/e/xVaeySlYmJ8T78nISQgPh0xU2pGZa1EfrazHJz5an2FT3brYKoul4UqAHx5Hhqoq6VTMAc4aER9acDjEviFPd2voP9gKykGVECHkzyBsRzvI+g1jWG5BFDIPXRKjqkcTKUwPISPbvsN9XpqA9DuehXsF4g64APALAY+AHkMVm+CzToNVld1NAmwE0zaJ0DBQughAcxZ66tLAGj6f/f2NdMgewXKGHSPgOTPfG/Dh0vqlAXlluefahaLT3UDvrAKrj7jLKkAAAAASUVORK5CYII=\">\n\n<title>ACME Web Browser Client | ACME客户端H5网页单文件版，在线免费申请签发SSL/TLS通配符泛域名HTTPS证书，支持Let's Encrypt、ZeroSSL，无需账号免登录注册 | Windows macOS Get Wildcard Certificates Online For Free - Single HTML File</title>\n</head>\n\n<body>\n<script>\nvar Version=\"1.0.230820\";\nconsole.log(\"LICENSE: GPL-3.0, https://github.com/xiangyuecn/ACME-HTML-Web-Browser-Client/blob/main/LICENSE\");\n/***********************************\n中英对照翻译主要来自：Chrome自带翻译+百度翻译，由中文翻译成English（作者英文很菜）。\nThe Chinese-English translation is mainly from: Chrome comes with translation + Baidu translation, which is translated from Chinese to English (the author's English level is very low)\n\n感谢围观本客户端源码，所有功能的代码都在本页面一个文件内，逻辑上会比较长和比较丑（关键地方或多或少有写注释），如感不适，请转头看看旁边的大长腿，再深呼吸一下继续看下一行~\nThank you for watching the source code of this client. The code of all functions is in one file on this page, which is logically long and ugly (more or less comments are written in key places). If you feel uncomfortable, please turn your head and look at the Big Long Legs next to you, take another deep breath and continue to look at the next line~\n************************************/\n</script>\n\n\n<div class=\"main-load\" style=\"padding-top:40vh;text-align:center;font-size:28px\">Loading...</div>\n<div class=\"main\" style=\"display:none\">\n<div class=\"mainBox acmeReadDirGotoCORSState\" style=\"display:none\"></div>\n\n<div class=\"mainBox\">\n\t<span style=\"font-size:32px;font-weight:bold;color:#03baed;\">\n\t\t<span class=\"langCN clientNameCN\">HTML5网页版ACME客户端</span>\n\t\t<span class=\"langEN clientNameEN\">ACME Web Browser Client</span>\n\t</span>\n\t<span class=\"versionBox\" style=\"font-size:14px;color:#03baed;margin-right:80px\"></span>\n\t<span style=\"display:inline-block\">\n\t\t<span class=\"langCN\">开源代码：</span>\n\t\t<span class=\"langEN\">Open source: </span>\n\t\t<a href=\"https://github.com/xiangyuecn/ACME-HTML-Web-Browser-Client\" target=\"_blank\">GitHub &gt;&gt;</a>\n\t\t<span class=\"langCN\">\n\t\t\t| <a href=\"https://gitee.com/xiangyuecn/ACME-HTML-Web-Browser-Client\" target=\"_blank\">Gitee &gt;&gt;</a>\n\t\t</span>\n\t</span>\n\t\n\t<ul class=\"itemBox feature_ul\" style=\"list-style-type: none;margin:8px 0 0 0;padding:0 8px 0 8px;color:#666\">\n\t\t<li class=\"langCN\"><i>功能用途</i>本网页客户端用于：向 <a href=\"https://letsencrypt.org/\" target=\"_blank\">Let's Encrypt</a>、<a href=\"https://zerossl.com/\" target=\"_blank\">ZeroSSL</a>、<a href=\"https://pki.goog/\" target=\"_blank\">Google</a> 等支持 ACME 协议的证书颁发机构，免费申请获得用于 HTTPS 的 SSL/TLS 域名证书（RSA、ECC/ECDSA），支持多域名和通配符泛域名；只需在现代浏览器上操作即可获得 PEM 格式纯文本的域名证书，不依赖操作系统环境，无需下载和安装软件，纯手动操作，<span class=\"Bold\">只专注于申请获得证书这一件事。</span></li>\n\t\t<li class=\"langEN\"><i>Functional use</i>This web client is used to: apply for free SSL/TLS domain name certificates (RSA, ECC/ECDSA) for HTTPS from <a href=\"https://letsencrypt.org/\" target=\"_blank\">Let's Encrypt</a> , <a href=\"https://zerossl.com/\" target=\"_blank\">ZeroSSL</a> , <a href=\"https://pki.goog/\" target=\"_blank\">Google</a> and other certificate authorities that support the ACME protocol, and support multiple domain names and wildcard pan-domain names; Simply operate on a modern browser to obtain a domain name certificate in plain text in PEM format, does not depend on the operating system environment, does not need to download and install software, and is purely manual, <span class=\"Bold\">only focus on the only thing that is to apply for and obtain a certificate.</span></li>\n\t\t\n\t\t<li class=\"langCN\"><i>简单易用</i>点点鼠标 Ctrl+C Ctrl+V 就能完成证书的申请，全程需要的操作少，每一步都有保姆级操作提示，UI友好大气美观；<span class=\"Bold\">本客户端不需要注册账号、更不需要登录。</span></li>\n\t\t<li class=\"langEN\"><i>Easy to use</i>Click the mouse and Ctrl+C Ctrl+V to complete the certificate application. The whole process requires less operations, and there are nanny level operation prompts at each step; UI friendly, atmospheric and beautiful; <span class=\"Bold\">This client does not need to register an account, and does not need to log in.</span></li>\n\t\t\n\t\t<li class=\"langCN\"><i>开源项目</i>本网页客户端源码已开源，访问网址由托管仓库提供，源码透明可追溯。</li>\n\t\t<li class=\"langEN\"><i>Open source project</i>The source code of the client side of this webpage has been open sourced, and the access URL is provided by the hosting warehouse, and the source code is transparent and traceable.</li>\n\t\t\n\t\t<li class=\"langCN\"><i>单一文件</i>本网页客户端仅一个静态 HTML 文件，不依赖其他任何文件；因此可以直接保存到你本地（右键-另存为），即可通过浏览器打开。</li>\n\t\t<li class=\"langEN\"><i>A single file</i>This web client is only a single static HTML web page file and does not depend on any other files; therefore, it can be directly saved to your local (right-click - save as), and you can open it through a browser.</li>\n\t\t\n\t\t<li class=\"langCN\"><i>数据安全</i>除了你指定证书颁发机构的 ACME 接口地址外，本网页客户端不会向其他任何地址发送数据，通过浏览器控制台很容易做到网络数据审查。</li>\n\t\t<li class=\"langEN\"><i>Data security</i>Except for the ACME interface address of the certificate authority you specify, this web client will not send data to any other address, and it is easy to check the network data through the browser console.</li>\n\t\t\n\t\t<li class=\"langCN\"><i>系统安全</i>纯网页应用，不会也无法对你的电脑系统做出任何修改。</li>\n\t\t<li class=\"langEN\"><i>System security</i>Pure web application, will not and cannot make any modification to your computer system.</li>\n\t\t\n\t\t<li class=\"langCN\" style=\"color:#cb1d1d\"><i style=\"background:#cb1d1d\">证书过期风险提醒</i>由于本网页客户端只能纯手动操作，不支持自动续期，需注意在证书过期前重新生申请新证书（免费证书普遍90天有效期，届时只需重复操作一遍即可），或使用 acme.sh 等客户端自动化续期。</li>\n\t\t<li class=\"langEN\" style=\"color:#cb1d1d\"><i style=\"background:#cb1d1d\">Certificate Expiration Risk Alert</i>Since this web client can only be operated manually and does not support automatic renewal, you should pay attention to apply for a new certificate before the certificate expires (free certificates are generally valid for 90 days, you only need to repeat the operation at that time), or use acme.sh and other client automatic renewal.</li>\n\t</ul>\n\t<style>\n\t\t.feature_ul li{margin: 8px 0;}\n\t\t.feature_ul i{\n\t\t\tfont-style: normal;\n\t\t\tmargin-right:8px;\n\t\t\tdisplay: inline-block;\n\t\t\tvertical-align: middle;\n\t\t\tbackground: #03baed;\n\t\t\tcolor: #fff;\n\t\t\tfont-size: 14px;\n\t\t\tpadding: 2px 8px;\n\t\t\tborder-radius: 99px;\n\t\t}\n\t</style>\n</div>\n\n\n\n\n\n<div class=\"mainBox\">\n\t<div class=\"pd itemTitle\">\n\t\t<span class=\"langCN\">步骤一：选择证书颁发机构</span>\n\t\t<span class=\"langEN\">Step 1: Select a Certificate Authority</span>\n\t</div>\n\t<div class=\"itemBox\">\n\t\t<div class=\"pd Bold\">\n\t\t\t<i class=\"must\">*</i>\n\t\t\t<span class=\"langCN\">证书颁发机构 ACME(v2, <a href=\"https://www.rfc-editor.org/rfc/rfc8555.html\" target=\"_blank\">RFC 8555</a>) 服务URL：</span>\n\t\t\t<span class=\"langEN\">Certificate Authority ACME (v2, <a href=\"https://www.rfc-editor.org/rfc/rfc8555.html\" target=\"_blank\">RFC 8555</a>) Service URL:</span>\n\t\t</div>\n\t\t<div class=\"pd\">\n\t\t\t<label><input type=\"radio\" name=\"choice_acmeURL\" value=\"https://acme-v02.api.letsencrypt.org/directory\" desckey=\"descLetsEncrypt\">Let's Encrypt</label>\n\t\t\t<label><input type=\"radio\" name=\"choice_acmeURL\" value=\"https://acme.zerossl.com/v2/DV90/directory\" desckey=\"descZeroSSL\">ZeroSSL</label>\n\t\t\t<label><input type=\"radio\" name=\"choice_acmeURL\" value=\"https://dv.acme-v02.api.pki.goog/directory\" desckey=\"descGoogle\">Google</label>\n\t\t\t<label>\n\t\t\t\t<input type=\"radio\" name=\"choice_acmeURL\" value=\"manual\">\n\t\t\t\t<span class=\"langCN\">手动填写URL</span>\n\t\t\t\t<span class=\"langEN\">Fill in the URL manually</span>\n\t\t\t</label>\n\t\t\t<label>\n\t\t\t\t<input type=\"radio\" name=\"choice_acmeURL\" value=\"https://acme-staging-v02.api.letsencrypt.org/directory\">\n\t\t\t\t<span class=\"langCN\">测试用[不要选]</span>\n\t\t\t\t<span class=\"langEN\">For testing, don't choose</span>\n\t\t\t</label>\n\t\t</div>\n\t\t\n\t\t<div style=\"font-size:13px;color:#aaa\">\n\t\t\t<div class=\"pd descAcmeURL descLetsEncrypt\" style=\"display:none\">\n\t\t\t\t<a href=\"https://letsencrypt.org/\" target=\"_blank\">Let's Encrypt</a>:\n\t\t\t\t<span class=\"langCN\">请按照下面的操作步骤提示进行申请即可得到证书，证书有效期90天。</span>\n\t\t\t\t<span class=\"langEN\">Please follow the operation steps prompts below to apply, and you can get the certificate, which is valid for 90 days.</span>\n\t\t\t</div>\n\t\t\t<div class=\"pd descAcmeURL descZeroSSL\" style=\"display:none\">\n\t\t\t\t<a href=\"https://zerossl.com/\" target=\"_blank\">ZeroSSL</a>:\n\t\t\t\t<span style=\"color:#f80\">\n\t\t\t\t\t<span class=\"langCN\">此URL可能需要先根据下面的提示进行操作来消除跨域不能访问的问题。</span>\n\t\t\t\t\t<span class=\"langEN\">This URL may need to be operated according to the prompts below to eliminate the problem of cross-domain inaccessibility.</span>\n\t\t\t\t</span>\n\t\t\t\t<span class=\"langCN\">申请证书前，你需要根据ZeroSSL的<a href=\"https://zerossl.com/documentation/acme/\" target=\"_blank\">官方文档</a>，先注册ZeroSSL账号并生成一个EAB凭据，每次申请证书时使用此EAB凭据，按照下面的操作步骤提示进行申请即可得到证书，证书有效期90天。</span>\n\t\t\t\t<span class=\"langEN\">Before applying for a certificate, you need to follow ZeroSSL's <a href=\"https://zerossl.com/documentation/acme/\" target=\"_blank\">official documents</a>, register a ZeroSSL account and generate an EAB credential, and use this EAB credential every time you apply for a certificate, follow the operation steps prompts below to apply, and you can get the certificate, which is valid for 90 days.</span>\n\t\t\t</div>\n\t\t\t<div class=\"pd descAcmeURL descGoogle\" style=\"display:none\">\n\t\t\t\t<a href=\"https://pki.goog/\" target=\"_blank\">Google Trust Services</a>:\n\t\t\t\t<span style=\"color:#f80\">\n\t\t\t\t\t<span class=\"langCN\">此URL可能需要先根据下面的提示进行操作来消除跨域不能访问的问题。</span>\n\t\t\t\t\t<span class=\"langEN\">This URL may need to be operated according to the prompts below to eliminate the problem of cross-domain inaccessibility.</span>\n\t\t\t\t</span>\n\t\t\t\t<span class=\"langCN\">申请证书前，你需要根据Google的<a href=\"https://cloud.google.com/certificate-manager/docs/public-ca-tutorial\" target=\"_blank\">官方文档</a>，在Google Cloud中生成一个EAB凭据，每次申请证书时使用此EAB凭据，按照下面的操作步骤提示进行申请即可得到证书，证书有效期90天。</span>\n\t\t\t\t<span class=\"langEN\">Before applying for a certificate, you need to follow Google's <a href=\"https://cloud.google.com/certificate-manager/docs/public-ca-tutorial\" target=\"_blank\">official documents</a>, generate an EAB credential in Google Cloud, and use this EAB credential every time you apply for a certificate, follow the operation steps prompts below to apply, and you can get the certificate, which is valid for 90 days.</span>\n\t\t\t\t<span style=\"color:#f80\">\n\t\t\t\t\t<span class=\"langCN\">注意：因为同一个Google EAB凭据只能绑定到一个ACME账户（私钥），因此你在首次申请证书时，<span style=\"font-weight:bold;font-size:20px\">必须同时保存好在第二步操作中新创建的或手动填写的ACME账户私钥</span>，下次申请证书时使用此EAB凭据必须和已保存的ACME账户私钥一起使用。</span>\n\t\t\t\t\t<span class=\"langEN\">Note: Because the same Google EAB credential can only be bound to one ACME account (Private key), when you apply for a certificate for the first time, <span style=\"font-weight:bold;font-size:20px\">you must also save the newly generated or manually filled ACME account private key in the second step</span>, this EAB credential must be used together with the saved ACME account private key when applying for a certificate next time.</span>\n\t\t\t\t</span>\n\t\t\t</div>\n\t\t</div>\n\t\t\n\t\t<div class=\"pd FlexBox\">\n\t\t\t<div class=\"FlexItem\">\n\t\t\t\t<input class=\"in_acmeURL inputLang\" style=\"width:100%\" placeholder-cn=\"请填写证书颁发机构ACME服务URL\" placeholder-en=\"Please fill in the Certificate Authority ACME Service URL\">\n\t\t\t</div>\n\t\t\t<div style=\"padding-left:12px\">\n\t\t\t\t<span class=\"mainBtn mainBtnMin\" onclick=\"acmeReadDirClick()\" style=\"padding:0 50px\">\n\t\t\t\t\t<span class=\"langCN\">读取服务目录</span>\n\t\t\t\t\t<span class=\"langEN\">Read service directory</span>\n\t\t\t\t</span>\n\t\t\t</div>\n\t\t</div>\n\t\t<div class=\"acmeReadDirState\"></div>\n<script>\n//跨域支持的不好的ACME服务，直接复制源码到他们网站里面运行\nvar acmeReadDirGotoCORSInit=function(){\n\tif(!window.IsReadDirGotoCORS)return;\n\tvar stateEl=$(\".acmeReadDirGotoCORSState\").show().html(\\`\n<div style=\"color:#cb1d1d\">\n\t<span class=\"langCN\">本客户端正在以跨域兼容模式运行，请按正常流程操作即可，目标ACME服务URL=$\\{window.Default_ACME_URL}</span>\n\t<span class=\"langEN\">This client is running in cross-domain compatibility mode, please follow the normal process, the target ACME service URL=$\\{window.Default_ACME_URL}</span>\n</div>\n\t\\`);\n\tLangReview(stateEl);\n};\nvar acmeReadDirGotoCORS=function(title){\n\t\"use strict\";\n\tvar codes=\"// \"+Lang(\"请复制本代码到打开的ACME服务URL页面的浏览器控制台中运行。\",\"Please copy this code to the browser console of the opened ACME service URL page to run.\",true)\n\t\t+\"\\\\n\\\\nvar Default_ACME_URL=\"+JSON.stringify(ACME.URL)+\";\"\n\t\t+\"\\\\nvar IsReadDirGotoCORS=true;\"\n\t\t+\"\\\\nvar PageRawHTML=\\`\"\n\t\t\t+PageRawHTML.replace(/\\\\\\\\/g,\"\\\\\\\\\\\\\\\\\").replace(/\\`/g,\"\\\\\\\\\\`\").replace(/\\\\$\\\\{/g,\"$\\\\\\\\{\")\n\t\t+\"\\`;\";\n\tcodes+=\"\\\\n(\"+(function(){\n\t\tconsole.clear();\n\t\tdocument.head.innerHTML=/<head[^>]*>([\\\\S\\\\s]+?)<\\\\/head>/i.exec(PageRawHTML)[1];\n\t\tdocument.body.innerHTML=/<body[^>]*>([\\\\S\\\\s]+)<\\\\/body>/i.exec(PageRawHTML)[1];\n\t\tvar js=/<script[^>]*>([\\\\S\\\\s]+?)<\\\\/script>/ig,m;\n\t\twhile(m=js.exec(PageRawHTML)) eval.call(window, m[1]);\n\t}).toString()+\")()\";\n\t$(\".gotoCORSBox\").hide();\n\tvar stateEl=$(\".acmeReadDirState\").append(\\`\n<div class=\"gotoCORSBox\" style=\"padding-top:15px\">\n\t<div class=\"pd Bold\" style=\"color:red\">\n\t\t<i class=\"must\">*</i>\n\t\t\\`+(title||\\`\n\t\t<span class=\"langCN\">由于此ACME服务对跨域访问支持不良，</span>\n\t\t<span class=\"langEN\">Because this ACME service has poor support for cross-domain access, </span>\n\t\t<span style=\"font-size:24px\">\n\t\t\t<span class=\"langCN\">请按下面步骤操作：</span>\n\t\t\t<span class=\"langEN\">please follow the steps below:</span>\n\t\t</span>\\`)+\\`\n\t</div>\n<div style=\"padding-left:40px\">\n\t<div class=\"pd\">\n\t\t<span class=\"langCN\">1. 请在浏览器中直接打开此ACME服务URL，<a href=\"$\\{ACME.URL}\" target=\"_blank\">点此打开</a>；</span>\n\t\t<span class=\"langEN\">1. Please open the ACME service URL directly in the browser, <a href=\"$\\{ACME.URL}\" target=\"_blank\">click here to open</a>;</span>\n\t</div>\n\t<div class=\"pd\">\n\t\t<span class=\"langCN\">2. 在上一步打开的页面中打开浏览器控制台（需等页面加载完成后，再按F12键）；</span>\n\t\t<span class=\"langEN\">2. Open the browser console in the page opened in the previous step (after the page is loaded, press the F12 key);</span>\n\t</div>\n\t<div class=\"pd\">\n\t\t<span class=\"langCN\">3. 复制以下代码，在第2步打开的浏览器控制台中运行，然后就可以正常申请证书了。</span>\n\t\t<span class=\"langEN\">3. Copy the following code, run it in the browser console opened in step 2, and then you can apply for the certificate normally.</span>\n\t</div>\n\t<div class=\"pd\" style=\"font-size:13px;color:#aaa\">\n\t\t<span class=\"langCN\">工作原理：代码内包含了本页面源码，在目标页面内运行后将原样的显示出本客户端，然后按正常流程操作即可，此时已没有跨域问题了（既然打不过，那就加入他们）。</span>\n\t\t<span class=\"langEN\">Working principle: The code contains the source code of this page. After running in the target page, the client will be displayed as it is, and then operate according to the normal process. At this time, there is no cross-domain problem (if we can't beat them, we'd better join them).</span>\n\t</div>\n</div>\n\t<div style=\"padding-top:20px\">\n\t\t<textarea class=\"gotoCORSText\" style=\"width:100%;height:200px\" readonly></textarea>\n\t</div>\n</div>\n\t\\`);\n\t$(\".gotoCORSText\").val(codes);\n\tLangReview(stateEl);\n};\n</script>\n\t</div>\n</div>\n\n\n\n\n\n<div class=\"mainBox\">\n\t<div class=\"pd itemTitle\">\n\t\t<span class=\"langCN\">步骤二：证书配置</span>\n\t\t<span class=\"langEN\">Step 2: Certificate Configuration</span>\n\t</div>\n\t<div class=\"step2Hide step1Show\">\n\t\t<div class=\"itemBox\" style=\"color:#999\">\n\t\t\t<span class=\"langCN\">等待中，请先完成第一步...</span>\n\t\t\t<span class=\"langEN\">Waiting, please complete step 1 first...</span>\n\t\t</div>\n\t</div>\n\t<div class=\"step1Hide step2Show\">\n\t\t\n\t\t\n\t\t<div class=\"pd\" style=\"font-size:13px;color:#aaa\">\n\t\t\t<span class=\"langCN\">温馨提示：如果上次申请过证书，可以拖拽已下载保存的记录LOG文件到本页面，将自动填充上次的配置信息。</span>\n\t\t\t<span class=\"langEN\">Reminder: If you have applied for a certificate last time, you can drag and drop the downloaded and saved record LOG file to this page, and the last configuration information will be automatically filled in.</span>\n\t\t</div>\n\t\t\n\t\t\n\t\t<div class=\"itemBox\">\n\t\t\t<div class=\"pd Bold\">\n\t\t\t\t<i class=\"must\">*</i>\n\t\t\t\t<span class=\"langCN\">证书中要包含的域名：</span>\n\t\t\t\t<span class=\"langEN\">Domain name to be included in the certificate:</span>\n\t\t\t</div>\n\t\t\t<div class=\"pd\" style=\"font-size:13px;color:#aaa\">\n\t\t\t\t<span class=\"langCN\">一个证书可以包含多个域名（支持通配符），比如填写：<i class=\"i\">a.com, *.a.com, b.com, *.b.com</i>；第一个域名将作为证书的通用名称（Common Name）；带通配符的域名只支持DNS验证，其他域名支持上传文件验证；注意：填了<i class=\"i\">www.a.com</i>时，一般需要额外填上<i class=\"i\">a.com</i>。</span>\n\t\t\t\t<span class=\"langEN\">A certificate can contain multiple domain names (wildcard are supported), for example, fill in: <i class=\"i\">a.com, *.a.com, b.com, *.b.com</i>; the first domain name will be used as the Common Name of the certificate; Domain names with wildcard only support DNS verification, and other domain names support upload file verification ; Note: When <i class=\"i\">www.a.com</i> is filled in, it is generally necessary to fill in <i class=\"i\">a.com</i> additionally.</span>\n\t\t\t</div>\n\t\t\t<div class=\"FlexBox\">\n\t\t\t\t<div class=\"FlexItem\">\n\t\t\t\t\t<input class=\"in_domains inputLang\" style=\"width:100%\" placeholder-cn=\"请填写你的域名，多个用逗号隔开\" placeholder-en=\"Please fill in your domain name, multiple separated by commas\">\n\t\t\t\t</div>\n\t\t\t\t<div style=\"padding-left:15px;line-height:30px;font-size:13px;color:#aaa\">\n\t\t\t\t\t<label>\n\t\t\t\t\t\t<input type=\"checkbox\" class=\"choice_domains_store\">\n\t\t\t\t\t\t<span class=\"langCN\">记住</span>\n\t\t\t\t\t\t<span class=\"langEN\">Remember</span>\n\t\t\t\t\t</label>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t\t\n\t\t\n\t\t<div class=\"itemBox\">\n\t\t\t<div class=\"pd Bold\">\n\t\t\t\t<i class=\"must\">*</i>\n\t\t\t\t<span class=\"langCN\">证书的私钥：</span>\n\t\t\t\t<span class=\"langEN\">Private key of certificate:</span>\n\t\t\t</div>\n\t\t\t<div class=\"pd\" style=\"font-size:13px;color:#aaa\">\n\t\t\t\t<span class=\"langCN\">生成或填写的私钥仅用于ACME接口签名，支持<i class=\"i\">RSA(2048位+)</i>、<i class=\"i\">ECC(<span class=\"eccCurveNames\"></span>曲线)</i>私钥；<span style=\"color:#f80\">注意：证书私钥的类型决定了申请到的证书是RSA证书还是ECC(ECDSA)证书，RSA类型适用性更广也更常见</span>；本客户端不会对此私钥进行保存或发送给其他任何人；证书签发后在部署到服务器时，需使用到此私钥；建议每次申请证书时均生成新的证书私钥。</span>\n\t\t\t\t<span class=\"langEN\">The generated or filled private key is only used for ACME interface signature, and supports <i class=\"i\">RSA (2048-bit+)</i> and <i class=\"i\">ECC (<span class=\"eccCurveNames\"></span> curve)</i> private keys; <span style=\"color:#f80\">Note: The type of certificate private key determines whether the applied certificate is an RSA certificate or a ECC(ECDSA) certificate, RSA type is more widely applicable and more common;</span> this client will not save or send this private key to anyone else; this private key needs to be used when deploying to the server after the certificate is issued; it is recommended to generate a new certificate private key every time you apply for a certificate.</span>\n\t\t\t</div>\n\t\t\t<div class=\"pd\">\n\t\t\t\t<label>\n\t\t\t\t\t<input type=\"radio\" name=\"choice_privateKey\" value=\"generateRSA\">\n\t\t\t\t\t<span class=\"langCN\">创建新RSA私钥</span>\n\t\t\t\t\t<span class=\"langEN\">Generate RSA private key</span>\n\t\t\t\t</label>\n\t\t\t\t<label>\n\t\t\t\t\t<input type=\"radio\" name=\"choice_privateKey\" value=\"generateECC\">\n\t\t\t\t\t<span class=\"langCN\">创建新ECC私钥</span>\n\t\t\t\t\t<span class=\"langEN\">Generate ECC private key</span>\n\t\t\t\t</label>\n\t\t\t\t<label>\n\t\t\t\t\t<input type=\"radio\" name=\"choice_privateKey\" value=\"manual\">\n\t\t\t\t\t<span class=\"langCN\">手动填写私钥</span>\n\t\t\t\t\t<span class=\"langEN\">Manually fill in the private key</span>\n\t\t\t\t</label>\n\t\t\t</div>\n\t\t\t<div class=\"privateKeyBox\">\n\t\t\t\t<textarea class=\"in_privateKey inputLang\" style=\"width:100%;height:60px\" placeholder-cn=\"请填写pem私钥，私钥文本以 -----BEGIN PRIVATE KEY----- 开头（这是PKCS#8格式，里面带有 RSA|EC 字符的PKCS#1格式也是支持的）\" placeholder-en=\"Please fill in the pem private key. The private key text starts with -----BEGIN PRIVATE KEY----- (this is in PKCS#8 format, and PKCS#1 format with RSA|EC characters in it is also supported)\"></textarea>\n\t\t\t</div>\n\t\t\t<div class=\"privateKeyState\"></div>\n\t\t</div>\n\t\t\n\t\t\n\t\t<div class=\"itemBox\">\n\t\t\t<div class=\"pd Bold\">\n\t\t\t\t<i class=\"must\">*</i>\n\t\t\t\t<span class=\"langCN\">ACME账户的私钥：</span>\n\t\t\t\t<span class=\"langEN\">Private key of ACME account:</span>\n\t\t\t</div>\n\t\t\t<div class=\"pd\" style=\"font-size:13px;color:#aaa\">\n\t\t\t\t<span class=\"langCN\">生成或填写的私钥仅用于ACME接口签名，支持<i class=\"i\">RSA(2048位+)</i>、<i class=\"i\">ECC(<span class=\"eccCurveNames\"></span>曲线)</i>私钥；账户私钥类型对证书无影响；本客户端不会对此私钥进行保存或发送给其他任何人；一个私钥相当于一个账户，可用于吊销已签发的证书；建议每次申请证书时使用相同的一个私钥（这样短期内多次申请证书时，验证域名所有权的参数极有可能会保持相同），不过每次都生成一个新的私钥大部分情况下也不会有问题。</span>\n\t\t\t\t<span class=\"langEN\">The generated or filled private key is only used for ACME interface signature, and supports <i class=\"i\">RSA (2048-bit+)</i> and <i class=\"i\">ECC (<span class=\"eccCurveNames\"></span> curve)</i> private keys; the account private key type has no effect on the certificate; this client will not save or send this private key to anyone else; A private key is equivalent to an account and can be used to revoke an issued certificate; it is recommended to use the same private key every time you apply for a certificate (in this way, the parameters used to verify the domain name ownership are likely to remain identical when multiple certificate applications are made in a short period of time); However, generating a new private key every time will not be a problem in most cases.</span>\n\t\t\t\t<span class=\"eabShow\" style=\"color:#f80\">\n\t\t\t\t\t<span class=\"langCN\">注意：如果你选择的ACME服务（比如Google）要求提供EAB凭据并且限制了同一个EAB凭据只能绑定到一个ACME账户（私钥），那每次使用此EAB凭据时必须使用相同的一个私钥（首次时如果新创建了私钥，此新私钥需立即保存起来下次和此EAB凭据一起使用）。</span>\n\t\t\t\t\t<span class=\"langEN\">Note: If the ACME service you choose (such as Google) requires EAB credentials and limits the same EAB credentials to only one ACME account (private key), then you must use the same private key every time you use this EAB credential (if you generate a new private key for the first time, this new private key needs to be saved immediately and used with this EAB credential next time).</span>\n\t\t\t\t</span>\n\t\t\t</div>\n\t\t\t<div class=\"pd\">\n\t\t\t\t<label>\n\t\t\t\t\t<input type=\"radio\" name=\"choice_accountKey\" value=\"generateRSA\">\n\t\t\t\t\t<span class=\"langCN\">创建新RSA私钥</span>\n\t\t\t\t\t<span class=\"langEN\">Generate RSA private key</span>\n\t\t\t\t</label>\n\t\t\t\t<label>\n\t\t\t\t\t<input type=\"radio\" name=\"choice_accountKey\" value=\"generateECC\">\n\t\t\t\t\t<span class=\"langCN\">创建新ECC私钥</span>\n\t\t\t\t\t<span class=\"langEN\">Generate ECC private key</span>\n\t\t\t\t</label>\n\t\t\t\t<label>\n\t\t\t\t\t<input type=\"radio\" name=\"choice_accountKey\" value=\"manual\">\n\t\t\t\t\t<span class=\"langCN\">手动填写私钥</span>\n\t\t\t\t\t<span class=\"langEN\">Manually fill in the private key</span>\n\t\t\t\t</label>\n\t\t\t</div>\n\t\t\t<div class=\"accountKeyBox\">\n\t\t\t\t<textarea class=\"in_accountKey inputLang\" style=\"width:100%;height:60px\" placeholder-cn=\"请填写pem私钥，私钥文本以 -----BEGIN PRIVATE KEY----- 开头（这是PKCS#8格式，里面带有 RSA|EC 字符的PKCS#1格式也是支持的）\" placeholder-en=\"Please fill in the pem private key. The private key text starts with -----BEGIN PRIVATE KEY----- (this is in PKCS#8 format, and PKCS#1 format with RSA|EC characters in it is also supported)\"></textarea>\n\t\t\t</div>\n\t\t\t<div class=\"accountKeyState\"></div>\n\t\t</div>\n\t\t\n\t\t\n\t\t<div class=\"itemBox\">\n\t\t\t<div class=\"pd Bold\">\n\t\t\t\t<i class=\"must\">*</i>\n\t\t\t\t<span class=\"langCN\">ACME账户的联系邮箱：</span>\n\t\t\t\t<span class=\"langEN\">Contact email of ACME account:</span>\n\t\t\t</div>\n\t\t\t<div class=\"pd\" style=\"font-size:13px;color:#aaa\">\n\t\t\t\t<span class=\"langCN\">此邮箱地址用于证书颁发机构给你发送邮件，比如：证书过期前的续期通知提醒。</span>\n\t\t\t\t<span class=\"langEN\">This email address is used by the certificate authority to send you emails, such as a reminder of renewal notice before the certificate expires.</span>\n\t\t\t</div>\n\t\t\t<div class=\"FlexBox\">\n\t\t\t\t<div class=\"FlexItem\">\n\t\t\t\t\t<input class=\"in_email inputLang\" style=\"width:100%\" placeholder-cn=\"请填写一个你的邮箱\" placeholder-en=\"Please fill in one of your email addresses\">\n\t\t\t\t</div>\n\t\t\t\t<div style=\"padding-left:15px;line-height:30px;font-size:13px;color:#aaa\">\n\t\t\t\t\t<label>\n\t\t\t\t\t\t<input type=\"checkbox\" class=\"choice_email_store\">\n\t\t\t\t\t\t<span class=\"langCN\">记住</span>\n\t\t\t\t\t\t<span class=\"langEN\">Remember</span>\n\t\t\t\t\t</label>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t\t\n\t\t\n\t\t<div class=\"itemBox eabShow\">\n\t\t\t<div class=\"pd Bold\">\n\t\t\t\t<span class=\"langCN\">EAB凭据：</span>\n\t\t\t\t<span class=\"langEN\">EAB Credentials:</span>\n\t\t\t</div>\n\t\t\t<div class=\"pd\" style=\"font-size:13px;color:#aaa\">\n\t\t\t\t<span class=\"langCN\">当前ACME服务要求提供外部账号绑定凭据（External Account Binding），比如ZeroSSL：你可以在ZeroSSL的管理控制台的 Developer 中获得此凭据，所以你需要先注册一个ZeroSSL的账号。</span>\n\t\t\t\t<span class=\"langEN\">The current ACME service requires external account binding credentials, such as ZeroSSL: You can obtain this credentials in the Developer of the ZeroSSL management console, so you need to register a ZeroSSL account first.</span>\n\t\t\t</div>\n\t\t\t<div class=\"FlexBox\" style=\"line-height:30px\">\n\t\t\t\t<div><i class=\"must\">*</i>EAB KID:</div>\n\t\t\t\t<div class=\"FlexItem\" style=\"padding:0 50px 0 6px\">\n\t\t\t\t\t<input class=\"in_eab_kid inputLang\" style=\"width:100%\" placeholder-cn=\"请填写EAB KID\" placeholder-en=\"Please fill in EAB KID\">\n\t\t\t\t</div>\n\t\t\t\t<div style=\"padding:0 6px 0 0\"><i class=\"must\">*</i>HMAC KEY:</div>\n\t\t\t\t<div class=\"FlexItem\">\n\t\t\t\t\t<input class=\"in_eab_key inputLang\" style=\"width:100%\" placeholder-cn=\"请填写EAB HMAC KEY\" placeholder-en=\"Please fill in EAB HMAC KEY\">\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t\t\n\t\t<div class=\"pd termsAgreeBox\">\n\t\t\t<label>\n\t\t\t\t<input type=\"checkbox\" class=\"choice_termsAgree\">\n\t\t\t\t<span class=\"termsAgreeTips\"></span>\n\t\t\t</label>\n\t\t</div>\n\t\t\n\t\t<div class=\"Center\" style=\"padding:15px 0 10px\">\n\t\t\t<span class=\"mainBtn\" onclick=\"configStepClick()\" style=\"width:300px\">\n\t\t\t\t<span class=\"langCN\">确定</span>\n\t\t\t\t<span class=\"langEN\">OK</span>\n\t\t\t</span>\n\t\t</div>\n\t\t<div class=\"configStepState\"></div>\n\t\t\n\t</div>\n</div>\n\n\n\n\n\n\n<div class=\"mainBox\">\n\t<div class=\"pd itemTitle\">\n\t\t<span class=\"langCN\">步骤三：验证域名所有权</span>\n\t\t<span class=\"langEN\">Step 3: Verify Domain Ownership</span>\n\t</div>\n\t<div class=\"step3Hide step2Show step1Show\">\n\t\t<div class=\"itemBox\" style=\"color:#999\">\n\t\t\t<span class=\"langCN\">等待中，请先完成第二步...</span>\n\t\t\t<span class=\"langEN\">Waiting, please complete step 2 first...</span>\n\t\t</div>\n\t</div>\n\t<div class=\"step1Hide step2Hide step3Show\">\n\t\t\n\t\t<div class=\"pd\" style=\"font-size:13px;color:#f80\">\n\t\t\t<span class=\"langCN\">请给每个域名选择一个你合适的验证方式（推荐采用DNS验证，比较简单和通用），然后根据显示的提示完成对应的配置操作。</span>\n\t\t\t<span class=\"langEN\">Please select a suitable verification method for each domain name (DNS Verify is recommended, which is relatively simple and common), and then complete the corresponding configuration operations according to the displayed prompts.</span>\n\t\t</div>\n\t\t\n\t\t<div class=\"verifyBox\"></div>\n<script>\n//显示所有域名的验证界面，html太多\nvar verifyBoxShow=function(){\n\t\"use strict\";\n\tvar boxEl=$(\".verifyBox\").html(\"\");\n\tvar auths=JSON.parse(JSON.stringify(ACME.StepData.auths));//避免改动原始数据\n\tvar domains=ACME.StepData.config.domains;\n\tfor(var i0=0;i0<domains.length;i0++){\n\t\tvar domain=domains[i0],auth=auths[domain]\n\t\t\n\t\tvar challs=auth.challenges;\n\t\tfor(var i=0;i<challs.length;i++){//排序，dns排前面\n\t\t\tvar o=challs[i];\n\t\t\to.challIdx=i;\n\t\t\to.name=ACME.ChallName(o);\n\t\t\to._sort=ACME.ChallSort(o);\n\t\t}\n\t\tchalls.sort(function(a,b){return a._sort.localeCompare(b._sort)});\n\t\tvar choiceHtml=\"\";\n\t\tfor(var i=0;i<challs.length;i++){\n\t\t\tvar chall=challs[i];\n\t\t\tchoiceHtml+=\\`\n<label>\n\t<input type=\"radio\" name=\"choice_authItem_$\\{i0}\"\n\t\tclass=\"choice_authChall choice_authChall_$\\{i0} choice_authChall_$\\{i0}_$\\{i}\"\n\t\tvalue=\"$\\{i0}_$\\{i}\" challidx=\"$\\{chall.challIdx}\">$\\{chall.name}\n</label>\n\t\t\t\\`;\n\t\t}\n\t\t\n\t\tboxEl.append(\\`\n<div class=\"itemBox\">\n\t<div class=\"pd FlexBox\" style=\"line-height:26px\">\n\t\t<div><i class=\"must\">*</i></div>\n\t\t<div style=\"width:180px;padding-right:5px;text-align:right;background:#03baed;color:#fff;border-radius: 4px;\">$\\{domain}</div>\n\t\t<div class=\"FlexItem\" style=\"padding-left:10px;\">$\\{choiceHtml}</div>\n\t</div>\n\t<div class=\"verifyItemBox_$\\{i0}\"></div>\n\t<div class=\"verifyItemState_$\\{i0}\"></div>\n</div>\n\t\t\\`);\n\t};\n\tLangReview(boxEl);\n\t\n\t$(\".choice_authChall\").bind(\"click\",function(e){\n\t\tvar el=e.target,vals=el.value.split(\"_\"),i0=+vals[0],i2=+vals[1];\n\t\tvar domain=domains[i0],auth=auths[domain],chall=auth.challenges[i2];\n\t\tvar html=['<div class=\"pd\" style=\"padding-left:10px;font-size:13px;color:#aaa\">'];\n\t\tvar nameCss='width:195px;text-align:right;padding-right:10px';\n\t\tif(chall.type==\"dns-01\"){\n\t\t\thtml.push(Lang('请到你的域名DNS解析管理中，给下面这个子域名增加一条<i class=\"i\">TXT记录</i>（一个子域名可以同时存在多条TXT记录，可以修改或删除老的记录）。','Please go to the DNS resolution management of your domain name and add a <i class=\"i\">TXT record</i> for the following subdomain name (a subdomain name can have multiple TXT records at the same time, and the old records can be modified or deleted).')+'</div>');\n\t\t\thtml.push(\\`<div class=\"pd FlexBox\">\n\t\t\t\t<div style=\"$\\{nameCss}\">$\\{Lang('子域名','Sub Domain')}:</div>\n\t\t\t\t<div class=\"FlexItem\">\n\t\t\t\t\t<input style=\"width:100%\" readonly value=\"_acme-challenge.$\\{auth.identifier.value}\" />\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div class=\"pd FlexBox\">\n\t\t\t\t<div style=\"$\\{nameCss}\">$\\{Lang('TXT记录','TXT Record')}:</div>\n\t\t\t\t<div class=\"FlexItem\">\n\t\t\t\t\t<input style=\"width:100%\" readonly value=\"$\\{chall.authTxtSHA256}\" />\n\t\t\t\t</div>\n\t\t\t</div>\\`);\n\t\t}else if(chall.type==\"http-01\"){\n\t\t\thtml.push(Lang('请在你的网站根目录中创建<i class=\"i\">/.well-known/acme-challenge/</i>目录，目录内创建<i class=\"i\">'+FormatText(chall.token)+'</i>文件，文件内保存下面的文件内容，保存好后<a href=\"http://'+auth.identifier.value+'/.well-known/acme-challenge/'+FormatText(chall.token)+'\" target=\"_blank\">请点此打开此文件URL</a>测试能否正常访问；注意：这个文件URL必须是80端口，并且公网可以访问，否则ACME无法访问到此地址将会验证失败。Windows操作提示：Windows中用<i class=\"i\">.well-known.</i>作为文件夹名称就能创建<i class=\"i\">.well-known</i>文件夹；IIS可能需在此文件夹下的MIME类型中给 <i class=\"i\">.</i> （扩展名就是一个字\".\"）添加 <i class=\"i\">text/plain</i> 才能正常访问。','Please create the <i class=\"i\">/.well-known/acme-challenge/</i> directory in the root directory of your website, create the <i class=\"i\">'+FormatText(chall.token)+'</i> file in the directory, and save the following file content in the file; After saving, <a href=\"http://'+auth.identifier.value+'/.well-known/acme-challenge/'+FormatText(chall.token)+'\" target=\"_blank\">please click here to open the URL</a> of this file to test whether Normal access; note: the URL of this file must be 80 The port and the public network can be accessed, otherwise ACME cannot access this address and the verification will fail. Windows operation tips: In Windows, you can create a <i class=\"i\">.well-known</i> folder by using <i class=\"i\">.well-known.</i> as the folder name; IIS may need to give <i class=\"i\">.</i> in the MIME type under this folder (the extension is a word \".\") Add <i class=\"i\">text/plain</i> for normal access.')+'</div>');\n\t\t\thtml.push(\\`<div class=\"pd FlexBox\">\n\t\t\t\t<div style=\"$\\{nameCss}\">$\\{Lang('文件URL','File URL')}:</div>\n\t\t\t\t<div class=\"FlexItem\">\n\t\t\t\t\t<input style=\"width:100%\" readonly value=\"http://$\\{auth.identifier.value}/.well-known/acme-challenge/$\\{FormatText(chall.token)}\" />\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div class=\"pd FlexBox\">\n\t\t\t\t<div style=\"$\\{nameCss}\">$\\{Lang('文件内容','File Content')}:</div>\n\t\t\t\t<div class=\"FlexItem\">\n\t\t\t\t\t<input style=\"width:100%\" readonly value=\"$\\{chall.authTxt}\" />\n\t\t\t\t</div>\n\t\t\t</div>\\`);\n\t\t}else{\n\t\t\thtml.push(Lang('非预定义验证类型，请使用<i class=\"i\">Key Authorizations (Token+.+指纹)</i>自行处理，<i class=\"i\">Digest</i>为Key Authorizations的SHA-256 Base64值。','For non-predefined authentication types, please use <i class=\"i\">Key Authorizations (Token+.+Thumbprint)</i> to handle it yourself. <i class=\"i\">Digest</i> is the SHA-256 Base64 value of Key Authorizations.')+'</div>');\n\t\t\thtml.push(\\`<div class=\"pd FlexBox\">\n\t\t\t\t<div style=\"$\\{nameCss}\">Key Authorizations:</div>\n\t\t\t\t<div class=\"FlexItem\">\n\t\t\t\t\t<input style=\"width:100%\" readonly value=\"$\\{chall.authTxt}\" />\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div class=\"pd FlexBox\">\n\t\t\t\t<div style=\"$\\{nameCss}\">Digest(SHA-256 Base64):</div>\n\t\t\t\t<div class=\"FlexItem\">\n\t\t\t\t\t<input style=\"width:100%\" readonly value=\"$\\{chall.authTxtSHA256Base64}\" />\n\t\t\t\t</div>\n\t\t\t</div>\\`);\n\t\t}\n\t\t$(\".verifyItemBox_\"+i0).html(html.join('\\\\n'));\n\t});\n\tfor(var i0=0;i0<domains.length;i0++){\n\t\tvar el=$(\".choice_authChall_\"+i0+\"_0\");\n\t\tel[0]&&el[0].click(); //默认选中每个域名的第一个\n\t}\n};\n</script>\n\t\t\n\t\t<div class=\"itemBox\">\n\t\t\t<div class=\"pd\" style=\"font-size:15px\">\n\t\t\t\t<span class=\"langCN\">请每个域名选择好对应的验证方式，根据显示的提示进行对应的配置操作；<span style=\"color:#cb1d1d\">必须所有域名配置完成后，再来点击下面的“开始验证”按钮进行验证，</span>如果验证失败，需要返回第二步重新开始操作。</span>\n\t\t\t\t<span class=\"langEN\">Please select the corresponding verify method for each domain name, and perform the corresponding configuration operation according to the displayed prompts; <span style=\"color:#cb1d1d\">after all domain names are configured, click the \"Start Verify\" button below to verify,</span> if the verify fails, you need to go back to the step 2 Start the operation.</span>\n\t\t\t</div>\n\t\t\t\n\t\t\t<div class=\"Center\" style=\"padding:15px 0 10px\">\n\t\t\t\t<span class=\"mainBtn verifyStepBtn\" onclick=\"verifyStepClick()\" style=\"width:300px\">\n\t\t\t\t\t<span class=\"langCN\">开始验证</span>\n\t\t\t\t\t<span class=\"langEN\">Start Verify</span>\n\t\t\t\t</span>\n\t\t\t\t<span class=\"mainBtn verifyRunStopBtn\" onclick=\"verifyRunStopClick()\" style=\"width:300px;background:#aaa\">\n\t\t\t\t\t<span class=\"langCN\">取消</span>\n\t\t\t\t\t<span class=\"langEN\">Cancel</span>\n\t\t\t\t</span>\n\t\t\t\t<span class=\"mainBtn finalizeOrderBtn\" onclick=\"finalizeOrderClick()\" style=\"width:300px\">\n\t\t\t\t\t<span class=\"langCN\">重试</span>\n\t\t\t\t\t<span class=\"langEN\">Retry</span>\n\t\t\t\t</span>\n\t\t\t</div>\n\t\t\t<div class=\"verifyStepState\"></div>\n\t\t</div>\n\t\t\n\t</div>\n</div>\n\n\n\n\n\n\n<div class=\"mainBox\">\n\t<div class=\"pd itemTitle\">\n\t\t<span class=\"langCN\">步骤四：下载保存证书PEM文件</span>\n\t\t<span class=\"langEN\">Step 4: Download and save the certificate PEM file</span>\n\t</div>\n\t<div class=\"step4Hide step3Show step2Show step1Show\">\n\t\t<div class=\"itemBox\" style=\"color:#999\">\n\t\t\t<span class=\"langCN\">等待中，请先完成第三步...</span>\n\t\t\t<span class=\"langEN\">Waiting, please complete step 3 first...</span>\n\t\t</div>\n\t</div>\n\t<div class=\"step1Hide step2Hide step3Hide step4Show\">\n\t\n\t\n\t\t<div class=\"itemBox\">\n\t\t\t<div class=\"pd Bold\">\n\t\t\t\t<i class=\"must\">*</i>\n\t\t\t\t<span class=\"langCN\">保存证书PEM文件：</span>\n\t\t\t\t<span class=\"langEN\">Save certificate PEM file: </span>\n\t\t\t</div>\n\t\t\t<div class=\"pd\" style=\"font-size:13px;color:#aaa\">\n\t\t\t\t<span class=\"langCN\"><span style=\"color:#f80\">必须保存此文件，</span>请点击下载按钮下载，或者将证书文本内容复制保存为<i class=\"i downloadCertFileName\"></i>文件（PEM纯文本格式）；文件名后缀可改成 <i class=\"i\">.crt</i> 或 <i class=\"i\">.cer</i>，这样在Windows中能直接双击打开查看。本PEM格式文件已包含你的域名证书、和完整证书链，文本中第一个CERTIFICATE为你的域名证书，后面的为证书颁发机构的中间证书和根证书，如过有需要你可以自行拆分成多个.pem文件。</span>\n\t\t\t\t<span class=\"langEN\"><span style=\"color:#f80\">This file must be saved,</span> please click the download button to download, or copy the text content of the certificate and save it as <i class=\"i downloadCertFileName\"></i> file (PEM plain text format); the file name suffix can be changed to <i class=\"i\">.crt </i> or <i class=\"i\">.cer </i>, so that it can be directly double-clicked to open and view in Windows. This PEM format file already contains your domain name certificate and complete certificate chain. The first CERTIFICATE in the text is your domain name certificate, followed by the intermediate certificate and root certificate of the certificate authority, if necessary, you can split it into multiple .pem files.</span>\n\t\t\t</div>\n\t\t\t<div class=\"FlexBox\">\n\t\t\t\t<div class=\"FlexItem\">\n\t\t\t\t\t<textarea class=\"txt_downloadCert\" style=\"width:100%;height:160px\" readonly=\"\"></textarea>\n\t\t\t\t</div>\n\t\t\t\t<div style=\"padding-left:10px;line-height:30px;font-size:13px;color:#aaa\">\n\t\t\t\t\t<div class=\"mainBtn\" onclick=\"downloadBtnClick('Cert')\">\n\t\t\t\t\t\t<span class=\"langCN\">下载保存</span>\n\t\t\t\t\t\t<span class=\"langEN\">Download</span>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t\t\n\t\t\n\t\t<div class=\"itemBox\">\n\t\t\t<div class=\"pd Bold\">\n\t\t\t\t<i class=\"must\">*</i>\n\t\t\t\t<span class=\"langCN\">保存证书私钥KEY文件：</span>\n\t\t\t\t<span class=\"langEN\">Save the certificate private key KEY file: </span>\n\t\t\t</div>\n\t\t\t<div class=\"pd\" style=\"font-size:13px;color:#aaa\">\n\t\t\t\t<span class=\"langCN\">请点击下载按钮下载，或者将私钥文本内容复制保存为<i class=\"i downloadKeyFileName\"></i>文件（PEM纯文本格式，.key后缀可自行修改成.pem）。如果第二步操作中你手动填写了证书私钥，此处的证书私钥和你填写的是完全一样的，可以不需要重复保存；<span style=\"color:#f80\">如果你是新创建的证书私钥，则你必须下载保存此证书私钥文件。</span></span>\n\t\t\t\t<span class=\"langEN\">Please click the download button to download, or copy and save the text content of the private key as <i class=\"i downloadKeyFileName\"></i> file (PEM plain text format, the .key suffix can be modified to .pem by yourself). If you manually filled in the certificate private key in the step 2, the certificate private key here is exactly the same as what you filled in, and you don’t need to save it repeatedly; <span style=\"color:#f80\">if you are a newly created certificate private key, you must download and save it This certificate private key file.</span></span>\n\t\t\t</div>\n\t\t\t<div class=\"FlexBox\">\n\t\t\t\t<div class=\"FlexItem\">\n\t\t\t\t\t<textarea class=\"txt_downloadKey\" style=\"width:100%;height:80px\" readonly=\"\"></textarea>\n\t\t\t\t</div>\n\t\t\t\t<div style=\"padding-left:10px;line-height:30px;font-size:13px;color:#aaa\">\n\t\t\t\t\t<div class=\"mainBtn\" onclick=\"downloadBtnClick('Key')\">\n\t\t\t\t\t\t<span class=\"langCN\">下载保存</span>\n\t\t\t\t\t\t<span class=\"langEN\">Download</span>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t\t\n\t\t\n\t\t<div class=\"itemBox\">\n\t\t\t<div class=\"pd Bold\">\n\t\t\t\t<i class=\"must\">*</i>\n\t\t\t\t<span class=\"langCN\">保存记录LOG文件：</span>\n\t\t\t\t<span class=\"langEN\">Save the record LOG file: </span>\n\t\t\t</div>\n\t\t\t<div class=\"pd\" style=\"font-size:13px;color:#aaa\">\n\t\t\t\t<span class=\"langCN\">建议下载保存此文件，本记录文件包含了所有数据，包括：证书PEM文本、证书私钥PEM文本、账户私钥PEM文本、所有配置参数。下次你需要续签新证书时，可以将本记录文件直接拖拽进本页面，会自动填写所有参数。</span>\n\t\t\t\t<span class=\"langEN\">It is recommended to download and save this file. This record file contains all data, including: certificate PEM text, certificate private key PEM text, account private key PEM text, and all configuration parameters. Next time you need to renew a new certificate, you can drag and drop the record file directly into this page, and all parameters will be filled in automatically.</span>\n\t\t\t</div>\n\t\t\t<div class=\"FlexBox\">\n\t\t\t\t<div class=\"FlexItem\">\n\t\t\t\t\t<textarea class=\"txt_downloadLog\" style=\"width:100%;height:80px\" readonly=\"\"></textarea>\n\t\t\t\t</div>\n\t\t\t\t<div style=\"padding-left:10px;line-height:30px;font-size:13px;color:#aaa\">\n\t\t\t\t\t<div class=\"mainBtn\" onclick=\"downloadBtnClick('Log')\">\n\t\t\t\t\t\t<span class=\"langCN\">下载保存</span>\n\t\t\t\t\t\t<span class=\"langEN\">Download</span>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t\t\n\t\t\n\t</div>\n</div>\n\n\n\n\n\n\n<div class=\"mainBox\">\n\t\t\n\t<div class=\"itemBox\">\n\t\t<div class=\"pd Bold\">\n\t\t\t<span class=\"langCN\">你需要其他格式的证书文件？</span>\n\t\t\t<span class=\"langEN\">Do you need certificate files in other formats?</span>\n\t\t</div>\n\t\t<div class=\"pd\" style=\"font-size:13px;color:#aaa\">\n\t\t\t<span class=\"langCN\">大部分服务器程序支持直接使用 <i class=\"i downloadCertFileName\"></i>+<i class=\"i downloadKeyFileName\"></i> 来配置开启HTTPS（比如Nginx），如果你需要 <i class=\"i\">*.pfx</i>、<i class=\"i\">*.p12</i> 格式的证书（比如用于IIS），请用下面命令将PEM证书转换成 <i class=\"i\">pfx/p12</i> 格式：</span>\n\t\t\t<span class=\"langEN\">Most server programs support directly using <i class=\"i downloadCertFileName\"></i>+<i class=\"i downloadKeyFileName\"></i> to configure and enable HTTPS (such as Nginx). If you need a certificate in <i class=\"i\">*.pfx</i> or <i class=\"i\">*.p12</i> format (such as for IIS), please use the following command to convert the PEM certificate Convert to <i class=\"i\">pfx/p12</i> format:</span>\n\t\t</div>\n\t\t<div class=\"code\">openssl pkcs12 -export -out <span class=\"downloadFileName\"></span>.pfx -inkey <span class=\"downloadKeyFileName\"></span> -in <span class=\"downloadCertFileName\"></span></div>\n\t</div>\n\t\n\t<div class=\"itemBox\">\n\t\t<div class=\"pd Bold\">\n\t\t\t<span class=\"langCN\">IIS证书链缺失？</span>\n\t\t\t<span class=\"langEN\">IIS certificate chain missing?</span>\n\t\t</div>\n\t\t<div class=\"pd\" style=\"font-size:13px;color:#aaa\">\n\t\t\t<span class=\"langCN\">对于Windows IIS服务器，你需要将证书链安装到“本地计算机”的“中间证书颁发机构”中；请将PEM证书中的所有证书拆分成单个PEM文件（后缀改成<i class=\"i\">.crt</i>或<i class=\"i\">.cer</i>），然后将系统中缺失的中间证书双击打开然后安装进去；详细参考：</span>\n\t\t\t<span class=\"langEN\">For Windows IIS server, you need to install the certificate chain into \"Intermediate Certification Authorities\" in \"Local Computer\"; please split all certificates in PEM certificate into a single PEM file (change the suffix to <i class=\"i\">.crt</i> or <i class=\"i\">.cer</i>), then double-click to open the missing intermediate certificate in the system Then install it; detailed reference:</span>\n\t\t\t<a href=\"http://support.microsoft.com/kb/954755\" target=\"_blank\">http://support.microsoft.com/kb/954755</a>\n\t\t</div>\n\t</div>\n\t\n\t<div class=\"itemBox\">\n\t\t<div class=\"pd Bold\">\n\t\t\t<span class=\"langCN\">本客户端部分原理简介</span>\n\t\t\t<span class=\"langEN\">Introduction to the principle of this client</span>\n\t\t</div>\n\t\t<div class=\"pd\" style=\"font-size:13px;color:#aaa\">\n\t\t\t<span class=\"langCN\">得益于现代浏览器的 <a href=\"https://developer.mozilla.org/en-US/docs/Web/API/SubtleCrypto\" target=\"_blank\">crypto.subtle</a> 对加密功能标准化，不依赖其他任何js库就能在网页上实现 <i class=\"i\">RSA</i>、<i class=\"i\">ECC</i> 的加密、解密、签名、验证、和密钥对生成。在本客户端内的 <i class=\"i\">X509</i> 对象中：用 X509.CreateCSR 来生成CSR，用 X509.KeyGenerate 来创建PEM格式密钥，用 X509.KeyParse 来解析PEM格式密钥，用 X509.KeyExport 来导出PEM格式密钥；这些功能都是根据相应的标准用js代码在二进制层面上实现的，二进制数据操作封装在了 <i class=\"i\">ASN1</i> 对象中：实现了 ASN.1 标准的二进制解析和封包，使用 ASN1.ParsePEM 方法可以解析任意的PEM格式密钥或证书。以上这些都是实现ACME网页客户端的核心基础。</span>\n\t\t\t<span class=\"langEN\">Thanks to the standardization of encryption functions by <a href=\"https://developer.mozilla.org/en-US/docs/Web/API/SubtleCrypto\" target=\"_blank\">crypto.subtle</a> of modern browsers, <i class=\"i\">RSA</i> and <i class=\"i\">ECC</i> encryption, decryption, signature, verification, and key pair generation can be implemented on web pages without relying on any other js library. In the <i class=\"i\">X509</i> object in this client: use X509.CreateCSR to generate CSR, use X509.KeyGenerate to create PEM format key, use X509.KeyParse to parse PEM format key, use X509.KeyExport to export PEM format key; These functions are implemented at the binary level with js code according to the corresponding standards, and binary data operations are encapsulated in <i class=\"i\">ASN1</i> objects: ASN.1 standard binary parsing and encapsulation are implemented, Arbitrary PEM format keys or certificates can be parsed using the ASN1.ParsePEM method. These are the core foundations for implementing the ACME web client.</span>\n\t\t</div>\n\t\t<div class=\"pd\" style=\"font-size:13px;color:#aaa\">\n\t\t\t<span class=\"langCN\">然后就是对接ACME实现证书的签发，和实现交互UI；对接ACME可以直接参考 RFC 8555 标准。有些证书颁发机构的ACME服务对浏览器支持不良，未提供齐全的 <i class=\"i\">Access-Control-*</i> 响应头，导致网页内无法直接调用服务接口；目前采用的解决办法非常简单粗暴，比如ZeroSSL：检测到此ACME服务存在跨域问题时，会调用 <i class=\"i\">acmeReadDirGotoCORS()</i> 方法告诉用户操作步骤（你可以<a onclick=\"acmeReadDirGotoCORS();alert('调用成功，请到第一步操作')\">点此</a>手动调用此方法），通过在他们的页面内运行本客户端来消除跨域问题（既然打不过，那就加入他们）。</span>\n\t\t\t<span class=\"langEN\">Then it is to connect with ACME to realize certificate issuance and realize interactive UI; for connecting with ACME, you can directly refer to the RFC 8555 standard. The ACME services of some certificate authorities do not support browsers well, and do not provide complete <i class=\"i\">Access-Control-*</i> response headers, so that the service interface cannot be called directly in the web page; the current solution is very simple and rude, such as ZeroSSL: detect this ACME When there is a cross-domain problem with the service, the <i class=\"i\">acmeReadDirGotoCORS()</i> method will be called to tell the user the operation steps (you can call this method manually by <a onclick=\"acmeReadDirGotoCORS();alert('Call succeeded, please go to step 1')\">clicking here</a>), and the cross-domain problem will be eliminated by running this client in their page (if we can't beat them, we'd better join them).</span>\n\t\t</div>\n\t</div>\n\t\n\t<div class=\"itemBox\">\n\t\t<div class=\"pd Bold\">\n\t\t\t<span class=\"langCN\">QQ群：交流与支持</span>\n\t\t\t<span class=\"langEN\">QQ group: communication and support</span>\n\t\t</div>\n\t\t<div class=\"pd\" style=\"font-size:13px;color:#aaa\">\n\t\t\t<span class=\"langCN\">欢迎加QQ群：<i class=\"i\">421882406</i>，纯小写口令：<i class=\"i\">xiangyuecn</i>。如需功能定制，网站、App、小程序、前端和后端等开发需求，请加此QQ群，联系群主（即作者），谢谢~</span>\n\t\t\t<span class=\"langEN\">Welcome to join the QQ group: <i class=\"i\">421882406</i> , code: <i class=\"i\">xiangyuecn</i> . If you need function customization, website, app, applet, front-end and back-end development needs, please join this QQ group and contact the group owner (ie the author), thank you~</span>\n\t\t</div>\n\t</div>\n\t\n</div>\n\n\n\n\n<div style=\"padding-top:20px;font-size:13px;color:#aaa\">\n\t<div class=\"pd langEN\">The Chinese-English translation is mainly from: Chrome comes with translation + Baidu translation, which is translated from Chinese to English.</div>\n\t\n\t<div class=\"pd\">\n\t\t<span class=\"versionBox\"></span>\n\t\t<a style=\"margin-left:15px\" href=\"https://github.com/xiangyuecn/ACME-HTML-Web-Browser-Client/blob/main/LICENSE\" target=\"_blank\">License: GPL-3.0</a>\n\t</div>\n</div>\n\n\n\n<div class=\"toastState\" style=\"display:none;position:fixed;padding:10px;bottom:10px;right:10px;width:360px;max-height:120px;overflow-y:auto;background:#fff;box-shadow: 0px 0px 3px #aaa;border-radius: 10px;\"></div>\n\n<div class=\"donateWidget\" style=\"position:fixed;top:30%;right:5px;width:160px\">\n\t<div style=\"border-radius:12px;background:linear-gradient(160deg, rgba(0,179,255,.7) 20%, rgba(177,0,255,.7) 80%);max-width:300px;padding:20px 10px;text-align: center;\">\n\t\t<div style=\"font-size:18px;color:#fff;\">\n\t\t\t<span class=\"langCN\">赏包辣条？</span>\n\t\t\t<span class=\"langEN\">Donate a Coke?</span>\n\t\t</div>\n\t\t<div style=\"font-size:14px;color:#fff;\">\n\t\t\t<div class=\"langCN\" style=\"padding:10px 0\">客户端工具开发维护不易，期望本项目对你能有所帮助，欢迎通过下面按钮打赏作者~</div>\n\t\t\t<span class=\"langEN\">It is not easy to develop and maintain client tools. I hope this project can help you. Welcome to reward the author through the following buttons~</span>\n\t\t</div>\n\t\t<div>\n\t\t\t<span class=\"langCN\">\n\t\t\t\t<a id=\"id_ek8v\" target=\"_blank\" class=\"mainBtn mainBtnMin\" style=\"color:#fff\" href=\"https://xiangyuecn.github.io/Docs/about.html\">打赏 <span class=\"donateBtnIco\"></span></a>\n\t\t\t\t<script> id_ek8v.href=/gitee\\\\.io/.test(location.host)?\"https://xiangyuecn.gitee.io/docs/about.html\":\"https://xiangyuecn.github.io/Docs/about.html\" </script>\n\t\t\t</span>\n\t\t\t<span class=\"langEN\">\n\t\t\t\t<a href=\"https://xiangyuecn.github.io/Docs/about.html\" target=\"_blank\" class=\"mainBtn mainBtnMin\" style=\"color:#fff\">Donate <span class=\"donateBtnIco\"></span></a>\n\t\t\t</span>\n\t\t</div>\n\t</div>\n</div>\n\n<div class=\"langBtnBox\" style=\"position:fixed;top:0;right:0;padding:5px 10px;font-size:14px;border-radius:0 0 0 10px;background:#f5f5f5;\">\n\tLanguage:\n\t  <a class=\"langBtn langBtn_cn\" onclick=\"LangClick('cn')\">中文</a>\n\t| <a class=\"langBtn langBtn_en\" onclick=\"LangClick('en')\">EN</a>\n</div>\n\n</div>\n\n\n\n<style>\nbody{\n\tword-wrap: break-word;\n\t--word-break: break-all;\n\tbackground:#f5f5f5 center top no-repeat;\n\tbackground-size: auto 680px;\n}\npre{\n\twhite-space:pre-wrap;\n}\nlabel,label *{\n\tcursor: pointer;\n}\nlabel:hover{\n\tcolor:#06c;\n}\na{\n\ttext-decoration: none;\n\tcolor:#06c;\n\tcursor: pointer;\n}\na:hover{\n\tcolor:#f00;\n}\ninput, textarea {\n\t--outline: 0;\n\tborder: 1px solid #999;\n\tpadding: 2px;\n\tbox-sizing: border-box;\n\tfont-size: 15px;\n\tline-height:24px;\n}\n\n.main{\n\tmax-width:900px;\n\tmargin:0 auto;\n\tpadding-bottom:80px\n}\n\n.mainBox{\n\tmargin-top:12px;\n\tpadding: 12px;\n\tborder-radius: 6px;\n\tbackground: #fff;\n\tbox-shadow: 2px 2px 3px #aaa;\n}\n\n\n.mainBtn{\n\tdisplay: inline-block;\n\tcursor: pointer;\n\tborder: none;\n\tborder-radius: 3px;\n\tbackground: #f80;\n\tcolor:#fff;\n\tpadding: 0 15px;\n\tline-height: 36px;\n\theight: 36px;\n\toverflow: hidden;\n\tvertical-align: middle;\n}\n.mainBtnMin{\n\theight: 30px;\n\tline-height: 30px;\n\tfont-size: 14px;\n\tpadding: 0 12px;\n}\n.mainBtn:hover{\n\topacity:0.8;\n}\n.mainBtn:active{\n\topacity:1;\n\tbackground: #f00;\n}\n\n.pd{\n\tpadding:0 0 8px 0;\n}\n.pdT{\n\tpadding:8px 0 0 0;\n}\n.lb{\n\tdisplay:inline-block;\n\tvertical-align: middle;\n\tbackground:#00940e;\n\tcolor:#fff;\n\tfont-size:14px;\n\tpadding:2px 8px;\n\tborder-radius: 99px;\n}\n\n.Fill {\n\tposition: absolute;\n\ttop: 0;\n\tleft: 0;\n\twidth: 100%;\n\theight: 100%;\n\toverflow: hidden;\n}\n.Center{\n\ttext-align: center;\n}\n.CenterV {\n\tdisplay: -webkit-flex;\n\tdisplay: -ms-flex;\n\tdisplay: -moz-flex;\n\tdisplay: flex;\n\t-webkit-align-items: center;\n\t-ms-align-items: center;\n\t-moz-align-items: center;\n\talign-items: center;\n}\n.FlexBox {\n\tdisplay: -webkit-flex;\n\tdisplay: -ms-flex;\n\tdisplay: -moz-flex;\n\tdisplay: flex;\n}\n.FlexBoxV{\n\t-webkit-flex-direction:column;\n\t-ms-flex-direction:column;\n\t-moz-flex-direction:column;\n\tflex-direction:column;\n}\n.FlexCenter{\n\t-webkit-box-pack:center;\n\t-ms-box-pack:center;\n\t-moz-box-pack:center;\n\tbox-pack:center;\n\t-webkit-justify-content:center;\n\t-ms-justify-content:center;\n\t-moz-justify-content:center;\n\tjustify-content:center;\n}\n.FlexCenterV{\n\t-webkit-box-align:center;\n\t-ms-box-align:center;\n\t-moz-box-align:center;\n\tbox-align:center;\n\t-webkit-align-items:center;\n\t-ms-align-items:center;\n\t-moz-align-items:center;\n\talign-items:center;\n}\n.FlexItem {\n\t-webkit-flex: 1;\n\t-ms-flex: 1;\n\t-moz-flex: 1;\n\tflex: 1;\n}\n\n\n.Bold{\n\tfont-weight: bold;\n}\n.code{\n\tpadding: 15px;\n\tbackground-color: #000;\n\tvertical-align: middle;\n\tcolor: #fff;\n\tfont-size: 14px;\n\twhite-space: pre-wrap;\n\tborder-radius: 6px;\n\tfont-style: normal;\n}\n.i{\n\tpadding: 2px 4px;\n\tbackground-color: #f6f6f6;\n\tvertical-align: top;\n\tcolor: #c7254e;\n\tfont-size: 12px;\n\twhite-space: pre-wrap;\n\tborder-radius: 4px;\n\tfont-style: normal;\n}\ni.must{\n\tcolor:red;\n\tfont-style:normal;\n}\n.itemTitle{\n\tfont-size: 24px;\n\tfont-weight: bold;\n\tcolor: #03baed;\n}\n.itemBox{\n\tpadding:8px;\n\tmargin-bottom:6px;\n\tborder:1px #ccc dashed;\n\tborder-radius: 6px;\n}\n</style>\n\n\n\n\n<script>\n//=================================================\n//================= UI functions ==================\n//=================================================\n//LICENSE: GPL-3.0, https://github.com/xiangyuecn/ACME-HTML-Web-Browser-Client\n(function(){\n\"use strict\";\nvar ChoiceAcmeURLStoreKey=\"ACME_HTML_choice_acmeURL\";\nvar InputDomainsStoreKey=\"ACME_HTML_input_domains\";\nvar InputEmailStoreKey=\"ACME_HTML_input_email\";\nvar DropConfigFile={}; //拖拽进来的上次配置文件\n\n/************** UI: Initialize on Launch **************/\nwindow.initMainUI=function(){\n\t$(\".eccCurveNames\").html(X509.SupportECCType2Names().join(Lang(\"、\",\", \")));\n\t$(\".donateBtnIco\").html(unescape(\"%uD83D%uDE18\"));\n\t$(\".versionBox\").html(Lang(\"版本: \"+Version,\"Ver: \"+Version));\n\t\n\tif(/mobile/i.test(navigator.userAgent)){\n\t\t$(\".main\").prepend($(\".langBtnBox\").css(\"position\",null));\n\t\t$(\".donateWidget\").css(\"position\",null);\n\t}\n\t\n\tCLog(\"initMainUI\",0,Lang(\n\\`一些高级配置：\n- 设置 X509.DefaultType2_RSA=\"4096\" 可以调整新生成的RSA密钥位数。\n- 设置 X509.DefaultType2_ECC=\"P-384\" 可以调整新生成的ECC密钥曲线，X509.SupportECCType2内为支持的曲线。\n- 设置 DefaultDownloadFileNames 内的属性可以修改对应下载的文件默认名称。\n- UI调试：完成第二步后允许进行UI调试，手动调用 Test_AllStepData_Save() 保存数据，刷新页面可恢复界面。\\`,\n\\`Some advanced configurations:\n- Set X509.DefaultType2_RSA=\"4096\" The number of newly generated RSA keys can be adjusted.\n- Set X509.DefaultType2_ECC=\"P-384\" The newly generated ECC key curve can be adjusted. The supported curve is in X509.SupportECCType2.\n- Setting the property in DefaultDownloadFileNames can modify the default name of the corresponding downloaded file.\n- UI debugging: Allow UI debugging after completing the step 2 . Manually call Test_AllStepData_Save() to save the data, and refresh the page to restore the interface.\\`));\n\t\n\tinitTest_Restore();\n\tacmeReadDirGotoCORSInit();\n\tdownloadFileNameShow();\n\tinitStep1();\n\tinitStep2();\n\tinitStep4();\n};\nvar initStep1=function(){\n\t$(\"input[name=choice_acmeURL]\").bind(\"click\",function(e){\n\t\tvar el=e.target;\n\t\tvar isManual=el.value==\"manual\";\n\t\t$(\".in_acmeURL\").css(\"opacity\",isManual?1:0.4)\n\t\t\t.val(isManual?step1ChoiceStoreVal:el.value)\n\t\t\t.attr(\"readonly\",isManual?null:\"\");\n\t\t\n\t\tvar descKey=$(el).attr(\"desckey\");\n\t\t$(\".descAcmeURL\").hide();\n\t\tif(descKey)$(\".\"+descKey).show();\n\t\t\n\t\tstep1ChoiceStoreVal=\"\";\n\t\tchoiceAcmeURLChangeAfter();\n\t});\n\tresetStep1();\n};\nvar step1ChoiceStoreVal;\nvar resetStep1=function(){\n\t//选中上次选择的证书颁发机构\n\tstep1ChoiceStoreVal=DropConfigFile.acmeURL||window.Default_ACME_URL||localStorage[ChoiceAcmeURLStoreKey]||\"\";\n\tvar choices=$(\"input[name=choice_acmeURL]\")\n\tvar idx=0;\n\tif(step1ChoiceStoreVal){\n\t\tvar manualIdx=0;\n\t\tfor(var i=0;i<choices.length;i++){\n\t\t\tif(choices[i].value==step1ChoiceStoreVal) idx=i+1;\n\t\t\tif(choices[i].value==\"manual\") manualIdx=i+1;\n\t\t}\n\t\tif(!idx)idx=manualIdx //手动填写\n\t\tidx--;\n\t}\n\tchoices[idx].click();\n};\nvar initStep2=function(){\n\t//证书私钥UI\n\t$(\".privateKeyBox\").hide();\n\t$(\"input[name=choice_privateKey]\").bind(\"click\",function(e){\n\t\tvar el=e.target;\n\t\tvar isManual=el.value==\"manual\";\n\t\t$(\".in_privateKey\").css(\"opacity\",isManual?1:0.4)\n\t\t\t.val(\"\")\n\t\t\t.attr(\"readonly\",isManual?null:\"\");\n\t\t$(\".privateKeyBox\").show();\n\t\t\n\t\tconfigPrivateKeyGenerate(el.value);//生成密钥\n\t\tconfigStepShow();//重新显示界面\n\t});\n\t\n\t//ACME账户私钥UI\n\t$(\".accountKeyBox\").hide();\n\t$(\"input[name=choice_accountKey]\").bind(\"click\",function(e){\n\t\tvar el=e.target;\n\t\tvar isManual=el.value==\"manual\";\n\t\t$(\".in_accountKey\").css(\"opacity\",isManual?1:0.4)\n\t\t\t.val(\"\")\n\t\t\t.attr(\"readonly\",isManual?null:\"\");\n\t\t$(\".accountKeyBox\").show();\n\t\t\n\t\tconfigAccountKeyGenerate(el.value);//生成密钥\n\t\tconfigStepShow();//重新显示界面\n\t});\n};\n\n\n//下一步操作提示\nvar NextStepTips=function(){\n\treturn '<span style=\"font-size:24px;font-weight:bold;\">'+Lang(\"请进行下一步操作。\",\" Please proceed to the next step.\")+'</span>';\n};\n//请稍候提示\nvar PleaseWaitTips=function(){\n\treturn Lang(\" 请稍候... \",\" Please wait... \");\n};\n//请重试提示\nvar TryAgainTips=function(){\n\treturn Lang(\" 请重试！\",\" Please try again! \");\n};\n//每一步的状态更新显示\nvar ShowState=function(elem,msg,color,tag){\n\tvar now=new Date();\n\tvar t=(\"0\"+now.getHours()).substr(-2)\n\t\t+\":\"+(\"0\"+now.getMinutes()).substr(-2)\n\t\t+\":\"+(\"0\"+now.getSeconds()).substr(-2);\n\t$(elem).html(msg===false?'':'<div style=\"color:'+(!color?\"\":color==1?\"red\":color==2?\"#0b1\":color==3?\"#fa0\":color)+'\">'+(tag==null?'['+t+'] ':tag)+msg+'</div>');\n\treturn msg;\n};\nwindow.Toast=function(msg,color,time){\n\tShowState(\".toastState\",msg,color,\"\");\n\t\n\t$(\".toastState\").show();\n\tclearTimeout(Toast._int);\n\tToast._int=setTimeout(function(){ $(\".toastState\").hide(); }, time||5000);\n};\nwindow.onerror=function(message, url, lineNo, columnNo, error){\n\t//https://www.cnblogs.com/xianyulaodi/p/6201829.html\n\tToast('【Uncaught Error】'+message+'<pre>'+\"at:\"+lineNo+\":\"+columnNo+\" url:\"+url+\"\\\\n\"+(error&&error.stack||\"-\")+'</pre>',1,15000);\n};\n\n\n\n//用户点击操作同步控制，新点击操作要终止之前未完成的操作\nvar UserClickSyncID=0;\nvar UserClickSyncKill=function(id,tag,msg){\n\tif(id!=UserClickSyncID){\n\t\tvar abort=Lang(\"被终止\",\"Abort\",1);\n\t\tCLog(tag+\" \"+abort,3,\"From: \"+msg+\" [\"+abort+\"]\");\n\t\treturn true;\n\t}\n};\n\n\n\n\n\n/************** UI Step1: Read ACME service directory **************/\n//证书颁发机构单选按钮点击后处理\nvar choiceAcmeURLChangeAfter=function(){\n\tUserClickSyncID++;\n\t\n\t$(\".step1Hide\").hide();\n\t$(\".step1Show\").show();\n\tShowState(\".acmeReadDirState\",false);\n\t\n\tif($(\".in_acmeURL\").val())acmeReadDirClick();\n};\n//点击读取服务目录按钮\nwindow.acmeReadDirClick=function(){\n\tvar id=++UserClickSyncID;\n\t\n\t$(\".step1Hide\").hide();\n\t$(\".step1Show\").show();\n\tvar tag=\"Step-1\",sEl=\".acmeReadDirState\";\n\t\n\tvar url=$(\".in_acmeURL\").val().trim();\n\tif(!url){\n\t\tShowState(sEl,Lang(\"请填写服务URL！\",\"Please fill in the service URL!\"),1);\n\t\treturn;\n\t}\n\tlocalStorage[ChoiceAcmeURLStoreKey]=url;\n\turl=ACME.URL=url.replace(/\\\\/$/,\"\");\n\t\n\tvar msg0=CLog(tag,0, ShowState(sEl,PleaseWaitTips()+Lang(\"正在读取服务目录，\",\"Reading service directory, \")+\" URL=\"+ACME.URL, 2));\n\tvar reqDir=function(){\n\t\tACME.Directory(function(cache,saveCache){\n\t\t\tsaveCacheCors=function(corsOK,err){\n\t\t\t\tcache.corsOK=corsOK?1:-1;\n\t\t\t\tcache.corsError=err||\"\";\n\t\t\t\tsaveCache();\n\t\t\t};\n\t\t\tif(cache.corsOK==1) dirOK();//已缓存的，此ACME服务正常\n\t\t\telse if(cache.corsOK==-1) testCORSFail(cache.corsError, true);//不正常已缓存\n\t\t\telse testCORS();//检测是否能正常调用接口，是否支持跨域\n\t\t},function(err,status){\n\t\t\tif(UserClickSyncKill(id,tag,msg0+\" err: \"+err))return;\n\t\t\tif(status===0){ //可能是跨域无法读取到任何数据\n\t\t\t\tCLog(tag,1, ShowState(sEl,Lang(\"读取服务目录出错：无法访问此URL。\",\"Read service directory error: This URL cannot be accessed.\")+TryAgainTips(), 1));\n\t\t\t\t\n\t\t\t\tacmeReadDirGotoCORS(Lang(\"如果你可以在浏览器中直接打开并访问此ACME服务URL，代表此ACME服务对跨域访问支持不良，则请按下面步骤操作：\",\"If you can open and access this ACME service URL directly in your browser, it represents that this ACME service has poor support for cross-domain access, please follow the steps below:\"));\n\t\t\t}else{\n\t\t\t\tCLog(tag,1, ShowState(sEl,Lang(\"读取服务目录出错：\"+err,\"Read service directory error: \"+err)+TryAgainTips(), 1));\n\t\t\t};\n\t\t});\n\t};\n\tvar saveCacheCors;\n\tvar dirOK=function(){\n\t\tif(UserClickSyncKill(id,tag,msg0))return;\n\t\tconfigStepShow();\n\t\tCLog(tag,0, ShowState(sEl,Lang(\"读取服务目录成功，\",\"Read service directory OK,\")\n\t\t\t+NextStepTips()+\" URL=\"+ACME.URL, 2), ACME.DirData);\n\t};\n\t\n\t//ZeroSSL接口跨域支持太差，发现这种就直接在他们网站里面跑\n\tvar testCORS=function(){\n\t\tif(UserClickSyncKill(id,tag,msg0))return;\n\t\tmsg0=CLog(tag,0, ShowState(sEl,PleaseWaitTips()+Lang(\"正在测试此ACME服务对浏览器的支持情况，\",\"Testing browser support for this ACME service, \")+\" URL=\"+ACME.URL, 2));\n\t\tACME.GetNonce(true,function(){\n\t\t\tACME.TestAccountCORS(function(){\n\t\t\t\tCLog(tag,0, Lang(\"此ACME服务对浏览器的支持良好。\",\"This ACME service has good browser support.\"));\n\t\t\t\tsaveCacheCors(true);\n\t\t\t\tdirOK();\n\t\t\t},testCORSFail);\n\t\t},function(err,corsFail){ //GetNonce 能明确检测到是否支持跨域可以缓存起来，账户地址可能是网络错误不缓存\n\t\t\tif(corsFail) saveCacheCors(false, err);\n\t\t\ttestCORSFail(err,corsFail);\n\t\t});\n\t};\n\tvar testCORSFail=function(err,corsFail){\n\t\tif(UserClickSyncKill(id,tag,msg0+\" err: \"+err))return;\n\t\tCLog(tag,1, ShowState(sEl,Lang(\n\t\t\t\"测试此ACME服务对浏览器的支持情况，发生错误：\"+err\n\t\t\t,\"Test browser support for this ACME service, An error occurred: \"+err)\n\t\t\t+(corsFail?\"\":TryAgainTips()), 1));\n\t\tLangReview(sEl);//err from cache\n\t\tif(corsFail) acmeReadDirGotoCORS();\n\t};\n\t\n\treqDir();\n};\n\n\n\n\n\n\n/************** UI Step2: Certificate Configuration **************/\n//显示第二步界面\nvar configStepShow=function(){\n\t$(\".step2Hide\").hide();\n\t$(\".step2Show\").show();\n\tShowState(\".configStepState\",false);\n\t\n\t$(\".eabShow\")[ACME.StepData.needEAB?'show':'hide']();\n\tif(DropConfigFile.eabKid)$(\".in_eab_kid\").val(DropConfigFile.eabKid);\n\tif(DropConfigFile.eabKey)$(\".in_eab_key\").val(DropConfigFile.eabKey);\n\t\n\t$(\".termsAgreeBox\")[ACME.StepData.termsURL?'show':'hide']();\n\t$(\".termsAgreeTips\").html(Lang('我同意此证书颁发机构ACME服务的<a href=\"'+ACME.StepData.termsURL+'\" target=\"_blank\">服务条款</a>。', 'I agree to the <a href=\"'+ACME.StepData.termsURL+'\" target=\"_blank\">terms of service</a> for this Certificate Authority ACME Service.'));\n\t$(\".choice_termsAgree\").prop(\"checked\",true);\n\t\n\tvar el=$(\".in_domains\");//填充上次填写的域名列表\n\tvar valS=localStorage[InputDomainsStoreKey];\n\tvar val=DropConfigFile.domains&&DropConfigFile.domains.join(\", \")||valS;\n\tif(!el.val()){\n\t\tel.val(val||\"\");\n\t}\n\t$(\".choice_domains_store\").prop(\"checked\", !!valS);\n\t\n\tvar el=$(\".in_email\");//填充上次填写的联系邮箱\n\tvar valS=localStorage[InputEmailStoreKey];\n\tvar val=DropConfigFile.email||valS;\n\tif(!el.val()){\n\t\tel.val(val||\"\");\n\t}\n\t$(\".choice_email_store\").prop(\"checked\", !!valS);\n\t\n\tvar setKey=function(k){\n\t\tif(DropConfigFile[k]){\n\t\t\t$(\"input[name=choice_\"+k+\"][value=manual]\")[0].click();\n\t\t\t$(\".in_\"+k).val(DropConfigFile[k]);\n\t\t}\n\t};\n\tsetKey(\"privateKey\");setKey(\"accountKey\");\n\t\n\tDropConfigFile={};//配置完成，丢弃拖拽进来的配置信息\n};\n//生成证书的密钥对\nvar configPrivateKeyGenerate=function(type){\n\tvar id=++UserClickSyncID;\n\tvar tag=\"Step-2\",sEl=\".privateKeyState\";\n\t\n\tvar keyTag=\"\",type2;\n\tif(type==\"generateRSA\"){\n\t\ttype=\"RSA\";type2=X509.DefaultType2_RSA;\n\t\tkeyTag=Lang(\"证书RSA私钥(\"+type2+\"位)\",\"Certificate RSA private key (\"+type2+\" bits)\");\n\t}else if(type==\"generateECC\"){\n\t\ttype=\"ECC\";type2=X509.DefaultType2_ECC; var type2N=X509.SupportECCType2[type2]||type2;\n\t\tkeyTag=Lang(\"证书ECC私钥(\"+type2N+\"曲线)\",\"Certificate ECC Private Key (\"+type2N+\" curve)\");\n\t}else{\n\t\tShowState(sEl,false);\n\t\treturn;\n\t};\n\t\n\tvar msg0=CLog(tag,0, ShowState(sEl,PleaseWaitTips()+Lang(\"正在创建\",\"Generating \")+keyTag, 2));\n\tX509.KeyGenerate(type,type2,function(pem){\n\t\tif(UserClickSyncKill(id,tag,msg0))return;\n\t\t$(\".in_privateKey\").val(pem);\n\t\tCLog(tag,0, ShowState(sEl,keyTag+Lang(\"，创建成功。\",\", generated successfully.\"), 2), '\\\\n'+pem);\n\t},function(err){\n\t\tif(UserClickSyncKill(id,tag,msg0+\" err: \"+err))return;\n\t\tCLog(tag,1, ShowState(sEl,keyTag+Lang(\"，发生错误：\"+err,\", An error occurred: \"+err), 1));\n\t});\n};\n//生成ACME账户的密钥对\nvar configAccountKeyGenerate=function(type){\n\tvar id=++UserClickSyncID;\n\tvar tag=\"Step-2\",sEl=\".accountKeyState\";\n\t\n\tvar keyTag=\"\",type2;\n\tif(type==\"generateRSA\"){\n\t\ttype=\"RSA\";type2=X509.DefaultType2_RSA;\n\t\tkeyTag=Lang(\"ACME账户RSA私钥(\"+type2+\"位)\",\"ACME account RSA private key (\"+type2+\" bits)\");\n\t}else if(type==\"generateECC\"){\n\t\ttype=\"ECC\";type2=X509.DefaultType2_ECC; var type2N=X509.SupportECCType2[type2]||type2;\n\t\tkeyTag=Lang(\"ACME账户ECC私钥(\"+type2N+\"曲线)\",\"ACME account ECC Private Key (\"+type2N+\" curve)\");\n\t}else{\n\t\tShowState(sEl,false);\n\t\treturn;\n\t};\n\t\n\tvar msg0=CLog(tag,0, ShowState(sEl,PleaseWaitTips()+Lang(\"正在创建\",\"Generating \")+keyTag, 2));\n\tX509.KeyGenerate(type,type2,function(pem){\n\t\tif(UserClickSyncKill(id,tag,msg0))return;\n\t\t$(\".in_accountKey\").val(pem);\n\t\tCLog(tag,0, ShowState(sEl,keyTag+Lang(\"，创建成功。\",\", generated successfully.\"), 2), '\\\\n'+pem);\n\t},function(err){\n\t\tif(UserClickSyncKill(id,tag,msg0+\" err: \"+err))return;\n\t\tCLog(tag,1, ShowState(sEl,keyTag+Lang(\"，发生错误：\"+err,\", An error occurred: \"+err), 1));\n\t});\n};\n//点击确定按钮，完成配置域名和私钥的配置\nwindow.configStepClick=function(){\n\tvar id=++UserClickSyncID;\n\tvar tag=\"Step-2\",sEl=\".configStepState\";\n\t\n\t$(\".step2Hide\").hide();\n\t$(\".step2Show\").show();\n\tShowState(sEl,false);\n\t\n\tvar domains=$(\".in_domains\").val().trim();\n\tvar domainsStore=$(\".choice_domains_store\").prop(\"checked\");\n\tvar privateKey=$(\".in_privateKey\").val().trim();\n\tvar accountKey=$(\".in_accountKey\").val().trim();\n\tvar email=$(\".in_email\").val().trim();\n\tvar emailStore=$(\".choice_email_store\").prop(\"checked\");\n\tvar eabKid=$(\".in_eab_kid\").val().trim();\n\tvar eabKey=$(\".in_eab_key\").val().trim();\n\tvar termsAgree=$(\".choice_termsAgree\").prop(\"checked\");\n\t\n\t//域名转成数组\n\tdomains=domains.replace(/\\\\s+/g,\",\").replace(/，+/g,\",\").split(/,+/);\n\tfor(var i=0,mp={};i<domains.length;i++){\n\t\tvar domain=domains[i];\n\t\tif(!domain){\n\t\t\tdomains.splice(i,1); i--; continue;\n\t\t}else if(mp[domain])\n\t\t\treturn ShowState(sEl,Lang(\"域名\"+domain+\"重复！\",\"Duplicate domain name \"+domain+\"!\"),1);\n\t\tif(/[:\\\\/;]/.test(domain))//简单校验域名格式\n\t\t\treturn ShowState(sEl,Lang(\"域名\"+domain+\"格式错误！\",\"Format error of domain name \"+domain+\"!\"),1);\n\t\tmp[domain]=1;\n\t}\n\tlocalStorage[InputDomainsStoreKey]=domainsStore?domains.join(\", \"):\"\";\n\tlocalStorage[InputEmailStoreKey]=emailStore?email:\"\";\n\t\n\t//校验是否输入\n\tif(!domains.length)\n\t\treturn ShowState(sEl,Lang(\"请填写证书中要包含的域名！\",\"Please fill in domain name to be included in the certificate!\"),1);\n\tif(!privateKey)\n\t\treturn ShowState(sEl,Lang(\"请选择证书的私钥！\",\"Please select the private key of the certificate!\"),1);\n\tif(!accountKey)\n\t\treturn ShowState(sEl,Lang(\"请选择ACME账户的私钥！\",\"Please select the private key of ACME account!\"),1);\n\tif(!/.+@.+\\\\..+/.test(email) || /[\\\\s,;]/.test(email))\n\t\treturn ShowState(sEl,Lang(\"请正确填写联系邮箱！\",\"Please fill in the contact email correctly!\"),1);\n\tif(ACME.StepData.needEAB && !(eabKid && eabKey))\n\t\treturn ShowState(sEl,Lang(\"请填写EAB KID和HMAC KEY！\",\"Please fill in EAB KID and HMAC KEY!\"),1);\n\tif(ACME.StepData.termsURL && !termsAgree)\n\t\treturn ShowState(sEl,Lang(\"未同意此ACME服务的服务条款！\",\"Do not agree to the terms of service of this acme service!\"),1);\n\t\n\t//校验私钥格式是否支持\n\tvar privateKeyInfo, parsePrivateKey=function(){\n\t\tX509.KeyParse(privateKey,function(info){\n\t\t\tprivateKeyInfo=info; parseAccountKey();\n\t\t},function(err){\n\t\t\tShowState(sEl,Lang(\"证书的私钥无效：\",\"The private key of the certificate is invalid: \")+err,1);\n\t\t},1);\n\t};\n\tvar accountKeyInfo,parseAccountKey=function(){\n\t\tX509.KeyParse(accountKey,function(info){\n\t\t\taccountKeyInfo=info; parseKeyOK();\n\t\t},function(err){\n\t\t\tShowState(sEl,Lang(\"ACME账户的私钥无效：\",\"The private key of the ACME account is invalid: \")+err,1);\n\t\t},1);\n\t};\n\t\n\tvar msg0=CLog(tag,0, ShowState(sEl,PleaseWaitTips(), 2));\n\t//设置配置数据\n\tvar parseKeyOK=function(){\n\t\tif(UserClickSyncKill(id,tag,msg0))return;\n\t\t\n\t\tACME.StepData.config={\n\t\t\tdomains:domains\n\t\t\t,privateKey:privateKeyInfo\n\t\t\t,accountKey:accountKeyInfo\n\t\t\t,email:email\n\t\t\t,eabKid:eabKid\n\t\t\t,eabKey:eabKey\n\t\t};\n\t\tCLog(tag, 0, \"config\", ACME.StepData.config);\n\t\t\n\t\tacmeNewAccount();\n\t};\n\t\n\t//ACME账户接口调用\n\tvar acmeNewAccount=function(){\n\t\tvar msg0=CLog(tag,0, ShowState(sEl,PleaseWaitTips()+Lang(\"正在调用ACME服务的newAccount接口：\",\"The newAccount interface that is calling the ACME service: \")+ACME.DirData.newAccount, 2));\n\t\tACME.StepAccount(function(){\n\t\t\tif(UserClickSyncKill(id,tag,msg0))return;\n\t\t\tacmeNewOrder();\n\t\t},function(err){\n\t\t\tif(UserClickSyncKill(id,tag,msg0+\" err: \"+err))return;\n\t\t\tCLog(tag,1, ShowState(sEl,Lang(\"调用ACME服务的newAccount接口：\",\"Call the newAccount interface of the ACME service: \")\n\t\t\t\t+ACME.DirData.newAccount+Lang(\"，发生错误：\"+err,\", An error occurred: \"+err), 1));\n\t\t});\n\t};\n\t//ACME订单创建接口调用\n\tvar acmeNewOrder=function(){\n\t\tvar msg0,onProgress=function(tips){\n\t\t\tif(id!=UserClickSyncID)return;\n\t\t\tmsg0=CLog(tag,0, ShowState(sEl,PleaseWaitTips()+Lang(\"正在调用ACME服务的订单接口。\",\"The order interface that is calling the ACME service.\")+' '+tips+\" URL:\"+ACME.DirData.newOrder, 2));\n\t\t}; onProgress(\"\");\n\t\tACME.StepOrder(onProgress,function(){\n\t\t\tif(UserClickSyncKill(id,tag,msg0))return;\n\t\t\tacmeOK();\n\t\t},function(err){\n\t\t\tif(UserClickSyncKill(id,tag,msg0+\" err: \"+err))return;\n\t\t\tCLog(tag,1, ShowState(sEl,Lang(\"调用ACME服务的订单接口：\",\"Call the order interface of the ACME service: \")\n\t\t\t\t+ACME.DirData.newOrder+Lang(\"，发生错误：\"+err,\", An error occurred: \"+err), 1));\n\t\t});\n\t};\n\t//ACME接口调用完成，显示下一步\n\tvar acmeOK=function(){\n\t\tverifyStepShow();\n\t\t\n\t\tCLog(tag,0, ShowState(sEl,Lang(\n\t\t\t \"配置完成，\"\n\t\t\t,\"Configuration is complete, \")\n\t\t\t+NextStepTips(), 2), ACME.StepData);\n\t};\n\t\n\tparsePrivateKey();\n};\n\n\n\n\n\n\n/************** UI Step3: Verify Domain Ownership **************/\n//显示第三步界面\nvar verifyStepShow=function(){\n\t$(\".step3Hide\").hide();\n\t$(\".step3Show\").show();\n\t$(\".verifyStepBtn\").show();\n\t$(\".verifyRunStopBtn\").hide();\n\t$(\".finalizeOrderBtn\").hide();\n\tShowState(\".verifyStepState\",false);\n\t\n\t//显示所有域名的验证界面\n\tverifyBoxShow();\n};\n//停止验证\nwindow.verifyRunStopClick=function(){\n\tvar id=++UserClickSyncID;\n\t$(\".verifyStepBtn\").show();\n\t$(\".verifyRunStopBtn\").hide();\n\t$(\".finalizeOrderBtn\").hide();\n\tShowState(\".verifyStepState\",false);\n\tverifyRunStopFn&&verifyRunStopFn();\n};\nvar verifyRunStopFn;\n//点击开始验证按钮，验证所有域名所有权\nwindow.verifyStepClick=function(){\n\tvar id=++UserClickSyncID;\n\tvar tag=\"Step-3\",sEl=\".verifyStepState\";\n\t\n\t$(\".step3Hide\").hide();\n\t$(\".step3Show\").show();\n\t$(\".verifyStepBtn\").hide();\n\t$(\".verifyRunStopBtn\").show();\n\t$(\".finalizeOrderBtn\").hide();\n\tShowState(sEl,false);\n\t\n\tvar domains=ACME.StepData.config.domains,auths=ACME.StepData.auths;\n\t//验证中更新状态显示\n\tvar updateState=function(init,stopNow,isFail){\n\t\tvar isStop=stopNow||id!=UserClickSyncID;\n\t\tvar okCount=0,errCount=0,execCount=0;\n\t\tfor(var i0=0;i0<domains.length;i0++){\n\t\t\tvar domain=domains[i0],auth=auths[domain],challs=auth.challenges;\n\t\t\tvar stateEl=$(\".verifyItemState_\"+i0);\n\t\t\t//authState: 0 待验证，1验证中，2等待重试authTryCount，11验证成功，12验证失败authError\n\t\t\tif(auth.authState==11){//验证成功的，初始化也不要修改验证方式了\n\t\t\t\tShowState(stateEl,ACME.ChallName(challs[auth.challIdx])+\" OK!\",2,\"\");\n\t\t\t\tokCount++;\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tif(init){ //记住选中的验证类型\n\t\t\t\tvar choiceEl=$(\"input[name=choice_authItem_\"+i0+\"]\");\n\t\t\t\tfor(var i=0;i<choiceEl.length;i++){\n\t\t\t\t\tvar el=choiceEl[i];\n\t\t\t\t\tif(!el.checked){ //未选中的隐藏掉\n\t\t\t\t\t\t$(el.parentNode).hide();\n\t\t\t\t\t}else{\n\t\t\t\t\t\tauth.challIdx=+$(el).attr(\"challidx\");\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tauth.authState=0;\n\t\t\t\tauth.authTryCount=0;\n\t\t\t\tauth.authError=\"\";\n\t\t\t\tauth.authTimer=0;\n\t\t\t}\n\t\t\tvar challName=ACME.ChallName(challs[auth.challIdx]);\n\t\t\tif(auth.authState==12){//验证失败\n\t\t\t\tShowState(stateEl,challName+Lang(\"，验证失败：\",\", Verify failed: \")\n\t\t\t\t\t+auth.authError,1,\"\");\n\t\t\t\terrCount++;\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\texecCount++;\n\t\t\tif(isStop){\n\t\t\t\tShowState(stateEl,false);\n\t\t\t\tclearTimeout(auth.authTimer); auth.authTimer=0;\n\t\t\t}else if(auth.authState==2)\n\t\t\t\tShowState(stateEl,Lang(\"等待重试中...\",\"Waiting for retry...\")\n\t\t\t\t\t+\" \"+auth.authTryCount+\" \"+auth.authError,3,\"\");\n\t\t\telse if(auth.authState==1)\n\t\t\t\tShowState(stateEl,Lang(\"验证中...\",\"Verify in progress...\"),0,\"\");\n\t\t\telse ShowState(stateEl,Lang(\"等待验证...\",\"Waiting for verify...\"),0,\"\");\n\t\t}\n\t\tif(!isStop || stopNow){\n\t\t\tvar goto2=Lang(\"请返回第二步重新开始操作！\",\"Please go back to step 2 and start over! \");\n\t\t\tvar msg=ShowState(sEl,(isFail?Lang(\"验证失败，\",\"Verify failed, \")+goto2:\n\t\t\t\t\tisStop?Lang(\"已取消，\",\"Canceled, \")+goto2:\n\t\t\t\t\tLang(\"正在验证，请耐心等待... \",\"Verifying, please wait... \"))\n\t\t\t\t+\"<div>\"\n\t\t\t\t\t+Lang(\"验证通过：\",\"Verify pass: \")+okCount+\", \"\n\t\t\t\t\t+Lang(\"未通过：\",\"Failed: \")+errCount+\", \"\n\t\t\t\t\t+Lang(\"验证中：\",\"Verify in progress: \")+execCount\n\t\t\t\t+\"</div>\"\n\t\t\t\t, isStop?1:0);\n\t\t\tif(isStop){\n\t\t\t\tCLog(tag, 1, msg);\n\t\t\t}\n\t\t}\n\t}\n\tupdateState(1);\n\t//取一个进行验证\n\tvar run=function(){\n\t\tif(id!=UserClickSyncID)return;\n\t\tupdateState();\n\t\tvar authItem,hasRunning=0,okCount=0,errCount=0;\n\t\tfor(var i0=0;i0<domains.length;i0++){\n\t\t\tvar domain=domains[i0],auth=auths[domain];\n\t\t\tif(!authItem && !auth.authState) authItem=auth;\n\t\t\tif(auth.authState==1)hasRunning++;\n\t\t\tif(auth.authState==11)okCount++;\n\t\t\tif(auth.authState==12)errCount++;\n\t\t}\n\t\tif(okCount==domains.length)//全部验证成功\n\t\t\treturn verifyOK();\n\t\tif(okCount+errCount==domains.length)//全部验证完成，存在不通过的\n\t\t\treturn verifyFail();\n\t\tif(!authItem || hasRunning)return;//没有待验证的或已有验证中，继续等待\n\t\t\n\t\tauthItem.authState=1;\n\t\tauthItem.authTryCount++;\n\t\tauthItem.authError=\"\";\n\t\tupdateState();\n\t\tACME.StepVerifyAuthItem(authItem, authItem.challIdx, function(isOk, retryTime, err){\n\t\t\tif(id!=UserClickSyncID)return;\n\t\t\tif(isOk){\n\t\t\t\tauthItem.authState=11;\n\t\t\t}else{\n\t\t\t\tauthItem.authState=2;\n\t\t\t\tauthItem.authError=err;\n\t\t\t\tauthItem.authTimer=setTimeout(function(){\n\t\t\t\t\tauthItem.authState=0;\n\t\t\t\t\tauthItem.authTimer=0;\n\t\t\t\t\trun();\n\t\t\t\t}, retryTime);\n\t\t\t}\n\t\t\trun();\n\t\t}, function(err){\n\t\t\tif(id!=UserClickSyncID)return;\n\t\t\tauthItem.authState=12;\n\t\t\tauthItem.authError=err;\n\t\t\trun();\n\t\t});\n\t};\n\t\n\tCLog(tag,0,\"==========Verify Start==========\");\n\tvar verifyEnd=function(){\n\t\t$(\".verifyRunStopBtn\").hide();\n\t\tverifyRunStopFn=null;\n\t\tCLog(tag,0,\"==========Verify End==========\");\n\t};\n\t//中途停止控制\n\tverifyRunStopFn=function(){\n\t\tverifyEnd();\n\t\tupdateState(0,1);\n\t};\n\t//验证完成，存在不通过的\n\tvar verifyFail=function(){\n\t\tCLog(tag,1,\"Verify Fail!\");\n\t\tupdateState(0,1,1);\n\t\tverifyEnd();\n\t};\n\t//全部验证成功\n\tvar verifyOK=function(){\n\t\tCLog(tag,0,\"Verify OK!\");\n\t\tverifyEnd();\n\t\t\n\t\tfinalizeOrderClick();\n\t};\n\t\n\t//调用完成订单接口，生成证书\n\twindow.finalizeOrderClick=function(){\n\t\t$(\".finalizeOrderBtn\").hide();\n\t\tvar msg0,onProgress=function(tips){\n\t\t\tif(id!=UserClickSyncID)return;\n\t\t\tmsg0=CLog(tag,0, ShowState(sEl,PleaseWaitTips()\n\t\t\t+Lang(\"验证已通过，正在签发证书。\",\"Verify passed, issuing certificate.\")\n\t\t\t+' '+tips, 2));\n\t\t}; onProgress(\"\");\n\t\tACME.StepFinalizeOrder(onProgress,function(){\n\t\t\tif(UserClickSyncKill(id,tag,msg0))return;\n\t\t\t//显示下一步\n\t\t\tdownloadStepShow();\n\t\t\t\n\t\t\tCLog(tag,0, ShowState(sEl,Lang(\n\t\t\t\t \"验证已通过，证书已签发，\"\n\t\t\t\t,\"Verification passed, The certificate has been issued, \")\n\t\t\t\t+NextStepTips(), 2), ACME.StepData);\n\t\t},function(err){\n\t\t\tif(UserClickSyncKill(id,tag,msg0+\" err: \"+err))return;\n\t\t\t$(\".finalizeOrderBtn\").show();\n\t\t\tCLog(tag,1, ShowState(sEl,Lang(\"签发证书发生错误，\",\"Error issuing certificate, \")+TryAgainTips()\n\t\t\t\t+Lang(\"如果多次重试都无法签发证书，可能需要返回第二步重新开始操作。\",\"If the certificate cannot be issued after multiple retries, you may need to return to step 2 to restart the operation.\")\n\t\t\t\t+\" Error: \"+err, 1));\n\t\t});\n\t};\n\t\n\trun();\n};\n\n\n\n\n\n\n\n/************** UI Step4: Download and save the certificate PEM file **************/\n//显示第四步界面\nvar downloadStepShow=function(){\n\t$(\".step4Hide\").hide();\n\t$(\".step4Show\").show();\n\tShowState(\".downloadStepState\",false);\n\t\n\tvar config=ACME.StepData.config;\n\tvar hasPEM=ACME.StepData.order.downloadPEM;\n\tvar pemTxt=hasPEM||Lang(\"未发现证书，请到第二步重新操作！\",\"No certificate found, please go to the step 2 to operate again!\",true);\n\t\n\t$(\".txt_downloadCert\").val(pemTxt);\n\t$(\".txt_downloadKey\").val(config.privateKey.pem);\n\t\n\tdownFileName=config.domains[0].replace(/^\\\\*\\\\./g,\"\").replace(/[^\\\\w]/g,\"_\");\n\tdownloadFileNameShow(downFileName);\n\t\n\tvar logTxts=[];\n\tvar SP=function(tag){\n\t\tlogTxts.push(\"\\\\n=========== \"+tag+\" ===========\");\n\t\treturn logTxts\n\t}\n\tvar logSet=Object.assign({\n\t\tacmeURL:ACME.URL\n\t\t,accountURL:ACME.StepData.account.url\n\t\t,X509:{\n\t\t\tDefaultType2_RSA:X509.DefaultType2_RSA\n\t\t\t,DefaultType2_ECC:X509.DefaultType2_ECC\n\t\t}\n\t\t,Window:{\n\t\t\tDefaultDownloadFileNames:DefaultDownloadFileNames\n\t\t}\n\t},config);\n\tlogSet.privateKey=config.privateKey.pem;\n\tlogSet.accountKey=config.accountKey.pem;\n\t\n\tvar logTitle='/********** '+Lang($(\".clientNameCN\").html(),$(\".clientNameEN\").html(),true)+' *********/';\n\tlogTxts.push(logTitle);\n\tlogTxts.push(Lang(\"在线网址（GitHub）：\",\"Online website (GitHub): \", true)+'https://xiangyuecn.github.io/ACME-HTML-Web-Browser-Client/ACME-HTML-Web-Browser-Client.html');\n\tlogTxts.push(Lang(\"在线网址（Gitee）：\",\"Online website (Gitee): \", true)+'https://xiangyuecn.gitee.io/acme-html-web-browser-client/ACME-HTML-Web-Browser-Client.html');\n\tlogTxts.push(\"\");\n\tlogTxts.push('GitHub: https://github.com/xiangyuecn/ACME-HTML-Web-Browser-Client');\n\tlogTxts.push('Gitee: https://gitee.com/xiangyuecn/ACME-HTML-Web-Browser-Client');\n\tlogTxts.push(\"\");\n\tlogTxts.push(Lang(\"提示：你可以将本文件拖拽进客户端网页内，将自动填充本次证书申请的所有配置参数。\",\"Tip: You can drag and drop this file into the client web page, and all configuration parameters of this certificate application will be filled automatically.\",true));\n\tlogTxts.push(\"\");\n\tSP(Lang(\"证书申请时间\",\"Certificate Application Time\",true))\n\t\t.push(new Date().toLocaleString());\n\tSP(Lang(\"域名列表\",\"Domain Name List\",true))\n\t\t.push(config.domains.join(\", \"));\n\tSP(Lang(\"ACME服务地址\",\"ACME Service URL\",true))\n\t\t.push(ACME.URL);\n\tSP(Lang(\"CSR文本\",\"CSR Text\",true))\n\t\t.push(ACME.StepData.order.orderCSR);\n\tSP(Lang(\"证书PEM文本\",\"Certificate PEM Text\",true))\n\t\t.push(pemTxt);\n\tSP(Lang(\"证书私钥PEM文本\",\"Certificate Private Key PEM Text\",true))\n\t\t.push(config.privateKey.pem);\n\tSP(Lang(\"账户私钥PEM文本\",\"Account Private Key PEM Text\",true))\n\t\t.push(config.accountKey.pem);\n\tSP(Lang(\"账户URL\",\"Account URL\",true))\n\t\t.push(ACME.StepData.account.url);\n\tSP(Lang(\"完整配置信息\",\"Complete Configuration Information\",true))\n\t\t.push(\"<ACME-HTML-Web-Browser-Client>\"+JSON.stringify(logSet)+\"</ACME-HTML-Web-Browser-Client>\");\n\tlogTxts.push(\"\");logTxts.push(logTitle);logTxts.push(\"\");\n\t\n\t$(\".txt_downloadLog\").val(hasPEM?logTxts.join(\"\\\\n\"):pemTxt);\n};\nvar initStep4=function(){//页面启动时初始化，绑定配置文件拖拽事件\n\t$(\"body\").bind(\"dragover\",function(e){\n\t\te.preventDefault();\n\t}).bind(\"drop\",function(e){\n\t\te.preventDefault();\n\t\t\n\t\tvar file=e.dataTransfer.files[0];\n\t\tif(!file)return;\n\t\tvar reader = new FileReader();\n\t\treader.onload = function(e){\n\t\t\tvar txt=reader.result;\n\t\t\tvar m=/ACME-HTML-Web-Browser-Client>(.+?)<\\\\/ACME-HTML-Web-Browser-Client/.exec(txt);\n\t\t\tif(!m) return Toast(Lang(\"拖入的文件中未发现配置信息，请拖上次申请证书时保存的记录LOG文件！\",\"No configuration information is found in the dragged file. Please drag the LOG file saved in the last certificate application!\"),1);\n\t\t\t\n\t\t\tDropConfigFile=JSON.parse(m[1]);\n\t\t\tfor(var k in DropConfigFile.X509)X509[k]=DropConfigFile.X509[k];\n\t\t\tfor(var k in DropConfigFile.Window)window[k]=DropConfigFile.Window[k];\n\t\t\t\n\t\t\tCLog(\"DropConfigFile\",0,\"Reset Config\",DropConfigFile);\n\t\t\tToast(Lang(\"识别到拖入的记录LOG文件，已填充上次申请证书时使用的配置。\",\"The LOG file of the dragged record is identified, and the configuration used in the last certificate application has been filled.\"),2);\n\t\t\tresetStep1();//重新初始化第1步\n\t\t\tdownloadFileNameShow();\n\t\t}\n\t\treader.readAsText(file);\n\t});\n};\nvar downFileName=\"\";\nwindow.DefaultDownloadFileNames={ //允许设置默认的文件名，下载时自动使用此文件名\n\tCert:\"\" /*domain.crt*/, Key:\"\" /*domain.key*/, Log:\"\" /*domain.log*/\n};\nwindow.downloadBtnClick=function(type){\n\tvar val=$(\".txt_download\"+type).val();\n\tvar fileName=downFileName;\n\tif(type==\"Cert\") fileName+=\".pem\";\n\tif(type==\"Key\") fileName+=\".key\";\n\tif(type==\"Log\") fileName+=\".log\";\n\tfileName=DefaultDownloadFileNames[type]||fileName;\n\t\n\tvar url=URL.createObjectURL(new Blob([val], {\"type\":\"text/plain\"}));\n\tvar downA=document.createElement(\"A\");\n\tdownA.href=url;\n\tdownA.download=fileName;\n\tdownA.click();\n};\nwindow.downloadFileNameShow=function(name){//显示下载文件名称，优先使用手动设置的默认名称\n\tname=name||\"your_domain\";\n\tvar name2=(DefaultDownloadFileNames.Cert||\"\").replace(/\\\\.[^\\\\.]+$/g,\"\");\n\t$(\".downloadFileName\").html(name2||name);\n\t$(\".downloadKeyFileName\").html(DefaultDownloadFileNames.Key||name+\".key\");\n\t$(\".downloadCertFileName\").html(DefaultDownloadFileNames.Cert||name+\".pem\");\n};\n\n\n\n\n\n\n\n\n\n\n\n\n\n//Test_打头的方法仅供测试用：完成第二步后允许进行UI调试，手动调用Test_AllStepData_Save()，刷新页面可恢复界面\nwindow.Test_AllStepData_Save=function(){\n\tif(!ACME.StepData.order) throw new Error(Lang(\"未完成第二步操作\",\"The step 2 is not completed\",true));\n\t\n\tvar config=ACME.StepData.config;\n\tdelete ACME.PrevNonce;\n\tconfig.privateKey=config.privateKey.pem;\n\tconfig.accountKey=config.accountKey.pem;\n\t\n\tlocalStorage[Test_AllStepData_StoreKey]=JSON.stringify(ACME);\n\tACME=null;\n\tconsole.warn(Lang(\"仅供测试：已保存测试数据，需刷新页面\",\"For testing only: the test data has been saved, and the page needs to be refreshed\",true));\n};\nvar Test_AllStepData_StoreKey=\"ACME_HTML_Test_AllStepData\";\nvar initTest_Restore=function(){\n\tif(localStorage[Test_AllStepData_StoreKey]){\n\t\tconsole.warn(Lang(\"仅供测试：已保存测试数据，调用Test_Restore_StepXXX()进行恢复步骤界面\",\"For testing only: test data has been saved, call Test_Restore_StepXXX() to restore the step interface\",true));\n\t}\n}\nvar Test_AllStepData_Restore=function(next){\n\tvar data=JSON.parse(localStorage[Test_AllStepData_StoreKey]||\"{}\");\n\tif(!data.StepData) throw new Error(Lang(\"未保存数据\",\"No data saved\",true));\n\tfor(var k in data) ACME[k]=data[k];\n\t\n\tvar config=ACME.StepData.config;\n\tX509.KeyParse(config.privateKey,function(info){\n\t\tconfig.privateKey=info;\n\t\tX509.KeyParse(config.accountKey,function(info){\n\t\t\tconfig.accountKey=info;\n\t\t\tconsole.log(\"ACME.StepData\", ACME.StepData);\n\t\t\tsetTimeout(function(){next()});\n\t\t});\n\t});\n};\nwindow.Test_Restore_StepAuth=function(){\n\tTest_AllStepData_Restore(function(){\n\t\tconsole.warn(Lang(\"仅供测试：已手动恢复步骤三界面\",\"For testing only: Step 3 interface has been manually restored\",true));\n\t\tverifyStepShow();\n\t});\n};\nwindow.Test_Restore_StepDownload=function(){\n\tTest_AllStepData_Restore(function(){\n\t\tconsole.warn(Lang(\"仅供测试：已手动恢复步骤四界面\",\"For testing only: Step 4 interface has been manually restored\",true));\n\t\tdownloadStepShow();\n\t});\n};\n\n\n\n})();\n</script>\n\n\n\n\n\n<script>\n//===================================================\n//================= ACME functions ==================\n//===================================================\n//LICENSE: GPL-3.0, https://github.com/xiangyuecn/ACME-HTML-Web-Browser-Client\n(function(){\n\"use strict\";\n\n/************** ACME client implementation **************/\n//RFC8555: https://www.rfc-editor.org/rfc/rfc8555.html\nwindow.ACME={\n\tURL:\"\"\n\t,SyncID:0\n\t,DirData:{}\n\t,Directory:function(True,False){\n\t\tvar id=++ACME.SyncID;\n\t\tvar url=ACME.URL,dirStoreKey=\"ACME_HTML_cache_\"+url;\n\t\tvar ok=function(cache){\n\t\t\tvar data=cache.data;\n\t\t\tif(id!=ACME.SyncID) return False(\"cancel\");\n\t\t\tvar meta=data.meta||{};\n\t\t\tif(!data.newOrder)\n\t\t\t\treturn False(\"Not newOrder found: \"+FormatText(JSON.stringify(data)));\n\t\t\tACME.DirData=data;\n\t\t\tACME.StepData.termsURL=meta.termsOfService;\n\t\t\tACME.StepData.needEAB=!!meta.externalAccountRequired;\n\t\t\tvar saveCache=function(){\n\t\t\t\tlocalStorage[dirStoreKey]=JSON.stringify(cache);\n\t\t\t};\n\t\t\tsaveCache();\n\t\t\tTrue(cache,saveCache);\n\t\t};\n\t\tvar cache=JSON.parse(localStorage[dirStoreKey]||'{}');//先读缓存\n\t\tif(cache.time && Date.now()-cache.time<24*60*60*1000){\n\t\t\treturn ok(cache);\n\t\t}\n\t\trequest(url,null,function(data){\n\t\t\tok({data:data,time:Date.now()});\n\t\t},False);\n\t}\n\t\n\t,StepData:{}\n\t,ChallName:function(chall){ //验证类型名称\n\t\tif(chall.type==\"dns-01\"){ // https://letsencrypt.org/docs/challenge-types/\n\t\t\treturn Lang(\"DNS验证\",\"DNS Verify\");\n\t\t}else if(chall.type==\"http-01\"){\n\t\t\treturn Lang(\"文件URL验证\",\"File URL Verify\");\n\t\t} // tls-alpn-01 https://www.rfc-editor.org/rfc/rfc8737\n\t\treturn chall.type.toUpperCase();\n\t}\n\t,ChallSort:function(chall){ //验证类型排序\n\t\tif(chall.type==\"dns-01\") return 1+\"_\"+chall.type;\n\t\telse if(chall.type==\"http-01\") return 2+\"_\"+chall.type;\n\t\treturn 3+\"_\"+chall.type;\n\t}\n\t// 生成JSON Web Signature(JWS)，用账户私钥签名\n\t,GetJwsA:async function(Protected, Payload){\n\t\tvar key=ACME.StepData.config.accountKey;\n\t\tvar alg=\"ES256\",algorithm={name:\"ECDSA\", hash:\"SHA-256\"};\n\t\tif(key.type==\"RSA\"){\n\t\t\talg=\"RS256\";algorithm={name:\"RSASSA-PKCS1-v1_5\"}\n\t\t}\n\t\tProtected.alg=alg;\n\t\tvar rtv={\n\t\t\t\"protected\":Json2UrlB64(Protected)\n\t\t\t, payload:Payload?Json2UrlB64(Payload):\"\"\n\t\t};\n\t\tvar data=Str2Bytes(rtv[\"protected\"]+\".\"+rtv.payload);\n\t\tvar sign=await crypto.subtle.sign(algorithm, key.key, data);\n\t\trtv.signature=Bytes2UrlB64(sign);\n\t\treturn rtv;\n\t}\n\t// 获得随机数Nonce\n\t,GetNonceA:function(useNew){\n\t\treturn new Promise(function(resolve,reject){\n\t\t\tACME.GetNonce(useNew,function(val){\n\t\t\t\tresolve(val);\n\t\t\t},function(err){\n\t\t\t\treject(new Error(err));\n\t\t\t});\n\t\t});\n\t}\n\t,GetNonce:function(useNew, True, False){\n\t\tvar old=ACME.PrevNonce;ACME.PrevNonce=\"\";\n\t\tif(!useNew && old) return True(old);//使用上次调用返回的值\n\t\trequest({url:ACME.DirData.newNonce\n\t\t\t,method:\"HEAD\",response:false\n\t\t}, null, function(data,xhr){\n\t\t\tACME.PrevNonce=\"\";\n\t\t\t//跨域无解 Chrome ZeroSSL: Refused to get unsafe header \"Replay-Nonce\" , 需要 Access-Control-Expose-Headers: Link, Replay-Nonce, Location\n\t\t\tvar val=xhr.getResponseHeader(\"Replay-Nonce\");\n\t\t\tif(!val){\n\t\t\t\tFalse(\"GetNonce: \"+Lang('此ACME服务对浏览器访问支持太差，无法跨域获取Replay-Nonce响应头。','This ACME service has too poor browser access support to get the Replay-Nonce response header across domains.'), true);\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tTrue(val);\n\t\t},function(err){\n\t\t\tFalse(\"GetNonce: \"+err);\n\t\t});\n\t}\n\t//测试账户接口的跨域访问\n\t,TestAccountCORS:function(True,False){\n\t\trequest({url:ACME.DirData.newAccount\n\t\t\t,method:\"POST\",response:false,nocheck:true\n\t\t}, {}, function(data,xhr){\n\t\t\tif(xhr.status>0){\n\t\t\t\tTrue();\n\t\t\t}else{\n\t\t\t\tFalse(\"[\"+xhr.status+\"]\",true);\n\t\t\t}\n\t\t},function(err){\n\t\t\tFalse(err);\n\t\t});\n\t}\n\t\n\t//账户接口调用\n\t,StepAccount:async function(True,False){\n\t\tvar id=++ACME.SyncID;\n\t\tvar tag=\"ACME.StepAccount\";\n\t\tCLog(tag, 0, \"==========Account Start==========\");\n\t\tvar Err=\"\";\n\t\ttry{\n\t\t\tawait ACME._StepAccountA(id,tag);\n\t\t}catch(e){\n\t\t\tErr=e.message||\"-\";\n\t\t\tCLog(tag, 1, Err, e);\n\t\t}\n\t\tCLog(tag, 0, \"==========Account End==========\");\n\t\tif(Err) False(Err)\n\t\telse True();\n\t} , _StepAccountA:async function(id,tag){\n\t\tvar url=ACME.DirData.newAccount,config=ACME.StepData.config;\n\t\tvar accountData={\n\t\t\tcontact:[\"mailto:\"+config.email]\n\t\t\t,termsOfServiceAgreed:true\n\t\t};\n\t\t\n\t\t//externalAccountRequired https://github.com/fszlin/certes/blob/08bf850bbed9e026c718f56f1bcc454afafb4f92/src/Certes/Acme/AccountContext.cs\n\t\tif(ACME.StepData.needEAB){\n\t\t\tvar eab={\n\t\t\t\t\"protected\":Json2UrlB64({ alg:\"HS256\", kid:config.eabKid, url:url })\n\t\t\t\t,payload:Json2UrlB64(X509.PublicKeyJwk(config.accountKey))\n\t\t\t};\n\t\t\tvar key=await crypto.subtle.importKey(\"raw\", UrlB642Bytes(config.eabKey)\n\t\t\t\t,{name:\"HMAC\",hash:\"SHA-256\"}, true, [\"sign\"]);\n\t\t\tvar data=Str2Bytes(eab[\"protected\"]+\".\"+eab.payload);\n\t\t\tvar sign=await crypto.subtle.sign(\"HMAC\", key, data);\n\t\t\teab.signature=Bytes2UrlB64(sign);\n\t\t\taccountData.externalAccountBinding=eab;\n\t\t\tCLog(tag,0 ,\"externalAccountBinding\", eab);\n\t\t};\n\t\t\n\t\t//组装成jws，请求接口\n\t\tvar sendData=await ACME.GetJwsA({\n\t\t\tjwk: X509.PublicKeyJwk(config.accountKey)\n\t\t\t,nonce: await ACME.GetNonceA(true)\n\t\t\t,url: url\n\t\t},accountData);\n\t\tvar resp=await requestA(url, sendData);\n\t\tif(id!=ACME.SyncID) throw new Error(\"cancel\");\n\t\tACME.StepData.account={\n\t\t\turl:xhrHeader(resp.xhr, \"Location\")\n\t\t\t,data:resp.data\n\t\t};\n\t\tCLog(tag,0,\"Account OK\",ACME.StepData.account);\n\t}\n\t\n\t//订单接口调用\n\t,StepOrder:async function(Progress,True,False){\n\t\tvar id=++ACME.SyncID;\n\t\tvar tag=\"ACME.StepOrder\";\n\t\tCLog(tag, 0, \"==========Order Start==========\");\n\t\tvar Err=\"\";\n\t\ttry{\n\t\t\tawait ACME._StepOrderA(Progress,id,tag);\n\t\t}catch(e){\n\t\t\tErr=e.message||\"-\";\n\t\t\tCLog(tag, 1, Err, e);\n\t\t}\n\t\tCLog(tag, 0, \"==========Order End==========\");\n\t\tif(Err) False(Err)\n\t\telse True();\n\t} , _StepOrderA:async function(Progress,id,tag){\n\t\tvar url=ACME.DirData.newOrder,config=ACME.StepData.config;\n\t\tvar dnsArr=[];\n\t\tfor(var i=0;i<config.domains.length;i++){\n\t\t\tdnsArr.push({ type:\"dns\", value:config.domains[i] });\n\t\t}\n\t\tvar orderData={\n\t\t\tidentifiers:dnsArr\n\t\t};\n\t\t\n\t\tProgress(\"newOrder...\");\n\t\t//组装成jws，请求接口\n\t\tvar sendData=await ACME.GetJwsA({\n\t\t\tkid: ACME.StepData.account.url\n\t\t\t,nonce: await ACME.GetNonceA()\n\t\t\t,url: url\n\t\t},orderData);\n\t\tvar resp=await requestA(url, sendData);\n\t\tif(id!=ACME.SyncID) throw new Error(\"cancel\");\n\t\tresp.data.orderUrl=xhrHeader(resp.xhr, \"Location\");\n\t\tACME.StepData.order=resp.data;\n\t\tCLog(tag,0,\"Order OK\",ACME.StepData.order);\n\t\t\n\t\t//准备Key Authorizations需要的参数 参考：rfc8555 8.1\n\t\tvar jwkStr=JSON.stringify(X509.PublicKeyJwk(config.accountKey));\n\t\tvar thumbprint=await crypto.subtle.digest({name: \"SHA-256\"}, Str2Bytes(jwkStr));\n\t\tthumbprint=Bytes2UrlB64(thumbprint);\n\t\t\n\t\t//读取所有的验证信息\n\t\tvar idfs=ACME.StepData.order.identifiers,bad=0;\n\t\tvar auths=ACME.StepData.order.authorizations;\n\t\tfor(var i=0;i<idfs.length;i++){\n\t\t\tif(config.domains.indexOf(idfs[i].value)==-1) bad=1;\n\t\t}\n\t\tif(bad || idfs.length!=auths.length || idfs.length!=config.domains.length)\n\t\t\tthrow new Error(Lang(\"创建的订单中的域名和配置的不一致\",\"The domain name in the created order is inconsistent with the configuration\"));\n\t\tif(id!=ACME.SyncID) throw new Error(\"cancel\");\n\t\tACME.StepData.auths={};\n\t\tfor(var i=0;i<auths.length;i++){\n\t\t\tProgress(\"auth(\"+(i+1)+\"/\"+auths.length+\")...\");\n\t\t\tvar url=auths[i];\n\t\t\tvar sendData=await ACME.GetJwsA({\n\t\t\t\tkid: ACME.StepData.account.url\n\t\t\t\t,nonce: await ACME.GetNonceA()\n\t\t\t\t,url: url\n\t\t\t},\"\");\n\t\t\tvar resp=await requestA(url, sendData);\n\t\t\tif(id!=ACME.SyncID) throw new Error(\"cancel\");\n\t\t\tresp.data.domain=idfs[i].value;\n\t\t\tresp.data.authUrl=url;\n\t\t\tACME.StepData.auths[idfs[i].value]=resp.data;\n\t\t\t\n\t\t\t//生成Key Authorizations\n\t\t\tvar challs=resp.data.challenges;\n\t\t\tfor(var i2=0;i2<challs.length;i2++){\n\t\t\t\tvar chall=challs[i2];\n\t\t\t\tchall.authTxt=chall.token+\".\"+thumbprint;\n\t\t\t\tvar sha=await crypto.subtle.digest({name: \"SHA-256\"}\n\t\t\t\t\t\t\t\t, Str2Bytes(chall.authTxt));\n\t\t\t\tif(id!=ACME.SyncID) throw new Error(\"cancel\");\n\t\t\t\tchall.authTxtSHA256=Bytes2UrlB64(sha);\n\t\t\t\tchall.authTxtSHA256Base64=Bytes2Base64(sha);\n\t\t\t}\n\t\t}\n\t\tCLog(tag,0,\"Order Authorizations\",ACME.StepData.auths);\n\t}\n\t\n\t//验证一个域名\n\t,StepVerifyAuthItem:async function(authItem, challIdx, True,False){\n\t\tvar tag=\"ACME.verify[\"+authItem.challenges[challIdx].type+\"]:\"+authItem.domain;\n\t\tvar Err=\"\";\n\t\ttry{\n\t\t\tawait ACME._StepVerifyAuthItemA(authItem,challIdx, ACME.SyncID,tag, True,False);\n\t\t}catch(e){\n\t\t\tErr=e.message||\"-\";\n\t\t\tCLog(tag, 1, Err, e);\n\t\t}\n\t\tif(Err) True(false, 1000, Err); //重试\n\t} , _StepVerifyAuthItemA:async function(authItem,challIdx, id,tag, True,False){\n\t\t//先通知要用的验证方式，反复发送只要成功一次即可，不管结果\n\t\tvar chall=authItem.challenges[challIdx];\n\t\tif(!chall.isSend){\n\t\t\tvar url=chall.url;\n\t\t\tvar sendData=await ACME.GetJwsA({\n\t\t\t\tkid: ACME.StepData.account.url\n\t\t\t\t,nonce: await ACME.GetNonceA()\n\t\t\t\t,url: url\n\t\t\t},{});\n\t\t\tvar resp=await requestA({url:url,nocheck:true}, sendData);\n\t\t\tvar status=resp.xhr.status;\n\t\t\tif(status>=200&&status<300)\n\t\t\t\tchall.isSend=true;\n\t\t}\n\t\t\n\t\t//重新查询一下状态\n\t\tvar url=authItem.authUrl;\n\t\tvar sendData=await ACME.GetJwsA({\n\t\t\tkid: ACME.StepData.account.url\n\t\t\t,nonce: await ACME.GetNonceA()\n\t\t\t,url: url\n\t\t},\"\");\n\t\tvar resp=await requestA(url, sendData);\n\t\tvar data=resp.data;\n\t\tif(data.status==\"pending\"){\n\t\t\tCLog(tag, 0, \"pending...\");\n\t\t\treturn True(false, 1000, \"pending...\");\n\t\t}\n\t\tif(data.status==\"valid\"){\n\t\t\tCLog(tag, 0, \"valid OK\");\n\t\t\treturn True(true);\n\t\t}\n\t\tCLog(tag, 1, \"Fail\", data);\n\t\treturn False(data.status+\": \"+FormatText(JSON.stringify(data)));\n\t}\n\t\n\t//完成订单，生成证书\n\t,StepFinalizeOrder:async function(Progress,True,False){\n\t\tvar id=++ACME.SyncID;\n\t\tvar tag=\"ACME.StepFinalizeOrder\";\n\t\tCLog(tag, 0, \"==========Finalize Start==========\");\n\t\tvar Err=\"\";\n\t\ttry{\n\t\t\tawait ACME._StepFinalizeOrderA(Progress,id,tag);\n\t\t}catch(e){\n\t\t\tErr=e.message||\"-\";\n\t\t\tCLog(tag, 1, Err, e);\n\t\t}\n\t\tCLog(tag, 0, \"==========Finalize End==========\");\n\t\tif(Err) False(Err)\n\t\telse True();\n\t} , _StepFinalizeOrderA:async function(Progress,id,tag){\n\t\tvar order=ACME.StepData.order,config=ACME.StepData.config,domains=config.domains;\n\t\t\n\t\t//先请求finalize\n\t\tif(!order.finalizeIsSend){\n\t\t\tProgress(\"finalize...\");\n\t\t\t//生成csr，第一个域名做CN\n\t\t\tvar csr=await new Promise(function(resolve,reject){\n\t\t\t\tX509.CreateCSR(config.privateKey, domains[0], domains, function(csr){\n\t\t\t\t\tresolve(csr);\n\t\t\t\t},function(err){\n\t\t\t\t\treject(new Error(err));\n\t\t\t\t});\n\t\t\t});\n\t\t\torder.orderCSR=csr;\n\t\t\tCLog(tag,0,\"CSR\\\\n\"+csr);\n\t\t\tcsr=Bytes2UrlB64(ASN1.PEM2Bytes(csr));\n\t\t\t\n\t\t\tvar url=order.finalize;\n\t\t\t//组装成jws，请求接口\n\t\t\tvar sendData=await ACME.GetJwsA({\n\t\t\t\tkid: ACME.StepData.account.url\n\t\t\t\t,nonce: await ACME.GetNonceA()\n\t\t\t\t,url: url\n\t\t\t},{ csr:csr });\n\t\t\tvar resp=await requestA(url, sendData);\n\t\t\tif(id!=ACME.SyncID) throw new Error(\"cancel\");\n\t\t\tCLog(tag,0,\"finalize result\",resp.data);\n\t\t\torder.finalizeIsSend=true;\n\t\t}\n\t\t\n\t\t//轮询订单状态，60秒超时\n\t\tvar t1=Date.now(),tryCount=0;\n\t\twhile(!order.checkOK && Date.now()-t1<60*1000){\n\t\t\tif(id!=ACME.SyncID) throw new Error(\"cancel\");\n\t\t\ttryCount++;\n\t\t\tProgress(\"check retry:\"+tryCount+\"...\");\n\t\t\tvar url=order.orderUrl;\n\t\t\t//组装成jws，请求接口\n\t\t\tvar sendData=await ACME.GetJwsA({\n\t\t\t\tkid: ACME.StepData.account.url\n\t\t\t\t,nonce: await ACME.GetNonceA()\n\t\t\t\t,url: url\n\t\t\t},\"\");\n\t\t\tvar resp=await requestA(url, sendData);\n\t\t\tif(id!=ACME.SyncID) throw new Error(\"cancel\");\n\t\t\tvar data=resp.data;\n\t\t\tif(data.status==\"valid\"){\n\t\t\t\torder.checkOK=true;\n\t\t\t\torder.certUrl=data.certificate;\n\t\t\t\tCLog(tag,0,\"check OK\",data);\n\t\t\t\tbreak;\n\t\t\t}else if(data.status==\"invalid\"){\n\t\t\t\tCLog(tag,1,\"check Fail\",data);\n\t\t\t\tthrow new Error(data.status+\": \"+FormatText(JSON.stringify(data)));\n\t\t\t}else{\n\t\t\t\tCLog(tag,0,data.status+\"... wait 1s\",data);\n\t\t\t\tawait new Promise(function(s){ setTimeout(s, 1000) });\n\t\t\t}\n\t\t}\n\t\t\n\t\t//下载证书\n\t\tif(!order.downloadPEM){\n\t\t\tProgress(\"download...\");\n\t\t\tvar url=order.certUrl;\n\t\t\t//组装成jws，请求接口\n\t\t\tvar sendData=await ACME.GetJwsA({\n\t\t\t\tkid: ACME.StepData.account.url\n\t\t\t\t,nonce: await ACME.GetNonceA()\n\t\t\t\t,url: url\n\t\t\t},\"\");\n\t\t\tvar resp=await requestA({url:url,response:false}, sendData);\n\t\t\tif(id!=ACME.SyncID) throw new Error(\"cancel\");\n\t\t\tvar pem=resp.xhr.responseText;\n\t\t\torder.downloadPEM=pem;\n\t\t\tCLog(tag,0,\"download OK\\\\n\"+pem);\n\t\t}\n\t}\n};\n\n\n// 读取响应头，读不到就当做跨域无法读取处理，自定义的头需要 Access-Control-Expose-Headers: Link, Replay-Nonce, Location\nvar xhrHeader=function(xhr,key){\n\tvar val=xhr.getResponseHeader(key);\n\tif(!val){\n\t\tacmeReadDirGotoCORS();\n\t\tthrow new Error(Lang(\"无法读取响应头\"+key+\"，可能是因为此ACME服务对跨域访问支持不良，请按第一步显示的提示操作。\"\n\t\t\t,\"The response header \"+key+\" cannot be read, This may be because this ACME service does not support cross domain access, Please follow the prompt displayed in step 1.\"));\n\t}\n\treturn val;\n};\n\n// ajax\nvar requestA=function(url,post){\n\treturn new Promise(function(resolve,reject){\n\t\trequest(url,post,function(data,xhr){\n\t\t\tresolve({data:data,xhr:xhr});\n\t\t},function(err){\n\t\t\treject(new Error(err));\n\t\t});\n\t});\n}\nvar request=function(url,post,True,False){\n\tvar set=typeof(url)==\"string\"?{url:url}:url; url=set.url;\n\tvar method=set.method||(post?\"POST\":\"GET\");\n\tvar tag=\"ACME.Request\"; CLog(tag,4,\"send \"+method,set,post);\n\t\n\tvar xhr=new XMLHttpRequest();\n\txhr.timeout=30000;\n\txhr.open(method,url,true);\n\txhr.onreadystatechange=function(){\n\t\tif(xhr.readyState==4){\n\t\t\tACME.PrevNonce=xhr.getResponseHeader(\"Replay-Nonce\")||\"\";//将此值存起来\n\t\t\t\n\t\t\tvar isBad=xhr.status<200 || xhr.status>=300;\n\t\t\tvar useResp=set.response==null || set.response;\n\t\t\tvar err=\"\",data,logObj;\n\t\t\tif(useResp || isBad){\n\t\t\t\tlogObj=xhr.responseText;\n\t\t\t\ttry{\n\t\t\t\t\tdata=JSON.parse(logObj);\n\t\t\t\t\tlogObj=data;\n\t\t\t\t}catch(e){ };\n\t\t\t}\n\t\t\tCLog(tag,4,\"send End\",set, {\n\t\t\t\tstatus:xhr.status\n\t\t\t\t,headers:xhr.getAllResponseHeaders()\n\t\t\t}, logObj);\n\t\t\tif(set.nocheck || !isBad && (!useResp || data)){\n\t\t\t\treturn True(data, xhr);\n\t\t\t}\n\t\t\tFalse((isBad?\"[\"+xhr.status+\"]\":\"\")+FormatText(xhr.responseText), xhr.status);\n\t\t}\n\t};\n\tif(post){\n\t\tif(typeof(post)==\"object\")post=JSON.stringify(post);\n\t\txhr.setRequestHeader(\"Content-Type\",set.contentType||\"application/jose+json\");\n\t\txhr.send(post);\n\t}else{\n\t\txhr.send();\n\t}\n};\n\n})();\n</script>\n\n\n\n\n\n<script>\n//==================================================================\n//================= RSA/ECC/X.509/ASN.1 functions ==================\n//==================================================================\n//LICENSE: GPL-3.0, https://github.com/xiangyuecn/ACME-HTML-Web-Browser-Client\n(function(){\n\"use strict\";\n\nwindow.X509={\n\tDefaultType2_RSA:\"2048\" //默认创建RSA密钥位数\n\t,DefaultType2_ECC:\"P-256\" //默认创建ECC曲线\n\t,SupportECCType2:{ //支持的ECC曲线和常见名称\n\t\t\"P-256\":\"prime256v1\", \"P-384\":\"secp384r1\", \"P-521\":\"secp521r1\"\n\t}\n\t,SupportECCType2Names:function(){ var str=[]; for(var k in X509.SupportECCType2)str.push(X509.SupportECCType2[k]); return str; }\n\t\n\t//创建RSA/ECC密钥对 type2取值：type=RSA时为密钥位数数值，type=ECC时为支持的曲线（X509.SupportECCType2）\n\t,KeyGenerate:function(type,type2,True,False){\n\t\tvar algorithm=0;\n\t\tif(type==\"RSA\"){\n\t\t\talgorithm={ publicExponent: new Uint8Array([1, 0, 1]) //E: AQAB\n\t\t\t\t,name:\"RSASSA-PKCS1-v1_5\", modulusLength:+type2, hash:\"SHA-256\" };\n\t\t}else if(type==\"ECC\"){\n\t\t\talgorithm={ name:\"ECDSA\", namedCurve:type2 };\n\t\t}else{\n\t\t\tFalse(\"Not support \"+type);\n\t\t\treturn;\n\t\t};\n\t\tcrypto.subtle.generateKey(algorithm,true,[\"sign\",\"verify\"])\n\t\t\t.then(function(key){\n\t\t\t\t//FireFox不支持导出pkcs8参数的ECC私钥，Chrome没问题，使用jwk获得最大兼容\n\t\t\t\tcrypto.subtle.exportKey(\"jwk\", key.privateKey).then(function(jwk){\n\t\t\t\t\tTrue(X509.KeyExport(jwk));\n\t\t\t\t}).catch(function(e){\n\t\t\t\t\tFalse(Lang('此浏览器不支持导出'+algorithm.name+'+PKCS#8格式密钥：','This browser does not support exporting '+algorithm.name+'+PKCS#8 format keys: ')+e.message);\n\t\t\t\t});\n\t\t\t}).catch(function(e){\n\t\t\t\tFalse(Lang('此浏览器不支持生成'+algorithm.name+'：','This browser does not support generating '+algorithm.name+': ')+e.message);\n\t\t\t});\n\t}\n\t//解析密钥，检查是否支持，通过回调返回格式或错误信息，pem支持公钥和私钥\n\t,KeyParse:function(pem, True, False, mustPrivate){\n\t\tvar rtv={};\n\t\tvar Err=function(msg){ rtv.error=msg; False(msg, rtv); };\n\t\t//浏览器crypto不支持PKCS#1的pem导入，提取参数转成jwk导入\n\t\t\n\t\tif(!/BEGIN\\\\s*(RSA|EC)?\\\\s*(PUBLIC|PRIVATE)\\\\s*KEY/.test(pem))\n\t\t\treturn Err(Lang('不是RSA或ECC密钥','Not an RSA or ECC key'));\n\t\trtv.type=RegExp.$1==\"EC\"?\"ECC\":RegExp.$1;\n\t\tvar isPKCS1=!!RegExp.$1;\n\t\tvar isPub=RegExp.$2==\"PUBLIC\";\n\t\tif(isPub && mustPrivate)\n\t\t\treturn Err(Lang('不是私钥','Is not a private key'));\n\t\t\n\t\t//解析提取参数信息\n\t\ttry{\n\t\t\tvar paramAsn1=null;\n\t\t\tvar asn1=ASN1.ParsePEM(pem);\n\t\t\trtv.asn1=asn1;\n\t\t\t\n\t\t\tif(isPKCS1){\n\t\t\t\tif(rtv.type==\"RSA\"){\n\t\t\t\t\tparamAsn1=asn1; //直接按顺序存放的参数\n\t\t\t\t}else if(rtv.type==\"ECC\"){\n\t\t\t\t\tif(isPub) //没见过这种ecc公钥\n\t\t\t\t\t\treturn Err(Lang('不支持ECC PKCS#1格式公钥','ECC PKCS#1 format public key is not supported'));\n\t\t\t\t\tvar oid2=asn1.sub[2].sub[0].oid;\n\t\t\t\t\trtv.type2=ASN1.OID[oid2]||\"\";\n\t\t\t\t\tparamAsn1=asn1;\n\t\t\t\t}\n\t\t\t}else{\n\t\t\t\tvar idx=isPub?0:1; //跳过私钥开头的version，就和公钥一样了\n\t\t\t\tvar oid=asn1.sub[idx].sub[0].oid;\n\t\t\t\tvar oid2=asn1.sub[idx].sub[1].oid;\n\t\t\t\trtv.type=ASN1.OID[oid]||\"\";\n\t\t\t\trtv.type2=ASN1.OID[oid2]||\"\";\n\t\t\t\t\n\t\t\t\tif(rtv.type==\"ECC\"&&isPub)//ECC公钥直接就是值\n\t\t\t\t\tparamAsn1=asn1;\n\t\t\t\telse\n\t\t\t\t\tparamAsn1=new ASN1().parse(asn1.sub[idx+1].bytes);//密钥参数\n\t\t\t}\n\t\t\trtv.paramAsn1=paramAsn1;\n\t\t}catch(e){\n\t\t\treturn Err(Lang('密钥解析失败：','Key resolution failed: ')+e.message);\n\t\t}\n\t\tif(rtv.type==\"RSA\"){\n\t\t\tvar idx=isPub?0:1; //私钥开头多一个版本号\n\t\t\trtv.param={\n\t\t\t\tn:paramAsn1.sub[idx].bytes //Modulus\n\t\t\t\t,e:paramAsn1.sub[idx+1].bytes //Exponent\n\t\t\t\t,d:isPub?null:paramAsn1.sub[idx+2].bytes //D\n\t\t\t};\n\t\t\tvar keys=\"p,q,dp,dq,qi\".split(\",\");\n\t\t\tfor(var i=0;i<5;i++)\n\t\t\t\trtv.param[keys[i]]=isPub?null:paramAsn1.sub[idx+3+i].bytes;\n\t\t\trtv.type2=rtv.param.n.length*8+\"\";\n\t\t}else if(rtv.type==\"ECC\"){\n\t\t\tif(!X509.SupportECCType2[rtv.type2]){\n\t\t\t\treturn Err(Lang('只支持'+X509.SupportECCType2Names().join(\"、\")+'曲线的ECC密钥','ECC key only supported for '+X509.SupportECCType2Names().join(\",\")+' curve'));\n\t\t\t}\n\t\t\tif(isPub){\n\t\t\t\tvar b2=paramAsn1.sub[1].bytes;\n\t\t\t}else{\n\t\t\t\tvar idx=isPKCS1?3:2;\n\t\t\t\tvar b2=paramAsn1.sub[idx].sub[0].bytes;\n\t\t\t}\n\t\t\tif(b2[0]!=0x04)//0x04代表公钥未压缩 https://www.rfc-editor.org/rfc/rfc5480#section-2.2\n\t\t\t\treturn Err(\"ECC !0x04: \"+b2[0]);\n\t\t\tvar bits=(b2.length-1)/2;\n\t\t\trtv.param={\n\t\t\t\tx:b2.slice(1,1+bits) //xy为公钥\n\t\t\t\t,y:b2.slice(1+bits)\n\t\t\t\t,d:isPub?null:paramAsn1.sub[1].bytes //D\n\t\t\t};\n\t\t}else{\n\t\t\treturn Err(Lang('不支持的密钥类型：','Unsupported key type: ')+oid);\n\t\t}\n\t\trtv.isPKCS1=isPKCS1;\n\t\trtv.hasPrivate=!isPub;\n\t\trtv.pem=pem;\n\t\t\n\t\t//转成CryptoKey\n\t\tvar algorithm,jwk;\n\t\tif(rtv.type==\"RSA\"){\n\t\t\talgorithm={ publicExponent: new Uint8Array(rtv.param.n.buffer)\n\t\t\t,name:\"RSASSA-PKCS1-v1_5\", modulusLength:+rtv.type2, hash:\"SHA-256\" };\n\t\t\tjwk={ kty:\"RSA\", alg: \"RS256\" };\n\t\t}else if(rtv.type==\"ECC\"){\n\t\t\talgorithm={ name:\"ECDSA\", namedCurve:rtv.type2 };\n\t\t\tjwk={ kty:\"EC\", crv:rtv.type2 };\n\t\t}\n\t\tjwk=Object.assign(jwk,{ ext:true, key_ops:[isPub?\"verify\":\"sign\"] });\n\t\tfor(var k in rtv.param)\n\t\t\trtv.param[k]&&( jwk[k]=Bytes2UrlB64(rtv.param[k]) );\n\t\t\n\t\tcrypto.subtle.importKey(\n\t\t\t\"jwk\",jwk,algorithm,true,[isPub?\"verify\":\"sign\"]\n\t\t).then(function(key){\n\t\t\trtv.key=key;\n\t\t\tTrue(rtv);\n\t\t}).catch(function(e){\n\t\t\tErr(Lang('密钥转成CryptoKey失败：','Failed to convert key to CryptoKey: ')+e.message);\n\t\t});\n\t}\n\t//解析出来的公钥转换成JSON Web Key(JWK)\n\t,PublicKeyJwk:function(info){ // https://www.rfc-editor.org/rfc/rfc7638\n\t\tvar p=info.param;\n\t\tif(info.type==\"RSA\"){\n\t\t\treturn { e:Bytes2UrlB64(p.e), kty:\"RSA\", n:Bytes2UrlB64(p.n) };\n\t\t}else if(info.type==\"ECC\"){\n\t\t\treturn { crv:info.type2, kty:\"EC\", x:Bytes2UrlB64(p.x),y:Bytes2UrlB64(p.y) };\n\t\t}else{\n\t\t\tthrow new Error(\"Jwk: \"+info.type);\n\t\t}\n\t}\n\t//解析出来的密钥或jwk对象转成PKCS#8格式 publicOnly：提供私钥时仅导出公钥 returnType：1 bytes，2 asn1，other pem\n\t,KeyExport:function(info,publicOnly,returnType){\n\t\tvar tag=\"KeyExport: \", S=ASN1.S,V=ASN1.V; //ASN1快捷创建方式\n\t\tvar param=info.param,type=param&&info.type,type2=info.type2;//解析出来的格式\n\t\tif(!param){//jwk\n\t\t\tif(info.kty){\n\t\t\t\ttype=info.kty==\"EC\"?\"ECC\":info.kty;\n\t\t\t\tif(type==\"ECC\")type2=info.crv;\n\t\t\t}else throw new Error(tag+\"bad key\");\n\t\t}\n\t\tvar keys=(type==\"ECC\"?\"x,y,d\":\"n,e,d,p,q,dp,dq,qi\").split(\",\");\n\t\tif(!param){//jwk参数需转成二进制\n\t\t\tparam={};\n\t\t\tfor(var i=0;i<keys.length;i++){\n\t\t\t\tvar k=keys[i],b64=info[k];\n\t\t\t\tif(b64)param[k]=UrlB642Bytes(b64);\n\t\t\t}\n\t\t}\n\t\tvar useD=!publicOnly&&param.d;//导出私钥\n\t\t\n\t\tvar bytes;//封装参数\n\t\tif(type==\"RSA\"){\n\t\t\tvar asn1=S(0x30, V(0x02, param.n), V(0x02, param.e));\n\t\t\tif(useD){//公钥只需n、e参数，私钥要全部\n\t\t\t\tasn1.sub.splice(0,0,V(0x02, [0]));//开头插入版本号\n\t\t\t\tfor(var i=2;i<keys.length;i++){\n\t\t\t\t\tasn1.push(V(0x02, param[keys[i]]));\n\t\t\t\t}\n\t\t\t}\n\t\t\tbytes=asn1.toBytes();\n\t\t}else if(type==\"ECC\"){ //公钥x、y参数，私钥外面再套一层d\n\t\t\tvar pubB=new Uint8Array(1+param.x.length*2); pubB[0]=0x04;\n\t\t\tpubB.set(param.x, 1);\n\t\t\tpubB.set(param.y, 1+param.x.length);\n\t\t\tif(useD){\n\t\t\t\tbytes=S(0x30, V(0x02,[1]), V(0x04, param.d)\n\t\t\t\t\t, S(0xA1, V(0x03, pubB)) ).toBytes();\n\t\t\t}else bytes=pubB;\n\t\t}else{ throw new Error(tag+type); }\n\t\t\n\t\tvar typeASN1=S(0x30 //封装类型\n\t\t\t,V(0x06, ASN1.OID2Bytes(ASN1.OID[type]))\n\t\t\t,type==\"RSA\"?V(0x05,[])\n\t\t\t\t\t:V(0x06, ASN1.OID2Bytes(ASN1.OID[type2]))\n\t\t);\n\t\t\n\t\tif(useD){//封装私钥\n\t\t\tvar keyA=S(0x30, V(0x02, [0]), typeASN1, V(0x04, bytes));\n\t\t}else{ //封装公钥\n\t\t\tvar keyA=S(0x30 ,typeASN1, V(0x03, bytes));\n\t\t};\n\t\tif(returnType==2) return keyA;\n\t\tbytes=keyA.toBytes();\n\t\tif(returnType==1) return bytes;\n\t\tvar str=Bytes2Base64(bytes).replace(/(.{64})/g,\"$1\\\\n\").trim();\n\t\tvar sp=useD?\"PRIVATE\":\"PUBLIC\";\n\t\treturn '-----BEGIN '+sp+' KEY-----\\\\n'+str+'\\\\n-----END '+sp+' KEY-----';\n\t}\n\t\n\t\n\t//创建证书请求CSR，提供私钥用于CSR签名\n\t,CreateCSR:function(keyInfo,commonName,domains,True,False){\n\t\t//CSR格式：rfc2986，太复杂了，直接拿openssl生成csr用ASN1.ParsePEM来观看格式\n\t\tvar S=ASN1.S,V=ASN1.V; //ASN1快捷创建方式\n\t\t\n\t\t//封装公钥\n\t\ttry{\n\t\t\tvar pubA=X509.KeyExport(keyInfo, true, 2);\n\t\t}catch(e){ return False(e.message) }\n\t\t\n\t\t//封装域名列表扩展属性\n\t\tvar altNameA=S(0x30);\n\t\tfor(var i=0;i<domains.length;i++)\n\t\t\taltNameA.push(V(0x82, Str2Bytes(domains[i])));\n\t\t\n\t\t//组装CSR主体\n\t\tvar bodyA=S(0x30\n\t\t\t,V(0x02, [0]) //版本号 固定值0\n\t\t\t,S(0x30, S(0x31 ,S(0x30 //只提供一个属性：CN\n\t\t\t\t,V(0x06, ASN1.OID2Bytes(\"2.5.4.3\"))\n\t\t\t\t,V(0x0C, Str2Bytes(commonName))\n\t\t\t)))\n\t\t\t,pubA //公钥\n\t\t\t,S(0xA0, S(0x30 //扩展属性，域名列表\n\t\t\t\t,V(0x06, ASN1.OID2Bytes(\"1.2.840.113549.1.9.14\"))\n\t\t\t\t,S(0x31, S(0x30, S(0x30\n\t\t\t\t\t,V(0x06, ASN1.OID2Bytes(\"2.5.29.17\"))\n\t\t\t\t\t,V(0x04, altNameA.toBytes())\n\t\t\t\t)))\n\t\t\t))\n\t\t);\n\t\t\n\t\t//签名生成CSR rfc2315\n\t\tvar bodyBytes=bodyA.toBytes();\n\t\tvar algorithm={name:\"ECDSA\", hash:\"SHA-256\"};\n\t\tif(keyInfo.type==\"RSA\"){\n\t\t\talgorithm={name:\"RSASSA-PKCS1-v1_5\"}\n\t\t}\n\t\tcrypto.subtle.sign(algorithm, keyInfo.key, bodyBytes).then(function(arr){\n\t\t\tvar signBytes=new Uint8Array(arr);\n\t\t\tif(keyInfo.type==\"ECC\"){//ECC分两段重新封装一下\n\t\t\t\tvar s1=signBytes.subarray(0,keyInfo.param.x.length);\n\t\t\t\tvar s2=signBytes.subarray(keyInfo.param.x.length);\n\t\t\t\tsignBytes=S(0x30, V(0x02,s1), V(0x02,s2)).toBytes();\n\t\t\t}\n\t\t\tvar csrA=S(0x30, bodyA\n\t\t\t\t,S(0x30 //签名类型\n\t\t\t\t\t,V(0x06, ASN1.OID2Bytes(ASN1.OID[\"SHA256_\"+keyInfo.type]))\n\t\t\t\t\t,keyInfo.type==\"RSA\"?V(0x05,[]):null //ECC没有第二个参数\n\t\t\t\t)\n\t\t\t\t,V(0x03, signBytes)\n\t\t\t);\n\t\t\tvar bytes=csrA.toBytes();\n\t\t\tvar str=Bytes2Base64(bytes).replace(/(.{64})/g,\"$1\\\\n\").trim();\n\t\t\tTrue('-----BEGIN CERTIFICATE REQUEST-----\\\\n'+str+'\\\\n-----END CERTIFICATE REQUEST-----');\n\t\t}).catch(function(e){\n\t\t\tFalse(\"CSR sign:\"+e.message);\n\t\t});\n\t}\n};\n\n\n\n//简单实现ASN.1解析和封包\nwindow.ASN1=function(tag, bytes){\n\tthis.sub=[];\n\tif(tag)this.setTag(tag);\n\tif(bytes)this.setBytes(bytes);\n};\nASN1.S=function(tag){ //快捷创建容器类型，并提供任意多个子元素\n\tvar v=new ASN1(tag);\n\tfor(var i=1,a=arguments;i<a.length;i++){a[i]&&v.push(a[i])}\n\treturn v;\n};\nASN1.V=function(tag, bytes){ //快捷创建值类型\n\treturn new ASN1(tag, bytes)\t\n};\nASN1.ParsePEM=function(pem){\n\treturn new ASN1().parsePEM(pem);\n};\nASN1.TagNames={\n\t'01':'BOOLEAN','02':'INTEGER','03':'BIT_STRING'\n\t,'04':'OCTET_STRING','05':'NULL','06':'OID'\n\t,'0C':'UTF8String','13':'Printable_String'\n\t,'17':'UTCTime','18':'GeneralizedTime','30':'SEQUENCE','31':'SET'\n};\nASN1.OID={\n\t \"1.2.840.113549.1.1.1\":\"RSA\"\n\t,\"1.2.840.113549.1.1.11\":\"SHA256_RSA\"\n\t,\"1.2.840.10045.2.1\":\"ECC\"\n\t,\"1.2.840.10045.4.3.2\":\"SHA256_ECC\"\n\t,\"1.2.840.10045.3.1.7\":\"P-256\" //secp256r1 | prime256v1\n\t,\"1.3.132.0.34\":\"P-384\" //secp384r1\n\t,\"1.3.132.0.35\":\"P-521\" //secp521r1\n};\tfor(var k in ASN1.OID)ASN1.OID[ASN1.OID[k]]=k;\nASN1.OID2Bytes=function(oid){\n\tvar arr = oid.split('.'), byts = [];\n\tvar v0=+arr[0],v1=+arr[1];\n\tif (!/^[\\\\d\\\\.]+$/.test(oid)|| arr.length < 3 || v0 > 2 || v0 * 40 + v1 > 0xff)\n\t\tthrow new Error(\"bad oid: \"+oid);\n\tbyts.push(v0 * 40 + v1);\n\tfor (var i = 2, len = arr.length; i < len; i++) {\n\t\tvar num = +arr[i], bits = [];\n\t\twhile (num >= 0x80) { bits.push(num % 0x80); num /= 0x80; }\n\t\tbits.push(num); bits.reverse();\n\t\tfor (var j = 0, jl = bits.length - 1; j <= jl; j++) {\n\t\t\tif (j != jl) {\n\t\t\t\tbyts.push(0x80 + bits[j]);\n\t\t\t} else {\n\t\t\t\tbyts.push(bits[j]);\n\t\t\t}\n\t\t}\n\t}\n\treturn new Uint8Array(byts);\n};\nASN1.OID2Text=function(bytes){\n\tvar str = \"\", b0 = bytes[0];\n\tvar m = b0 < 80 ? b0 < 40 ? 0 : 1 : 2;\n\tstr+=m+\".\"+(b0 - m * 40);\n\tfor (var i = 1, len = bytes.length; i < len; ) {\n\t\tvar num = 0;\n\t\tfor (; i < len; ) {\n\t\t\tvar bit = bytes[i++]; num *= 0x80;\n\t\t\tif (bit >= 0x80) num += bit - 0x80;\n\t\t\telse { num += bit; break; }\n\t\t}\n\t\tstr+=\".\"+num;\n\t}\n\treturn str;\n};\nASN1.ParseSize=function(pos, bytes){ //简单解析长度数值\n\tvar bitCount=bytes[pos[0]++],size=0;\n\tif(bitCount < 0x80) size=bitCount;\n\telse if(bitCount == 0x80) size=-404; //不定长，需搜索两个0结尾，直接拒绝支持\n\telse for(var i=0,len=bitCount&0x7F;i<len;i++)\n\t\tsize=size*256+bytes[pos[0]++];\n\tif(size<0 || size>bytes.length-pos[0])throw new Error(\"ASN.1 Bad size \"+size);\n\treturn size;\n};\nASN1.ParseBlock=function(pos, bytes, sub){ //简单解析一块子内容\n\tsub=sub||[];\n\twhile(pos[0]<bytes.length){\n\t\tvar idx0=pos[0],item=new ASN1();\n\t\tvar tag=bytes[pos[0]++],size=ASN1.ParseSize(pos, bytes);\n\t\tif((tag&0x20) != 0){//结构化容器，嵌套调用\n\t\t\titem.parse(bytes.slice(idx0, pos[0]+size));\n\t\t}else{//普通内容\n\t\t\tvar chunk=bytes.slice(pos[0], pos[0]+size);\n\t\t\tif(tag==0x02 || tag==0x03){//去掉开头补的0，正整数\n\t\t\t\tif(chunk.length>1 && chunk[0]==0){\n\t\t\t\t\tchunk=chunk.slice(1);\n\t\t\t\t}\n\t\t\t}\n\t\t\titem.setTag(tag);\n\t\t\titem.setBytes(chunk);\n\t\t}\n\t\tsub.push(item);\n\t\tpos[0]+=size;\n\t}\n\treturn sub;\n};\nASN1.PEM2Bytes=function(pem){\n\tpem=pem.replace(/[\\\\s\\\\r\\\\n]/g,\"\");\n\tvar m=/^-+BEGIN\\\\w*-+([^-]+)-+END\\\\w+-+$/i.exec(pem);\n\ttry{\n\t\treturn Base642Bytes(m[1]);\n\t}catch(e){\n\t\tthrow new Error(Lang('不是pem格式。','Not a pem format.'));\n\t}\n};\nASN1.prototype={\n\tsetTag:function(tag){\n\t\tvar txt=(tag<16?\"0\":\"\")+tag.toString(16).toUpperCase();\n\t\tthis.tag=tag;\n\t\tthis.tagTxt=txt;\n\t\tthis.tagName=ASN1.TagNames[txt]||\"0x\"+txt;\n\t}\n\t,setBytes:function(bytes){\n\t\tif(bytes.length==null||(bytes.slice==null && bytes.subarray==null))\n\t\t\tthrow new Error(\"Not Array\");\n\t\tif(this.tag==0x06) this.oid=ASN1.OID2Text(bytes);\n\t\tif(this.tag==0x0C||this.tag==0x13) this.string=Bytes2Str(bytes);\n\t\tthis.bytes=bytes;\n\t}\n\t,push:function(asn1){\n\t\tif(!asn1.parsePEM) throw new Error(\"Not ASN1\");\n\t\tthis.sub.push(asn1);\n\t\treturn this;\n\t}\n\t,parsePEM:function(pem){\n\t\treturn this.parse(ASN1.PEM2Bytes(pem));\n\t}\n\t,parse:function(bytes){\n\t\tvar pos=[0];\n\t\t//最外层必须是个结构化容器，第6位为1，为0为基础类型 https://www.jianshu.com/p/ce7ab5f3f33a\n\t\tif((bytes[0]&0x20) == 0) throw new Error(\"ASN.1 parse: Not SEQ\");\n\t\tthis.setTag(bytes[pos[0]++]);\n\t\tvar size=ASN1.ParseSize(pos, bytes);\n\t\tbytes=bytes.slice(pos[0], pos[0]+size);\n\t\tthis.setBytes(bytes);\n\t\t//解析子内容\n\t\tASN1.ParseBlock([0], bytes, this.sub);\n\t\treturn this;\n\t}\n\t,toBytes:function(innerOlny){\n\t\tvar chunks=[],len=0;\n\t\tif(this.sub.length){//容器类型，递归调用\n\t\t\tfor(var i=0;i<this.sub.length;i++){\n\t\t\t\tvar arr=this.sub[i].toBytes();\n\t\t\t\tchunks.push(arr); len+=arr.length;\n\t\t\t}\n\t\t}else if(this.bytes&&this.bytes.length){//简单类型\n\t\t\tif(this.tag==0x02 && this.bytes[0] >= 0x80 || this.tag==0x03){\n\t\t\t\tchunks.push([0]);len++;  //0x02负数 0x03需要开头补0\n\t\t\t}\n\t\t\tchunks.push(this.bytes); len+=this.bytes.length;\n\t\t}\n\t\tif(!innerOlny){//添加标签和长度\n\t\t\tvar arr=[], num=len;\n\t\t\tif(num<0x80) arr.push(num);\n\t\t\telse {\n\t\t\t\twhile(num>0xff){ arr.push(num&0xff); num=num>>8; }\n\t\t\t\tarr.push(num&0xff); arr.push(0x80+arr.length);\n\t\t\t}\n\t\t\tarr.push(this.tag); arr.reverse();\n\t\t\tchunks.splice(0,0,arr); len+=arr.length;\n\t\t}\n\t\tvar bytes=new Uint8Array(len),n=0;\n\t\tfor(var i=0;i<chunks.length;i++){\n\t\t\tvar arr=chunks[i];\n\t\t\tbytes.set(arr, n); n+=arr.length;\n\t\t}\n\t\treturn bytes;\n\t}\n};\n\n})();\n</script>\n\n\n\n\n\n\n\n<script>\n//===========================================================\n//================= Common functions ==================\n//===========================================================\n//LICENSE: GPL-3.0, https://github.com/xiangyuecn/ACME-HTML-Web-Browser-Client\n(function(){\n\"use strict\";\n\n/************** Language **************/\nwindow.LangCur=/\\\\b(zh|cn)\\\\b/i.test(navigator.language)?\"cn\":\"en\";\nwindow.Lang=function(cn,en,txt){\n\tif((cn||en) && (!cn||!en))throw new Error(\"Lang bad args\");\n\tif(txt)return LangCur==\"cn\"?cn:en;\n\tvar html=\"\",ks={cn:cn,en:en};\n\tfor(var k in ks){\n\t\thtml+=(LangCur!=k?'<!--LangHide1-->':'')\n\t\t\t+'<span class=\"lang'+k.toUpperCase()\n\t\t\t+'\" style=\"'+(LangCur==k?'':'display:none')\n\t\t\t+'\">'+ks[k]+'</span>'\n\t\t\t+(LangCur!=k?'<!--LangHide2-->':'');\n\t}\n\treturn html;\n};\nwindow.LangReview=function(cls){\n\tvar el=$(cls||\"body\");\n\tel.find(\".langCN\")[LangCur==\"cn\"?\"show\":\"hide\"]();\n\tel.find(\".langEN\")[LangCur!=\"cn\"?\"show\":\"hide\"]();\n\tvar inputs=el.find(\".inputLang\");\n\tfor(var i=0;i<inputs.length;i++)\n\t\tinputs[i].setAttribute(\"placeholder\",inputs[i].getAttribute(\"placeholder-\"+LangCur));\n};\nwindow.LangClick=function(lang){\n\tLangCur=lang;\n\tLangReview();\n\t$(\".langBtn\").css(\"color\",null);\n\t$(\".langBtn_\"+lang).css(\"color\",\"#000\");\n\t$(\"body\").css(\"wordBreak\",lang==\"cn\"?\"break-all\":null);\n\t\n\tif(!document.titleLang)document.titleLang=document.title;\n\tvar arr=document.titleLang.split(\"|\"),t1=[],t2=[];\n\tfor(var i=0;i<arr.length;i++)\n\t\tif(/[^\\\\x00-\\\\xff]/.test(arr[i]) == (LangCur==\"cn\"))t1.push(arr[i].trim());\n\t\telse t2.push(arr[i].trim());\n\tdocument.title=t1.concat(t2).join(\" | \");\n};\n\n\n/************** Console log output **************/\nwindow.CLog=function(tag, color, msg){\n\tvar now=new Date();\n\tvar t=(\"0\"+now.getMinutes()).substr(-2)\n\t\t+\":\"+(\"0\"+now.getSeconds()).substr(-2)\n\t\t+\".\"+(\"00\"+now.getMilliseconds()).substr(-3);\n\tmsg=msg.replace(/<!--LangHide1[\\\\S\\\\s]+?LangHide2-->/g,\"\");//去掉没有显示的语言\n\tmsg=msg.replace(/<[^>]+>/g,\"\");\n\tvar arr=[\"[\"+t+\" \"+tag+\"]\"+msg];\n\tfor(var i=3;i<arguments.length;i++){\n\t\tarr.push(arguments[i]);\n\t};\n\tvar fn=color==1?console.error:color==3?console.warn:color==4?console.debug:console.log;\n\tfn.apply(console,arr);\n\treturn msg;\n};\n\n\n/************** $ Selector / like jQuery **************/\n(function(){\nwindow.$=function(cls){ if(cls&&cls.is$) return cls; return new fn(cls) }\nvar fn=function(cls,node){\n\tthis.length=0;\n\tif(!cls)return;\n\tif(cls.appendChild){this.push(cls); return}\n\tvar arr=(node||document).querySelectorAll(cls);\n\tfor(var i=0;i<arr.length;i++)this.push(arr[i]);\n};\nfn.prototype={\n\tis$:1\n\t,push:function(val){ this[this.length++]=val }\n\t,find:function(cls){ var el0=this[0]; return new fn(el0?cls:\"\",el0) }\n\t,val:function(val){ return this.prop(\"value\",val) }\n\t,hide:function(){ return this.css(\"display\",\"none\") }\n\t,show:function(display){ return this.css(\"display\",display===undefined?null:display) }\n\t\n\t,html:function(html){\n\t\tvar el0=this[0];\n\t\tif(html===undefined)return el0&&el0.innerHTML||\"\";\n\t\tfor(var i=0;i<this.length;i++) this[i].innerHTML=html;\n\t\treturn this;\n\t}\n\t,append:function(html){ return this._end(html) }\n\t,prepend:function(html){ return this._end(html,1) }\n\t,_end:function(html,prep){\n\t\tvar el0=this[0];\n\t\tif(html && el0){\n\t\t\tvar nodes=html;\n\t\t\tif(typeof(html)==\"string\"){\n\t\t\t\tvar div=document.createElement(\"div\");\n\t\t\t\tdiv.innerHTML=html;\n\t\t\t\tnodes=[];\n\t\t\t\tfor(var i=0;i<div.childNodes.length;i++)nodes.push(div.childNodes[i]);\n\t\t\t}else if(html.appendChild){\n\t\t\t\tnodes=[html];\n\t\t\t}\n\t\t\tif(prep)prep=el0.firstChild;\n\t\t\tfor(var i=0;i<nodes.length;i++){\n\t\t\t\tif(prep) el0.insertBefore(nodes[i],prep);\n\t\t\t\telse el0.appendChild(nodes[i])\n\t\t\t}\n\t\t}\n\t\treturn this;\n\t}\n\t,prop:function(key,val){\n\t\tvar el0=this[0];\n\t\tif(val===undefined)return el0&&el0[key];\n\t\tfor(var i=0;i<this.length;i++) this[i][key]=val;\n\t\treturn this;\n\t}\n\t,attr:function(key,val){\n\t\tvar el0=this[0];\n\t\tif(val===undefined)return el0&&el0.getAttribute(key);\n\t\tfor(var i=0;i<this.length;i++){\n\t\t\tif(val==null) this[i].removeAttribute(key);\n\t\t\telse this[i].setAttribute(key,val);\n\t\t}\n\t\treturn this;\n\t}\n\t,css:function(key,val){\n\t\tfor(var i=0;i<this.length;i++)\n\t\t\tthis[i].style[key]=val;\n\t\treturn this;\n\t}\n\t,bind:function(type,fn){\n\t\tfor(var i=0;i<this.length;i++)\n\t\t\tthis[i].addEventListener(type,fn);\n\t\treturn this;\n\t}\n};\n})();\n\n\n/************** functions **************/\nwindow.FormatText=function(str){\n\treturn str.replace(/[&<>='\"]/g,function(a){ return \"&#\" + a.charCodeAt(0) + \";\" });\n};\n\nwindow.Str2Bytes=function(str){\n\tstr=unescape(encodeURIComponent(str));\n\tvar u8arr=new Uint8Array(str.length);\n\tfor(var i=0;i<str.length;i++)u8arr[i]=str.charCodeAt(i);\n\treturn u8arr;\n};\nwindow.Bytes2Str=function(bytes){\n\tvar str=\"\";\n\tfor(var i=0;i<bytes.length;i++) str+=String.fromCharCode(bytes[i]);\n\treturn decodeURIComponent(escape(str));\n};\nwindow.Json2UrlB64=function(data){\n\treturn Bytes2UrlB64(JSON.stringify(data));\n};\nwindow.Base642Bytes=function(b64){\n\tvar str=atob(b64);\n\tvar u8arr=new Uint8Array(str.length);\n\tfor(var i=0;i<str.length;i++)u8arr[i]=str.charCodeAt(i);\n\treturn u8arr;\n};\nwindow.UrlB642Bytes=function(str){\n\tstr=str.replace(/_/g,\"\\\\/\").replace(/-/g,\"+\");\n\twhile(str.length%4)str+=\"=\";\n\treturn Base642Bytes(str);\n};\nwindow.Bytes2UrlB64=function(bytes){//二进制数组转成url base64\n\treturn Bytes2Base64(bytes).replace(/\\\\//g,\"_\").replace(/\\\\+/g,\"-\").replace(/=/g,\"\");\n};\nwindow.Bytes2Base64=function(bytes){\n\tvar str=\"\";\n\tif(typeof(bytes)==\"string\"){\n\t\tstr=unescape(encodeURIComponent(bytes));\n\t}else{\n\t\tif(bytes instanceof ArrayBuffer) bytes=new Uint8Array(bytes);\n\t\tfor(var i=0;i<bytes.length;i++) str+=String.fromCharCode(bytes[i]);\n\t}\n\treturn btoa(str);\n};\n\n})();\n</script>\n\n\n<script>\n//===========================================\n//================= Launch ==================\n//===========================================\n//LICENSE: GPL-3.0, https://github.com/xiangyuecn/ACME-HTML-Web-Browser-Client\n(function(){\n\"use strict\";\n\nvar msg=\"\";\ntry{\n\twindow.PageRawHTML=window.PageRawHTML||document.documentElement.outerHTML;\n\tif(window.top!=window){\n\t\tmsg=Lang(\n\t\t\t '不允许在IFrame内显示本页面，请直接通过网址访问！'\n\t\t\t,'This page is not allowed to be displayed in IFrame, please visit it directly through the website!');\n\t\tthrow new Error();\n\t}\n\tvar SupportCrypto=false;\n\teval('SupportCrypto=!!crypto.subtle.sign');\n\teval('\\`\\`;(async function(){class a{}})');\n}catch(e){\n\tif(!msg && !SupportCrypto && window.isSecureContext===false){\n\t\tmsg=Lang('浏览器禁止不安全页面调用Crypto功能，可开启https解决，或使用localhost、file://访问', 'The browser prohibits unsafe pages from calling Crypto function. You can enable https to solve the problem, or use localhost, file:// to access');\n\t}\n\tif(!msg){\n\t\tmsg=Lang('浏览器版本太低'+(SupportCrypto?'':'（不支持Crypto）')+'，请换一个浏览器再试！', 'The browser version is too low'+(SupportCrypto?'':' (Crypto is not supported)')+'. Please change another browser and try again!');\n\t}\n\tdocument.body.innerHTML='<div style=\"font-size:32px;color:red;font-weight:bold;text-align:center;padding-top:100px\">'+msg+'</div>';\n\treturn;\n}\n$(\".main\").html($(\".main\").html()); //彻底干掉输入框自动完成\n$(\"input,textarea,select\").attr(\"autocomplete\",\"off\");\n\n$(\".main-load\").hide();\n$(\".main\").show();\nLangClick(LangCur);\n\ninitMainUI();\n\n})();\n</script></body></html>`;\n(function(){\n\t\tconsole.clear();\n\t\tdocument.head.innerHTML=/<head[^>]*>([\\S\\s]+?)<\\/head>/i.exec(PageRawHTML)[1];\n\t\tdocument.body.innerHTML=/<body[^>]*>([\\S\\s]+)<\\/body>/i.exec(PageRawHTML)[1];\n\t\tvar js=/<script[^>]*>([\\S\\s]+?)<\\/script>/ig,m;\n\t\twhile(m=js.exec(PageRawHTML)) eval.call(window, m[1]);\n\t})()\n```\n\n\n\n等待出现：**读取服务目录成功，**请进行下一步操作。 URL=https://acme.zerossl.com/v2/DV90/directory\n\n即已经选择ZeroSSL作为服务商。\n\n### 步骤二：证书配置\n\n提示：如果上次申请过证书，可以拖拽已下载保存的记录LOG文件到本页面，将自动填充上次的配置信息。\n\n在“证书中要包含的域名：”中填写你要签发的域名。\n\n泛域名填写方式：example.com,*.example.com\n\n单域名填写方式：www.example.com\n\n多域名合并：www.example.com,site1.example.com,site2.example.com\n\n`带通配符的域名只支持DNS验证，其他域名支持上传文件验证`\n\n在 `证书的私钥：`处一般选择 `创建新RSA私钥`或 `创建新ECC私钥`，根据证书的加密形式而定。\n\n在 `ACME账户的私钥：`处一般选择 `创建新RSA私钥 `或 `创建新ECC私钥 `，根据证书的加密形式而定。\n\n在 ` ACME账户的联系邮箱：`处填写你的邮箱，该邮箱必须真实存在。\n\n### 步骤三：验证域名所有权\n\n请给每个域名选择一个你合适的验证方式，泛域名只能使用DNS解析方式。\n\nDNS解析方式：登陆到你的解析提供平台，如DNSPod，CloudFlare等，添加一条或多条TXT记录。\n\n文件验证方式：仅限单域名，在你域名所属的文件目录下 创建 `/.well-known/acme-challenge/`目录并在内创建验证文件。\n\nTLS-ALPN-01：使用Key Authorizations (Token+.+指纹)自行处理，Digest为Key Authorizations的SHA-256 Base64值。\n\n完成后，点击“开始验证”即可验证。\n\n## 步骤四：下载保存证书PEM文件\n\n完成验证后，服务端会自动签发SSL证书，点击下载即可下载证书对应私钥，公钥和Log文件。\n\n### 其他提示\n\n1.你需要其他格式的证书文件？\n\n大部分服务器程序支持直接使用 your_domain.pem+your_domain.key 来配置开启HTTPS（比如Nginx），如果你需要 *.pfx、*.p12 格式的证书（比如用于IIS），请用下面命令将PEM证书转换成 pfx/p12 格式：\n\n```shell\nopenssl pkcs12 -export -out your_domain.pfx -inkey your_domain.key -in your_domain.pem\n```\n\n2.IIS证书链缺失？\n\n对于Windows IIS服务器，你需要将证书链安装到“本地计算机”的“中间证书颁发机构”中；请将PEM证书中的所有证书拆分成单个PEM文件（后缀改成.crt或.cer），然后将系统中缺失的中间证书双击打开然后安装进去；详细参考： http://support.microsoft.com/kb/954755\n","source":"_posts/zerossl-ssl.md","raw":"---\nabbrlink: ''\ncategories: []\nindex_img: https://cdnn.boochi.cn/gh/inkdust-dev/ink-oss@main/qexo-upload/24/8/zerossl-ssl_646c1327b09c5fd73ab7de952c42df84.png\ndate: '2024-08-12T17:51:02.708172+08:00'\ntags: []\ntitle: SSL系列二之快速签发免费ZeroSSL泛域名证书\nupdated: '2024-08-12T18:24:22.549+08:00'\n---\n## 引入\n\n现如今，向像腾讯，阿里云等大厂的免费SSL证书，都由一年缩短为3个月。\n\n[https://cloud.tencent.com/document/product/400/104538](https://cloud.tencent.com/document/product/400/104538)\n\n在如今的形式下，签发免费的3个月的单域名证书显然不如直接签发Let's Encrypt、ZeroSSL等ACME提供的泛域名证书来的方便。\n\n而acme.sh常用于Linux端上证书的自动化签发与续约，对于不使用服务器的人群，显然造成了许多麻烦，那么可以通过Web端直接签发这些ACME的泛域名证书吗？\n\nGithub开源项目ACME-Web-Browser-Client告诉了我们这并非是一件不可能实现的事情。\n\n简介：\n\n本网页客户端（仅一个静态HTML网页文件）用于：向 Let's Encrypt、ZeroSSL、Google 等支持 ACME 协议的证书颁发机构，免费申请获得用于 HTTPS 的 SSL/TLS 域名证书（RSA、ECC/ECDSA），支持多域名和通配符泛域名；只需在现代浏览器上操作即可获得 PEM 格式纯文本的域名证书，不依赖操作系统环境（Windows、macOS都能用），无需下载和安装软件，无需注册登录，纯手动操作，只专注于申请获得证书这一件事，简单易用，非常适用于希望手动快捷申请获得证书的使用场景。\n\nGithub开源地址：[https://github.com/xiangyuecn/ACME-HTML-Web-Browser-Client](https://github.com/xiangyuecn/ACME-HTML-Web-Browser-Client)\n\nGitee开源地址：\n\nhttps://gitee.com/xiangyuecn/ACME-HTML-Web-Browser-Client\n\n## 使用\n\n提示：可将其私有化部署到Vercel，Netlify等上，可弥补Github Pages速度的不足。\n\n任意点击下列一个网页使用：\n\nhttps://xiangyuecn.github.io/ACME-HTML-Web-Browser-Client/ACME-HTML-Web-Browser-Client.html （作者Github Pages）\n\nhttps://ssl.dev.inkdust.top/ （本人Vercel）\n\n## 签发ZeroSSL\n\n本文为签发ZeroSSL篇教程，签发Let's Encrypt或Google，请看Let's Encrypt篇和Google篇。\n\n### 步骤一：注册ZeroSSL\n\n来到https://zerossl.com/\n\n注册ZeroSSL，请使用魔法网络环境，如无法使用魔法网络环境，请使用`Header Eidtor` 来将 `reCAPTCHA`的地址重写到国内镜像。\n\nHeader Eidtor谷歌商店：https://chromewebstore.google.com/detail/header-editor/eningockdidmgiojffjmkdblpjocbhgh?hl=zh-CN&utm_source=ext_sidebar\n\nHeader Eidtor Edge商店：https://microsoftedge.microsoft.com/addons/detail/header-editor/djbcdihpmcbpkljpjibeiedjenilallo\n\nHeader Eidtor Crx搜搜：https://www.crxsoso.com/webstore/detail/eningockdidmgiojffjmkdblpjocbhgh\n![https://cdnn.boochi.cn/gh/inkdust-dev/ink-oss@main/qexo-upload/24/8/image_38fa68a496e6a63cd50b294b0776d192.png](https://cdnn.boochi.cn/gh/inkdust-dev/ink-oss@main/qexo-upload/24/8/image_38fa68a496e6a63cd50b294b0776d192.png)\n\n重写规则：\n\n```plaintext\n名称：reCAPTCHA\n\n匹配类型：正则表达式\n\n规则类型：重定向规则\n\n匹配规则：^http(s?)://(?:www\\.|recaptcha\\.|)google\\.com/recaptcha/(.*)\n\n执行类型：常规\n\n重定向至：https://recaptcha.net/recaptcha/$2\n```\n\n导入TXT文件：\n\n```plaintext\n{\n\t\"request\": [],\n\t\"sendHeader\": [],\n\t\"receiveHeader\": [\n\t\t{\n\t\t\t\"enable\": false,\n\t\t\t\"name\": \"Content Security Policy Header Modification\",\n\t\t\t\"ruleType\": \"modifyReceiveHeader\",\n\t\t\t\"matchType\": \"all\",\n\t\t\t\"pattern\": \"\",\n\t\t\t\"exclude\": \"\",\n\t\t\t\"isFunction\": true,\n\t\t\t\"code\": \"let rt = detail.type;\\nif (rt === 'script' || rt === 'stylesheet' || rt === 'main_frame' || rt === 'sub_frame') {\\n  for (let i in val) {\\n    if (val[i].name.toLowerCase() === 'content-security-policy') {\\n      let s = val[i].value;\\n      s = s.replace(/googleapis\\\\.com/g, '$& https://gapis.geekzu.org');\\n      s = s.replace(/recaptcha\\\\.google\\\\.com/g, '$& https://recaptcha.net');\\n      s = s.replace(/google\\\\.com/g, '$& https://recaptcha.net');\\n      s = s.replace(/gstatic\\\\.com/g, '$& https://*.gstatic.cn');\\n      val[i].value = s;\\n    }\\n  }\\n}\",\n\t\t\t\"group\": \"未分组\"\n\t\t}\n\t],\n\t\"receiveBody\": []\n}\n```\n\n![https://cdnn.boochi.cn/gh/inkdust-dev/ink-oss@main/qexo-upload/24/8/image_18ab541cb20291a0419ffeb09a1c83bf.png](https://cdnn.boochi.cn/gh/inkdust-dev/ink-oss@main/qexo-upload/24/8/image_18ab541cb20291a0419ffeb09a1c83bf.png)\n\n注册，并登录ZeroSSL。点击`Developers`,`EAB Credentials for ACME Clients`下方的`Generate`,保存好生成的**EAB KID**和**EAB HMAC Key**。\n![https://cdnn.boochi.cn/gh/inkdust-dev/ink-oss@main/qexo-upload/24/8/image_d8176d5822392d6870b8b1f38becddd3.png](https://cdnn.boochi.cn/gh/inkdust-dev/ink-oss@main/qexo-upload/24/8/image_d8176d5822392d6870b8b1f38becddd3.png)\n\n任意点击下列一个网页打开签发SSL：\n\nhttps://xiangyuecn.github.io/ACME-HTML-Web-Browser-Client/ACME-HTML-Web-Browser-Client.html （作者Github Pages）\n\nhttps://ssl.dev.inkdust.top/ （本人Vercel）\n\n### 步骤二：选择证书颁发机构\n\n在“证书颁发机构 ACME(v2, RFC 8555) 服务URL”下选择ZeroSSL，点击 `读取服务目录`并等待出现：\n\n测试此ACME服务对浏览器的支持情况，发生错误：GetNonce:** **此ACME服务对浏览器访问支持太差，无法跨域获取Replay-Nonce响应头。**\n\n关闭改网页，直接打开https://acme.zerossl.com/v2/DV90/directory，按`F12`键打开开发者控制台，点击`控制台` 或`Console`，输入以下代码（代码安全开源）：\n\n```javascript\n// 请复制本代码到打开的ACME服务URL页面的浏览器控制台中运行。\n\nvar Default_ACME_URL=\"https://acme.zerossl.com/v2/DV90/directory\";\nvar IsReadDirGotoCORS=true;\nvar PageRawHTML=`<html><head>\n<meta http-equiv=\"Content-Type\" content=\"text/html; charset=utf-8\">\n<meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0\">\n<link rel=\"shortcut icon\" type=\"image/png\" href=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAAe1BMVEUDuu3///8AtuwAue1c0/QAt+1a0vSZ4/gOve4Ju+4AtOzf9v31/P4iw/DS8/yf5fnE7/tNzvMsxvHw+/7t+v7k+P2U4veO4PeA3Pbp+f7h9/3Y9f3I8Pxt1/Vi1PRQz/NDzPIzyPEWv+76/v/3/f+87fqn5/mI3/Z82vb+fQDoAAAA10lEQVQ4y63T2c7CIBCGYWamUwFZurfuy7/e/xVaeySlYmJ8T78nISQgPh0xU2pGZa1EfrazHJz5an2FT3brYKoul4UqAHx5Hhqoq6VTMAc4aER9acDjEviFPd2voP9gKykGVECHkzyBsRzvI+g1jWG5BFDIPXRKjqkcTKUwPISPbvsN9XpqA9DuehXsF4g64APALAY+AHkMVm+CzToNVld1NAmwE0zaJ0DBQughAcxZ66tLAGj6f/f2NdMgewXKGHSPgOTPfG/Dh0vqlAXlluefahaLT3UDvrAKrj7jLKkAAAAASUVORK5CYII=\">\n\n<title>ACME Web Browser Client | ACME客户端H5网页单文件版，在线免费申请签发SSL/TLS通配符泛域名HTTPS证书，支持Let's Encrypt、ZeroSSL，无需账号免登录注册 | Windows macOS Get Wildcard Certificates Online For Free - Single HTML File</title>\n</head>\n\n<body>\n<script>\nvar Version=\"1.0.230820\";\nconsole.log(\"LICENSE: GPL-3.0, https://github.com/xiangyuecn/ACME-HTML-Web-Browser-Client/blob/main/LICENSE\");\n/***********************************\n中英对照翻译主要来自：Chrome自带翻译+百度翻译，由中文翻译成English（作者英文很菜）。\nThe Chinese-English translation is mainly from: Chrome comes with translation + Baidu translation, which is translated from Chinese to English (the author's English level is very low)\n\n感谢围观本客户端源码，所有功能的代码都在本页面一个文件内，逻辑上会比较长和比较丑（关键地方或多或少有写注释），如感不适，请转头看看旁边的大长腿，再深呼吸一下继续看下一行~\nThank you for watching the source code of this client. The code of all functions is in one file on this page, which is logically long and ugly (more or less comments are written in key places). If you feel uncomfortable, please turn your head and look at the Big Long Legs next to you, take another deep breath and continue to look at the next line~\n************************************/\n</script>\n\n\n<div class=\"main-load\" style=\"padding-top:40vh;text-align:center;font-size:28px\">Loading...</div>\n<div class=\"main\" style=\"display:none\">\n<div class=\"mainBox acmeReadDirGotoCORSState\" style=\"display:none\"></div>\n\n<div class=\"mainBox\">\n\t<span style=\"font-size:32px;font-weight:bold;color:#03baed;\">\n\t\t<span class=\"langCN clientNameCN\">HTML5网页版ACME客户端</span>\n\t\t<span class=\"langEN clientNameEN\">ACME Web Browser Client</span>\n\t</span>\n\t<span class=\"versionBox\" style=\"font-size:14px;color:#03baed;margin-right:80px\"></span>\n\t<span style=\"display:inline-block\">\n\t\t<span class=\"langCN\">开源代码：</span>\n\t\t<span class=\"langEN\">Open source: </span>\n\t\t<a href=\"https://github.com/xiangyuecn/ACME-HTML-Web-Browser-Client\" target=\"_blank\">GitHub &gt;&gt;</a>\n\t\t<span class=\"langCN\">\n\t\t\t| <a href=\"https://gitee.com/xiangyuecn/ACME-HTML-Web-Browser-Client\" target=\"_blank\">Gitee &gt;&gt;</a>\n\t\t</span>\n\t</span>\n\t\n\t<ul class=\"itemBox feature_ul\" style=\"list-style-type: none;margin:8px 0 0 0;padding:0 8px 0 8px;color:#666\">\n\t\t<li class=\"langCN\"><i>功能用途</i>本网页客户端用于：向 <a href=\"https://letsencrypt.org/\" target=\"_blank\">Let's Encrypt</a>、<a href=\"https://zerossl.com/\" target=\"_blank\">ZeroSSL</a>、<a href=\"https://pki.goog/\" target=\"_blank\">Google</a> 等支持 ACME 协议的证书颁发机构，免费申请获得用于 HTTPS 的 SSL/TLS 域名证书（RSA、ECC/ECDSA），支持多域名和通配符泛域名；只需在现代浏览器上操作即可获得 PEM 格式纯文本的域名证书，不依赖操作系统环境，无需下载和安装软件，纯手动操作，<span class=\"Bold\">只专注于申请获得证书这一件事。</span></li>\n\t\t<li class=\"langEN\"><i>Functional use</i>This web client is used to: apply for free SSL/TLS domain name certificates (RSA, ECC/ECDSA) for HTTPS from <a href=\"https://letsencrypt.org/\" target=\"_blank\">Let's Encrypt</a> , <a href=\"https://zerossl.com/\" target=\"_blank\">ZeroSSL</a> , <a href=\"https://pki.goog/\" target=\"_blank\">Google</a> and other certificate authorities that support the ACME protocol, and support multiple domain names and wildcard pan-domain names; Simply operate on a modern browser to obtain a domain name certificate in plain text in PEM format, does not depend on the operating system environment, does not need to download and install software, and is purely manual, <span class=\"Bold\">only focus on the only thing that is to apply for and obtain a certificate.</span></li>\n\t\t\n\t\t<li class=\"langCN\"><i>简单易用</i>点点鼠标 Ctrl+C Ctrl+V 就能完成证书的申请，全程需要的操作少，每一步都有保姆级操作提示，UI友好大气美观；<span class=\"Bold\">本客户端不需要注册账号、更不需要登录。</span></li>\n\t\t<li class=\"langEN\"><i>Easy to use</i>Click the mouse and Ctrl+C Ctrl+V to complete the certificate application. The whole process requires less operations, and there are nanny level operation prompts at each step; UI friendly, atmospheric and beautiful; <span class=\"Bold\">This client does not need to register an account, and does not need to log in.</span></li>\n\t\t\n\t\t<li class=\"langCN\"><i>开源项目</i>本网页客户端源码已开源，访问网址由托管仓库提供，源码透明可追溯。</li>\n\t\t<li class=\"langEN\"><i>Open source project</i>The source code of the client side of this webpage has been open sourced, and the access URL is provided by the hosting warehouse, and the source code is transparent and traceable.</li>\n\t\t\n\t\t<li class=\"langCN\"><i>单一文件</i>本网页客户端仅一个静态 HTML 文件，不依赖其他任何文件；因此可以直接保存到你本地（右键-另存为），即可通过浏览器打开。</li>\n\t\t<li class=\"langEN\"><i>A single file</i>This web client is only a single static HTML web page file and does not depend on any other files; therefore, it can be directly saved to your local (right-click - save as), and you can open it through a browser.</li>\n\t\t\n\t\t<li class=\"langCN\"><i>数据安全</i>除了你指定证书颁发机构的 ACME 接口地址外，本网页客户端不会向其他任何地址发送数据，通过浏览器控制台很容易做到网络数据审查。</li>\n\t\t<li class=\"langEN\"><i>Data security</i>Except for the ACME interface address of the certificate authority you specify, this web client will not send data to any other address, and it is easy to check the network data through the browser console.</li>\n\t\t\n\t\t<li class=\"langCN\"><i>系统安全</i>纯网页应用，不会也无法对你的电脑系统做出任何修改。</li>\n\t\t<li class=\"langEN\"><i>System security</i>Pure web application, will not and cannot make any modification to your computer system.</li>\n\t\t\n\t\t<li class=\"langCN\" style=\"color:#cb1d1d\"><i style=\"background:#cb1d1d\">证书过期风险提醒</i>由于本网页客户端只能纯手动操作，不支持自动续期，需注意在证书过期前重新生申请新证书（免费证书普遍90天有效期，届时只需重复操作一遍即可），或使用 acme.sh 等客户端自动化续期。</li>\n\t\t<li class=\"langEN\" style=\"color:#cb1d1d\"><i style=\"background:#cb1d1d\">Certificate Expiration Risk Alert</i>Since this web client can only be operated manually and does not support automatic renewal, you should pay attention to apply for a new certificate before the certificate expires (free certificates are generally valid for 90 days, you only need to repeat the operation at that time), or use acme.sh and other client automatic renewal.</li>\n\t</ul>\n\t<style>\n\t\t.feature_ul li{margin: 8px 0;}\n\t\t.feature_ul i{\n\t\t\tfont-style: normal;\n\t\t\tmargin-right:8px;\n\t\t\tdisplay: inline-block;\n\t\t\tvertical-align: middle;\n\t\t\tbackground: #03baed;\n\t\t\tcolor: #fff;\n\t\t\tfont-size: 14px;\n\t\t\tpadding: 2px 8px;\n\t\t\tborder-radius: 99px;\n\t\t}\n\t</style>\n</div>\n\n\n\n\n\n<div class=\"mainBox\">\n\t<div class=\"pd itemTitle\">\n\t\t<span class=\"langCN\">步骤一：选择证书颁发机构</span>\n\t\t<span class=\"langEN\">Step 1: Select a Certificate Authority</span>\n\t</div>\n\t<div class=\"itemBox\">\n\t\t<div class=\"pd Bold\">\n\t\t\t<i class=\"must\">*</i>\n\t\t\t<span class=\"langCN\">证书颁发机构 ACME(v2, <a href=\"https://www.rfc-editor.org/rfc/rfc8555.html\" target=\"_blank\">RFC 8555</a>) 服务URL：</span>\n\t\t\t<span class=\"langEN\">Certificate Authority ACME (v2, <a href=\"https://www.rfc-editor.org/rfc/rfc8555.html\" target=\"_blank\">RFC 8555</a>) Service URL:</span>\n\t\t</div>\n\t\t<div class=\"pd\">\n\t\t\t<label><input type=\"radio\" name=\"choice_acmeURL\" value=\"https://acme-v02.api.letsencrypt.org/directory\" desckey=\"descLetsEncrypt\">Let's Encrypt</label>\n\t\t\t<label><input type=\"radio\" name=\"choice_acmeURL\" value=\"https://acme.zerossl.com/v2/DV90/directory\" desckey=\"descZeroSSL\">ZeroSSL</label>\n\t\t\t<label><input type=\"radio\" name=\"choice_acmeURL\" value=\"https://dv.acme-v02.api.pki.goog/directory\" desckey=\"descGoogle\">Google</label>\n\t\t\t<label>\n\t\t\t\t<input type=\"radio\" name=\"choice_acmeURL\" value=\"manual\">\n\t\t\t\t<span class=\"langCN\">手动填写URL</span>\n\t\t\t\t<span class=\"langEN\">Fill in the URL manually</span>\n\t\t\t</label>\n\t\t\t<label>\n\t\t\t\t<input type=\"radio\" name=\"choice_acmeURL\" value=\"https://acme-staging-v02.api.letsencrypt.org/directory\">\n\t\t\t\t<span class=\"langCN\">测试用[不要选]</span>\n\t\t\t\t<span class=\"langEN\">For testing, don't choose</span>\n\t\t\t</label>\n\t\t</div>\n\t\t\n\t\t<div style=\"font-size:13px;color:#aaa\">\n\t\t\t<div class=\"pd descAcmeURL descLetsEncrypt\" style=\"display:none\">\n\t\t\t\t<a href=\"https://letsencrypt.org/\" target=\"_blank\">Let's Encrypt</a>:\n\t\t\t\t<span class=\"langCN\">请按照下面的操作步骤提示进行申请即可得到证书，证书有效期90天。</span>\n\t\t\t\t<span class=\"langEN\">Please follow the operation steps prompts below to apply, and you can get the certificate, which is valid for 90 days.</span>\n\t\t\t</div>\n\t\t\t<div class=\"pd descAcmeURL descZeroSSL\" style=\"display:none\">\n\t\t\t\t<a href=\"https://zerossl.com/\" target=\"_blank\">ZeroSSL</a>:\n\t\t\t\t<span style=\"color:#f80\">\n\t\t\t\t\t<span class=\"langCN\">此URL可能需要先根据下面的提示进行操作来消除跨域不能访问的问题。</span>\n\t\t\t\t\t<span class=\"langEN\">This URL may need to be operated according to the prompts below to eliminate the problem of cross-domain inaccessibility.</span>\n\t\t\t\t</span>\n\t\t\t\t<span class=\"langCN\">申请证书前，你需要根据ZeroSSL的<a href=\"https://zerossl.com/documentation/acme/\" target=\"_blank\">官方文档</a>，先注册ZeroSSL账号并生成一个EAB凭据，每次申请证书时使用此EAB凭据，按照下面的操作步骤提示进行申请即可得到证书，证书有效期90天。</span>\n\t\t\t\t<span class=\"langEN\">Before applying for a certificate, you need to follow ZeroSSL's <a href=\"https://zerossl.com/documentation/acme/\" target=\"_blank\">official documents</a>, register a ZeroSSL account and generate an EAB credential, and use this EAB credential every time you apply for a certificate, follow the operation steps prompts below to apply, and you can get the certificate, which is valid for 90 days.</span>\n\t\t\t</div>\n\t\t\t<div class=\"pd descAcmeURL descGoogle\" style=\"display:none\">\n\t\t\t\t<a href=\"https://pki.goog/\" target=\"_blank\">Google Trust Services</a>:\n\t\t\t\t<span style=\"color:#f80\">\n\t\t\t\t\t<span class=\"langCN\">此URL可能需要先根据下面的提示进行操作来消除跨域不能访问的问题。</span>\n\t\t\t\t\t<span class=\"langEN\">This URL may need to be operated according to the prompts below to eliminate the problem of cross-domain inaccessibility.</span>\n\t\t\t\t</span>\n\t\t\t\t<span class=\"langCN\">申请证书前，你需要根据Google的<a href=\"https://cloud.google.com/certificate-manager/docs/public-ca-tutorial\" target=\"_blank\">官方文档</a>，在Google Cloud中生成一个EAB凭据，每次申请证书时使用此EAB凭据，按照下面的操作步骤提示进行申请即可得到证书，证书有效期90天。</span>\n\t\t\t\t<span class=\"langEN\">Before applying for a certificate, you need to follow Google's <a href=\"https://cloud.google.com/certificate-manager/docs/public-ca-tutorial\" target=\"_blank\">official documents</a>, generate an EAB credential in Google Cloud, and use this EAB credential every time you apply for a certificate, follow the operation steps prompts below to apply, and you can get the certificate, which is valid for 90 days.</span>\n\t\t\t\t<span style=\"color:#f80\">\n\t\t\t\t\t<span class=\"langCN\">注意：因为同一个Google EAB凭据只能绑定到一个ACME账户（私钥），因此你在首次申请证书时，<span style=\"font-weight:bold;font-size:20px\">必须同时保存好在第二步操作中新创建的或手动填写的ACME账户私钥</span>，下次申请证书时使用此EAB凭据必须和已保存的ACME账户私钥一起使用。</span>\n\t\t\t\t\t<span class=\"langEN\">Note: Because the same Google EAB credential can only be bound to one ACME account (Private key), when you apply for a certificate for the first time, <span style=\"font-weight:bold;font-size:20px\">you must also save the newly generated or manually filled ACME account private key in the second step</span>, this EAB credential must be used together with the saved ACME account private key when applying for a certificate next time.</span>\n\t\t\t\t</span>\n\t\t\t</div>\n\t\t</div>\n\t\t\n\t\t<div class=\"pd FlexBox\">\n\t\t\t<div class=\"FlexItem\">\n\t\t\t\t<input class=\"in_acmeURL inputLang\" style=\"width:100%\" placeholder-cn=\"请填写证书颁发机构ACME服务URL\" placeholder-en=\"Please fill in the Certificate Authority ACME Service URL\">\n\t\t\t</div>\n\t\t\t<div style=\"padding-left:12px\">\n\t\t\t\t<span class=\"mainBtn mainBtnMin\" onclick=\"acmeReadDirClick()\" style=\"padding:0 50px\">\n\t\t\t\t\t<span class=\"langCN\">读取服务目录</span>\n\t\t\t\t\t<span class=\"langEN\">Read service directory</span>\n\t\t\t\t</span>\n\t\t\t</div>\n\t\t</div>\n\t\t<div class=\"acmeReadDirState\"></div>\n<script>\n//跨域支持的不好的ACME服务，直接复制源码到他们网站里面运行\nvar acmeReadDirGotoCORSInit=function(){\n\tif(!window.IsReadDirGotoCORS)return;\n\tvar stateEl=$(\".acmeReadDirGotoCORSState\").show().html(\\`\n<div style=\"color:#cb1d1d\">\n\t<span class=\"langCN\">本客户端正在以跨域兼容模式运行，请按正常流程操作即可，目标ACME服务URL=$\\{window.Default_ACME_URL}</span>\n\t<span class=\"langEN\">This client is running in cross-domain compatibility mode, please follow the normal process, the target ACME service URL=$\\{window.Default_ACME_URL}</span>\n</div>\n\t\\`);\n\tLangReview(stateEl);\n};\nvar acmeReadDirGotoCORS=function(title){\n\t\"use strict\";\n\tvar codes=\"// \"+Lang(\"请复制本代码到打开的ACME服务URL页面的浏览器控制台中运行。\",\"Please copy this code to the browser console of the opened ACME service URL page to run.\",true)\n\t\t+\"\\\\n\\\\nvar Default_ACME_URL=\"+JSON.stringify(ACME.URL)+\";\"\n\t\t+\"\\\\nvar IsReadDirGotoCORS=true;\"\n\t\t+\"\\\\nvar PageRawHTML=\\`\"\n\t\t\t+PageRawHTML.replace(/\\\\\\\\/g,\"\\\\\\\\\\\\\\\\\").replace(/\\`/g,\"\\\\\\\\\\`\").replace(/\\\\$\\\\{/g,\"$\\\\\\\\{\")\n\t\t+\"\\`;\";\n\tcodes+=\"\\\\n(\"+(function(){\n\t\tconsole.clear();\n\t\tdocument.head.innerHTML=/<head[^>]*>([\\\\S\\\\s]+?)<\\\\/head>/i.exec(PageRawHTML)[1];\n\t\tdocument.body.innerHTML=/<body[^>]*>([\\\\S\\\\s]+)<\\\\/body>/i.exec(PageRawHTML)[1];\n\t\tvar js=/<script[^>]*>([\\\\S\\\\s]+?)<\\\\/script>/ig,m;\n\t\twhile(m=js.exec(PageRawHTML)) eval.call(window, m[1]);\n\t}).toString()+\")()\";\n\t$(\".gotoCORSBox\").hide();\n\tvar stateEl=$(\".acmeReadDirState\").append(\\`\n<div class=\"gotoCORSBox\" style=\"padding-top:15px\">\n\t<div class=\"pd Bold\" style=\"color:red\">\n\t\t<i class=\"must\">*</i>\n\t\t\\`+(title||\\`\n\t\t<span class=\"langCN\">由于此ACME服务对跨域访问支持不良，</span>\n\t\t<span class=\"langEN\">Because this ACME service has poor support for cross-domain access, </span>\n\t\t<span style=\"font-size:24px\">\n\t\t\t<span class=\"langCN\">请按下面步骤操作：</span>\n\t\t\t<span class=\"langEN\">please follow the steps below:</span>\n\t\t</span>\\`)+\\`\n\t</div>\n<div style=\"padding-left:40px\">\n\t<div class=\"pd\">\n\t\t<span class=\"langCN\">1. 请在浏览器中直接打开此ACME服务URL，<a href=\"$\\{ACME.URL}\" target=\"_blank\">点此打开</a>；</span>\n\t\t<span class=\"langEN\">1. Please open the ACME service URL directly in the browser, <a href=\"$\\{ACME.URL}\" target=\"_blank\">click here to open</a>;</span>\n\t</div>\n\t<div class=\"pd\">\n\t\t<span class=\"langCN\">2. 在上一步打开的页面中打开浏览器控制台（需等页面加载完成后，再按F12键）；</span>\n\t\t<span class=\"langEN\">2. Open the browser console in the page opened in the previous step (after the page is loaded, press the F12 key);</span>\n\t</div>\n\t<div class=\"pd\">\n\t\t<span class=\"langCN\">3. 复制以下代码，在第2步打开的浏览器控制台中运行，然后就可以正常申请证书了。</span>\n\t\t<span class=\"langEN\">3. Copy the following code, run it in the browser console opened in step 2, and then you can apply for the certificate normally.</span>\n\t</div>\n\t<div class=\"pd\" style=\"font-size:13px;color:#aaa\">\n\t\t<span class=\"langCN\">工作原理：代码内包含了本页面源码，在目标页面内运行后将原样的显示出本客户端，然后按正常流程操作即可，此时已没有跨域问题了（既然打不过，那就加入他们）。</span>\n\t\t<span class=\"langEN\">Working principle: The code contains the source code of this page. After running in the target page, the client will be displayed as it is, and then operate according to the normal process. At this time, there is no cross-domain problem (if we can't beat them, we'd better join them).</span>\n\t</div>\n</div>\n\t<div style=\"padding-top:20px\">\n\t\t<textarea class=\"gotoCORSText\" style=\"width:100%;height:200px\" readonly></textarea>\n\t</div>\n</div>\n\t\\`);\n\t$(\".gotoCORSText\").val(codes);\n\tLangReview(stateEl);\n};\n</script>\n\t</div>\n</div>\n\n\n\n\n\n<div class=\"mainBox\">\n\t<div class=\"pd itemTitle\">\n\t\t<span class=\"langCN\">步骤二：证书配置</span>\n\t\t<span class=\"langEN\">Step 2: Certificate Configuration</span>\n\t</div>\n\t<div class=\"step2Hide step1Show\">\n\t\t<div class=\"itemBox\" style=\"color:#999\">\n\t\t\t<span class=\"langCN\">等待中，请先完成第一步...</span>\n\t\t\t<span class=\"langEN\">Waiting, please complete step 1 first...</span>\n\t\t</div>\n\t</div>\n\t<div class=\"step1Hide step2Show\">\n\t\t\n\t\t\n\t\t<div class=\"pd\" style=\"font-size:13px;color:#aaa\">\n\t\t\t<span class=\"langCN\">温馨提示：如果上次申请过证书，可以拖拽已下载保存的记录LOG文件到本页面，将自动填充上次的配置信息。</span>\n\t\t\t<span class=\"langEN\">Reminder: If you have applied for a certificate last time, you can drag and drop the downloaded and saved record LOG file to this page, and the last configuration information will be automatically filled in.</span>\n\t\t</div>\n\t\t\n\t\t\n\t\t<div class=\"itemBox\">\n\t\t\t<div class=\"pd Bold\">\n\t\t\t\t<i class=\"must\">*</i>\n\t\t\t\t<span class=\"langCN\">证书中要包含的域名：</span>\n\t\t\t\t<span class=\"langEN\">Domain name to be included in the certificate:</span>\n\t\t\t</div>\n\t\t\t<div class=\"pd\" style=\"font-size:13px;color:#aaa\">\n\t\t\t\t<span class=\"langCN\">一个证书可以包含多个域名（支持通配符），比如填写：<i class=\"i\">a.com, *.a.com, b.com, *.b.com</i>；第一个域名将作为证书的通用名称（Common Name）；带通配符的域名只支持DNS验证，其他域名支持上传文件验证；注意：填了<i class=\"i\">www.a.com</i>时，一般需要额外填上<i class=\"i\">a.com</i>。</span>\n\t\t\t\t<span class=\"langEN\">A certificate can contain multiple domain names (wildcard are supported), for example, fill in: <i class=\"i\">a.com, *.a.com, b.com, *.b.com</i>; the first domain name will be used as the Common Name of the certificate; Domain names with wildcard only support DNS verification, and other domain names support upload file verification ; Note: When <i class=\"i\">www.a.com</i> is filled in, it is generally necessary to fill in <i class=\"i\">a.com</i> additionally.</span>\n\t\t\t</div>\n\t\t\t<div class=\"FlexBox\">\n\t\t\t\t<div class=\"FlexItem\">\n\t\t\t\t\t<input class=\"in_domains inputLang\" style=\"width:100%\" placeholder-cn=\"请填写你的域名，多个用逗号隔开\" placeholder-en=\"Please fill in your domain name, multiple separated by commas\">\n\t\t\t\t</div>\n\t\t\t\t<div style=\"padding-left:15px;line-height:30px;font-size:13px;color:#aaa\">\n\t\t\t\t\t<label>\n\t\t\t\t\t\t<input type=\"checkbox\" class=\"choice_domains_store\">\n\t\t\t\t\t\t<span class=\"langCN\">记住</span>\n\t\t\t\t\t\t<span class=\"langEN\">Remember</span>\n\t\t\t\t\t</label>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t\t\n\t\t\n\t\t<div class=\"itemBox\">\n\t\t\t<div class=\"pd Bold\">\n\t\t\t\t<i class=\"must\">*</i>\n\t\t\t\t<span class=\"langCN\">证书的私钥：</span>\n\t\t\t\t<span class=\"langEN\">Private key of certificate:</span>\n\t\t\t</div>\n\t\t\t<div class=\"pd\" style=\"font-size:13px;color:#aaa\">\n\t\t\t\t<span class=\"langCN\">生成或填写的私钥仅用于ACME接口签名，支持<i class=\"i\">RSA(2048位+)</i>、<i class=\"i\">ECC(<span class=\"eccCurveNames\"></span>曲线)</i>私钥；<span style=\"color:#f80\">注意：证书私钥的类型决定了申请到的证书是RSA证书还是ECC(ECDSA)证书，RSA类型适用性更广也更常见</span>；本客户端不会对此私钥进行保存或发送给其他任何人；证书签发后在部署到服务器时，需使用到此私钥；建议每次申请证书时均生成新的证书私钥。</span>\n\t\t\t\t<span class=\"langEN\">The generated or filled private key is only used for ACME interface signature, and supports <i class=\"i\">RSA (2048-bit+)</i> and <i class=\"i\">ECC (<span class=\"eccCurveNames\"></span> curve)</i> private keys; <span style=\"color:#f80\">Note: The type of certificate private key determines whether the applied certificate is an RSA certificate or a ECC(ECDSA) certificate, RSA type is more widely applicable and more common;</span> this client will not save or send this private key to anyone else; this private key needs to be used when deploying to the server after the certificate is issued; it is recommended to generate a new certificate private key every time you apply for a certificate.</span>\n\t\t\t</div>\n\t\t\t<div class=\"pd\">\n\t\t\t\t<label>\n\t\t\t\t\t<input type=\"radio\" name=\"choice_privateKey\" value=\"generateRSA\">\n\t\t\t\t\t<span class=\"langCN\">创建新RSA私钥</span>\n\t\t\t\t\t<span class=\"langEN\">Generate RSA private key</span>\n\t\t\t\t</label>\n\t\t\t\t<label>\n\t\t\t\t\t<input type=\"radio\" name=\"choice_privateKey\" value=\"generateECC\">\n\t\t\t\t\t<span class=\"langCN\">创建新ECC私钥</span>\n\t\t\t\t\t<span class=\"langEN\">Generate ECC private key</span>\n\t\t\t\t</label>\n\t\t\t\t<label>\n\t\t\t\t\t<input type=\"radio\" name=\"choice_privateKey\" value=\"manual\">\n\t\t\t\t\t<span class=\"langCN\">手动填写私钥</span>\n\t\t\t\t\t<span class=\"langEN\">Manually fill in the private key</span>\n\t\t\t\t</label>\n\t\t\t</div>\n\t\t\t<div class=\"privateKeyBox\">\n\t\t\t\t<textarea class=\"in_privateKey inputLang\" style=\"width:100%;height:60px\" placeholder-cn=\"请填写pem私钥，私钥文本以 -----BEGIN PRIVATE KEY----- 开头（这是PKCS#8格式，里面带有 RSA|EC 字符的PKCS#1格式也是支持的）\" placeholder-en=\"Please fill in the pem private key. The private key text starts with -----BEGIN PRIVATE KEY----- (this is in PKCS#8 format, and PKCS#1 format with RSA|EC characters in it is also supported)\"></textarea>\n\t\t\t</div>\n\t\t\t<div class=\"privateKeyState\"></div>\n\t\t</div>\n\t\t\n\t\t\n\t\t<div class=\"itemBox\">\n\t\t\t<div class=\"pd Bold\">\n\t\t\t\t<i class=\"must\">*</i>\n\t\t\t\t<span class=\"langCN\">ACME账户的私钥：</span>\n\t\t\t\t<span class=\"langEN\">Private key of ACME account:</span>\n\t\t\t</div>\n\t\t\t<div class=\"pd\" style=\"font-size:13px;color:#aaa\">\n\t\t\t\t<span class=\"langCN\">生成或填写的私钥仅用于ACME接口签名，支持<i class=\"i\">RSA(2048位+)</i>、<i class=\"i\">ECC(<span class=\"eccCurveNames\"></span>曲线)</i>私钥；账户私钥类型对证书无影响；本客户端不会对此私钥进行保存或发送给其他任何人；一个私钥相当于一个账户，可用于吊销已签发的证书；建议每次申请证书时使用相同的一个私钥（这样短期内多次申请证书时，验证域名所有权的参数极有可能会保持相同），不过每次都生成一个新的私钥大部分情况下也不会有问题。</span>\n\t\t\t\t<span class=\"langEN\">The generated or filled private key is only used for ACME interface signature, and supports <i class=\"i\">RSA (2048-bit+)</i> and <i class=\"i\">ECC (<span class=\"eccCurveNames\"></span> curve)</i> private keys; the account private key type has no effect on the certificate; this client will not save or send this private key to anyone else; A private key is equivalent to an account and can be used to revoke an issued certificate; it is recommended to use the same private key every time you apply for a certificate (in this way, the parameters used to verify the domain name ownership are likely to remain identical when multiple certificate applications are made in a short period of time); However, generating a new private key every time will not be a problem in most cases.</span>\n\t\t\t\t<span class=\"eabShow\" style=\"color:#f80\">\n\t\t\t\t\t<span class=\"langCN\">注意：如果你选择的ACME服务（比如Google）要求提供EAB凭据并且限制了同一个EAB凭据只能绑定到一个ACME账户（私钥），那每次使用此EAB凭据时必须使用相同的一个私钥（首次时如果新创建了私钥，此新私钥需立即保存起来下次和此EAB凭据一起使用）。</span>\n\t\t\t\t\t<span class=\"langEN\">Note: If the ACME service you choose (such as Google) requires EAB credentials and limits the same EAB credentials to only one ACME account (private key), then you must use the same private key every time you use this EAB credential (if you generate a new private key for the first time, this new private key needs to be saved immediately and used with this EAB credential next time).</span>\n\t\t\t\t</span>\n\t\t\t</div>\n\t\t\t<div class=\"pd\">\n\t\t\t\t<label>\n\t\t\t\t\t<input type=\"radio\" name=\"choice_accountKey\" value=\"generateRSA\">\n\t\t\t\t\t<span class=\"langCN\">创建新RSA私钥</span>\n\t\t\t\t\t<span class=\"langEN\">Generate RSA private key</span>\n\t\t\t\t</label>\n\t\t\t\t<label>\n\t\t\t\t\t<input type=\"radio\" name=\"choice_accountKey\" value=\"generateECC\">\n\t\t\t\t\t<span class=\"langCN\">创建新ECC私钥</span>\n\t\t\t\t\t<span class=\"langEN\">Generate ECC private key</span>\n\t\t\t\t</label>\n\t\t\t\t<label>\n\t\t\t\t\t<input type=\"radio\" name=\"choice_accountKey\" value=\"manual\">\n\t\t\t\t\t<span class=\"langCN\">手动填写私钥</span>\n\t\t\t\t\t<span class=\"langEN\">Manually fill in the private key</span>\n\t\t\t\t</label>\n\t\t\t</div>\n\t\t\t<div class=\"accountKeyBox\">\n\t\t\t\t<textarea class=\"in_accountKey inputLang\" style=\"width:100%;height:60px\" placeholder-cn=\"请填写pem私钥，私钥文本以 -----BEGIN PRIVATE KEY----- 开头（这是PKCS#8格式，里面带有 RSA|EC 字符的PKCS#1格式也是支持的）\" placeholder-en=\"Please fill in the pem private key. The private key text starts with -----BEGIN PRIVATE KEY----- (this is in PKCS#8 format, and PKCS#1 format with RSA|EC characters in it is also supported)\"></textarea>\n\t\t\t</div>\n\t\t\t<div class=\"accountKeyState\"></div>\n\t\t</div>\n\t\t\n\t\t\n\t\t<div class=\"itemBox\">\n\t\t\t<div class=\"pd Bold\">\n\t\t\t\t<i class=\"must\">*</i>\n\t\t\t\t<span class=\"langCN\">ACME账户的联系邮箱：</span>\n\t\t\t\t<span class=\"langEN\">Contact email of ACME account:</span>\n\t\t\t</div>\n\t\t\t<div class=\"pd\" style=\"font-size:13px;color:#aaa\">\n\t\t\t\t<span class=\"langCN\">此邮箱地址用于证书颁发机构给你发送邮件，比如：证书过期前的续期通知提醒。</span>\n\t\t\t\t<span class=\"langEN\">This email address is used by the certificate authority to send you emails, such as a reminder of renewal notice before the certificate expires.</span>\n\t\t\t</div>\n\t\t\t<div class=\"FlexBox\">\n\t\t\t\t<div class=\"FlexItem\">\n\t\t\t\t\t<input class=\"in_email inputLang\" style=\"width:100%\" placeholder-cn=\"请填写一个你的邮箱\" placeholder-en=\"Please fill in one of your email addresses\">\n\t\t\t\t</div>\n\t\t\t\t<div style=\"padding-left:15px;line-height:30px;font-size:13px;color:#aaa\">\n\t\t\t\t\t<label>\n\t\t\t\t\t\t<input type=\"checkbox\" class=\"choice_email_store\">\n\t\t\t\t\t\t<span class=\"langCN\">记住</span>\n\t\t\t\t\t\t<span class=\"langEN\">Remember</span>\n\t\t\t\t\t</label>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t\t\n\t\t\n\t\t<div class=\"itemBox eabShow\">\n\t\t\t<div class=\"pd Bold\">\n\t\t\t\t<span class=\"langCN\">EAB凭据：</span>\n\t\t\t\t<span class=\"langEN\">EAB Credentials:</span>\n\t\t\t</div>\n\t\t\t<div class=\"pd\" style=\"font-size:13px;color:#aaa\">\n\t\t\t\t<span class=\"langCN\">当前ACME服务要求提供外部账号绑定凭据（External Account Binding），比如ZeroSSL：你可以在ZeroSSL的管理控制台的 Developer 中获得此凭据，所以你需要先注册一个ZeroSSL的账号。</span>\n\t\t\t\t<span class=\"langEN\">The current ACME service requires external account binding credentials, such as ZeroSSL: You can obtain this credentials in the Developer of the ZeroSSL management console, so you need to register a ZeroSSL account first.</span>\n\t\t\t</div>\n\t\t\t<div class=\"FlexBox\" style=\"line-height:30px\">\n\t\t\t\t<div><i class=\"must\">*</i>EAB KID:</div>\n\t\t\t\t<div class=\"FlexItem\" style=\"padding:0 50px 0 6px\">\n\t\t\t\t\t<input class=\"in_eab_kid inputLang\" style=\"width:100%\" placeholder-cn=\"请填写EAB KID\" placeholder-en=\"Please fill in EAB KID\">\n\t\t\t\t</div>\n\t\t\t\t<div style=\"padding:0 6px 0 0\"><i class=\"must\">*</i>HMAC KEY:</div>\n\t\t\t\t<div class=\"FlexItem\">\n\t\t\t\t\t<input class=\"in_eab_key inputLang\" style=\"width:100%\" placeholder-cn=\"请填写EAB HMAC KEY\" placeholder-en=\"Please fill in EAB HMAC KEY\">\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t\t\n\t\t<div class=\"pd termsAgreeBox\">\n\t\t\t<label>\n\t\t\t\t<input type=\"checkbox\" class=\"choice_termsAgree\">\n\t\t\t\t<span class=\"termsAgreeTips\"></span>\n\t\t\t</label>\n\t\t</div>\n\t\t\n\t\t<div class=\"Center\" style=\"padding:15px 0 10px\">\n\t\t\t<span class=\"mainBtn\" onclick=\"configStepClick()\" style=\"width:300px\">\n\t\t\t\t<span class=\"langCN\">确定</span>\n\t\t\t\t<span class=\"langEN\">OK</span>\n\t\t\t</span>\n\t\t</div>\n\t\t<div class=\"configStepState\"></div>\n\t\t\n\t</div>\n</div>\n\n\n\n\n\n\n<div class=\"mainBox\">\n\t<div class=\"pd itemTitle\">\n\t\t<span class=\"langCN\">步骤三：验证域名所有权</span>\n\t\t<span class=\"langEN\">Step 3: Verify Domain Ownership</span>\n\t</div>\n\t<div class=\"step3Hide step2Show step1Show\">\n\t\t<div class=\"itemBox\" style=\"color:#999\">\n\t\t\t<span class=\"langCN\">等待中，请先完成第二步...</span>\n\t\t\t<span class=\"langEN\">Waiting, please complete step 2 first...</span>\n\t\t</div>\n\t</div>\n\t<div class=\"step1Hide step2Hide step3Show\">\n\t\t\n\t\t<div class=\"pd\" style=\"font-size:13px;color:#f80\">\n\t\t\t<span class=\"langCN\">请给每个域名选择一个你合适的验证方式（推荐采用DNS验证，比较简单和通用），然后根据显示的提示完成对应的配置操作。</span>\n\t\t\t<span class=\"langEN\">Please select a suitable verification method for each domain name (DNS Verify is recommended, which is relatively simple and common), and then complete the corresponding configuration operations according to the displayed prompts.</span>\n\t\t</div>\n\t\t\n\t\t<div class=\"verifyBox\"></div>\n<script>\n//显示所有域名的验证界面，html太多\nvar verifyBoxShow=function(){\n\t\"use strict\";\n\tvar boxEl=$(\".verifyBox\").html(\"\");\n\tvar auths=JSON.parse(JSON.stringify(ACME.StepData.auths));//避免改动原始数据\n\tvar domains=ACME.StepData.config.domains;\n\tfor(var i0=0;i0<domains.length;i0++){\n\t\tvar domain=domains[i0],auth=auths[domain]\n\t\t\n\t\tvar challs=auth.challenges;\n\t\tfor(var i=0;i<challs.length;i++){//排序，dns排前面\n\t\t\tvar o=challs[i];\n\t\t\to.challIdx=i;\n\t\t\to.name=ACME.ChallName(o);\n\t\t\to._sort=ACME.ChallSort(o);\n\t\t}\n\t\tchalls.sort(function(a,b){return a._sort.localeCompare(b._sort)});\n\t\tvar choiceHtml=\"\";\n\t\tfor(var i=0;i<challs.length;i++){\n\t\t\tvar chall=challs[i];\n\t\t\tchoiceHtml+=\\`\n<label>\n\t<input type=\"radio\" name=\"choice_authItem_$\\{i0}\"\n\t\tclass=\"choice_authChall choice_authChall_$\\{i0} choice_authChall_$\\{i0}_$\\{i}\"\n\t\tvalue=\"$\\{i0}_$\\{i}\" challidx=\"$\\{chall.challIdx}\">$\\{chall.name}\n</label>\n\t\t\t\\`;\n\t\t}\n\t\t\n\t\tboxEl.append(\\`\n<div class=\"itemBox\">\n\t<div class=\"pd FlexBox\" style=\"line-height:26px\">\n\t\t<div><i class=\"must\">*</i></div>\n\t\t<div style=\"width:180px;padding-right:5px;text-align:right;background:#03baed;color:#fff;border-radius: 4px;\">$\\{domain}</div>\n\t\t<div class=\"FlexItem\" style=\"padding-left:10px;\">$\\{choiceHtml}</div>\n\t</div>\n\t<div class=\"verifyItemBox_$\\{i0}\"></div>\n\t<div class=\"verifyItemState_$\\{i0}\"></div>\n</div>\n\t\t\\`);\n\t};\n\tLangReview(boxEl);\n\t\n\t$(\".choice_authChall\").bind(\"click\",function(e){\n\t\tvar el=e.target,vals=el.value.split(\"_\"),i0=+vals[0],i2=+vals[1];\n\t\tvar domain=domains[i0],auth=auths[domain],chall=auth.challenges[i2];\n\t\tvar html=['<div class=\"pd\" style=\"padding-left:10px;font-size:13px;color:#aaa\">'];\n\t\tvar nameCss='width:195px;text-align:right;padding-right:10px';\n\t\tif(chall.type==\"dns-01\"){\n\t\t\thtml.push(Lang('请到你的域名DNS解析管理中，给下面这个子域名增加一条<i class=\"i\">TXT记录</i>（一个子域名可以同时存在多条TXT记录，可以修改或删除老的记录）。','Please go to the DNS resolution management of your domain name and add a <i class=\"i\">TXT record</i> for the following subdomain name (a subdomain name can have multiple TXT records at the same time, and the old records can be modified or deleted).')+'</div>');\n\t\t\thtml.push(\\`<div class=\"pd FlexBox\">\n\t\t\t\t<div style=\"$\\{nameCss}\">$\\{Lang('子域名','Sub Domain')}:</div>\n\t\t\t\t<div class=\"FlexItem\">\n\t\t\t\t\t<input style=\"width:100%\" readonly value=\"_acme-challenge.$\\{auth.identifier.value}\" />\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div class=\"pd FlexBox\">\n\t\t\t\t<div style=\"$\\{nameCss}\">$\\{Lang('TXT记录','TXT Record')}:</div>\n\t\t\t\t<div class=\"FlexItem\">\n\t\t\t\t\t<input style=\"width:100%\" readonly value=\"$\\{chall.authTxtSHA256}\" />\n\t\t\t\t</div>\n\t\t\t</div>\\`);\n\t\t}else if(chall.type==\"http-01\"){\n\t\t\thtml.push(Lang('请在你的网站根目录中创建<i class=\"i\">/.well-known/acme-challenge/</i>目录，目录内创建<i class=\"i\">'+FormatText(chall.token)+'</i>文件，文件内保存下面的文件内容，保存好后<a href=\"http://'+auth.identifier.value+'/.well-known/acme-challenge/'+FormatText(chall.token)+'\" target=\"_blank\">请点此打开此文件URL</a>测试能否正常访问；注意：这个文件URL必须是80端口，并且公网可以访问，否则ACME无法访问到此地址将会验证失败。Windows操作提示：Windows中用<i class=\"i\">.well-known.</i>作为文件夹名称就能创建<i class=\"i\">.well-known</i>文件夹；IIS可能需在此文件夹下的MIME类型中给 <i class=\"i\">.</i> （扩展名就是一个字\".\"）添加 <i class=\"i\">text/plain</i> 才能正常访问。','Please create the <i class=\"i\">/.well-known/acme-challenge/</i> directory in the root directory of your website, create the <i class=\"i\">'+FormatText(chall.token)+'</i> file in the directory, and save the following file content in the file; After saving, <a href=\"http://'+auth.identifier.value+'/.well-known/acme-challenge/'+FormatText(chall.token)+'\" target=\"_blank\">please click here to open the URL</a> of this file to test whether Normal access; note: the URL of this file must be 80 The port and the public network can be accessed, otherwise ACME cannot access this address and the verification will fail. Windows operation tips: In Windows, you can create a <i class=\"i\">.well-known</i> folder by using <i class=\"i\">.well-known.</i> as the folder name; IIS may need to give <i class=\"i\">.</i> in the MIME type under this folder (the extension is a word \".\") Add <i class=\"i\">text/plain</i> for normal access.')+'</div>');\n\t\t\thtml.push(\\`<div class=\"pd FlexBox\">\n\t\t\t\t<div style=\"$\\{nameCss}\">$\\{Lang('文件URL','File URL')}:</div>\n\t\t\t\t<div class=\"FlexItem\">\n\t\t\t\t\t<input style=\"width:100%\" readonly value=\"http://$\\{auth.identifier.value}/.well-known/acme-challenge/$\\{FormatText(chall.token)}\" />\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div class=\"pd FlexBox\">\n\t\t\t\t<div style=\"$\\{nameCss}\">$\\{Lang('文件内容','File Content')}:</div>\n\t\t\t\t<div class=\"FlexItem\">\n\t\t\t\t\t<input style=\"width:100%\" readonly value=\"$\\{chall.authTxt}\" />\n\t\t\t\t</div>\n\t\t\t</div>\\`);\n\t\t}else{\n\t\t\thtml.push(Lang('非预定义验证类型，请使用<i class=\"i\">Key Authorizations (Token+.+指纹)</i>自行处理，<i class=\"i\">Digest</i>为Key Authorizations的SHA-256 Base64值。','For non-predefined authentication types, please use <i class=\"i\">Key Authorizations (Token+.+Thumbprint)</i> to handle it yourself. <i class=\"i\">Digest</i> is the SHA-256 Base64 value of Key Authorizations.')+'</div>');\n\t\t\thtml.push(\\`<div class=\"pd FlexBox\">\n\t\t\t\t<div style=\"$\\{nameCss}\">Key Authorizations:</div>\n\t\t\t\t<div class=\"FlexItem\">\n\t\t\t\t\t<input style=\"width:100%\" readonly value=\"$\\{chall.authTxt}\" />\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div class=\"pd FlexBox\">\n\t\t\t\t<div style=\"$\\{nameCss}\">Digest(SHA-256 Base64):</div>\n\t\t\t\t<div class=\"FlexItem\">\n\t\t\t\t\t<input style=\"width:100%\" readonly value=\"$\\{chall.authTxtSHA256Base64}\" />\n\t\t\t\t</div>\n\t\t\t</div>\\`);\n\t\t}\n\t\t$(\".verifyItemBox_\"+i0).html(html.join('\\\\n'));\n\t});\n\tfor(var i0=0;i0<domains.length;i0++){\n\t\tvar el=$(\".choice_authChall_\"+i0+\"_0\");\n\t\tel[0]&&el[0].click(); //默认选中每个域名的第一个\n\t}\n};\n</script>\n\t\t\n\t\t<div class=\"itemBox\">\n\t\t\t<div class=\"pd\" style=\"font-size:15px\">\n\t\t\t\t<span class=\"langCN\">请每个域名选择好对应的验证方式，根据显示的提示进行对应的配置操作；<span style=\"color:#cb1d1d\">必须所有域名配置完成后，再来点击下面的“开始验证”按钮进行验证，</span>如果验证失败，需要返回第二步重新开始操作。</span>\n\t\t\t\t<span class=\"langEN\">Please select the corresponding verify method for each domain name, and perform the corresponding configuration operation according to the displayed prompts; <span style=\"color:#cb1d1d\">after all domain names are configured, click the \"Start Verify\" button below to verify,</span> if the verify fails, you need to go back to the step 2 Start the operation.</span>\n\t\t\t</div>\n\t\t\t\n\t\t\t<div class=\"Center\" style=\"padding:15px 0 10px\">\n\t\t\t\t<span class=\"mainBtn verifyStepBtn\" onclick=\"verifyStepClick()\" style=\"width:300px\">\n\t\t\t\t\t<span class=\"langCN\">开始验证</span>\n\t\t\t\t\t<span class=\"langEN\">Start Verify</span>\n\t\t\t\t</span>\n\t\t\t\t<span class=\"mainBtn verifyRunStopBtn\" onclick=\"verifyRunStopClick()\" style=\"width:300px;background:#aaa\">\n\t\t\t\t\t<span class=\"langCN\">取消</span>\n\t\t\t\t\t<span class=\"langEN\">Cancel</span>\n\t\t\t\t</span>\n\t\t\t\t<span class=\"mainBtn finalizeOrderBtn\" onclick=\"finalizeOrderClick()\" style=\"width:300px\">\n\t\t\t\t\t<span class=\"langCN\">重试</span>\n\t\t\t\t\t<span class=\"langEN\">Retry</span>\n\t\t\t\t</span>\n\t\t\t</div>\n\t\t\t<div class=\"verifyStepState\"></div>\n\t\t</div>\n\t\t\n\t</div>\n</div>\n\n\n\n\n\n\n<div class=\"mainBox\">\n\t<div class=\"pd itemTitle\">\n\t\t<span class=\"langCN\">步骤四：下载保存证书PEM文件</span>\n\t\t<span class=\"langEN\">Step 4: Download and save the certificate PEM file</span>\n\t</div>\n\t<div class=\"step4Hide step3Show step2Show step1Show\">\n\t\t<div class=\"itemBox\" style=\"color:#999\">\n\t\t\t<span class=\"langCN\">等待中，请先完成第三步...</span>\n\t\t\t<span class=\"langEN\">Waiting, please complete step 3 first...</span>\n\t\t</div>\n\t</div>\n\t<div class=\"step1Hide step2Hide step3Hide step4Show\">\n\t\n\t\n\t\t<div class=\"itemBox\">\n\t\t\t<div class=\"pd Bold\">\n\t\t\t\t<i class=\"must\">*</i>\n\t\t\t\t<span class=\"langCN\">保存证书PEM文件：</span>\n\t\t\t\t<span class=\"langEN\">Save certificate PEM file: </span>\n\t\t\t</div>\n\t\t\t<div class=\"pd\" style=\"font-size:13px;color:#aaa\">\n\t\t\t\t<span class=\"langCN\"><span style=\"color:#f80\">必须保存此文件，</span>请点击下载按钮下载，或者将证书文本内容复制保存为<i class=\"i downloadCertFileName\"></i>文件（PEM纯文本格式）；文件名后缀可改成 <i class=\"i\">.crt</i> 或 <i class=\"i\">.cer</i>，这样在Windows中能直接双击打开查看。本PEM格式文件已包含你的域名证书、和完整证书链，文本中第一个CERTIFICATE为你的域名证书，后面的为证书颁发机构的中间证书和根证书，如过有需要你可以自行拆分成多个.pem文件。</span>\n\t\t\t\t<span class=\"langEN\"><span style=\"color:#f80\">This file must be saved,</span> please click the download button to download, or copy the text content of the certificate and save it as <i class=\"i downloadCertFileName\"></i> file (PEM plain text format); the file name suffix can be changed to <i class=\"i\">.crt </i> or <i class=\"i\">.cer </i>, so that it can be directly double-clicked to open and view in Windows. This PEM format file already contains your domain name certificate and complete certificate chain. The first CERTIFICATE in the text is your domain name certificate, followed by the intermediate certificate and root certificate of the certificate authority, if necessary, you can split it into multiple .pem files.</span>\n\t\t\t</div>\n\t\t\t<div class=\"FlexBox\">\n\t\t\t\t<div class=\"FlexItem\">\n\t\t\t\t\t<textarea class=\"txt_downloadCert\" style=\"width:100%;height:160px\" readonly=\"\"></textarea>\n\t\t\t\t</div>\n\t\t\t\t<div style=\"padding-left:10px;line-height:30px;font-size:13px;color:#aaa\">\n\t\t\t\t\t<div class=\"mainBtn\" onclick=\"downloadBtnClick('Cert')\">\n\t\t\t\t\t\t<span class=\"langCN\">下载保存</span>\n\t\t\t\t\t\t<span class=\"langEN\">Download</span>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t\t\n\t\t\n\t\t<div class=\"itemBox\">\n\t\t\t<div class=\"pd Bold\">\n\t\t\t\t<i class=\"must\">*</i>\n\t\t\t\t<span class=\"langCN\">保存证书私钥KEY文件：</span>\n\t\t\t\t<span class=\"langEN\">Save the certificate private key KEY file: </span>\n\t\t\t</div>\n\t\t\t<div class=\"pd\" style=\"font-size:13px;color:#aaa\">\n\t\t\t\t<span class=\"langCN\">请点击下载按钮下载，或者将私钥文本内容复制保存为<i class=\"i downloadKeyFileName\"></i>文件（PEM纯文本格式，.key后缀可自行修改成.pem）。如果第二步操作中你手动填写了证书私钥，此处的证书私钥和你填写的是完全一样的，可以不需要重复保存；<span style=\"color:#f80\">如果你是新创建的证书私钥，则你必须下载保存此证书私钥文件。</span></span>\n\t\t\t\t<span class=\"langEN\">Please click the download button to download, or copy and save the text content of the private key as <i class=\"i downloadKeyFileName\"></i> file (PEM plain text format, the .key suffix can be modified to .pem by yourself). If you manually filled in the certificate private key in the step 2, the certificate private key here is exactly the same as what you filled in, and you don’t need to save it repeatedly; <span style=\"color:#f80\">if you are a newly created certificate private key, you must download and save it This certificate private key file.</span></span>\n\t\t\t</div>\n\t\t\t<div class=\"FlexBox\">\n\t\t\t\t<div class=\"FlexItem\">\n\t\t\t\t\t<textarea class=\"txt_downloadKey\" style=\"width:100%;height:80px\" readonly=\"\"></textarea>\n\t\t\t\t</div>\n\t\t\t\t<div style=\"padding-left:10px;line-height:30px;font-size:13px;color:#aaa\">\n\t\t\t\t\t<div class=\"mainBtn\" onclick=\"downloadBtnClick('Key')\">\n\t\t\t\t\t\t<span class=\"langCN\">下载保存</span>\n\t\t\t\t\t\t<span class=\"langEN\">Download</span>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t\t\n\t\t\n\t\t<div class=\"itemBox\">\n\t\t\t<div class=\"pd Bold\">\n\t\t\t\t<i class=\"must\">*</i>\n\t\t\t\t<span class=\"langCN\">保存记录LOG文件：</span>\n\t\t\t\t<span class=\"langEN\">Save the record LOG file: </span>\n\t\t\t</div>\n\t\t\t<div class=\"pd\" style=\"font-size:13px;color:#aaa\">\n\t\t\t\t<span class=\"langCN\">建议下载保存此文件，本记录文件包含了所有数据，包括：证书PEM文本、证书私钥PEM文本、账户私钥PEM文本、所有配置参数。下次你需要续签新证书时，可以将本记录文件直接拖拽进本页面，会自动填写所有参数。</span>\n\t\t\t\t<span class=\"langEN\">It is recommended to download and save this file. This record file contains all data, including: certificate PEM text, certificate private key PEM text, account private key PEM text, and all configuration parameters. Next time you need to renew a new certificate, you can drag and drop the record file directly into this page, and all parameters will be filled in automatically.</span>\n\t\t\t</div>\n\t\t\t<div class=\"FlexBox\">\n\t\t\t\t<div class=\"FlexItem\">\n\t\t\t\t\t<textarea class=\"txt_downloadLog\" style=\"width:100%;height:80px\" readonly=\"\"></textarea>\n\t\t\t\t</div>\n\t\t\t\t<div style=\"padding-left:10px;line-height:30px;font-size:13px;color:#aaa\">\n\t\t\t\t\t<div class=\"mainBtn\" onclick=\"downloadBtnClick('Log')\">\n\t\t\t\t\t\t<span class=\"langCN\">下载保存</span>\n\t\t\t\t\t\t<span class=\"langEN\">Download</span>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t\t\n\t\t\n\t</div>\n</div>\n\n\n\n\n\n\n<div class=\"mainBox\">\n\t\t\n\t<div class=\"itemBox\">\n\t\t<div class=\"pd Bold\">\n\t\t\t<span class=\"langCN\">你需要其他格式的证书文件？</span>\n\t\t\t<span class=\"langEN\">Do you need certificate files in other formats?</span>\n\t\t</div>\n\t\t<div class=\"pd\" style=\"font-size:13px;color:#aaa\">\n\t\t\t<span class=\"langCN\">大部分服务器程序支持直接使用 <i class=\"i downloadCertFileName\"></i>+<i class=\"i downloadKeyFileName\"></i> 来配置开启HTTPS（比如Nginx），如果你需要 <i class=\"i\">*.pfx</i>、<i class=\"i\">*.p12</i> 格式的证书（比如用于IIS），请用下面命令将PEM证书转换成 <i class=\"i\">pfx/p12</i> 格式：</span>\n\t\t\t<span class=\"langEN\">Most server programs support directly using <i class=\"i downloadCertFileName\"></i>+<i class=\"i downloadKeyFileName\"></i> to configure and enable HTTPS (such as Nginx). If you need a certificate in <i class=\"i\">*.pfx</i> or <i class=\"i\">*.p12</i> format (such as for IIS), please use the following command to convert the PEM certificate Convert to <i class=\"i\">pfx/p12</i> format:</span>\n\t\t</div>\n\t\t<div class=\"code\">openssl pkcs12 -export -out <span class=\"downloadFileName\"></span>.pfx -inkey <span class=\"downloadKeyFileName\"></span> -in <span class=\"downloadCertFileName\"></span></div>\n\t</div>\n\t\n\t<div class=\"itemBox\">\n\t\t<div class=\"pd Bold\">\n\t\t\t<span class=\"langCN\">IIS证书链缺失？</span>\n\t\t\t<span class=\"langEN\">IIS certificate chain missing?</span>\n\t\t</div>\n\t\t<div class=\"pd\" style=\"font-size:13px;color:#aaa\">\n\t\t\t<span class=\"langCN\">对于Windows IIS服务器，你需要将证书链安装到“本地计算机”的“中间证书颁发机构”中；请将PEM证书中的所有证书拆分成单个PEM文件（后缀改成<i class=\"i\">.crt</i>或<i class=\"i\">.cer</i>），然后将系统中缺失的中间证书双击打开然后安装进去；详细参考：</span>\n\t\t\t<span class=\"langEN\">For Windows IIS server, you need to install the certificate chain into \"Intermediate Certification Authorities\" in \"Local Computer\"; please split all certificates in PEM certificate into a single PEM file (change the suffix to <i class=\"i\">.crt</i> or <i class=\"i\">.cer</i>), then double-click to open the missing intermediate certificate in the system Then install it; detailed reference:</span>\n\t\t\t<a href=\"http://support.microsoft.com/kb/954755\" target=\"_blank\">http://support.microsoft.com/kb/954755</a>\n\t\t</div>\n\t</div>\n\t\n\t<div class=\"itemBox\">\n\t\t<div class=\"pd Bold\">\n\t\t\t<span class=\"langCN\">本客户端部分原理简介</span>\n\t\t\t<span class=\"langEN\">Introduction to the principle of this client</span>\n\t\t</div>\n\t\t<div class=\"pd\" style=\"font-size:13px;color:#aaa\">\n\t\t\t<span class=\"langCN\">得益于现代浏览器的 <a href=\"https://developer.mozilla.org/en-US/docs/Web/API/SubtleCrypto\" target=\"_blank\">crypto.subtle</a> 对加密功能标准化，不依赖其他任何js库就能在网页上实现 <i class=\"i\">RSA</i>、<i class=\"i\">ECC</i> 的加密、解密、签名、验证、和密钥对生成。在本客户端内的 <i class=\"i\">X509</i> 对象中：用 X509.CreateCSR 来生成CSR，用 X509.KeyGenerate 来创建PEM格式密钥，用 X509.KeyParse 来解析PEM格式密钥，用 X509.KeyExport 来导出PEM格式密钥；这些功能都是根据相应的标准用js代码在二进制层面上实现的，二进制数据操作封装在了 <i class=\"i\">ASN1</i> 对象中：实现了 ASN.1 标准的二进制解析和封包，使用 ASN1.ParsePEM 方法可以解析任意的PEM格式密钥或证书。以上这些都是实现ACME网页客户端的核心基础。</span>\n\t\t\t<span class=\"langEN\">Thanks to the standardization of encryption functions by <a href=\"https://developer.mozilla.org/en-US/docs/Web/API/SubtleCrypto\" target=\"_blank\">crypto.subtle</a> of modern browsers, <i class=\"i\">RSA</i> and <i class=\"i\">ECC</i> encryption, decryption, signature, verification, and key pair generation can be implemented on web pages without relying on any other js library. In the <i class=\"i\">X509</i> object in this client: use X509.CreateCSR to generate CSR, use X509.KeyGenerate to create PEM format key, use X509.KeyParse to parse PEM format key, use X509.KeyExport to export PEM format key; These functions are implemented at the binary level with js code according to the corresponding standards, and binary data operations are encapsulated in <i class=\"i\">ASN1</i> objects: ASN.1 standard binary parsing and encapsulation are implemented, Arbitrary PEM format keys or certificates can be parsed using the ASN1.ParsePEM method. These are the core foundations for implementing the ACME web client.</span>\n\t\t</div>\n\t\t<div class=\"pd\" style=\"font-size:13px;color:#aaa\">\n\t\t\t<span class=\"langCN\">然后就是对接ACME实现证书的签发，和实现交互UI；对接ACME可以直接参考 RFC 8555 标准。有些证书颁发机构的ACME服务对浏览器支持不良，未提供齐全的 <i class=\"i\">Access-Control-*</i> 响应头，导致网页内无法直接调用服务接口；目前采用的解决办法非常简单粗暴，比如ZeroSSL：检测到此ACME服务存在跨域问题时，会调用 <i class=\"i\">acmeReadDirGotoCORS()</i> 方法告诉用户操作步骤（你可以<a onclick=\"acmeReadDirGotoCORS();alert('调用成功，请到第一步操作')\">点此</a>手动调用此方法），通过在他们的页面内运行本客户端来消除跨域问题（既然打不过，那就加入他们）。</span>\n\t\t\t<span class=\"langEN\">Then it is to connect with ACME to realize certificate issuance and realize interactive UI; for connecting with ACME, you can directly refer to the RFC 8555 standard. The ACME services of some certificate authorities do not support browsers well, and do not provide complete <i class=\"i\">Access-Control-*</i> response headers, so that the service interface cannot be called directly in the web page; the current solution is very simple and rude, such as ZeroSSL: detect this ACME When there is a cross-domain problem with the service, the <i class=\"i\">acmeReadDirGotoCORS()</i> method will be called to tell the user the operation steps (you can call this method manually by <a onclick=\"acmeReadDirGotoCORS();alert('Call succeeded, please go to step 1')\">clicking here</a>), and the cross-domain problem will be eliminated by running this client in their page (if we can't beat them, we'd better join them).</span>\n\t\t</div>\n\t</div>\n\t\n\t<div class=\"itemBox\">\n\t\t<div class=\"pd Bold\">\n\t\t\t<span class=\"langCN\">QQ群：交流与支持</span>\n\t\t\t<span class=\"langEN\">QQ group: communication and support</span>\n\t\t</div>\n\t\t<div class=\"pd\" style=\"font-size:13px;color:#aaa\">\n\t\t\t<span class=\"langCN\">欢迎加QQ群：<i class=\"i\">421882406</i>，纯小写口令：<i class=\"i\">xiangyuecn</i>。如需功能定制，网站、App、小程序、前端和后端等开发需求，请加此QQ群，联系群主（即作者），谢谢~</span>\n\t\t\t<span class=\"langEN\">Welcome to join the QQ group: <i class=\"i\">421882406</i> , code: <i class=\"i\">xiangyuecn</i> . If you need function customization, website, app, applet, front-end and back-end development needs, please join this QQ group and contact the group owner (ie the author), thank you~</span>\n\t\t</div>\n\t</div>\n\t\n</div>\n\n\n\n\n<div style=\"padding-top:20px;font-size:13px;color:#aaa\">\n\t<div class=\"pd langEN\">The Chinese-English translation is mainly from: Chrome comes with translation + Baidu translation, which is translated from Chinese to English.</div>\n\t\n\t<div class=\"pd\">\n\t\t<span class=\"versionBox\"></span>\n\t\t<a style=\"margin-left:15px\" href=\"https://github.com/xiangyuecn/ACME-HTML-Web-Browser-Client/blob/main/LICENSE\" target=\"_blank\">License: GPL-3.0</a>\n\t</div>\n</div>\n\n\n\n<div class=\"toastState\" style=\"display:none;position:fixed;padding:10px;bottom:10px;right:10px;width:360px;max-height:120px;overflow-y:auto;background:#fff;box-shadow: 0px 0px 3px #aaa;border-radius: 10px;\"></div>\n\n<div class=\"donateWidget\" style=\"position:fixed;top:30%;right:5px;width:160px\">\n\t<div style=\"border-radius:12px;background:linear-gradient(160deg, rgba(0,179,255,.7) 20%, rgba(177,0,255,.7) 80%);max-width:300px;padding:20px 10px;text-align: center;\">\n\t\t<div style=\"font-size:18px;color:#fff;\">\n\t\t\t<span class=\"langCN\">赏包辣条？</span>\n\t\t\t<span class=\"langEN\">Donate a Coke?</span>\n\t\t</div>\n\t\t<div style=\"font-size:14px;color:#fff;\">\n\t\t\t<div class=\"langCN\" style=\"padding:10px 0\">客户端工具开发维护不易，期望本项目对你能有所帮助，欢迎通过下面按钮打赏作者~</div>\n\t\t\t<span class=\"langEN\">It is not easy to develop and maintain client tools. I hope this project can help you. Welcome to reward the author through the following buttons~</span>\n\t\t</div>\n\t\t<div>\n\t\t\t<span class=\"langCN\">\n\t\t\t\t<a id=\"id_ek8v\" target=\"_blank\" class=\"mainBtn mainBtnMin\" style=\"color:#fff\" href=\"https://xiangyuecn.github.io/Docs/about.html\">打赏 <span class=\"donateBtnIco\"></span></a>\n\t\t\t\t<script> id_ek8v.href=/gitee\\\\.io/.test(location.host)?\"https://xiangyuecn.gitee.io/docs/about.html\":\"https://xiangyuecn.github.io/Docs/about.html\" </script>\n\t\t\t</span>\n\t\t\t<span class=\"langEN\">\n\t\t\t\t<a href=\"https://xiangyuecn.github.io/Docs/about.html\" target=\"_blank\" class=\"mainBtn mainBtnMin\" style=\"color:#fff\">Donate <span class=\"donateBtnIco\"></span></a>\n\t\t\t</span>\n\t\t</div>\n\t</div>\n</div>\n\n<div class=\"langBtnBox\" style=\"position:fixed;top:0;right:0;padding:5px 10px;font-size:14px;border-radius:0 0 0 10px;background:#f5f5f5;\">\n\tLanguage:\n\t  <a class=\"langBtn langBtn_cn\" onclick=\"LangClick('cn')\">中文</a>\n\t| <a class=\"langBtn langBtn_en\" onclick=\"LangClick('en')\">EN</a>\n</div>\n\n</div>\n\n\n\n<style>\nbody{\n\tword-wrap: break-word;\n\t--word-break: break-all;\n\tbackground:#f5f5f5 center top no-repeat;\n\tbackground-size: auto 680px;\n}\npre{\n\twhite-space:pre-wrap;\n}\nlabel,label *{\n\tcursor: pointer;\n}\nlabel:hover{\n\tcolor:#06c;\n}\na{\n\ttext-decoration: none;\n\tcolor:#06c;\n\tcursor: pointer;\n}\na:hover{\n\tcolor:#f00;\n}\ninput, textarea {\n\t--outline: 0;\n\tborder: 1px solid #999;\n\tpadding: 2px;\n\tbox-sizing: border-box;\n\tfont-size: 15px;\n\tline-height:24px;\n}\n\n.main{\n\tmax-width:900px;\n\tmargin:0 auto;\n\tpadding-bottom:80px\n}\n\n.mainBox{\n\tmargin-top:12px;\n\tpadding: 12px;\n\tborder-radius: 6px;\n\tbackground: #fff;\n\tbox-shadow: 2px 2px 3px #aaa;\n}\n\n\n.mainBtn{\n\tdisplay: inline-block;\n\tcursor: pointer;\n\tborder: none;\n\tborder-radius: 3px;\n\tbackground: #f80;\n\tcolor:#fff;\n\tpadding: 0 15px;\n\tline-height: 36px;\n\theight: 36px;\n\toverflow: hidden;\n\tvertical-align: middle;\n}\n.mainBtnMin{\n\theight: 30px;\n\tline-height: 30px;\n\tfont-size: 14px;\n\tpadding: 0 12px;\n}\n.mainBtn:hover{\n\topacity:0.8;\n}\n.mainBtn:active{\n\topacity:1;\n\tbackground: #f00;\n}\n\n.pd{\n\tpadding:0 0 8px 0;\n}\n.pdT{\n\tpadding:8px 0 0 0;\n}\n.lb{\n\tdisplay:inline-block;\n\tvertical-align: middle;\n\tbackground:#00940e;\n\tcolor:#fff;\n\tfont-size:14px;\n\tpadding:2px 8px;\n\tborder-radius: 99px;\n}\n\n.Fill {\n\tposition: absolute;\n\ttop: 0;\n\tleft: 0;\n\twidth: 100%;\n\theight: 100%;\n\toverflow: hidden;\n}\n.Center{\n\ttext-align: center;\n}\n.CenterV {\n\tdisplay: -webkit-flex;\n\tdisplay: -ms-flex;\n\tdisplay: -moz-flex;\n\tdisplay: flex;\n\t-webkit-align-items: center;\n\t-ms-align-items: center;\n\t-moz-align-items: center;\n\talign-items: center;\n}\n.FlexBox {\n\tdisplay: -webkit-flex;\n\tdisplay: -ms-flex;\n\tdisplay: -moz-flex;\n\tdisplay: flex;\n}\n.FlexBoxV{\n\t-webkit-flex-direction:column;\n\t-ms-flex-direction:column;\n\t-moz-flex-direction:column;\n\tflex-direction:column;\n}\n.FlexCenter{\n\t-webkit-box-pack:center;\n\t-ms-box-pack:center;\n\t-moz-box-pack:center;\n\tbox-pack:center;\n\t-webkit-justify-content:center;\n\t-ms-justify-content:center;\n\t-moz-justify-content:center;\n\tjustify-content:center;\n}\n.FlexCenterV{\n\t-webkit-box-align:center;\n\t-ms-box-align:center;\n\t-moz-box-align:center;\n\tbox-align:center;\n\t-webkit-align-items:center;\n\t-ms-align-items:center;\n\t-moz-align-items:center;\n\talign-items:center;\n}\n.FlexItem {\n\t-webkit-flex: 1;\n\t-ms-flex: 1;\n\t-moz-flex: 1;\n\tflex: 1;\n}\n\n\n.Bold{\n\tfont-weight: bold;\n}\n.code{\n\tpadding: 15px;\n\tbackground-color: #000;\n\tvertical-align: middle;\n\tcolor: #fff;\n\tfont-size: 14px;\n\twhite-space: pre-wrap;\n\tborder-radius: 6px;\n\tfont-style: normal;\n}\n.i{\n\tpadding: 2px 4px;\n\tbackground-color: #f6f6f6;\n\tvertical-align: top;\n\tcolor: #c7254e;\n\tfont-size: 12px;\n\twhite-space: pre-wrap;\n\tborder-radius: 4px;\n\tfont-style: normal;\n}\ni.must{\n\tcolor:red;\n\tfont-style:normal;\n}\n.itemTitle{\n\tfont-size: 24px;\n\tfont-weight: bold;\n\tcolor: #03baed;\n}\n.itemBox{\n\tpadding:8px;\n\tmargin-bottom:6px;\n\tborder:1px #ccc dashed;\n\tborder-radius: 6px;\n}\n</style>\n\n\n\n\n<script>\n//=================================================\n//================= UI functions ==================\n//=================================================\n//LICENSE: GPL-3.0, https://github.com/xiangyuecn/ACME-HTML-Web-Browser-Client\n(function(){\n\"use strict\";\nvar ChoiceAcmeURLStoreKey=\"ACME_HTML_choice_acmeURL\";\nvar InputDomainsStoreKey=\"ACME_HTML_input_domains\";\nvar InputEmailStoreKey=\"ACME_HTML_input_email\";\nvar DropConfigFile={}; //拖拽进来的上次配置文件\n\n/************** UI: Initialize on Launch **************/\nwindow.initMainUI=function(){\n\t$(\".eccCurveNames\").html(X509.SupportECCType2Names().join(Lang(\"、\",\", \")));\n\t$(\".donateBtnIco\").html(unescape(\"%uD83D%uDE18\"));\n\t$(\".versionBox\").html(Lang(\"版本: \"+Version,\"Ver: \"+Version));\n\t\n\tif(/mobile/i.test(navigator.userAgent)){\n\t\t$(\".main\").prepend($(\".langBtnBox\").css(\"position\",null));\n\t\t$(\".donateWidget\").css(\"position\",null);\n\t}\n\t\n\tCLog(\"initMainUI\",0,Lang(\n\\`一些高级配置：\n- 设置 X509.DefaultType2_RSA=\"4096\" 可以调整新生成的RSA密钥位数。\n- 设置 X509.DefaultType2_ECC=\"P-384\" 可以调整新生成的ECC密钥曲线，X509.SupportECCType2内为支持的曲线。\n- 设置 DefaultDownloadFileNames 内的属性可以修改对应下载的文件默认名称。\n- UI调试：完成第二步后允许进行UI调试，手动调用 Test_AllStepData_Save() 保存数据，刷新页面可恢复界面。\\`,\n\\`Some advanced configurations:\n- Set X509.DefaultType2_RSA=\"4096\" The number of newly generated RSA keys can be adjusted.\n- Set X509.DefaultType2_ECC=\"P-384\" The newly generated ECC key curve can be adjusted. The supported curve is in X509.SupportECCType2.\n- Setting the property in DefaultDownloadFileNames can modify the default name of the corresponding downloaded file.\n- UI debugging: Allow UI debugging after completing the step 2 . Manually call Test_AllStepData_Save() to save the data, and refresh the page to restore the interface.\\`));\n\t\n\tinitTest_Restore();\n\tacmeReadDirGotoCORSInit();\n\tdownloadFileNameShow();\n\tinitStep1();\n\tinitStep2();\n\tinitStep4();\n};\nvar initStep1=function(){\n\t$(\"input[name=choice_acmeURL]\").bind(\"click\",function(e){\n\t\tvar el=e.target;\n\t\tvar isManual=el.value==\"manual\";\n\t\t$(\".in_acmeURL\").css(\"opacity\",isManual?1:0.4)\n\t\t\t.val(isManual?step1ChoiceStoreVal:el.value)\n\t\t\t.attr(\"readonly\",isManual?null:\"\");\n\t\t\n\t\tvar descKey=$(el).attr(\"desckey\");\n\t\t$(\".descAcmeURL\").hide();\n\t\tif(descKey)$(\".\"+descKey).show();\n\t\t\n\t\tstep1ChoiceStoreVal=\"\";\n\t\tchoiceAcmeURLChangeAfter();\n\t});\n\tresetStep1();\n};\nvar step1ChoiceStoreVal;\nvar resetStep1=function(){\n\t//选中上次选择的证书颁发机构\n\tstep1ChoiceStoreVal=DropConfigFile.acmeURL||window.Default_ACME_URL||localStorage[ChoiceAcmeURLStoreKey]||\"\";\n\tvar choices=$(\"input[name=choice_acmeURL]\")\n\tvar idx=0;\n\tif(step1ChoiceStoreVal){\n\t\tvar manualIdx=0;\n\t\tfor(var i=0;i<choices.length;i++){\n\t\t\tif(choices[i].value==step1ChoiceStoreVal) idx=i+1;\n\t\t\tif(choices[i].value==\"manual\") manualIdx=i+1;\n\t\t}\n\t\tif(!idx)idx=manualIdx //手动填写\n\t\tidx--;\n\t}\n\tchoices[idx].click();\n};\nvar initStep2=function(){\n\t//证书私钥UI\n\t$(\".privateKeyBox\").hide();\n\t$(\"input[name=choice_privateKey]\").bind(\"click\",function(e){\n\t\tvar el=e.target;\n\t\tvar isManual=el.value==\"manual\";\n\t\t$(\".in_privateKey\").css(\"opacity\",isManual?1:0.4)\n\t\t\t.val(\"\")\n\t\t\t.attr(\"readonly\",isManual?null:\"\");\n\t\t$(\".privateKeyBox\").show();\n\t\t\n\t\tconfigPrivateKeyGenerate(el.value);//生成密钥\n\t\tconfigStepShow();//重新显示界面\n\t});\n\t\n\t//ACME账户私钥UI\n\t$(\".accountKeyBox\").hide();\n\t$(\"input[name=choice_accountKey]\").bind(\"click\",function(e){\n\t\tvar el=e.target;\n\t\tvar isManual=el.value==\"manual\";\n\t\t$(\".in_accountKey\").css(\"opacity\",isManual?1:0.4)\n\t\t\t.val(\"\")\n\t\t\t.attr(\"readonly\",isManual?null:\"\");\n\t\t$(\".accountKeyBox\").show();\n\t\t\n\t\tconfigAccountKeyGenerate(el.value);//生成密钥\n\t\tconfigStepShow();//重新显示界面\n\t});\n};\n\n\n//下一步操作提示\nvar NextStepTips=function(){\n\treturn '<span style=\"font-size:24px;font-weight:bold;\">'+Lang(\"请进行下一步操作。\",\" Please proceed to the next step.\")+'</span>';\n};\n//请稍候提示\nvar PleaseWaitTips=function(){\n\treturn Lang(\" 请稍候... \",\" Please wait... \");\n};\n//请重试提示\nvar TryAgainTips=function(){\n\treturn Lang(\" 请重试！\",\" Please try again! \");\n};\n//每一步的状态更新显示\nvar ShowState=function(elem,msg,color,tag){\n\tvar now=new Date();\n\tvar t=(\"0\"+now.getHours()).substr(-2)\n\t\t+\":\"+(\"0\"+now.getMinutes()).substr(-2)\n\t\t+\":\"+(\"0\"+now.getSeconds()).substr(-2);\n\t$(elem).html(msg===false?'':'<div style=\"color:'+(!color?\"\":color==1?\"red\":color==2?\"#0b1\":color==3?\"#fa0\":color)+'\">'+(tag==null?'['+t+'] ':tag)+msg+'</div>');\n\treturn msg;\n};\nwindow.Toast=function(msg,color,time){\n\tShowState(\".toastState\",msg,color,\"\");\n\t\n\t$(\".toastState\").show();\n\tclearTimeout(Toast._int);\n\tToast._int=setTimeout(function(){ $(\".toastState\").hide(); }, time||5000);\n};\nwindow.onerror=function(message, url, lineNo, columnNo, error){\n\t//https://www.cnblogs.com/xianyulaodi/p/6201829.html\n\tToast('【Uncaught Error】'+message+'<pre>'+\"at:\"+lineNo+\":\"+columnNo+\" url:\"+url+\"\\\\n\"+(error&&error.stack||\"-\")+'</pre>',1,15000);\n};\n\n\n\n//用户点击操作同步控制，新点击操作要终止之前未完成的操作\nvar UserClickSyncID=0;\nvar UserClickSyncKill=function(id,tag,msg){\n\tif(id!=UserClickSyncID){\n\t\tvar abort=Lang(\"被终止\",\"Abort\",1);\n\t\tCLog(tag+\" \"+abort,3,\"From: \"+msg+\" [\"+abort+\"]\");\n\t\treturn true;\n\t}\n};\n\n\n\n\n\n/************** UI Step1: Read ACME service directory **************/\n//证书颁发机构单选按钮点击后处理\nvar choiceAcmeURLChangeAfter=function(){\n\tUserClickSyncID++;\n\t\n\t$(\".step1Hide\").hide();\n\t$(\".step1Show\").show();\n\tShowState(\".acmeReadDirState\",false);\n\t\n\tif($(\".in_acmeURL\").val())acmeReadDirClick();\n};\n//点击读取服务目录按钮\nwindow.acmeReadDirClick=function(){\n\tvar id=++UserClickSyncID;\n\t\n\t$(\".step1Hide\").hide();\n\t$(\".step1Show\").show();\n\tvar tag=\"Step-1\",sEl=\".acmeReadDirState\";\n\t\n\tvar url=$(\".in_acmeURL\").val().trim();\n\tif(!url){\n\t\tShowState(sEl,Lang(\"请填写服务URL！\",\"Please fill in the service URL!\"),1);\n\t\treturn;\n\t}\n\tlocalStorage[ChoiceAcmeURLStoreKey]=url;\n\turl=ACME.URL=url.replace(/\\\\/$/,\"\");\n\t\n\tvar msg0=CLog(tag,0, ShowState(sEl,PleaseWaitTips()+Lang(\"正在读取服务目录，\",\"Reading service directory, \")+\" URL=\"+ACME.URL, 2));\n\tvar reqDir=function(){\n\t\tACME.Directory(function(cache,saveCache){\n\t\t\tsaveCacheCors=function(corsOK,err){\n\t\t\t\tcache.corsOK=corsOK?1:-1;\n\t\t\t\tcache.corsError=err||\"\";\n\t\t\t\tsaveCache();\n\t\t\t};\n\t\t\tif(cache.corsOK==1) dirOK();//已缓存的，此ACME服务正常\n\t\t\telse if(cache.corsOK==-1) testCORSFail(cache.corsError, true);//不正常已缓存\n\t\t\telse testCORS();//检测是否能正常调用接口，是否支持跨域\n\t\t},function(err,status){\n\t\t\tif(UserClickSyncKill(id,tag,msg0+\" err: \"+err))return;\n\t\t\tif(status===0){ //可能是跨域无法读取到任何数据\n\t\t\t\tCLog(tag,1, ShowState(sEl,Lang(\"读取服务目录出错：无法访问此URL。\",\"Read service directory error: This URL cannot be accessed.\")+TryAgainTips(), 1));\n\t\t\t\t\n\t\t\t\tacmeReadDirGotoCORS(Lang(\"如果你可以在浏览器中直接打开并访问此ACME服务URL，代表此ACME服务对跨域访问支持不良，则请按下面步骤操作：\",\"If you can open and access this ACME service URL directly in your browser, it represents that this ACME service has poor support for cross-domain access, please follow the steps below:\"));\n\t\t\t}else{\n\t\t\t\tCLog(tag,1, ShowState(sEl,Lang(\"读取服务目录出错：\"+err,\"Read service directory error: \"+err)+TryAgainTips(), 1));\n\t\t\t};\n\t\t});\n\t};\n\tvar saveCacheCors;\n\tvar dirOK=function(){\n\t\tif(UserClickSyncKill(id,tag,msg0))return;\n\t\tconfigStepShow();\n\t\tCLog(tag,0, ShowState(sEl,Lang(\"读取服务目录成功，\",\"Read service directory OK,\")\n\t\t\t+NextStepTips()+\" URL=\"+ACME.URL, 2), ACME.DirData);\n\t};\n\t\n\t//ZeroSSL接口跨域支持太差，发现这种就直接在他们网站里面跑\n\tvar testCORS=function(){\n\t\tif(UserClickSyncKill(id,tag,msg0))return;\n\t\tmsg0=CLog(tag,0, ShowState(sEl,PleaseWaitTips()+Lang(\"正在测试此ACME服务对浏览器的支持情况，\",\"Testing browser support for this ACME service, \")+\" URL=\"+ACME.URL, 2));\n\t\tACME.GetNonce(true,function(){\n\t\t\tACME.TestAccountCORS(function(){\n\t\t\t\tCLog(tag,0, Lang(\"此ACME服务对浏览器的支持良好。\",\"This ACME service has good browser support.\"));\n\t\t\t\tsaveCacheCors(true);\n\t\t\t\tdirOK();\n\t\t\t},testCORSFail);\n\t\t},function(err,corsFail){ //GetNonce 能明确检测到是否支持跨域可以缓存起来，账户地址可能是网络错误不缓存\n\t\t\tif(corsFail) saveCacheCors(false, err);\n\t\t\ttestCORSFail(err,corsFail);\n\t\t});\n\t};\n\tvar testCORSFail=function(err,corsFail){\n\t\tif(UserClickSyncKill(id,tag,msg0+\" err: \"+err))return;\n\t\tCLog(tag,1, ShowState(sEl,Lang(\n\t\t\t\"测试此ACME服务对浏览器的支持情况，发生错误：\"+err\n\t\t\t,\"Test browser support for this ACME service, An error occurred: \"+err)\n\t\t\t+(corsFail?\"\":TryAgainTips()), 1));\n\t\tLangReview(sEl);//err from cache\n\t\tif(corsFail) acmeReadDirGotoCORS();\n\t};\n\t\n\treqDir();\n};\n\n\n\n\n\n\n/************** UI Step2: Certificate Configuration **************/\n//显示第二步界面\nvar configStepShow=function(){\n\t$(\".step2Hide\").hide();\n\t$(\".step2Show\").show();\n\tShowState(\".configStepState\",false);\n\t\n\t$(\".eabShow\")[ACME.StepData.needEAB?'show':'hide']();\n\tif(DropConfigFile.eabKid)$(\".in_eab_kid\").val(DropConfigFile.eabKid);\n\tif(DropConfigFile.eabKey)$(\".in_eab_key\").val(DropConfigFile.eabKey);\n\t\n\t$(\".termsAgreeBox\")[ACME.StepData.termsURL?'show':'hide']();\n\t$(\".termsAgreeTips\").html(Lang('我同意此证书颁发机构ACME服务的<a href=\"'+ACME.StepData.termsURL+'\" target=\"_blank\">服务条款</a>。', 'I agree to the <a href=\"'+ACME.StepData.termsURL+'\" target=\"_blank\">terms of service</a> for this Certificate Authority ACME Service.'));\n\t$(\".choice_termsAgree\").prop(\"checked\",true);\n\t\n\tvar el=$(\".in_domains\");//填充上次填写的域名列表\n\tvar valS=localStorage[InputDomainsStoreKey];\n\tvar val=DropConfigFile.domains&&DropConfigFile.domains.join(\", \")||valS;\n\tif(!el.val()){\n\t\tel.val(val||\"\");\n\t}\n\t$(\".choice_domains_store\").prop(\"checked\", !!valS);\n\t\n\tvar el=$(\".in_email\");//填充上次填写的联系邮箱\n\tvar valS=localStorage[InputEmailStoreKey];\n\tvar val=DropConfigFile.email||valS;\n\tif(!el.val()){\n\t\tel.val(val||\"\");\n\t}\n\t$(\".choice_email_store\").prop(\"checked\", !!valS);\n\t\n\tvar setKey=function(k){\n\t\tif(DropConfigFile[k]){\n\t\t\t$(\"input[name=choice_\"+k+\"][value=manual]\")[0].click();\n\t\t\t$(\".in_\"+k).val(DropConfigFile[k]);\n\t\t}\n\t};\n\tsetKey(\"privateKey\");setKey(\"accountKey\");\n\t\n\tDropConfigFile={};//配置完成，丢弃拖拽进来的配置信息\n};\n//生成证书的密钥对\nvar configPrivateKeyGenerate=function(type){\n\tvar id=++UserClickSyncID;\n\tvar tag=\"Step-2\",sEl=\".privateKeyState\";\n\t\n\tvar keyTag=\"\",type2;\n\tif(type==\"generateRSA\"){\n\t\ttype=\"RSA\";type2=X509.DefaultType2_RSA;\n\t\tkeyTag=Lang(\"证书RSA私钥(\"+type2+\"位)\",\"Certificate RSA private key (\"+type2+\" bits)\");\n\t}else if(type==\"generateECC\"){\n\t\ttype=\"ECC\";type2=X509.DefaultType2_ECC; var type2N=X509.SupportECCType2[type2]||type2;\n\t\tkeyTag=Lang(\"证书ECC私钥(\"+type2N+\"曲线)\",\"Certificate ECC Private Key (\"+type2N+\" curve)\");\n\t}else{\n\t\tShowState(sEl,false);\n\t\treturn;\n\t};\n\t\n\tvar msg0=CLog(tag,0, ShowState(sEl,PleaseWaitTips()+Lang(\"正在创建\",\"Generating \")+keyTag, 2));\n\tX509.KeyGenerate(type,type2,function(pem){\n\t\tif(UserClickSyncKill(id,tag,msg0))return;\n\t\t$(\".in_privateKey\").val(pem);\n\t\tCLog(tag,0, ShowState(sEl,keyTag+Lang(\"，创建成功。\",\", generated successfully.\"), 2), '\\\\n'+pem);\n\t},function(err){\n\t\tif(UserClickSyncKill(id,tag,msg0+\" err: \"+err))return;\n\t\tCLog(tag,1, ShowState(sEl,keyTag+Lang(\"，发生错误：\"+err,\", An error occurred: \"+err), 1));\n\t});\n};\n//生成ACME账户的密钥对\nvar configAccountKeyGenerate=function(type){\n\tvar id=++UserClickSyncID;\n\tvar tag=\"Step-2\",sEl=\".accountKeyState\";\n\t\n\tvar keyTag=\"\",type2;\n\tif(type==\"generateRSA\"){\n\t\ttype=\"RSA\";type2=X509.DefaultType2_RSA;\n\t\tkeyTag=Lang(\"ACME账户RSA私钥(\"+type2+\"位)\",\"ACME account RSA private key (\"+type2+\" bits)\");\n\t}else if(type==\"generateECC\"){\n\t\ttype=\"ECC\";type2=X509.DefaultType2_ECC; var type2N=X509.SupportECCType2[type2]||type2;\n\t\tkeyTag=Lang(\"ACME账户ECC私钥(\"+type2N+\"曲线)\",\"ACME account ECC Private Key (\"+type2N+\" curve)\");\n\t}else{\n\t\tShowState(sEl,false);\n\t\treturn;\n\t};\n\t\n\tvar msg0=CLog(tag,0, ShowState(sEl,PleaseWaitTips()+Lang(\"正在创建\",\"Generating \")+keyTag, 2));\n\tX509.KeyGenerate(type,type2,function(pem){\n\t\tif(UserClickSyncKill(id,tag,msg0))return;\n\t\t$(\".in_accountKey\").val(pem);\n\t\tCLog(tag,0, ShowState(sEl,keyTag+Lang(\"，创建成功。\",\", generated successfully.\"), 2), '\\\\n'+pem);\n\t},function(err){\n\t\tif(UserClickSyncKill(id,tag,msg0+\" err: \"+err))return;\n\t\tCLog(tag,1, ShowState(sEl,keyTag+Lang(\"，发生错误：\"+err,\", An error occurred: \"+err), 1));\n\t});\n};\n//点击确定按钮，完成配置域名和私钥的配置\nwindow.configStepClick=function(){\n\tvar id=++UserClickSyncID;\n\tvar tag=\"Step-2\",sEl=\".configStepState\";\n\t\n\t$(\".step2Hide\").hide();\n\t$(\".step2Show\").show();\n\tShowState(sEl,false);\n\t\n\tvar domains=$(\".in_domains\").val().trim();\n\tvar domainsStore=$(\".choice_domains_store\").prop(\"checked\");\n\tvar privateKey=$(\".in_privateKey\").val().trim();\n\tvar accountKey=$(\".in_accountKey\").val().trim();\n\tvar email=$(\".in_email\").val().trim();\n\tvar emailStore=$(\".choice_email_store\").prop(\"checked\");\n\tvar eabKid=$(\".in_eab_kid\").val().trim();\n\tvar eabKey=$(\".in_eab_key\").val().trim();\n\tvar termsAgree=$(\".choice_termsAgree\").prop(\"checked\");\n\t\n\t//域名转成数组\n\tdomains=domains.replace(/\\\\s+/g,\",\").replace(/，+/g,\",\").split(/,+/);\n\tfor(var i=0,mp={};i<domains.length;i++){\n\t\tvar domain=domains[i];\n\t\tif(!domain){\n\t\t\tdomains.splice(i,1); i--; continue;\n\t\t}else if(mp[domain])\n\t\t\treturn ShowState(sEl,Lang(\"域名\"+domain+\"重复！\",\"Duplicate domain name \"+domain+\"!\"),1);\n\t\tif(/[:\\\\/;]/.test(domain))//简单校验域名格式\n\t\t\treturn ShowState(sEl,Lang(\"域名\"+domain+\"格式错误！\",\"Format error of domain name \"+domain+\"!\"),1);\n\t\tmp[domain]=1;\n\t}\n\tlocalStorage[InputDomainsStoreKey]=domainsStore?domains.join(\", \"):\"\";\n\tlocalStorage[InputEmailStoreKey]=emailStore?email:\"\";\n\t\n\t//校验是否输入\n\tif(!domains.length)\n\t\treturn ShowState(sEl,Lang(\"请填写证书中要包含的域名！\",\"Please fill in domain name to be included in the certificate!\"),1);\n\tif(!privateKey)\n\t\treturn ShowState(sEl,Lang(\"请选择证书的私钥！\",\"Please select the private key of the certificate!\"),1);\n\tif(!accountKey)\n\t\treturn ShowState(sEl,Lang(\"请选择ACME账户的私钥！\",\"Please select the private key of ACME account!\"),1);\n\tif(!/.+@.+\\\\..+/.test(email) || /[\\\\s,;]/.test(email))\n\t\treturn ShowState(sEl,Lang(\"请正确填写联系邮箱！\",\"Please fill in the contact email correctly!\"),1);\n\tif(ACME.StepData.needEAB && !(eabKid && eabKey))\n\t\treturn ShowState(sEl,Lang(\"请填写EAB KID和HMAC KEY！\",\"Please fill in EAB KID and HMAC KEY!\"),1);\n\tif(ACME.StepData.termsURL && !termsAgree)\n\t\treturn ShowState(sEl,Lang(\"未同意此ACME服务的服务条款！\",\"Do not agree to the terms of service of this acme service!\"),1);\n\t\n\t//校验私钥格式是否支持\n\tvar privateKeyInfo, parsePrivateKey=function(){\n\t\tX509.KeyParse(privateKey,function(info){\n\t\t\tprivateKeyInfo=info; parseAccountKey();\n\t\t},function(err){\n\t\t\tShowState(sEl,Lang(\"证书的私钥无效：\",\"The private key of the certificate is invalid: \")+err,1);\n\t\t},1);\n\t};\n\tvar accountKeyInfo,parseAccountKey=function(){\n\t\tX509.KeyParse(accountKey,function(info){\n\t\t\taccountKeyInfo=info; parseKeyOK();\n\t\t},function(err){\n\t\t\tShowState(sEl,Lang(\"ACME账户的私钥无效：\",\"The private key of the ACME account is invalid: \")+err,1);\n\t\t},1);\n\t};\n\t\n\tvar msg0=CLog(tag,0, ShowState(sEl,PleaseWaitTips(), 2));\n\t//设置配置数据\n\tvar parseKeyOK=function(){\n\t\tif(UserClickSyncKill(id,tag,msg0))return;\n\t\t\n\t\tACME.StepData.config={\n\t\t\tdomains:domains\n\t\t\t,privateKey:privateKeyInfo\n\t\t\t,accountKey:accountKeyInfo\n\t\t\t,email:email\n\t\t\t,eabKid:eabKid\n\t\t\t,eabKey:eabKey\n\t\t};\n\t\tCLog(tag, 0, \"config\", ACME.StepData.config);\n\t\t\n\t\tacmeNewAccount();\n\t};\n\t\n\t//ACME账户接口调用\n\tvar acmeNewAccount=function(){\n\t\tvar msg0=CLog(tag,0, ShowState(sEl,PleaseWaitTips()+Lang(\"正在调用ACME服务的newAccount接口：\",\"The newAccount interface that is calling the ACME service: \")+ACME.DirData.newAccount, 2));\n\t\tACME.StepAccount(function(){\n\t\t\tif(UserClickSyncKill(id,tag,msg0))return;\n\t\t\tacmeNewOrder();\n\t\t},function(err){\n\t\t\tif(UserClickSyncKill(id,tag,msg0+\" err: \"+err))return;\n\t\t\tCLog(tag,1, ShowState(sEl,Lang(\"调用ACME服务的newAccount接口：\",\"Call the newAccount interface of the ACME service: \")\n\t\t\t\t+ACME.DirData.newAccount+Lang(\"，发生错误：\"+err,\", An error occurred: \"+err), 1));\n\t\t});\n\t};\n\t//ACME订单创建接口调用\n\tvar acmeNewOrder=function(){\n\t\tvar msg0,onProgress=function(tips){\n\t\t\tif(id!=UserClickSyncID)return;\n\t\t\tmsg0=CLog(tag,0, ShowState(sEl,PleaseWaitTips()+Lang(\"正在调用ACME服务的订单接口。\",\"The order interface that is calling the ACME service.\")+' '+tips+\" URL:\"+ACME.DirData.newOrder, 2));\n\t\t}; onProgress(\"\");\n\t\tACME.StepOrder(onProgress,function(){\n\t\t\tif(UserClickSyncKill(id,tag,msg0))return;\n\t\t\tacmeOK();\n\t\t},function(err){\n\t\t\tif(UserClickSyncKill(id,tag,msg0+\" err: \"+err))return;\n\t\t\tCLog(tag,1, ShowState(sEl,Lang(\"调用ACME服务的订单接口：\",\"Call the order interface of the ACME service: \")\n\t\t\t\t+ACME.DirData.newOrder+Lang(\"，发生错误：\"+err,\", An error occurred: \"+err), 1));\n\t\t});\n\t};\n\t//ACME接口调用完成，显示下一步\n\tvar acmeOK=function(){\n\t\tverifyStepShow();\n\t\t\n\t\tCLog(tag,0, ShowState(sEl,Lang(\n\t\t\t \"配置完成，\"\n\t\t\t,\"Configuration is complete, \")\n\t\t\t+NextStepTips(), 2), ACME.StepData);\n\t};\n\t\n\tparsePrivateKey();\n};\n\n\n\n\n\n\n/************** UI Step3: Verify Domain Ownership **************/\n//显示第三步界面\nvar verifyStepShow=function(){\n\t$(\".step3Hide\").hide();\n\t$(\".step3Show\").show();\n\t$(\".verifyStepBtn\").show();\n\t$(\".verifyRunStopBtn\").hide();\n\t$(\".finalizeOrderBtn\").hide();\n\tShowState(\".verifyStepState\",false);\n\t\n\t//显示所有域名的验证界面\n\tverifyBoxShow();\n};\n//停止验证\nwindow.verifyRunStopClick=function(){\n\tvar id=++UserClickSyncID;\n\t$(\".verifyStepBtn\").show();\n\t$(\".verifyRunStopBtn\").hide();\n\t$(\".finalizeOrderBtn\").hide();\n\tShowState(\".verifyStepState\",false);\n\tverifyRunStopFn&&verifyRunStopFn();\n};\nvar verifyRunStopFn;\n//点击开始验证按钮，验证所有域名所有权\nwindow.verifyStepClick=function(){\n\tvar id=++UserClickSyncID;\n\tvar tag=\"Step-3\",sEl=\".verifyStepState\";\n\t\n\t$(\".step3Hide\").hide();\n\t$(\".step3Show\").show();\n\t$(\".verifyStepBtn\").hide();\n\t$(\".verifyRunStopBtn\").show();\n\t$(\".finalizeOrderBtn\").hide();\n\tShowState(sEl,false);\n\t\n\tvar domains=ACME.StepData.config.domains,auths=ACME.StepData.auths;\n\t//验证中更新状态显示\n\tvar updateState=function(init,stopNow,isFail){\n\t\tvar isStop=stopNow||id!=UserClickSyncID;\n\t\tvar okCount=0,errCount=0,execCount=0;\n\t\tfor(var i0=0;i0<domains.length;i0++){\n\t\t\tvar domain=domains[i0],auth=auths[domain],challs=auth.challenges;\n\t\t\tvar stateEl=$(\".verifyItemState_\"+i0);\n\t\t\t//authState: 0 待验证，1验证中，2等待重试authTryCount，11验证成功，12验证失败authError\n\t\t\tif(auth.authState==11){//验证成功的，初始化也不要修改验证方式了\n\t\t\t\tShowState(stateEl,ACME.ChallName(challs[auth.challIdx])+\" OK!\",2,\"\");\n\t\t\t\tokCount++;\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tif(init){ //记住选中的验证类型\n\t\t\t\tvar choiceEl=$(\"input[name=choice_authItem_\"+i0+\"]\");\n\t\t\t\tfor(var i=0;i<choiceEl.length;i++){\n\t\t\t\t\tvar el=choiceEl[i];\n\t\t\t\t\tif(!el.checked){ //未选中的隐藏掉\n\t\t\t\t\t\t$(el.parentNode).hide();\n\t\t\t\t\t}else{\n\t\t\t\t\t\tauth.challIdx=+$(el).attr(\"challidx\");\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tauth.authState=0;\n\t\t\t\tauth.authTryCount=0;\n\t\t\t\tauth.authError=\"\";\n\t\t\t\tauth.authTimer=0;\n\t\t\t}\n\t\t\tvar challName=ACME.ChallName(challs[auth.challIdx]);\n\t\t\tif(auth.authState==12){//验证失败\n\t\t\t\tShowState(stateEl,challName+Lang(\"，验证失败：\",\", Verify failed: \")\n\t\t\t\t\t+auth.authError,1,\"\");\n\t\t\t\terrCount++;\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\texecCount++;\n\t\t\tif(isStop){\n\t\t\t\tShowState(stateEl,false);\n\t\t\t\tclearTimeout(auth.authTimer); auth.authTimer=0;\n\t\t\t}else if(auth.authState==2)\n\t\t\t\tShowState(stateEl,Lang(\"等待重试中...\",\"Waiting for retry...\")\n\t\t\t\t\t+\" \"+auth.authTryCount+\" \"+auth.authError,3,\"\");\n\t\t\telse if(auth.authState==1)\n\t\t\t\tShowState(stateEl,Lang(\"验证中...\",\"Verify in progress...\"),0,\"\");\n\t\t\telse ShowState(stateEl,Lang(\"等待验证...\",\"Waiting for verify...\"),0,\"\");\n\t\t}\n\t\tif(!isStop || stopNow){\n\t\t\tvar goto2=Lang(\"请返回第二步重新开始操作！\",\"Please go back to step 2 and start over! \");\n\t\t\tvar msg=ShowState(sEl,(isFail?Lang(\"验证失败，\",\"Verify failed, \")+goto2:\n\t\t\t\t\tisStop?Lang(\"已取消，\",\"Canceled, \")+goto2:\n\t\t\t\t\tLang(\"正在验证，请耐心等待... \",\"Verifying, please wait... \"))\n\t\t\t\t+\"<div>\"\n\t\t\t\t\t+Lang(\"验证通过：\",\"Verify pass: \")+okCount+\", \"\n\t\t\t\t\t+Lang(\"未通过：\",\"Failed: \")+errCount+\", \"\n\t\t\t\t\t+Lang(\"验证中：\",\"Verify in progress: \")+execCount\n\t\t\t\t+\"</div>\"\n\t\t\t\t, isStop?1:0);\n\t\t\tif(isStop){\n\t\t\t\tCLog(tag, 1, msg);\n\t\t\t}\n\t\t}\n\t}\n\tupdateState(1);\n\t//取一个进行验证\n\tvar run=function(){\n\t\tif(id!=UserClickSyncID)return;\n\t\tupdateState();\n\t\tvar authItem,hasRunning=0,okCount=0,errCount=0;\n\t\tfor(var i0=0;i0<domains.length;i0++){\n\t\t\tvar domain=domains[i0],auth=auths[domain];\n\t\t\tif(!authItem && !auth.authState) authItem=auth;\n\t\t\tif(auth.authState==1)hasRunning++;\n\t\t\tif(auth.authState==11)okCount++;\n\t\t\tif(auth.authState==12)errCount++;\n\t\t}\n\t\tif(okCount==domains.length)//全部验证成功\n\t\t\treturn verifyOK();\n\t\tif(okCount+errCount==domains.length)//全部验证完成，存在不通过的\n\t\t\treturn verifyFail();\n\t\tif(!authItem || hasRunning)return;//没有待验证的或已有验证中，继续等待\n\t\t\n\t\tauthItem.authState=1;\n\t\tauthItem.authTryCount++;\n\t\tauthItem.authError=\"\";\n\t\tupdateState();\n\t\tACME.StepVerifyAuthItem(authItem, authItem.challIdx, function(isOk, retryTime, err){\n\t\t\tif(id!=UserClickSyncID)return;\n\t\t\tif(isOk){\n\t\t\t\tauthItem.authState=11;\n\t\t\t}else{\n\t\t\t\tauthItem.authState=2;\n\t\t\t\tauthItem.authError=err;\n\t\t\t\tauthItem.authTimer=setTimeout(function(){\n\t\t\t\t\tauthItem.authState=0;\n\t\t\t\t\tauthItem.authTimer=0;\n\t\t\t\t\trun();\n\t\t\t\t}, retryTime);\n\t\t\t}\n\t\t\trun();\n\t\t}, function(err){\n\t\t\tif(id!=UserClickSyncID)return;\n\t\t\tauthItem.authState=12;\n\t\t\tauthItem.authError=err;\n\t\t\trun();\n\t\t});\n\t};\n\t\n\tCLog(tag,0,\"==========Verify Start==========\");\n\tvar verifyEnd=function(){\n\t\t$(\".verifyRunStopBtn\").hide();\n\t\tverifyRunStopFn=null;\n\t\tCLog(tag,0,\"==========Verify End==========\");\n\t};\n\t//中途停止控制\n\tverifyRunStopFn=function(){\n\t\tverifyEnd();\n\t\tupdateState(0,1);\n\t};\n\t//验证完成，存在不通过的\n\tvar verifyFail=function(){\n\t\tCLog(tag,1,\"Verify Fail!\");\n\t\tupdateState(0,1,1);\n\t\tverifyEnd();\n\t};\n\t//全部验证成功\n\tvar verifyOK=function(){\n\t\tCLog(tag,0,\"Verify OK!\");\n\t\tverifyEnd();\n\t\t\n\t\tfinalizeOrderClick();\n\t};\n\t\n\t//调用完成订单接口，生成证书\n\twindow.finalizeOrderClick=function(){\n\t\t$(\".finalizeOrderBtn\").hide();\n\t\tvar msg0,onProgress=function(tips){\n\t\t\tif(id!=UserClickSyncID)return;\n\t\t\tmsg0=CLog(tag,0, ShowState(sEl,PleaseWaitTips()\n\t\t\t+Lang(\"验证已通过，正在签发证书。\",\"Verify passed, issuing certificate.\")\n\t\t\t+' '+tips, 2));\n\t\t}; onProgress(\"\");\n\t\tACME.StepFinalizeOrder(onProgress,function(){\n\t\t\tif(UserClickSyncKill(id,tag,msg0))return;\n\t\t\t//显示下一步\n\t\t\tdownloadStepShow();\n\t\t\t\n\t\t\tCLog(tag,0, ShowState(sEl,Lang(\n\t\t\t\t \"验证已通过，证书已签发，\"\n\t\t\t\t,\"Verification passed, The certificate has been issued, \")\n\t\t\t\t+NextStepTips(), 2), ACME.StepData);\n\t\t},function(err){\n\t\t\tif(UserClickSyncKill(id,tag,msg0+\" err: \"+err))return;\n\t\t\t$(\".finalizeOrderBtn\").show();\n\t\t\tCLog(tag,1, ShowState(sEl,Lang(\"签发证书发生错误，\",\"Error issuing certificate, \")+TryAgainTips()\n\t\t\t\t+Lang(\"如果多次重试都无法签发证书，可能需要返回第二步重新开始操作。\",\"If the certificate cannot be issued after multiple retries, you may need to return to step 2 to restart the operation.\")\n\t\t\t\t+\" Error: \"+err, 1));\n\t\t});\n\t};\n\t\n\trun();\n};\n\n\n\n\n\n\n\n/************** UI Step4: Download and save the certificate PEM file **************/\n//显示第四步界面\nvar downloadStepShow=function(){\n\t$(\".step4Hide\").hide();\n\t$(\".step4Show\").show();\n\tShowState(\".downloadStepState\",false);\n\t\n\tvar config=ACME.StepData.config;\n\tvar hasPEM=ACME.StepData.order.downloadPEM;\n\tvar pemTxt=hasPEM||Lang(\"未发现证书，请到第二步重新操作！\",\"No certificate found, please go to the step 2 to operate again!\",true);\n\t\n\t$(\".txt_downloadCert\").val(pemTxt);\n\t$(\".txt_downloadKey\").val(config.privateKey.pem);\n\t\n\tdownFileName=config.domains[0].replace(/^\\\\*\\\\./g,\"\").replace(/[^\\\\w]/g,\"_\");\n\tdownloadFileNameShow(downFileName);\n\t\n\tvar logTxts=[];\n\tvar SP=function(tag){\n\t\tlogTxts.push(\"\\\\n=========== \"+tag+\" ===========\");\n\t\treturn logTxts\n\t}\n\tvar logSet=Object.assign({\n\t\tacmeURL:ACME.URL\n\t\t,accountURL:ACME.StepData.account.url\n\t\t,X509:{\n\t\t\tDefaultType2_RSA:X509.DefaultType2_RSA\n\t\t\t,DefaultType2_ECC:X509.DefaultType2_ECC\n\t\t}\n\t\t,Window:{\n\t\t\tDefaultDownloadFileNames:DefaultDownloadFileNames\n\t\t}\n\t},config);\n\tlogSet.privateKey=config.privateKey.pem;\n\tlogSet.accountKey=config.accountKey.pem;\n\t\n\tvar logTitle='/********** '+Lang($(\".clientNameCN\").html(),$(\".clientNameEN\").html(),true)+' *********/';\n\tlogTxts.push(logTitle);\n\tlogTxts.push(Lang(\"在线网址（GitHub）：\",\"Online website (GitHub): \", true)+'https://xiangyuecn.github.io/ACME-HTML-Web-Browser-Client/ACME-HTML-Web-Browser-Client.html');\n\tlogTxts.push(Lang(\"在线网址（Gitee）：\",\"Online website (Gitee): \", true)+'https://xiangyuecn.gitee.io/acme-html-web-browser-client/ACME-HTML-Web-Browser-Client.html');\n\tlogTxts.push(\"\");\n\tlogTxts.push('GitHub: https://github.com/xiangyuecn/ACME-HTML-Web-Browser-Client');\n\tlogTxts.push('Gitee: https://gitee.com/xiangyuecn/ACME-HTML-Web-Browser-Client');\n\tlogTxts.push(\"\");\n\tlogTxts.push(Lang(\"提示：你可以将本文件拖拽进客户端网页内，将自动填充本次证书申请的所有配置参数。\",\"Tip: You can drag and drop this file into the client web page, and all configuration parameters of this certificate application will be filled automatically.\",true));\n\tlogTxts.push(\"\");\n\tSP(Lang(\"证书申请时间\",\"Certificate Application Time\",true))\n\t\t.push(new Date().toLocaleString());\n\tSP(Lang(\"域名列表\",\"Domain Name List\",true))\n\t\t.push(config.domains.join(\", \"));\n\tSP(Lang(\"ACME服务地址\",\"ACME Service URL\",true))\n\t\t.push(ACME.URL);\n\tSP(Lang(\"CSR文本\",\"CSR Text\",true))\n\t\t.push(ACME.StepData.order.orderCSR);\n\tSP(Lang(\"证书PEM文本\",\"Certificate PEM Text\",true))\n\t\t.push(pemTxt);\n\tSP(Lang(\"证书私钥PEM文本\",\"Certificate Private Key PEM Text\",true))\n\t\t.push(config.privateKey.pem);\n\tSP(Lang(\"账户私钥PEM文本\",\"Account Private Key PEM Text\",true))\n\t\t.push(config.accountKey.pem);\n\tSP(Lang(\"账户URL\",\"Account URL\",true))\n\t\t.push(ACME.StepData.account.url);\n\tSP(Lang(\"完整配置信息\",\"Complete Configuration Information\",true))\n\t\t.push(\"<ACME-HTML-Web-Browser-Client>\"+JSON.stringify(logSet)+\"</ACME-HTML-Web-Browser-Client>\");\n\tlogTxts.push(\"\");logTxts.push(logTitle);logTxts.push(\"\");\n\t\n\t$(\".txt_downloadLog\").val(hasPEM?logTxts.join(\"\\\\n\"):pemTxt);\n};\nvar initStep4=function(){//页面启动时初始化，绑定配置文件拖拽事件\n\t$(\"body\").bind(\"dragover\",function(e){\n\t\te.preventDefault();\n\t}).bind(\"drop\",function(e){\n\t\te.preventDefault();\n\t\t\n\t\tvar file=e.dataTransfer.files[0];\n\t\tif(!file)return;\n\t\tvar reader = new FileReader();\n\t\treader.onload = function(e){\n\t\t\tvar txt=reader.result;\n\t\t\tvar m=/ACME-HTML-Web-Browser-Client>(.+?)<\\\\/ACME-HTML-Web-Browser-Client/.exec(txt);\n\t\t\tif(!m) return Toast(Lang(\"拖入的文件中未发现配置信息，请拖上次申请证书时保存的记录LOG文件！\",\"No configuration information is found in the dragged file. Please drag the LOG file saved in the last certificate application!\"),1);\n\t\t\t\n\t\t\tDropConfigFile=JSON.parse(m[1]);\n\t\t\tfor(var k in DropConfigFile.X509)X509[k]=DropConfigFile.X509[k];\n\t\t\tfor(var k in DropConfigFile.Window)window[k]=DropConfigFile.Window[k];\n\t\t\t\n\t\t\tCLog(\"DropConfigFile\",0,\"Reset Config\",DropConfigFile);\n\t\t\tToast(Lang(\"识别到拖入的记录LOG文件，已填充上次申请证书时使用的配置。\",\"The LOG file of the dragged record is identified, and the configuration used in the last certificate application has been filled.\"),2);\n\t\t\tresetStep1();//重新初始化第1步\n\t\t\tdownloadFileNameShow();\n\t\t}\n\t\treader.readAsText(file);\n\t});\n};\nvar downFileName=\"\";\nwindow.DefaultDownloadFileNames={ //允许设置默认的文件名，下载时自动使用此文件名\n\tCert:\"\" /*domain.crt*/, Key:\"\" /*domain.key*/, Log:\"\" /*domain.log*/\n};\nwindow.downloadBtnClick=function(type){\n\tvar val=$(\".txt_download\"+type).val();\n\tvar fileName=downFileName;\n\tif(type==\"Cert\") fileName+=\".pem\";\n\tif(type==\"Key\") fileName+=\".key\";\n\tif(type==\"Log\") fileName+=\".log\";\n\tfileName=DefaultDownloadFileNames[type]||fileName;\n\t\n\tvar url=URL.createObjectURL(new Blob([val], {\"type\":\"text/plain\"}));\n\tvar downA=document.createElement(\"A\");\n\tdownA.href=url;\n\tdownA.download=fileName;\n\tdownA.click();\n};\nwindow.downloadFileNameShow=function(name){//显示下载文件名称，优先使用手动设置的默认名称\n\tname=name||\"your_domain\";\n\tvar name2=(DefaultDownloadFileNames.Cert||\"\").replace(/\\\\.[^\\\\.]+$/g,\"\");\n\t$(\".downloadFileName\").html(name2||name);\n\t$(\".downloadKeyFileName\").html(DefaultDownloadFileNames.Key||name+\".key\");\n\t$(\".downloadCertFileName\").html(DefaultDownloadFileNames.Cert||name+\".pem\");\n};\n\n\n\n\n\n\n\n\n\n\n\n\n\n//Test_打头的方法仅供测试用：完成第二步后允许进行UI调试，手动调用Test_AllStepData_Save()，刷新页面可恢复界面\nwindow.Test_AllStepData_Save=function(){\n\tif(!ACME.StepData.order) throw new Error(Lang(\"未完成第二步操作\",\"The step 2 is not completed\",true));\n\t\n\tvar config=ACME.StepData.config;\n\tdelete ACME.PrevNonce;\n\tconfig.privateKey=config.privateKey.pem;\n\tconfig.accountKey=config.accountKey.pem;\n\t\n\tlocalStorage[Test_AllStepData_StoreKey]=JSON.stringify(ACME);\n\tACME=null;\n\tconsole.warn(Lang(\"仅供测试：已保存测试数据，需刷新页面\",\"For testing only: the test data has been saved, and the page needs to be refreshed\",true));\n};\nvar Test_AllStepData_StoreKey=\"ACME_HTML_Test_AllStepData\";\nvar initTest_Restore=function(){\n\tif(localStorage[Test_AllStepData_StoreKey]){\n\t\tconsole.warn(Lang(\"仅供测试：已保存测试数据，调用Test_Restore_StepXXX()进行恢复步骤界面\",\"For testing only: test data has been saved, call Test_Restore_StepXXX() to restore the step interface\",true));\n\t}\n}\nvar Test_AllStepData_Restore=function(next){\n\tvar data=JSON.parse(localStorage[Test_AllStepData_StoreKey]||\"{}\");\n\tif(!data.StepData) throw new Error(Lang(\"未保存数据\",\"No data saved\",true));\n\tfor(var k in data) ACME[k]=data[k];\n\t\n\tvar config=ACME.StepData.config;\n\tX509.KeyParse(config.privateKey,function(info){\n\t\tconfig.privateKey=info;\n\t\tX509.KeyParse(config.accountKey,function(info){\n\t\t\tconfig.accountKey=info;\n\t\t\tconsole.log(\"ACME.StepData\", ACME.StepData);\n\t\t\tsetTimeout(function(){next()});\n\t\t});\n\t});\n};\nwindow.Test_Restore_StepAuth=function(){\n\tTest_AllStepData_Restore(function(){\n\t\tconsole.warn(Lang(\"仅供测试：已手动恢复步骤三界面\",\"For testing only: Step 3 interface has been manually restored\",true));\n\t\tverifyStepShow();\n\t});\n};\nwindow.Test_Restore_StepDownload=function(){\n\tTest_AllStepData_Restore(function(){\n\t\tconsole.warn(Lang(\"仅供测试：已手动恢复步骤四界面\",\"For testing only: Step 4 interface has been manually restored\",true));\n\t\tdownloadStepShow();\n\t});\n};\n\n\n\n})();\n</script>\n\n\n\n\n\n<script>\n//===================================================\n//================= ACME functions ==================\n//===================================================\n//LICENSE: GPL-3.0, https://github.com/xiangyuecn/ACME-HTML-Web-Browser-Client\n(function(){\n\"use strict\";\n\n/************** ACME client implementation **************/\n//RFC8555: https://www.rfc-editor.org/rfc/rfc8555.html\nwindow.ACME={\n\tURL:\"\"\n\t,SyncID:0\n\t,DirData:{}\n\t,Directory:function(True,False){\n\t\tvar id=++ACME.SyncID;\n\t\tvar url=ACME.URL,dirStoreKey=\"ACME_HTML_cache_\"+url;\n\t\tvar ok=function(cache){\n\t\t\tvar data=cache.data;\n\t\t\tif(id!=ACME.SyncID) return False(\"cancel\");\n\t\t\tvar meta=data.meta||{};\n\t\t\tif(!data.newOrder)\n\t\t\t\treturn False(\"Not newOrder found: \"+FormatText(JSON.stringify(data)));\n\t\t\tACME.DirData=data;\n\t\t\tACME.StepData.termsURL=meta.termsOfService;\n\t\t\tACME.StepData.needEAB=!!meta.externalAccountRequired;\n\t\t\tvar saveCache=function(){\n\t\t\t\tlocalStorage[dirStoreKey]=JSON.stringify(cache);\n\t\t\t};\n\t\t\tsaveCache();\n\t\t\tTrue(cache,saveCache);\n\t\t};\n\t\tvar cache=JSON.parse(localStorage[dirStoreKey]||'{}');//先读缓存\n\t\tif(cache.time && Date.now()-cache.time<24*60*60*1000){\n\t\t\treturn ok(cache);\n\t\t}\n\t\trequest(url,null,function(data){\n\t\t\tok({data:data,time:Date.now()});\n\t\t},False);\n\t}\n\t\n\t,StepData:{}\n\t,ChallName:function(chall){ //验证类型名称\n\t\tif(chall.type==\"dns-01\"){ // https://letsencrypt.org/docs/challenge-types/\n\t\t\treturn Lang(\"DNS验证\",\"DNS Verify\");\n\t\t}else if(chall.type==\"http-01\"){\n\t\t\treturn Lang(\"文件URL验证\",\"File URL Verify\");\n\t\t} // tls-alpn-01 https://www.rfc-editor.org/rfc/rfc8737\n\t\treturn chall.type.toUpperCase();\n\t}\n\t,ChallSort:function(chall){ //验证类型排序\n\t\tif(chall.type==\"dns-01\") return 1+\"_\"+chall.type;\n\t\telse if(chall.type==\"http-01\") return 2+\"_\"+chall.type;\n\t\treturn 3+\"_\"+chall.type;\n\t}\n\t// 生成JSON Web Signature(JWS)，用账户私钥签名\n\t,GetJwsA:async function(Protected, Payload){\n\t\tvar key=ACME.StepData.config.accountKey;\n\t\tvar alg=\"ES256\",algorithm={name:\"ECDSA\", hash:\"SHA-256\"};\n\t\tif(key.type==\"RSA\"){\n\t\t\talg=\"RS256\";algorithm={name:\"RSASSA-PKCS1-v1_5\"}\n\t\t}\n\t\tProtected.alg=alg;\n\t\tvar rtv={\n\t\t\t\"protected\":Json2UrlB64(Protected)\n\t\t\t, payload:Payload?Json2UrlB64(Payload):\"\"\n\t\t};\n\t\tvar data=Str2Bytes(rtv[\"protected\"]+\".\"+rtv.payload);\n\t\tvar sign=await crypto.subtle.sign(algorithm, key.key, data);\n\t\trtv.signature=Bytes2UrlB64(sign);\n\t\treturn rtv;\n\t}\n\t// 获得随机数Nonce\n\t,GetNonceA:function(useNew){\n\t\treturn new Promise(function(resolve,reject){\n\t\t\tACME.GetNonce(useNew,function(val){\n\t\t\t\tresolve(val);\n\t\t\t},function(err){\n\t\t\t\treject(new Error(err));\n\t\t\t});\n\t\t});\n\t}\n\t,GetNonce:function(useNew, True, False){\n\t\tvar old=ACME.PrevNonce;ACME.PrevNonce=\"\";\n\t\tif(!useNew && old) return True(old);//使用上次调用返回的值\n\t\trequest({url:ACME.DirData.newNonce\n\t\t\t,method:\"HEAD\",response:false\n\t\t}, null, function(data,xhr){\n\t\t\tACME.PrevNonce=\"\";\n\t\t\t//跨域无解 Chrome ZeroSSL: Refused to get unsafe header \"Replay-Nonce\" , 需要 Access-Control-Expose-Headers: Link, Replay-Nonce, Location\n\t\t\tvar val=xhr.getResponseHeader(\"Replay-Nonce\");\n\t\t\tif(!val){\n\t\t\t\tFalse(\"GetNonce: \"+Lang('此ACME服务对浏览器访问支持太差，无法跨域获取Replay-Nonce响应头。','This ACME service has too poor browser access support to get the Replay-Nonce response header across domains.'), true);\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tTrue(val);\n\t\t},function(err){\n\t\t\tFalse(\"GetNonce: \"+err);\n\t\t});\n\t}\n\t//测试账户接口的跨域访问\n\t,TestAccountCORS:function(True,False){\n\t\trequest({url:ACME.DirData.newAccount\n\t\t\t,method:\"POST\",response:false,nocheck:true\n\t\t}, {}, function(data,xhr){\n\t\t\tif(xhr.status>0){\n\t\t\t\tTrue();\n\t\t\t}else{\n\t\t\t\tFalse(\"[\"+xhr.status+\"]\",true);\n\t\t\t}\n\t\t},function(err){\n\t\t\tFalse(err);\n\t\t});\n\t}\n\t\n\t//账户接口调用\n\t,StepAccount:async function(True,False){\n\t\tvar id=++ACME.SyncID;\n\t\tvar tag=\"ACME.StepAccount\";\n\t\tCLog(tag, 0, \"==========Account Start==========\");\n\t\tvar Err=\"\";\n\t\ttry{\n\t\t\tawait ACME._StepAccountA(id,tag);\n\t\t}catch(e){\n\t\t\tErr=e.message||\"-\";\n\t\t\tCLog(tag, 1, Err, e);\n\t\t}\n\t\tCLog(tag, 0, \"==========Account End==========\");\n\t\tif(Err) False(Err)\n\t\telse True();\n\t} , _StepAccountA:async function(id,tag){\n\t\tvar url=ACME.DirData.newAccount,config=ACME.StepData.config;\n\t\tvar accountData={\n\t\t\tcontact:[\"mailto:\"+config.email]\n\t\t\t,termsOfServiceAgreed:true\n\t\t};\n\t\t\n\t\t//externalAccountRequired https://github.com/fszlin/certes/blob/08bf850bbed9e026c718f56f1bcc454afafb4f92/src/Certes/Acme/AccountContext.cs\n\t\tif(ACME.StepData.needEAB){\n\t\t\tvar eab={\n\t\t\t\t\"protected\":Json2UrlB64({ alg:\"HS256\", kid:config.eabKid, url:url })\n\t\t\t\t,payload:Json2UrlB64(X509.PublicKeyJwk(config.accountKey))\n\t\t\t};\n\t\t\tvar key=await crypto.subtle.importKey(\"raw\", UrlB642Bytes(config.eabKey)\n\t\t\t\t,{name:\"HMAC\",hash:\"SHA-256\"}, true, [\"sign\"]);\n\t\t\tvar data=Str2Bytes(eab[\"protected\"]+\".\"+eab.payload);\n\t\t\tvar sign=await crypto.subtle.sign(\"HMAC\", key, data);\n\t\t\teab.signature=Bytes2UrlB64(sign);\n\t\t\taccountData.externalAccountBinding=eab;\n\t\t\tCLog(tag,0 ,\"externalAccountBinding\", eab);\n\t\t};\n\t\t\n\t\t//组装成jws，请求接口\n\t\tvar sendData=await ACME.GetJwsA({\n\t\t\tjwk: X509.PublicKeyJwk(config.accountKey)\n\t\t\t,nonce: await ACME.GetNonceA(true)\n\t\t\t,url: url\n\t\t},accountData);\n\t\tvar resp=await requestA(url, sendData);\n\t\tif(id!=ACME.SyncID) throw new Error(\"cancel\");\n\t\tACME.StepData.account={\n\t\t\turl:xhrHeader(resp.xhr, \"Location\")\n\t\t\t,data:resp.data\n\t\t};\n\t\tCLog(tag,0,\"Account OK\",ACME.StepData.account);\n\t}\n\t\n\t//订单接口调用\n\t,StepOrder:async function(Progress,True,False){\n\t\tvar id=++ACME.SyncID;\n\t\tvar tag=\"ACME.StepOrder\";\n\t\tCLog(tag, 0, \"==========Order Start==========\");\n\t\tvar Err=\"\";\n\t\ttry{\n\t\t\tawait ACME._StepOrderA(Progress,id,tag);\n\t\t}catch(e){\n\t\t\tErr=e.message||\"-\";\n\t\t\tCLog(tag, 1, Err, e);\n\t\t}\n\t\tCLog(tag, 0, \"==========Order End==========\");\n\t\tif(Err) False(Err)\n\t\telse True();\n\t} , _StepOrderA:async function(Progress,id,tag){\n\t\tvar url=ACME.DirData.newOrder,config=ACME.StepData.config;\n\t\tvar dnsArr=[];\n\t\tfor(var i=0;i<config.domains.length;i++){\n\t\t\tdnsArr.push({ type:\"dns\", value:config.domains[i] });\n\t\t}\n\t\tvar orderData={\n\t\t\tidentifiers:dnsArr\n\t\t};\n\t\t\n\t\tProgress(\"newOrder...\");\n\t\t//组装成jws，请求接口\n\t\tvar sendData=await ACME.GetJwsA({\n\t\t\tkid: ACME.StepData.account.url\n\t\t\t,nonce: await ACME.GetNonceA()\n\t\t\t,url: url\n\t\t},orderData);\n\t\tvar resp=await requestA(url, sendData);\n\t\tif(id!=ACME.SyncID) throw new Error(\"cancel\");\n\t\tresp.data.orderUrl=xhrHeader(resp.xhr, \"Location\");\n\t\tACME.StepData.order=resp.data;\n\t\tCLog(tag,0,\"Order OK\",ACME.StepData.order);\n\t\t\n\t\t//准备Key Authorizations需要的参数 参考：rfc8555 8.1\n\t\tvar jwkStr=JSON.stringify(X509.PublicKeyJwk(config.accountKey));\n\t\tvar thumbprint=await crypto.subtle.digest({name: \"SHA-256\"}, Str2Bytes(jwkStr));\n\t\tthumbprint=Bytes2UrlB64(thumbprint);\n\t\t\n\t\t//读取所有的验证信息\n\t\tvar idfs=ACME.StepData.order.identifiers,bad=0;\n\t\tvar auths=ACME.StepData.order.authorizations;\n\t\tfor(var i=0;i<idfs.length;i++){\n\t\t\tif(config.domains.indexOf(idfs[i].value)==-1) bad=1;\n\t\t}\n\t\tif(bad || idfs.length!=auths.length || idfs.length!=config.domains.length)\n\t\t\tthrow new Error(Lang(\"创建的订单中的域名和配置的不一致\",\"The domain name in the created order is inconsistent with the configuration\"));\n\t\tif(id!=ACME.SyncID) throw new Error(\"cancel\");\n\t\tACME.StepData.auths={};\n\t\tfor(var i=0;i<auths.length;i++){\n\t\t\tProgress(\"auth(\"+(i+1)+\"/\"+auths.length+\")...\");\n\t\t\tvar url=auths[i];\n\t\t\tvar sendData=await ACME.GetJwsA({\n\t\t\t\tkid: ACME.StepData.account.url\n\t\t\t\t,nonce: await ACME.GetNonceA()\n\t\t\t\t,url: url\n\t\t\t},\"\");\n\t\t\tvar resp=await requestA(url, sendData);\n\t\t\tif(id!=ACME.SyncID) throw new Error(\"cancel\");\n\t\t\tresp.data.domain=idfs[i].value;\n\t\t\tresp.data.authUrl=url;\n\t\t\tACME.StepData.auths[idfs[i].value]=resp.data;\n\t\t\t\n\t\t\t//生成Key Authorizations\n\t\t\tvar challs=resp.data.challenges;\n\t\t\tfor(var i2=0;i2<challs.length;i2++){\n\t\t\t\tvar chall=challs[i2];\n\t\t\t\tchall.authTxt=chall.token+\".\"+thumbprint;\n\t\t\t\tvar sha=await crypto.subtle.digest({name: \"SHA-256\"}\n\t\t\t\t\t\t\t\t, Str2Bytes(chall.authTxt));\n\t\t\t\tif(id!=ACME.SyncID) throw new Error(\"cancel\");\n\t\t\t\tchall.authTxtSHA256=Bytes2UrlB64(sha);\n\t\t\t\tchall.authTxtSHA256Base64=Bytes2Base64(sha);\n\t\t\t}\n\t\t}\n\t\tCLog(tag,0,\"Order Authorizations\",ACME.StepData.auths);\n\t}\n\t\n\t//验证一个域名\n\t,StepVerifyAuthItem:async function(authItem, challIdx, True,False){\n\t\tvar tag=\"ACME.verify[\"+authItem.challenges[challIdx].type+\"]:\"+authItem.domain;\n\t\tvar Err=\"\";\n\t\ttry{\n\t\t\tawait ACME._StepVerifyAuthItemA(authItem,challIdx, ACME.SyncID,tag, True,False);\n\t\t}catch(e){\n\t\t\tErr=e.message||\"-\";\n\t\t\tCLog(tag, 1, Err, e);\n\t\t}\n\t\tif(Err) True(false, 1000, Err); //重试\n\t} , _StepVerifyAuthItemA:async function(authItem,challIdx, id,tag, True,False){\n\t\t//先通知要用的验证方式，反复发送只要成功一次即可，不管结果\n\t\tvar chall=authItem.challenges[challIdx];\n\t\tif(!chall.isSend){\n\t\t\tvar url=chall.url;\n\t\t\tvar sendData=await ACME.GetJwsA({\n\t\t\t\tkid: ACME.StepData.account.url\n\t\t\t\t,nonce: await ACME.GetNonceA()\n\t\t\t\t,url: url\n\t\t\t},{});\n\t\t\tvar resp=await requestA({url:url,nocheck:true}, sendData);\n\t\t\tvar status=resp.xhr.status;\n\t\t\tif(status>=200&&status<300)\n\t\t\t\tchall.isSend=true;\n\t\t}\n\t\t\n\t\t//重新查询一下状态\n\t\tvar url=authItem.authUrl;\n\t\tvar sendData=await ACME.GetJwsA({\n\t\t\tkid: ACME.StepData.account.url\n\t\t\t,nonce: await ACME.GetNonceA()\n\t\t\t,url: url\n\t\t},\"\");\n\t\tvar resp=await requestA(url, sendData);\n\t\tvar data=resp.data;\n\t\tif(data.status==\"pending\"){\n\t\t\tCLog(tag, 0, \"pending...\");\n\t\t\treturn True(false, 1000, \"pending...\");\n\t\t}\n\t\tif(data.status==\"valid\"){\n\t\t\tCLog(tag, 0, \"valid OK\");\n\t\t\treturn True(true);\n\t\t}\n\t\tCLog(tag, 1, \"Fail\", data);\n\t\treturn False(data.status+\": \"+FormatText(JSON.stringify(data)));\n\t}\n\t\n\t//完成订单，生成证书\n\t,StepFinalizeOrder:async function(Progress,True,False){\n\t\tvar id=++ACME.SyncID;\n\t\tvar tag=\"ACME.StepFinalizeOrder\";\n\t\tCLog(tag, 0, \"==========Finalize Start==========\");\n\t\tvar Err=\"\";\n\t\ttry{\n\t\t\tawait ACME._StepFinalizeOrderA(Progress,id,tag);\n\t\t}catch(e){\n\t\t\tErr=e.message||\"-\";\n\t\t\tCLog(tag, 1, Err, e);\n\t\t}\n\t\tCLog(tag, 0, \"==========Finalize End==========\");\n\t\tif(Err) False(Err)\n\t\telse True();\n\t} , _StepFinalizeOrderA:async function(Progress,id,tag){\n\t\tvar order=ACME.StepData.order,config=ACME.StepData.config,domains=config.domains;\n\t\t\n\t\t//先请求finalize\n\t\tif(!order.finalizeIsSend){\n\t\t\tProgress(\"finalize...\");\n\t\t\t//生成csr，第一个域名做CN\n\t\t\tvar csr=await new Promise(function(resolve,reject){\n\t\t\t\tX509.CreateCSR(config.privateKey, domains[0], domains, function(csr){\n\t\t\t\t\tresolve(csr);\n\t\t\t\t},function(err){\n\t\t\t\t\treject(new Error(err));\n\t\t\t\t});\n\t\t\t});\n\t\t\torder.orderCSR=csr;\n\t\t\tCLog(tag,0,\"CSR\\\\n\"+csr);\n\t\t\tcsr=Bytes2UrlB64(ASN1.PEM2Bytes(csr));\n\t\t\t\n\t\t\tvar url=order.finalize;\n\t\t\t//组装成jws，请求接口\n\t\t\tvar sendData=await ACME.GetJwsA({\n\t\t\t\tkid: ACME.StepData.account.url\n\t\t\t\t,nonce: await ACME.GetNonceA()\n\t\t\t\t,url: url\n\t\t\t},{ csr:csr });\n\t\t\tvar resp=await requestA(url, sendData);\n\t\t\tif(id!=ACME.SyncID) throw new Error(\"cancel\");\n\t\t\tCLog(tag,0,\"finalize result\",resp.data);\n\t\t\torder.finalizeIsSend=true;\n\t\t}\n\t\t\n\t\t//轮询订单状态，60秒超时\n\t\tvar t1=Date.now(),tryCount=0;\n\t\twhile(!order.checkOK && Date.now()-t1<60*1000){\n\t\t\tif(id!=ACME.SyncID) throw new Error(\"cancel\");\n\t\t\ttryCount++;\n\t\t\tProgress(\"check retry:\"+tryCount+\"...\");\n\t\t\tvar url=order.orderUrl;\n\t\t\t//组装成jws，请求接口\n\t\t\tvar sendData=await ACME.GetJwsA({\n\t\t\t\tkid: ACME.StepData.account.url\n\t\t\t\t,nonce: await ACME.GetNonceA()\n\t\t\t\t,url: url\n\t\t\t},\"\");\n\t\t\tvar resp=await requestA(url, sendData);\n\t\t\tif(id!=ACME.SyncID) throw new Error(\"cancel\");\n\t\t\tvar data=resp.data;\n\t\t\tif(data.status==\"valid\"){\n\t\t\t\torder.checkOK=true;\n\t\t\t\torder.certUrl=data.certificate;\n\t\t\t\tCLog(tag,0,\"check OK\",data);\n\t\t\t\tbreak;\n\t\t\t}else if(data.status==\"invalid\"){\n\t\t\t\tCLog(tag,1,\"check Fail\",data);\n\t\t\t\tthrow new Error(data.status+\": \"+FormatText(JSON.stringify(data)));\n\t\t\t}else{\n\t\t\t\tCLog(tag,0,data.status+\"... wait 1s\",data);\n\t\t\t\tawait new Promise(function(s){ setTimeout(s, 1000) });\n\t\t\t}\n\t\t}\n\t\t\n\t\t//下载证书\n\t\tif(!order.downloadPEM){\n\t\t\tProgress(\"download...\");\n\t\t\tvar url=order.certUrl;\n\t\t\t//组装成jws，请求接口\n\t\t\tvar sendData=await ACME.GetJwsA({\n\t\t\t\tkid: ACME.StepData.account.url\n\t\t\t\t,nonce: await ACME.GetNonceA()\n\t\t\t\t,url: url\n\t\t\t},\"\");\n\t\t\tvar resp=await requestA({url:url,response:false}, sendData);\n\t\t\tif(id!=ACME.SyncID) throw new Error(\"cancel\");\n\t\t\tvar pem=resp.xhr.responseText;\n\t\t\torder.downloadPEM=pem;\n\t\t\tCLog(tag,0,\"download OK\\\\n\"+pem);\n\t\t}\n\t}\n};\n\n\n// 读取响应头，读不到就当做跨域无法读取处理，自定义的头需要 Access-Control-Expose-Headers: Link, Replay-Nonce, Location\nvar xhrHeader=function(xhr,key){\n\tvar val=xhr.getResponseHeader(key);\n\tif(!val){\n\t\tacmeReadDirGotoCORS();\n\t\tthrow new Error(Lang(\"无法读取响应头\"+key+\"，可能是因为此ACME服务对跨域访问支持不良，请按第一步显示的提示操作。\"\n\t\t\t,\"The response header \"+key+\" cannot be read, This may be because this ACME service does not support cross domain access, Please follow the prompt displayed in step 1.\"));\n\t}\n\treturn val;\n};\n\n// ajax\nvar requestA=function(url,post){\n\treturn new Promise(function(resolve,reject){\n\t\trequest(url,post,function(data,xhr){\n\t\t\tresolve({data:data,xhr:xhr});\n\t\t},function(err){\n\t\t\treject(new Error(err));\n\t\t});\n\t});\n}\nvar request=function(url,post,True,False){\n\tvar set=typeof(url)==\"string\"?{url:url}:url; url=set.url;\n\tvar method=set.method||(post?\"POST\":\"GET\");\n\tvar tag=\"ACME.Request\"; CLog(tag,4,\"send \"+method,set,post);\n\t\n\tvar xhr=new XMLHttpRequest();\n\txhr.timeout=30000;\n\txhr.open(method,url,true);\n\txhr.onreadystatechange=function(){\n\t\tif(xhr.readyState==4){\n\t\t\tACME.PrevNonce=xhr.getResponseHeader(\"Replay-Nonce\")||\"\";//将此值存起来\n\t\t\t\n\t\t\tvar isBad=xhr.status<200 || xhr.status>=300;\n\t\t\tvar useResp=set.response==null || set.response;\n\t\t\tvar err=\"\",data,logObj;\n\t\t\tif(useResp || isBad){\n\t\t\t\tlogObj=xhr.responseText;\n\t\t\t\ttry{\n\t\t\t\t\tdata=JSON.parse(logObj);\n\t\t\t\t\tlogObj=data;\n\t\t\t\t}catch(e){ };\n\t\t\t}\n\t\t\tCLog(tag,4,\"send End\",set, {\n\t\t\t\tstatus:xhr.status\n\t\t\t\t,headers:xhr.getAllResponseHeaders()\n\t\t\t}, logObj);\n\t\t\tif(set.nocheck || !isBad && (!useResp || data)){\n\t\t\t\treturn True(data, xhr);\n\t\t\t}\n\t\t\tFalse((isBad?\"[\"+xhr.status+\"]\":\"\")+FormatText(xhr.responseText), xhr.status);\n\t\t}\n\t};\n\tif(post){\n\t\tif(typeof(post)==\"object\")post=JSON.stringify(post);\n\t\txhr.setRequestHeader(\"Content-Type\",set.contentType||\"application/jose+json\");\n\t\txhr.send(post);\n\t}else{\n\t\txhr.send();\n\t}\n};\n\n})();\n</script>\n\n\n\n\n\n<script>\n//==================================================================\n//================= RSA/ECC/X.509/ASN.1 functions ==================\n//==================================================================\n//LICENSE: GPL-3.0, https://github.com/xiangyuecn/ACME-HTML-Web-Browser-Client\n(function(){\n\"use strict\";\n\nwindow.X509={\n\tDefaultType2_RSA:\"2048\" //默认创建RSA密钥位数\n\t,DefaultType2_ECC:\"P-256\" //默认创建ECC曲线\n\t,SupportECCType2:{ //支持的ECC曲线和常见名称\n\t\t\"P-256\":\"prime256v1\", \"P-384\":\"secp384r1\", \"P-521\":\"secp521r1\"\n\t}\n\t,SupportECCType2Names:function(){ var str=[]; for(var k in X509.SupportECCType2)str.push(X509.SupportECCType2[k]); return str; }\n\t\n\t//创建RSA/ECC密钥对 type2取值：type=RSA时为密钥位数数值，type=ECC时为支持的曲线（X509.SupportECCType2）\n\t,KeyGenerate:function(type,type2,True,False){\n\t\tvar algorithm=0;\n\t\tif(type==\"RSA\"){\n\t\t\talgorithm={ publicExponent: new Uint8Array([1, 0, 1]) //E: AQAB\n\t\t\t\t,name:\"RSASSA-PKCS1-v1_5\", modulusLength:+type2, hash:\"SHA-256\" };\n\t\t}else if(type==\"ECC\"){\n\t\t\talgorithm={ name:\"ECDSA\", namedCurve:type2 };\n\t\t}else{\n\t\t\tFalse(\"Not support \"+type);\n\t\t\treturn;\n\t\t};\n\t\tcrypto.subtle.generateKey(algorithm,true,[\"sign\",\"verify\"])\n\t\t\t.then(function(key){\n\t\t\t\t//FireFox不支持导出pkcs8参数的ECC私钥，Chrome没问题，使用jwk获得最大兼容\n\t\t\t\tcrypto.subtle.exportKey(\"jwk\", key.privateKey).then(function(jwk){\n\t\t\t\t\tTrue(X509.KeyExport(jwk));\n\t\t\t\t}).catch(function(e){\n\t\t\t\t\tFalse(Lang('此浏览器不支持导出'+algorithm.name+'+PKCS#8格式密钥：','This browser does not support exporting '+algorithm.name+'+PKCS#8 format keys: ')+e.message);\n\t\t\t\t});\n\t\t\t}).catch(function(e){\n\t\t\t\tFalse(Lang('此浏览器不支持生成'+algorithm.name+'：','This browser does not support generating '+algorithm.name+': ')+e.message);\n\t\t\t});\n\t}\n\t//解析密钥，检查是否支持，通过回调返回格式或错误信息，pem支持公钥和私钥\n\t,KeyParse:function(pem, True, False, mustPrivate){\n\t\tvar rtv={};\n\t\tvar Err=function(msg){ rtv.error=msg; False(msg, rtv); };\n\t\t//浏览器crypto不支持PKCS#1的pem导入，提取参数转成jwk导入\n\t\t\n\t\tif(!/BEGIN\\\\s*(RSA|EC)?\\\\s*(PUBLIC|PRIVATE)\\\\s*KEY/.test(pem))\n\t\t\treturn Err(Lang('不是RSA或ECC密钥','Not an RSA or ECC key'));\n\t\trtv.type=RegExp.$1==\"EC\"?\"ECC\":RegExp.$1;\n\t\tvar isPKCS1=!!RegExp.$1;\n\t\tvar isPub=RegExp.$2==\"PUBLIC\";\n\t\tif(isPub && mustPrivate)\n\t\t\treturn Err(Lang('不是私钥','Is not a private key'));\n\t\t\n\t\t//解析提取参数信息\n\t\ttry{\n\t\t\tvar paramAsn1=null;\n\t\t\tvar asn1=ASN1.ParsePEM(pem);\n\t\t\trtv.asn1=asn1;\n\t\t\t\n\t\t\tif(isPKCS1){\n\t\t\t\tif(rtv.type==\"RSA\"){\n\t\t\t\t\tparamAsn1=asn1; //直接按顺序存放的参数\n\t\t\t\t}else if(rtv.type==\"ECC\"){\n\t\t\t\t\tif(isPub) //没见过这种ecc公钥\n\t\t\t\t\t\treturn Err(Lang('不支持ECC PKCS#1格式公钥','ECC PKCS#1 format public key is not supported'));\n\t\t\t\t\tvar oid2=asn1.sub[2].sub[0].oid;\n\t\t\t\t\trtv.type2=ASN1.OID[oid2]||\"\";\n\t\t\t\t\tparamAsn1=asn1;\n\t\t\t\t}\n\t\t\t}else{\n\t\t\t\tvar idx=isPub?0:1; //跳过私钥开头的version，就和公钥一样了\n\t\t\t\tvar oid=asn1.sub[idx].sub[0].oid;\n\t\t\t\tvar oid2=asn1.sub[idx].sub[1].oid;\n\t\t\t\trtv.type=ASN1.OID[oid]||\"\";\n\t\t\t\trtv.type2=ASN1.OID[oid2]||\"\";\n\t\t\t\t\n\t\t\t\tif(rtv.type==\"ECC\"&&isPub)//ECC公钥直接就是值\n\t\t\t\t\tparamAsn1=asn1;\n\t\t\t\telse\n\t\t\t\t\tparamAsn1=new ASN1().parse(asn1.sub[idx+1].bytes);//密钥参数\n\t\t\t}\n\t\t\trtv.paramAsn1=paramAsn1;\n\t\t}catch(e){\n\t\t\treturn Err(Lang('密钥解析失败：','Key resolution failed: ')+e.message);\n\t\t}\n\t\tif(rtv.type==\"RSA\"){\n\t\t\tvar idx=isPub?0:1; //私钥开头多一个版本号\n\t\t\trtv.param={\n\t\t\t\tn:paramAsn1.sub[idx].bytes //Modulus\n\t\t\t\t,e:paramAsn1.sub[idx+1].bytes //Exponent\n\t\t\t\t,d:isPub?null:paramAsn1.sub[idx+2].bytes //D\n\t\t\t};\n\t\t\tvar keys=\"p,q,dp,dq,qi\".split(\",\");\n\t\t\tfor(var i=0;i<5;i++)\n\t\t\t\trtv.param[keys[i]]=isPub?null:paramAsn1.sub[idx+3+i].bytes;\n\t\t\trtv.type2=rtv.param.n.length*8+\"\";\n\t\t}else if(rtv.type==\"ECC\"){\n\t\t\tif(!X509.SupportECCType2[rtv.type2]){\n\t\t\t\treturn Err(Lang('只支持'+X509.SupportECCType2Names().join(\"、\")+'曲线的ECC密钥','ECC key only supported for '+X509.SupportECCType2Names().join(\",\")+' curve'));\n\t\t\t}\n\t\t\tif(isPub){\n\t\t\t\tvar b2=paramAsn1.sub[1].bytes;\n\t\t\t}else{\n\t\t\t\tvar idx=isPKCS1?3:2;\n\t\t\t\tvar b2=paramAsn1.sub[idx].sub[0].bytes;\n\t\t\t}\n\t\t\tif(b2[0]!=0x04)//0x04代表公钥未压缩 https://www.rfc-editor.org/rfc/rfc5480#section-2.2\n\t\t\t\treturn Err(\"ECC !0x04: \"+b2[0]);\n\t\t\tvar bits=(b2.length-1)/2;\n\t\t\trtv.param={\n\t\t\t\tx:b2.slice(1,1+bits) //xy为公钥\n\t\t\t\t,y:b2.slice(1+bits)\n\t\t\t\t,d:isPub?null:paramAsn1.sub[1].bytes //D\n\t\t\t};\n\t\t}else{\n\t\t\treturn Err(Lang('不支持的密钥类型：','Unsupported key type: ')+oid);\n\t\t}\n\t\trtv.isPKCS1=isPKCS1;\n\t\trtv.hasPrivate=!isPub;\n\t\trtv.pem=pem;\n\t\t\n\t\t//转成CryptoKey\n\t\tvar algorithm,jwk;\n\t\tif(rtv.type==\"RSA\"){\n\t\t\talgorithm={ publicExponent: new Uint8Array(rtv.param.n.buffer)\n\t\t\t,name:\"RSASSA-PKCS1-v1_5\", modulusLength:+rtv.type2, hash:\"SHA-256\" };\n\t\t\tjwk={ kty:\"RSA\", alg: \"RS256\" };\n\t\t}else if(rtv.type==\"ECC\"){\n\t\t\talgorithm={ name:\"ECDSA\", namedCurve:rtv.type2 };\n\t\t\tjwk={ kty:\"EC\", crv:rtv.type2 };\n\t\t}\n\t\tjwk=Object.assign(jwk,{ ext:true, key_ops:[isPub?\"verify\":\"sign\"] });\n\t\tfor(var k in rtv.param)\n\t\t\trtv.param[k]&&( jwk[k]=Bytes2UrlB64(rtv.param[k]) );\n\t\t\n\t\tcrypto.subtle.importKey(\n\t\t\t\"jwk\",jwk,algorithm,true,[isPub?\"verify\":\"sign\"]\n\t\t).then(function(key){\n\t\t\trtv.key=key;\n\t\t\tTrue(rtv);\n\t\t}).catch(function(e){\n\t\t\tErr(Lang('密钥转成CryptoKey失败：','Failed to convert key to CryptoKey: ')+e.message);\n\t\t});\n\t}\n\t//解析出来的公钥转换成JSON Web Key(JWK)\n\t,PublicKeyJwk:function(info){ // https://www.rfc-editor.org/rfc/rfc7638\n\t\tvar p=info.param;\n\t\tif(info.type==\"RSA\"){\n\t\t\treturn { e:Bytes2UrlB64(p.e), kty:\"RSA\", n:Bytes2UrlB64(p.n) };\n\t\t}else if(info.type==\"ECC\"){\n\t\t\treturn { crv:info.type2, kty:\"EC\", x:Bytes2UrlB64(p.x),y:Bytes2UrlB64(p.y) };\n\t\t}else{\n\t\t\tthrow new Error(\"Jwk: \"+info.type);\n\t\t}\n\t}\n\t//解析出来的密钥或jwk对象转成PKCS#8格式 publicOnly：提供私钥时仅导出公钥 returnType：1 bytes，2 asn1，other pem\n\t,KeyExport:function(info,publicOnly,returnType){\n\t\tvar tag=\"KeyExport: \", S=ASN1.S,V=ASN1.V; //ASN1快捷创建方式\n\t\tvar param=info.param,type=param&&info.type,type2=info.type2;//解析出来的格式\n\t\tif(!param){//jwk\n\t\t\tif(info.kty){\n\t\t\t\ttype=info.kty==\"EC\"?\"ECC\":info.kty;\n\t\t\t\tif(type==\"ECC\")type2=info.crv;\n\t\t\t}else throw new Error(tag+\"bad key\");\n\t\t}\n\t\tvar keys=(type==\"ECC\"?\"x,y,d\":\"n,e,d,p,q,dp,dq,qi\").split(\",\");\n\t\tif(!param){//jwk参数需转成二进制\n\t\t\tparam={};\n\t\t\tfor(var i=0;i<keys.length;i++){\n\t\t\t\tvar k=keys[i],b64=info[k];\n\t\t\t\tif(b64)param[k]=UrlB642Bytes(b64);\n\t\t\t}\n\t\t}\n\t\tvar useD=!publicOnly&&param.d;//导出私钥\n\t\t\n\t\tvar bytes;//封装参数\n\t\tif(type==\"RSA\"){\n\t\t\tvar asn1=S(0x30, V(0x02, param.n), V(0x02, param.e));\n\t\t\tif(useD){//公钥只需n、e参数，私钥要全部\n\t\t\t\tasn1.sub.splice(0,0,V(0x02, [0]));//开头插入版本号\n\t\t\t\tfor(var i=2;i<keys.length;i++){\n\t\t\t\t\tasn1.push(V(0x02, param[keys[i]]));\n\t\t\t\t}\n\t\t\t}\n\t\t\tbytes=asn1.toBytes();\n\t\t}else if(type==\"ECC\"){ //公钥x、y参数，私钥外面再套一层d\n\t\t\tvar pubB=new Uint8Array(1+param.x.length*2); pubB[0]=0x04;\n\t\t\tpubB.set(param.x, 1);\n\t\t\tpubB.set(param.y, 1+param.x.length);\n\t\t\tif(useD){\n\t\t\t\tbytes=S(0x30, V(0x02,[1]), V(0x04, param.d)\n\t\t\t\t\t, S(0xA1, V(0x03, pubB)) ).toBytes();\n\t\t\t}else bytes=pubB;\n\t\t}else{ throw new Error(tag+type); }\n\t\t\n\t\tvar typeASN1=S(0x30 //封装类型\n\t\t\t,V(0x06, ASN1.OID2Bytes(ASN1.OID[type]))\n\t\t\t,type==\"RSA\"?V(0x05,[])\n\t\t\t\t\t:V(0x06, ASN1.OID2Bytes(ASN1.OID[type2]))\n\t\t);\n\t\t\n\t\tif(useD){//封装私钥\n\t\t\tvar keyA=S(0x30, V(0x02, [0]), typeASN1, V(0x04, bytes));\n\t\t}else{ //封装公钥\n\t\t\tvar keyA=S(0x30 ,typeASN1, V(0x03, bytes));\n\t\t};\n\t\tif(returnType==2) return keyA;\n\t\tbytes=keyA.toBytes();\n\t\tif(returnType==1) return bytes;\n\t\tvar str=Bytes2Base64(bytes).replace(/(.{64})/g,\"$1\\\\n\").trim();\n\t\tvar sp=useD?\"PRIVATE\":\"PUBLIC\";\n\t\treturn '-----BEGIN '+sp+' KEY-----\\\\n'+str+'\\\\n-----END '+sp+' KEY-----';\n\t}\n\t\n\t\n\t//创建证书请求CSR，提供私钥用于CSR签名\n\t,CreateCSR:function(keyInfo,commonName,domains,True,False){\n\t\t//CSR格式：rfc2986，太复杂了，直接拿openssl生成csr用ASN1.ParsePEM来观看格式\n\t\tvar S=ASN1.S,V=ASN1.V; //ASN1快捷创建方式\n\t\t\n\t\t//封装公钥\n\t\ttry{\n\t\t\tvar pubA=X509.KeyExport(keyInfo, true, 2);\n\t\t}catch(e){ return False(e.message) }\n\t\t\n\t\t//封装域名列表扩展属性\n\t\tvar altNameA=S(0x30);\n\t\tfor(var i=0;i<domains.length;i++)\n\t\t\taltNameA.push(V(0x82, Str2Bytes(domains[i])));\n\t\t\n\t\t//组装CSR主体\n\t\tvar bodyA=S(0x30\n\t\t\t,V(0x02, [0]) //版本号 固定值0\n\t\t\t,S(0x30, S(0x31 ,S(0x30 //只提供一个属性：CN\n\t\t\t\t,V(0x06, ASN1.OID2Bytes(\"2.5.4.3\"))\n\t\t\t\t,V(0x0C, Str2Bytes(commonName))\n\t\t\t)))\n\t\t\t,pubA //公钥\n\t\t\t,S(0xA0, S(0x30 //扩展属性，域名列表\n\t\t\t\t,V(0x06, ASN1.OID2Bytes(\"1.2.840.113549.1.9.14\"))\n\t\t\t\t,S(0x31, S(0x30, S(0x30\n\t\t\t\t\t,V(0x06, ASN1.OID2Bytes(\"2.5.29.17\"))\n\t\t\t\t\t,V(0x04, altNameA.toBytes())\n\t\t\t\t)))\n\t\t\t))\n\t\t);\n\t\t\n\t\t//签名生成CSR rfc2315\n\t\tvar bodyBytes=bodyA.toBytes();\n\t\tvar algorithm={name:\"ECDSA\", hash:\"SHA-256\"};\n\t\tif(keyInfo.type==\"RSA\"){\n\t\t\talgorithm={name:\"RSASSA-PKCS1-v1_5\"}\n\t\t}\n\t\tcrypto.subtle.sign(algorithm, keyInfo.key, bodyBytes).then(function(arr){\n\t\t\tvar signBytes=new Uint8Array(arr);\n\t\t\tif(keyInfo.type==\"ECC\"){//ECC分两段重新封装一下\n\t\t\t\tvar s1=signBytes.subarray(0,keyInfo.param.x.length);\n\t\t\t\tvar s2=signBytes.subarray(keyInfo.param.x.length);\n\t\t\t\tsignBytes=S(0x30, V(0x02,s1), V(0x02,s2)).toBytes();\n\t\t\t}\n\t\t\tvar csrA=S(0x30, bodyA\n\t\t\t\t,S(0x30 //签名类型\n\t\t\t\t\t,V(0x06, ASN1.OID2Bytes(ASN1.OID[\"SHA256_\"+keyInfo.type]))\n\t\t\t\t\t,keyInfo.type==\"RSA\"?V(0x05,[]):null //ECC没有第二个参数\n\t\t\t\t)\n\t\t\t\t,V(0x03, signBytes)\n\t\t\t);\n\t\t\tvar bytes=csrA.toBytes();\n\t\t\tvar str=Bytes2Base64(bytes).replace(/(.{64})/g,\"$1\\\\n\").trim();\n\t\t\tTrue('-----BEGIN CERTIFICATE REQUEST-----\\\\n'+str+'\\\\n-----END CERTIFICATE REQUEST-----');\n\t\t}).catch(function(e){\n\t\t\tFalse(\"CSR sign:\"+e.message);\n\t\t});\n\t}\n};\n\n\n\n//简单实现ASN.1解析和封包\nwindow.ASN1=function(tag, bytes){\n\tthis.sub=[];\n\tif(tag)this.setTag(tag);\n\tif(bytes)this.setBytes(bytes);\n};\nASN1.S=function(tag){ //快捷创建容器类型，并提供任意多个子元素\n\tvar v=new ASN1(tag);\n\tfor(var i=1,a=arguments;i<a.length;i++){a[i]&&v.push(a[i])}\n\treturn v;\n};\nASN1.V=function(tag, bytes){ //快捷创建值类型\n\treturn new ASN1(tag, bytes)\t\n};\nASN1.ParsePEM=function(pem){\n\treturn new ASN1().parsePEM(pem);\n};\nASN1.TagNames={\n\t'01':'BOOLEAN','02':'INTEGER','03':'BIT_STRING'\n\t,'04':'OCTET_STRING','05':'NULL','06':'OID'\n\t,'0C':'UTF8String','13':'Printable_String'\n\t,'17':'UTCTime','18':'GeneralizedTime','30':'SEQUENCE','31':'SET'\n};\nASN1.OID={\n\t \"1.2.840.113549.1.1.1\":\"RSA\"\n\t,\"1.2.840.113549.1.1.11\":\"SHA256_RSA\"\n\t,\"1.2.840.10045.2.1\":\"ECC\"\n\t,\"1.2.840.10045.4.3.2\":\"SHA256_ECC\"\n\t,\"1.2.840.10045.3.1.7\":\"P-256\" //secp256r1 | prime256v1\n\t,\"1.3.132.0.34\":\"P-384\" //secp384r1\n\t,\"1.3.132.0.35\":\"P-521\" //secp521r1\n};\tfor(var k in ASN1.OID)ASN1.OID[ASN1.OID[k]]=k;\nASN1.OID2Bytes=function(oid){\n\tvar arr = oid.split('.'), byts = [];\n\tvar v0=+arr[0],v1=+arr[1];\n\tif (!/^[\\\\d\\\\.]+$/.test(oid)|| arr.length < 3 || v0 > 2 || v0 * 40 + v1 > 0xff)\n\t\tthrow new Error(\"bad oid: \"+oid);\n\tbyts.push(v0 * 40 + v1);\n\tfor (var i = 2, len = arr.length; i < len; i++) {\n\t\tvar num = +arr[i], bits = [];\n\t\twhile (num >= 0x80) { bits.push(num % 0x80); num /= 0x80; }\n\t\tbits.push(num); bits.reverse();\n\t\tfor (var j = 0, jl = bits.length - 1; j <= jl; j++) {\n\t\t\tif (j != jl) {\n\t\t\t\tbyts.push(0x80 + bits[j]);\n\t\t\t} else {\n\t\t\t\tbyts.push(bits[j]);\n\t\t\t}\n\t\t}\n\t}\n\treturn new Uint8Array(byts);\n};\nASN1.OID2Text=function(bytes){\n\tvar str = \"\", b0 = bytes[0];\n\tvar m = b0 < 80 ? b0 < 40 ? 0 : 1 : 2;\n\tstr+=m+\".\"+(b0 - m * 40);\n\tfor (var i = 1, len = bytes.length; i < len; ) {\n\t\tvar num = 0;\n\t\tfor (; i < len; ) {\n\t\t\tvar bit = bytes[i++]; num *= 0x80;\n\t\t\tif (bit >= 0x80) num += bit - 0x80;\n\t\t\telse { num += bit; break; }\n\t\t}\n\t\tstr+=\".\"+num;\n\t}\n\treturn str;\n};\nASN1.ParseSize=function(pos, bytes){ //简单解析长度数值\n\tvar bitCount=bytes[pos[0]++],size=0;\n\tif(bitCount < 0x80) size=bitCount;\n\telse if(bitCount == 0x80) size=-404; //不定长，需搜索两个0结尾，直接拒绝支持\n\telse for(var i=0,len=bitCount&0x7F;i<len;i++)\n\t\tsize=size*256+bytes[pos[0]++];\n\tif(size<0 || size>bytes.length-pos[0])throw new Error(\"ASN.1 Bad size \"+size);\n\treturn size;\n};\nASN1.ParseBlock=function(pos, bytes, sub){ //简单解析一块子内容\n\tsub=sub||[];\n\twhile(pos[0]<bytes.length){\n\t\tvar idx0=pos[0],item=new ASN1();\n\t\tvar tag=bytes[pos[0]++],size=ASN1.ParseSize(pos, bytes);\n\t\tif((tag&0x20) != 0){//结构化容器，嵌套调用\n\t\t\titem.parse(bytes.slice(idx0, pos[0]+size));\n\t\t}else{//普通内容\n\t\t\tvar chunk=bytes.slice(pos[0], pos[0]+size);\n\t\t\tif(tag==0x02 || tag==0x03){//去掉开头补的0，正整数\n\t\t\t\tif(chunk.length>1 && chunk[0]==0){\n\t\t\t\t\tchunk=chunk.slice(1);\n\t\t\t\t}\n\t\t\t}\n\t\t\titem.setTag(tag);\n\t\t\titem.setBytes(chunk);\n\t\t}\n\t\tsub.push(item);\n\t\tpos[0]+=size;\n\t}\n\treturn sub;\n};\nASN1.PEM2Bytes=function(pem){\n\tpem=pem.replace(/[\\\\s\\\\r\\\\n]/g,\"\");\n\tvar m=/^-+BEGIN\\\\w*-+([^-]+)-+END\\\\w+-+$/i.exec(pem);\n\ttry{\n\t\treturn Base642Bytes(m[1]);\n\t}catch(e){\n\t\tthrow new Error(Lang('不是pem格式。','Not a pem format.'));\n\t}\n};\nASN1.prototype={\n\tsetTag:function(tag){\n\t\tvar txt=(tag<16?\"0\":\"\")+tag.toString(16).toUpperCase();\n\t\tthis.tag=tag;\n\t\tthis.tagTxt=txt;\n\t\tthis.tagName=ASN1.TagNames[txt]||\"0x\"+txt;\n\t}\n\t,setBytes:function(bytes){\n\t\tif(bytes.length==null||(bytes.slice==null && bytes.subarray==null))\n\t\t\tthrow new Error(\"Not Array\");\n\t\tif(this.tag==0x06) this.oid=ASN1.OID2Text(bytes);\n\t\tif(this.tag==0x0C||this.tag==0x13) this.string=Bytes2Str(bytes);\n\t\tthis.bytes=bytes;\n\t}\n\t,push:function(asn1){\n\t\tif(!asn1.parsePEM) throw new Error(\"Not ASN1\");\n\t\tthis.sub.push(asn1);\n\t\treturn this;\n\t}\n\t,parsePEM:function(pem){\n\t\treturn this.parse(ASN1.PEM2Bytes(pem));\n\t}\n\t,parse:function(bytes){\n\t\tvar pos=[0];\n\t\t//最外层必须是个结构化容器，第6位为1，为0为基础类型 https://www.jianshu.com/p/ce7ab5f3f33a\n\t\tif((bytes[0]&0x20) == 0) throw new Error(\"ASN.1 parse: Not SEQ\");\n\t\tthis.setTag(bytes[pos[0]++]);\n\t\tvar size=ASN1.ParseSize(pos, bytes);\n\t\tbytes=bytes.slice(pos[0], pos[0]+size);\n\t\tthis.setBytes(bytes);\n\t\t//解析子内容\n\t\tASN1.ParseBlock([0], bytes, this.sub);\n\t\treturn this;\n\t}\n\t,toBytes:function(innerOlny){\n\t\tvar chunks=[],len=0;\n\t\tif(this.sub.length){//容器类型，递归调用\n\t\t\tfor(var i=0;i<this.sub.length;i++){\n\t\t\t\tvar arr=this.sub[i].toBytes();\n\t\t\t\tchunks.push(arr); len+=arr.length;\n\t\t\t}\n\t\t}else if(this.bytes&&this.bytes.length){//简单类型\n\t\t\tif(this.tag==0x02 && this.bytes[0] >= 0x80 || this.tag==0x03){\n\t\t\t\tchunks.push([0]);len++;  //0x02负数 0x03需要开头补0\n\t\t\t}\n\t\t\tchunks.push(this.bytes); len+=this.bytes.length;\n\t\t}\n\t\tif(!innerOlny){//添加标签和长度\n\t\t\tvar arr=[], num=len;\n\t\t\tif(num<0x80) arr.push(num);\n\t\t\telse {\n\t\t\t\twhile(num>0xff){ arr.push(num&0xff); num=num>>8; }\n\t\t\t\tarr.push(num&0xff); arr.push(0x80+arr.length);\n\t\t\t}\n\t\t\tarr.push(this.tag); arr.reverse();\n\t\t\tchunks.splice(0,0,arr); len+=arr.length;\n\t\t}\n\t\tvar bytes=new Uint8Array(len),n=0;\n\t\tfor(var i=0;i<chunks.length;i++){\n\t\t\tvar arr=chunks[i];\n\t\t\tbytes.set(arr, n); n+=arr.length;\n\t\t}\n\t\treturn bytes;\n\t}\n};\n\n})();\n</script>\n\n\n\n\n\n\n\n<script>\n//===========================================================\n//================= Common functions ==================\n//===========================================================\n//LICENSE: GPL-3.0, https://github.com/xiangyuecn/ACME-HTML-Web-Browser-Client\n(function(){\n\"use strict\";\n\n/************** Language **************/\nwindow.LangCur=/\\\\b(zh|cn)\\\\b/i.test(navigator.language)?\"cn\":\"en\";\nwindow.Lang=function(cn,en,txt){\n\tif((cn||en) && (!cn||!en))throw new Error(\"Lang bad args\");\n\tif(txt)return LangCur==\"cn\"?cn:en;\n\tvar html=\"\",ks={cn:cn,en:en};\n\tfor(var k in ks){\n\t\thtml+=(LangCur!=k?'<!--LangHide1-->':'')\n\t\t\t+'<span class=\"lang'+k.toUpperCase()\n\t\t\t+'\" style=\"'+(LangCur==k?'':'display:none')\n\t\t\t+'\">'+ks[k]+'</span>'\n\t\t\t+(LangCur!=k?'<!--LangHide2-->':'');\n\t}\n\treturn html;\n};\nwindow.LangReview=function(cls){\n\tvar el=$(cls||\"body\");\n\tel.find(\".langCN\")[LangCur==\"cn\"?\"show\":\"hide\"]();\n\tel.find(\".langEN\")[LangCur!=\"cn\"?\"show\":\"hide\"]();\n\tvar inputs=el.find(\".inputLang\");\n\tfor(var i=0;i<inputs.length;i++)\n\t\tinputs[i].setAttribute(\"placeholder\",inputs[i].getAttribute(\"placeholder-\"+LangCur));\n};\nwindow.LangClick=function(lang){\n\tLangCur=lang;\n\tLangReview();\n\t$(\".langBtn\").css(\"color\",null);\n\t$(\".langBtn_\"+lang).css(\"color\",\"#000\");\n\t$(\"body\").css(\"wordBreak\",lang==\"cn\"?\"break-all\":null);\n\t\n\tif(!document.titleLang)document.titleLang=document.title;\n\tvar arr=document.titleLang.split(\"|\"),t1=[],t2=[];\n\tfor(var i=0;i<arr.length;i++)\n\t\tif(/[^\\\\x00-\\\\xff]/.test(arr[i]) == (LangCur==\"cn\"))t1.push(arr[i].trim());\n\t\telse t2.push(arr[i].trim());\n\tdocument.title=t1.concat(t2).join(\" | \");\n};\n\n\n/************** Console log output **************/\nwindow.CLog=function(tag, color, msg){\n\tvar now=new Date();\n\tvar t=(\"0\"+now.getMinutes()).substr(-2)\n\t\t+\":\"+(\"0\"+now.getSeconds()).substr(-2)\n\t\t+\".\"+(\"00\"+now.getMilliseconds()).substr(-3);\n\tmsg=msg.replace(/<!--LangHide1[\\\\S\\\\s]+?LangHide2-->/g,\"\");//去掉没有显示的语言\n\tmsg=msg.replace(/<[^>]+>/g,\"\");\n\tvar arr=[\"[\"+t+\" \"+tag+\"]\"+msg];\n\tfor(var i=3;i<arguments.length;i++){\n\t\tarr.push(arguments[i]);\n\t};\n\tvar fn=color==1?console.error:color==3?console.warn:color==4?console.debug:console.log;\n\tfn.apply(console,arr);\n\treturn msg;\n};\n\n\n/************** $ Selector / like jQuery **************/\n(function(){\nwindow.$=function(cls){ if(cls&&cls.is$) return cls; return new fn(cls) }\nvar fn=function(cls,node){\n\tthis.length=0;\n\tif(!cls)return;\n\tif(cls.appendChild){this.push(cls); return}\n\tvar arr=(node||document).querySelectorAll(cls);\n\tfor(var i=0;i<arr.length;i++)this.push(arr[i]);\n};\nfn.prototype={\n\tis$:1\n\t,push:function(val){ this[this.length++]=val }\n\t,find:function(cls){ var el0=this[0]; return new fn(el0?cls:\"\",el0) }\n\t,val:function(val){ return this.prop(\"value\",val) }\n\t,hide:function(){ return this.css(\"display\",\"none\") }\n\t,show:function(display){ return this.css(\"display\",display===undefined?null:display) }\n\t\n\t,html:function(html){\n\t\tvar el0=this[0];\n\t\tif(html===undefined)return el0&&el0.innerHTML||\"\";\n\t\tfor(var i=0;i<this.length;i++) this[i].innerHTML=html;\n\t\treturn this;\n\t}\n\t,append:function(html){ return this._end(html) }\n\t,prepend:function(html){ return this._end(html,1) }\n\t,_end:function(html,prep){\n\t\tvar el0=this[0];\n\t\tif(html && el0){\n\t\t\tvar nodes=html;\n\t\t\tif(typeof(html)==\"string\"){\n\t\t\t\tvar div=document.createElement(\"div\");\n\t\t\t\tdiv.innerHTML=html;\n\t\t\t\tnodes=[];\n\t\t\t\tfor(var i=0;i<div.childNodes.length;i++)nodes.push(div.childNodes[i]);\n\t\t\t}else if(html.appendChild){\n\t\t\t\tnodes=[html];\n\t\t\t}\n\t\t\tif(prep)prep=el0.firstChild;\n\t\t\tfor(var i=0;i<nodes.length;i++){\n\t\t\t\tif(prep) el0.insertBefore(nodes[i],prep);\n\t\t\t\telse el0.appendChild(nodes[i])\n\t\t\t}\n\t\t}\n\t\treturn this;\n\t}\n\t,prop:function(key,val){\n\t\tvar el0=this[0];\n\t\tif(val===undefined)return el0&&el0[key];\n\t\tfor(var i=0;i<this.length;i++) this[i][key]=val;\n\t\treturn this;\n\t}\n\t,attr:function(key,val){\n\t\tvar el0=this[0];\n\t\tif(val===undefined)return el0&&el0.getAttribute(key);\n\t\tfor(var i=0;i<this.length;i++){\n\t\t\tif(val==null) this[i].removeAttribute(key);\n\t\t\telse this[i].setAttribute(key,val);\n\t\t}\n\t\treturn this;\n\t}\n\t,css:function(key,val){\n\t\tfor(var i=0;i<this.length;i++)\n\t\t\tthis[i].style[key]=val;\n\t\treturn this;\n\t}\n\t,bind:function(type,fn){\n\t\tfor(var i=0;i<this.length;i++)\n\t\t\tthis[i].addEventListener(type,fn);\n\t\treturn this;\n\t}\n};\n})();\n\n\n/************** functions **************/\nwindow.FormatText=function(str){\n\treturn str.replace(/[&<>='\"]/g,function(a){ return \"&#\" + a.charCodeAt(0) + \";\" });\n};\n\nwindow.Str2Bytes=function(str){\n\tstr=unescape(encodeURIComponent(str));\n\tvar u8arr=new Uint8Array(str.length);\n\tfor(var i=0;i<str.length;i++)u8arr[i]=str.charCodeAt(i);\n\treturn u8arr;\n};\nwindow.Bytes2Str=function(bytes){\n\tvar str=\"\";\n\tfor(var i=0;i<bytes.length;i++) str+=String.fromCharCode(bytes[i]);\n\treturn decodeURIComponent(escape(str));\n};\nwindow.Json2UrlB64=function(data){\n\treturn Bytes2UrlB64(JSON.stringify(data));\n};\nwindow.Base642Bytes=function(b64){\n\tvar str=atob(b64);\n\tvar u8arr=new Uint8Array(str.length);\n\tfor(var i=0;i<str.length;i++)u8arr[i]=str.charCodeAt(i);\n\treturn u8arr;\n};\nwindow.UrlB642Bytes=function(str){\n\tstr=str.replace(/_/g,\"\\\\/\").replace(/-/g,\"+\");\n\twhile(str.length%4)str+=\"=\";\n\treturn Base642Bytes(str);\n};\nwindow.Bytes2UrlB64=function(bytes){//二进制数组转成url base64\n\treturn Bytes2Base64(bytes).replace(/\\\\//g,\"_\").replace(/\\\\+/g,\"-\").replace(/=/g,\"\");\n};\nwindow.Bytes2Base64=function(bytes){\n\tvar str=\"\";\n\tif(typeof(bytes)==\"string\"){\n\t\tstr=unescape(encodeURIComponent(bytes));\n\t}else{\n\t\tif(bytes instanceof ArrayBuffer) bytes=new Uint8Array(bytes);\n\t\tfor(var i=0;i<bytes.length;i++) str+=String.fromCharCode(bytes[i]);\n\t}\n\treturn btoa(str);\n};\n\n})();\n</script>\n\n\n<script>\n//===========================================\n//================= Launch ==================\n//===========================================\n//LICENSE: GPL-3.0, https://github.com/xiangyuecn/ACME-HTML-Web-Browser-Client\n(function(){\n\"use strict\";\n\nvar msg=\"\";\ntry{\n\twindow.PageRawHTML=window.PageRawHTML||document.documentElement.outerHTML;\n\tif(window.top!=window){\n\t\tmsg=Lang(\n\t\t\t '不允许在IFrame内显示本页面，请直接通过网址访问！'\n\t\t\t,'This page is not allowed to be displayed in IFrame, please visit it directly through the website!');\n\t\tthrow new Error();\n\t}\n\tvar SupportCrypto=false;\n\teval('SupportCrypto=!!crypto.subtle.sign');\n\teval('\\`\\`;(async function(){class a{}})');\n}catch(e){\n\tif(!msg && !SupportCrypto && window.isSecureContext===false){\n\t\tmsg=Lang('浏览器禁止不安全页面调用Crypto功能，可开启https解决，或使用localhost、file://访问', 'The browser prohibits unsafe pages from calling Crypto function. You can enable https to solve the problem, or use localhost, file:// to access');\n\t}\n\tif(!msg){\n\t\tmsg=Lang('浏览器版本太低'+(SupportCrypto?'':'（不支持Crypto）')+'，请换一个浏览器再试！', 'The browser version is too low'+(SupportCrypto?'':' (Crypto is not supported)')+'. Please change another browser and try again!');\n\t}\n\tdocument.body.innerHTML='<div style=\"font-size:32px;color:red;font-weight:bold;text-align:center;padding-top:100px\">'+msg+'</div>';\n\treturn;\n}\n$(\".main\").html($(\".main\").html()); //彻底干掉输入框自动完成\n$(\"input,textarea,select\").attr(\"autocomplete\",\"off\");\n\n$(\".main-load\").hide();\n$(\".main\").show();\nLangClick(LangCur);\n\ninitMainUI();\n\n})();\n</script></body></html>`;\n(function(){\n\t\tconsole.clear();\n\t\tdocument.head.innerHTML=/<head[^>]*>([\\S\\s]+?)<\\/head>/i.exec(PageRawHTML)[1];\n\t\tdocument.body.innerHTML=/<body[^>]*>([\\S\\s]+)<\\/body>/i.exec(PageRawHTML)[1];\n\t\tvar js=/<script[^>]*>([\\S\\s]+?)<\\/script>/ig,m;\n\t\twhile(m=js.exec(PageRawHTML)) eval.call(window, m[1]);\n\t})()\n```\n\n\n\n等待出现：**读取服务目录成功，**请进行下一步操作。 URL=https://acme.zerossl.com/v2/DV90/directory\n\n即已经选择ZeroSSL作为服务商。\n\n### 步骤二：证书配置\n\n提示：如果上次申请过证书，可以拖拽已下载保存的记录LOG文件到本页面，将自动填充上次的配置信息。\n\n在“证书中要包含的域名：”中填写你要签发的域名。\n\n泛域名填写方式：example.com,*.example.com\n\n单域名填写方式：www.example.com\n\n多域名合并：www.example.com,site1.example.com,site2.example.com\n\n`带通配符的域名只支持DNS验证，其他域名支持上传文件验证`\n\n在 `证书的私钥：`处一般选择 `创建新RSA私钥`或 `创建新ECC私钥`，根据证书的加密形式而定。\n\n在 `ACME账户的私钥：`处一般选择 `创建新RSA私钥 `或 `创建新ECC私钥 `，根据证书的加密形式而定。\n\n在 ` ACME账户的联系邮箱：`处填写你的邮箱，该邮箱必须真实存在。\n\n### 步骤三：验证域名所有权\n\n请给每个域名选择一个你合适的验证方式，泛域名只能使用DNS解析方式。\n\nDNS解析方式：登陆到你的解析提供平台，如DNSPod，CloudFlare等，添加一条或多条TXT记录。\n\n文件验证方式：仅限单域名，在你域名所属的文件目录下 创建 `/.well-known/acme-challenge/`目录并在内创建验证文件。\n\nTLS-ALPN-01：使用Key Authorizations (Token+.+指纹)自行处理，Digest为Key Authorizations的SHA-256 Base64值。\n\n完成后，点击“开始验证”即可验证。\n\n## 步骤四：下载保存证书PEM文件\n\n完成验证后，服务端会自动签发SSL证书，点击下载即可下载证书对应私钥，公钥和Log文件。\n\n### 其他提示\n\n1.你需要其他格式的证书文件？\n\n大部分服务器程序支持直接使用 your_domain.pem+your_domain.key 来配置开启HTTPS（比如Nginx），如果你需要 *.pfx、*.p12 格式的证书（比如用于IIS），请用下面命令将PEM证书转换成 pfx/p12 格式：\n\n```shell\nopenssl pkcs12 -export -out your_domain.pfx -inkey your_domain.key -in your_domain.pem\n```\n\n2.IIS证书链缺失？\n\n对于Windows IIS服务器，你需要将证书链安装到“本地计算机”的“中间证书颁发机构”中；请将PEM证书中的所有证书拆分成单个PEM文件（后缀改成.crt或.cer），然后将系统中缺失的中间证书双击打开然后安装进去；详细参考： http://support.microsoft.com/kb/954755\n","slug":"zerossl-ssl","published":1,"comments":1,"layout":"post","photos":[],"_id":"cm1xg6mtj00159a9o22ts6wn8","content":"<h2 id=\"引入\"><a href=\"#引入\" class=\"headerlink\" title=\"引入\"></a>引入</h2><p>现如今，向像腾讯，阿里云等大厂的免费SSL证书，都由一年缩短为3个月。</p>\n<p><a href=\"https://cloud.tencent.com/document/product/400/104538\">https://cloud.tencent.com/document/product/400/104538</a></p>\n<p>在如今的形式下，签发免费的3个月的单域名证书显然不如直接签发Let’s Encrypt、ZeroSSL等ACME提供的泛域名证书来的方便。</p>\n<p>而acme.sh常用于Linux端上证书的自动化签发与续约，对于不使用服务器的人群，显然造成了许多麻烦，那么可以通过Web端直接签发这些ACME的泛域名证书吗？</p>\n<p>Github开源项目ACME-Web-Browser-Client告诉了我们这并非是一件不可能实现的事情。</p>\n<p>简介：</p>\n<p>本网页客户端（仅一个静态HTML网页文件）用于：向 Let’s Encrypt、ZeroSSL、Google 等支持 ACME 协议的证书颁发机构，免费申请获得用于 HTTPS 的 SSL&#x2F;TLS 域名证书（RSA、ECC&#x2F;ECDSA），支持多域名和通配符泛域名；只需在现代浏览器上操作即可获得 PEM 格式纯文本的域名证书，不依赖操作系统环境（Windows、macOS都能用），无需下载和安装软件，无需注册登录，纯手动操作，只专注于申请获得证书这一件事，简单易用，非常适用于希望手动快捷申请获得证书的使用场景。</p>\n<p>Github开源地址：<a href=\"https://github.com/xiangyuecn/ACME-HTML-Web-Browser-Client\">https://github.com/xiangyuecn/ACME-HTML-Web-Browser-Client</a></p>\n<p>Gitee开源地址：</p>\n<p><a href=\"https://gitee.com/xiangyuecn/ACME-HTML-Web-Browser-Client\">https://gitee.com/xiangyuecn/ACME-HTML-Web-Browser-Client</a></p>\n<h2 id=\"使用\"><a href=\"#使用\" class=\"headerlink\" title=\"使用\"></a>使用</h2><p>提示：可将其私有化部署到Vercel，Netlify等上，可弥补Github Pages速度的不足。</p>\n<p>任意点击下列一个网页使用：</p>\n<p><a href=\"https://xiangyuecn.github.io/ACME-HTML-Web-Browser-Client/ACME-HTML-Web-Browser-Client.html\">https://xiangyuecn.github.io/ACME-HTML-Web-Browser-Client/ACME-HTML-Web-Browser-Client.html</a> （作者Github Pages）</p>\n<p><a href=\"https://ssl.dev.inkdust.top/\">https://ssl.dev.inkdust.top/</a> （本人Vercel）</p>\n<h2 id=\"签发ZeroSSL\"><a href=\"#签发ZeroSSL\" class=\"headerlink\" title=\"签发ZeroSSL\"></a>签发ZeroSSL</h2><p>本文为签发ZeroSSL篇教程，签发Let’s Encrypt或Google，请看Let’s Encrypt篇和Google篇。</p>\n<h3 id=\"步骤一：注册ZeroSSL\"><a href=\"#步骤一：注册ZeroSSL\" class=\"headerlink\" title=\"步骤一：注册ZeroSSL\"></a>步骤一：注册ZeroSSL</h3><p>来到<a href=\"https://zerossl.com/\">https://zerossl.com/</a></p>\n<p>注册ZeroSSL，请使用魔法网络环境，如无法使用魔法网络环境，请使用<code>Header Eidtor</code> 来将 <code>reCAPTCHA</code>的地址重写到国内镜像。</p>\n<p>Header Eidtor谷歌商店：<a href=\"https://chromewebstore.google.com/detail/header-editor/eningockdidmgiojffjmkdblpjocbhgh?hl=zh-CN&utm_source=ext_sidebar\">https://chromewebstore.google.com/detail/header-editor/eningockdidmgiojffjmkdblpjocbhgh?hl=zh-CN&amp;utm_source=ext_sidebar</a></p>\n<p>Header Eidtor Edge商店：<a href=\"https://microsoftedge.microsoft.com/addons/detail/header-editor/djbcdihpmcbpkljpjibeiedjenilallo\">https://microsoftedge.microsoft.com/addons/detail/header-editor/djbcdihpmcbpkljpjibeiedjenilallo</a></p>\n<p>Header Eidtor Crx搜搜：<a href=\"https://www.crxsoso.com/webstore/detail/eningockdidmgiojffjmkdblpjocbhgh\">https://www.crxsoso.com/webstore/detail/eningockdidmgiojffjmkdblpjocbhgh</a><br><img src=\"https://cdnn.boochi.cn/gh/inkdust-dev/ink-oss@main/qexo-upload/24/8/image_38fa68a496e6a63cd50b294b0776d192.png\" alt=\"https://cdnn.boochi.cn/gh/inkdust-dev/ink-oss@main/qexo-upload/24/8/image_38fa68a496e6a63cd50b294b0776d192.png\"></p>\n<p>重写规则：</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs plaintext\">名称：reCAPTCHA<br><br>匹配类型：正则表达式<br><br>规则类型：重定向规则<br><br>匹配规则：^http(s?)://(?:www\\.|recaptcha\\.|)google\\.com/recaptcha/(.*)<br><br>执行类型：常规<br><br>重定向至：https://recaptcha.net/recaptcha/$2<br></code></pre></td></tr></table></figure>\n\n<p>导入TXT文件：</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs plaintext\">&#123;<br>\t&quot;request&quot;: [],<br>\t&quot;sendHeader&quot;: [],<br>\t&quot;receiveHeader&quot;: [<br>\t\t&#123;<br>\t\t\t&quot;enable&quot;: false,<br>\t\t\t&quot;name&quot;: &quot;Content Security Policy Header Modification&quot;,<br>\t\t\t&quot;ruleType&quot;: &quot;modifyReceiveHeader&quot;,<br>\t\t\t&quot;matchType&quot;: &quot;all&quot;,<br>\t\t\t&quot;pattern&quot;: &quot;&quot;,<br>\t\t\t&quot;exclude&quot;: &quot;&quot;,<br>\t\t\t&quot;isFunction&quot;: true,<br>\t\t\t&quot;code&quot;: &quot;let rt = detail.type;\\nif (rt === &#x27;script&#x27; || rt === &#x27;stylesheet&#x27; || rt === &#x27;main_frame&#x27; || rt === &#x27;sub_frame&#x27;) &#123;\\n  for (let i in val) &#123;\\n    if (val[i].name.toLowerCase() === &#x27;content-security-policy&#x27;) &#123;\\n      let s = val[i].value;\\n      s = s.replace(/googleapis\\\\.com/g, &#x27;$&amp; https://gapis.geekzu.org&#x27;);\\n      s = s.replace(/recaptcha\\\\.google\\\\.com/g, &#x27;$&amp; https://recaptcha.net&#x27;);\\n      s = s.replace(/google\\\\.com/g, &#x27;$&amp; https://recaptcha.net&#x27;);\\n      s = s.replace(/gstatic\\\\.com/g, &#x27;$&amp; https://*.gstatic.cn&#x27;);\\n      val[i].value = s;\\n    &#125;\\n  &#125;\\n&#125;&quot;,<br>\t\t\t&quot;group&quot;: &quot;未分组&quot;<br>\t\t&#125;<br>\t],<br>\t&quot;receiveBody&quot;: []<br>&#125;<br></code></pre></td></tr></table></figure>\n\n<p><img src=\"https://cdnn.boochi.cn/gh/inkdust-dev/ink-oss@main/qexo-upload/24/8/image_18ab541cb20291a0419ffeb09a1c83bf.png\" alt=\"https://cdnn.boochi.cn/gh/inkdust-dev/ink-oss@main/qexo-upload/24/8/image_18ab541cb20291a0419ffeb09a1c83bf.png\"></p>\n<p>注册，并登录ZeroSSL。点击<code>Developers</code>,<code>EAB Credentials for ACME Clients</code>下方的<code>Generate</code>,保存好生成的<strong>EAB KID</strong>和<strong>EAB HMAC Key</strong>。<br><img src=\"https://cdnn.boochi.cn/gh/inkdust-dev/ink-oss@main/qexo-upload/24/8/image_d8176d5822392d6870b8b1f38becddd3.png\" alt=\"https://cdnn.boochi.cn/gh/inkdust-dev/ink-oss@main/qexo-upload/24/8/image_d8176d5822392d6870b8b1f38becddd3.png\"></p>\n<p>任意点击下列一个网页打开签发SSL：</p>\n<p><a href=\"https://xiangyuecn.github.io/ACME-HTML-Web-Browser-Client/ACME-HTML-Web-Browser-Client.html\">https://xiangyuecn.github.io/ACME-HTML-Web-Browser-Client/ACME-HTML-Web-Browser-Client.html</a> （作者Github Pages）</p>\n<p><a href=\"https://ssl.dev.inkdust.top/\">https://ssl.dev.inkdust.top/</a> （本人Vercel）</p>\n<h3 id=\"步骤二：选择证书颁发机构\"><a href=\"#步骤二：选择证书颁发机构\" class=\"headerlink\" title=\"步骤二：选择证书颁发机构\"></a>步骤二：选择证书颁发机构</h3><p>在“证书颁发机构 ACME(v2, RFC 8555) 服务URL”下选择ZeroSSL，点击 <code>读取服务目录</code>并等待出现：</p>\n<p>测试此ACME服务对浏览器的支持情况，发生错误：GetNonce:** <strong>此ACME服务对浏览器访问支持太差，无法跨域获取Replay-Nonce响应头。</strong></p>\n<p>关闭改网页，直接打开<a href=\"https://acme.zerossl.com/v2/DV90/directory%EF%BC%8C%E6%8C%89%60F12%60%E9%94%AE%E6%89%93%E5%BC%80%E5%BC%80%E5%8F%91%E8%80%85%E6%8E%A7%E5%88%B6%E5%8F%B0%EF%BC%8C%E7%82%B9%E5%87%BB%60%E6%8E%A7%E5%88%B6%E5%8F%B0%60\">https://acme.zerossl.com/v2/DV90/directory，按`F12`键打开开发者控制台，点击`控制台`</a> 或<code>Console</code>，输入以下代码（代码安全开源）：</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br><span class=\"line\">121</span><br><span class=\"line\">122</span><br><span class=\"line\">123</span><br><span class=\"line\">124</span><br><span class=\"line\">125</span><br><span class=\"line\">126</span><br><span class=\"line\">127</span><br><span class=\"line\">128</span><br><span class=\"line\">129</span><br><span class=\"line\">130</span><br><span class=\"line\">131</span><br><span class=\"line\">132</span><br><span class=\"line\">133</span><br><span class=\"line\">134</span><br><span class=\"line\">135</span><br><span class=\"line\">136</span><br><span class=\"line\">137</span><br><span class=\"line\">138</span><br><span class=\"line\">139</span><br><span class=\"line\">140</span><br><span class=\"line\">141</span><br><span class=\"line\">142</span><br><span class=\"line\">143</span><br><span class=\"line\">144</span><br><span class=\"line\">145</span><br><span class=\"line\">146</span><br><span class=\"line\">147</span><br><span class=\"line\">148</span><br><span class=\"line\">149</span><br><span class=\"line\">150</span><br><span class=\"line\">151</span><br><span class=\"line\">152</span><br><span class=\"line\">153</span><br><span class=\"line\">154</span><br><span class=\"line\">155</span><br><span class=\"line\">156</span><br><span class=\"line\">157</span><br><span class=\"line\">158</span><br><span class=\"line\">159</span><br><span class=\"line\">160</span><br><span class=\"line\">161</span><br><span class=\"line\">162</span><br><span class=\"line\">163</span><br><span class=\"line\">164</span><br><span class=\"line\">165</span><br><span class=\"line\">166</span><br><span class=\"line\">167</span><br><span class=\"line\">168</span><br><span class=\"line\">169</span><br><span class=\"line\">170</span><br><span class=\"line\">171</span><br><span class=\"line\">172</span><br><span class=\"line\">173</span><br><span class=\"line\">174</span><br><span class=\"line\">175</span><br><span class=\"line\">176</span><br><span class=\"line\">177</span><br><span class=\"line\">178</span><br><span class=\"line\">179</span><br><span class=\"line\">180</span><br><span class=\"line\">181</span><br><span class=\"line\">182</span><br><span class=\"line\">183</span><br><span class=\"line\">184</span><br><span class=\"line\">185</span><br><span class=\"line\">186</span><br><span class=\"line\">187</span><br><span class=\"line\">188</span><br><span class=\"line\">189</span><br><span class=\"line\">190</span><br><span class=\"line\">191</span><br><span class=\"line\">192</span><br><span class=\"line\">193</span><br><span class=\"line\">194</span><br><span class=\"line\">195</span><br><span class=\"line\">196</span><br><span class=\"line\">197</span><br><span class=\"line\">198</span><br><span class=\"line\">199</span><br><span class=\"line\">200</span><br><span class=\"line\">201</span><br><span class=\"line\">202</span><br><span class=\"line\">203</span><br><span class=\"line\">204</span><br><span class=\"line\">205</span><br><span class=\"line\">206</span><br><span class=\"line\">207</span><br><span class=\"line\">208</span><br><span class=\"line\">209</span><br><span class=\"line\">210</span><br><span class=\"line\">211</span><br><span class=\"line\">212</span><br><span class=\"line\">213</span><br><span class=\"line\">214</span><br><span class=\"line\">215</span><br><span class=\"line\">216</span><br><span class=\"line\">217</span><br><span class=\"line\">218</span><br><span class=\"line\">219</span><br><span class=\"line\">220</span><br><span class=\"line\">221</span><br><span class=\"line\">222</span><br><span class=\"line\">223</span><br><span class=\"line\">224</span><br><span class=\"line\">225</span><br><span class=\"line\">226</span><br><span class=\"line\">227</span><br><span class=\"line\">228</span><br><span class=\"line\">229</span><br><span class=\"line\">230</span><br><span class=\"line\">231</span><br><span class=\"line\">232</span><br><span class=\"line\">233</span><br><span class=\"line\">234</span><br><span class=\"line\">235</span><br><span class=\"line\">236</span><br><span class=\"line\">237</span><br><span class=\"line\">238</span><br><span class=\"line\">239</span><br><span class=\"line\">240</span><br><span class=\"line\">241</span><br><span class=\"line\">242</span><br><span class=\"line\">243</span><br><span class=\"line\">244</span><br><span class=\"line\">245</span><br><span class=\"line\">246</span><br><span class=\"line\">247</span><br><span class=\"line\">248</span><br><span class=\"line\">249</span><br><span class=\"line\">250</span><br><span class=\"line\">251</span><br><span class=\"line\">252</span><br><span class=\"line\">253</span><br><span class=\"line\">254</span><br><span class=\"line\">255</span><br><span class=\"line\">256</span><br><span class=\"line\">257</span><br><span class=\"line\">258</span><br><span class=\"line\">259</span><br><span class=\"line\">260</span><br><span class=\"line\">261</span><br><span class=\"line\">262</span><br><span class=\"line\">263</span><br><span class=\"line\">264</span><br><span class=\"line\">265</span><br><span class=\"line\">266</span><br><span class=\"line\">267</span><br><span class=\"line\">268</span><br><span class=\"line\">269</span><br><span class=\"line\">270</span><br><span class=\"line\">271</span><br><span class=\"line\">272</span><br><span class=\"line\">273</span><br><span class=\"line\">274</span><br><span class=\"line\">275</span><br><span class=\"line\">276</span><br><span class=\"line\">277</span><br><span class=\"line\">278</span><br><span class=\"line\">279</span><br><span class=\"line\">280</span><br><span class=\"line\">281</span><br><span class=\"line\">282</span><br><span class=\"line\">283</span><br><span class=\"line\">284</span><br><span class=\"line\">285</span><br><span class=\"line\">286</span><br><span class=\"line\">287</span><br><span class=\"line\">288</span><br><span class=\"line\">289</span><br><span class=\"line\">290</span><br><span class=\"line\">291</span><br><span class=\"line\">292</span><br><span class=\"line\">293</span><br><span class=\"line\">294</span><br><span class=\"line\">295</span><br><span class=\"line\">296</span><br><span class=\"line\">297</span><br><span class=\"line\">298</span><br><span class=\"line\">299</span><br><span class=\"line\">300</span><br><span class=\"line\">301</span><br><span class=\"line\">302</span><br><span class=\"line\">303</span><br><span class=\"line\">304</span><br><span class=\"line\">305</span><br><span class=\"line\">306</span><br><span class=\"line\">307</span><br><span class=\"line\">308</span><br><span class=\"line\">309</span><br><span class=\"line\">310</span><br><span class=\"line\">311</span><br><span class=\"line\">312</span><br><span class=\"line\">313</span><br><span class=\"line\">314</span><br><span class=\"line\">315</span><br><span class=\"line\">316</span><br><span class=\"line\">317</span><br><span class=\"line\">318</span><br><span class=\"line\">319</span><br><span class=\"line\">320</span><br><span class=\"line\">321</span><br><span class=\"line\">322</span><br><span class=\"line\">323</span><br><span class=\"line\">324</span><br><span class=\"line\">325</span><br><span class=\"line\">326</span><br><span class=\"line\">327</span><br><span class=\"line\">328</span><br><span class=\"line\">329</span><br><span class=\"line\">330</span><br><span class=\"line\">331</span><br><span class=\"line\">332</span><br><span class=\"line\">333</span><br><span class=\"line\">334</span><br><span class=\"line\">335</span><br><span class=\"line\">336</span><br><span class=\"line\">337</span><br><span class=\"line\">338</span><br><span class=\"line\">339</span><br><span class=\"line\">340</span><br><span class=\"line\">341</span><br><span class=\"line\">342</span><br><span class=\"line\">343</span><br><span class=\"line\">344</span><br><span class=\"line\">345</span><br><span class=\"line\">346</span><br><span class=\"line\">347</span><br><span class=\"line\">348</span><br><span class=\"line\">349</span><br><span class=\"line\">350</span><br><span class=\"line\">351</span><br><span class=\"line\">352</span><br><span class=\"line\">353</span><br><span class=\"line\">354</span><br><span class=\"line\">355</span><br><span class=\"line\">356</span><br><span class=\"line\">357</span><br><span class=\"line\">358</span><br><span class=\"line\">359</span><br><span class=\"line\">360</span><br><span class=\"line\">361</span><br><span class=\"line\">362</span><br><span class=\"line\">363</span><br><span class=\"line\">364</span><br><span class=\"line\">365</span><br><span class=\"line\">366</span><br><span class=\"line\">367</span><br><span class=\"line\">368</span><br><span class=\"line\">369</span><br><span class=\"line\">370</span><br><span class=\"line\">371</span><br><span class=\"line\">372</span><br><span class=\"line\">373</span><br><span class=\"line\">374</span><br><span class=\"line\">375</span><br><span class=\"line\">376</span><br><span class=\"line\">377</span><br><span class=\"line\">378</span><br><span class=\"line\">379</span><br><span class=\"line\">380</span><br><span class=\"line\">381</span><br><span class=\"line\">382</span><br><span class=\"line\">383</span><br><span class=\"line\">384</span><br><span class=\"line\">385</span><br><span class=\"line\">386</span><br><span class=\"line\">387</span><br><span class=\"line\">388</span><br><span class=\"line\">389</span><br><span class=\"line\">390</span><br><span class=\"line\">391</span><br><span class=\"line\">392</span><br><span class=\"line\">393</span><br><span class=\"line\">394</span><br><span class=\"line\">395</span><br><span class=\"line\">396</span><br><span class=\"line\">397</span><br><span class=\"line\">398</span><br><span class=\"line\">399</span><br><span class=\"line\">400</span><br><span class=\"line\">401</span><br><span class=\"line\">402</span><br><span class=\"line\">403</span><br><span class=\"line\">404</span><br><span class=\"line\">405</span><br><span class=\"line\">406</span><br><span class=\"line\">407</span><br><span class=\"line\">408</span><br><span class=\"line\">409</span><br><span class=\"line\">410</span><br><span class=\"line\">411</span><br><span class=\"line\">412</span><br><span class=\"line\">413</span><br><span class=\"line\">414</span><br><span class=\"line\">415</span><br><span class=\"line\">416</span><br><span class=\"line\">417</span><br><span class=\"line\">418</span><br><span class=\"line\">419</span><br><span class=\"line\">420</span><br><span class=\"line\">421</span><br><span class=\"line\">422</span><br><span class=\"line\">423</span><br><span class=\"line\">424</span><br><span class=\"line\">425</span><br><span class=\"line\">426</span><br><span class=\"line\">427</span><br><span class=\"line\">428</span><br><span class=\"line\">429</span><br><span class=\"line\">430</span><br><span class=\"line\">431</span><br><span class=\"line\">432</span><br><span class=\"line\">433</span><br><span class=\"line\">434</span><br><span class=\"line\">435</span><br><span class=\"line\">436</span><br><span class=\"line\">437</span><br><span class=\"line\">438</span><br><span class=\"line\">439</span><br><span class=\"line\">440</span><br><span class=\"line\">441</span><br><span class=\"line\">442</span><br><span class=\"line\">443</span><br><span class=\"line\">444</span><br><span class=\"line\">445</span><br><span class=\"line\">446</span><br><span class=\"line\">447</span><br><span class=\"line\">448</span><br><span class=\"line\">449</span><br><span class=\"line\">450</span><br><span class=\"line\">451</span><br><span class=\"line\">452</span><br><span class=\"line\">453</span><br><span class=\"line\">454</span><br><span class=\"line\">455</span><br><span class=\"line\">456</span><br><span class=\"line\">457</span><br><span class=\"line\">458</span><br><span class=\"line\">459</span><br><span class=\"line\">460</span><br><span class=\"line\">461</span><br><span class=\"line\">462</span><br><span class=\"line\">463</span><br><span class=\"line\">464</span><br><span class=\"line\">465</span><br><span class=\"line\">466</span><br><span class=\"line\">467</span><br><span class=\"line\">468</span><br><span class=\"line\">469</span><br><span class=\"line\">470</span><br><span class=\"line\">471</span><br><span class=\"line\">472</span><br><span class=\"line\">473</span><br><span class=\"line\">474</span><br><span class=\"line\">475</span><br><span class=\"line\">476</span><br><span class=\"line\">477</span><br><span class=\"line\">478</span><br><span class=\"line\">479</span><br><span class=\"line\">480</span><br><span class=\"line\">481</span><br><span class=\"line\">482</span><br><span class=\"line\">483</span><br><span class=\"line\">484</span><br><span class=\"line\">485</span><br><span class=\"line\">486</span><br><span class=\"line\">487</span><br><span class=\"line\">488</span><br><span class=\"line\">489</span><br><span class=\"line\">490</span><br><span class=\"line\">491</span><br><span class=\"line\">492</span><br><span class=\"line\">493</span><br><span class=\"line\">494</span><br><span class=\"line\">495</span><br><span class=\"line\">496</span><br><span class=\"line\">497</span><br><span class=\"line\">498</span><br><span class=\"line\">499</span><br><span class=\"line\">500</span><br><span class=\"line\">501</span><br><span class=\"line\">502</span><br><span class=\"line\">503</span><br><span class=\"line\">504</span><br><span class=\"line\">505</span><br><span class=\"line\">506</span><br><span class=\"line\">507</span><br><span class=\"line\">508</span><br><span class=\"line\">509</span><br><span class=\"line\">510</span><br><span class=\"line\">511</span><br><span class=\"line\">512</span><br><span class=\"line\">513</span><br><span class=\"line\">514</span><br><span class=\"line\">515</span><br><span class=\"line\">516</span><br><span class=\"line\">517</span><br><span class=\"line\">518</span><br><span class=\"line\">519</span><br><span class=\"line\">520</span><br><span class=\"line\">521</span><br><span class=\"line\">522</span><br><span class=\"line\">523</span><br><span class=\"line\">524</span><br><span class=\"line\">525</span><br><span class=\"line\">526</span><br><span class=\"line\">527</span><br><span class=\"line\">528</span><br><span class=\"line\">529</span><br><span class=\"line\">530</span><br><span class=\"line\">531</span><br><span class=\"line\">532</span><br><span class=\"line\">533</span><br><span class=\"line\">534</span><br><span class=\"line\">535</span><br><span class=\"line\">536</span><br><span class=\"line\">537</span><br><span class=\"line\">538</span><br><span class=\"line\">539</span><br><span class=\"line\">540</span><br><span class=\"line\">541</span><br><span class=\"line\">542</span><br><span class=\"line\">543</span><br><span class=\"line\">544</span><br><span class=\"line\">545</span><br><span class=\"line\">546</span><br><span class=\"line\">547</span><br><span class=\"line\">548</span><br><span class=\"line\">549</span><br><span class=\"line\">550</span><br><span class=\"line\">551</span><br><span class=\"line\">552</span><br><span class=\"line\">553</span><br><span class=\"line\">554</span><br><span class=\"line\">555</span><br><span class=\"line\">556</span><br><span class=\"line\">557</span><br><span class=\"line\">558</span><br><span class=\"line\">559</span><br><span class=\"line\">560</span><br><span class=\"line\">561</span><br><span class=\"line\">562</span><br><span class=\"line\">563</span><br><span class=\"line\">564</span><br><span class=\"line\">565</span><br><span class=\"line\">566</span><br><span class=\"line\">567</span><br><span class=\"line\">568</span><br><span class=\"line\">569</span><br><span class=\"line\">570</span><br><span class=\"line\">571</span><br><span class=\"line\">572</span><br><span class=\"line\">573</span><br><span class=\"line\">574</span><br><span class=\"line\">575</span><br><span class=\"line\">576</span><br><span class=\"line\">577</span><br><span class=\"line\">578</span><br><span class=\"line\">579</span><br><span class=\"line\">580</span><br><span class=\"line\">581</span><br><span class=\"line\">582</span><br><span class=\"line\">583</span><br><span class=\"line\">584</span><br><span class=\"line\">585</span><br><span class=\"line\">586</span><br><span class=\"line\">587</span><br><span class=\"line\">588</span><br><span class=\"line\">589</span><br><span class=\"line\">590</span><br><span class=\"line\">591</span><br><span class=\"line\">592</span><br><span class=\"line\">593</span><br><span class=\"line\">594</span><br><span class=\"line\">595</span><br><span class=\"line\">596</span><br><span class=\"line\">597</span><br><span class=\"line\">598</span><br><span class=\"line\">599</span><br><span class=\"line\">600</span><br><span class=\"line\">601</span><br><span class=\"line\">602</span><br><span class=\"line\">603</span><br><span class=\"line\">604</span><br><span class=\"line\">605</span><br><span class=\"line\">606</span><br><span class=\"line\">607</span><br><span class=\"line\">608</span><br><span class=\"line\">609</span><br><span class=\"line\">610</span><br><span class=\"line\">611</span><br><span class=\"line\">612</span><br><span class=\"line\">613</span><br><span class=\"line\">614</span><br><span class=\"line\">615</span><br><span class=\"line\">616</span><br><span class=\"line\">617</span><br><span class=\"line\">618</span><br><span class=\"line\">619</span><br><span class=\"line\">620</span><br><span class=\"line\">621</span><br><span class=\"line\">622</span><br><span class=\"line\">623</span><br><span class=\"line\">624</span><br><span class=\"line\">625</span><br><span class=\"line\">626</span><br><span class=\"line\">627</span><br><span class=\"line\">628</span><br><span class=\"line\">629</span><br><span class=\"line\">630</span><br><span class=\"line\">631</span><br><span class=\"line\">632</span><br><span class=\"line\">633</span><br><span class=\"line\">634</span><br><span class=\"line\">635</span><br><span class=\"line\">636</span><br><span class=\"line\">637</span><br><span class=\"line\">638</span><br><span class=\"line\">639</span><br><span class=\"line\">640</span><br><span class=\"line\">641</span><br><span class=\"line\">642</span><br><span class=\"line\">643</span><br><span class=\"line\">644</span><br><span class=\"line\">645</span><br><span class=\"line\">646</span><br><span class=\"line\">647</span><br><span class=\"line\">648</span><br><span class=\"line\">649</span><br><span class=\"line\">650</span><br><span class=\"line\">651</span><br><span class=\"line\">652</span><br><span class=\"line\">653</span><br><span class=\"line\">654</span><br><span class=\"line\">655</span><br><span class=\"line\">656</span><br><span class=\"line\">657</span><br><span class=\"line\">658</span><br><span class=\"line\">659</span><br><span class=\"line\">660</span><br><span class=\"line\">661</span><br><span class=\"line\">662</span><br><span class=\"line\">663</span><br><span class=\"line\">664</span><br><span class=\"line\">665</span><br><span class=\"line\">666</span><br><span class=\"line\">667</span><br><span class=\"line\">668</span><br><span class=\"line\">669</span><br><span class=\"line\">670</span><br><span class=\"line\">671</span><br><span class=\"line\">672</span><br><span class=\"line\">673</span><br><span class=\"line\">674</span><br><span class=\"line\">675</span><br><span class=\"line\">676</span><br><span class=\"line\">677</span><br><span class=\"line\">678</span><br><span class=\"line\">679</span><br><span class=\"line\">680</span><br><span class=\"line\">681</span><br><span class=\"line\">682</span><br><span class=\"line\">683</span><br><span class=\"line\">684</span><br><span class=\"line\">685</span><br><span class=\"line\">686</span><br><span class=\"line\">687</span><br><span class=\"line\">688</span><br><span class=\"line\">689</span><br><span class=\"line\">690</span><br><span class=\"line\">691</span><br><span class=\"line\">692</span><br><span class=\"line\">693</span><br><span class=\"line\">694</span><br><span class=\"line\">695</span><br><span class=\"line\">696</span><br><span class=\"line\">697</span><br><span class=\"line\">698</span><br><span class=\"line\">699</span><br><span class=\"line\">700</span><br><span class=\"line\">701</span><br><span class=\"line\">702</span><br><span class=\"line\">703</span><br><span class=\"line\">704</span><br><span class=\"line\">705</span><br><span class=\"line\">706</span><br><span class=\"line\">707</span><br><span class=\"line\">708</span><br><span class=\"line\">709</span><br><span class=\"line\">710</span><br><span class=\"line\">711</span><br><span class=\"line\">712</span><br><span class=\"line\">713</span><br><span class=\"line\">714</span><br><span class=\"line\">715</span><br><span class=\"line\">716</span><br><span class=\"line\">717</span><br><span class=\"line\">718</span><br><span class=\"line\">719</span><br><span class=\"line\">720</span><br><span class=\"line\">721</span><br><span class=\"line\">722</span><br><span class=\"line\">723</span><br><span class=\"line\">724</span><br><span class=\"line\">725</span><br><span class=\"line\">726</span><br><span class=\"line\">727</span><br><span class=\"line\">728</span><br><span class=\"line\">729</span><br><span class=\"line\">730</span><br><span class=\"line\">731</span><br><span class=\"line\">732</span><br><span class=\"line\">733</span><br><span class=\"line\">734</span><br><span class=\"line\">735</span><br><span class=\"line\">736</span><br><span class=\"line\">737</span><br><span class=\"line\">738</span><br><span class=\"line\">739</span><br><span class=\"line\">740</span><br><span class=\"line\">741</span><br><span class=\"line\">742</span><br><span class=\"line\">743</span><br><span class=\"line\">744</span><br><span class=\"line\">745</span><br><span class=\"line\">746</span><br><span class=\"line\">747</span><br><span class=\"line\">748</span><br><span class=\"line\">749</span><br><span class=\"line\">750</span><br><span class=\"line\">751</span><br><span class=\"line\">752</span><br><span class=\"line\">753</span><br><span class=\"line\">754</span><br><span class=\"line\">755</span><br><span class=\"line\">756</span><br><span class=\"line\">757</span><br><span class=\"line\">758</span><br><span class=\"line\">759</span><br><span class=\"line\">760</span><br><span class=\"line\">761</span><br><span class=\"line\">762</span><br><span class=\"line\">763</span><br><span class=\"line\">764</span><br><span class=\"line\">765</span><br><span class=\"line\">766</span><br><span class=\"line\">767</span><br><span class=\"line\">768</span><br><span class=\"line\">769</span><br><span class=\"line\">770</span><br><span class=\"line\">771</span><br><span class=\"line\">772</span><br><span class=\"line\">773</span><br><span class=\"line\">774</span><br><span class=\"line\">775</span><br><span class=\"line\">776</span><br><span class=\"line\">777</span><br><span class=\"line\">778</span><br><span class=\"line\">779</span><br><span class=\"line\">780</span><br><span class=\"line\">781</span><br><span class=\"line\">782</span><br><span class=\"line\">783</span><br><span class=\"line\">784</span><br><span class=\"line\">785</span><br><span class=\"line\">786</span><br><span class=\"line\">787</span><br><span class=\"line\">788</span><br><span class=\"line\">789</span><br><span class=\"line\">790</span><br><span class=\"line\">791</span><br><span class=\"line\">792</span><br><span class=\"line\">793</span><br><span class=\"line\">794</span><br><span class=\"line\">795</span><br><span class=\"line\">796</span><br><span class=\"line\">797</span><br><span class=\"line\">798</span><br><span class=\"line\">799</span><br><span class=\"line\">800</span><br><span class=\"line\">801</span><br><span class=\"line\">802</span><br><span class=\"line\">803</span><br><span class=\"line\">804</span><br><span class=\"line\">805</span><br><span class=\"line\">806</span><br><span class=\"line\">807</span><br><span class=\"line\">808</span><br><span class=\"line\">809</span><br><span class=\"line\">810</span><br><span class=\"line\">811</span><br><span class=\"line\">812</span><br><span class=\"line\">813</span><br><span class=\"line\">814</span><br><span class=\"line\">815</span><br><span class=\"line\">816</span><br><span class=\"line\">817</span><br><span class=\"line\">818</span><br><span class=\"line\">819</span><br><span class=\"line\">820</span><br><span class=\"line\">821</span><br><span class=\"line\">822</span><br><span class=\"line\">823</span><br><span class=\"line\">824</span><br><span class=\"line\">825</span><br><span class=\"line\">826</span><br><span class=\"line\">827</span><br><span class=\"line\">828</span><br><span class=\"line\">829</span><br><span class=\"line\">830</span><br><span class=\"line\">831</span><br><span class=\"line\">832</span><br><span class=\"line\">833</span><br><span class=\"line\">834</span><br><span class=\"line\">835</span><br><span class=\"line\">836</span><br><span class=\"line\">837</span><br><span class=\"line\">838</span><br><span class=\"line\">839</span><br><span class=\"line\">840</span><br><span class=\"line\">841</span><br><span class=\"line\">842</span><br><span class=\"line\">843</span><br><span class=\"line\">844</span><br><span class=\"line\">845</span><br><span class=\"line\">846</span><br><span class=\"line\">847</span><br><span class=\"line\">848</span><br><span class=\"line\">849</span><br><span class=\"line\">850</span><br><span class=\"line\">851</span><br><span class=\"line\">852</span><br><span class=\"line\">853</span><br><span class=\"line\">854</span><br><span class=\"line\">855</span><br><span class=\"line\">856</span><br><span class=\"line\">857</span><br><span class=\"line\">858</span><br><span class=\"line\">859</span><br><span class=\"line\">860</span><br><span class=\"line\">861</span><br><span class=\"line\">862</span><br><span class=\"line\">863</span><br><span class=\"line\">864</span><br><span class=\"line\">865</span><br><span class=\"line\">866</span><br><span class=\"line\">867</span><br><span class=\"line\">868</span><br><span class=\"line\">869</span><br><span class=\"line\">870</span><br><span class=\"line\">871</span><br><span class=\"line\">872</span><br><span class=\"line\">873</span><br><span class=\"line\">874</span><br><span class=\"line\">875</span><br><span class=\"line\">876</span><br><span class=\"line\">877</span><br><span class=\"line\">878</span><br><span class=\"line\">879</span><br><span class=\"line\">880</span><br><span class=\"line\">881</span><br><span class=\"line\">882</span><br><span class=\"line\">883</span><br><span class=\"line\">884</span><br><span class=\"line\">885</span><br><span class=\"line\">886</span><br><span class=\"line\">887</span><br><span class=\"line\">888</span><br><span class=\"line\">889</span><br><span class=\"line\">890</span><br><span class=\"line\">891</span><br><span class=\"line\">892</span><br><span class=\"line\">893</span><br><span class=\"line\">894</span><br><span class=\"line\">895</span><br><span class=\"line\">896</span><br><span class=\"line\">897</span><br><span class=\"line\">898</span><br><span class=\"line\">899</span><br><span class=\"line\">900</span><br><span class=\"line\">901</span><br><span class=\"line\">902</span><br><span class=\"line\">903</span><br><span class=\"line\">904</span><br><span class=\"line\">905</span><br><span class=\"line\">906</span><br><span class=\"line\">907</span><br><span class=\"line\">908</span><br><span class=\"line\">909</span><br><span class=\"line\">910</span><br><span class=\"line\">911</span><br><span class=\"line\">912</span><br><span class=\"line\">913</span><br><span class=\"line\">914</span><br><span class=\"line\">915</span><br><span class=\"line\">916</span><br><span class=\"line\">917</span><br><span class=\"line\">918</span><br><span class=\"line\">919</span><br><span class=\"line\">920</span><br><span class=\"line\">921</span><br><span class=\"line\">922</span><br><span class=\"line\">923</span><br><span class=\"line\">924</span><br><span class=\"line\">925</span><br><span class=\"line\">926</span><br><span class=\"line\">927</span><br><span class=\"line\">928</span><br><span class=\"line\">929</span><br><span class=\"line\">930</span><br><span class=\"line\">931</span><br><span class=\"line\">932</span><br><span class=\"line\">933</span><br><span class=\"line\">934</span><br><span class=\"line\">935</span><br><span class=\"line\">936</span><br><span class=\"line\">937</span><br><span class=\"line\">938</span><br><span class=\"line\">939</span><br><span class=\"line\">940</span><br><span class=\"line\">941</span><br><span class=\"line\">942</span><br><span class=\"line\">943</span><br><span class=\"line\">944</span><br><span class=\"line\">945</span><br><span class=\"line\">946</span><br><span class=\"line\">947</span><br><span class=\"line\">948</span><br><span class=\"line\">949</span><br><span class=\"line\">950</span><br><span class=\"line\">951</span><br><span class=\"line\">952</span><br><span class=\"line\">953</span><br><span class=\"line\">954</span><br><span class=\"line\">955</span><br><span class=\"line\">956</span><br><span class=\"line\">957</span><br><span class=\"line\">958</span><br><span class=\"line\">959</span><br><span class=\"line\">960</span><br><span class=\"line\">961</span><br><span class=\"line\">962</span><br><span class=\"line\">963</span><br><span class=\"line\">964</span><br><span class=\"line\">965</span><br><span class=\"line\">966</span><br><span class=\"line\">967</span><br><span class=\"line\">968</span><br><span class=\"line\">969</span><br><span class=\"line\">970</span><br><span class=\"line\">971</span><br><span class=\"line\">972</span><br><span class=\"line\">973</span><br><span class=\"line\">974</span><br><span class=\"line\">975</span><br><span class=\"line\">976</span><br><span class=\"line\">977</span><br><span class=\"line\">978</span><br><span class=\"line\">979</span><br><span class=\"line\">980</span><br><span class=\"line\">981</span><br><span class=\"line\">982</span><br><span class=\"line\">983</span><br><span class=\"line\">984</span><br><span class=\"line\">985</span><br><span class=\"line\">986</span><br><span class=\"line\">987</span><br><span class=\"line\">988</span><br><span class=\"line\">989</span><br><span class=\"line\">990</span><br><span class=\"line\">991</span><br><span class=\"line\">992</span><br><span class=\"line\">993</span><br><span class=\"line\">994</span><br><span class=\"line\">995</span><br><span class=\"line\">996</span><br><span class=\"line\">997</span><br><span class=\"line\">998</span><br><span class=\"line\">999</span><br><span class=\"line\">1000</span><br><span class=\"line\">1001</span><br><span class=\"line\">1002</span><br><span class=\"line\">1003</span><br><span class=\"line\">1004</span><br><span class=\"line\">1005</span><br><span class=\"line\">1006</span><br><span class=\"line\">1007</span><br><span class=\"line\">1008</span><br><span class=\"line\">1009</span><br><span class=\"line\">1010</span><br><span class=\"line\">1011</span><br><span class=\"line\">1012</span><br><span class=\"line\">1013</span><br><span class=\"line\">1014</span><br><span class=\"line\">1015</span><br><span class=\"line\">1016</span><br><span class=\"line\">1017</span><br><span class=\"line\">1018</span><br><span class=\"line\">1019</span><br><span class=\"line\">1020</span><br><span class=\"line\">1021</span><br><span class=\"line\">1022</span><br><span class=\"line\">1023</span><br><span class=\"line\">1024</span><br><span class=\"line\">1025</span><br><span class=\"line\">1026</span><br><span class=\"line\">1027</span><br><span class=\"line\">1028</span><br><span class=\"line\">1029</span><br><span class=\"line\">1030</span><br><span class=\"line\">1031</span><br><span class=\"line\">1032</span><br><span class=\"line\">1033</span><br><span class=\"line\">1034</span><br><span class=\"line\">1035</span><br><span class=\"line\">1036</span><br><span class=\"line\">1037</span><br><span class=\"line\">1038</span><br><span class=\"line\">1039</span><br><span class=\"line\">1040</span><br><span class=\"line\">1041</span><br><span class=\"line\">1042</span><br><span class=\"line\">1043</span><br><span class=\"line\">1044</span><br><span class=\"line\">1045</span><br><span class=\"line\">1046</span><br><span class=\"line\">1047</span><br><span class=\"line\">1048</span><br><span class=\"line\">1049</span><br><span class=\"line\">1050</span><br><span class=\"line\">1051</span><br><span class=\"line\">1052</span><br><span class=\"line\">1053</span><br><span class=\"line\">1054</span><br><span class=\"line\">1055</span><br><span class=\"line\">1056</span><br><span class=\"line\">1057</span><br><span class=\"line\">1058</span><br><span class=\"line\">1059</span><br><span class=\"line\">1060</span><br><span class=\"line\">1061</span><br><span class=\"line\">1062</span><br><span class=\"line\">1063</span><br><span class=\"line\">1064</span><br><span class=\"line\">1065</span><br><span class=\"line\">1066</span><br><span class=\"line\">1067</span><br><span class=\"line\">1068</span><br><span class=\"line\">1069</span><br><span class=\"line\">1070</span><br><span class=\"line\">1071</span><br><span class=\"line\">1072</span><br><span class=\"line\">1073</span><br><span class=\"line\">1074</span><br><span class=\"line\">1075</span><br><span class=\"line\">1076</span><br><span class=\"line\">1077</span><br><span class=\"line\">1078</span><br><span class=\"line\">1079</span><br><span class=\"line\">1080</span><br><span class=\"line\">1081</span><br><span class=\"line\">1082</span><br><span class=\"line\">1083</span><br><span class=\"line\">1084</span><br><span class=\"line\">1085</span><br><span class=\"line\">1086</span><br><span class=\"line\">1087</span><br><span class=\"line\">1088</span><br><span class=\"line\">1089</span><br><span class=\"line\">1090</span><br><span class=\"line\">1091</span><br><span class=\"line\">1092</span><br><span class=\"line\">1093</span><br><span class=\"line\">1094</span><br><span class=\"line\">1095</span><br><span class=\"line\">1096</span><br><span class=\"line\">1097</span><br><span class=\"line\">1098</span><br><span class=\"line\">1099</span><br><span class=\"line\">1100</span><br><span class=\"line\">1101</span><br><span class=\"line\">1102</span><br><span class=\"line\">1103</span><br><span class=\"line\">1104</span><br><span class=\"line\">1105</span><br><span class=\"line\">1106</span><br><span class=\"line\">1107</span><br><span class=\"line\">1108</span><br><span class=\"line\">1109</span><br><span class=\"line\">1110</span><br><span class=\"line\">1111</span><br><span class=\"line\">1112</span><br><span class=\"line\">1113</span><br><span class=\"line\">1114</span><br><span class=\"line\">1115</span><br><span class=\"line\">1116</span><br><span class=\"line\">1117</span><br><span class=\"line\">1118</span><br><span class=\"line\">1119</span><br><span class=\"line\">1120</span><br><span class=\"line\">1121</span><br><span class=\"line\">1122</span><br><span class=\"line\">1123</span><br><span class=\"line\">1124</span><br><span class=\"line\">1125</span><br><span class=\"line\">1126</span><br><span class=\"line\">1127</span><br><span class=\"line\">1128</span><br><span class=\"line\">1129</span><br><span class=\"line\">1130</span><br><span class=\"line\">1131</span><br><span class=\"line\">1132</span><br><span class=\"line\">1133</span><br><span class=\"line\">1134</span><br><span class=\"line\">1135</span><br><span class=\"line\">1136</span><br><span class=\"line\">1137</span><br><span class=\"line\">1138</span><br><span class=\"line\">1139</span><br><span class=\"line\">1140</span><br><span class=\"line\">1141</span><br><span class=\"line\">1142</span><br><span class=\"line\">1143</span><br><span class=\"line\">1144</span><br><span class=\"line\">1145</span><br><span class=\"line\">1146</span><br><span class=\"line\">1147</span><br><span class=\"line\">1148</span><br><span class=\"line\">1149</span><br><span class=\"line\">1150</span><br><span class=\"line\">1151</span><br><span class=\"line\">1152</span><br><span class=\"line\">1153</span><br><span class=\"line\">1154</span><br><span class=\"line\">1155</span><br><span class=\"line\">1156</span><br><span class=\"line\">1157</span><br><span class=\"line\">1158</span><br><span class=\"line\">1159</span><br><span class=\"line\">1160</span><br><span class=\"line\">1161</span><br><span class=\"line\">1162</span><br><span class=\"line\">1163</span><br><span class=\"line\">1164</span><br><span class=\"line\">1165</span><br><span class=\"line\">1166</span><br><span class=\"line\">1167</span><br><span class=\"line\">1168</span><br><span class=\"line\">1169</span><br><span class=\"line\">1170</span><br><span class=\"line\">1171</span><br><span class=\"line\">1172</span><br><span class=\"line\">1173</span><br><span class=\"line\">1174</span><br><span class=\"line\">1175</span><br><span class=\"line\">1176</span><br><span class=\"line\">1177</span><br><span class=\"line\">1178</span><br><span class=\"line\">1179</span><br><span class=\"line\">1180</span><br><span class=\"line\">1181</span><br><span class=\"line\">1182</span><br><span class=\"line\">1183</span><br><span class=\"line\">1184</span><br><span class=\"line\">1185</span><br><span class=\"line\">1186</span><br><span class=\"line\">1187</span><br><span class=\"line\">1188</span><br><span class=\"line\">1189</span><br><span class=\"line\">1190</span><br><span class=\"line\">1191</span><br><span class=\"line\">1192</span><br><span class=\"line\">1193</span><br><span class=\"line\">1194</span><br><span class=\"line\">1195</span><br><span class=\"line\">1196</span><br><span class=\"line\">1197</span><br><span class=\"line\">1198</span><br><span class=\"line\">1199</span><br><span class=\"line\">1200</span><br><span class=\"line\">1201</span><br><span class=\"line\">1202</span><br><span class=\"line\">1203</span><br><span class=\"line\">1204</span><br><span class=\"line\">1205</span><br><span class=\"line\">1206</span><br><span class=\"line\">1207</span><br><span class=\"line\">1208</span><br><span class=\"line\">1209</span><br><span class=\"line\">1210</span><br><span class=\"line\">1211</span><br><span class=\"line\">1212</span><br><span class=\"line\">1213</span><br><span class=\"line\">1214</span><br><span class=\"line\">1215</span><br><span class=\"line\">1216</span><br><span class=\"line\">1217</span><br><span class=\"line\">1218</span><br><span class=\"line\">1219</span><br><span class=\"line\">1220</span><br><span class=\"line\">1221</span><br><span class=\"line\">1222</span><br><span class=\"line\">1223</span><br><span class=\"line\">1224</span><br><span class=\"line\">1225</span><br><span class=\"line\">1226</span><br><span class=\"line\">1227</span><br><span class=\"line\">1228</span><br><span class=\"line\">1229</span><br><span class=\"line\">1230</span><br><span class=\"line\">1231</span><br><span class=\"line\">1232</span><br><span class=\"line\">1233</span><br><span class=\"line\">1234</span><br><span class=\"line\">1235</span><br><span class=\"line\">1236</span><br><span class=\"line\">1237</span><br><span class=\"line\">1238</span><br><span class=\"line\">1239</span><br><span class=\"line\">1240</span><br><span class=\"line\">1241</span><br><span class=\"line\">1242</span><br><span class=\"line\">1243</span><br><span class=\"line\">1244</span><br><span class=\"line\">1245</span><br><span class=\"line\">1246</span><br><span class=\"line\">1247</span><br><span class=\"line\">1248</span><br><span class=\"line\">1249</span><br><span class=\"line\">1250</span><br><span class=\"line\">1251</span><br><span class=\"line\">1252</span><br><span class=\"line\">1253</span><br><span class=\"line\">1254</span><br><span class=\"line\">1255</span><br><span class=\"line\">1256</span><br><span class=\"line\">1257</span><br><span class=\"line\">1258</span><br><span class=\"line\">1259</span><br><span class=\"line\">1260</span><br><span class=\"line\">1261</span><br><span class=\"line\">1262</span><br><span class=\"line\">1263</span><br><span class=\"line\">1264</span><br><span class=\"line\">1265</span><br><span class=\"line\">1266</span><br><span class=\"line\">1267</span><br><span class=\"line\">1268</span><br><span class=\"line\">1269</span><br><span class=\"line\">1270</span><br><span class=\"line\">1271</span><br><span class=\"line\">1272</span><br><span class=\"line\">1273</span><br><span class=\"line\">1274</span><br><span class=\"line\">1275</span><br><span class=\"line\">1276</span><br><span class=\"line\">1277</span><br><span class=\"line\">1278</span><br><span class=\"line\">1279</span><br><span class=\"line\">1280</span><br><span class=\"line\">1281</span><br><span class=\"line\">1282</span><br><span class=\"line\">1283</span><br><span class=\"line\">1284</span><br><span class=\"line\">1285</span><br><span class=\"line\">1286</span><br><span class=\"line\">1287</span><br><span class=\"line\">1288</span><br><span class=\"line\">1289</span><br><span class=\"line\">1290</span><br><span class=\"line\">1291</span><br><span class=\"line\">1292</span><br><span class=\"line\">1293</span><br><span class=\"line\">1294</span><br><span class=\"line\">1295</span><br><span class=\"line\">1296</span><br><span class=\"line\">1297</span><br><span class=\"line\">1298</span><br><span class=\"line\">1299</span><br><span class=\"line\">1300</span><br><span class=\"line\">1301</span><br><span class=\"line\">1302</span><br><span class=\"line\">1303</span><br><span class=\"line\">1304</span><br><span class=\"line\">1305</span><br><span class=\"line\">1306</span><br><span class=\"line\">1307</span><br><span class=\"line\">1308</span><br><span class=\"line\">1309</span><br><span class=\"line\">1310</span><br><span class=\"line\">1311</span><br><span class=\"line\">1312</span><br><span class=\"line\">1313</span><br><span class=\"line\">1314</span><br><span class=\"line\">1315</span><br><span class=\"line\">1316</span><br><span class=\"line\">1317</span><br><span class=\"line\">1318</span><br><span class=\"line\">1319</span><br><span class=\"line\">1320</span><br><span class=\"line\">1321</span><br><span class=\"line\">1322</span><br><span class=\"line\">1323</span><br><span class=\"line\">1324</span><br><span class=\"line\">1325</span><br><span class=\"line\">1326</span><br><span class=\"line\">1327</span><br><span class=\"line\">1328</span><br><span class=\"line\">1329</span><br><span class=\"line\">1330</span><br><span class=\"line\">1331</span><br><span class=\"line\">1332</span><br><span class=\"line\">1333</span><br><span class=\"line\">1334</span><br><span class=\"line\">1335</span><br><span class=\"line\">1336</span><br><span class=\"line\">1337</span><br><span class=\"line\">1338</span><br><span class=\"line\">1339</span><br><span class=\"line\">1340</span><br><span class=\"line\">1341</span><br><span class=\"line\">1342</span><br><span class=\"line\">1343</span><br><span class=\"line\">1344</span><br><span class=\"line\">1345</span><br><span class=\"line\">1346</span><br><span class=\"line\">1347</span><br><span class=\"line\">1348</span><br><span class=\"line\">1349</span><br><span class=\"line\">1350</span><br><span class=\"line\">1351</span><br><span class=\"line\">1352</span><br><span class=\"line\">1353</span><br><span class=\"line\">1354</span><br><span class=\"line\">1355</span><br><span class=\"line\">1356</span><br><span class=\"line\">1357</span><br><span class=\"line\">1358</span><br><span class=\"line\">1359</span><br><span class=\"line\">1360</span><br><span class=\"line\">1361</span><br><span class=\"line\">1362</span><br><span class=\"line\">1363</span><br><span class=\"line\">1364</span><br><span class=\"line\">1365</span><br><span class=\"line\">1366</span><br><span class=\"line\">1367</span><br><span class=\"line\">1368</span><br><span class=\"line\">1369</span><br><span class=\"line\">1370</span><br><span class=\"line\">1371</span><br><span class=\"line\">1372</span><br><span class=\"line\">1373</span><br><span class=\"line\">1374</span><br><span class=\"line\">1375</span><br><span class=\"line\">1376</span><br><span class=\"line\">1377</span><br><span class=\"line\">1378</span><br><span class=\"line\">1379</span><br><span class=\"line\">1380</span><br><span class=\"line\">1381</span><br><span class=\"line\">1382</span><br><span class=\"line\">1383</span><br><span class=\"line\">1384</span><br><span class=\"line\">1385</span><br><span class=\"line\">1386</span><br><span class=\"line\">1387</span><br><span class=\"line\">1388</span><br><span class=\"line\">1389</span><br><span class=\"line\">1390</span><br><span class=\"line\">1391</span><br><span class=\"line\">1392</span><br><span class=\"line\">1393</span><br><span class=\"line\">1394</span><br><span class=\"line\">1395</span><br><span class=\"line\">1396</span><br><span class=\"line\">1397</span><br><span class=\"line\">1398</span><br><span class=\"line\">1399</span><br><span class=\"line\">1400</span><br><span class=\"line\">1401</span><br><span class=\"line\">1402</span><br><span class=\"line\">1403</span><br><span class=\"line\">1404</span><br><span class=\"line\">1405</span><br><span class=\"line\">1406</span><br><span class=\"line\">1407</span><br><span class=\"line\">1408</span><br><span class=\"line\">1409</span><br><span class=\"line\">1410</span><br><span class=\"line\">1411</span><br><span class=\"line\">1412</span><br><span class=\"line\">1413</span><br><span class=\"line\">1414</span><br><span class=\"line\">1415</span><br><span class=\"line\">1416</span><br><span class=\"line\">1417</span><br><span class=\"line\">1418</span><br><span class=\"line\">1419</span><br><span class=\"line\">1420</span><br><span class=\"line\">1421</span><br><span class=\"line\">1422</span><br><span class=\"line\">1423</span><br><span class=\"line\">1424</span><br><span class=\"line\">1425</span><br><span class=\"line\">1426</span><br><span class=\"line\">1427</span><br><span class=\"line\">1428</span><br><span class=\"line\">1429</span><br><span class=\"line\">1430</span><br><span class=\"line\">1431</span><br><span class=\"line\">1432</span><br><span class=\"line\">1433</span><br><span class=\"line\">1434</span><br><span class=\"line\">1435</span><br><span class=\"line\">1436</span><br><span class=\"line\">1437</span><br><span class=\"line\">1438</span><br><span class=\"line\">1439</span><br><span class=\"line\">1440</span><br><span class=\"line\">1441</span><br><span class=\"line\">1442</span><br><span class=\"line\">1443</span><br><span class=\"line\">1444</span><br><span class=\"line\">1445</span><br><span class=\"line\">1446</span><br><span class=\"line\">1447</span><br><span class=\"line\">1448</span><br><span class=\"line\">1449</span><br><span class=\"line\">1450</span><br><span class=\"line\">1451</span><br><span class=\"line\">1452</span><br><span class=\"line\">1453</span><br><span class=\"line\">1454</span><br><span class=\"line\">1455</span><br><span class=\"line\">1456</span><br><span class=\"line\">1457</span><br><span class=\"line\">1458</span><br><span class=\"line\">1459</span><br><span class=\"line\">1460</span><br><span class=\"line\">1461</span><br><span class=\"line\">1462</span><br><span class=\"line\">1463</span><br><span class=\"line\">1464</span><br><span class=\"line\">1465</span><br><span class=\"line\">1466</span><br><span class=\"line\">1467</span><br><span class=\"line\">1468</span><br><span class=\"line\">1469</span><br><span class=\"line\">1470</span><br><span class=\"line\">1471</span><br><span class=\"line\">1472</span><br><span class=\"line\">1473</span><br><span class=\"line\">1474</span><br><span class=\"line\">1475</span><br><span class=\"line\">1476</span><br><span class=\"line\">1477</span><br><span class=\"line\">1478</span><br><span class=\"line\">1479</span><br><span class=\"line\">1480</span><br><span class=\"line\">1481</span><br><span class=\"line\">1482</span><br><span class=\"line\">1483</span><br><span class=\"line\">1484</span><br><span class=\"line\">1485</span><br><span class=\"line\">1486</span><br><span class=\"line\">1487</span><br><span class=\"line\">1488</span><br><span class=\"line\">1489</span><br><span class=\"line\">1490</span><br><span class=\"line\">1491</span><br><span class=\"line\">1492</span><br><span class=\"line\">1493</span><br><span class=\"line\">1494</span><br><span class=\"line\">1495</span><br><span class=\"line\">1496</span><br><span class=\"line\">1497</span><br><span class=\"line\">1498</span><br><span class=\"line\">1499</span><br><span class=\"line\">1500</span><br><span class=\"line\">1501</span><br><span class=\"line\">1502</span><br><span class=\"line\">1503</span><br><span class=\"line\">1504</span><br><span class=\"line\">1505</span><br><span class=\"line\">1506</span><br><span class=\"line\">1507</span><br><span class=\"line\">1508</span><br><span class=\"line\">1509</span><br><span class=\"line\">1510</span><br><span class=\"line\">1511</span><br><span class=\"line\">1512</span><br><span class=\"line\">1513</span><br><span class=\"line\">1514</span><br><span class=\"line\">1515</span><br><span class=\"line\">1516</span><br><span class=\"line\">1517</span><br><span class=\"line\">1518</span><br><span class=\"line\">1519</span><br><span class=\"line\">1520</span><br><span class=\"line\">1521</span><br><span class=\"line\">1522</span><br><span class=\"line\">1523</span><br><span class=\"line\">1524</span><br><span class=\"line\">1525</span><br><span class=\"line\">1526</span><br><span class=\"line\">1527</span><br><span class=\"line\">1528</span><br><span class=\"line\">1529</span><br><span class=\"line\">1530</span><br><span class=\"line\">1531</span><br><span class=\"line\">1532</span><br><span class=\"line\">1533</span><br><span class=\"line\">1534</span><br><span class=\"line\">1535</span><br><span class=\"line\">1536</span><br><span class=\"line\">1537</span><br><span class=\"line\">1538</span><br><span class=\"line\">1539</span><br><span class=\"line\">1540</span><br><span class=\"line\">1541</span><br><span class=\"line\">1542</span><br><span class=\"line\">1543</span><br><span class=\"line\">1544</span><br><span class=\"line\">1545</span><br><span class=\"line\">1546</span><br><span class=\"line\">1547</span><br><span class=\"line\">1548</span><br><span class=\"line\">1549</span><br><span class=\"line\">1550</span><br><span class=\"line\">1551</span><br><span class=\"line\">1552</span><br><span class=\"line\">1553</span><br><span class=\"line\">1554</span><br><span class=\"line\">1555</span><br><span class=\"line\">1556</span><br><span class=\"line\">1557</span><br><span class=\"line\">1558</span><br><span class=\"line\">1559</span><br><span class=\"line\">1560</span><br><span class=\"line\">1561</span><br><span class=\"line\">1562</span><br><span class=\"line\">1563</span><br><span class=\"line\">1564</span><br><span class=\"line\">1565</span><br><span class=\"line\">1566</span><br><span class=\"line\">1567</span><br><span class=\"line\">1568</span><br><span class=\"line\">1569</span><br><span class=\"line\">1570</span><br><span class=\"line\">1571</span><br><span class=\"line\">1572</span><br><span class=\"line\">1573</span><br><span class=\"line\">1574</span><br><span class=\"line\">1575</span><br><span class=\"line\">1576</span><br><span class=\"line\">1577</span><br><span class=\"line\">1578</span><br><span class=\"line\">1579</span><br><span class=\"line\">1580</span><br><span class=\"line\">1581</span><br><span class=\"line\">1582</span><br><span class=\"line\">1583</span><br><span class=\"line\">1584</span><br><span class=\"line\">1585</span><br><span class=\"line\">1586</span><br><span class=\"line\">1587</span><br><span class=\"line\">1588</span><br><span class=\"line\">1589</span><br><span class=\"line\">1590</span><br><span class=\"line\">1591</span><br><span class=\"line\">1592</span><br><span class=\"line\">1593</span><br><span class=\"line\">1594</span><br><span class=\"line\">1595</span><br><span class=\"line\">1596</span><br><span class=\"line\">1597</span><br><span class=\"line\">1598</span><br><span class=\"line\">1599</span><br><span class=\"line\">1600</span><br><span class=\"line\">1601</span><br><span class=\"line\">1602</span><br><span class=\"line\">1603</span><br><span class=\"line\">1604</span><br><span class=\"line\">1605</span><br><span class=\"line\">1606</span><br><span class=\"line\">1607</span><br><span class=\"line\">1608</span><br><span class=\"line\">1609</span><br><span class=\"line\">1610</span><br><span class=\"line\">1611</span><br><span class=\"line\">1612</span><br><span class=\"line\">1613</span><br><span class=\"line\">1614</span><br><span class=\"line\">1615</span><br><span class=\"line\">1616</span><br><span class=\"line\">1617</span><br><span class=\"line\">1618</span><br><span class=\"line\">1619</span><br><span class=\"line\">1620</span><br><span class=\"line\">1621</span><br><span class=\"line\">1622</span><br><span class=\"line\">1623</span><br><span class=\"line\">1624</span><br><span class=\"line\">1625</span><br><span class=\"line\">1626</span><br><span class=\"line\">1627</span><br><span class=\"line\">1628</span><br><span class=\"line\">1629</span><br><span class=\"line\">1630</span><br><span class=\"line\">1631</span><br><span class=\"line\">1632</span><br><span class=\"line\">1633</span><br><span class=\"line\">1634</span><br><span class=\"line\">1635</span><br><span class=\"line\">1636</span><br><span class=\"line\">1637</span><br><span class=\"line\">1638</span><br><span class=\"line\">1639</span><br><span class=\"line\">1640</span><br><span class=\"line\">1641</span><br><span class=\"line\">1642</span><br><span class=\"line\">1643</span><br><span class=\"line\">1644</span><br><span class=\"line\">1645</span><br><span class=\"line\">1646</span><br><span class=\"line\">1647</span><br><span class=\"line\">1648</span><br><span class=\"line\">1649</span><br><span class=\"line\">1650</span><br><span class=\"line\">1651</span><br><span class=\"line\">1652</span><br><span class=\"line\">1653</span><br><span class=\"line\">1654</span><br><span class=\"line\">1655</span><br><span class=\"line\">1656</span><br><span class=\"line\">1657</span><br><span class=\"line\">1658</span><br><span class=\"line\">1659</span><br><span class=\"line\">1660</span><br><span class=\"line\">1661</span><br><span class=\"line\">1662</span><br><span class=\"line\">1663</span><br><span class=\"line\">1664</span><br><span class=\"line\">1665</span><br><span class=\"line\">1666</span><br><span class=\"line\">1667</span><br><span class=\"line\">1668</span><br><span class=\"line\">1669</span><br><span class=\"line\">1670</span><br><span class=\"line\">1671</span><br><span class=\"line\">1672</span><br><span class=\"line\">1673</span><br><span class=\"line\">1674</span><br><span class=\"line\">1675</span><br><span class=\"line\">1676</span><br><span class=\"line\">1677</span><br><span class=\"line\">1678</span><br><span class=\"line\">1679</span><br><span class=\"line\">1680</span><br><span class=\"line\">1681</span><br><span class=\"line\">1682</span><br><span class=\"line\">1683</span><br><span class=\"line\">1684</span><br><span class=\"line\">1685</span><br><span class=\"line\">1686</span><br><span class=\"line\">1687</span><br><span class=\"line\">1688</span><br><span class=\"line\">1689</span><br><span class=\"line\">1690</span><br><span class=\"line\">1691</span><br><span class=\"line\">1692</span><br><span class=\"line\">1693</span><br><span class=\"line\">1694</span><br><span class=\"line\">1695</span><br><span class=\"line\">1696</span><br><span class=\"line\">1697</span><br><span class=\"line\">1698</span><br><span class=\"line\">1699</span><br><span class=\"line\">1700</span><br><span class=\"line\">1701</span><br><span class=\"line\">1702</span><br><span class=\"line\">1703</span><br><span class=\"line\">1704</span><br><span class=\"line\">1705</span><br><span class=\"line\">1706</span><br><span class=\"line\">1707</span><br><span class=\"line\">1708</span><br><span class=\"line\">1709</span><br><span class=\"line\">1710</span><br><span class=\"line\">1711</span><br><span class=\"line\">1712</span><br><span class=\"line\">1713</span><br><span class=\"line\">1714</span><br><span class=\"line\">1715</span><br><span class=\"line\">1716</span><br><span class=\"line\">1717</span><br><span class=\"line\">1718</span><br><span class=\"line\">1719</span><br><span class=\"line\">1720</span><br><span class=\"line\">1721</span><br><span class=\"line\">1722</span><br><span class=\"line\">1723</span><br><span class=\"line\">1724</span><br><span class=\"line\">1725</span><br><span class=\"line\">1726</span><br><span class=\"line\">1727</span><br><span class=\"line\">1728</span><br><span class=\"line\">1729</span><br><span class=\"line\">1730</span><br><span class=\"line\">1731</span><br><span class=\"line\">1732</span><br><span class=\"line\">1733</span><br><span class=\"line\">1734</span><br><span class=\"line\">1735</span><br><span class=\"line\">1736</span><br><span class=\"line\">1737</span><br><span class=\"line\">1738</span><br><span class=\"line\">1739</span><br><span class=\"line\">1740</span><br><span class=\"line\">1741</span><br><span class=\"line\">1742</span><br><span class=\"line\">1743</span><br><span class=\"line\">1744</span><br><span class=\"line\">1745</span><br><span class=\"line\">1746</span><br><span class=\"line\">1747</span><br><span class=\"line\">1748</span><br><span class=\"line\">1749</span><br><span class=\"line\">1750</span><br><span class=\"line\">1751</span><br><span class=\"line\">1752</span><br><span class=\"line\">1753</span><br><span class=\"line\">1754</span><br><span class=\"line\">1755</span><br><span class=\"line\">1756</span><br><span class=\"line\">1757</span><br><span class=\"line\">1758</span><br><span class=\"line\">1759</span><br><span class=\"line\">1760</span><br><span class=\"line\">1761</span><br><span class=\"line\">1762</span><br><span class=\"line\">1763</span><br><span class=\"line\">1764</span><br><span class=\"line\">1765</span><br><span class=\"line\">1766</span><br><span class=\"line\">1767</span><br><span class=\"line\">1768</span><br><span class=\"line\">1769</span><br><span class=\"line\">1770</span><br><span class=\"line\">1771</span><br><span class=\"line\">1772</span><br><span class=\"line\">1773</span><br><span class=\"line\">1774</span><br><span class=\"line\">1775</span><br><span class=\"line\">1776</span><br><span class=\"line\">1777</span><br><span class=\"line\">1778</span><br><span class=\"line\">1779</span><br><span class=\"line\">1780</span><br><span class=\"line\">1781</span><br><span class=\"line\">1782</span><br><span class=\"line\">1783</span><br><span class=\"line\">1784</span><br><span class=\"line\">1785</span><br><span class=\"line\">1786</span><br><span class=\"line\">1787</span><br><span class=\"line\">1788</span><br><span class=\"line\">1789</span><br><span class=\"line\">1790</span><br><span class=\"line\">1791</span><br><span class=\"line\">1792</span><br><span class=\"line\">1793</span><br><span class=\"line\">1794</span><br><span class=\"line\">1795</span><br><span class=\"line\">1796</span><br><span class=\"line\">1797</span><br><span class=\"line\">1798</span><br><span class=\"line\">1799</span><br><span class=\"line\">1800</span><br><span class=\"line\">1801</span><br><span class=\"line\">1802</span><br><span class=\"line\">1803</span><br><span class=\"line\">1804</span><br><span class=\"line\">1805</span><br><span class=\"line\">1806</span><br><span class=\"line\">1807</span><br><span class=\"line\">1808</span><br><span class=\"line\">1809</span><br><span class=\"line\">1810</span><br><span class=\"line\">1811</span><br><span class=\"line\">1812</span><br><span class=\"line\">1813</span><br><span class=\"line\">1814</span><br><span class=\"line\">1815</span><br><span class=\"line\">1816</span><br><span class=\"line\">1817</span><br><span class=\"line\">1818</span><br><span class=\"line\">1819</span><br><span class=\"line\">1820</span><br><span class=\"line\">1821</span><br><span class=\"line\">1822</span><br><span class=\"line\">1823</span><br><span class=\"line\">1824</span><br><span class=\"line\">1825</span><br><span class=\"line\">1826</span><br><span class=\"line\">1827</span><br><span class=\"line\">1828</span><br><span class=\"line\">1829</span><br><span class=\"line\">1830</span><br><span class=\"line\">1831</span><br><span class=\"line\">1832</span><br><span class=\"line\">1833</span><br><span class=\"line\">1834</span><br><span class=\"line\">1835</span><br><span class=\"line\">1836</span><br><span class=\"line\">1837</span><br><span class=\"line\">1838</span><br><span class=\"line\">1839</span><br><span class=\"line\">1840</span><br><span class=\"line\">1841</span><br><span class=\"line\">1842</span><br><span class=\"line\">1843</span><br><span class=\"line\">1844</span><br><span class=\"line\">1845</span><br><span class=\"line\">1846</span><br><span class=\"line\">1847</span><br><span class=\"line\">1848</span><br><span class=\"line\">1849</span><br><span class=\"line\">1850</span><br><span class=\"line\">1851</span><br><span class=\"line\">1852</span><br><span class=\"line\">1853</span><br><span class=\"line\">1854</span><br><span class=\"line\">1855</span><br><span class=\"line\">1856</span><br><span class=\"line\">1857</span><br><span class=\"line\">1858</span><br><span class=\"line\">1859</span><br><span class=\"line\">1860</span><br><span class=\"line\">1861</span><br><span class=\"line\">1862</span><br><span class=\"line\">1863</span><br><span class=\"line\">1864</span><br><span class=\"line\">1865</span><br><span class=\"line\">1866</span><br><span class=\"line\">1867</span><br><span class=\"line\">1868</span><br><span class=\"line\">1869</span><br><span class=\"line\">1870</span><br><span class=\"line\">1871</span><br><span class=\"line\">1872</span><br><span class=\"line\">1873</span><br><span class=\"line\">1874</span><br><span class=\"line\">1875</span><br><span class=\"line\">1876</span><br><span class=\"line\">1877</span><br><span class=\"line\">1878</span><br><span class=\"line\">1879</span><br><span class=\"line\">1880</span><br><span class=\"line\">1881</span><br><span class=\"line\">1882</span><br><span class=\"line\">1883</span><br><span class=\"line\">1884</span><br><span class=\"line\">1885</span><br><span class=\"line\">1886</span><br><span class=\"line\">1887</span><br><span class=\"line\">1888</span><br><span class=\"line\">1889</span><br><span class=\"line\">1890</span><br><span class=\"line\">1891</span><br><span class=\"line\">1892</span><br><span class=\"line\">1893</span><br><span class=\"line\">1894</span><br><span class=\"line\">1895</span><br><span class=\"line\">1896</span><br><span class=\"line\">1897</span><br><span class=\"line\">1898</span><br><span class=\"line\">1899</span><br><span class=\"line\">1900</span><br><span class=\"line\">1901</span><br><span class=\"line\">1902</span><br><span class=\"line\">1903</span><br><span class=\"line\">1904</span><br><span class=\"line\">1905</span><br><span class=\"line\">1906</span><br><span class=\"line\">1907</span><br><span class=\"line\">1908</span><br><span class=\"line\">1909</span><br><span class=\"line\">1910</span><br><span class=\"line\">1911</span><br><span class=\"line\">1912</span><br><span class=\"line\">1913</span><br><span class=\"line\">1914</span><br><span class=\"line\">1915</span><br><span class=\"line\">1916</span><br><span class=\"line\">1917</span><br><span class=\"line\">1918</span><br><span class=\"line\">1919</span><br><span class=\"line\">1920</span><br><span class=\"line\">1921</span><br><span class=\"line\">1922</span><br><span class=\"line\">1923</span><br><span class=\"line\">1924</span><br><span class=\"line\">1925</span><br><span class=\"line\">1926</span><br><span class=\"line\">1927</span><br><span class=\"line\">1928</span><br><span class=\"line\">1929</span><br><span class=\"line\">1930</span><br><span class=\"line\">1931</span><br><span class=\"line\">1932</span><br><span class=\"line\">1933</span><br><span class=\"line\">1934</span><br><span class=\"line\">1935</span><br><span class=\"line\">1936</span><br><span class=\"line\">1937</span><br><span class=\"line\">1938</span><br><span class=\"line\">1939</span><br><span class=\"line\">1940</span><br><span class=\"line\">1941</span><br><span class=\"line\">1942</span><br><span class=\"line\">1943</span><br><span class=\"line\">1944</span><br><span class=\"line\">1945</span><br><span class=\"line\">1946</span><br><span class=\"line\">1947</span><br><span class=\"line\">1948</span><br><span class=\"line\">1949</span><br><span class=\"line\">1950</span><br><span class=\"line\">1951</span><br><span class=\"line\">1952</span><br><span class=\"line\">1953</span><br><span class=\"line\">1954</span><br><span class=\"line\">1955</span><br><span class=\"line\">1956</span><br><span class=\"line\">1957</span><br><span class=\"line\">1958</span><br><span class=\"line\">1959</span><br><span class=\"line\">1960</span><br><span class=\"line\">1961</span><br><span class=\"line\">1962</span><br><span class=\"line\">1963</span><br><span class=\"line\">1964</span><br><span class=\"line\">1965</span><br><span class=\"line\">1966</span><br><span class=\"line\">1967</span><br><span class=\"line\">1968</span><br><span class=\"line\">1969</span><br><span class=\"line\">1970</span><br><span class=\"line\">1971</span><br><span class=\"line\">1972</span><br><span class=\"line\">1973</span><br><span class=\"line\">1974</span><br><span class=\"line\">1975</span><br><span class=\"line\">1976</span><br><span class=\"line\">1977</span><br><span class=\"line\">1978</span><br><span class=\"line\">1979</span><br><span class=\"line\">1980</span><br><span class=\"line\">1981</span><br><span class=\"line\">1982</span><br><span class=\"line\">1983</span><br><span class=\"line\">1984</span><br><span class=\"line\">1985</span><br><span class=\"line\">1986</span><br><span class=\"line\">1987</span><br><span class=\"line\">1988</span><br><span class=\"line\">1989</span><br><span class=\"line\">1990</span><br><span class=\"line\">1991</span><br><span class=\"line\">1992</span><br><span class=\"line\">1993</span><br><span class=\"line\">1994</span><br><span class=\"line\">1995</span><br><span class=\"line\">1996</span><br><span class=\"line\">1997</span><br><span class=\"line\">1998</span><br><span class=\"line\">1999</span><br><span class=\"line\">2000</span><br><span class=\"line\">2001</span><br><span class=\"line\">2002</span><br><span class=\"line\">2003</span><br><span class=\"line\">2004</span><br><span class=\"line\">2005</span><br><span class=\"line\">2006</span><br><span class=\"line\">2007</span><br><span class=\"line\">2008</span><br><span class=\"line\">2009</span><br><span class=\"line\">2010</span><br><span class=\"line\">2011</span><br><span class=\"line\">2012</span><br><span class=\"line\">2013</span><br><span class=\"line\">2014</span><br><span class=\"line\">2015</span><br><span class=\"line\">2016</span><br><span class=\"line\">2017</span><br><span class=\"line\">2018</span><br><span class=\"line\">2019</span><br><span class=\"line\">2020</span><br><span class=\"line\">2021</span><br><span class=\"line\">2022</span><br><span class=\"line\">2023</span><br><span class=\"line\">2024</span><br><span class=\"line\">2025</span><br><span class=\"line\">2026</span><br><span class=\"line\">2027</span><br><span class=\"line\">2028</span><br><span class=\"line\">2029</span><br><span class=\"line\">2030</span><br><span class=\"line\">2031</span><br><span class=\"line\">2032</span><br><span class=\"line\">2033</span><br><span class=\"line\">2034</span><br><span class=\"line\">2035</span><br><span class=\"line\">2036</span><br><span class=\"line\">2037</span><br><span class=\"line\">2038</span><br><span class=\"line\">2039</span><br><span class=\"line\">2040</span><br><span class=\"line\">2041</span><br><span class=\"line\">2042</span><br><span class=\"line\">2043</span><br><span class=\"line\">2044</span><br><span class=\"line\">2045</span><br><span class=\"line\">2046</span><br><span class=\"line\">2047</span><br><span class=\"line\">2048</span><br><span class=\"line\">2049</span><br><span class=\"line\">2050</span><br><span class=\"line\">2051</span><br><span class=\"line\">2052</span><br><span class=\"line\">2053</span><br><span class=\"line\">2054</span><br><span class=\"line\">2055</span><br><span class=\"line\">2056</span><br><span class=\"line\">2057</span><br><span class=\"line\">2058</span><br><span class=\"line\">2059</span><br><span class=\"line\">2060</span><br><span class=\"line\">2061</span><br><span class=\"line\">2062</span><br><span class=\"line\">2063</span><br><span class=\"line\">2064</span><br><span class=\"line\">2065</span><br><span class=\"line\">2066</span><br><span class=\"line\">2067</span><br><span class=\"line\">2068</span><br><span class=\"line\">2069</span><br><span class=\"line\">2070</span><br><span class=\"line\">2071</span><br><span class=\"line\">2072</span><br><span class=\"line\">2073</span><br><span class=\"line\">2074</span><br><span class=\"line\">2075</span><br><span class=\"line\">2076</span><br><span class=\"line\">2077</span><br><span class=\"line\">2078</span><br><span class=\"line\">2079</span><br><span class=\"line\">2080</span><br><span class=\"line\">2081</span><br><span class=\"line\">2082</span><br><span class=\"line\">2083</span><br><span class=\"line\">2084</span><br><span class=\"line\">2085</span><br><span class=\"line\">2086</span><br><span class=\"line\">2087</span><br><span class=\"line\">2088</span><br><span class=\"line\">2089</span><br><span class=\"line\">2090</span><br><span class=\"line\">2091</span><br><span class=\"line\">2092</span><br><span class=\"line\">2093</span><br><span class=\"line\">2094</span><br><span class=\"line\">2095</span><br><span class=\"line\">2096</span><br><span class=\"line\">2097</span><br><span class=\"line\">2098</span><br><span class=\"line\">2099</span><br><span class=\"line\">2100</span><br><span class=\"line\">2101</span><br><span class=\"line\">2102</span><br><span class=\"line\">2103</span><br><span class=\"line\">2104</span><br><span class=\"line\">2105</span><br><span class=\"line\">2106</span><br><span class=\"line\">2107</span><br><span class=\"line\">2108</span><br><span class=\"line\">2109</span><br><span class=\"line\">2110</span><br><span class=\"line\">2111</span><br><span class=\"line\">2112</span><br><span class=\"line\">2113</span><br><span class=\"line\">2114</span><br><span class=\"line\">2115</span><br><span class=\"line\">2116</span><br><span class=\"line\">2117</span><br><span class=\"line\">2118</span><br><span class=\"line\">2119</span><br><span class=\"line\">2120</span><br><span class=\"line\">2121</span><br><span class=\"line\">2122</span><br><span class=\"line\">2123</span><br><span class=\"line\">2124</span><br><span class=\"line\">2125</span><br><span class=\"line\">2126</span><br><span class=\"line\">2127</span><br><span class=\"line\">2128</span><br><span class=\"line\">2129</span><br><span class=\"line\">2130</span><br><span class=\"line\">2131</span><br><span class=\"line\">2132</span><br><span class=\"line\">2133</span><br><span class=\"line\">2134</span><br><span class=\"line\">2135</span><br><span class=\"line\">2136</span><br><span class=\"line\">2137</span><br><span class=\"line\">2138</span><br><span class=\"line\">2139</span><br><span class=\"line\">2140</span><br><span class=\"line\">2141</span><br><span class=\"line\">2142</span><br><span class=\"line\">2143</span><br><span class=\"line\">2144</span><br><span class=\"line\">2145</span><br><span class=\"line\">2146</span><br><span class=\"line\">2147</span><br><span class=\"line\">2148</span><br><span class=\"line\">2149</span><br><span class=\"line\">2150</span><br><span class=\"line\">2151</span><br><span class=\"line\">2152</span><br><span class=\"line\">2153</span><br><span class=\"line\">2154</span><br><span class=\"line\">2155</span><br><span class=\"line\">2156</span><br><span class=\"line\">2157</span><br><span class=\"line\">2158</span><br><span class=\"line\">2159</span><br><span class=\"line\">2160</span><br><span class=\"line\">2161</span><br><span class=\"line\">2162</span><br><span class=\"line\">2163</span><br><span class=\"line\">2164</span><br><span class=\"line\">2165</span><br><span class=\"line\">2166</span><br><span class=\"line\">2167</span><br><span class=\"line\">2168</span><br><span class=\"line\">2169</span><br><span class=\"line\">2170</span><br><span class=\"line\">2171</span><br><span class=\"line\">2172</span><br><span class=\"line\">2173</span><br><span class=\"line\">2174</span><br><span class=\"line\">2175</span><br><span class=\"line\">2176</span><br><span class=\"line\">2177</span><br><span class=\"line\">2178</span><br><span class=\"line\">2179</span><br><span class=\"line\">2180</span><br><span class=\"line\">2181</span><br><span class=\"line\">2182</span><br><span class=\"line\">2183</span><br><span class=\"line\">2184</span><br><span class=\"line\">2185</span><br><span class=\"line\">2186</span><br><span class=\"line\">2187</span><br><span class=\"line\">2188</span><br><span class=\"line\">2189</span><br><span class=\"line\">2190</span><br><span class=\"line\">2191</span><br><span class=\"line\">2192</span><br><span class=\"line\">2193</span><br><span class=\"line\">2194</span><br><span class=\"line\">2195</span><br><span class=\"line\">2196</span><br><span class=\"line\">2197</span><br><span class=\"line\">2198</span><br><span class=\"line\">2199</span><br><span class=\"line\">2200</span><br><span class=\"line\">2201</span><br><span class=\"line\">2202</span><br><span class=\"line\">2203</span><br><span class=\"line\">2204</span><br><span class=\"line\">2205</span><br><span class=\"line\">2206</span><br><span class=\"line\">2207</span><br><span class=\"line\">2208</span><br><span class=\"line\">2209</span><br><span class=\"line\">2210</span><br><span class=\"line\">2211</span><br><span class=\"line\">2212</span><br><span class=\"line\">2213</span><br><span class=\"line\">2214</span><br><span class=\"line\">2215</span><br><span class=\"line\">2216</span><br><span class=\"line\">2217</span><br><span class=\"line\">2218</span><br><span class=\"line\">2219</span><br><span class=\"line\">2220</span><br><span class=\"line\">2221</span><br><span class=\"line\">2222</span><br><span class=\"line\">2223</span><br><span class=\"line\">2224</span><br><span class=\"line\">2225</span><br><span class=\"line\">2226</span><br><span class=\"line\">2227</span><br><span class=\"line\">2228</span><br><span class=\"line\">2229</span><br><span class=\"line\">2230</span><br><span class=\"line\">2231</span><br><span class=\"line\">2232</span><br><span class=\"line\">2233</span><br><span class=\"line\">2234</span><br><span class=\"line\">2235</span><br><span class=\"line\">2236</span><br><span class=\"line\">2237</span><br><span class=\"line\">2238</span><br><span class=\"line\">2239</span><br><span class=\"line\">2240</span><br><span class=\"line\">2241</span><br><span class=\"line\">2242</span><br><span class=\"line\">2243</span><br><span class=\"line\">2244</span><br><span class=\"line\">2245</span><br><span class=\"line\">2246</span><br><span class=\"line\">2247</span><br><span class=\"line\">2248</span><br><span class=\"line\">2249</span><br><span class=\"line\">2250</span><br><span class=\"line\">2251</span><br><span class=\"line\">2252</span><br><span class=\"line\">2253</span><br><span class=\"line\">2254</span><br><span class=\"line\">2255</span><br><span class=\"line\">2256</span><br><span class=\"line\">2257</span><br><span class=\"line\">2258</span><br><span class=\"line\">2259</span><br><span class=\"line\">2260</span><br><span class=\"line\">2261</span><br><span class=\"line\">2262</span><br><span class=\"line\">2263</span><br><span class=\"line\">2264</span><br><span class=\"line\">2265</span><br><span class=\"line\">2266</span><br><span class=\"line\">2267</span><br><span class=\"line\">2268</span><br><span class=\"line\">2269</span><br><span class=\"line\">2270</span><br><span class=\"line\">2271</span><br><span class=\"line\">2272</span><br><span class=\"line\">2273</span><br><span class=\"line\">2274</span><br><span class=\"line\">2275</span><br><span class=\"line\">2276</span><br><span class=\"line\">2277</span><br><span class=\"line\">2278</span><br><span class=\"line\">2279</span><br><span class=\"line\">2280</span><br><span class=\"line\">2281</span><br><span class=\"line\">2282</span><br><span class=\"line\">2283</span><br><span class=\"line\">2284</span><br><span class=\"line\">2285</span><br><span class=\"line\">2286</span><br><span class=\"line\">2287</span><br><span class=\"line\">2288</span><br><span class=\"line\">2289</span><br><span class=\"line\">2290</span><br><span class=\"line\">2291</span><br><span class=\"line\">2292</span><br><span class=\"line\">2293</span><br><span class=\"line\">2294</span><br><span class=\"line\">2295</span><br><span class=\"line\">2296</span><br><span class=\"line\">2297</span><br><span class=\"line\">2298</span><br><span class=\"line\">2299</span><br><span class=\"line\">2300</span><br><span class=\"line\">2301</span><br><span class=\"line\">2302</span><br><span class=\"line\">2303</span><br><span class=\"line\">2304</span><br><span class=\"line\">2305</span><br><span class=\"line\">2306</span><br><span class=\"line\">2307</span><br><span class=\"line\">2308</span><br><span class=\"line\">2309</span><br><span class=\"line\">2310</span><br><span class=\"line\">2311</span><br><span class=\"line\">2312</span><br><span class=\"line\">2313</span><br><span class=\"line\">2314</span><br><span class=\"line\">2315</span><br><span class=\"line\">2316</span><br><span class=\"line\">2317</span><br><span class=\"line\">2318</span><br><span class=\"line\">2319</span><br><span class=\"line\">2320</span><br><span class=\"line\">2321</span><br><span class=\"line\">2322</span><br><span class=\"line\">2323</span><br><span class=\"line\">2324</span><br><span class=\"line\">2325</span><br><span class=\"line\">2326</span><br><span class=\"line\">2327</span><br><span class=\"line\">2328</span><br><span class=\"line\">2329</span><br><span class=\"line\">2330</span><br><span class=\"line\">2331</span><br><span class=\"line\">2332</span><br><span class=\"line\">2333</span><br><span class=\"line\">2334</span><br><span class=\"line\">2335</span><br><span class=\"line\">2336</span><br><span class=\"line\">2337</span><br><span class=\"line\">2338</span><br><span class=\"line\">2339</span><br><span class=\"line\">2340</span><br><span class=\"line\">2341</span><br><span class=\"line\">2342</span><br><span class=\"line\">2343</span><br><span class=\"line\">2344</span><br><span class=\"line\">2345</span><br><span class=\"line\">2346</span><br><span class=\"line\">2347</span><br><span class=\"line\">2348</span><br><span class=\"line\">2349</span><br><span class=\"line\">2350</span><br><span class=\"line\">2351</span><br><span class=\"line\">2352</span><br><span class=\"line\">2353</span><br><span class=\"line\">2354</span><br><span class=\"line\">2355</span><br><span class=\"line\">2356</span><br><span class=\"line\">2357</span><br><span class=\"line\">2358</span><br><span class=\"line\">2359</span><br><span class=\"line\">2360</span><br><span class=\"line\">2361</span><br><span class=\"line\">2362</span><br><span class=\"line\">2363</span><br><span class=\"line\">2364</span><br><span class=\"line\">2365</span><br><span class=\"line\">2366</span><br><span class=\"line\">2367</span><br><span class=\"line\">2368</span><br><span class=\"line\">2369</span><br><span class=\"line\">2370</span><br><span class=\"line\">2371</span><br><span class=\"line\">2372</span><br><span class=\"line\">2373</span><br><span class=\"line\">2374</span><br><span class=\"line\">2375</span><br><span class=\"line\">2376</span><br><span class=\"line\">2377</span><br><span class=\"line\">2378</span><br><span class=\"line\">2379</span><br><span class=\"line\">2380</span><br><span class=\"line\">2381</span><br><span class=\"line\">2382</span><br><span class=\"line\">2383</span><br><span class=\"line\">2384</span><br><span class=\"line\">2385</span><br><span class=\"line\">2386</span><br><span class=\"line\">2387</span><br><span class=\"line\">2388</span><br><span class=\"line\">2389</span><br><span class=\"line\">2390</span><br><span class=\"line\">2391</span><br><span class=\"line\">2392</span><br><span class=\"line\">2393</span><br><span class=\"line\">2394</span><br><span class=\"line\">2395</span><br><span class=\"line\">2396</span><br><span class=\"line\">2397</span><br><span class=\"line\">2398</span><br><span class=\"line\">2399</span><br><span class=\"line\">2400</span><br><span class=\"line\">2401</span><br><span class=\"line\">2402</span><br><span class=\"line\">2403</span><br><span class=\"line\">2404</span><br><span class=\"line\">2405</span><br><span class=\"line\">2406</span><br><span class=\"line\">2407</span><br><span class=\"line\">2408</span><br><span class=\"line\">2409</span><br><span class=\"line\">2410</span><br><span class=\"line\">2411</span><br><span class=\"line\">2412</span><br><span class=\"line\">2413</span><br><span class=\"line\">2414</span><br><span class=\"line\">2415</span><br><span class=\"line\">2416</span><br><span class=\"line\">2417</span><br><span class=\"line\">2418</span><br><span class=\"line\">2419</span><br><span class=\"line\">2420</span><br><span class=\"line\">2421</span><br><span class=\"line\">2422</span><br><span class=\"line\">2423</span><br><span class=\"line\">2424</span><br><span class=\"line\">2425</span><br><span class=\"line\">2426</span><br><span class=\"line\">2427</span><br><span class=\"line\">2428</span><br><span class=\"line\">2429</span><br><span class=\"line\">2430</span><br><span class=\"line\">2431</span><br><span class=\"line\">2432</span><br><span class=\"line\">2433</span><br><span class=\"line\">2434</span><br><span class=\"line\">2435</span><br><span class=\"line\">2436</span><br><span class=\"line\">2437</span><br><span class=\"line\">2438</span><br><span class=\"line\">2439</span><br><span class=\"line\">2440</span><br><span class=\"line\">2441</span><br><span class=\"line\">2442</span><br><span class=\"line\">2443</span><br><span class=\"line\">2444</span><br><span class=\"line\">2445</span><br><span class=\"line\">2446</span><br><span class=\"line\">2447</span><br><span class=\"line\">2448</span><br><span class=\"line\">2449</span><br><span class=\"line\">2450</span><br><span class=\"line\">2451</span><br><span class=\"line\">2452</span><br><span class=\"line\">2453</span><br><span class=\"line\">2454</span><br><span class=\"line\">2455</span><br><span class=\"line\">2456</span><br><span class=\"line\">2457</span><br><span class=\"line\">2458</span><br><span class=\"line\">2459</span><br><span class=\"line\">2460</span><br><span class=\"line\">2461</span><br><span class=\"line\">2462</span><br><span class=\"line\">2463</span><br><span class=\"line\">2464</span><br><span class=\"line\">2465</span><br><span class=\"line\">2466</span><br><span class=\"line\">2467</span><br><span class=\"line\">2468</span><br><span class=\"line\">2469</span><br><span class=\"line\">2470</span><br><span class=\"line\">2471</span><br><span class=\"line\">2472</span><br><span class=\"line\">2473</span><br><span class=\"line\">2474</span><br><span class=\"line\">2475</span><br><span class=\"line\">2476</span><br><span class=\"line\">2477</span><br><span class=\"line\">2478</span><br><span class=\"line\">2479</span><br><span class=\"line\">2480</span><br><span class=\"line\">2481</span><br><span class=\"line\">2482</span><br><span class=\"line\">2483</span><br><span class=\"line\">2484</span><br><span class=\"line\">2485</span><br><span class=\"line\">2486</span><br><span class=\"line\">2487</span><br><span class=\"line\">2488</span><br><span class=\"line\">2489</span><br><span class=\"line\">2490</span><br><span class=\"line\">2491</span><br><span class=\"line\">2492</span><br><span class=\"line\">2493</span><br><span class=\"line\">2494</span><br><span class=\"line\">2495</span><br><span class=\"line\">2496</span><br><span class=\"line\">2497</span><br><span class=\"line\">2498</span><br><span class=\"line\">2499</span><br><span class=\"line\">2500</span><br><span class=\"line\">2501</span><br><span class=\"line\">2502</span><br><span class=\"line\">2503</span><br><span class=\"line\">2504</span><br><span class=\"line\">2505</span><br><span class=\"line\">2506</span><br><span class=\"line\">2507</span><br><span class=\"line\">2508</span><br><span class=\"line\">2509</span><br><span class=\"line\">2510</span><br><span class=\"line\">2511</span><br><span class=\"line\">2512</span><br><span class=\"line\">2513</span><br><span class=\"line\">2514</span><br><span class=\"line\">2515</span><br><span class=\"line\">2516</span><br><span class=\"line\">2517</span><br><span class=\"line\">2518</span><br><span class=\"line\">2519</span><br><span class=\"line\">2520</span><br><span class=\"line\">2521</span><br><span class=\"line\">2522</span><br><span class=\"line\">2523</span><br><span class=\"line\">2524</span><br><span class=\"line\">2525</span><br><span class=\"line\">2526</span><br><span class=\"line\">2527</span><br><span class=\"line\">2528</span><br><span class=\"line\">2529</span><br><span class=\"line\">2530</span><br><span class=\"line\">2531</span><br><span class=\"line\">2532</span><br><span class=\"line\">2533</span><br><span class=\"line\">2534</span><br><span class=\"line\">2535</span><br><span class=\"line\">2536</span><br><span class=\"line\">2537</span><br><span class=\"line\">2538</span><br><span class=\"line\">2539</span><br><span class=\"line\">2540</span><br><span class=\"line\">2541</span><br><span class=\"line\">2542</span><br><span class=\"line\">2543</span><br><span class=\"line\">2544</span><br><span class=\"line\">2545</span><br><span class=\"line\">2546</span><br><span class=\"line\">2547</span><br><span class=\"line\">2548</span><br><span class=\"line\">2549</span><br><span class=\"line\">2550</span><br><span class=\"line\">2551</span><br><span class=\"line\">2552</span><br><span class=\"line\">2553</span><br><span class=\"line\">2554</span><br><span class=\"line\">2555</span><br><span class=\"line\">2556</span><br><span class=\"line\">2557</span><br><span class=\"line\">2558</span><br><span class=\"line\">2559</span><br><span class=\"line\">2560</span><br><span class=\"line\">2561</span><br><span class=\"line\">2562</span><br><span class=\"line\">2563</span><br><span class=\"line\">2564</span><br><span class=\"line\">2565</span><br><span class=\"line\">2566</span><br><span class=\"line\">2567</span><br><span class=\"line\">2568</span><br><span class=\"line\">2569</span><br><span class=\"line\">2570</span><br><span class=\"line\">2571</span><br><span class=\"line\">2572</span><br><span class=\"line\">2573</span><br><span class=\"line\">2574</span><br><span class=\"line\">2575</span><br><span class=\"line\">2576</span><br><span class=\"line\">2577</span><br><span class=\"line\">2578</span><br><span class=\"line\">2579</span><br><span class=\"line\">2580</span><br><span class=\"line\">2581</span><br><span class=\"line\">2582</span><br><span class=\"line\">2583</span><br><span class=\"line\">2584</span><br><span class=\"line\">2585</span><br><span class=\"line\">2586</span><br><span class=\"line\">2587</span><br><span class=\"line\">2588</span><br><span class=\"line\">2589</span><br><span class=\"line\">2590</span><br><span class=\"line\">2591</span><br><span class=\"line\">2592</span><br><span class=\"line\">2593</span><br><span class=\"line\">2594</span><br><span class=\"line\">2595</span><br><span class=\"line\">2596</span><br><span class=\"line\">2597</span><br><span class=\"line\">2598</span><br><span class=\"line\">2599</span><br><span class=\"line\">2600</span><br><span class=\"line\">2601</span><br><span class=\"line\">2602</span><br><span class=\"line\">2603</span><br><span class=\"line\">2604</span><br><span class=\"line\">2605</span><br><span class=\"line\">2606</span><br><span class=\"line\">2607</span><br><span class=\"line\">2608</span><br><span class=\"line\">2609</span><br><span class=\"line\">2610</span><br><span class=\"line\">2611</span><br><span class=\"line\">2612</span><br><span class=\"line\">2613</span><br><span class=\"line\">2614</span><br><span class=\"line\">2615</span><br><span class=\"line\">2616</span><br><span class=\"line\">2617</span><br><span class=\"line\">2618</span><br><span class=\"line\">2619</span><br><span class=\"line\">2620</span><br><span class=\"line\">2621</span><br><span class=\"line\">2622</span><br><span class=\"line\">2623</span><br><span class=\"line\">2624</span><br><span class=\"line\">2625</span><br><span class=\"line\">2626</span><br><span class=\"line\">2627</span><br><span class=\"line\">2628</span><br><span class=\"line\">2629</span><br><span class=\"line\">2630</span><br><span class=\"line\">2631</span><br><span class=\"line\">2632</span><br><span class=\"line\">2633</span><br><span class=\"line\">2634</span><br><span class=\"line\">2635</span><br><span class=\"line\">2636</span><br><span class=\"line\">2637</span><br><span class=\"line\">2638</span><br><span class=\"line\">2639</span><br><span class=\"line\">2640</span><br><span class=\"line\">2641</span><br><span class=\"line\">2642</span><br><span class=\"line\">2643</span><br><span class=\"line\">2644</span><br><span class=\"line\">2645</span><br><span class=\"line\">2646</span><br><span class=\"line\">2647</span><br><span class=\"line\">2648</span><br><span class=\"line\">2649</span><br><span class=\"line\">2650</span><br><span class=\"line\">2651</span><br><span class=\"line\">2652</span><br><span class=\"line\">2653</span><br><span class=\"line\">2654</span><br><span class=\"line\">2655</span><br><span class=\"line\">2656</span><br><span class=\"line\">2657</span><br><span class=\"line\">2658</span><br><span class=\"line\">2659</span><br><span class=\"line\">2660</span><br><span class=\"line\">2661</span><br><span class=\"line\">2662</span><br><span class=\"line\">2663</span><br><span class=\"line\">2664</span><br><span class=\"line\">2665</span><br><span class=\"line\">2666</span><br><span class=\"line\">2667</span><br><span class=\"line\">2668</span><br><span class=\"line\">2669</span><br><span class=\"line\">2670</span><br><span class=\"line\">2671</span><br><span class=\"line\">2672</span><br><span class=\"line\">2673</span><br><span class=\"line\">2674</span><br><span class=\"line\">2675</span><br><span class=\"line\">2676</span><br><span class=\"line\">2677</span><br><span class=\"line\">2678</span><br><span class=\"line\">2679</span><br><span class=\"line\">2680</span><br><span class=\"line\">2681</span><br><span class=\"line\">2682</span><br><span class=\"line\">2683</span><br><span class=\"line\">2684</span><br><span class=\"line\">2685</span><br><span class=\"line\">2686</span><br><span class=\"line\">2687</span><br><span class=\"line\">2688</span><br><span class=\"line\">2689</span><br><span class=\"line\">2690</span><br><span class=\"line\">2691</span><br><span class=\"line\">2692</span><br><span class=\"line\">2693</span><br><span class=\"line\">2694</span><br><span class=\"line\">2695</span><br><span class=\"line\">2696</span><br><span class=\"line\">2697</span><br><span class=\"line\">2698</span><br><span class=\"line\">2699</span><br><span class=\"line\">2700</span><br><span class=\"line\">2701</span><br><span class=\"line\">2702</span><br><span class=\"line\">2703</span><br><span class=\"line\">2704</span><br><span class=\"line\">2705</span><br><span class=\"line\">2706</span><br><span class=\"line\">2707</span><br><span class=\"line\">2708</span><br><span class=\"line\">2709</span><br><span class=\"line\">2710</span><br><span class=\"line\">2711</span><br><span class=\"line\">2712</span><br><span class=\"line\">2713</span><br><span class=\"line\">2714</span><br><span class=\"line\">2715</span><br><span class=\"line\">2716</span><br><span class=\"line\">2717</span><br><span class=\"line\">2718</span><br><span class=\"line\">2719</span><br><span class=\"line\">2720</span><br><span class=\"line\">2721</span><br><span class=\"line\">2722</span><br><span class=\"line\">2723</span><br><span class=\"line\">2724</span><br><span class=\"line\">2725</span><br><span class=\"line\">2726</span><br><span class=\"line\">2727</span><br><span class=\"line\">2728</span><br><span class=\"line\">2729</span><br><span class=\"line\">2730</span><br><span class=\"line\">2731</span><br><span class=\"line\">2732</span><br><span class=\"line\">2733</span><br><span class=\"line\">2734</span><br><span class=\"line\">2735</span><br><span class=\"line\">2736</span><br><span class=\"line\">2737</span><br><span class=\"line\">2738</span><br><span class=\"line\">2739</span><br><span class=\"line\">2740</span><br><span class=\"line\">2741</span><br><span class=\"line\">2742</span><br><span class=\"line\">2743</span><br><span class=\"line\">2744</span><br><span class=\"line\">2745</span><br><span class=\"line\">2746</span><br><span class=\"line\">2747</span><br><span class=\"line\">2748</span><br><span class=\"line\">2749</span><br><span class=\"line\">2750</span><br><span class=\"line\">2751</span><br><span class=\"line\">2752</span><br><span class=\"line\">2753</span><br><span class=\"line\">2754</span><br><span class=\"line\">2755</span><br><span class=\"line\">2756</span><br><span class=\"line\">2757</span><br><span class=\"line\">2758</span><br><span class=\"line\">2759</span><br><span class=\"line\">2760</span><br><span class=\"line\">2761</span><br><span class=\"line\">2762</span><br><span class=\"line\">2763</span><br><span class=\"line\">2764</span><br><span class=\"line\">2765</span><br><span class=\"line\">2766</span><br><span class=\"line\">2767</span><br><span class=\"line\">2768</span><br><span class=\"line\">2769</span><br><span class=\"line\">2770</span><br><span class=\"line\">2771</span><br><span class=\"line\">2772</span><br><span class=\"line\">2773</span><br><span class=\"line\">2774</span><br><span class=\"line\">2775</span><br><span class=\"line\">2776</span><br><span class=\"line\">2777</span><br><span class=\"line\">2778</span><br><span class=\"line\">2779</span><br><span class=\"line\">2780</span><br><span class=\"line\">2781</span><br><span class=\"line\">2782</span><br><span class=\"line\">2783</span><br><span class=\"line\">2784</span><br><span class=\"line\">2785</span><br><span class=\"line\">2786</span><br><span class=\"line\">2787</span><br><span class=\"line\">2788</span><br><span class=\"line\">2789</span><br><span class=\"line\">2790</span><br><span class=\"line\">2791</span><br><span class=\"line\">2792</span><br><span class=\"line\">2793</span><br><span class=\"line\">2794</span><br><span class=\"line\">2795</span><br><span class=\"line\">2796</span><br><span class=\"line\">2797</span><br><span class=\"line\">2798</span><br><span class=\"line\">2799</span><br><span class=\"line\">2800</span><br><span class=\"line\">2801</span><br><span class=\"line\">2802</span><br><span class=\"line\">2803</span><br><span class=\"line\">2804</span><br><span class=\"line\">2805</span><br><span class=\"line\">2806</span><br><span class=\"line\">2807</span><br><span class=\"line\">2808</span><br><span class=\"line\">2809</span><br><span class=\"line\">2810</span><br><span class=\"line\">2811</span><br><span class=\"line\">2812</span><br><span class=\"line\">2813</span><br><span class=\"line\">2814</span><br><span class=\"line\">2815</span><br><span class=\"line\">2816</span><br><span class=\"line\">2817</span><br><span class=\"line\">2818</span><br><span class=\"line\">2819</span><br><span class=\"line\">2820</span><br><span class=\"line\">2821</span><br><span class=\"line\">2822</span><br><span class=\"line\">2823</span><br><span class=\"line\">2824</span><br><span class=\"line\">2825</span><br><span class=\"line\">2826</span><br><span class=\"line\">2827</span><br><span class=\"line\">2828</span><br><span class=\"line\">2829</span><br><span class=\"line\">2830</span><br><span class=\"line\">2831</span><br><span class=\"line\">2832</span><br><span class=\"line\">2833</span><br><span class=\"line\">2834</span><br><span class=\"line\">2835</span><br><span class=\"line\">2836</span><br><span class=\"line\">2837</span><br><span class=\"line\">2838</span><br><span class=\"line\">2839</span><br><span class=\"line\">2840</span><br><span class=\"line\">2841</span><br><span class=\"line\">2842</span><br><span class=\"line\">2843</span><br><span class=\"line\">2844</span><br><span class=\"line\">2845</span><br><span class=\"line\">2846</span><br><span class=\"line\">2847</span><br><span class=\"line\">2848</span><br><span class=\"line\">2849</span><br><span class=\"line\">2850</span><br><span class=\"line\">2851</span><br><span class=\"line\">2852</span><br><span class=\"line\">2853</span><br><span class=\"line\">2854</span><br><span class=\"line\">2855</span><br><span class=\"line\">2856</span><br><span class=\"line\">2857</span><br><span class=\"line\">2858</span><br><span class=\"line\">2859</span><br><span class=\"line\">2860</span><br><span class=\"line\">2861</span><br><span class=\"line\">2862</span><br><span class=\"line\">2863</span><br><span class=\"line\">2864</span><br><span class=\"line\">2865</span><br><span class=\"line\">2866</span><br><span class=\"line\">2867</span><br><span class=\"line\">2868</span><br><span class=\"line\">2869</span><br><span class=\"line\">2870</span><br><span class=\"line\">2871</span><br><span class=\"line\">2872</span><br><span class=\"line\">2873</span><br><span class=\"line\">2874</span><br><span class=\"line\">2875</span><br><span class=\"line\">2876</span><br><span class=\"line\">2877</span><br><span class=\"line\">2878</span><br><span class=\"line\">2879</span><br><span class=\"line\">2880</span><br><span class=\"line\">2881</span><br><span class=\"line\">2882</span><br><span class=\"line\">2883</span><br><span class=\"line\">2884</span><br><span class=\"line\">2885</span><br><span class=\"line\">2886</span><br><span class=\"line\">2887</span><br><span class=\"line\">2888</span><br><span class=\"line\">2889</span><br><span class=\"line\">2890</span><br><span class=\"line\">2891</span><br><span class=\"line\">2892</span><br><span class=\"line\">2893</span><br><span class=\"line\">2894</span><br><span class=\"line\">2895</span><br><span class=\"line\">2896</span><br><span class=\"line\">2897</span><br><span class=\"line\">2898</span><br><span class=\"line\">2899</span><br><span class=\"line\">2900</span><br><span class=\"line\">2901</span><br><span class=\"line\">2902</span><br><span class=\"line\">2903</span><br><span class=\"line\">2904</span><br><span class=\"line\">2905</span><br><span class=\"line\">2906</span><br><span class=\"line\">2907</span><br><span class=\"line\">2908</span><br><span class=\"line\">2909</span><br><span class=\"line\">2910</span><br><span class=\"line\">2911</span><br><span class=\"line\">2912</span><br><span class=\"line\">2913</span><br><span class=\"line\">2914</span><br><span class=\"line\">2915</span><br><span class=\"line\">2916</span><br><span class=\"line\">2917</span><br><span class=\"line\">2918</span><br><span class=\"line\">2919</span><br><span class=\"line\">2920</span><br><span class=\"line\">2921</span><br><span class=\"line\">2922</span><br><span class=\"line\">2923</span><br><span class=\"line\">2924</span><br><span class=\"line\">2925</span><br><span class=\"line\">2926</span><br><span class=\"line\">2927</span><br><span class=\"line\">2928</span><br><span class=\"line\">2929</span><br><span class=\"line\">2930</span><br><span class=\"line\">2931</span><br><span class=\"line\">2932</span><br><span class=\"line\">2933</span><br><span class=\"line\">2934</span><br><span class=\"line\">2935</span><br><span class=\"line\">2936</span><br><span class=\"line\">2937</span><br><span class=\"line\">2938</span><br><span class=\"line\">2939</span><br><span class=\"line\">2940</span><br><span class=\"line\">2941</span><br><span class=\"line\">2942</span><br><span class=\"line\">2943</span><br><span class=\"line\">2944</span><br><span class=\"line\">2945</span><br><span class=\"line\">2946</span><br><span class=\"line\">2947</span><br><span class=\"line\">2948</span><br><span class=\"line\">2949</span><br><span class=\"line\">2950</span><br><span class=\"line\">2951</span><br><span class=\"line\">2952</span><br><span class=\"line\">2953</span><br><span class=\"line\">2954</span><br><span class=\"line\">2955</span><br><span class=\"line\">2956</span><br><span class=\"line\">2957</span><br><span class=\"line\">2958</span><br><span class=\"line\">2959</span><br><span class=\"line\">2960</span><br><span class=\"line\">2961</span><br><span class=\"line\">2962</span><br><span class=\"line\">2963</span><br><span class=\"line\">2964</span><br><span class=\"line\">2965</span><br><span class=\"line\">2966</span><br><span class=\"line\">2967</span><br><span class=\"line\">2968</span><br><span class=\"line\">2969</span><br><span class=\"line\">2970</span><br><span class=\"line\">2971</span><br><span class=\"line\">2972</span><br><span class=\"line\">2973</span><br><span class=\"line\">2974</span><br><span class=\"line\">2975</span><br><span class=\"line\">2976</span><br><span class=\"line\">2977</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs javascript\"><span class=\"hljs-comment\">// 请复制本代码到打开的ACME服务URL页面的浏览器控制台中运行。</span><br><br><span class=\"hljs-keyword\">var</span> <span class=\"hljs-title class_\">Default</span>_ACME_URL=<span class=\"hljs-string\">&quot;https://acme.zerossl.com/v2/DV90/directory&quot;</span>;<br><span class=\"hljs-keyword\">var</span> <span class=\"hljs-title class_\">IsReadDirGotoCORS</span>=<span class=\"hljs-literal\">true</span>;<br><span class=\"hljs-keyword\">var</span> <span class=\"hljs-title class_\">PageRawHTML</span>=<span class=\"hljs-string\">`&lt;html&gt;&lt;head&gt;</span><br><span class=\"hljs-string\">&lt;meta http-equiv=&quot;Content-Type&quot; content=&quot;text/html; charset=utf-8&quot;&gt;</span><br><span class=\"hljs-string\">&lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0&quot;&gt;</span><br><span class=\"hljs-string\">&lt;link rel=&quot;shortcut icon&quot; type=&quot;image/png&quot; href=&quot;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAAe1BMVEUDuu3///8AtuwAue1c0/QAt+1a0vSZ4/gOve4Ju+4AtOzf9v31/P4iw/DS8/yf5fnE7/tNzvMsxvHw+/7t+v7k+P2U4veO4PeA3Pbp+f7h9/3Y9f3I8Pxt1/Vi1PRQz/NDzPIzyPEWv+76/v/3/f+87fqn5/mI3/Z82vb+fQDoAAAA10lEQVQ4y63T2c7CIBCGYWamUwFZurfuy7/e/xVaeySlYmJ8T78nISQgPh0xU2pGZa1EfrazHJz5an2FT3brYKoul4UqAHx5Hhqoq6VTMAc4aER9acDjEviFPd2voP9gKykGVECHkzyBsRzvI+g1jWG5BFDIPXRKjqkcTKUwPISPbvsN9XpqA9DuehXsF4g64APALAY+AHkMVm+CzToNVld1NAmwE0zaJ0DBQughAcxZ66tLAGj6f/f2NdMgewXKGHSPgOTPfG/Dh0vqlAXlluefahaLT3UDvrAKrj7jLKkAAAAASUVORK5CYII=&quot;&gt;</span><br><span class=\"hljs-string\"></span><br><span class=\"hljs-string\">&lt;title&gt;ACME Web Browser Client | ACME客户端H5网页单文件版，在线免费申请签发SSL/TLS通配符泛域名HTTPS证书，支持Let&#x27;s Encrypt、ZeroSSL，无需账号免登录注册 | Windows macOS Get Wildcard Certificates Online For Free - Single HTML File&lt;/title&gt;</span><br><span class=\"hljs-string\">&lt;/head&gt;</span><br><span class=\"hljs-string\"></span><br><span class=\"hljs-string\">&lt;body&gt;</span><br><span class=\"hljs-string\">&lt;script&gt;</span><br><span class=\"hljs-string\">var Version=&quot;1.0.230820&quot;;</span><br><span class=\"hljs-string\">console.log(&quot;LICENSE: GPL-3.0, https://github.com/xiangyuecn/ACME-HTML-Web-Browser-Client/blob/main/LICENSE&quot;);</span><br><span class=\"hljs-string\">/***********************************</span><br><span class=\"hljs-string\">中英对照翻译主要来自：Chrome自带翻译+百度翻译，由中文翻译成English（作者英文很菜）。</span><br><span class=\"hljs-string\">The Chinese-English translation is mainly from: Chrome comes with translation + Baidu translation, which is translated from Chinese to English (the author&#x27;s English level is very low)</span><br><span class=\"hljs-string\"></span><br><span class=\"hljs-string\">感谢围观本客户端源码，所有功能的代码都在本页面一个文件内，逻辑上会比较长和比较丑（关键地方或多或少有写注释），如感不适，请转头看看旁边的大长腿，再深呼吸一下继续看下一行~</span><br><span class=\"hljs-string\">Thank you for watching the source code of this client. The code of all functions is in one file on this page, which is logically long and ugly (more or less comments are written in key places). If you feel uncomfortable, please turn your head and look at the Big Long Legs next to you, take another deep breath and continue to look at the next line~</span><br><span class=\"hljs-string\">************************************/</span><br><span class=\"hljs-string\">&lt;/script&gt;</span><br><span class=\"hljs-string\"></span><br><span class=\"hljs-string\"></span><br><span class=\"hljs-string\">&lt;div class=&quot;main-load&quot; style=&quot;padding-top:40vh;text-align:center;font-size:28px&quot;&gt;Loading...&lt;/div&gt;</span><br><span class=\"hljs-string\">&lt;div class=&quot;main&quot; style=&quot;display:none&quot;&gt;</span><br><span class=\"hljs-string\">&lt;div class=&quot;mainBox acmeReadDirGotoCORSState&quot; style=&quot;display:none&quot;&gt;&lt;/div&gt;</span><br><span class=\"hljs-string\"></span><br><span class=\"hljs-string\">&lt;div class=&quot;mainBox&quot;&gt;</span><br><span class=\"hljs-string\">\t&lt;span style=&quot;font-size:32px;font-weight:bold;color:#03baed;&quot;&gt;</span><br><span class=\"hljs-string\">\t\t&lt;span class=&quot;langCN clientNameCN&quot;&gt;HTML5网页版ACME客户端&lt;/span&gt;</span><br><span class=\"hljs-string\">\t\t&lt;span class=&quot;langEN clientNameEN&quot;&gt;ACME Web Browser Client&lt;/span&gt;</span><br><span class=\"hljs-string\">\t&lt;/span&gt;</span><br><span class=\"hljs-string\">\t&lt;span class=&quot;versionBox&quot; style=&quot;font-size:14px;color:#03baed;margin-right:80px&quot;&gt;&lt;/span&gt;</span><br><span class=\"hljs-string\">\t&lt;span style=&quot;display:inline-block&quot;&gt;</span><br><span class=\"hljs-string\">\t\t&lt;span class=&quot;langCN&quot;&gt;开源代码：&lt;/span&gt;</span><br><span class=\"hljs-string\">\t\t&lt;span class=&quot;langEN&quot;&gt;Open source: &lt;/span&gt;</span><br><span class=\"hljs-string\">\t\t&lt;a href=&quot;https://github.com/xiangyuecn/ACME-HTML-Web-Browser-Client&quot; target=&quot;_blank&quot;&gt;GitHub &amp;gt;&amp;gt;&lt;/a&gt;</span><br><span class=\"hljs-string\">\t\t&lt;span class=&quot;langCN&quot;&gt;</span><br><span class=\"hljs-string\">\t\t\t| &lt;a href=&quot;https://gitee.com/xiangyuecn/ACME-HTML-Web-Browser-Client&quot; target=&quot;_blank&quot;&gt;Gitee &amp;gt;&amp;gt;&lt;/a&gt;</span><br><span class=\"hljs-string\">\t\t&lt;/span&gt;</span><br><span class=\"hljs-string\">\t&lt;/span&gt;</span><br><span class=\"hljs-string\">\t</span><br><span class=\"hljs-string\">\t&lt;ul class=&quot;itemBox feature_ul&quot; style=&quot;list-style-type: none;margin:8px 0 0 0;padding:0 8px 0 8px;color:#666&quot;&gt;</span><br><span class=\"hljs-string\">\t\t&lt;li class=&quot;langCN&quot;&gt;&lt;i&gt;功能用途&lt;/i&gt;本网页客户端用于：向 &lt;a href=&quot;https://letsencrypt.org/&quot; target=&quot;_blank&quot;&gt;Let&#x27;s Encrypt&lt;/a&gt;、&lt;a href=&quot;https://zerossl.com/&quot; target=&quot;_blank&quot;&gt;ZeroSSL&lt;/a&gt;、&lt;a href=&quot;https://pki.goog/&quot; target=&quot;_blank&quot;&gt;Google&lt;/a&gt; 等支持 ACME 协议的证书颁发机构，免费申请获得用于 HTTPS 的 SSL/TLS 域名证书（RSA、ECC/ECDSA），支持多域名和通配符泛域名；只需在现代浏览器上操作即可获得 PEM 格式纯文本的域名证书，不依赖操作系统环境，无需下载和安装软件，纯手动操作，&lt;span class=&quot;Bold&quot;&gt;只专注于申请获得证书这一件事。&lt;/span&gt;&lt;/li&gt;</span><br><span class=\"hljs-string\">\t\t&lt;li class=&quot;langEN&quot;&gt;&lt;i&gt;Functional use&lt;/i&gt;This web client is used to: apply for free SSL/TLS domain name certificates (RSA, ECC/ECDSA) for HTTPS from &lt;a href=&quot;https://letsencrypt.org/&quot; target=&quot;_blank&quot;&gt;Let&#x27;s Encrypt&lt;/a&gt; , &lt;a href=&quot;https://zerossl.com/&quot; target=&quot;_blank&quot;&gt;ZeroSSL&lt;/a&gt; , &lt;a href=&quot;https://pki.goog/&quot; target=&quot;_blank&quot;&gt;Google&lt;/a&gt; and other certificate authorities that support the ACME protocol, and support multiple domain names and wildcard pan-domain names; Simply operate on a modern browser to obtain a domain name certificate in plain text in PEM format, does not depend on the operating system environment, does not need to download and install software, and is purely manual, &lt;span class=&quot;Bold&quot;&gt;only focus on the only thing that is to apply for and obtain a certificate.&lt;/span&gt;&lt;/li&gt;</span><br><span class=\"hljs-string\">\t\t</span><br><span class=\"hljs-string\">\t\t&lt;li class=&quot;langCN&quot;&gt;&lt;i&gt;简单易用&lt;/i&gt;点点鼠标 Ctrl+C Ctrl+V 就能完成证书的申请，全程需要的操作少，每一步都有保姆级操作提示，UI友好大气美观；&lt;span class=&quot;Bold&quot;&gt;本客户端不需要注册账号、更不需要登录。&lt;/span&gt;&lt;/li&gt;</span><br><span class=\"hljs-string\">\t\t&lt;li class=&quot;langEN&quot;&gt;&lt;i&gt;Easy to use&lt;/i&gt;Click the mouse and Ctrl+C Ctrl+V to complete the certificate application. The whole process requires less operations, and there are nanny level operation prompts at each step; UI friendly, atmospheric and beautiful; &lt;span class=&quot;Bold&quot;&gt;This client does not need to register an account, and does not need to log in.&lt;/span&gt;&lt;/li&gt;</span><br><span class=\"hljs-string\">\t\t</span><br><span class=\"hljs-string\">\t\t&lt;li class=&quot;langCN&quot;&gt;&lt;i&gt;开源项目&lt;/i&gt;本网页客户端源码已开源，访问网址由托管仓库提供，源码透明可追溯。&lt;/li&gt;</span><br><span class=\"hljs-string\">\t\t&lt;li class=&quot;langEN&quot;&gt;&lt;i&gt;Open source project&lt;/i&gt;The source code of the client side of this webpage has been open sourced, and the access URL is provided by the hosting warehouse, and the source code is transparent and traceable.&lt;/li&gt;</span><br><span class=\"hljs-string\">\t\t</span><br><span class=\"hljs-string\">\t\t&lt;li class=&quot;langCN&quot;&gt;&lt;i&gt;单一文件&lt;/i&gt;本网页客户端仅一个静态 HTML 文件，不依赖其他任何文件；因此可以直接保存到你本地（右键-另存为），即可通过浏览器打开。&lt;/li&gt;</span><br><span class=\"hljs-string\">\t\t&lt;li class=&quot;langEN&quot;&gt;&lt;i&gt;A single file&lt;/i&gt;This web client is only a single static HTML web page file and does not depend on any other files; therefore, it can be directly saved to your local (right-click - save as), and you can open it through a browser.&lt;/li&gt;</span><br><span class=\"hljs-string\">\t\t</span><br><span class=\"hljs-string\">\t\t&lt;li class=&quot;langCN&quot;&gt;&lt;i&gt;数据安全&lt;/i&gt;除了你指定证书颁发机构的 ACME 接口地址外，本网页客户端不会向其他任何地址发送数据，通过浏览器控制台很容易做到网络数据审查。&lt;/li&gt;</span><br><span class=\"hljs-string\">\t\t&lt;li class=&quot;langEN&quot;&gt;&lt;i&gt;Data security&lt;/i&gt;Except for the ACME interface address of the certificate authority you specify, this web client will not send data to any other address, and it is easy to check the network data through the browser console.&lt;/li&gt;</span><br><span class=\"hljs-string\">\t\t</span><br><span class=\"hljs-string\">\t\t&lt;li class=&quot;langCN&quot;&gt;&lt;i&gt;系统安全&lt;/i&gt;纯网页应用，不会也无法对你的电脑系统做出任何修改。&lt;/li&gt;</span><br><span class=\"hljs-string\">\t\t&lt;li class=&quot;langEN&quot;&gt;&lt;i&gt;System security&lt;/i&gt;Pure web application, will not and cannot make any modification to your computer system.&lt;/li&gt;</span><br><span class=\"hljs-string\">\t\t</span><br><span class=\"hljs-string\">\t\t&lt;li class=&quot;langCN&quot; style=&quot;color:#cb1d1d&quot;&gt;&lt;i style=&quot;background:#cb1d1d&quot;&gt;证书过期风险提醒&lt;/i&gt;由于本网页客户端只能纯手动操作，不支持自动续期，需注意在证书过期前重新生申请新证书（免费证书普遍90天有效期，届时只需重复操作一遍即可），或使用 acme.sh 等客户端自动化续期。&lt;/li&gt;</span><br><span class=\"hljs-string\">\t\t&lt;li class=&quot;langEN&quot; style=&quot;color:#cb1d1d&quot;&gt;&lt;i style=&quot;background:#cb1d1d&quot;&gt;Certificate Expiration Risk Alert&lt;/i&gt;Since this web client can only be operated manually and does not support automatic renewal, you should pay attention to apply for a new certificate before the certificate expires (free certificates are generally valid for 90 days, you only need to repeat the operation at that time), or use acme.sh and other client automatic renewal.&lt;/li&gt;</span><br><span class=\"hljs-string\">\t&lt;/ul&gt;</span><br><span class=\"hljs-string\">\t&lt;style&gt;</span><br><span class=\"hljs-string\">\t\t.feature_ul li&#123;margin: 8px 0;&#125;</span><br><span class=\"hljs-string\">\t\t.feature_ul i&#123;</span><br><span class=\"hljs-string\">\t\t\tfont-style: normal;</span><br><span class=\"hljs-string\">\t\t\tmargin-right:8px;</span><br><span class=\"hljs-string\">\t\t\tdisplay: inline-block;</span><br><span class=\"hljs-string\">\t\t\tvertical-align: middle;</span><br><span class=\"hljs-string\">\t\t\tbackground: #03baed;</span><br><span class=\"hljs-string\">\t\t\tcolor: #fff;</span><br><span class=\"hljs-string\">\t\t\tfont-size: 14px;</span><br><span class=\"hljs-string\">\t\t\tpadding: 2px 8px;</span><br><span class=\"hljs-string\">\t\t\tborder-radius: 99px;</span><br><span class=\"hljs-string\">\t\t&#125;</span><br><span class=\"hljs-string\">\t&lt;/style&gt;</span><br><span class=\"hljs-string\">&lt;/div&gt;</span><br><span class=\"hljs-string\"></span><br><span class=\"hljs-string\"></span><br><span class=\"hljs-string\"></span><br><span class=\"hljs-string\"></span><br><span class=\"hljs-string\"></span><br><span class=\"hljs-string\">&lt;div class=&quot;mainBox&quot;&gt;</span><br><span class=\"hljs-string\">\t&lt;div class=&quot;pd itemTitle&quot;&gt;</span><br><span class=\"hljs-string\">\t\t&lt;span class=&quot;langCN&quot;&gt;步骤一：选择证书颁发机构&lt;/span&gt;</span><br><span class=\"hljs-string\">\t\t&lt;span class=&quot;langEN&quot;&gt;Step 1: Select a Certificate Authority&lt;/span&gt;</span><br><span class=\"hljs-string\">\t&lt;/div&gt;</span><br><span class=\"hljs-string\">\t&lt;div class=&quot;itemBox&quot;&gt;</span><br><span class=\"hljs-string\">\t\t&lt;div class=&quot;pd Bold&quot;&gt;</span><br><span class=\"hljs-string\">\t\t\t&lt;i class=&quot;must&quot;&gt;*&lt;/i&gt;</span><br><span class=\"hljs-string\">\t\t\t&lt;span class=&quot;langCN&quot;&gt;证书颁发机构 ACME(v2, &lt;a href=&quot;https://www.rfc-editor.org/rfc/rfc8555.html&quot; target=&quot;_blank&quot;&gt;RFC 8555&lt;/a&gt;) 服务URL：&lt;/span&gt;</span><br><span class=\"hljs-string\">\t\t\t&lt;span class=&quot;langEN&quot;&gt;Certificate Authority ACME (v2, &lt;a href=&quot;https://www.rfc-editor.org/rfc/rfc8555.html&quot; target=&quot;_blank&quot;&gt;RFC 8555&lt;/a&gt;) Service URL:&lt;/span&gt;</span><br><span class=\"hljs-string\">\t\t&lt;/div&gt;</span><br><span class=\"hljs-string\">\t\t&lt;div class=&quot;pd&quot;&gt;</span><br><span class=\"hljs-string\">\t\t\t&lt;label&gt;&lt;input type=&quot;radio&quot; name=&quot;choice_acmeURL&quot; value=&quot;https://acme-v02.api.letsencrypt.org/directory&quot; desckey=&quot;descLetsEncrypt&quot;&gt;Let&#x27;s Encrypt&lt;/label&gt;</span><br><span class=\"hljs-string\">\t\t\t&lt;label&gt;&lt;input type=&quot;radio&quot; name=&quot;choice_acmeURL&quot; value=&quot;https://acme.zerossl.com/v2/DV90/directory&quot; desckey=&quot;descZeroSSL&quot;&gt;ZeroSSL&lt;/label&gt;</span><br><span class=\"hljs-string\">\t\t\t&lt;label&gt;&lt;input type=&quot;radio&quot; name=&quot;choice_acmeURL&quot; value=&quot;https://dv.acme-v02.api.pki.goog/directory&quot; desckey=&quot;descGoogle&quot;&gt;Google&lt;/label&gt;</span><br><span class=\"hljs-string\">\t\t\t&lt;label&gt;</span><br><span class=\"hljs-string\">\t\t\t\t&lt;input type=&quot;radio&quot; name=&quot;choice_acmeURL&quot; value=&quot;manual&quot;&gt;</span><br><span class=\"hljs-string\">\t\t\t\t&lt;span class=&quot;langCN&quot;&gt;手动填写URL&lt;/span&gt;</span><br><span class=\"hljs-string\">\t\t\t\t&lt;span class=&quot;langEN&quot;&gt;Fill in the URL manually&lt;/span&gt;</span><br><span class=\"hljs-string\">\t\t\t&lt;/label&gt;</span><br><span class=\"hljs-string\">\t\t\t&lt;label&gt;</span><br><span class=\"hljs-string\">\t\t\t\t&lt;input type=&quot;radio&quot; name=&quot;choice_acmeURL&quot; value=&quot;https://acme-staging-v02.api.letsencrypt.org/directory&quot;&gt;</span><br><span class=\"hljs-string\">\t\t\t\t&lt;span class=&quot;langCN&quot;&gt;测试用[不要选]&lt;/span&gt;</span><br><span class=\"hljs-string\">\t\t\t\t&lt;span class=&quot;langEN&quot;&gt;For testing, don&#x27;t choose&lt;/span&gt;</span><br><span class=\"hljs-string\">\t\t\t&lt;/label&gt;</span><br><span class=\"hljs-string\">\t\t&lt;/div&gt;</span><br><span class=\"hljs-string\">\t\t</span><br><span class=\"hljs-string\">\t\t&lt;div style=&quot;font-size:13px;color:#aaa&quot;&gt;</span><br><span class=\"hljs-string\">\t\t\t&lt;div class=&quot;pd descAcmeURL descLetsEncrypt&quot; style=&quot;display:none&quot;&gt;</span><br><span class=\"hljs-string\">\t\t\t\t&lt;a href=&quot;https://letsencrypt.org/&quot; target=&quot;_blank&quot;&gt;Let&#x27;s Encrypt&lt;/a&gt;:</span><br><span class=\"hljs-string\">\t\t\t\t&lt;span class=&quot;langCN&quot;&gt;请按照下面的操作步骤提示进行申请即可得到证书，证书有效期90天。&lt;/span&gt;</span><br><span class=\"hljs-string\">\t\t\t\t&lt;span class=&quot;langEN&quot;&gt;Please follow the operation steps prompts below to apply, and you can get the certificate, which is valid for 90 days.&lt;/span&gt;</span><br><span class=\"hljs-string\">\t\t\t&lt;/div&gt;</span><br><span class=\"hljs-string\">\t\t\t&lt;div class=&quot;pd descAcmeURL descZeroSSL&quot; style=&quot;display:none&quot;&gt;</span><br><span class=\"hljs-string\">\t\t\t\t&lt;a href=&quot;https://zerossl.com/&quot; target=&quot;_blank&quot;&gt;ZeroSSL&lt;/a&gt;:</span><br><span class=\"hljs-string\">\t\t\t\t&lt;span style=&quot;color:#f80&quot;&gt;</span><br><span class=\"hljs-string\">\t\t\t\t\t&lt;span class=&quot;langCN&quot;&gt;此URL可能需要先根据下面的提示进行操作来消除跨域不能访问的问题。&lt;/span&gt;</span><br><span class=\"hljs-string\">\t\t\t\t\t&lt;span class=&quot;langEN&quot;&gt;This URL may need to be operated according to the prompts below to eliminate the problem of cross-domain inaccessibility.&lt;/span&gt;</span><br><span class=\"hljs-string\">\t\t\t\t&lt;/span&gt;</span><br><span class=\"hljs-string\">\t\t\t\t&lt;span class=&quot;langCN&quot;&gt;申请证书前，你需要根据ZeroSSL的&lt;a href=&quot;https://zerossl.com/documentation/acme/&quot; target=&quot;_blank&quot;&gt;官方文档&lt;/a&gt;，先注册ZeroSSL账号并生成一个EAB凭据，每次申请证书时使用此EAB凭据，按照下面的操作步骤提示进行申请即可得到证书，证书有效期90天。&lt;/span&gt;</span><br><span class=\"hljs-string\">\t\t\t\t&lt;span class=&quot;langEN&quot;&gt;Before applying for a certificate, you need to follow ZeroSSL&#x27;s &lt;a href=&quot;https://zerossl.com/documentation/acme/&quot; target=&quot;_blank&quot;&gt;official documents&lt;/a&gt;, register a ZeroSSL account and generate an EAB credential, and use this EAB credential every time you apply for a certificate, follow the operation steps prompts below to apply, and you can get the certificate, which is valid for 90 days.&lt;/span&gt;</span><br><span class=\"hljs-string\">\t\t\t&lt;/div&gt;</span><br><span class=\"hljs-string\">\t\t\t&lt;div class=&quot;pd descAcmeURL descGoogle&quot; style=&quot;display:none&quot;&gt;</span><br><span class=\"hljs-string\">\t\t\t\t&lt;a href=&quot;https://pki.goog/&quot; target=&quot;_blank&quot;&gt;Google Trust Services&lt;/a&gt;:</span><br><span class=\"hljs-string\">\t\t\t\t&lt;span style=&quot;color:#f80&quot;&gt;</span><br><span class=\"hljs-string\">\t\t\t\t\t&lt;span class=&quot;langCN&quot;&gt;此URL可能需要先根据下面的提示进行操作来消除跨域不能访问的问题。&lt;/span&gt;</span><br><span class=\"hljs-string\">\t\t\t\t\t&lt;span class=&quot;langEN&quot;&gt;This URL may need to be operated according to the prompts below to eliminate the problem of cross-domain inaccessibility.&lt;/span&gt;</span><br><span class=\"hljs-string\">\t\t\t\t&lt;/span&gt;</span><br><span class=\"hljs-string\">\t\t\t\t&lt;span class=&quot;langCN&quot;&gt;申请证书前，你需要根据Google的&lt;a href=&quot;https://cloud.google.com/certificate-manager/docs/public-ca-tutorial&quot; target=&quot;_blank&quot;&gt;官方文档&lt;/a&gt;，在Google Cloud中生成一个EAB凭据，每次申请证书时使用此EAB凭据，按照下面的操作步骤提示进行申请即可得到证书，证书有效期90天。&lt;/span&gt;</span><br><span class=\"hljs-string\">\t\t\t\t&lt;span class=&quot;langEN&quot;&gt;Before applying for a certificate, you need to follow Google&#x27;s &lt;a href=&quot;https://cloud.google.com/certificate-manager/docs/public-ca-tutorial&quot; target=&quot;_blank&quot;&gt;official documents&lt;/a&gt;, generate an EAB credential in Google Cloud, and use this EAB credential every time you apply for a certificate, follow the operation steps prompts below to apply, and you can get the certificate, which is valid for 90 days.&lt;/span&gt;</span><br><span class=\"hljs-string\">\t\t\t\t&lt;span style=&quot;color:#f80&quot;&gt;</span><br><span class=\"hljs-string\">\t\t\t\t\t&lt;span class=&quot;langCN&quot;&gt;注意：因为同一个Google EAB凭据只能绑定到一个ACME账户（私钥），因此你在首次申请证书时，&lt;span style=&quot;font-weight:bold;font-size:20px&quot;&gt;必须同时保存好在第二步操作中新创建的或手动填写的ACME账户私钥&lt;/span&gt;，下次申请证书时使用此EAB凭据必须和已保存的ACME账户私钥一起使用。&lt;/span&gt;</span><br><span class=\"hljs-string\">\t\t\t\t\t&lt;span class=&quot;langEN&quot;&gt;Note: Because the same Google EAB credential can only be bound to one ACME account (Private key), when you apply for a certificate for the first time, &lt;span style=&quot;font-weight:bold;font-size:20px&quot;&gt;you must also save the newly generated or manually filled ACME account private key in the second step&lt;/span&gt;, this EAB credential must be used together with the saved ACME account private key when applying for a certificate next time.&lt;/span&gt;</span><br><span class=\"hljs-string\">\t\t\t\t&lt;/span&gt;</span><br><span class=\"hljs-string\">\t\t\t&lt;/div&gt;</span><br><span class=\"hljs-string\">\t\t&lt;/div&gt;</span><br><span class=\"hljs-string\">\t\t</span><br><span class=\"hljs-string\">\t\t&lt;div class=&quot;pd FlexBox&quot;&gt;</span><br><span class=\"hljs-string\">\t\t\t&lt;div class=&quot;FlexItem&quot;&gt;</span><br><span class=\"hljs-string\">\t\t\t\t&lt;input class=&quot;in_acmeURL inputLang&quot; style=&quot;width:100%&quot; placeholder-cn=&quot;请填写证书颁发机构ACME服务URL&quot; placeholder-en=&quot;Please fill in the Certificate Authority ACME Service URL&quot;&gt;</span><br><span class=\"hljs-string\">\t\t\t&lt;/div&gt;</span><br><span class=\"hljs-string\">\t\t\t&lt;div style=&quot;padding-left:12px&quot;&gt;</span><br><span class=\"hljs-string\">\t\t\t\t&lt;span class=&quot;mainBtn mainBtnMin&quot; onclick=&quot;acmeReadDirClick()&quot; style=&quot;padding:0 50px&quot;&gt;</span><br><span class=\"hljs-string\">\t\t\t\t\t&lt;span class=&quot;langCN&quot;&gt;读取服务目录&lt;/span&gt;</span><br><span class=\"hljs-string\">\t\t\t\t\t&lt;span class=&quot;langEN&quot;&gt;Read service directory&lt;/span&gt;</span><br><span class=\"hljs-string\">\t\t\t\t&lt;/span&gt;</span><br><span class=\"hljs-string\">\t\t\t&lt;/div&gt;</span><br><span class=\"hljs-string\">\t\t&lt;/div&gt;</span><br><span class=\"hljs-string\">\t\t&lt;div class=&quot;acmeReadDirState&quot;&gt;&lt;/div&gt;</span><br><span class=\"hljs-string\">&lt;script&gt;</span><br><span class=\"hljs-string\">//跨域支持的不好的ACME服务，直接复制源码到他们网站里面运行</span><br><span class=\"hljs-string\">var acmeReadDirGotoCORSInit=function()&#123;</span><br><span class=\"hljs-string\">\tif(!window.IsReadDirGotoCORS)return;</span><br><span class=\"hljs-string\">\tvar stateEl=$(&quot;.acmeReadDirGotoCORSState&quot;).show().html(\\`</span><br><span class=\"hljs-string\">&lt;div style=&quot;color:#cb1d1d&quot;&gt;</span><br><span class=\"hljs-string\">\t&lt;span class=&quot;langCN&quot;&gt;本客户端正在以跨域兼容模式运行，请按正常流程操作即可，目标ACME服务URL=$\\&#123;window.Default_ACME_URL&#125;&lt;/span&gt;</span><br><span class=\"hljs-string\">\t&lt;span class=&quot;langEN&quot;&gt;This client is running in cross-domain compatibility mode, please follow the normal process, the target ACME service URL=$\\&#123;window.Default_ACME_URL&#125;&lt;/span&gt;</span><br><span class=\"hljs-string\">&lt;/div&gt;</span><br><span class=\"hljs-string\">\t\\`);</span><br><span class=\"hljs-string\">\tLangReview(stateEl);</span><br><span class=\"hljs-string\">&#125;;</span><br><span class=\"hljs-string\">var acmeReadDirGotoCORS=function(title)&#123;</span><br><span class=\"hljs-string\">\t&quot;use strict&quot;;</span><br><span class=\"hljs-string\">\tvar codes=&quot;// &quot;+Lang(&quot;请复制本代码到打开的ACME服务URL页面的浏览器控制台中运行。&quot;,&quot;Please copy this code to the browser console of the opened ACME service URL page to run.&quot;,true)</span><br><span class=\"hljs-string\">\t\t+&quot;\\\\n\\\\nvar Default_ACME_URL=&quot;+JSON.stringify(ACME.URL)+&quot;;&quot;</span><br><span class=\"hljs-string\">\t\t+&quot;\\\\nvar IsReadDirGotoCORS=true;&quot;</span><br><span class=\"hljs-string\">\t\t+&quot;\\\\nvar PageRawHTML=\\`&quot;</span><br><span class=\"hljs-string\">\t\t\t+PageRawHTML.replace(/\\\\\\\\/g,&quot;\\\\\\\\\\\\\\\\&quot;).replace(/\\`/g,&quot;\\\\\\\\\\`&quot;).replace(/\\\\$\\\\&#123;/g,&quot;$\\\\\\\\&#123;&quot;)</span><br><span class=\"hljs-string\">\t\t+&quot;\\`;&quot;;</span><br><span class=\"hljs-string\">\tcodes+=&quot;\\\\n(&quot;+(function()&#123;</span><br><span class=\"hljs-string\">\t\tconsole.clear();</span><br><span class=\"hljs-string\">\t\tdocument.head.innerHTML=/&lt;head[^&gt;]*&gt;([\\\\S\\\\s]+?)&lt;\\\\/head&gt;/i.exec(PageRawHTML)[1];</span><br><span class=\"hljs-string\">\t\tdocument.body.innerHTML=/&lt;body[^&gt;]*&gt;([\\\\S\\\\s]+)&lt;\\\\/body&gt;/i.exec(PageRawHTML)[1];</span><br><span class=\"hljs-string\">\t\tvar js=/&lt;script[^&gt;]*&gt;([\\\\S\\\\s]+?)&lt;\\\\/script&gt;/ig,m;</span><br><span class=\"hljs-string\">\t\twhile(m=js.exec(PageRawHTML)) eval.call(window, m[1]);</span><br><span class=\"hljs-string\">\t&#125;).toString()+&quot;)()&quot;;</span><br><span class=\"hljs-string\">\t$(&quot;.gotoCORSBox&quot;).hide();</span><br><span class=\"hljs-string\">\tvar stateEl=$(&quot;.acmeReadDirState&quot;).append(\\`</span><br><span class=\"hljs-string\">&lt;div class=&quot;gotoCORSBox&quot; style=&quot;padding-top:15px&quot;&gt;</span><br><span class=\"hljs-string\">\t&lt;div class=&quot;pd Bold&quot; style=&quot;color:red&quot;&gt;</span><br><span class=\"hljs-string\">\t\t&lt;i class=&quot;must&quot;&gt;*&lt;/i&gt;</span><br><span class=\"hljs-string\">\t\t\\`+(title||\\`</span><br><span class=\"hljs-string\">\t\t&lt;span class=&quot;langCN&quot;&gt;由于此ACME服务对跨域访问支持不良，&lt;/span&gt;</span><br><span class=\"hljs-string\">\t\t&lt;span class=&quot;langEN&quot;&gt;Because this ACME service has poor support for cross-domain access, &lt;/span&gt;</span><br><span class=\"hljs-string\">\t\t&lt;span style=&quot;font-size:24px&quot;&gt;</span><br><span class=\"hljs-string\">\t\t\t&lt;span class=&quot;langCN&quot;&gt;请按下面步骤操作：&lt;/span&gt;</span><br><span class=\"hljs-string\">\t\t\t&lt;span class=&quot;langEN&quot;&gt;please follow the steps below:&lt;/span&gt;</span><br><span class=\"hljs-string\">\t\t&lt;/span&gt;\\`)+\\`</span><br><span class=\"hljs-string\">\t&lt;/div&gt;</span><br><span class=\"hljs-string\">&lt;div style=&quot;padding-left:40px&quot;&gt;</span><br><span class=\"hljs-string\">\t&lt;div class=&quot;pd&quot;&gt;</span><br><span class=\"hljs-string\">\t\t&lt;span class=&quot;langCN&quot;&gt;1. 请在浏览器中直接打开此ACME服务URL，&lt;a href=&quot;$\\&#123;ACME.URL&#125;&quot; target=&quot;_blank&quot;&gt;点此打开&lt;/a&gt;；&lt;/span&gt;</span><br><span class=\"hljs-string\">\t\t&lt;span class=&quot;langEN&quot;&gt;1. Please open the ACME service URL directly in the browser, &lt;a href=&quot;$\\&#123;ACME.URL&#125;&quot; target=&quot;_blank&quot;&gt;click here to open&lt;/a&gt;;&lt;/span&gt;</span><br><span class=\"hljs-string\">\t&lt;/div&gt;</span><br><span class=\"hljs-string\">\t&lt;div class=&quot;pd&quot;&gt;</span><br><span class=\"hljs-string\">\t\t&lt;span class=&quot;langCN&quot;&gt;2. 在上一步打开的页面中打开浏览器控制台（需等页面加载完成后，再按F12键）；&lt;/span&gt;</span><br><span class=\"hljs-string\">\t\t&lt;span class=&quot;langEN&quot;&gt;2. Open the browser console in the page opened in the previous step (after the page is loaded, press the F12 key);&lt;/span&gt;</span><br><span class=\"hljs-string\">\t&lt;/div&gt;</span><br><span class=\"hljs-string\">\t&lt;div class=&quot;pd&quot;&gt;</span><br><span class=\"hljs-string\">\t\t&lt;span class=&quot;langCN&quot;&gt;3. 复制以下代码，在第2步打开的浏览器控制台中运行，然后就可以正常申请证书了。&lt;/span&gt;</span><br><span class=\"hljs-string\">\t\t&lt;span class=&quot;langEN&quot;&gt;3. Copy the following code, run it in the browser console opened in step 2, and then you can apply for the certificate normally.&lt;/span&gt;</span><br><span class=\"hljs-string\">\t&lt;/div&gt;</span><br><span class=\"hljs-string\">\t&lt;div class=&quot;pd&quot; style=&quot;font-size:13px;color:#aaa&quot;&gt;</span><br><span class=\"hljs-string\">\t\t&lt;span class=&quot;langCN&quot;&gt;工作原理：代码内包含了本页面源码，在目标页面内运行后将原样的显示出本客户端，然后按正常流程操作即可，此时已没有跨域问题了（既然打不过，那就加入他们）。&lt;/span&gt;</span><br><span class=\"hljs-string\">\t\t&lt;span class=&quot;langEN&quot;&gt;Working principle: The code contains the source code of this page. After running in the target page, the client will be displayed as it is, and then operate according to the normal process. At this time, there is no cross-domain problem (if we can&#x27;t beat them, we&#x27;d better join them).&lt;/span&gt;</span><br><span class=\"hljs-string\">\t&lt;/div&gt;</span><br><span class=\"hljs-string\">&lt;/div&gt;</span><br><span class=\"hljs-string\">\t&lt;div style=&quot;padding-top:20px&quot;&gt;</span><br><span class=\"hljs-string\">\t\t&lt;textarea class=&quot;gotoCORSText&quot; style=&quot;width:100%;height:200px&quot; readonly&gt;&lt;/textarea&gt;</span><br><span class=\"hljs-string\">\t&lt;/div&gt;</span><br><span class=\"hljs-string\">&lt;/div&gt;</span><br><span class=\"hljs-string\">\t\\`);</span><br><span class=\"hljs-string\">\t$(&quot;.gotoCORSText&quot;).val(codes);</span><br><span class=\"hljs-string\">\tLangReview(stateEl);</span><br><span class=\"hljs-string\">&#125;;</span><br><span class=\"hljs-string\">&lt;/script&gt;</span><br><span class=\"hljs-string\">\t&lt;/div&gt;</span><br><span class=\"hljs-string\">&lt;/div&gt;</span><br><span class=\"hljs-string\"></span><br><span class=\"hljs-string\"></span><br><span class=\"hljs-string\"></span><br><span class=\"hljs-string\"></span><br><span class=\"hljs-string\"></span><br><span class=\"hljs-string\">&lt;div class=&quot;mainBox&quot;&gt;</span><br><span class=\"hljs-string\">\t&lt;div class=&quot;pd itemTitle&quot;&gt;</span><br><span class=\"hljs-string\">\t\t&lt;span class=&quot;langCN&quot;&gt;步骤二：证书配置&lt;/span&gt;</span><br><span class=\"hljs-string\">\t\t&lt;span class=&quot;langEN&quot;&gt;Step 2: Certificate Configuration&lt;/span&gt;</span><br><span class=\"hljs-string\">\t&lt;/div&gt;</span><br><span class=\"hljs-string\">\t&lt;div class=&quot;step2Hide step1Show&quot;&gt;</span><br><span class=\"hljs-string\">\t\t&lt;div class=&quot;itemBox&quot; style=&quot;color:#999&quot;&gt;</span><br><span class=\"hljs-string\">\t\t\t&lt;span class=&quot;langCN&quot;&gt;等待中，请先完成第一步...&lt;/span&gt;</span><br><span class=\"hljs-string\">\t\t\t&lt;span class=&quot;langEN&quot;&gt;Waiting, please complete step 1 first...&lt;/span&gt;</span><br><span class=\"hljs-string\">\t\t&lt;/div&gt;</span><br><span class=\"hljs-string\">\t&lt;/div&gt;</span><br><span class=\"hljs-string\">\t&lt;div class=&quot;step1Hide step2Show&quot;&gt;</span><br><span class=\"hljs-string\">\t\t</span><br><span class=\"hljs-string\">\t\t</span><br><span class=\"hljs-string\">\t\t&lt;div class=&quot;pd&quot; style=&quot;font-size:13px;color:#aaa&quot;&gt;</span><br><span class=\"hljs-string\">\t\t\t&lt;span class=&quot;langCN&quot;&gt;温馨提示：如果上次申请过证书，可以拖拽已下载保存的记录LOG文件到本页面，将自动填充上次的配置信息。&lt;/span&gt;</span><br><span class=\"hljs-string\">\t\t\t&lt;span class=&quot;langEN&quot;&gt;Reminder: If you have applied for a certificate last time, you can drag and drop the downloaded and saved record LOG file to this page, and the last configuration information will be automatically filled in.&lt;/span&gt;</span><br><span class=\"hljs-string\">\t\t&lt;/div&gt;</span><br><span class=\"hljs-string\">\t\t</span><br><span class=\"hljs-string\">\t\t</span><br><span class=\"hljs-string\">\t\t&lt;div class=&quot;itemBox&quot;&gt;</span><br><span class=\"hljs-string\">\t\t\t&lt;div class=&quot;pd Bold&quot;&gt;</span><br><span class=\"hljs-string\">\t\t\t\t&lt;i class=&quot;must&quot;&gt;*&lt;/i&gt;</span><br><span class=\"hljs-string\">\t\t\t\t&lt;span class=&quot;langCN&quot;&gt;证书中要包含的域名：&lt;/span&gt;</span><br><span class=\"hljs-string\">\t\t\t\t&lt;span class=&quot;langEN&quot;&gt;Domain name to be included in the certificate:&lt;/span&gt;</span><br><span class=\"hljs-string\">\t\t\t&lt;/div&gt;</span><br><span class=\"hljs-string\">\t\t\t&lt;div class=&quot;pd&quot; style=&quot;font-size:13px;color:#aaa&quot;&gt;</span><br><span class=\"hljs-string\">\t\t\t\t&lt;span class=&quot;langCN&quot;&gt;一个证书可以包含多个域名（支持通配符），比如填写：&lt;i class=&quot;i&quot;&gt;a.com, *.a.com, b.com, *.b.com&lt;/i&gt;；第一个域名将作为证书的通用名称（Common Name）；带通配符的域名只支持DNS验证，其他域名支持上传文件验证；注意：填了&lt;i class=&quot;i&quot;&gt;www.a.com&lt;/i&gt;时，一般需要额外填上&lt;i class=&quot;i&quot;&gt;a.com&lt;/i&gt;。&lt;/span&gt;</span><br><span class=\"hljs-string\">\t\t\t\t&lt;span class=&quot;langEN&quot;&gt;A certificate can contain multiple domain names (wildcard are supported), for example, fill in: &lt;i class=&quot;i&quot;&gt;a.com, *.a.com, b.com, *.b.com&lt;/i&gt;; the first domain name will be used as the Common Name of the certificate; Domain names with wildcard only support DNS verification, and other domain names support upload file verification ; Note: When &lt;i class=&quot;i&quot;&gt;www.a.com&lt;/i&gt; is filled in, it is generally necessary to fill in &lt;i class=&quot;i&quot;&gt;a.com&lt;/i&gt; additionally.&lt;/span&gt;</span><br><span class=\"hljs-string\">\t\t\t&lt;/div&gt;</span><br><span class=\"hljs-string\">\t\t\t&lt;div class=&quot;FlexBox&quot;&gt;</span><br><span class=\"hljs-string\">\t\t\t\t&lt;div class=&quot;FlexItem&quot;&gt;</span><br><span class=\"hljs-string\">\t\t\t\t\t&lt;input class=&quot;in_domains inputLang&quot; style=&quot;width:100%&quot; placeholder-cn=&quot;请填写你的域名，多个用逗号隔开&quot; placeholder-en=&quot;Please fill in your domain name, multiple separated by commas&quot;&gt;</span><br><span class=\"hljs-string\">\t\t\t\t&lt;/div&gt;</span><br><span class=\"hljs-string\">\t\t\t\t&lt;div style=&quot;padding-left:15px;line-height:30px;font-size:13px;color:#aaa&quot;&gt;</span><br><span class=\"hljs-string\">\t\t\t\t\t&lt;label&gt;</span><br><span class=\"hljs-string\">\t\t\t\t\t\t&lt;input type=&quot;checkbox&quot; class=&quot;choice_domains_store&quot;&gt;</span><br><span class=\"hljs-string\">\t\t\t\t\t\t&lt;span class=&quot;langCN&quot;&gt;记住&lt;/span&gt;</span><br><span class=\"hljs-string\">\t\t\t\t\t\t&lt;span class=&quot;langEN&quot;&gt;Remember&lt;/span&gt;</span><br><span class=\"hljs-string\">\t\t\t\t\t&lt;/label&gt;</span><br><span class=\"hljs-string\">\t\t\t\t&lt;/div&gt;</span><br><span class=\"hljs-string\">\t\t\t&lt;/div&gt;</span><br><span class=\"hljs-string\">\t\t&lt;/div&gt;</span><br><span class=\"hljs-string\">\t\t</span><br><span class=\"hljs-string\">\t\t</span><br><span class=\"hljs-string\">\t\t&lt;div class=&quot;itemBox&quot;&gt;</span><br><span class=\"hljs-string\">\t\t\t&lt;div class=&quot;pd Bold&quot;&gt;</span><br><span class=\"hljs-string\">\t\t\t\t&lt;i class=&quot;must&quot;&gt;*&lt;/i&gt;</span><br><span class=\"hljs-string\">\t\t\t\t&lt;span class=&quot;langCN&quot;&gt;证书的私钥：&lt;/span&gt;</span><br><span class=\"hljs-string\">\t\t\t\t&lt;span class=&quot;langEN&quot;&gt;Private key of certificate:&lt;/span&gt;</span><br><span class=\"hljs-string\">\t\t\t&lt;/div&gt;</span><br><span class=\"hljs-string\">\t\t\t&lt;div class=&quot;pd&quot; style=&quot;font-size:13px;color:#aaa&quot;&gt;</span><br><span class=\"hljs-string\">\t\t\t\t&lt;span class=&quot;langCN&quot;&gt;生成或填写的私钥仅用于ACME接口签名，支持&lt;i class=&quot;i&quot;&gt;RSA(2048位+)&lt;/i&gt;、&lt;i class=&quot;i&quot;&gt;ECC(&lt;span class=&quot;eccCurveNames&quot;&gt;&lt;/span&gt;曲线)&lt;/i&gt;私钥；&lt;span style=&quot;color:#f80&quot;&gt;注意：证书私钥的类型决定了申请到的证书是RSA证书还是ECC(ECDSA)证书，RSA类型适用性更广也更常见&lt;/span&gt;；本客户端不会对此私钥进行保存或发送给其他任何人；证书签发后在部署到服务器时，需使用到此私钥；建议每次申请证书时均生成新的证书私钥。&lt;/span&gt;</span><br><span class=\"hljs-string\">\t\t\t\t&lt;span class=&quot;langEN&quot;&gt;The generated or filled private key is only used for ACME interface signature, and supports &lt;i class=&quot;i&quot;&gt;RSA (2048-bit+)&lt;/i&gt; and &lt;i class=&quot;i&quot;&gt;ECC (&lt;span class=&quot;eccCurveNames&quot;&gt;&lt;/span&gt; curve)&lt;/i&gt; private keys; &lt;span style=&quot;color:#f80&quot;&gt;Note: The type of certificate private key determines whether the applied certificate is an RSA certificate or a ECC(ECDSA) certificate, RSA type is more widely applicable and more common;&lt;/span&gt; this client will not save or send this private key to anyone else; this private key needs to be used when deploying to the server after the certificate is issued; it is recommended to generate a new certificate private key every time you apply for a certificate.&lt;/span&gt;</span><br><span class=\"hljs-string\">\t\t\t&lt;/div&gt;</span><br><span class=\"hljs-string\">\t\t\t&lt;div class=&quot;pd&quot;&gt;</span><br><span class=\"hljs-string\">\t\t\t\t&lt;label&gt;</span><br><span class=\"hljs-string\">\t\t\t\t\t&lt;input type=&quot;radio&quot; name=&quot;choice_privateKey&quot; value=&quot;generateRSA&quot;&gt;</span><br><span class=\"hljs-string\">\t\t\t\t\t&lt;span class=&quot;langCN&quot;&gt;创建新RSA私钥&lt;/span&gt;</span><br><span class=\"hljs-string\">\t\t\t\t\t&lt;span class=&quot;langEN&quot;&gt;Generate RSA private key&lt;/span&gt;</span><br><span class=\"hljs-string\">\t\t\t\t&lt;/label&gt;</span><br><span class=\"hljs-string\">\t\t\t\t&lt;label&gt;</span><br><span class=\"hljs-string\">\t\t\t\t\t&lt;input type=&quot;radio&quot; name=&quot;choice_privateKey&quot; value=&quot;generateECC&quot;&gt;</span><br><span class=\"hljs-string\">\t\t\t\t\t&lt;span class=&quot;langCN&quot;&gt;创建新ECC私钥&lt;/span&gt;</span><br><span class=\"hljs-string\">\t\t\t\t\t&lt;span class=&quot;langEN&quot;&gt;Generate ECC private key&lt;/span&gt;</span><br><span class=\"hljs-string\">\t\t\t\t&lt;/label&gt;</span><br><span class=\"hljs-string\">\t\t\t\t&lt;label&gt;</span><br><span class=\"hljs-string\">\t\t\t\t\t&lt;input type=&quot;radio&quot; name=&quot;choice_privateKey&quot; value=&quot;manual&quot;&gt;</span><br><span class=\"hljs-string\">\t\t\t\t\t&lt;span class=&quot;langCN&quot;&gt;手动填写私钥&lt;/span&gt;</span><br><span class=\"hljs-string\">\t\t\t\t\t&lt;span class=&quot;langEN&quot;&gt;Manually fill in the private key&lt;/span&gt;</span><br><span class=\"hljs-string\">\t\t\t\t&lt;/label&gt;</span><br><span class=\"hljs-string\">\t\t\t&lt;/div&gt;</span><br><span class=\"hljs-string\">\t\t\t&lt;div class=&quot;privateKeyBox&quot;&gt;</span><br><span class=\"hljs-string\">\t\t\t\t&lt;textarea class=&quot;in_privateKey inputLang&quot; style=&quot;width:100%;height:60px&quot; placeholder-cn=&quot;请填写pem私钥，私钥文本以 -----BEGIN PRIVATE KEY----- 开头（这是PKCS#8格式，里面带有 RSA|EC 字符的PKCS#1格式也是支持的）&quot; placeholder-en=&quot;Please fill in the pem private key. The private key text starts with -----BEGIN PRIVATE KEY----- (this is in PKCS#8 format, and PKCS#1 format with RSA|EC characters in it is also supported)&quot;&gt;&lt;/textarea&gt;</span><br><span class=\"hljs-string\">\t\t\t&lt;/div&gt;</span><br><span class=\"hljs-string\">\t\t\t&lt;div class=&quot;privateKeyState&quot;&gt;&lt;/div&gt;</span><br><span class=\"hljs-string\">\t\t&lt;/div&gt;</span><br><span class=\"hljs-string\">\t\t</span><br><span class=\"hljs-string\">\t\t</span><br><span class=\"hljs-string\">\t\t&lt;div class=&quot;itemBox&quot;&gt;</span><br><span class=\"hljs-string\">\t\t\t&lt;div class=&quot;pd Bold&quot;&gt;</span><br><span class=\"hljs-string\">\t\t\t\t&lt;i class=&quot;must&quot;&gt;*&lt;/i&gt;</span><br><span class=\"hljs-string\">\t\t\t\t&lt;span class=&quot;langCN&quot;&gt;ACME账户的私钥：&lt;/span&gt;</span><br><span class=\"hljs-string\">\t\t\t\t&lt;span class=&quot;langEN&quot;&gt;Private key of ACME account:&lt;/span&gt;</span><br><span class=\"hljs-string\">\t\t\t&lt;/div&gt;</span><br><span class=\"hljs-string\">\t\t\t&lt;div class=&quot;pd&quot; style=&quot;font-size:13px;color:#aaa&quot;&gt;</span><br><span class=\"hljs-string\">\t\t\t\t&lt;span class=&quot;langCN&quot;&gt;生成或填写的私钥仅用于ACME接口签名，支持&lt;i class=&quot;i&quot;&gt;RSA(2048位+)&lt;/i&gt;、&lt;i class=&quot;i&quot;&gt;ECC(&lt;span class=&quot;eccCurveNames&quot;&gt;&lt;/span&gt;曲线)&lt;/i&gt;私钥；账户私钥类型对证书无影响；本客户端不会对此私钥进行保存或发送给其他任何人；一个私钥相当于一个账户，可用于吊销已签发的证书；建议每次申请证书时使用相同的一个私钥（这样短期内多次申请证书时，验证域名所有权的参数极有可能会保持相同），不过每次都生成一个新的私钥大部分情况下也不会有问题。&lt;/span&gt;</span><br><span class=\"hljs-string\">\t\t\t\t&lt;span class=&quot;langEN&quot;&gt;The generated or filled private key is only used for ACME interface signature, and supports &lt;i class=&quot;i&quot;&gt;RSA (2048-bit+)&lt;/i&gt; and &lt;i class=&quot;i&quot;&gt;ECC (&lt;span class=&quot;eccCurveNames&quot;&gt;&lt;/span&gt; curve)&lt;/i&gt; private keys; the account private key type has no effect on the certificate; this client will not save or send this private key to anyone else; A private key is equivalent to an account and can be used to revoke an issued certificate; it is recommended to use the same private key every time you apply for a certificate (in this way, the parameters used to verify the domain name ownership are likely to remain identical when multiple certificate applications are made in a short period of time); However, generating a new private key every time will not be a problem in most cases.&lt;/span&gt;</span><br><span class=\"hljs-string\">\t\t\t\t&lt;span class=&quot;eabShow&quot; style=&quot;color:#f80&quot;&gt;</span><br><span class=\"hljs-string\">\t\t\t\t\t&lt;span class=&quot;langCN&quot;&gt;注意：如果你选择的ACME服务（比如Google）要求提供EAB凭据并且限制了同一个EAB凭据只能绑定到一个ACME账户（私钥），那每次使用此EAB凭据时必须使用相同的一个私钥（首次时如果新创建了私钥，此新私钥需立即保存起来下次和此EAB凭据一起使用）。&lt;/span&gt;</span><br><span class=\"hljs-string\">\t\t\t\t\t&lt;span class=&quot;langEN&quot;&gt;Note: If the ACME service you choose (such as Google) requires EAB credentials and limits the same EAB credentials to only one ACME account (private key), then you must use the same private key every time you use this EAB credential (if you generate a new private key for the first time, this new private key needs to be saved immediately and used with this EAB credential next time).&lt;/span&gt;</span><br><span class=\"hljs-string\">\t\t\t\t&lt;/span&gt;</span><br><span class=\"hljs-string\">\t\t\t&lt;/div&gt;</span><br><span class=\"hljs-string\">\t\t\t&lt;div class=&quot;pd&quot;&gt;</span><br><span class=\"hljs-string\">\t\t\t\t&lt;label&gt;</span><br><span class=\"hljs-string\">\t\t\t\t\t&lt;input type=&quot;radio&quot; name=&quot;choice_accountKey&quot; value=&quot;generateRSA&quot;&gt;</span><br><span class=\"hljs-string\">\t\t\t\t\t&lt;span class=&quot;langCN&quot;&gt;创建新RSA私钥&lt;/span&gt;</span><br><span class=\"hljs-string\">\t\t\t\t\t&lt;span class=&quot;langEN&quot;&gt;Generate RSA private key&lt;/span&gt;</span><br><span class=\"hljs-string\">\t\t\t\t&lt;/label&gt;</span><br><span class=\"hljs-string\">\t\t\t\t&lt;label&gt;</span><br><span class=\"hljs-string\">\t\t\t\t\t&lt;input type=&quot;radio&quot; name=&quot;choice_accountKey&quot; value=&quot;generateECC&quot;&gt;</span><br><span class=\"hljs-string\">\t\t\t\t\t&lt;span class=&quot;langCN&quot;&gt;创建新ECC私钥&lt;/span&gt;</span><br><span class=\"hljs-string\">\t\t\t\t\t&lt;span class=&quot;langEN&quot;&gt;Generate ECC private key&lt;/span&gt;</span><br><span class=\"hljs-string\">\t\t\t\t&lt;/label&gt;</span><br><span class=\"hljs-string\">\t\t\t\t&lt;label&gt;</span><br><span class=\"hljs-string\">\t\t\t\t\t&lt;input type=&quot;radio&quot; name=&quot;choice_accountKey&quot; value=&quot;manual&quot;&gt;</span><br><span class=\"hljs-string\">\t\t\t\t\t&lt;span class=&quot;langCN&quot;&gt;手动填写私钥&lt;/span&gt;</span><br><span class=\"hljs-string\">\t\t\t\t\t&lt;span class=&quot;langEN&quot;&gt;Manually fill in the private key&lt;/span&gt;</span><br><span class=\"hljs-string\">\t\t\t\t&lt;/label&gt;</span><br><span class=\"hljs-string\">\t\t\t&lt;/div&gt;</span><br><span class=\"hljs-string\">\t\t\t&lt;div class=&quot;accountKeyBox&quot;&gt;</span><br><span class=\"hljs-string\">\t\t\t\t&lt;textarea class=&quot;in_accountKey inputLang&quot; style=&quot;width:100%;height:60px&quot; placeholder-cn=&quot;请填写pem私钥，私钥文本以 -----BEGIN PRIVATE KEY----- 开头（这是PKCS#8格式，里面带有 RSA|EC 字符的PKCS#1格式也是支持的）&quot; placeholder-en=&quot;Please fill in the pem private key. The private key text starts with -----BEGIN PRIVATE KEY----- (this is in PKCS#8 format, and PKCS#1 format with RSA|EC characters in it is also supported)&quot;&gt;&lt;/textarea&gt;</span><br><span class=\"hljs-string\">\t\t\t&lt;/div&gt;</span><br><span class=\"hljs-string\">\t\t\t&lt;div class=&quot;accountKeyState&quot;&gt;&lt;/div&gt;</span><br><span class=\"hljs-string\">\t\t&lt;/div&gt;</span><br><span class=\"hljs-string\">\t\t</span><br><span class=\"hljs-string\">\t\t</span><br><span class=\"hljs-string\">\t\t&lt;div class=&quot;itemBox&quot;&gt;</span><br><span class=\"hljs-string\">\t\t\t&lt;div class=&quot;pd Bold&quot;&gt;</span><br><span class=\"hljs-string\">\t\t\t\t&lt;i class=&quot;must&quot;&gt;*&lt;/i&gt;</span><br><span class=\"hljs-string\">\t\t\t\t&lt;span class=&quot;langCN&quot;&gt;ACME账户的联系邮箱：&lt;/span&gt;</span><br><span class=\"hljs-string\">\t\t\t\t&lt;span class=&quot;langEN&quot;&gt;Contact email of ACME account:&lt;/span&gt;</span><br><span class=\"hljs-string\">\t\t\t&lt;/div&gt;</span><br><span class=\"hljs-string\">\t\t\t&lt;div class=&quot;pd&quot; style=&quot;font-size:13px;color:#aaa&quot;&gt;</span><br><span class=\"hljs-string\">\t\t\t\t&lt;span class=&quot;langCN&quot;&gt;此邮箱地址用于证书颁发机构给你发送邮件，比如：证书过期前的续期通知提醒。&lt;/span&gt;</span><br><span class=\"hljs-string\">\t\t\t\t&lt;span class=&quot;langEN&quot;&gt;This email address is used by the certificate authority to send you emails, such as a reminder of renewal notice before the certificate expires.&lt;/span&gt;</span><br><span class=\"hljs-string\">\t\t\t&lt;/div&gt;</span><br><span class=\"hljs-string\">\t\t\t&lt;div class=&quot;FlexBox&quot;&gt;</span><br><span class=\"hljs-string\">\t\t\t\t&lt;div class=&quot;FlexItem&quot;&gt;</span><br><span class=\"hljs-string\">\t\t\t\t\t&lt;input class=&quot;in_email inputLang&quot; style=&quot;width:100%&quot; placeholder-cn=&quot;请填写一个你的邮箱&quot; placeholder-en=&quot;Please fill in one of your email addresses&quot;&gt;</span><br><span class=\"hljs-string\">\t\t\t\t&lt;/div&gt;</span><br><span class=\"hljs-string\">\t\t\t\t&lt;div style=&quot;padding-left:15px;line-height:30px;font-size:13px;color:#aaa&quot;&gt;</span><br><span class=\"hljs-string\">\t\t\t\t\t&lt;label&gt;</span><br><span class=\"hljs-string\">\t\t\t\t\t\t&lt;input type=&quot;checkbox&quot; class=&quot;choice_email_store&quot;&gt;</span><br><span class=\"hljs-string\">\t\t\t\t\t\t&lt;span class=&quot;langCN&quot;&gt;记住&lt;/span&gt;</span><br><span class=\"hljs-string\">\t\t\t\t\t\t&lt;span class=&quot;langEN&quot;&gt;Remember&lt;/span&gt;</span><br><span class=\"hljs-string\">\t\t\t\t\t&lt;/label&gt;</span><br><span class=\"hljs-string\">\t\t\t\t&lt;/div&gt;</span><br><span class=\"hljs-string\">\t\t\t&lt;/div&gt;</span><br><span class=\"hljs-string\">\t\t&lt;/div&gt;</span><br><span class=\"hljs-string\">\t\t</span><br><span class=\"hljs-string\">\t\t</span><br><span class=\"hljs-string\">\t\t&lt;div class=&quot;itemBox eabShow&quot;&gt;</span><br><span class=\"hljs-string\">\t\t\t&lt;div class=&quot;pd Bold&quot;&gt;</span><br><span class=\"hljs-string\">\t\t\t\t&lt;span class=&quot;langCN&quot;&gt;EAB凭据：&lt;/span&gt;</span><br><span class=\"hljs-string\">\t\t\t\t&lt;span class=&quot;langEN&quot;&gt;EAB Credentials:&lt;/span&gt;</span><br><span class=\"hljs-string\">\t\t\t&lt;/div&gt;</span><br><span class=\"hljs-string\">\t\t\t&lt;div class=&quot;pd&quot; style=&quot;font-size:13px;color:#aaa&quot;&gt;</span><br><span class=\"hljs-string\">\t\t\t\t&lt;span class=&quot;langCN&quot;&gt;当前ACME服务要求提供外部账号绑定凭据（External Account Binding），比如ZeroSSL：你可以在ZeroSSL的管理控制台的 Developer 中获得此凭据，所以你需要先注册一个ZeroSSL的账号。&lt;/span&gt;</span><br><span class=\"hljs-string\">\t\t\t\t&lt;span class=&quot;langEN&quot;&gt;The current ACME service requires external account binding credentials, such as ZeroSSL: You can obtain this credentials in the Developer of the ZeroSSL management console, so you need to register a ZeroSSL account first.&lt;/span&gt;</span><br><span class=\"hljs-string\">\t\t\t&lt;/div&gt;</span><br><span class=\"hljs-string\">\t\t\t&lt;div class=&quot;FlexBox&quot; style=&quot;line-height:30px&quot;&gt;</span><br><span class=\"hljs-string\">\t\t\t\t&lt;div&gt;&lt;i class=&quot;must&quot;&gt;*&lt;/i&gt;EAB KID:&lt;/div&gt;</span><br><span class=\"hljs-string\">\t\t\t\t&lt;div class=&quot;FlexItem&quot; style=&quot;padding:0 50px 0 6px&quot;&gt;</span><br><span class=\"hljs-string\">\t\t\t\t\t&lt;input class=&quot;in_eab_kid inputLang&quot; style=&quot;width:100%&quot; placeholder-cn=&quot;请填写EAB KID&quot; placeholder-en=&quot;Please fill in EAB KID&quot;&gt;</span><br><span class=\"hljs-string\">\t\t\t\t&lt;/div&gt;</span><br><span class=\"hljs-string\">\t\t\t\t&lt;div style=&quot;padding:0 6px 0 0&quot;&gt;&lt;i class=&quot;must&quot;&gt;*&lt;/i&gt;HMAC KEY:&lt;/div&gt;</span><br><span class=\"hljs-string\">\t\t\t\t&lt;div class=&quot;FlexItem&quot;&gt;</span><br><span class=\"hljs-string\">\t\t\t\t\t&lt;input class=&quot;in_eab_key inputLang&quot; style=&quot;width:100%&quot; placeholder-cn=&quot;请填写EAB HMAC KEY&quot; placeholder-en=&quot;Please fill in EAB HMAC KEY&quot;&gt;</span><br><span class=\"hljs-string\">\t\t\t\t&lt;/div&gt;</span><br><span class=\"hljs-string\">\t\t\t&lt;/div&gt;</span><br><span class=\"hljs-string\">\t\t&lt;/div&gt;</span><br><span class=\"hljs-string\">\t\t</span><br><span class=\"hljs-string\">\t\t&lt;div class=&quot;pd termsAgreeBox&quot;&gt;</span><br><span class=\"hljs-string\">\t\t\t&lt;label&gt;</span><br><span class=\"hljs-string\">\t\t\t\t&lt;input type=&quot;checkbox&quot; class=&quot;choice_termsAgree&quot;&gt;</span><br><span class=\"hljs-string\">\t\t\t\t&lt;span class=&quot;termsAgreeTips&quot;&gt;&lt;/span&gt;</span><br><span class=\"hljs-string\">\t\t\t&lt;/label&gt;</span><br><span class=\"hljs-string\">\t\t&lt;/div&gt;</span><br><span class=\"hljs-string\">\t\t</span><br><span class=\"hljs-string\">\t\t&lt;div class=&quot;Center&quot; style=&quot;padding:15px 0 10px&quot;&gt;</span><br><span class=\"hljs-string\">\t\t\t&lt;span class=&quot;mainBtn&quot; onclick=&quot;configStepClick()&quot; style=&quot;width:300px&quot;&gt;</span><br><span class=\"hljs-string\">\t\t\t\t&lt;span class=&quot;langCN&quot;&gt;确定&lt;/span&gt;</span><br><span class=\"hljs-string\">\t\t\t\t&lt;span class=&quot;langEN&quot;&gt;OK&lt;/span&gt;</span><br><span class=\"hljs-string\">\t\t\t&lt;/span&gt;</span><br><span class=\"hljs-string\">\t\t&lt;/div&gt;</span><br><span class=\"hljs-string\">\t\t&lt;div class=&quot;configStepState&quot;&gt;&lt;/div&gt;</span><br><span class=\"hljs-string\">\t\t</span><br><span class=\"hljs-string\">\t&lt;/div&gt;</span><br><span class=\"hljs-string\">&lt;/div&gt;</span><br><span class=\"hljs-string\"></span><br><span class=\"hljs-string\"></span><br><span class=\"hljs-string\"></span><br><span class=\"hljs-string\"></span><br><span class=\"hljs-string\"></span><br><span class=\"hljs-string\"></span><br><span class=\"hljs-string\">&lt;div class=&quot;mainBox&quot;&gt;</span><br><span class=\"hljs-string\">\t&lt;div class=&quot;pd itemTitle&quot;&gt;</span><br><span class=\"hljs-string\">\t\t&lt;span class=&quot;langCN&quot;&gt;步骤三：验证域名所有权&lt;/span&gt;</span><br><span class=\"hljs-string\">\t\t&lt;span class=&quot;langEN&quot;&gt;Step 3: Verify Domain Ownership&lt;/span&gt;</span><br><span class=\"hljs-string\">\t&lt;/div&gt;</span><br><span class=\"hljs-string\">\t&lt;div class=&quot;step3Hide step2Show step1Show&quot;&gt;</span><br><span class=\"hljs-string\">\t\t&lt;div class=&quot;itemBox&quot; style=&quot;color:#999&quot;&gt;</span><br><span class=\"hljs-string\">\t\t\t&lt;span class=&quot;langCN&quot;&gt;等待中，请先完成第二步...&lt;/span&gt;</span><br><span class=\"hljs-string\">\t\t\t&lt;span class=&quot;langEN&quot;&gt;Waiting, please complete step 2 first...&lt;/span&gt;</span><br><span class=\"hljs-string\">\t\t&lt;/div&gt;</span><br><span class=\"hljs-string\">\t&lt;/div&gt;</span><br><span class=\"hljs-string\">\t&lt;div class=&quot;step1Hide step2Hide step3Show&quot;&gt;</span><br><span class=\"hljs-string\">\t\t</span><br><span class=\"hljs-string\">\t\t&lt;div class=&quot;pd&quot; style=&quot;font-size:13px;color:#f80&quot;&gt;</span><br><span class=\"hljs-string\">\t\t\t&lt;span class=&quot;langCN&quot;&gt;请给每个域名选择一个你合适的验证方式（推荐采用DNS验证，比较简单和通用），然后根据显示的提示完成对应的配置操作。&lt;/span&gt;</span><br><span class=\"hljs-string\">\t\t\t&lt;span class=&quot;langEN&quot;&gt;Please select a suitable verification method for each domain name (DNS Verify is recommended, which is relatively simple and common), and then complete the corresponding configuration operations according to the displayed prompts.&lt;/span&gt;</span><br><span class=\"hljs-string\">\t\t&lt;/div&gt;</span><br><span class=\"hljs-string\">\t\t</span><br><span class=\"hljs-string\">\t\t&lt;div class=&quot;verifyBox&quot;&gt;&lt;/div&gt;</span><br><span class=\"hljs-string\">&lt;script&gt;</span><br><span class=\"hljs-string\">//显示所有域名的验证界面，html太多</span><br><span class=\"hljs-string\">var verifyBoxShow=function()&#123;</span><br><span class=\"hljs-string\">\t&quot;use strict&quot;;</span><br><span class=\"hljs-string\">\tvar boxEl=$(&quot;.verifyBox&quot;).html(&quot;&quot;);</span><br><span class=\"hljs-string\">\tvar auths=JSON.parse(JSON.stringify(ACME.StepData.auths));//避免改动原始数据</span><br><span class=\"hljs-string\">\tvar domains=ACME.StepData.config.domains;</span><br><span class=\"hljs-string\">\tfor(var i0=0;i0&lt;domains.length;i0++)&#123;</span><br><span class=\"hljs-string\">\t\tvar domain=domains[i0],auth=auths[domain]</span><br><span class=\"hljs-string\">\t\t</span><br><span class=\"hljs-string\">\t\tvar challs=auth.challenges;</span><br><span class=\"hljs-string\">\t\tfor(var i=0;i&lt;challs.length;i++)&#123;//排序，dns排前面</span><br><span class=\"hljs-string\">\t\t\tvar o=challs[i];</span><br><span class=\"hljs-string\">\t\t\to.challIdx=i;</span><br><span class=\"hljs-string\">\t\t\to.name=ACME.ChallName(o);</span><br><span class=\"hljs-string\">\t\t\to._sort=ACME.ChallSort(o);</span><br><span class=\"hljs-string\">\t\t&#125;</span><br><span class=\"hljs-string\">\t\tchalls.sort(function(a,b)&#123;return a._sort.localeCompare(b._sort)&#125;);</span><br><span class=\"hljs-string\">\t\tvar choiceHtml=&quot;&quot;;</span><br><span class=\"hljs-string\">\t\tfor(var i=0;i&lt;challs.length;i++)&#123;</span><br><span class=\"hljs-string\">\t\t\tvar chall=challs[i];</span><br><span class=\"hljs-string\">\t\t\tchoiceHtml+=\\`</span><br><span class=\"hljs-string\">&lt;label&gt;</span><br><span class=\"hljs-string\">\t&lt;input type=&quot;radio&quot; name=&quot;choice_authItem_$\\&#123;i0&#125;&quot;</span><br><span class=\"hljs-string\">\t\tclass=&quot;choice_authChall choice_authChall_$\\&#123;i0&#125; choice_authChall_$\\&#123;i0&#125;_$\\&#123;i&#125;&quot;</span><br><span class=\"hljs-string\">\t\tvalue=&quot;$\\&#123;i0&#125;_$\\&#123;i&#125;&quot; challidx=&quot;$\\&#123;chall.challIdx&#125;&quot;&gt;$\\&#123;chall.name&#125;</span><br><span class=\"hljs-string\">&lt;/label&gt;</span><br><span class=\"hljs-string\">\t\t\t\\`;</span><br><span class=\"hljs-string\">\t\t&#125;</span><br><span class=\"hljs-string\">\t\t</span><br><span class=\"hljs-string\">\t\tboxEl.append(\\`</span><br><span class=\"hljs-string\">&lt;div class=&quot;itemBox&quot;&gt;</span><br><span class=\"hljs-string\">\t&lt;div class=&quot;pd FlexBox&quot; style=&quot;line-height:26px&quot;&gt;</span><br><span class=\"hljs-string\">\t\t&lt;div&gt;&lt;i class=&quot;must&quot;&gt;*&lt;/i&gt;&lt;/div&gt;</span><br><span class=\"hljs-string\">\t\t&lt;div style=&quot;width:180px;padding-right:5px;text-align:right;background:#03baed;color:#fff;border-radius: 4px;&quot;&gt;$\\&#123;domain&#125;&lt;/div&gt;</span><br><span class=\"hljs-string\">\t\t&lt;div class=&quot;FlexItem&quot; style=&quot;padding-left:10px;&quot;&gt;$\\&#123;choiceHtml&#125;&lt;/div&gt;</span><br><span class=\"hljs-string\">\t&lt;/div&gt;</span><br><span class=\"hljs-string\">\t&lt;div class=&quot;verifyItemBox_$\\&#123;i0&#125;&quot;&gt;&lt;/div&gt;</span><br><span class=\"hljs-string\">\t&lt;div class=&quot;verifyItemState_$\\&#123;i0&#125;&quot;&gt;&lt;/div&gt;</span><br><span class=\"hljs-string\">&lt;/div&gt;</span><br><span class=\"hljs-string\">\t\t\\`);</span><br><span class=\"hljs-string\">\t&#125;;</span><br><span class=\"hljs-string\">\tLangReview(boxEl);</span><br><span class=\"hljs-string\">\t</span><br><span class=\"hljs-string\">\t$(&quot;.choice_authChall&quot;).bind(&quot;click&quot;,function(e)&#123;</span><br><span class=\"hljs-string\">\t\tvar el=e.target,vals=el.value.split(&quot;_&quot;),i0=+vals[0],i2=+vals[1];</span><br><span class=\"hljs-string\">\t\tvar domain=domains[i0],auth=auths[domain],chall=auth.challenges[i2];</span><br><span class=\"hljs-string\">\t\tvar html=[&#x27;&lt;div class=&quot;pd&quot; style=&quot;padding-left:10px;font-size:13px;color:#aaa&quot;&gt;&#x27;];</span><br><span class=\"hljs-string\">\t\tvar nameCss=&#x27;width:195px;text-align:right;padding-right:10px&#x27;;</span><br><span class=\"hljs-string\">\t\tif(chall.type==&quot;dns-01&quot;)&#123;</span><br><span class=\"hljs-string\">\t\t\thtml.push(Lang(&#x27;请到你的域名DNS解析管理中，给下面这个子域名增加一条&lt;i class=&quot;i&quot;&gt;TXT记录&lt;/i&gt;（一个子域名可以同时存在多条TXT记录，可以修改或删除老的记录）。&#x27;,&#x27;Please go to the DNS resolution management of your domain name and add a &lt;i class=&quot;i&quot;&gt;TXT record&lt;/i&gt; for the following subdomain name (a subdomain name can have multiple TXT records at the same time, and the old records can be modified or deleted).&#x27;)+&#x27;&lt;/div&gt;&#x27;);</span><br><span class=\"hljs-string\">\t\t\thtml.push(\\`&lt;div class=&quot;pd FlexBox&quot;&gt;</span><br><span class=\"hljs-string\">\t\t\t\t&lt;div style=&quot;$\\&#123;nameCss&#125;&quot;&gt;$\\&#123;Lang(&#x27;子域名&#x27;,&#x27;Sub Domain&#x27;)&#125;:&lt;/div&gt;</span><br><span class=\"hljs-string\">\t\t\t\t&lt;div class=&quot;FlexItem&quot;&gt;</span><br><span class=\"hljs-string\">\t\t\t\t\t&lt;input style=&quot;width:100%&quot; readonly value=&quot;_acme-challenge.$\\&#123;auth.identifier.value&#125;&quot; /&gt;</span><br><span class=\"hljs-string\">\t\t\t\t&lt;/div&gt;</span><br><span class=\"hljs-string\">\t\t\t&lt;/div&gt;</span><br><span class=\"hljs-string\">\t\t\t&lt;div class=&quot;pd FlexBox&quot;&gt;</span><br><span class=\"hljs-string\">\t\t\t\t&lt;div style=&quot;$\\&#123;nameCss&#125;&quot;&gt;$\\&#123;Lang(&#x27;TXT记录&#x27;,&#x27;TXT Record&#x27;)&#125;:&lt;/div&gt;</span><br><span class=\"hljs-string\">\t\t\t\t&lt;div class=&quot;FlexItem&quot;&gt;</span><br><span class=\"hljs-string\">\t\t\t\t\t&lt;input style=&quot;width:100%&quot; readonly value=&quot;$\\&#123;chall.authTxtSHA256&#125;&quot; /&gt;</span><br><span class=\"hljs-string\">\t\t\t\t&lt;/div&gt;</span><br><span class=\"hljs-string\">\t\t\t&lt;/div&gt;\\`);</span><br><span class=\"hljs-string\">\t\t&#125;else if(chall.type==&quot;http-01&quot;)&#123;</span><br><span class=\"hljs-string\">\t\t\thtml.push(Lang(&#x27;请在你的网站根目录中创建&lt;i class=&quot;i&quot;&gt;/.well-known/acme-challenge/&lt;/i&gt;目录，目录内创建&lt;i class=&quot;i&quot;&gt;&#x27;+FormatText(chall.token)+&#x27;&lt;/i&gt;文件，文件内保存下面的文件内容，保存好后&lt;a href=&quot;http://&#x27;+auth.identifier.value+&#x27;/.well-known/acme-challenge/&#x27;+FormatText(chall.token)+&#x27;&quot; target=&quot;_blank&quot;&gt;请点此打开此文件URL&lt;/a&gt;测试能否正常访问；注意：这个文件URL必须是80端口，并且公网可以访问，否则ACME无法访问到此地址将会验证失败。Windows操作提示：Windows中用&lt;i class=&quot;i&quot;&gt;.well-known.&lt;/i&gt;作为文件夹名称就能创建&lt;i class=&quot;i&quot;&gt;.well-known&lt;/i&gt;文件夹；IIS可能需在此文件夹下的MIME类型中给 &lt;i class=&quot;i&quot;&gt;.&lt;/i&gt; （扩展名就是一个字&quot;.&quot;）添加 &lt;i class=&quot;i&quot;&gt;text/plain&lt;/i&gt; 才能正常访问。&#x27;,&#x27;Please create the &lt;i class=&quot;i&quot;&gt;/.well-known/acme-challenge/&lt;/i&gt; directory in the root directory of your website, create the &lt;i class=&quot;i&quot;&gt;&#x27;+FormatText(chall.token)+&#x27;&lt;/i&gt; file in the directory, and save the following file content in the file; After saving, &lt;a href=&quot;http://&#x27;+auth.identifier.value+&#x27;/.well-known/acme-challenge/&#x27;+FormatText(chall.token)+&#x27;&quot; target=&quot;_blank&quot;&gt;please click here to open the URL&lt;/a&gt; of this file to test whether Normal access; note: the URL of this file must be 80 The port and the public network can be accessed, otherwise ACME cannot access this address and the verification will fail. Windows operation tips: In Windows, you can create a &lt;i class=&quot;i&quot;&gt;.well-known&lt;/i&gt; folder by using &lt;i class=&quot;i&quot;&gt;.well-known.&lt;/i&gt; as the folder name; IIS may need to give &lt;i class=&quot;i&quot;&gt;.&lt;/i&gt; in the MIME type under this folder (the extension is a word &quot;.&quot;) Add &lt;i class=&quot;i&quot;&gt;text/plain&lt;/i&gt; for normal access.&#x27;)+&#x27;&lt;/div&gt;&#x27;);</span><br><span class=\"hljs-string\">\t\t\thtml.push(\\`&lt;div class=&quot;pd FlexBox&quot;&gt;</span><br><span class=\"hljs-string\">\t\t\t\t&lt;div style=&quot;$\\&#123;nameCss&#125;&quot;&gt;$\\&#123;Lang(&#x27;文件URL&#x27;,&#x27;File URL&#x27;)&#125;:&lt;/div&gt;</span><br><span class=\"hljs-string\">\t\t\t\t&lt;div class=&quot;FlexItem&quot;&gt;</span><br><span class=\"hljs-string\">\t\t\t\t\t&lt;input style=&quot;width:100%&quot; readonly value=&quot;http://$\\&#123;auth.identifier.value&#125;/.well-known/acme-challenge/$\\&#123;FormatText(chall.token)&#125;&quot; /&gt;</span><br><span class=\"hljs-string\">\t\t\t\t&lt;/div&gt;</span><br><span class=\"hljs-string\">\t\t\t&lt;/div&gt;</span><br><span class=\"hljs-string\">\t\t\t&lt;div class=&quot;pd FlexBox&quot;&gt;</span><br><span class=\"hljs-string\">\t\t\t\t&lt;div style=&quot;$\\&#123;nameCss&#125;&quot;&gt;$\\&#123;Lang(&#x27;文件内容&#x27;,&#x27;File Content&#x27;)&#125;:&lt;/div&gt;</span><br><span class=\"hljs-string\">\t\t\t\t&lt;div class=&quot;FlexItem&quot;&gt;</span><br><span class=\"hljs-string\">\t\t\t\t\t&lt;input style=&quot;width:100%&quot; readonly value=&quot;$\\&#123;chall.authTxt&#125;&quot; /&gt;</span><br><span class=\"hljs-string\">\t\t\t\t&lt;/div&gt;</span><br><span class=\"hljs-string\">\t\t\t&lt;/div&gt;\\`);</span><br><span class=\"hljs-string\">\t\t&#125;else&#123;</span><br><span class=\"hljs-string\">\t\t\thtml.push(Lang(&#x27;非预定义验证类型，请使用&lt;i class=&quot;i&quot;&gt;Key Authorizations (Token+.+指纹)&lt;/i&gt;自行处理，&lt;i class=&quot;i&quot;&gt;Digest&lt;/i&gt;为Key Authorizations的SHA-256 Base64值。&#x27;,&#x27;For non-predefined authentication types, please use &lt;i class=&quot;i&quot;&gt;Key Authorizations (Token+.+Thumbprint)&lt;/i&gt; to handle it yourself. &lt;i class=&quot;i&quot;&gt;Digest&lt;/i&gt; is the SHA-256 Base64 value of Key Authorizations.&#x27;)+&#x27;&lt;/div&gt;&#x27;);</span><br><span class=\"hljs-string\">\t\t\thtml.push(\\`&lt;div class=&quot;pd FlexBox&quot;&gt;</span><br><span class=\"hljs-string\">\t\t\t\t&lt;div style=&quot;$\\&#123;nameCss&#125;&quot;&gt;Key Authorizations:&lt;/div&gt;</span><br><span class=\"hljs-string\">\t\t\t\t&lt;div class=&quot;FlexItem&quot;&gt;</span><br><span class=\"hljs-string\">\t\t\t\t\t&lt;input style=&quot;width:100%&quot; readonly value=&quot;$\\&#123;chall.authTxt&#125;&quot; /&gt;</span><br><span class=\"hljs-string\">\t\t\t\t&lt;/div&gt;</span><br><span class=\"hljs-string\">\t\t\t&lt;/div&gt;</span><br><span class=\"hljs-string\">\t\t\t&lt;div class=&quot;pd FlexBox&quot;&gt;</span><br><span class=\"hljs-string\">\t\t\t\t&lt;div style=&quot;$\\&#123;nameCss&#125;&quot;&gt;Digest(SHA-256 Base64):&lt;/div&gt;</span><br><span class=\"hljs-string\">\t\t\t\t&lt;div class=&quot;FlexItem&quot;&gt;</span><br><span class=\"hljs-string\">\t\t\t\t\t&lt;input style=&quot;width:100%&quot; readonly value=&quot;$\\&#123;chall.authTxtSHA256Base64&#125;&quot; /&gt;</span><br><span class=\"hljs-string\">\t\t\t\t&lt;/div&gt;</span><br><span class=\"hljs-string\">\t\t\t&lt;/div&gt;\\`);</span><br><span class=\"hljs-string\">\t\t&#125;</span><br><span class=\"hljs-string\">\t\t$(&quot;.verifyItemBox_&quot;+i0).html(html.join(&#x27;\\\\n&#x27;));</span><br><span class=\"hljs-string\">\t&#125;);</span><br><span class=\"hljs-string\">\tfor(var i0=0;i0&lt;domains.length;i0++)&#123;</span><br><span class=\"hljs-string\">\t\tvar el=$(&quot;.choice_authChall_&quot;+i0+&quot;_0&quot;);</span><br><span class=\"hljs-string\">\t\tel[0]&amp;&amp;el[0].click(); //默认选中每个域名的第一个</span><br><span class=\"hljs-string\">\t&#125;</span><br><span class=\"hljs-string\">&#125;;</span><br><span class=\"hljs-string\">&lt;/script&gt;</span><br><span class=\"hljs-string\">\t\t</span><br><span class=\"hljs-string\">\t\t&lt;div class=&quot;itemBox&quot;&gt;</span><br><span class=\"hljs-string\">\t\t\t&lt;div class=&quot;pd&quot; style=&quot;font-size:15px&quot;&gt;</span><br><span class=\"hljs-string\">\t\t\t\t&lt;span class=&quot;langCN&quot;&gt;请每个域名选择好对应的验证方式，根据显示的提示进行对应的配置操作；&lt;span style=&quot;color:#cb1d1d&quot;&gt;必须所有域名配置完成后，再来点击下面的“开始验证”按钮进行验证，&lt;/span&gt;如果验证失败，需要返回第二步重新开始操作。&lt;/span&gt;</span><br><span class=\"hljs-string\">\t\t\t\t&lt;span class=&quot;langEN&quot;&gt;Please select the corresponding verify method for each domain name, and perform the corresponding configuration operation according to the displayed prompts; &lt;span style=&quot;color:#cb1d1d&quot;&gt;after all domain names are configured, click the &quot;Start Verify&quot; button below to verify,&lt;/span&gt; if the verify fails, you need to go back to the step 2 Start the operation.&lt;/span&gt;</span><br><span class=\"hljs-string\">\t\t\t&lt;/div&gt;</span><br><span class=\"hljs-string\">\t\t\t</span><br><span class=\"hljs-string\">\t\t\t&lt;div class=&quot;Center&quot; style=&quot;padding:15px 0 10px&quot;&gt;</span><br><span class=\"hljs-string\">\t\t\t\t&lt;span class=&quot;mainBtn verifyStepBtn&quot; onclick=&quot;verifyStepClick()&quot; style=&quot;width:300px&quot;&gt;</span><br><span class=\"hljs-string\">\t\t\t\t\t&lt;span class=&quot;langCN&quot;&gt;开始验证&lt;/span&gt;</span><br><span class=\"hljs-string\">\t\t\t\t\t&lt;span class=&quot;langEN&quot;&gt;Start Verify&lt;/span&gt;</span><br><span class=\"hljs-string\">\t\t\t\t&lt;/span&gt;</span><br><span class=\"hljs-string\">\t\t\t\t&lt;span class=&quot;mainBtn verifyRunStopBtn&quot; onclick=&quot;verifyRunStopClick()&quot; style=&quot;width:300px;background:#aaa&quot;&gt;</span><br><span class=\"hljs-string\">\t\t\t\t\t&lt;span class=&quot;langCN&quot;&gt;取消&lt;/span&gt;</span><br><span class=\"hljs-string\">\t\t\t\t\t&lt;span class=&quot;langEN&quot;&gt;Cancel&lt;/span&gt;</span><br><span class=\"hljs-string\">\t\t\t\t&lt;/span&gt;</span><br><span class=\"hljs-string\">\t\t\t\t&lt;span class=&quot;mainBtn finalizeOrderBtn&quot; onclick=&quot;finalizeOrderClick()&quot; style=&quot;width:300px&quot;&gt;</span><br><span class=\"hljs-string\">\t\t\t\t\t&lt;span class=&quot;langCN&quot;&gt;重试&lt;/span&gt;</span><br><span class=\"hljs-string\">\t\t\t\t\t&lt;span class=&quot;langEN&quot;&gt;Retry&lt;/span&gt;</span><br><span class=\"hljs-string\">\t\t\t\t&lt;/span&gt;</span><br><span class=\"hljs-string\">\t\t\t&lt;/div&gt;</span><br><span class=\"hljs-string\">\t\t\t&lt;div class=&quot;verifyStepState&quot;&gt;&lt;/div&gt;</span><br><span class=\"hljs-string\">\t\t&lt;/div&gt;</span><br><span class=\"hljs-string\">\t\t</span><br><span class=\"hljs-string\">\t&lt;/div&gt;</span><br><span class=\"hljs-string\">&lt;/div&gt;</span><br><span class=\"hljs-string\"></span><br><span class=\"hljs-string\"></span><br><span class=\"hljs-string\"></span><br><span class=\"hljs-string\"></span><br><span class=\"hljs-string\"></span><br><span class=\"hljs-string\"></span><br><span class=\"hljs-string\">&lt;div class=&quot;mainBox&quot;&gt;</span><br><span class=\"hljs-string\">\t&lt;div class=&quot;pd itemTitle&quot;&gt;</span><br><span class=\"hljs-string\">\t\t&lt;span class=&quot;langCN&quot;&gt;步骤四：下载保存证书PEM文件&lt;/span&gt;</span><br><span class=\"hljs-string\">\t\t&lt;span class=&quot;langEN&quot;&gt;Step 4: Download and save the certificate PEM file&lt;/span&gt;</span><br><span class=\"hljs-string\">\t&lt;/div&gt;</span><br><span class=\"hljs-string\">\t&lt;div class=&quot;step4Hide step3Show step2Show step1Show&quot;&gt;</span><br><span class=\"hljs-string\">\t\t&lt;div class=&quot;itemBox&quot; style=&quot;color:#999&quot;&gt;</span><br><span class=\"hljs-string\">\t\t\t&lt;span class=&quot;langCN&quot;&gt;等待中，请先完成第三步...&lt;/span&gt;</span><br><span class=\"hljs-string\">\t\t\t&lt;span class=&quot;langEN&quot;&gt;Waiting, please complete step 3 first...&lt;/span&gt;</span><br><span class=\"hljs-string\">\t\t&lt;/div&gt;</span><br><span class=\"hljs-string\">\t&lt;/div&gt;</span><br><span class=\"hljs-string\">\t&lt;div class=&quot;step1Hide step2Hide step3Hide step4Show&quot;&gt;</span><br><span class=\"hljs-string\">\t</span><br><span class=\"hljs-string\">\t</span><br><span class=\"hljs-string\">\t\t&lt;div class=&quot;itemBox&quot;&gt;</span><br><span class=\"hljs-string\">\t\t\t&lt;div class=&quot;pd Bold&quot;&gt;</span><br><span class=\"hljs-string\">\t\t\t\t&lt;i class=&quot;must&quot;&gt;*&lt;/i&gt;</span><br><span class=\"hljs-string\">\t\t\t\t&lt;span class=&quot;langCN&quot;&gt;保存证书PEM文件：&lt;/span&gt;</span><br><span class=\"hljs-string\">\t\t\t\t&lt;span class=&quot;langEN&quot;&gt;Save certificate PEM file: &lt;/span&gt;</span><br><span class=\"hljs-string\">\t\t\t&lt;/div&gt;</span><br><span class=\"hljs-string\">\t\t\t&lt;div class=&quot;pd&quot; style=&quot;font-size:13px;color:#aaa&quot;&gt;</span><br><span class=\"hljs-string\">\t\t\t\t&lt;span class=&quot;langCN&quot;&gt;&lt;span style=&quot;color:#f80&quot;&gt;必须保存此文件，&lt;/span&gt;请点击下载按钮下载，或者将证书文本内容复制保存为&lt;i class=&quot;i downloadCertFileName&quot;&gt;&lt;/i&gt;文件（PEM纯文本格式）；文件名后缀可改成 &lt;i class=&quot;i&quot;&gt;.crt&lt;/i&gt; 或 &lt;i class=&quot;i&quot;&gt;.cer&lt;/i&gt;，这样在Windows中能直接双击打开查看。本PEM格式文件已包含你的域名证书、和完整证书链，文本中第一个CERTIFICATE为你的域名证书，后面的为证书颁发机构的中间证书和根证书，如过有需要你可以自行拆分成多个.pem文件。&lt;/span&gt;</span><br><span class=\"hljs-string\">\t\t\t\t&lt;span class=&quot;langEN&quot;&gt;&lt;span style=&quot;color:#f80&quot;&gt;This file must be saved,&lt;/span&gt; please click the download button to download, or copy the text content of the certificate and save it as &lt;i class=&quot;i downloadCertFileName&quot;&gt;&lt;/i&gt; file (PEM plain text format); the file name suffix can be changed to &lt;i class=&quot;i&quot;&gt;.crt &lt;/i&gt; or &lt;i class=&quot;i&quot;&gt;.cer &lt;/i&gt;, so that it can be directly double-clicked to open and view in Windows. This PEM format file already contains your domain name certificate and complete certificate chain. The first CERTIFICATE in the text is your domain name certificate, followed by the intermediate certificate and root certificate of the certificate authority, if necessary, you can split it into multiple .pem files.&lt;/span&gt;</span><br><span class=\"hljs-string\">\t\t\t&lt;/div&gt;</span><br><span class=\"hljs-string\">\t\t\t&lt;div class=&quot;FlexBox&quot;&gt;</span><br><span class=\"hljs-string\">\t\t\t\t&lt;div class=&quot;FlexItem&quot;&gt;</span><br><span class=\"hljs-string\">\t\t\t\t\t&lt;textarea class=&quot;txt_downloadCert&quot; style=&quot;width:100%;height:160px&quot; readonly=&quot;&quot;&gt;&lt;/textarea&gt;</span><br><span class=\"hljs-string\">\t\t\t\t&lt;/div&gt;</span><br><span class=\"hljs-string\">\t\t\t\t&lt;div style=&quot;padding-left:10px;line-height:30px;font-size:13px;color:#aaa&quot;&gt;</span><br><span class=\"hljs-string\">\t\t\t\t\t&lt;div class=&quot;mainBtn&quot; onclick=&quot;downloadBtnClick(&#x27;Cert&#x27;)&quot;&gt;</span><br><span class=\"hljs-string\">\t\t\t\t\t\t&lt;span class=&quot;langCN&quot;&gt;下载保存&lt;/span&gt;</span><br><span class=\"hljs-string\">\t\t\t\t\t\t&lt;span class=&quot;langEN&quot;&gt;Download&lt;/span&gt;</span><br><span class=\"hljs-string\">\t\t\t\t\t&lt;/div&gt;</span><br><span class=\"hljs-string\">\t\t\t\t&lt;/div&gt;</span><br><span class=\"hljs-string\">\t\t\t&lt;/div&gt;</span><br><span class=\"hljs-string\">\t\t&lt;/div&gt;</span><br><span class=\"hljs-string\">\t\t</span><br><span class=\"hljs-string\">\t\t</span><br><span class=\"hljs-string\">\t\t&lt;div class=&quot;itemBox&quot;&gt;</span><br><span class=\"hljs-string\">\t\t\t&lt;div class=&quot;pd Bold&quot;&gt;</span><br><span class=\"hljs-string\">\t\t\t\t&lt;i class=&quot;must&quot;&gt;*&lt;/i&gt;</span><br><span class=\"hljs-string\">\t\t\t\t&lt;span class=&quot;langCN&quot;&gt;保存证书私钥KEY文件：&lt;/span&gt;</span><br><span class=\"hljs-string\">\t\t\t\t&lt;span class=&quot;langEN&quot;&gt;Save the certificate private key KEY file: &lt;/span&gt;</span><br><span class=\"hljs-string\">\t\t\t&lt;/div&gt;</span><br><span class=\"hljs-string\">\t\t\t&lt;div class=&quot;pd&quot; style=&quot;font-size:13px;color:#aaa&quot;&gt;</span><br><span class=\"hljs-string\">\t\t\t\t&lt;span class=&quot;langCN&quot;&gt;请点击下载按钮下载，或者将私钥文本内容复制保存为&lt;i class=&quot;i downloadKeyFileName&quot;&gt;&lt;/i&gt;文件（PEM纯文本格式，.key后缀可自行修改成.pem）。如果第二步操作中你手动填写了证书私钥，此处的证书私钥和你填写的是完全一样的，可以不需要重复保存；&lt;span style=&quot;color:#f80&quot;&gt;如果你是新创建的证书私钥，则你必须下载保存此证书私钥文件。&lt;/span&gt;&lt;/span&gt;</span><br><span class=\"hljs-string\">\t\t\t\t&lt;span class=&quot;langEN&quot;&gt;Please click the download button to download, or copy and save the text content of the private key as &lt;i class=&quot;i downloadKeyFileName&quot;&gt;&lt;/i&gt; file (PEM plain text format, the .key suffix can be modified to .pem by yourself). If you manually filled in the certificate private key in the step 2, the certificate private key here is exactly the same as what you filled in, and you don’t need to save it repeatedly; &lt;span style=&quot;color:#f80&quot;&gt;if you are a newly created certificate private key, you must download and save it This certificate private key file.&lt;/span&gt;&lt;/span&gt;</span><br><span class=\"hljs-string\">\t\t\t&lt;/div&gt;</span><br><span class=\"hljs-string\">\t\t\t&lt;div class=&quot;FlexBox&quot;&gt;</span><br><span class=\"hljs-string\">\t\t\t\t&lt;div class=&quot;FlexItem&quot;&gt;</span><br><span class=\"hljs-string\">\t\t\t\t\t&lt;textarea class=&quot;txt_downloadKey&quot; style=&quot;width:100%;height:80px&quot; readonly=&quot;&quot;&gt;&lt;/textarea&gt;</span><br><span class=\"hljs-string\">\t\t\t\t&lt;/div&gt;</span><br><span class=\"hljs-string\">\t\t\t\t&lt;div style=&quot;padding-left:10px;line-height:30px;font-size:13px;color:#aaa&quot;&gt;</span><br><span class=\"hljs-string\">\t\t\t\t\t&lt;div class=&quot;mainBtn&quot; onclick=&quot;downloadBtnClick(&#x27;Key&#x27;)&quot;&gt;</span><br><span class=\"hljs-string\">\t\t\t\t\t\t&lt;span class=&quot;langCN&quot;&gt;下载保存&lt;/span&gt;</span><br><span class=\"hljs-string\">\t\t\t\t\t\t&lt;span class=&quot;langEN&quot;&gt;Download&lt;/span&gt;</span><br><span class=\"hljs-string\">\t\t\t\t\t&lt;/div&gt;</span><br><span class=\"hljs-string\">\t\t\t\t&lt;/div&gt;</span><br><span class=\"hljs-string\">\t\t\t&lt;/div&gt;</span><br><span class=\"hljs-string\">\t\t&lt;/div&gt;</span><br><span class=\"hljs-string\">\t\t</span><br><span class=\"hljs-string\">\t\t</span><br><span class=\"hljs-string\">\t\t&lt;div class=&quot;itemBox&quot;&gt;</span><br><span class=\"hljs-string\">\t\t\t&lt;div class=&quot;pd Bold&quot;&gt;</span><br><span class=\"hljs-string\">\t\t\t\t&lt;i class=&quot;must&quot;&gt;*&lt;/i&gt;</span><br><span class=\"hljs-string\">\t\t\t\t&lt;span class=&quot;langCN&quot;&gt;保存记录LOG文件：&lt;/span&gt;</span><br><span class=\"hljs-string\">\t\t\t\t&lt;span class=&quot;langEN&quot;&gt;Save the record LOG file: &lt;/span&gt;</span><br><span class=\"hljs-string\">\t\t\t&lt;/div&gt;</span><br><span class=\"hljs-string\">\t\t\t&lt;div class=&quot;pd&quot; style=&quot;font-size:13px;color:#aaa&quot;&gt;</span><br><span class=\"hljs-string\">\t\t\t\t&lt;span class=&quot;langCN&quot;&gt;建议下载保存此文件，本记录文件包含了所有数据，包括：证书PEM文本、证书私钥PEM文本、账户私钥PEM文本、所有配置参数。下次你需要续签新证书时，可以将本记录文件直接拖拽进本页面，会自动填写所有参数。&lt;/span&gt;</span><br><span class=\"hljs-string\">\t\t\t\t&lt;span class=&quot;langEN&quot;&gt;It is recommended to download and save this file. This record file contains all data, including: certificate PEM text, certificate private key PEM text, account private key PEM text, and all configuration parameters. Next time you need to renew a new certificate, you can drag and drop the record file directly into this page, and all parameters will be filled in automatically.&lt;/span&gt;</span><br><span class=\"hljs-string\">\t\t\t&lt;/div&gt;</span><br><span class=\"hljs-string\">\t\t\t&lt;div class=&quot;FlexBox&quot;&gt;</span><br><span class=\"hljs-string\">\t\t\t\t&lt;div class=&quot;FlexItem&quot;&gt;</span><br><span class=\"hljs-string\">\t\t\t\t\t&lt;textarea class=&quot;txt_downloadLog&quot; style=&quot;width:100%;height:80px&quot; readonly=&quot;&quot;&gt;&lt;/textarea&gt;</span><br><span class=\"hljs-string\">\t\t\t\t&lt;/div&gt;</span><br><span class=\"hljs-string\">\t\t\t\t&lt;div style=&quot;padding-left:10px;line-height:30px;font-size:13px;color:#aaa&quot;&gt;</span><br><span class=\"hljs-string\">\t\t\t\t\t&lt;div class=&quot;mainBtn&quot; onclick=&quot;downloadBtnClick(&#x27;Log&#x27;)&quot;&gt;</span><br><span class=\"hljs-string\">\t\t\t\t\t\t&lt;span class=&quot;langCN&quot;&gt;下载保存&lt;/span&gt;</span><br><span class=\"hljs-string\">\t\t\t\t\t\t&lt;span class=&quot;langEN&quot;&gt;Download&lt;/span&gt;</span><br><span class=\"hljs-string\">\t\t\t\t\t&lt;/div&gt;</span><br><span class=\"hljs-string\">\t\t\t\t&lt;/div&gt;</span><br><span class=\"hljs-string\">\t\t\t&lt;/div&gt;</span><br><span class=\"hljs-string\">\t\t&lt;/div&gt;</span><br><span class=\"hljs-string\">\t\t</span><br><span class=\"hljs-string\">\t\t</span><br><span class=\"hljs-string\">\t&lt;/div&gt;</span><br><span class=\"hljs-string\">&lt;/div&gt;</span><br><span class=\"hljs-string\"></span><br><span class=\"hljs-string\"></span><br><span class=\"hljs-string\"></span><br><span class=\"hljs-string\"></span><br><span class=\"hljs-string\"></span><br><span class=\"hljs-string\"></span><br><span class=\"hljs-string\">&lt;div class=&quot;mainBox&quot;&gt;</span><br><span class=\"hljs-string\">\t\t</span><br><span class=\"hljs-string\">\t&lt;div class=&quot;itemBox&quot;&gt;</span><br><span class=\"hljs-string\">\t\t&lt;div class=&quot;pd Bold&quot;&gt;</span><br><span class=\"hljs-string\">\t\t\t&lt;span class=&quot;langCN&quot;&gt;你需要其他格式的证书文件？&lt;/span&gt;</span><br><span class=\"hljs-string\">\t\t\t&lt;span class=&quot;langEN&quot;&gt;Do you need certificate files in other formats?&lt;/span&gt;</span><br><span class=\"hljs-string\">\t\t&lt;/div&gt;</span><br><span class=\"hljs-string\">\t\t&lt;div class=&quot;pd&quot; style=&quot;font-size:13px;color:#aaa&quot;&gt;</span><br><span class=\"hljs-string\">\t\t\t&lt;span class=&quot;langCN&quot;&gt;大部分服务器程序支持直接使用 &lt;i class=&quot;i downloadCertFileName&quot;&gt;&lt;/i&gt;+&lt;i class=&quot;i downloadKeyFileName&quot;&gt;&lt;/i&gt; 来配置开启HTTPS（比如Nginx），如果你需要 &lt;i class=&quot;i&quot;&gt;*.pfx&lt;/i&gt;、&lt;i class=&quot;i&quot;&gt;*.p12&lt;/i&gt; 格式的证书（比如用于IIS），请用下面命令将PEM证书转换成 &lt;i class=&quot;i&quot;&gt;pfx/p12&lt;/i&gt; 格式：&lt;/span&gt;</span><br><span class=\"hljs-string\">\t\t\t&lt;span class=&quot;langEN&quot;&gt;Most server programs support directly using &lt;i class=&quot;i downloadCertFileName&quot;&gt;&lt;/i&gt;+&lt;i class=&quot;i downloadKeyFileName&quot;&gt;&lt;/i&gt; to configure and enable HTTPS (such as Nginx). If you need a certificate in &lt;i class=&quot;i&quot;&gt;*.pfx&lt;/i&gt; or &lt;i class=&quot;i&quot;&gt;*.p12&lt;/i&gt; format (such as for IIS), please use the following command to convert the PEM certificate Convert to &lt;i class=&quot;i&quot;&gt;pfx/p12&lt;/i&gt; format:&lt;/span&gt;</span><br><span class=\"hljs-string\">\t\t&lt;/div&gt;</span><br><span class=\"hljs-string\">\t\t&lt;div class=&quot;code&quot;&gt;openssl pkcs12 -export -out &lt;span class=&quot;downloadFileName&quot;&gt;&lt;/span&gt;.pfx -inkey &lt;span class=&quot;downloadKeyFileName&quot;&gt;&lt;/span&gt; -in &lt;span class=&quot;downloadCertFileName&quot;&gt;&lt;/span&gt;&lt;/div&gt;</span><br><span class=\"hljs-string\">\t&lt;/div&gt;</span><br><span class=\"hljs-string\">\t</span><br><span class=\"hljs-string\">\t&lt;div class=&quot;itemBox&quot;&gt;</span><br><span class=\"hljs-string\">\t\t&lt;div class=&quot;pd Bold&quot;&gt;</span><br><span class=\"hljs-string\">\t\t\t&lt;span class=&quot;langCN&quot;&gt;IIS证书链缺失？&lt;/span&gt;</span><br><span class=\"hljs-string\">\t\t\t&lt;span class=&quot;langEN&quot;&gt;IIS certificate chain missing?&lt;/span&gt;</span><br><span class=\"hljs-string\">\t\t&lt;/div&gt;</span><br><span class=\"hljs-string\">\t\t&lt;div class=&quot;pd&quot; style=&quot;font-size:13px;color:#aaa&quot;&gt;</span><br><span class=\"hljs-string\">\t\t\t&lt;span class=&quot;langCN&quot;&gt;对于Windows IIS服务器，你需要将证书链安装到“本地计算机”的“中间证书颁发机构”中；请将PEM证书中的所有证书拆分成单个PEM文件（后缀改成&lt;i class=&quot;i&quot;&gt;.crt&lt;/i&gt;或&lt;i class=&quot;i&quot;&gt;.cer&lt;/i&gt;），然后将系统中缺失的中间证书双击打开然后安装进去；详细参考：&lt;/span&gt;</span><br><span class=\"hljs-string\">\t\t\t&lt;span class=&quot;langEN&quot;&gt;For Windows IIS server, you need to install the certificate chain into &quot;Intermediate Certification Authorities&quot; in &quot;Local Computer&quot;; please split all certificates in PEM certificate into a single PEM file (change the suffix to &lt;i class=&quot;i&quot;&gt;.crt&lt;/i&gt; or &lt;i class=&quot;i&quot;&gt;.cer&lt;/i&gt;), then double-click to open the missing intermediate certificate in the system Then install it; detailed reference:&lt;/span&gt;</span><br><span class=\"hljs-string\">\t\t\t&lt;a href=&quot;http://support.microsoft.com/kb/954755&quot; target=&quot;_blank&quot;&gt;http://support.microsoft.com/kb/954755&lt;/a&gt;</span><br><span class=\"hljs-string\">\t\t&lt;/div&gt;</span><br><span class=\"hljs-string\">\t&lt;/div&gt;</span><br><span class=\"hljs-string\">\t</span><br><span class=\"hljs-string\">\t&lt;div class=&quot;itemBox&quot;&gt;</span><br><span class=\"hljs-string\">\t\t&lt;div class=&quot;pd Bold&quot;&gt;</span><br><span class=\"hljs-string\">\t\t\t&lt;span class=&quot;langCN&quot;&gt;本客户端部分原理简介&lt;/span&gt;</span><br><span class=\"hljs-string\">\t\t\t&lt;span class=&quot;langEN&quot;&gt;Introduction to the principle of this client&lt;/span&gt;</span><br><span class=\"hljs-string\">\t\t&lt;/div&gt;</span><br><span class=\"hljs-string\">\t\t&lt;div class=&quot;pd&quot; style=&quot;font-size:13px;color:#aaa&quot;&gt;</span><br><span class=\"hljs-string\">\t\t\t&lt;span class=&quot;langCN&quot;&gt;得益于现代浏览器的 &lt;a href=&quot;https://developer.mozilla.org/en-US/docs/Web/API/SubtleCrypto&quot; target=&quot;_blank&quot;&gt;crypto.subtle&lt;/a&gt; 对加密功能标准化，不依赖其他任何js库就能在网页上实现 &lt;i class=&quot;i&quot;&gt;RSA&lt;/i&gt;、&lt;i class=&quot;i&quot;&gt;ECC&lt;/i&gt; 的加密、解密、签名、验证、和密钥对生成。在本客户端内的 &lt;i class=&quot;i&quot;&gt;X509&lt;/i&gt; 对象中：用 X509.CreateCSR 来生成CSR，用 X509.KeyGenerate 来创建PEM格式密钥，用 X509.KeyParse 来解析PEM格式密钥，用 X509.KeyExport 来导出PEM格式密钥；这些功能都是根据相应的标准用js代码在二进制层面上实现的，二进制数据操作封装在了 &lt;i class=&quot;i&quot;&gt;ASN1&lt;/i&gt; 对象中：实现了 ASN.1 标准的二进制解析和封包，使用 ASN1.ParsePEM 方法可以解析任意的PEM格式密钥或证书。以上这些都是实现ACME网页客户端的核心基础。&lt;/span&gt;</span><br><span class=\"hljs-string\">\t\t\t&lt;span class=&quot;langEN&quot;&gt;Thanks to the standardization of encryption functions by &lt;a href=&quot;https://developer.mozilla.org/en-US/docs/Web/API/SubtleCrypto&quot; target=&quot;_blank&quot;&gt;crypto.subtle&lt;/a&gt; of modern browsers, &lt;i class=&quot;i&quot;&gt;RSA&lt;/i&gt; and &lt;i class=&quot;i&quot;&gt;ECC&lt;/i&gt; encryption, decryption, signature, verification, and key pair generation can be implemented on web pages without relying on any other js library. In the &lt;i class=&quot;i&quot;&gt;X509&lt;/i&gt; object in this client: use X509.CreateCSR to generate CSR, use X509.KeyGenerate to create PEM format key, use X509.KeyParse to parse PEM format key, use X509.KeyExport to export PEM format key; These functions are implemented at the binary level with js code according to the corresponding standards, and binary data operations are encapsulated in &lt;i class=&quot;i&quot;&gt;ASN1&lt;/i&gt; objects: ASN.1 standard binary parsing and encapsulation are implemented, Arbitrary PEM format keys or certificates can be parsed using the ASN1.ParsePEM method. These are the core foundations for implementing the ACME web client.&lt;/span&gt;</span><br><span class=\"hljs-string\">\t\t&lt;/div&gt;</span><br><span class=\"hljs-string\">\t\t&lt;div class=&quot;pd&quot; style=&quot;font-size:13px;color:#aaa&quot;&gt;</span><br><span class=\"hljs-string\">\t\t\t&lt;span class=&quot;langCN&quot;&gt;然后就是对接ACME实现证书的签发，和实现交互UI；对接ACME可以直接参考 RFC 8555 标准。有些证书颁发机构的ACME服务对浏览器支持不良，未提供齐全的 &lt;i class=&quot;i&quot;&gt;Access-Control-*&lt;/i&gt; 响应头，导致网页内无法直接调用服务接口；目前采用的解决办法非常简单粗暴，比如ZeroSSL：检测到此ACME服务存在跨域问题时，会调用 &lt;i class=&quot;i&quot;&gt;acmeReadDirGotoCORS()&lt;/i&gt; 方法告诉用户操作步骤（你可以&lt;a onclick=&quot;acmeReadDirGotoCORS();alert(&#x27;调用成功，请到第一步操作&#x27;)&quot;&gt;点此&lt;/a&gt;手动调用此方法），通过在他们的页面内运行本客户端来消除跨域问题（既然打不过，那就加入他们）。&lt;/span&gt;</span><br><span class=\"hljs-string\">\t\t\t&lt;span class=&quot;langEN&quot;&gt;Then it is to connect with ACME to realize certificate issuance and realize interactive UI; for connecting with ACME, you can directly refer to the RFC 8555 standard. The ACME services of some certificate authorities do not support browsers well, and do not provide complete &lt;i class=&quot;i&quot;&gt;Access-Control-*&lt;/i&gt; response headers, so that the service interface cannot be called directly in the web page; the current solution is very simple and rude, such as ZeroSSL: detect this ACME When there is a cross-domain problem with the service, the &lt;i class=&quot;i&quot;&gt;acmeReadDirGotoCORS()&lt;/i&gt; method will be called to tell the user the operation steps (you can call this method manually by &lt;a onclick=&quot;acmeReadDirGotoCORS();alert(&#x27;Call succeeded, please go to step 1&#x27;)&quot;&gt;clicking here&lt;/a&gt;), and the cross-domain problem will be eliminated by running this client in their page (if we can&#x27;t beat them, we&#x27;d better join them).&lt;/span&gt;</span><br><span class=\"hljs-string\">\t\t&lt;/div&gt;</span><br><span class=\"hljs-string\">\t&lt;/div&gt;</span><br><span class=\"hljs-string\">\t</span><br><span class=\"hljs-string\">\t&lt;div class=&quot;itemBox&quot;&gt;</span><br><span class=\"hljs-string\">\t\t&lt;div class=&quot;pd Bold&quot;&gt;</span><br><span class=\"hljs-string\">\t\t\t&lt;span class=&quot;langCN&quot;&gt;QQ群：交流与支持&lt;/span&gt;</span><br><span class=\"hljs-string\">\t\t\t&lt;span class=&quot;langEN&quot;&gt;QQ group: communication and support&lt;/span&gt;</span><br><span class=\"hljs-string\">\t\t&lt;/div&gt;</span><br><span class=\"hljs-string\">\t\t&lt;div class=&quot;pd&quot; style=&quot;font-size:13px;color:#aaa&quot;&gt;</span><br><span class=\"hljs-string\">\t\t\t&lt;span class=&quot;langCN&quot;&gt;欢迎加QQ群：&lt;i class=&quot;i&quot;&gt;421882406&lt;/i&gt;，纯小写口令：&lt;i class=&quot;i&quot;&gt;xiangyuecn&lt;/i&gt;。如需功能定制，网站、App、小程序、前端和后端等开发需求，请加此QQ群，联系群主（即作者），谢谢~&lt;/span&gt;</span><br><span class=\"hljs-string\">\t\t\t&lt;span class=&quot;langEN&quot;&gt;Welcome to join the QQ group: &lt;i class=&quot;i&quot;&gt;421882406&lt;/i&gt; , code: &lt;i class=&quot;i&quot;&gt;xiangyuecn&lt;/i&gt; . If you need function customization, website, app, applet, front-end and back-end development needs, please join this QQ group and contact the group owner (ie the author), thank you~&lt;/span&gt;</span><br><span class=\"hljs-string\">\t\t&lt;/div&gt;</span><br><span class=\"hljs-string\">\t&lt;/div&gt;</span><br><span class=\"hljs-string\">\t</span><br><span class=\"hljs-string\">&lt;/div&gt;</span><br><span class=\"hljs-string\"></span><br><span class=\"hljs-string\"></span><br><span class=\"hljs-string\"></span><br><span class=\"hljs-string\"></span><br><span class=\"hljs-string\">&lt;div style=&quot;padding-top:20px;font-size:13px;color:#aaa&quot;&gt;</span><br><span class=\"hljs-string\">\t&lt;div class=&quot;pd langEN&quot;&gt;The Chinese-English translation is mainly from: Chrome comes with translation + Baidu translation, which is translated from Chinese to English.&lt;/div&gt;</span><br><span class=\"hljs-string\">\t</span><br><span class=\"hljs-string\">\t&lt;div class=&quot;pd&quot;&gt;</span><br><span class=\"hljs-string\">\t\t&lt;span class=&quot;versionBox&quot;&gt;&lt;/span&gt;</span><br><span class=\"hljs-string\">\t\t&lt;a style=&quot;margin-left:15px&quot; href=&quot;https://github.com/xiangyuecn/ACME-HTML-Web-Browser-Client/blob/main/LICENSE&quot; target=&quot;_blank&quot;&gt;License: GPL-3.0&lt;/a&gt;</span><br><span class=\"hljs-string\">\t&lt;/div&gt;</span><br><span class=\"hljs-string\">&lt;/div&gt;</span><br><span class=\"hljs-string\"></span><br><span class=\"hljs-string\"></span><br><span class=\"hljs-string\"></span><br><span class=\"hljs-string\">&lt;div class=&quot;toastState&quot; style=&quot;display:none;position:fixed;padding:10px;bottom:10px;right:10px;width:360px;max-height:120px;overflow-y:auto;background:#fff;box-shadow: 0px 0px 3px #aaa;border-radius: 10px;&quot;&gt;&lt;/div&gt;</span><br><span class=\"hljs-string\"></span><br><span class=\"hljs-string\">&lt;div class=&quot;donateWidget&quot; style=&quot;position:fixed;top:30%;right:5px;width:160px&quot;&gt;</span><br><span class=\"hljs-string\">\t&lt;div style=&quot;border-radius:12px;background:linear-gradient(160deg, rgba(0,179,255,.7) 20%, rgba(177,0,255,.7) 80%);max-width:300px;padding:20px 10px;text-align: center;&quot;&gt;</span><br><span class=\"hljs-string\">\t\t&lt;div style=&quot;font-size:18px;color:#fff;&quot;&gt;</span><br><span class=\"hljs-string\">\t\t\t&lt;span class=&quot;langCN&quot;&gt;赏包辣条？&lt;/span&gt;</span><br><span class=\"hljs-string\">\t\t\t&lt;span class=&quot;langEN&quot;&gt;Donate a Coke?&lt;/span&gt;</span><br><span class=\"hljs-string\">\t\t&lt;/div&gt;</span><br><span class=\"hljs-string\">\t\t&lt;div style=&quot;font-size:14px;color:#fff;&quot;&gt;</span><br><span class=\"hljs-string\">\t\t\t&lt;div class=&quot;langCN&quot; style=&quot;padding:10px 0&quot;&gt;客户端工具开发维护不易，期望本项目对你能有所帮助，欢迎通过下面按钮打赏作者~&lt;/div&gt;</span><br><span class=\"hljs-string\">\t\t\t&lt;span class=&quot;langEN&quot;&gt;It is not easy to develop and maintain client tools. I hope this project can help you. Welcome to reward the author through the following buttons~&lt;/span&gt;</span><br><span class=\"hljs-string\">\t\t&lt;/div&gt;</span><br><span class=\"hljs-string\">\t\t&lt;div&gt;</span><br><span class=\"hljs-string\">\t\t\t&lt;span class=&quot;langCN&quot;&gt;</span><br><span class=\"hljs-string\">\t\t\t\t&lt;a id=&quot;id_ek8v&quot; target=&quot;_blank&quot; class=&quot;mainBtn mainBtnMin&quot; style=&quot;color:#fff&quot; href=&quot;https://xiangyuecn.github.io/Docs/about.html&quot;&gt;打赏 &lt;span class=&quot;donateBtnIco&quot;&gt;&lt;/span&gt;&lt;/a&gt;</span><br><span class=\"hljs-string\">\t\t\t\t&lt;script&gt; id_ek8v.href=/gitee\\\\.io/.test(location.host)?&quot;https://xiangyuecn.gitee.io/docs/about.html&quot;:&quot;https://xiangyuecn.github.io/Docs/about.html&quot; &lt;/script&gt;</span><br><span class=\"hljs-string\">\t\t\t&lt;/span&gt;</span><br><span class=\"hljs-string\">\t\t\t&lt;span class=&quot;langEN&quot;&gt;</span><br><span class=\"hljs-string\">\t\t\t\t&lt;a href=&quot;https://xiangyuecn.github.io/Docs/about.html&quot; target=&quot;_blank&quot; class=&quot;mainBtn mainBtnMin&quot; style=&quot;color:#fff&quot;&gt;Donate &lt;span class=&quot;donateBtnIco&quot;&gt;&lt;/span&gt;&lt;/a&gt;</span><br><span class=\"hljs-string\">\t\t\t&lt;/span&gt;</span><br><span class=\"hljs-string\">\t\t&lt;/div&gt;</span><br><span class=\"hljs-string\">\t&lt;/div&gt;</span><br><span class=\"hljs-string\">&lt;/div&gt;</span><br><span class=\"hljs-string\"></span><br><span class=\"hljs-string\">&lt;div class=&quot;langBtnBox&quot; style=&quot;position:fixed;top:0;right:0;padding:5px 10px;font-size:14px;border-radius:0 0 0 10px;background:#f5f5f5;&quot;&gt;</span><br><span class=\"hljs-string\">\tLanguage:</span><br><span class=\"hljs-string\">\t  &lt;a class=&quot;langBtn langBtn_cn&quot; onclick=&quot;LangClick(&#x27;cn&#x27;)&quot;&gt;中文&lt;/a&gt;</span><br><span class=\"hljs-string\">\t| &lt;a class=&quot;langBtn langBtn_en&quot; onclick=&quot;LangClick(&#x27;en&#x27;)&quot;&gt;EN&lt;/a&gt;</span><br><span class=\"hljs-string\">&lt;/div&gt;</span><br><span class=\"hljs-string\"></span><br><span class=\"hljs-string\">&lt;/div&gt;</span><br><span class=\"hljs-string\"></span><br><span class=\"hljs-string\"></span><br><span class=\"hljs-string\"></span><br><span class=\"hljs-string\">&lt;style&gt;</span><br><span class=\"hljs-string\">body&#123;</span><br><span class=\"hljs-string\">\tword-wrap: break-word;</span><br><span class=\"hljs-string\">\t--word-break: break-all;</span><br><span class=\"hljs-string\">\tbackground:#f5f5f5 center top no-repeat;</span><br><span class=\"hljs-string\">\tbackground-size: auto 680px;</span><br><span class=\"hljs-string\">&#125;</span><br><span class=\"hljs-string\">pre&#123;</span><br><span class=\"hljs-string\">\twhite-space:pre-wrap;</span><br><span class=\"hljs-string\">&#125;</span><br><span class=\"hljs-string\">label,label *&#123;</span><br><span class=\"hljs-string\">\tcursor: pointer;</span><br><span class=\"hljs-string\">&#125;</span><br><span class=\"hljs-string\">label:hover&#123;</span><br><span class=\"hljs-string\">\tcolor:#06c;</span><br><span class=\"hljs-string\">&#125;</span><br><span class=\"hljs-string\">a&#123;</span><br><span class=\"hljs-string\">\ttext-decoration: none;</span><br><span class=\"hljs-string\">\tcolor:#06c;</span><br><span class=\"hljs-string\">\tcursor: pointer;</span><br><span class=\"hljs-string\">&#125;</span><br><span class=\"hljs-string\">a:hover&#123;</span><br><span class=\"hljs-string\">\tcolor:#f00;</span><br><span class=\"hljs-string\">&#125;</span><br><span class=\"hljs-string\">input, textarea &#123;</span><br><span class=\"hljs-string\">\t--outline: 0;</span><br><span class=\"hljs-string\">\tborder: 1px solid #999;</span><br><span class=\"hljs-string\">\tpadding: 2px;</span><br><span class=\"hljs-string\">\tbox-sizing: border-box;</span><br><span class=\"hljs-string\">\tfont-size: 15px;</span><br><span class=\"hljs-string\">\tline-height:24px;</span><br><span class=\"hljs-string\">&#125;</span><br><span class=\"hljs-string\"></span><br><span class=\"hljs-string\">.main&#123;</span><br><span class=\"hljs-string\">\tmax-width:900px;</span><br><span class=\"hljs-string\">\tmargin:0 auto;</span><br><span class=\"hljs-string\">\tpadding-bottom:80px</span><br><span class=\"hljs-string\">&#125;</span><br><span class=\"hljs-string\"></span><br><span class=\"hljs-string\">.mainBox&#123;</span><br><span class=\"hljs-string\">\tmargin-top:12px;</span><br><span class=\"hljs-string\">\tpadding: 12px;</span><br><span class=\"hljs-string\">\tborder-radius: 6px;</span><br><span class=\"hljs-string\">\tbackground: #fff;</span><br><span class=\"hljs-string\">\tbox-shadow: 2px 2px 3px #aaa;</span><br><span class=\"hljs-string\">&#125;</span><br><span class=\"hljs-string\"></span><br><span class=\"hljs-string\"></span><br><span class=\"hljs-string\">.mainBtn&#123;</span><br><span class=\"hljs-string\">\tdisplay: inline-block;</span><br><span class=\"hljs-string\">\tcursor: pointer;</span><br><span class=\"hljs-string\">\tborder: none;</span><br><span class=\"hljs-string\">\tborder-radius: 3px;</span><br><span class=\"hljs-string\">\tbackground: #f80;</span><br><span class=\"hljs-string\">\tcolor:#fff;</span><br><span class=\"hljs-string\">\tpadding: 0 15px;</span><br><span class=\"hljs-string\">\tline-height: 36px;</span><br><span class=\"hljs-string\">\theight: 36px;</span><br><span class=\"hljs-string\">\toverflow: hidden;</span><br><span class=\"hljs-string\">\tvertical-align: middle;</span><br><span class=\"hljs-string\">&#125;</span><br><span class=\"hljs-string\">.mainBtnMin&#123;</span><br><span class=\"hljs-string\">\theight: 30px;</span><br><span class=\"hljs-string\">\tline-height: 30px;</span><br><span class=\"hljs-string\">\tfont-size: 14px;</span><br><span class=\"hljs-string\">\tpadding: 0 12px;</span><br><span class=\"hljs-string\">&#125;</span><br><span class=\"hljs-string\">.mainBtn:hover&#123;</span><br><span class=\"hljs-string\">\topacity:0.8;</span><br><span class=\"hljs-string\">&#125;</span><br><span class=\"hljs-string\">.mainBtn:active&#123;</span><br><span class=\"hljs-string\">\topacity:1;</span><br><span class=\"hljs-string\">\tbackground: #f00;</span><br><span class=\"hljs-string\">&#125;</span><br><span class=\"hljs-string\"></span><br><span class=\"hljs-string\">.pd&#123;</span><br><span class=\"hljs-string\">\tpadding:0 0 8px 0;</span><br><span class=\"hljs-string\">&#125;</span><br><span class=\"hljs-string\">.pdT&#123;</span><br><span class=\"hljs-string\">\tpadding:8px 0 0 0;</span><br><span class=\"hljs-string\">&#125;</span><br><span class=\"hljs-string\">.lb&#123;</span><br><span class=\"hljs-string\">\tdisplay:inline-block;</span><br><span class=\"hljs-string\">\tvertical-align: middle;</span><br><span class=\"hljs-string\">\tbackground:#00940e;</span><br><span class=\"hljs-string\">\tcolor:#fff;</span><br><span class=\"hljs-string\">\tfont-size:14px;</span><br><span class=\"hljs-string\">\tpadding:2px 8px;</span><br><span class=\"hljs-string\">\tborder-radius: 99px;</span><br><span class=\"hljs-string\">&#125;</span><br><span class=\"hljs-string\"></span><br><span class=\"hljs-string\">.Fill &#123;</span><br><span class=\"hljs-string\">\tposition: absolute;</span><br><span class=\"hljs-string\">\ttop: 0;</span><br><span class=\"hljs-string\">\tleft: 0;</span><br><span class=\"hljs-string\">\twidth: 100%;</span><br><span class=\"hljs-string\">\theight: 100%;</span><br><span class=\"hljs-string\">\toverflow: hidden;</span><br><span class=\"hljs-string\">&#125;</span><br><span class=\"hljs-string\">.Center&#123;</span><br><span class=\"hljs-string\">\ttext-align: center;</span><br><span class=\"hljs-string\">&#125;</span><br><span class=\"hljs-string\">.CenterV &#123;</span><br><span class=\"hljs-string\">\tdisplay: -webkit-flex;</span><br><span class=\"hljs-string\">\tdisplay: -ms-flex;</span><br><span class=\"hljs-string\">\tdisplay: -moz-flex;</span><br><span class=\"hljs-string\">\tdisplay: flex;</span><br><span class=\"hljs-string\">\t-webkit-align-items: center;</span><br><span class=\"hljs-string\">\t-ms-align-items: center;</span><br><span class=\"hljs-string\">\t-moz-align-items: center;</span><br><span class=\"hljs-string\">\talign-items: center;</span><br><span class=\"hljs-string\">&#125;</span><br><span class=\"hljs-string\">.FlexBox &#123;</span><br><span class=\"hljs-string\">\tdisplay: -webkit-flex;</span><br><span class=\"hljs-string\">\tdisplay: -ms-flex;</span><br><span class=\"hljs-string\">\tdisplay: -moz-flex;</span><br><span class=\"hljs-string\">\tdisplay: flex;</span><br><span class=\"hljs-string\">&#125;</span><br><span class=\"hljs-string\">.FlexBoxV&#123;</span><br><span class=\"hljs-string\">\t-webkit-flex-direction:column;</span><br><span class=\"hljs-string\">\t-ms-flex-direction:column;</span><br><span class=\"hljs-string\">\t-moz-flex-direction:column;</span><br><span class=\"hljs-string\">\tflex-direction:column;</span><br><span class=\"hljs-string\">&#125;</span><br><span class=\"hljs-string\">.FlexCenter&#123;</span><br><span class=\"hljs-string\">\t-webkit-box-pack:center;</span><br><span class=\"hljs-string\">\t-ms-box-pack:center;</span><br><span class=\"hljs-string\">\t-moz-box-pack:center;</span><br><span class=\"hljs-string\">\tbox-pack:center;</span><br><span class=\"hljs-string\">\t-webkit-justify-content:center;</span><br><span class=\"hljs-string\">\t-ms-justify-content:center;</span><br><span class=\"hljs-string\">\t-moz-justify-content:center;</span><br><span class=\"hljs-string\">\tjustify-content:center;</span><br><span class=\"hljs-string\">&#125;</span><br><span class=\"hljs-string\">.FlexCenterV&#123;</span><br><span class=\"hljs-string\">\t-webkit-box-align:center;</span><br><span class=\"hljs-string\">\t-ms-box-align:center;</span><br><span class=\"hljs-string\">\t-moz-box-align:center;</span><br><span class=\"hljs-string\">\tbox-align:center;</span><br><span class=\"hljs-string\">\t-webkit-align-items:center;</span><br><span class=\"hljs-string\">\t-ms-align-items:center;</span><br><span class=\"hljs-string\">\t-moz-align-items:center;</span><br><span class=\"hljs-string\">\talign-items:center;</span><br><span class=\"hljs-string\">&#125;</span><br><span class=\"hljs-string\">.FlexItem &#123;</span><br><span class=\"hljs-string\">\t-webkit-flex: 1;</span><br><span class=\"hljs-string\">\t-ms-flex: 1;</span><br><span class=\"hljs-string\">\t-moz-flex: 1;</span><br><span class=\"hljs-string\">\tflex: 1;</span><br><span class=\"hljs-string\">&#125;</span><br><span class=\"hljs-string\"></span><br><span class=\"hljs-string\"></span><br><span class=\"hljs-string\">.Bold&#123;</span><br><span class=\"hljs-string\">\tfont-weight: bold;</span><br><span class=\"hljs-string\">&#125;</span><br><span class=\"hljs-string\">.code&#123;</span><br><span class=\"hljs-string\">\tpadding: 15px;</span><br><span class=\"hljs-string\">\tbackground-color: #000;</span><br><span class=\"hljs-string\">\tvertical-align: middle;</span><br><span class=\"hljs-string\">\tcolor: #fff;</span><br><span class=\"hljs-string\">\tfont-size: 14px;</span><br><span class=\"hljs-string\">\twhite-space: pre-wrap;</span><br><span class=\"hljs-string\">\tborder-radius: 6px;</span><br><span class=\"hljs-string\">\tfont-style: normal;</span><br><span class=\"hljs-string\">&#125;</span><br><span class=\"hljs-string\">.i&#123;</span><br><span class=\"hljs-string\">\tpadding: 2px 4px;</span><br><span class=\"hljs-string\">\tbackground-color: #f6f6f6;</span><br><span class=\"hljs-string\">\tvertical-align: top;</span><br><span class=\"hljs-string\">\tcolor: #c7254e;</span><br><span class=\"hljs-string\">\tfont-size: 12px;</span><br><span class=\"hljs-string\">\twhite-space: pre-wrap;</span><br><span class=\"hljs-string\">\tborder-radius: 4px;</span><br><span class=\"hljs-string\">\tfont-style: normal;</span><br><span class=\"hljs-string\">&#125;</span><br><span class=\"hljs-string\">i.must&#123;</span><br><span class=\"hljs-string\">\tcolor:red;</span><br><span class=\"hljs-string\">\tfont-style:normal;</span><br><span class=\"hljs-string\">&#125;</span><br><span class=\"hljs-string\">.itemTitle&#123;</span><br><span class=\"hljs-string\">\tfont-size: 24px;</span><br><span class=\"hljs-string\">\tfont-weight: bold;</span><br><span class=\"hljs-string\">\tcolor: #03baed;</span><br><span class=\"hljs-string\">&#125;</span><br><span class=\"hljs-string\">.itemBox&#123;</span><br><span class=\"hljs-string\">\tpadding:8px;</span><br><span class=\"hljs-string\">\tmargin-bottom:6px;</span><br><span class=\"hljs-string\">\tborder:1px #ccc dashed;</span><br><span class=\"hljs-string\">\tborder-radius: 6px;</span><br><span class=\"hljs-string\">&#125;</span><br><span class=\"hljs-string\">&lt;/style&gt;</span><br><span class=\"hljs-string\"></span><br><span class=\"hljs-string\"></span><br><span class=\"hljs-string\"></span><br><span class=\"hljs-string\"></span><br><span class=\"hljs-string\">&lt;script&gt;</span><br><span class=\"hljs-string\">//=================================================</span><br><span class=\"hljs-string\">//================= UI functions ==================</span><br><span class=\"hljs-string\">//=================================================</span><br><span class=\"hljs-string\">//LICENSE: GPL-3.0, https://github.com/xiangyuecn/ACME-HTML-Web-Browser-Client</span><br><span class=\"hljs-string\">(function()&#123;</span><br><span class=\"hljs-string\">&quot;use strict&quot;;</span><br><span class=\"hljs-string\">var ChoiceAcmeURLStoreKey=&quot;ACME_HTML_choice_acmeURL&quot;;</span><br><span class=\"hljs-string\">var InputDomainsStoreKey=&quot;ACME_HTML_input_domains&quot;;</span><br><span class=\"hljs-string\">var InputEmailStoreKey=&quot;ACME_HTML_input_email&quot;;</span><br><span class=\"hljs-string\">var DropConfigFile=&#123;&#125;; //拖拽进来的上次配置文件</span><br><span class=\"hljs-string\"></span><br><span class=\"hljs-string\">/************** UI: Initialize on Launch **************/</span><br><span class=\"hljs-string\">window.initMainUI=function()&#123;</span><br><span class=\"hljs-string\">\t$(&quot;.eccCurveNames&quot;).html(X509.SupportECCType2Names().join(Lang(&quot;、&quot;,&quot;, &quot;)));</span><br><span class=\"hljs-string\">\t$(&quot;.donateBtnIco&quot;).html(unescape(&quot;%uD83D%uDE18&quot;));</span><br><span class=\"hljs-string\">\t$(&quot;.versionBox&quot;).html(Lang(&quot;版本: &quot;+Version,&quot;Ver: &quot;+Version));</span><br><span class=\"hljs-string\">\t</span><br><span class=\"hljs-string\">\tif(/mobile/i.test(navigator.userAgent))&#123;</span><br><span class=\"hljs-string\">\t\t$(&quot;.main&quot;).prepend($(&quot;.langBtnBox&quot;).css(&quot;position&quot;,null));</span><br><span class=\"hljs-string\">\t\t$(&quot;.donateWidget&quot;).css(&quot;position&quot;,null);</span><br><span class=\"hljs-string\">\t&#125;</span><br><span class=\"hljs-string\">\t</span><br><span class=\"hljs-string\">\tCLog(&quot;initMainUI&quot;,0,Lang(</span><br><span class=\"hljs-string\">\\`一些高级配置：</span><br><span class=\"hljs-string\">- 设置 X509.DefaultType2_RSA=&quot;4096&quot; 可以调整新生成的RSA密钥位数。</span><br><span class=\"hljs-string\">- 设置 X509.DefaultType2_ECC=&quot;P-384&quot; 可以调整新生成的ECC密钥曲线，X509.SupportECCType2内为支持的曲线。</span><br><span class=\"hljs-string\">- 设置 DefaultDownloadFileNames 内的属性可以修改对应下载的文件默认名称。</span><br><span class=\"hljs-string\">- UI调试：完成第二步后允许进行UI调试，手动调用 Test_AllStepData_Save() 保存数据，刷新页面可恢复界面。\\`,</span><br><span class=\"hljs-string\">\\`Some advanced configurations:</span><br><span class=\"hljs-string\">- Set X509.DefaultType2_RSA=&quot;4096&quot; The number of newly generated RSA keys can be adjusted.</span><br><span class=\"hljs-string\">- Set X509.DefaultType2_ECC=&quot;P-384&quot; The newly generated ECC key curve can be adjusted. The supported curve is in X509.SupportECCType2.</span><br><span class=\"hljs-string\">- Setting the property in DefaultDownloadFileNames can modify the default name of the corresponding downloaded file.</span><br><span class=\"hljs-string\">- UI debugging: Allow UI debugging after completing the step 2 . Manually call Test_AllStepData_Save() to save the data, and refresh the page to restore the interface.\\`));</span><br><span class=\"hljs-string\">\t</span><br><span class=\"hljs-string\">\tinitTest_Restore();</span><br><span class=\"hljs-string\">\tacmeReadDirGotoCORSInit();</span><br><span class=\"hljs-string\">\tdownloadFileNameShow();</span><br><span class=\"hljs-string\">\tinitStep1();</span><br><span class=\"hljs-string\">\tinitStep2();</span><br><span class=\"hljs-string\">\tinitStep4();</span><br><span class=\"hljs-string\">&#125;;</span><br><span class=\"hljs-string\">var initStep1=function()&#123;</span><br><span class=\"hljs-string\">\t$(&quot;input[name=choice_acmeURL]&quot;).bind(&quot;click&quot;,function(e)&#123;</span><br><span class=\"hljs-string\">\t\tvar el=e.target;</span><br><span class=\"hljs-string\">\t\tvar isManual=el.value==&quot;manual&quot;;</span><br><span class=\"hljs-string\">\t\t$(&quot;.in_acmeURL&quot;).css(&quot;opacity&quot;,isManual?1:0.4)</span><br><span class=\"hljs-string\">\t\t\t.val(isManual?step1ChoiceStoreVal:el.value)</span><br><span class=\"hljs-string\">\t\t\t.attr(&quot;readonly&quot;,isManual?null:&quot;&quot;);</span><br><span class=\"hljs-string\">\t\t</span><br><span class=\"hljs-string\">\t\tvar descKey=$(el).attr(&quot;desckey&quot;);</span><br><span class=\"hljs-string\">\t\t$(&quot;.descAcmeURL&quot;).hide();</span><br><span class=\"hljs-string\">\t\tif(descKey)$(&quot;.&quot;+descKey).show();</span><br><span class=\"hljs-string\">\t\t</span><br><span class=\"hljs-string\">\t\tstep1ChoiceStoreVal=&quot;&quot;;</span><br><span class=\"hljs-string\">\t\tchoiceAcmeURLChangeAfter();</span><br><span class=\"hljs-string\">\t&#125;);</span><br><span class=\"hljs-string\">\tresetStep1();</span><br><span class=\"hljs-string\">&#125;;</span><br><span class=\"hljs-string\">var step1ChoiceStoreVal;</span><br><span class=\"hljs-string\">var resetStep1=function()&#123;</span><br><span class=\"hljs-string\">\t//选中上次选择的证书颁发机构</span><br><span class=\"hljs-string\">\tstep1ChoiceStoreVal=DropConfigFile.acmeURL||window.Default_ACME_URL||localStorage[ChoiceAcmeURLStoreKey]||&quot;&quot;;</span><br><span class=\"hljs-string\">\tvar choices=$(&quot;input[name=choice_acmeURL]&quot;)</span><br><span class=\"hljs-string\">\tvar idx=0;</span><br><span class=\"hljs-string\">\tif(step1ChoiceStoreVal)&#123;</span><br><span class=\"hljs-string\">\t\tvar manualIdx=0;</span><br><span class=\"hljs-string\">\t\tfor(var i=0;i&lt;choices.length;i++)&#123;</span><br><span class=\"hljs-string\">\t\t\tif(choices[i].value==step1ChoiceStoreVal) idx=i+1;</span><br><span class=\"hljs-string\">\t\t\tif(choices[i].value==&quot;manual&quot;) manualIdx=i+1;</span><br><span class=\"hljs-string\">\t\t&#125;</span><br><span class=\"hljs-string\">\t\tif(!idx)idx=manualIdx //手动填写</span><br><span class=\"hljs-string\">\t\tidx--;</span><br><span class=\"hljs-string\">\t&#125;</span><br><span class=\"hljs-string\">\tchoices[idx].click();</span><br><span class=\"hljs-string\">&#125;;</span><br><span class=\"hljs-string\">var initStep2=function()&#123;</span><br><span class=\"hljs-string\">\t//证书私钥UI</span><br><span class=\"hljs-string\">\t$(&quot;.privateKeyBox&quot;).hide();</span><br><span class=\"hljs-string\">\t$(&quot;input[name=choice_privateKey]&quot;).bind(&quot;click&quot;,function(e)&#123;</span><br><span class=\"hljs-string\">\t\tvar el=e.target;</span><br><span class=\"hljs-string\">\t\tvar isManual=el.value==&quot;manual&quot;;</span><br><span class=\"hljs-string\">\t\t$(&quot;.in_privateKey&quot;).css(&quot;opacity&quot;,isManual?1:0.4)</span><br><span class=\"hljs-string\">\t\t\t.val(&quot;&quot;)</span><br><span class=\"hljs-string\">\t\t\t.attr(&quot;readonly&quot;,isManual?null:&quot;&quot;);</span><br><span class=\"hljs-string\">\t\t$(&quot;.privateKeyBox&quot;).show();</span><br><span class=\"hljs-string\">\t\t</span><br><span class=\"hljs-string\">\t\tconfigPrivateKeyGenerate(el.value);//生成密钥</span><br><span class=\"hljs-string\">\t\tconfigStepShow();//重新显示界面</span><br><span class=\"hljs-string\">\t&#125;);</span><br><span class=\"hljs-string\">\t</span><br><span class=\"hljs-string\">\t//ACME账户私钥UI</span><br><span class=\"hljs-string\">\t$(&quot;.accountKeyBox&quot;).hide();</span><br><span class=\"hljs-string\">\t$(&quot;input[name=choice_accountKey]&quot;).bind(&quot;click&quot;,function(e)&#123;</span><br><span class=\"hljs-string\">\t\tvar el=e.target;</span><br><span class=\"hljs-string\">\t\tvar isManual=el.value==&quot;manual&quot;;</span><br><span class=\"hljs-string\">\t\t$(&quot;.in_accountKey&quot;).css(&quot;opacity&quot;,isManual?1:0.4)</span><br><span class=\"hljs-string\">\t\t\t.val(&quot;&quot;)</span><br><span class=\"hljs-string\">\t\t\t.attr(&quot;readonly&quot;,isManual?null:&quot;&quot;);</span><br><span class=\"hljs-string\">\t\t$(&quot;.accountKeyBox&quot;).show();</span><br><span class=\"hljs-string\">\t\t</span><br><span class=\"hljs-string\">\t\tconfigAccountKeyGenerate(el.value);//生成密钥</span><br><span class=\"hljs-string\">\t\tconfigStepShow();//重新显示界面</span><br><span class=\"hljs-string\">\t&#125;);</span><br><span class=\"hljs-string\">&#125;;</span><br><span class=\"hljs-string\"></span><br><span class=\"hljs-string\"></span><br><span class=\"hljs-string\">//下一步操作提示</span><br><span class=\"hljs-string\">var NextStepTips=function()&#123;</span><br><span class=\"hljs-string\">\treturn &#x27;&lt;span style=&quot;font-size:24px;font-weight:bold;&quot;&gt;&#x27;+Lang(&quot;请进行下一步操作。&quot;,&quot; Please proceed to the next step.&quot;)+&#x27;&lt;/span&gt;&#x27;;</span><br><span class=\"hljs-string\">&#125;;</span><br><span class=\"hljs-string\">//请稍候提示</span><br><span class=\"hljs-string\">var PleaseWaitTips=function()&#123;</span><br><span class=\"hljs-string\">\treturn Lang(&quot; 请稍候... &quot;,&quot; Please wait... &quot;);</span><br><span class=\"hljs-string\">&#125;;</span><br><span class=\"hljs-string\">//请重试提示</span><br><span class=\"hljs-string\">var TryAgainTips=function()&#123;</span><br><span class=\"hljs-string\">\treturn Lang(&quot; 请重试！&quot;,&quot; Please try again! &quot;);</span><br><span class=\"hljs-string\">&#125;;</span><br><span class=\"hljs-string\">//每一步的状态更新显示</span><br><span class=\"hljs-string\">var ShowState=function(elem,msg,color,tag)&#123;</span><br><span class=\"hljs-string\">\tvar now=new Date();</span><br><span class=\"hljs-string\">\tvar t=(&quot;0&quot;+now.getHours()).substr(-2)</span><br><span class=\"hljs-string\">\t\t+&quot;:&quot;+(&quot;0&quot;+now.getMinutes()).substr(-2)</span><br><span class=\"hljs-string\">\t\t+&quot;:&quot;+(&quot;0&quot;+now.getSeconds()).substr(-2);</span><br><span class=\"hljs-string\">\t$(elem).html(msg===false?&#x27;&#x27;:&#x27;&lt;div style=&quot;color:&#x27;+(!color?&quot;&quot;:color==1?&quot;red&quot;:color==2?&quot;#0b1&quot;:color==3?&quot;#fa0&quot;:color)+&#x27;&quot;&gt;&#x27;+(tag==null?&#x27;[&#x27;+t+&#x27;] &#x27;:tag)+msg+&#x27;&lt;/div&gt;&#x27;);</span><br><span class=\"hljs-string\">\treturn msg;</span><br><span class=\"hljs-string\">&#125;;</span><br><span class=\"hljs-string\">window.Toast=function(msg,color,time)&#123;</span><br><span class=\"hljs-string\">\tShowState(&quot;.toastState&quot;,msg,color,&quot;&quot;);</span><br><span class=\"hljs-string\">\t</span><br><span class=\"hljs-string\">\t$(&quot;.toastState&quot;).show();</span><br><span class=\"hljs-string\">\tclearTimeout(Toast._int);</span><br><span class=\"hljs-string\">\tToast._int=setTimeout(function()&#123; $(&quot;.toastState&quot;).hide(); &#125;, time||5000);</span><br><span class=\"hljs-string\">&#125;;</span><br><span class=\"hljs-string\">window.onerror=function(message, url, lineNo, columnNo, error)&#123;</span><br><span class=\"hljs-string\">\t//https://www.cnblogs.com/xianyulaodi/p/6201829.html</span><br><span class=\"hljs-string\">\tToast(&#x27;【Uncaught Error】&#x27;+message+&#x27;&lt;pre&gt;&#x27;+&quot;at:&quot;+lineNo+&quot;:&quot;+columnNo+&quot; url:&quot;+url+&quot;\\\\n&quot;+(error&amp;&amp;error.stack||&quot;-&quot;)+&#x27;&lt;/pre&gt;&#x27;,1,15000);</span><br><span class=\"hljs-string\">&#125;;</span><br><span class=\"hljs-string\"></span><br><span class=\"hljs-string\"></span><br><span class=\"hljs-string\"></span><br><span class=\"hljs-string\">//用户点击操作同步控制，新点击操作要终止之前未完成的操作</span><br><span class=\"hljs-string\">var UserClickSyncID=0;</span><br><span class=\"hljs-string\">var UserClickSyncKill=function(id,tag,msg)&#123;</span><br><span class=\"hljs-string\">\tif(id!=UserClickSyncID)&#123;</span><br><span class=\"hljs-string\">\t\tvar abort=Lang(&quot;被终止&quot;,&quot;Abort&quot;,1);</span><br><span class=\"hljs-string\">\t\tCLog(tag+&quot; &quot;+abort,3,&quot;From: &quot;+msg+&quot; [&quot;+abort+&quot;]&quot;);</span><br><span class=\"hljs-string\">\t\treturn true;</span><br><span class=\"hljs-string\">\t&#125;</span><br><span class=\"hljs-string\">&#125;;</span><br><span class=\"hljs-string\"></span><br><span class=\"hljs-string\"></span><br><span class=\"hljs-string\"></span><br><span class=\"hljs-string\"></span><br><span class=\"hljs-string\"></span><br><span class=\"hljs-string\">/************** UI Step1: Read ACME service directory **************/</span><br><span class=\"hljs-string\">//证书颁发机构单选按钮点击后处理</span><br><span class=\"hljs-string\">var choiceAcmeURLChangeAfter=function()&#123;</span><br><span class=\"hljs-string\">\tUserClickSyncID++;</span><br><span class=\"hljs-string\">\t</span><br><span class=\"hljs-string\">\t$(&quot;.step1Hide&quot;).hide();</span><br><span class=\"hljs-string\">\t$(&quot;.step1Show&quot;).show();</span><br><span class=\"hljs-string\">\tShowState(&quot;.acmeReadDirState&quot;,false);</span><br><span class=\"hljs-string\">\t</span><br><span class=\"hljs-string\">\tif($(&quot;.in_acmeURL&quot;).val())acmeReadDirClick();</span><br><span class=\"hljs-string\">&#125;;</span><br><span class=\"hljs-string\">//点击读取服务目录按钮</span><br><span class=\"hljs-string\">window.acmeReadDirClick=function()&#123;</span><br><span class=\"hljs-string\">\tvar id=++UserClickSyncID;</span><br><span class=\"hljs-string\">\t</span><br><span class=\"hljs-string\">\t$(&quot;.step1Hide&quot;).hide();</span><br><span class=\"hljs-string\">\t$(&quot;.step1Show&quot;).show();</span><br><span class=\"hljs-string\">\tvar tag=&quot;Step-1&quot;,sEl=&quot;.acmeReadDirState&quot;;</span><br><span class=\"hljs-string\">\t</span><br><span class=\"hljs-string\">\tvar url=$(&quot;.in_acmeURL&quot;).val().trim();</span><br><span class=\"hljs-string\">\tif(!url)&#123;</span><br><span class=\"hljs-string\">\t\tShowState(sEl,Lang(&quot;请填写服务URL！&quot;,&quot;Please fill in the service URL!&quot;),1);</span><br><span class=\"hljs-string\">\t\treturn;</span><br><span class=\"hljs-string\">\t&#125;</span><br><span class=\"hljs-string\">\tlocalStorage[ChoiceAcmeURLStoreKey]=url;</span><br><span class=\"hljs-string\">\turl=ACME.URL=url.replace(/\\\\/$/,&quot;&quot;);</span><br><span class=\"hljs-string\">\t</span><br><span class=\"hljs-string\">\tvar msg0=CLog(tag,0, ShowState(sEl,PleaseWaitTips()+Lang(&quot;正在读取服务目录，&quot;,&quot;Reading service directory, &quot;)+&quot; URL=&quot;+ACME.URL, 2));</span><br><span class=\"hljs-string\">\tvar reqDir=function()&#123;</span><br><span class=\"hljs-string\">\t\tACME.Directory(function(cache,saveCache)&#123;</span><br><span class=\"hljs-string\">\t\t\tsaveCacheCors=function(corsOK,err)&#123;</span><br><span class=\"hljs-string\">\t\t\t\tcache.corsOK=corsOK?1:-1;</span><br><span class=\"hljs-string\">\t\t\t\tcache.corsError=err||&quot;&quot;;</span><br><span class=\"hljs-string\">\t\t\t\tsaveCache();</span><br><span class=\"hljs-string\">\t\t\t&#125;;</span><br><span class=\"hljs-string\">\t\t\tif(cache.corsOK==1) dirOK();//已缓存的，此ACME服务正常</span><br><span class=\"hljs-string\">\t\t\telse if(cache.corsOK==-1) testCORSFail(cache.corsError, true);//不正常已缓存</span><br><span class=\"hljs-string\">\t\t\telse testCORS();//检测是否能正常调用接口，是否支持跨域</span><br><span class=\"hljs-string\">\t\t&#125;,function(err,status)&#123;</span><br><span class=\"hljs-string\">\t\t\tif(UserClickSyncKill(id,tag,msg0+&quot; err: &quot;+err))return;</span><br><span class=\"hljs-string\">\t\t\tif(status===0)&#123; //可能是跨域无法读取到任何数据</span><br><span class=\"hljs-string\">\t\t\t\tCLog(tag,1, ShowState(sEl,Lang(&quot;读取服务目录出错：无法访问此URL。&quot;,&quot;Read service directory error: This URL cannot be accessed.&quot;)+TryAgainTips(), 1));</span><br><span class=\"hljs-string\">\t\t\t\t</span><br><span class=\"hljs-string\">\t\t\t\tacmeReadDirGotoCORS(Lang(&quot;如果你可以在浏览器中直接打开并访问此ACME服务URL，代表此ACME服务对跨域访问支持不良，则请按下面步骤操作：&quot;,&quot;If you can open and access this ACME service URL directly in your browser, it represents that this ACME service has poor support for cross-domain access, please follow the steps below:&quot;));</span><br><span class=\"hljs-string\">\t\t\t&#125;else&#123;</span><br><span class=\"hljs-string\">\t\t\t\tCLog(tag,1, ShowState(sEl,Lang(&quot;读取服务目录出错：&quot;+err,&quot;Read service directory error: &quot;+err)+TryAgainTips(), 1));</span><br><span class=\"hljs-string\">\t\t\t&#125;;</span><br><span class=\"hljs-string\">\t\t&#125;);</span><br><span class=\"hljs-string\">\t&#125;;</span><br><span class=\"hljs-string\">\tvar saveCacheCors;</span><br><span class=\"hljs-string\">\tvar dirOK=function()&#123;</span><br><span class=\"hljs-string\">\t\tif(UserClickSyncKill(id,tag,msg0))return;</span><br><span class=\"hljs-string\">\t\tconfigStepShow();</span><br><span class=\"hljs-string\">\t\tCLog(tag,0, ShowState(sEl,Lang(&quot;读取服务目录成功，&quot;,&quot;Read service directory OK,&quot;)</span><br><span class=\"hljs-string\">\t\t\t+NextStepTips()+&quot; URL=&quot;+ACME.URL, 2), ACME.DirData);</span><br><span class=\"hljs-string\">\t&#125;;</span><br><span class=\"hljs-string\">\t</span><br><span class=\"hljs-string\">\t//ZeroSSL接口跨域支持太差，发现这种就直接在他们网站里面跑</span><br><span class=\"hljs-string\">\tvar testCORS=function()&#123;</span><br><span class=\"hljs-string\">\t\tif(UserClickSyncKill(id,tag,msg0))return;</span><br><span class=\"hljs-string\">\t\tmsg0=CLog(tag,0, ShowState(sEl,PleaseWaitTips()+Lang(&quot;正在测试此ACME服务对浏览器的支持情况，&quot;,&quot;Testing browser support for this ACME service, &quot;)+&quot; URL=&quot;+ACME.URL, 2));</span><br><span class=\"hljs-string\">\t\tACME.GetNonce(true,function()&#123;</span><br><span class=\"hljs-string\">\t\t\tACME.TestAccountCORS(function()&#123;</span><br><span class=\"hljs-string\">\t\t\t\tCLog(tag,0, Lang(&quot;此ACME服务对浏览器的支持良好。&quot;,&quot;This ACME service has good browser support.&quot;));</span><br><span class=\"hljs-string\">\t\t\t\tsaveCacheCors(true);</span><br><span class=\"hljs-string\">\t\t\t\tdirOK();</span><br><span class=\"hljs-string\">\t\t\t&#125;,testCORSFail);</span><br><span class=\"hljs-string\">\t\t&#125;,function(err,corsFail)&#123; //GetNonce 能明确检测到是否支持跨域可以缓存起来，账户地址可能是网络错误不缓存</span><br><span class=\"hljs-string\">\t\t\tif(corsFail) saveCacheCors(false, err);</span><br><span class=\"hljs-string\">\t\t\ttestCORSFail(err,corsFail);</span><br><span class=\"hljs-string\">\t\t&#125;);</span><br><span class=\"hljs-string\">\t&#125;;</span><br><span class=\"hljs-string\">\tvar testCORSFail=function(err,corsFail)&#123;</span><br><span class=\"hljs-string\">\t\tif(UserClickSyncKill(id,tag,msg0+&quot; err: &quot;+err))return;</span><br><span class=\"hljs-string\">\t\tCLog(tag,1, ShowState(sEl,Lang(</span><br><span class=\"hljs-string\">\t\t\t&quot;测试此ACME服务对浏览器的支持情况，发生错误：&quot;+err</span><br><span class=\"hljs-string\">\t\t\t,&quot;Test browser support for this ACME service, An error occurred: &quot;+err)</span><br><span class=\"hljs-string\">\t\t\t+(corsFail?&quot;&quot;:TryAgainTips()), 1));</span><br><span class=\"hljs-string\">\t\tLangReview(sEl);//err from cache</span><br><span class=\"hljs-string\">\t\tif(corsFail) acmeReadDirGotoCORS();</span><br><span class=\"hljs-string\">\t&#125;;</span><br><span class=\"hljs-string\">\t</span><br><span class=\"hljs-string\">\treqDir();</span><br><span class=\"hljs-string\">&#125;;</span><br><span class=\"hljs-string\"></span><br><span class=\"hljs-string\"></span><br><span class=\"hljs-string\"></span><br><span class=\"hljs-string\"></span><br><span class=\"hljs-string\"></span><br><span class=\"hljs-string\"></span><br><span class=\"hljs-string\">/************** UI Step2: Certificate Configuration **************/</span><br><span class=\"hljs-string\">//显示第二步界面</span><br><span class=\"hljs-string\">var configStepShow=function()&#123;</span><br><span class=\"hljs-string\">\t$(&quot;.step2Hide&quot;).hide();</span><br><span class=\"hljs-string\">\t$(&quot;.step2Show&quot;).show();</span><br><span class=\"hljs-string\">\tShowState(&quot;.configStepState&quot;,false);</span><br><span class=\"hljs-string\">\t</span><br><span class=\"hljs-string\">\t$(&quot;.eabShow&quot;)[ACME.StepData.needEAB?&#x27;show&#x27;:&#x27;hide&#x27;]();</span><br><span class=\"hljs-string\">\tif(DropConfigFile.eabKid)$(&quot;.in_eab_kid&quot;).val(DropConfigFile.eabKid);</span><br><span class=\"hljs-string\">\tif(DropConfigFile.eabKey)$(&quot;.in_eab_key&quot;).val(DropConfigFile.eabKey);</span><br><span class=\"hljs-string\">\t</span><br><span class=\"hljs-string\">\t$(&quot;.termsAgreeBox&quot;)[ACME.StepData.termsURL?&#x27;show&#x27;:&#x27;hide&#x27;]();</span><br><span class=\"hljs-string\">\t$(&quot;.termsAgreeTips&quot;).html(Lang(&#x27;我同意此证书颁发机构ACME服务的&lt;a href=&quot;&#x27;+ACME.StepData.termsURL+&#x27;&quot; target=&quot;_blank&quot;&gt;服务条款&lt;/a&gt;。&#x27;, &#x27;I agree to the &lt;a href=&quot;&#x27;+ACME.StepData.termsURL+&#x27;&quot; target=&quot;_blank&quot;&gt;terms of service&lt;/a&gt; for this Certificate Authority ACME Service.&#x27;));</span><br><span class=\"hljs-string\">\t$(&quot;.choice_termsAgree&quot;).prop(&quot;checked&quot;,true);</span><br><span class=\"hljs-string\">\t</span><br><span class=\"hljs-string\">\tvar el=$(&quot;.in_domains&quot;);//填充上次填写的域名列表</span><br><span class=\"hljs-string\">\tvar valS=localStorage[InputDomainsStoreKey];</span><br><span class=\"hljs-string\">\tvar val=DropConfigFile.domains&amp;&amp;DropConfigFile.domains.join(&quot;, &quot;)||valS;</span><br><span class=\"hljs-string\">\tif(!el.val())&#123;</span><br><span class=\"hljs-string\">\t\tel.val(val||&quot;&quot;);</span><br><span class=\"hljs-string\">\t&#125;</span><br><span class=\"hljs-string\">\t$(&quot;.choice_domains_store&quot;).prop(&quot;checked&quot;, !!valS);</span><br><span class=\"hljs-string\">\t</span><br><span class=\"hljs-string\">\tvar el=$(&quot;.in_email&quot;);//填充上次填写的联系邮箱</span><br><span class=\"hljs-string\">\tvar valS=localStorage[InputEmailStoreKey];</span><br><span class=\"hljs-string\">\tvar val=DropConfigFile.email||valS;</span><br><span class=\"hljs-string\">\tif(!el.val())&#123;</span><br><span class=\"hljs-string\">\t\tel.val(val||&quot;&quot;);</span><br><span class=\"hljs-string\">\t&#125;</span><br><span class=\"hljs-string\">\t$(&quot;.choice_email_store&quot;).prop(&quot;checked&quot;, !!valS);</span><br><span class=\"hljs-string\">\t</span><br><span class=\"hljs-string\">\tvar setKey=function(k)&#123;</span><br><span class=\"hljs-string\">\t\tif(DropConfigFile[k])&#123;</span><br><span class=\"hljs-string\">\t\t\t$(&quot;input[name=choice_&quot;+k+&quot;][value=manual]&quot;)[0].click();</span><br><span class=\"hljs-string\">\t\t\t$(&quot;.in_&quot;+k).val(DropConfigFile[k]);</span><br><span class=\"hljs-string\">\t\t&#125;</span><br><span class=\"hljs-string\">\t&#125;;</span><br><span class=\"hljs-string\">\tsetKey(&quot;privateKey&quot;);setKey(&quot;accountKey&quot;);</span><br><span class=\"hljs-string\">\t</span><br><span class=\"hljs-string\">\tDropConfigFile=&#123;&#125;;//配置完成，丢弃拖拽进来的配置信息</span><br><span class=\"hljs-string\">&#125;;</span><br><span class=\"hljs-string\">//生成证书的密钥对</span><br><span class=\"hljs-string\">var configPrivateKeyGenerate=function(type)&#123;</span><br><span class=\"hljs-string\">\tvar id=++UserClickSyncID;</span><br><span class=\"hljs-string\">\tvar tag=&quot;Step-2&quot;,sEl=&quot;.privateKeyState&quot;;</span><br><span class=\"hljs-string\">\t</span><br><span class=\"hljs-string\">\tvar keyTag=&quot;&quot;,type2;</span><br><span class=\"hljs-string\">\tif(type==&quot;generateRSA&quot;)&#123;</span><br><span class=\"hljs-string\">\t\ttype=&quot;RSA&quot;;type2=X509.DefaultType2_RSA;</span><br><span class=\"hljs-string\">\t\tkeyTag=Lang(&quot;证书RSA私钥(&quot;+type2+&quot;位)&quot;,&quot;Certificate RSA private key (&quot;+type2+&quot; bits)&quot;);</span><br><span class=\"hljs-string\">\t&#125;else if(type==&quot;generateECC&quot;)&#123;</span><br><span class=\"hljs-string\">\t\ttype=&quot;ECC&quot;;type2=X509.DefaultType2_ECC; var type2N=X509.SupportECCType2[type2]||type2;</span><br><span class=\"hljs-string\">\t\tkeyTag=Lang(&quot;证书ECC私钥(&quot;+type2N+&quot;曲线)&quot;,&quot;Certificate ECC Private Key (&quot;+type2N+&quot; curve)&quot;);</span><br><span class=\"hljs-string\">\t&#125;else&#123;</span><br><span class=\"hljs-string\">\t\tShowState(sEl,false);</span><br><span class=\"hljs-string\">\t\treturn;</span><br><span class=\"hljs-string\">\t&#125;;</span><br><span class=\"hljs-string\">\t</span><br><span class=\"hljs-string\">\tvar msg0=CLog(tag,0, ShowState(sEl,PleaseWaitTips()+Lang(&quot;正在创建&quot;,&quot;Generating &quot;)+keyTag, 2));</span><br><span class=\"hljs-string\">\tX509.KeyGenerate(type,type2,function(pem)&#123;</span><br><span class=\"hljs-string\">\t\tif(UserClickSyncKill(id,tag,msg0))return;</span><br><span class=\"hljs-string\">\t\t$(&quot;.in_privateKey&quot;).val(pem);</span><br><span class=\"hljs-string\">\t\tCLog(tag,0, ShowState(sEl,keyTag+Lang(&quot;，创建成功。&quot;,&quot;, generated successfully.&quot;), 2), &#x27;\\\\n&#x27;+pem);</span><br><span class=\"hljs-string\">\t&#125;,function(err)&#123;</span><br><span class=\"hljs-string\">\t\tif(UserClickSyncKill(id,tag,msg0+&quot; err: &quot;+err))return;</span><br><span class=\"hljs-string\">\t\tCLog(tag,1, ShowState(sEl,keyTag+Lang(&quot;，发生错误：&quot;+err,&quot;, An error occurred: &quot;+err), 1));</span><br><span class=\"hljs-string\">\t&#125;);</span><br><span class=\"hljs-string\">&#125;;</span><br><span class=\"hljs-string\">//生成ACME账户的密钥对</span><br><span class=\"hljs-string\">var configAccountKeyGenerate=function(type)&#123;</span><br><span class=\"hljs-string\">\tvar id=++UserClickSyncID;</span><br><span class=\"hljs-string\">\tvar tag=&quot;Step-2&quot;,sEl=&quot;.accountKeyState&quot;;</span><br><span class=\"hljs-string\">\t</span><br><span class=\"hljs-string\">\tvar keyTag=&quot;&quot;,type2;</span><br><span class=\"hljs-string\">\tif(type==&quot;generateRSA&quot;)&#123;</span><br><span class=\"hljs-string\">\t\ttype=&quot;RSA&quot;;type2=X509.DefaultType2_RSA;</span><br><span class=\"hljs-string\">\t\tkeyTag=Lang(&quot;ACME账户RSA私钥(&quot;+type2+&quot;位)&quot;,&quot;ACME account RSA private key (&quot;+type2+&quot; bits)&quot;);</span><br><span class=\"hljs-string\">\t&#125;else if(type==&quot;generateECC&quot;)&#123;</span><br><span class=\"hljs-string\">\t\ttype=&quot;ECC&quot;;type2=X509.DefaultType2_ECC; var type2N=X509.SupportECCType2[type2]||type2;</span><br><span class=\"hljs-string\">\t\tkeyTag=Lang(&quot;ACME账户ECC私钥(&quot;+type2N+&quot;曲线)&quot;,&quot;ACME account ECC Private Key (&quot;+type2N+&quot; curve)&quot;);</span><br><span class=\"hljs-string\">\t&#125;else&#123;</span><br><span class=\"hljs-string\">\t\tShowState(sEl,false);</span><br><span class=\"hljs-string\">\t\treturn;</span><br><span class=\"hljs-string\">\t&#125;;</span><br><span class=\"hljs-string\">\t</span><br><span class=\"hljs-string\">\tvar msg0=CLog(tag,0, ShowState(sEl,PleaseWaitTips()+Lang(&quot;正在创建&quot;,&quot;Generating &quot;)+keyTag, 2));</span><br><span class=\"hljs-string\">\tX509.KeyGenerate(type,type2,function(pem)&#123;</span><br><span class=\"hljs-string\">\t\tif(UserClickSyncKill(id,tag,msg0))return;</span><br><span class=\"hljs-string\">\t\t$(&quot;.in_accountKey&quot;).val(pem);</span><br><span class=\"hljs-string\">\t\tCLog(tag,0, ShowState(sEl,keyTag+Lang(&quot;，创建成功。&quot;,&quot;, generated successfully.&quot;), 2), &#x27;\\\\n&#x27;+pem);</span><br><span class=\"hljs-string\">\t&#125;,function(err)&#123;</span><br><span class=\"hljs-string\">\t\tif(UserClickSyncKill(id,tag,msg0+&quot; err: &quot;+err))return;</span><br><span class=\"hljs-string\">\t\tCLog(tag,1, ShowState(sEl,keyTag+Lang(&quot;，发生错误：&quot;+err,&quot;, An error occurred: &quot;+err), 1));</span><br><span class=\"hljs-string\">\t&#125;);</span><br><span class=\"hljs-string\">&#125;;</span><br><span class=\"hljs-string\">//点击确定按钮，完成配置域名和私钥的配置</span><br><span class=\"hljs-string\">window.configStepClick=function()&#123;</span><br><span class=\"hljs-string\">\tvar id=++UserClickSyncID;</span><br><span class=\"hljs-string\">\tvar tag=&quot;Step-2&quot;,sEl=&quot;.configStepState&quot;;</span><br><span class=\"hljs-string\">\t</span><br><span class=\"hljs-string\">\t$(&quot;.step2Hide&quot;).hide();</span><br><span class=\"hljs-string\">\t$(&quot;.step2Show&quot;).show();</span><br><span class=\"hljs-string\">\tShowState(sEl,false);</span><br><span class=\"hljs-string\">\t</span><br><span class=\"hljs-string\">\tvar domains=$(&quot;.in_domains&quot;).val().trim();</span><br><span class=\"hljs-string\">\tvar domainsStore=$(&quot;.choice_domains_store&quot;).prop(&quot;checked&quot;);</span><br><span class=\"hljs-string\">\tvar privateKey=$(&quot;.in_privateKey&quot;).val().trim();</span><br><span class=\"hljs-string\">\tvar accountKey=$(&quot;.in_accountKey&quot;).val().trim();</span><br><span class=\"hljs-string\">\tvar email=$(&quot;.in_email&quot;).val().trim();</span><br><span class=\"hljs-string\">\tvar emailStore=$(&quot;.choice_email_store&quot;).prop(&quot;checked&quot;);</span><br><span class=\"hljs-string\">\tvar eabKid=$(&quot;.in_eab_kid&quot;).val().trim();</span><br><span class=\"hljs-string\">\tvar eabKey=$(&quot;.in_eab_key&quot;).val().trim();</span><br><span class=\"hljs-string\">\tvar termsAgree=$(&quot;.choice_termsAgree&quot;).prop(&quot;checked&quot;);</span><br><span class=\"hljs-string\">\t</span><br><span class=\"hljs-string\">\t//域名转成数组</span><br><span class=\"hljs-string\">\tdomains=domains.replace(/\\\\s+/g,&quot;,&quot;).replace(/，+/g,&quot;,&quot;).split(/,+/);</span><br><span class=\"hljs-string\">\tfor(var i=0,mp=&#123;&#125;;i&lt;domains.length;i++)&#123;</span><br><span class=\"hljs-string\">\t\tvar domain=domains[i];</span><br><span class=\"hljs-string\">\t\tif(!domain)&#123;</span><br><span class=\"hljs-string\">\t\t\tdomains.splice(i,1); i--; continue;</span><br><span class=\"hljs-string\">\t\t&#125;else if(mp[domain])</span><br><span class=\"hljs-string\">\t\t\treturn ShowState(sEl,Lang(&quot;域名&quot;+domain+&quot;重复！&quot;,&quot;Duplicate domain name &quot;+domain+&quot;!&quot;),1);</span><br><span class=\"hljs-string\">\t\tif(/[:\\\\/;]/.test(domain))//简单校验域名格式</span><br><span class=\"hljs-string\">\t\t\treturn ShowState(sEl,Lang(&quot;域名&quot;+domain+&quot;格式错误！&quot;,&quot;Format error of domain name &quot;+domain+&quot;!&quot;),1);</span><br><span class=\"hljs-string\">\t\tmp[domain]=1;</span><br><span class=\"hljs-string\">\t&#125;</span><br><span class=\"hljs-string\">\tlocalStorage[InputDomainsStoreKey]=domainsStore?domains.join(&quot;, &quot;):&quot;&quot;;</span><br><span class=\"hljs-string\">\tlocalStorage[InputEmailStoreKey]=emailStore?email:&quot;&quot;;</span><br><span class=\"hljs-string\">\t</span><br><span class=\"hljs-string\">\t//校验是否输入</span><br><span class=\"hljs-string\">\tif(!domains.length)</span><br><span class=\"hljs-string\">\t\treturn ShowState(sEl,Lang(&quot;请填写证书中要包含的域名！&quot;,&quot;Please fill in domain name to be included in the certificate!&quot;),1);</span><br><span class=\"hljs-string\">\tif(!privateKey)</span><br><span class=\"hljs-string\">\t\treturn ShowState(sEl,Lang(&quot;请选择证书的私钥！&quot;,&quot;Please select the private key of the certificate!&quot;),1);</span><br><span class=\"hljs-string\">\tif(!accountKey)</span><br><span class=\"hljs-string\">\t\treturn ShowState(sEl,Lang(&quot;请选择ACME账户的私钥！&quot;,&quot;Please select the private key of ACME account!&quot;),1);</span><br><span class=\"hljs-string\">\tif(!/.+@.+\\\\..+/.test(email) || /[\\\\s,;]/.test(email))</span><br><span class=\"hljs-string\">\t\treturn ShowState(sEl,Lang(&quot;请正确填写联系邮箱！&quot;,&quot;Please fill in the contact email correctly!&quot;),1);</span><br><span class=\"hljs-string\">\tif(ACME.StepData.needEAB &amp;&amp; !(eabKid &amp;&amp; eabKey))</span><br><span class=\"hljs-string\">\t\treturn ShowState(sEl,Lang(&quot;请填写EAB KID和HMAC KEY！&quot;,&quot;Please fill in EAB KID and HMAC KEY!&quot;),1);</span><br><span class=\"hljs-string\">\tif(ACME.StepData.termsURL &amp;&amp; !termsAgree)</span><br><span class=\"hljs-string\">\t\treturn ShowState(sEl,Lang(&quot;未同意此ACME服务的服务条款！&quot;,&quot;Do not agree to the terms of service of this acme service!&quot;),1);</span><br><span class=\"hljs-string\">\t</span><br><span class=\"hljs-string\">\t//校验私钥格式是否支持</span><br><span class=\"hljs-string\">\tvar privateKeyInfo, parsePrivateKey=function()&#123;</span><br><span class=\"hljs-string\">\t\tX509.KeyParse(privateKey,function(info)&#123;</span><br><span class=\"hljs-string\">\t\t\tprivateKeyInfo=info; parseAccountKey();</span><br><span class=\"hljs-string\">\t\t&#125;,function(err)&#123;</span><br><span class=\"hljs-string\">\t\t\tShowState(sEl,Lang(&quot;证书的私钥无效：&quot;,&quot;The private key of the certificate is invalid: &quot;)+err,1);</span><br><span class=\"hljs-string\">\t\t&#125;,1);</span><br><span class=\"hljs-string\">\t&#125;;</span><br><span class=\"hljs-string\">\tvar accountKeyInfo,parseAccountKey=function()&#123;</span><br><span class=\"hljs-string\">\t\tX509.KeyParse(accountKey,function(info)&#123;</span><br><span class=\"hljs-string\">\t\t\taccountKeyInfo=info; parseKeyOK();</span><br><span class=\"hljs-string\">\t\t&#125;,function(err)&#123;</span><br><span class=\"hljs-string\">\t\t\tShowState(sEl,Lang(&quot;ACME账户的私钥无效：&quot;,&quot;The private key of the ACME account is invalid: &quot;)+err,1);</span><br><span class=\"hljs-string\">\t\t&#125;,1);</span><br><span class=\"hljs-string\">\t&#125;;</span><br><span class=\"hljs-string\">\t</span><br><span class=\"hljs-string\">\tvar msg0=CLog(tag,0, ShowState(sEl,PleaseWaitTips(), 2));</span><br><span class=\"hljs-string\">\t//设置配置数据</span><br><span class=\"hljs-string\">\tvar parseKeyOK=function()&#123;</span><br><span class=\"hljs-string\">\t\tif(UserClickSyncKill(id,tag,msg0))return;</span><br><span class=\"hljs-string\">\t\t</span><br><span class=\"hljs-string\">\t\tACME.StepData.config=&#123;</span><br><span class=\"hljs-string\">\t\t\tdomains:domains</span><br><span class=\"hljs-string\">\t\t\t,privateKey:privateKeyInfo</span><br><span class=\"hljs-string\">\t\t\t,accountKey:accountKeyInfo</span><br><span class=\"hljs-string\">\t\t\t,email:email</span><br><span class=\"hljs-string\">\t\t\t,eabKid:eabKid</span><br><span class=\"hljs-string\">\t\t\t,eabKey:eabKey</span><br><span class=\"hljs-string\">\t\t&#125;;</span><br><span class=\"hljs-string\">\t\tCLog(tag, 0, &quot;config&quot;, ACME.StepData.config);</span><br><span class=\"hljs-string\">\t\t</span><br><span class=\"hljs-string\">\t\tacmeNewAccount();</span><br><span class=\"hljs-string\">\t&#125;;</span><br><span class=\"hljs-string\">\t</span><br><span class=\"hljs-string\">\t//ACME账户接口调用</span><br><span class=\"hljs-string\">\tvar acmeNewAccount=function()&#123;</span><br><span class=\"hljs-string\">\t\tvar msg0=CLog(tag,0, ShowState(sEl,PleaseWaitTips()+Lang(&quot;正在调用ACME服务的newAccount接口：&quot;,&quot;The newAccount interface that is calling the ACME service: &quot;)+ACME.DirData.newAccount, 2));</span><br><span class=\"hljs-string\">\t\tACME.StepAccount(function()&#123;</span><br><span class=\"hljs-string\">\t\t\tif(UserClickSyncKill(id,tag,msg0))return;</span><br><span class=\"hljs-string\">\t\t\tacmeNewOrder();</span><br><span class=\"hljs-string\">\t\t&#125;,function(err)&#123;</span><br><span class=\"hljs-string\">\t\t\tif(UserClickSyncKill(id,tag,msg0+&quot; err: &quot;+err))return;</span><br><span class=\"hljs-string\">\t\t\tCLog(tag,1, ShowState(sEl,Lang(&quot;调用ACME服务的newAccount接口：&quot;,&quot;Call the newAccount interface of the ACME service: &quot;)</span><br><span class=\"hljs-string\">\t\t\t\t+ACME.DirData.newAccount+Lang(&quot;，发生错误：&quot;+err,&quot;, An error occurred: &quot;+err), 1));</span><br><span class=\"hljs-string\">\t\t&#125;);</span><br><span class=\"hljs-string\">\t&#125;;</span><br><span class=\"hljs-string\">\t//ACME订单创建接口调用</span><br><span class=\"hljs-string\">\tvar acmeNewOrder=function()&#123;</span><br><span class=\"hljs-string\">\t\tvar msg0,onProgress=function(tips)&#123;</span><br><span class=\"hljs-string\">\t\t\tif(id!=UserClickSyncID)return;</span><br><span class=\"hljs-string\">\t\t\tmsg0=CLog(tag,0, ShowState(sEl,PleaseWaitTips()+Lang(&quot;正在调用ACME服务的订单接口。&quot;,&quot;The order interface that is calling the ACME service.&quot;)+&#x27; &#x27;+tips+&quot; URL:&quot;+ACME.DirData.newOrder, 2));</span><br><span class=\"hljs-string\">\t\t&#125;; onProgress(&quot;&quot;);</span><br><span class=\"hljs-string\">\t\tACME.StepOrder(onProgress,function()&#123;</span><br><span class=\"hljs-string\">\t\t\tif(UserClickSyncKill(id,tag,msg0))return;</span><br><span class=\"hljs-string\">\t\t\tacmeOK();</span><br><span class=\"hljs-string\">\t\t&#125;,function(err)&#123;</span><br><span class=\"hljs-string\">\t\t\tif(UserClickSyncKill(id,tag,msg0+&quot; err: &quot;+err))return;</span><br><span class=\"hljs-string\">\t\t\tCLog(tag,1, ShowState(sEl,Lang(&quot;调用ACME服务的订单接口：&quot;,&quot;Call the order interface of the ACME service: &quot;)</span><br><span class=\"hljs-string\">\t\t\t\t+ACME.DirData.newOrder+Lang(&quot;，发生错误：&quot;+err,&quot;, An error occurred: &quot;+err), 1));</span><br><span class=\"hljs-string\">\t\t&#125;);</span><br><span class=\"hljs-string\">\t&#125;;</span><br><span class=\"hljs-string\">\t//ACME接口调用完成，显示下一步</span><br><span class=\"hljs-string\">\tvar acmeOK=function()&#123;</span><br><span class=\"hljs-string\">\t\tverifyStepShow();</span><br><span class=\"hljs-string\">\t\t</span><br><span class=\"hljs-string\">\t\tCLog(tag,0, ShowState(sEl,Lang(</span><br><span class=\"hljs-string\">\t\t\t &quot;配置完成，&quot;</span><br><span class=\"hljs-string\">\t\t\t,&quot;Configuration is complete, &quot;)</span><br><span class=\"hljs-string\">\t\t\t+NextStepTips(), 2), ACME.StepData);</span><br><span class=\"hljs-string\">\t&#125;;</span><br><span class=\"hljs-string\">\t</span><br><span class=\"hljs-string\">\tparsePrivateKey();</span><br><span class=\"hljs-string\">&#125;;</span><br><span class=\"hljs-string\"></span><br><span class=\"hljs-string\"></span><br><span class=\"hljs-string\"></span><br><span class=\"hljs-string\"></span><br><span class=\"hljs-string\"></span><br><span class=\"hljs-string\"></span><br><span class=\"hljs-string\">/************** UI Step3: Verify Domain Ownership **************/</span><br><span class=\"hljs-string\">//显示第三步界面</span><br><span class=\"hljs-string\">var verifyStepShow=function()&#123;</span><br><span class=\"hljs-string\">\t$(&quot;.step3Hide&quot;).hide();</span><br><span class=\"hljs-string\">\t$(&quot;.step3Show&quot;).show();</span><br><span class=\"hljs-string\">\t$(&quot;.verifyStepBtn&quot;).show();</span><br><span class=\"hljs-string\">\t$(&quot;.verifyRunStopBtn&quot;).hide();</span><br><span class=\"hljs-string\">\t$(&quot;.finalizeOrderBtn&quot;).hide();</span><br><span class=\"hljs-string\">\tShowState(&quot;.verifyStepState&quot;,false);</span><br><span class=\"hljs-string\">\t</span><br><span class=\"hljs-string\">\t//显示所有域名的验证界面</span><br><span class=\"hljs-string\">\tverifyBoxShow();</span><br><span class=\"hljs-string\">&#125;;</span><br><span class=\"hljs-string\">//停止验证</span><br><span class=\"hljs-string\">window.verifyRunStopClick=function()&#123;</span><br><span class=\"hljs-string\">\tvar id=++UserClickSyncID;</span><br><span class=\"hljs-string\">\t$(&quot;.verifyStepBtn&quot;).show();</span><br><span class=\"hljs-string\">\t$(&quot;.verifyRunStopBtn&quot;).hide();</span><br><span class=\"hljs-string\">\t$(&quot;.finalizeOrderBtn&quot;).hide();</span><br><span class=\"hljs-string\">\tShowState(&quot;.verifyStepState&quot;,false);</span><br><span class=\"hljs-string\">\tverifyRunStopFn&amp;&amp;verifyRunStopFn();</span><br><span class=\"hljs-string\">&#125;;</span><br><span class=\"hljs-string\">var verifyRunStopFn;</span><br><span class=\"hljs-string\">//点击开始验证按钮，验证所有域名所有权</span><br><span class=\"hljs-string\">window.verifyStepClick=function()&#123;</span><br><span class=\"hljs-string\">\tvar id=++UserClickSyncID;</span><br><span class=\"hljs-string\">\tvar tag=&quot;Step-3&quot;,sEl=&quot;.verifyStepState&quot;;</span><br><span class=\"hljs-string\">\t</span><br><span class=\"hljs-string\">\t$(&quot;.step3Hide&quot;).hide();</span><br><span class=\"hljs-string\">\t$(&quot;.step3Show&quot;).show();</span><br><span class=\"hljs-string\">\t$(&quot;.verifyStepBtn&quot;).hide();</span><br><span class=\"hljs-string\">\t$(&quot;.verifyRunStopBtn&quot;).show();</span><br><span class=\"hljs-string\">\t$(&quot;.finalizeOrderBtn&quot;).hide();</span><br><span class=\"hljs-string\">\tShowState(sEl,false);</span><br><span class=\"hljs-string\">\t</span><br><span class=\"hljs-string\">\tvar domains=ACME.StepData.config.domains,auths=ACME.StepData.auths;</span><br><span class=\"hljs-string\">\t//验证中更新状态显示</span><br><span class=\"hljs-string\">\tvar updateState=function(init,stopNow,isFail)&#123;</span><br><span class=\"hljs-string\">\t\tvar isStop=stopNow||id!=UserClickSyncID;</span><br><span class=\"hljs-string\">\t\tvar okCount=0,errCount=0,execCount=0;</span><br><span class=\"hljs-string\">\t\tfor(var i0=0;i0&lt;domains.length;i0++)&#123;</span><br><span class=\"hljs-string\">\t\t\tvar domain=domains[i0],auth=auths[domain],challs=auth.challenges;</span><br><span class=\"hljs-string\">\t\t\tvar stateEl=$(&quot;.verifyItemState_&quot;+i0);</span><br><span class=\"hljs-string\">\t\t\t//authState: 0 待验证，1验证中，2等待重试authTryCount，11验证成功，12验证失败authError</span><br><span class=\"hljs-string\">\t\t\tif(auth.authState==11)&#123;//验证成功的，初始化也不要修改验证方式了</span><br><span class=\"hljs-string\">\t\t\t\tShowState(stateEl,ACME.ChallName(challs[auth.challIdx])+&quot; OK!&quot;,2,&quot;&quot;);</span><br><span class=\"hljs-string\">\t\t\t\tokCount++;</span><br><span class=\"hljs-string\">\t\t\t\tcontinue;</span><br><span class=\"hljs-string\">\t\t\t&#125;</span><br><span class=\"hljs-string\">\t\t\tif(init)&#123; //记住选中的验证类型</span><br><span class=\"hljs-string\">\t\t\t\tvar choiceEl=$(&quot;input[name=choice_authItem_&quot;+i0+&quot;]&quot;);</span><br><span class=\"hljs-string\">\t\t\t\tfor(var i=0;i&lt;choiceEl.length;i++)&#123;</span><br><span class=\"hljs-string\">\t\t\t\t\tvar el=choiceEl[i];</span><br><span class=\"hljs-string\">\t\t\t\t\tif(!el.checked)&#123; //未选中的隐藏掉</span><br><span class=\"hljs-string\">\t\t\t\t\t\t$(el.parentNode).hide();</span><br><span class=\"hljs-string\">\t\t\t\t\t&#125;else&#123;</span><br><span class=\"hljs-string\">\t\t\t\t\t\tauth.challIdx=+$(el).attr(&quot;challidx&quot;);</span><br><span class=\"hljs-string\">\t\t\t\t\t&#125;</span><br><span class=\"hljs-string\">\t\t\t\t&#125;</span><br><span class=\"hljs-string\">\t\t\t\tauth.authState=0;</span><br><span class=\"hljs-string\">\t\t\t\tauth.authTryCount=0;</span><br><span class=\"hljs-string\">\t\t\t\tauth.authError=&quot;&quot;;</span><br><span class=\"hljs-string\">\t\t\t\tauth.authTimer=0;</span><br><span class=\"hljs-string\">\t\t\t&#125;</span><br><span class=\"hljs-string\">\t\t\tvar challName=ACME.ChallName(challs[auth.challIdx]);</span><br><span class=\"hljs-string\">\t\t\tif(auth.authState==12)&#123;//验证失败</span><br><span class=\"hljs-string\">\t\t\t\tShowState(stateEl,challName+Lang(&quot;，验证失败：&quot;,&quot;, Verify failed: &quot;)</span><br><span class=\"hljs-string\">\t\t\t\t\t+auth.authError,1,&quot;&quot;);</span><br><span class=\"hljs-string\">\t\t\t\terrCount++;</span><br><span class=\"hljs-string\">\t\t\t\tcontinue;</span><br><span class=\"hljs-string\">\t\t\t&#125;</span><br><span class=\"hljs-string\">\t\t\texecCount++;</span><br><span class=\"hljs-string\">\t\t\tif(isStop)&#123;</span><br><span class=\"hljs-string\">\t\t\t\tShowState(stateEl,false);</span><br><span class=\"hljs-string\">\t\t\t\tclearTimeout(auth.authTimer); auth.authTimer=0;</span><br><span class=\"hljs-string\">\t\t\t&#125;else if(auth.authState==2)</span><br><span class=\"hljs-string\">\t\t\t\tShowState(stateEl,Lang(&quot;等待重试中...&quot;,&quot;Waiting for retry...&quot;)</span><br><span class=\"hljs-string\">\t\t\t\t\t+&quot; &quot;+auth.authTryCount+&quot; &quot;+auth.authError,3,&quot;&quot;);</span><br><span class=\"hljs-string\">\t\t\telse if(auth.authState==1)</span><br><span class=\"hljs-string\">\t\t\t\tShowState(stateEl,Lang(&quot;验证中...&quot;,&quot;Verify in progress...&quot;),0,&quot;&quot;);</span><br><span class=\"hljs-string\">\t\t\telse ShowState(stateEl,Lang(&quot;等待验证...&quot;,&quot;Waiting for verify...&quot;),0,&quot;&quot;);</span><br><span class=\"hljs-string\">\t\t&#125;</span><br><span class=\"hljs-string\">\t\tif(!isStop || stopNow)&#123;</span><br><span class=\"hljs-string\">\t\t\tvar goto2=Lang(&quot;请返回第二步重新开始操作！&quot;,&quot;Please go back to step 2 and start over! &quot;);</span><br><span class=\"hljs-string\">\t\t\tvar msg=ShowState(sEl,(isFail?Lang(&quot;验证失败，&quot;,&quot;Verify failed, &quot;)+goto2:</span><br><span class=\"hljs-string\">\t\t\t\t\tisStop?Lang(&quot;已取消，&quot;,&quot;Canceled, &quot;)+goto2:</span><br><span class=\"hljs-string\">\t\t\t\t\tLang(&quot;正在验证，请耐心等待... &quot;,&quot;Verifying, please wait... &quot;))</span><br><span class=\"hljs-string\">\t\t\t\t+&quot;&lt;div&gt;&quot;</span><br><span class=\"hljs-string\">\t\t\t\t\t+Lang(&quot;验证通过：&quot;,&quot;Verify pass: &quot;)+okCount+&quot;, &quot;</span><br><span class=\"hljs-string\">\t\t\t\t\t+Lang(&quot;未通过：&quot;,&quot;Failed: &quot;)+errCount+&quot;, &quot;</span><br><span class=\"hljs-string\">\t\t\t\t\t+Lang(&quot;验证中：&quot;,&quot;Verify in progress: &quot;)+execCount</span><br><span class=\"hljs-string\">\t\t\t\t+&quot;&lt;/div&gt;&quot;</span><br><span class=\"hljs-string\">\t\t\t\t, isStop?1:0);</span><br><span class=\"hljs-string\">\t\t\tif(isStop)&#123;</span><br><span class=\"hljs-string\">\t\t\t\tCLog(tag, 1, msg);</span><br><span class=\"hljs-string\">\t\t\t&#125;</span><br><span class=\"hljs-string\">\t\t&#125;</span><br><span class=\"hljs-string\">\t&#125;</span><br><span class=\"hljs-string\">\tupdateState(1);</span><br><span class=\"hljs-string\">\t//取一个进行验证</span><br><span class=\"hljs-string\">\tvar run=function()&#123;</span><br><span class=\"hljs-string\">\t\tif(id!=UserClickSyncID)return;</span><br><span class=\"hljs-string\">\t\tupdateState();</span><br><span class=\"hljs-string\">\t\tvar authItem,hasRunning=0,okCount=0,errCount=0;</span><br><span class=\"hljs-string\">\t\tfor(var i0=0;i0&lt;domains.length;i0++)&#123;</span><br><span class=\"hljs-string\">\t\t\tvar domain=domains[i0],auth=auths[domain];</span><br><span class=\"hljs-string\">\t\t\tif(!authItem &amp;&amp; !auth.authState) authItem=auth;</span><br><span class=\"hljs-string\">\t\t\tif(auth.authState==1)hasRunning++;</span><br><span class=\"hljs-string\">\t\t\tif(auth.authState==11)okCount++;</span><br><span class=\"hljs-string\">\t\t\tif(auth.authState==12)errCount++;</span><br><span class=\"hljs-string\">\t\t&#125;</span><br><span class=\"hljs-string\">\t\tif(okCount==domains.length)//全部验证成功</span><br><span class=\"hljs-string\">\t\t\treturn verifyOK();</span><br><span class=\"hljs-string\">\t\tif(okCount+errCount==domains.length)//全部验证完成，存在不通过的</span><br><span class=\"hljs-string\">\t\t\treturn verifyFail();</span><br><span class=\"hljs-string\">\t\tif(!authItem || hasRunning)return;//没有待验证的或已有验证中，继续等待</span><br><span class=\"hljs-string\">\t\t</span><br><span class=\"hljs-string\">\t\tauthItem.authState=1;</span><br><span class=\"hljs-string\">\t\tauthItem.authTryCount++;</span><br><span class=\"hljs-string\">\t\tauthItem.authError=&quot;&quot;;</span><br><span class=\"hljs-string\">\t\tupdateState();</span><br><span class=\"hljs-string\">\t\tACME.StepVerifyAuthItem(authItem, authItem.challIdx, function(isOk, retryTime, err)&#123;</span><br><span class=\"hljs-string\">\t\t\tif(id!=UserClickSyncID)return;</span><br><span class=\"hljs-string\">\t\t\tif(isOk)&#123;</span><br><span class=\"hljs-string\">\t\t\t\tauthItem.authState=11;</span><br><span class=\"hljs-string\">\t\t\t&#125;else&#123;</span><br><span class=\"hljs-string\">\t\t\t\tauthItem.authState=2;</span><br><span class=\"hljs-string\">\t\t\t\tauthItem.authError=err;</span><br><span class=\"hljs-string\">\t\t\t\tauthItem.authTimer=setTimeout(function()&#123;</span><br><span class=\"hljs-string\">\t\t\t\t\tauthItem.authState=0;</span><br><span class=\"hljs-string\">\t\t\t\t\tauthItem.authTimer=0;</span><br><span class=\"hljs-string\">\t\t\t\t\trun();</span><br><span class=\"hljs-string\">\t\t\t\t&#125;, retryTime);</span><br><span class=\"hljs-string\">\t\t\t&#125;</span><br><span class=\"hljs-string\">\t\t\trun();</span><br><span class=\"hljs-string\">\t\t&#125;, function(err)&#123;</span><br><span class=\"hljs-string\">\t\t\tif(id!=UserClickSyncID)return;</span><br><span class=\"hljs-string\">\t\t\tauthItem.authState=12;</span><br><span class=\"hljs-string\">\t\t\tauthItem.authError=err;</span><br><span class=\"hljs-string\">\t\t\trun();</span><br><span class=\"hljs-string\">\t\t&#125;);</span><br><span class=\"hljs-string\">\t&#125;;</span><br><span class=\"hljs-string\">\t</span><br><span class=\"hljs-string\">\tCLog(tag,0,&quot;==========Verify Start==========&quot;);</span><br><span class=\"hljs-string\">\tvar verifyEnd=function()&#123;</span><br><span class=\"hljs-string\">\t\t$(&quot;.verifyRunStopBtn&quot;).hide();</span><br><span class=\"hljs-string\">\t\tverifyRunStopFn=null;</span><br><span class=\"hljs-string\">\t\tCLog(tag,0,&quot;==========Verify End==========&quot;);</span><br><span class=\"hljs-string\">\t&#125;;</span><br><span class=\"hljs-string\">\t//中途停止控制</span><br><span class=\"hljs-string\">\tverifyRunStopFn=function()&#123;</span><br><span class=\"hljs-string\">\t\tverifyEnd();</span><br><span class=\"hljs-string\">\t\tupdateState(0,1);</span><br><span class=\"hljs-string\">\t&#125;;</span><br><span class=\"hljs-string\">\t//验证完成，存在不通过的</span><br><span class=\"hljs-string\">\tvar verifyFail=function()&#123;</span><br><span class=\"hljs-string\">\t\tCLog(tag,1,&quot;Verify Fail!&quot;);</span><br><span class=\"hljs-string\">\t\tupdateState(0,1,1);</span><br><span class=\"hljs-string\">\t\tverifyEnd();</span><br><span class=\"hljs-string\">\t&#125;;</span><br><span class=\"hljs-string\">\t//全部验证成功</span><br><span class=\"hljs-string\">\tvar verifyOK=function()&#123;</span><br><span class=\"hljs-string\">\t\tCLog(tag,0,&quot;Verify OK!&quot;);</span><br><span class=\"hljs-string\">\t\tverifyEnd();</span><br><span class=\"hljs-string\">\t\t</span><br><span class=\"hljs-string\">\t\tfinalizeOrderClick();</span><br><span class=\"hljs-string\">\t&#125;;</span><br><span class=\"hljs-string\">\t</span><br><span class=\"hljs-string\">\t//调用完成订单接口，生成证书</span><br><span class=\"hljs-string\">\twindow.finalizeOrderClick=function()&#123;</span><br><span class=\"hljs-string\">\t\t$(&quot;.finalizeOrderBtn&quot;).hide();</span><br><span class=\"hljs-string\">\t\tvar msg0,onProgress=function(tips)&#123;</span><br><span class=\"hljs-string\">\t\t\tif(id!=UserClickSyncID)return;</span><br><span class=\"hljs-string\">\t\t\tmsg0=CLog(tag,0, ShowState(sEl,PleaseWaitTips()</span><br><span class=\"hljs-string\">\t\t\t+Lang(&quot;验证已通过，正在签发证书。&quot;,&quot;Verify passed, issuing certificate.&quot;)</span><br><span class=\"hljs-string\">\t\t\t+&#x27; &#x27;+tips, 2));</span><br><span class=\"hljs-string\">\t\t&#125;; onProgress(&quot;&quot;);</span><br><span class=\"hljs-string\">\t\tACME.StepFinalizeOrder(onProgress,function()&#123;</span><br><span class=\"hljs-string\">\t\t\tif(UserClickSyncKill(id,tag,msg0))return;</span><br><span class=\"hljs-string\">\t\t\t//显示下一步</span><br><span class=\"hljs-string\">\t\t\tdownloadStepShow();</span><br><span class=\"hljs-string\">\t\t\t</span><br><span class=\"hljs-string\">\t\t\tCLog(tag,0, ShowState(sEl,Lang(</span><br><span class=\"hljs-string\">\t\t\t\t &quot;验证已通过，证书已签发，&quot;</span><br><span class=\"hljs-string\">\t\t\t\t,&quot;Verification passed, The certificate has been issued, &quot;)</span><br><span class=\"hljs-string\">\t\t\t\t+NextStepTips(), 2), ACME.StepData);</span><br><span class=\"hljs-string\">\t\t&#125;,function(err)&#123;</span><br><span class=\"hljs-string\">\t\t\tif(UserClickSyncKill(id,tag,msg0+&quot; err: &quot;+err))return;</span><br><span class=\"hljs-string\">\t\t\t$(&quot;.finalizeOrderBtn&quot;).show();</span><br><span class=\"hljs-string\">\t\t\tCLog(tag,1, ShowState(sEl,Lang(&quot;签发证书发生错误，&quot;,&quot;Error issuing certificate, &quot;)+TryAgainTips()</span><br><span class=\"hljs-string\">\t\t\t\t+Lang(&quot;如果多次重试都无法签发证书，可能需要返回第二步重新开始操作。&quot;,&quot;If the certificate cannot be issued after multiple retries, you may need to return to step 2 to restart the operation.&quot;)</span><br><span class=\"hljs-string\">\t\t\t\t+&quot; Error: &quot;+err, 1));</span><br><span class=\"hljs-string\">\t\t&#125;);</span><br><span class=\"hljs-string\">\t&#125;;</span><br><span class=\"hljs-string\">\t</span><br><span class=\"hljs-string\">\trun();</span><br><span class=\"hljs-string\">&#125;;</span><br><span class=\"hljs-string\"></span><br><span class=\"hljs-string\"></span><br><span class=\"hljs-string\"></span><br><span class=\"hljs-string\"></span><br><span class=\"hljs-string\"></span><br><span class=\"hljs-string\"></span><br><span class=\"hljs-string\"></span><br><span class=\"hljs-string\">/************** UI Step4: Download and save the certificate PEM file **************/</span><br><span class=\"hljs-string\">//显示第四步界面</span><br><span class=\"hljs-string\">var downloadStepShow=function()&#123;</span><br><span class=\"hljs-string\">\t$(&quot;.step4Hide&quot;).hide();</span><br><span class=\"hljs-string\">\t$(&quot;.step4Show&quot;).show();</span><br><span class=\"hljs-string\">\tShowState(&quot;.downloadStepState&quot;,false);</span><br><span class=\"hljs-string\">\t</span><br><span class=\"hljs-string\">\tvar config=ACME.StepData.config;</span><br><span class=\"hljs-string\">\tvar hasPEM=ACME.StepData.order.downloadPEM;</span><br><span class=\"hljs-string\">\tvar pemTxt=hasPEM||Lang(&quot;未发现证书，请到第二步重新操作！&quot;,&quot;No certificate found, please go to the step 2 to operate again!&quot;,true);</span><br><span class=\"hljs-string\">\t</span><br><span class=\"hljs-string\">\t$(&quot;.txt_downloadCert&quot;).val(pemTxt);</span><br><span class=\"hljs-string\">\t$(&quot;.txt_downloadKey&quot;).val(config.privateKey.pem);</span><br><span class=\"hljs-string\">\t</span><br><span class=\"hljs-string\">\tdownFileName=config.domains[0].replace(/^\\\\*\\\\./g,&quot;&quot;).replace(/[^\\\\w]/g,&quot;_&quot;);</span><br><span class=\"hljs-string\">\tdownloadFileNameShow(downFileName);</span><br><span class=\"hljs-string\">\t</span><br><span class=\"hljs-string\">\tvar logTxts=[];</span><br><span class=\"hljs-string\">\tvar SP=function(tag)&#123;</span><br><span class=\"hljs-string\">\t\tlogTxts.push(&quot;\\\\n=========== &quot;+tag+&quot; ===========&quot;);</span><br><span class=\"hljs-string\">\t\treturn logTxts</span><br><span class=\"hljs-string\">\t&#125;</span><br><span class=\"hljs-string\">\tvar logSet=Object.assign(&#123;</span><br><span class=\"hljs-string\">\t\tacmeURL:ACME.URL</span><br><span class=\"hljs-string\">\t\t,accountURL:ACME.StepData.account.url</span><br><span class=\"hljs-string\">\t\t,X509:&#123;</span><br><span class=\"hljs-string\">\t\t\tDefaultType2_RSA:X509.DefaultType2_RSA</span><br><span class=\"hljs-string\">\t\t\t,DefaultType2_ECC:X509.DefaultType2_ECC</span><br><span class=\"hljs-string\">\t\t&#125;</span><br><span class=\"hljs-string\">\t\t,Window:&#123;</span><br><span class=\"hljs-string\">\t\t\tDefaultDownloadFileNames:DefaultDownloadFileNames</span><br><span class=\"hljs-string\">\t\t&#125;</span><br><span class=\"hljs-string\">\t&#125;,config);</span><br><span class=\"hljs-string\">\tlogSet.privateKey=config.privateKey.pem;</span><br><span class=\"hljs-string\">\tlogSet.accountKey=config.accountKey.pem;</span><br><span class=\"hljs-string\">\t</span><br><span class=\"hljs-string\">\tvar logTitle=&#x27;/********** &#x27;+Lang($(&quot;.clientNameCN&quot;).html(),$(&quot;.clientNameEN&quot;).html(),true)+&#x27; *********/&#x27;;</span><br><span class=\"hljs-string\">\tlogTxts.push(logTitle);</span><br><span class=\"hljs-string\">\tlogTxts.push(Lang(&quot;在线网址（GitHub）：&quot;,&quot;Online website (GitHub): &quot;, true)+&#x27;https://xiangyuecn.github.io/ACME-HTML-Web-Browser-Client/ACME-HTML-Web-Browser-Client.html&#x27;);</span><br><span class=\"hljs-string\">\tlogTxts.push(Lang(&quot;在线网址（Gitee）：&quot;,&quot;Online website (Gitee): &quot;, true)+&#x27;https://xiangyuecn.gitee.io/acme-html-web-browser-client/ACME-HTML-Web-Browser-Client.html&#x27;);</span><br><span class=\"hljs-string\">\tlogTxts.push(&quot;&quot;);</span><br><span class=\"hljs-string\">\tlogTxts.push(&#x27;GitHub: https://github.com/xiangyuecn/ACME-HTML-Web-Browser-Client&#x27;);</span><br><span class=\"hljs-string\">\tlogTxts.push(&#x27;Gitee: https://gitee.com/xiangyuecn/ACME-HTML-Web-Browser-Client&#x27;);</span><br><span class=\"hljs-string\">\tlogTxts.push(&quot;&quot;);</span><br><span class=\"hljs-string\">\tlogTxts.push(Lang(&quot;提示：你可以将本文件拖拽进客户端网页内，将自动填充本次证书申请的所有配置参数。&quot;,&quot;Tip: You can drag and drop this file into the client web page, and all configuration parameters of this certificate application will be filled automatically.&quot;,true));</span><br><span class=\"hljs-string\">\tlogTxts.push(&quot;&quot;);</span><br><span class=\"hljs-string\">\tSP(Lang(&quot;证书申请时间&quot;,&quot;Certificate Application Time&quot;,true))</span><br><span class=\"hljs-string\">\t\t.push(new Date().toLocaleString());</span><br><span class=\"hljs-string\">\tSP(Lang(&quot;域名列表&quot;,&quot;Domain Name List&quot;,true))</span><br><span class=\"hljs-string\">\t\t.push(config.domains.join(&quot;, &quot;));</span><br><span class=\"hljs-string\">\tSP(Lang(&quot;ACME服务地址&quot;,&quot;ACME Service URL&quot;,true))</span><br><span class=\"hljs-string\">\t\t.push(ACME.URL);</span><br><span class=\"hljs-string\">\tSP(Lang(&quot;CSR文本&quot;,&quot;CSR Text&quot;,true))</span><br><span class=\"hljs-string\">\t\t.push(ACME.StepData.order.orderCSR);</span><br><span class=\"hljs-string\">\tSP(Lang(&quot;证书PEM文本&quot;,&quot;Certificate PEM Text&quot;,true))</span><br><span class=\"hljs-string\">\t\t.push(pemTxt);</span><br><span class=\"hljs-string\">\tSP(Lang(&quot;证书私钥PEM文本&quot;,&quot;Certificate Private Key PEM Text&quot;,true))</span><br><span class=\"hljs-string\">\t\t.push(config.privateKey.pem);</span><br><span class=\"hljs-string\">\tSP(Lang(&quot;账户私钥PEM文本&quot;,&quot;Account Private Key PEM Text&quot;,true))</span><br><span class=\"hljs-string\">\t\t.push(config.accountKey.pem);</span><br><span class=\"hljs-string\">\tSP(Lang(&quot;账户URL&quot;,&quot;Account URL&quot;,true))</span><br><span class=\"hljs-string\">\t\t.push(ACME.StepData.account.url);</span><br><span class=\"hljs-string\">\tSP(Lang(&quot;完整配置信息&quot;,&quot;Complete Configuration Information&quot;,true))</span><br><span class=\"hljs-string\">\t\t.push(&quot;&lt;ACME-HTML-Web-Browser-Client&gt;&quot;+JSON.stringify(logSet)+&quot;&lt;/ACME-HTML-Web-Browser-Client&gt;&quot;);</span><br><span class=\"hljs-string\">\tlogTxts.push(&quot;&quot;);logTxts.push(logTitle);logTxts.push(&quot;&quot;);</span><br><span class=\"hljs-string\">\t</span><br><span class=\"hljs-string\">\t$(&quot;.txt_downloadLog&quot;).val(hasPEM?logTxts.join(&quot;\\\\n&quot;):pemTxt);</span><br><span class=\"hljs-string\">&#125;;</span><br><span class=\"hljs-string\">var initStep4=function()&#123;//页面启动时初始化，绑定配置文件拖拽事件</span><br><span class=\"hljs-string\">\t$(&quot;body&quot;).bind(&quot;dragover&quot;,function(e)&#123;</span><br><span class=\"hljs-string\">\t\te.preventDefault();</span><br><span class=\"hljs-string\">\t&#125;).bind(&quot;drop&quot;,function(e)&#123;</span><br><span class=\"hljs-string\">\t\te.preventDefault();</span><br><span class=\"hljs-string\">\t\t</span><br><span class=\"hljs-string\">\t\tvar file=e.dataTransfer.files[0];</span><br><span class=\"hljs-string\">\t\tif(!file)return;</span><br><span class=\"hljs-string\">\t\tvar reader = new FileReader();</span><br><span class=\"hljs-string\">\t\treader.onload = function(e)&#123;</span><br><span class=\"hljs-string\">\t\t\tvar txt=reader.result;</span><br><span class=\"hljs-string\">\t\t\tvar m=/ACME-HTML-Web-Browser-Client&gt;(.+?)&lt;\\\\/ACME-HTML-Web-Browser-Client/.exec(txt);</span><br><span class=\"hljs-string\">\t\t\tif(!m) return Toast(Lang(&quot;拖入的文件中未发现配置信息，请拖上次申请证书时保存的记录LOG文件！&quot;,&quot;No configuration information is found in the dragged file. Please drag the LOG file saved in the last certificate application!&quot;),1);</span><br><span class=\"hljs-string\">\t\t\t</span><br><span class=\"hljs-string\">\t\t\tDropConfigFile=JSON.parse(m[1]);</span><br><span class=\"hljs-string\">\t\t\tfor(var k in DropConfigFile.X509)X509[k]=DropConfigFile.X509[k];</span><br><span class=\"hljs-string\">\t\t\tfor(var k in DropConfigFile.Window)window[k]=DropConfigFile.Window[k];</span><br><span class=\"hljs-string\">\t\t\t</span><br><span class=\"hljs-string\">\t\t\tCLog(&quot;DropConfigFile&quot;,0,&quot;Reset Config&quot;,DropConfigFile);</span><br><span class=\"hljs-string\">\t\t\tToast(Lang(&quot;识别到拖入的记录LOG文件，已填充上次申请证书时使用的配置。&quot;,&quot;The LOG file of the dragged record is identified, and the configuration used in the last certificate application has been filled.&quot;),2);</span><br><span class=\"hljs-string\">\t\t\tresetStep1();//重新初始化第1步</span><br><span class=\"hljs-string\">\t\t\tdownloadFileNameShow();</span><br><span class=\"hljs-string\">\t\t&#125;</span><br><span class=\"hljs-string\">\t\treader.readAsText(file);</span><br><span class=\"hljs-string\">\t&#125;);</span><br><span class=\"hljs-string\">&#125;;</span><br><span class=\"hljs-string\">var downFileName=&quot;&quot;;</span><br><span class=\"hljs-string\">window.DefaultDownloadFileNames=&#123; //允许设置默认的文件名，下载时自动使用此文件名</span><br><span class=\"hljs-string\">\tCert:&quot;&quot; /*domain.crt*/, Key:&quot;&quot; /*domain.key*/, Log:&quot;&quot; /*domain.log*/</span><br><span class=\"hljs-string\">&#125;;</span><br><span class=\"hljs-string\">window.downloadBtnClick=function(type)&#123;</span><br><span class=\"hljs-string\">\tvar val=$(&quot;.txt_download&quot;+type).val();</span><br><span class=\"hljs-string\">\tvar fileName=downFileName;</span><br><span class=\"hljs-string\">\tif(type==&quot;Cert&quot;) fileName+=&quot;.pem&quot;;</span><br><span class=\"hljs-string\">\tif(type==&quot;Key&quot;) fileName+=&quot;.key&quot;;</span><br><span class=\"hljs-string\">\tif(type==&quot;Log&quot;) fileName+=&quot;.log&quot;;</span><br><span class=\"hljs-string\">\tfileName=DefaultDownloadFileNames[type]||fileName;</span><br><span class=\"hljs-string\">\t</span><br><span class=\"hljs-string\">\tvar url=URL.createObjectURL(new Blob([val], &#123;&quot;type&quot;:&quot;text/plain&quot;&#125;));</span><br><span class=\"hljs-string\">\tvar downA=document.createElement(&quot;A&quot;);</span><br><span class=\"hljs-string\">\tdownA.href=url;</span><br><span class=\"hljs-string\">\tdownA.download=fileName;</span><br><span class=\"hljs-string\">\tdownA.click();</span><br><span class=\"hljs-string\">&#125;;</span><br><span class=\"hljs-string\">window.downloadFileNameShow=function(name)&#123;//显示下载文件名称，优先使用手动设置的默认名称</span><br><span class=\"hljs-string\">\tname=name||&quot;your_domain&quot;;</span><br><span class=\"hljs-string\">\tvar name2=(DefaultDownloadFileNames.Cert||&quot;&quot;).replace(/\\\\.[^\\\\.]+$/g,&quot;&quot;);</span><br><span class=\"hljs-string\">\t$(&quot;.downloadFileName&quot;).html(name2||name);</span><br><span class=\"hljs-string\">\t$(&quot;.downloadKeyFileName&quot;).html(DefaultDownloadFileNames.Key||name+&quot;.key&quot;);</span><br><span class=\"hljs-string\">\t$(&quot;.downloadCertFileName&quot;).html(DefaultDownloadFileNames.Cert||name+&quot;.pem&quot;);</span><br><span class=\"hljs-string\">&#125;;</span><br><span class=\"hljs-string\"></span><br><span class=\"hljs-string\"></span><br><span class=\"hljs-string\"></span><br><span class=\"hljs-string\"></span><br><span class=\"hljs-string\"></span><br><span class=\"hljs-string\"></span><br><span class=\"hljs-string\"></span><br><span class=\"hljs-string\"></span><br><span class=\"hljs-string\"></span><br><span class=\"hljs-string\"></span><br><span class=\"hljs-string\"></span><br><span class=\"hljs-string\"></span><br><span class=\"hljs-string\"></span><br><span class=\"hljs-string\">//Test_打头的方法仅供测试用：完成第二步后允许进行UI调试，手动调用Test_AllStepData_Save()，刷新页面可恢复界面</span><br><span class=\"hljs-string\">window.Test_AllStepData_Save=function()&#123;</span><br><span class=\"hljs-string\">\tif(!ACME.StepData.order) throw new Error(Lang(&quot;未完成第二步操作&quot;,&quot;The step 2 is not completed&quot;,true));</span><br><span class=\"hljs-string\">\t</span><br><span class=\"hljs-string\">\tvar config=ACME.StepData.config;</span><br><span class=\"hljs-string\">\tdelete ACME.PrevNonce;</span><br><span class=\"hljs-string\">\tconfig.privateKey=config.privateKey.pem;</span><br><span class=\"hljs-string\">\tconfig.accountKey=config.accountKey.pem;</span><br><span class=\"hljs-string\">\t</span><br><span class=\"hljs-string\">\tlocalStorage[Test_AllStepData_StoreKey]=JSON.stringify(ACME);</span><br><span class=\"hljs-string\">\tACME=null;</span><br><span class=\"hljs-string\">\tconsole.warn(Lang(&quot;仅供测试：已保存测试数据，需刷新页面&quot;,&quot;For testing only: the test data has been saved, and the page needs to be refreshed&quot;,true));</span><br><span class=\"hljs-string\">&#125;;</span><br><span class=\"hljs-string\">var Test_AllStepData_StoreKey=&quot;ACME_HTML_Test_AllStepData&quot;;</span><br><span class=\"hljs-string\">var initTest_Restore=function()&#123;</span><br><span class=\"hljs-string\">\tif(localStorage[Test_AllStepData_StoreKey])&#123;</span><br><span class=\"hljs-string\">\t\tconsole.warn(Lang(&quot;仅供测试：已保存测试数据，调用Test_Restore_StepXXX()进行恢复步骤界面&quot;,&quot;For testing only: test data has been saved, call Test_Restore_StepXXX() to restore the step interface&quot;,true));</span><br><span class=\"hljs-string\">\t&#125;</span><br><span class=\"hljs-string\">&#125;</span><br><span class=\"hljs-string\">var Test_AllStepData_Restore=function(next)&#123;</span><br><span class=\"hljs-string\">\tvar data=JSON.parse(localStorage[Test_AllStepData_StoreKey]||&quot;&#123;&#125;&quot;);</span><br><span class=\"hljs-string\">\tif(!data.StepData) throw new Error(Lang(&quot;未保存数据&quot;,&quot;No data saved&quot;,true));</span><br><span class=\"hljs-string\">\tfor(var k in data) ACME[k]=data[k];</span><br><span class=\"hljs-string\">\t</span><br><span class=\"hljs-string\">\tvar config=ACME.StepData.config;</span><br><span class=\"hljs-string\">\tX509.KeyParse(config.privateKey,function(info)&#123;</span><br><span class=\"hljs-string\">\t\tconfig.privateKey=info;</span><br><span class=\"hljs-string\">\t\tX509.KeyParse(config.accountKey,function(info)&#123;</span><br><span class=\"hljs-string\">\t\t\tconfig.accountKey=info;</span><br><span class=\"hljs-string\">\t\t\tconsole.log(&quot;ACME.StepData&quot;, ACME.StepData);</span><br><span class=\"hljs-string\">\t\t\tsetTimeout(function()&#123;next()&#125;);</span><br><span class=\"hljs-string\">\t\t&#125;);</span><br><span class=\"hljs-string\">\t&#125;);</span><br><span class=\"hljs-string\">&#125;;</span><br><span class=\"hljs-string\">window.Test_Restore_StepAuth=function()&#123;</span><br><span class=\"hljs-string\">\tTest_AllStepData_Restore(function()&#123;</span><br><span class=\"hljs-string\">\t\tconsole.warn(Lang(&quot;仅供测试：已手动恢复步骤三界面&quot;,&quot;For testing only: Step 3 interface has been manually restored&quot;,true));</span><br><span class=\"hljs-string\">\t\tverifyStepShow();</span><br><span class=\"hljs-string\">\t&#125;);</span><br><span class=\"hljs-string\">&#125;;</span><br><span class=\"hljs-string\">window.Test_Restore_StepDownload=function()&#123;</span><br><span class=\"hljs-string\">\tTest_AllStepData_Restore(function()&#123;</span><br><span class=\"hljs-string\">\t\tconsole.warn(Lang(&quot;仅供测试：已手动恢复步骤四界面&quot;,&quot;For testing only: Step 4 interface has been manually restored&quot;,true));</span><br><span class=\"hljs-string\">\t\tdownloadStepShow();</span><br><span class=\"hljs-string\">\t&#125;);</span><br><span class=\"hljs-string\">&#125;;</span><br><span class=\"hljs-string\"></span><br><span class=\"hljs-string\"></span><br><span class=\"hljs-string\"></span><br><span class=\"hljs-string\">&#125;)();</span><br><span class=\"hljs-string\">&lt;/script&gt;</span><br><span class=\"hljs-string\"></span><br><span class=\"hljs-string\"></span><br><span class=\"hljs-string\"></span><br><span class=\"hljs-string\"></span><br><span class=\"hljs-string\"></span><br><span class=\"hljs-string\">&lt;script&gt;</span><br><span class=\"hljs-string\">//===================================================</span><br><span class=\"hljs-string\">//================= ACME functions ==================</span><br><span class=\"hljs-string\">//===================================================</span><br><span class=\"hljs-string\">//LICENSE: GPL-3.0, https://github.com/xiangyuecn/ACME-HTML-Web-Browser-Client</span><br><span class=\"hljs-string\">(function()&#123;</span><br><span class=\"hljs-string\">&quot;use strict&quot;;</span><br><span class=\"hljs-string\"></span><br><span class=\"hljs-string\">/************** ACME client implementation **************/</span><br><span class=\"hljs-string\">//RFC8555: https://www.rfc-editor.org/rfc/rfc8555.html</span><br><span class=\"hljs-string\">window.ACME=&#123;</span><br><span class=\"hljs-string\">\tURL:&quot;&quot;</span><br><span class=\"hljs-string\">\t,SyncID:0</span><br><span class=\"hljs-string\">\t,DirData:&#123;&#125;</span><br><span class=\"hljs-string\">\t,Directory:function(True,False)&#123;</span><br><span class=\"hljs-string\">\t\tvar id=++ACME.SyncID;</span><br><span class=\"hljs-string\">\t\tvar url=ACME.URL,dirStoreKey=&quot;ACME_HTML_cache_&quot;+url;</span><br><span class=\"hljs-string\">\t\tvar ok=function(cache)&#123;</span><br><span class=\"hljs-string\">\t\t\tvar data=cache.data;</span><br><span class=\"hljs-string\">\t\t\tif(id!=ACME.SyncID) return False(&quot;cancel&quot;);</span><br><span class=\"hljs-string\">\t\t\tvar meta=data.meta||&#123;&#125;;</span><br><span class=\"hljs-string\">\t\t\tif(!data.newOrder)</span><br><span class=\"hljs-string\">\t\t\t\treturn False(&quot;Not newOrder found: &quot;+FormatText(JSON.stringify(data)));</span><br><span class=\"hljs-string\">\t\t\tACME.DirData=data;</span><br><span class=\"hljs-string\">\t\t\tACME.StepData.termsURL=meta.termsOfService;</span><br><span class=\"hljs-string\">\t\t\tACME.StepData.needEAB=!!meta.externalAccountRequired;</span><br><span class=\"hljs-string\">\t\t\tvar saveCache=function()&#123;</span><br><span class=\"hljs-string\">\t\t\t\tlocalStorage[dirStoreKey]=JSON.stringify(cache);</span><br><span class=\"hljs-string\">\t\t\t&#125;;</span><br><span class=\"hljs-string\">\t\t\tsaveCache();</span><br><span class=\"hljs-string\">\t\t\tTrue(cache,saveCache);</span><br><span class=\"hljs-string\">\t\t&#125;;</span><br><span class=\"hljs-string\">\t\tvar cache=JSON.parse(localStorage[dirStoreKey]||&#x27;&#123;&#125;&#x27;);//先读缓存</span><br><span class=\"hljs-string\">\t\tif(cache.time &amp;&amp; Date.now()-cache.time&lt;24*60*60*1000)&#123;</span><br><span class=\"hljs-string\">\t\t\treturn ok(cache);</span><br><span class=\"hljs-string\">\t\t&#125;</span><br><span class=\"hljs-string\">\t\trequest(url,null,function(data)&#123;</span><br><span class=\"hljs-string\">\t\t\tok(&#123;data:data,time:Date.now()&#125;);</span><br><span class=\"hljs-string\">\t\t&#125;,False);</span><br><span class=\"hljs-string\">\t&#125;</span><br><span class=\"hljs-string\">\t</span><br><span class=\"hljs-string\">\t,StepData:&#123;&#125;</span><br><span class=\"hljs-string\">\t,ChallName:function(chall)&#123; //验证类型名称</span><br><span class=\"hljs-string\">\t\tif(chall.type==&quot;dns-01&quot;)&#123; // https://letsencrypt.org/docs/challenge-types/</span><br><span class=\"hljs-string\">\t\t\treturn Lang(&quot;DNS验证&quot;,&quot;DNS Verify&quot;);</span><br><span class=\"hljs-string\">\t\t&#125;else if(chall.type==&quot;http-01&quot;)&#123;</span><br><span class=\"hljs-string\">\t\t\treturn Lang(&quot;文件URL验证&quot;,&quot;File URL Verify&quot;);</span><br><span class=\"hljs-string\">\t\t&#125; // tls-alpn-01 https://www.rfc-editor.org/rfc/rfc8737</span><br><span class=\"hljs-string\">\t\treturn chall.type.toUpperCase();</span><br><span class=\"hljs-string\">\t&#125;</span><br><span class=\"hljs-string\">\t,ChallSort:function(chall)&#123; //验证类型排序</span><br><span class=\"hljs-string\">\t\tif(chall.type==&quot;dns-01&quot;) return 1+&quot;_&quot;+chall.type;</span><br><span class=\"hljs-string\">\t\telse if(chall.type==&quot;http-01&quot;) return 2+&quot;_&quot;+chall.type;</span><br><span class=\"hljs-string\">\t\treturn 3+&quot;_&quot;+chall.type;</span><br><span class=\"hljs-string\">\t&#125;</span><br><span class=\"hljs-string\">\t// 生成JSON Web Signature(JWS)，用账户私钥签名</span><br><span class=\"hljs-string\">\t,GetJwsA:async function(Protected, Payload)&#123;</span><br><span class=\"hljs-string\">\t\tvar key=ACME.StepData.config.accountKey;</span><br><span class=\"hljs-string\">\t\tvar alg=&quot;ES256&quot;,algorithm=&#123;name:&quot;ECDSA&quot;, hash:&quot;SHA-256&quot;&#125;;</span><br><span class=\"hljs-string\">\t\tif(key.type==&quot;RSA&quot;)&#123;</span><br><span class=\"hljs-string\">\t\t\talg=&quot;RS256&quot;;algorithm=&#123;name:&quot;RSASSA-PKCS1-v1_5&quot;&#125;</span><br><span class=\"hljs-string\">\t\t&#125;</span><br><span class=\"hljs-string\">\t\tProtected.alg=alg;</span><br><span class=\"hljs-string\">\t\tvar rtv=&#123;</span><br><span class=\"hljs-string\">\t\t\t&quot;protected&quot;:Json2UrlB64(Protected)</span><br><span class=\"hljs-string\">\t\t\t, payload:Payload?Json2UrlB64(Payload):&quot;&quot;</span><br><span class=\"hljs-string\">\t\t&#125;;</span><br><span class=\"hljs-string\">\t\tvar data=Str2Bytes(rtv[&quot;protected&quot;]+&quot;.&quot;+rtv.payload);</span><br><span class=\"hljs-string\">\t\tvar sign=await crypto.subtle.sign(algorithm, key.key, data);</span><br><span class=\"hljs-string\">\t\trtv.signature=Bytes2UrlB64(sign);</span><br><span class=\"hljs-string\">\t\treturn rtv;</span><br><span class=\"hljs-string\">\t&#125;</span><br><span class=\"hljs-string\">\t// 获得随机数Nonce</span><br><span class=\"hljs-string\">\t,GetNonceA:function(useNew)&#123;</span><br><span class=\"hljs-string\">\t\treturn new Promise(function(resolve,reject)&#123;</span><br><span class=\"hljs-string\">\t\t\tACME.GetNonce(useNew,function(val)&#123;</span><br><span class=\"hljs-string\">\t\t\t\tresolve(val);</span><br><span class=\"hljs-string\">\t\t\t&#125;,function(err)&#123;</span><br><span class=\"hljs-string\">\t\t\t\treject(new Error(err));</span><br><span class=\"hljs-string\">\t\t\t&#125;);</span><br><span class=\"hljs-string\">\t\t&#125;);</span><br><span class=\"hljs-string\">\t&#125;</span><br><span class=\"hljs-string\">\t,GetNonce:function(useNew, True, False)&#123;</span><br><span class=\"hljs-string\">\t\tvar old=ACME.PrevNonce;ACME.PrevNonce=&quot;&quot;;</span><br><span class=\"hljs-string\">\t\tif(!useNew &amp;&amp; old) return True(old);//使用上次调用返回的值</span><br><span class=\"hljs-string\">\t\trequest(&#123;url:ACME.DirData.newNonce</span><br><span class=\"hljs-string\">\t\t\t,method:&quot;HEAD&quot;,response:false</span><br><span class=\"hljs-string\">\t\t&#125;, null, function(data,xhr)&#123;</span><br><span class=\"hljs-string\">\t\t\tACME.PrevNonce=&quot;&quot;;</span><br><span class=\"hljs-string\">\t\t\t//跨域无解 Chrome ZeroSSL: Refused to get unsafe header &quot;Replay-Nonce&quot; , 需要 Access-Control-Expose-Headers: Link, Replay-Nonce, Location</span><br><span class=\"hljs-string\">\t\t\tvar val=xhr.getResponseHeader(&quot;Replay-Nonce&quot;);</span><br><span class=\"hljs-string\">\t\t\tif(!val)&#123;</span><br><span class=\"hljs-string\">\t\t\t\tFalse(&quot;GetNonce: &quot;+Lang(&#x27;此ACME服务对浏览器访问支持太差，无法跨域获取Replay-Nonce响应头。&#x27;,&#x27;This ACME service has too poor browser access support to get the Replay-Nonce response header across domains.&#x27;), true);</span><br><span class=\"hljs-string\">\t\t\t\treturn;</span><br><span class=\"hljs-string\">\t\t\t&#125;</span><br><span class=\"hljs-string\">\t\t\tTrue(val);</span><br><span class=\"hljs-string\">\t\t&#125;,function(err)&#123;</span><br><span class=\"hljs-string\">\t\t\tFalse(&quot;GetNonce: &quot;+err);</span><br><span class=\"hljs-string\">\t\t&#125;);</span><br><span class=\"hljs-string\">\t&#125;</span><br><span class=\"hljs-string\">\t//测试账户接口的跨域访问</span><br><span class=\"hljs-string\">\t,TestAccountCORS:function(True,False)&#123;</span><br><span class=\"hljs-string\">\t\trequest(&#123;url:ACME.DirData.newAccount</span><br><span class=\"hljs-string\">\t\t\t,method:&quot;POST&quot;,response:false,nocheck:true</span><br><span class=\"hljs-string\">\t\t&#125;, &#123;&#125;, function(data,xhr)&#123;</span><br><span class=\"hljs-string\">\t\t\tif(xhr.status&gt;0)&#123;</span><br><span class=\"hljs-string\">\t\t\t\tTrue();</span><br><span class=\"hljs-string\">\t\t\t&#125;else&#123;</span><br><span class=\"hljs-string\">\t\t\t\tFalse(&quot;[&quot;+xhr.status+&quot;]&quot;,true);</span><br><span class=\"hljs-string\">\t\t\t&#125;</span><br><span class=\"hljs-string\">\t\t&#125;,function(err)&#123;</span><br><span class=\"hljs-string\">\t\t\tFalse(err);</span><br><span class=\"hljs-string\">\t\t&#125;);</span><br><span class=\"hljs-string\">\t&#125;</span><br><span class=\"hljs-string\">\t</span><br><span class=\"hljs-string\">\t//账户接口调用</span><br><span class=\"hljs-string\">\t,StepAccount:async function(True,False)&#123;</span><br><span class=\"hljs-string\">\t\tvar id=++ACME.SyncID;</span><br><span class=\"hljs-string\">\t\tvar tag=&quot;ACME.StepAccount&quot;;</span><br><span class=\"hljs-string\">\t\tCLog(tag, 0, &quot;==========Account Start==========&quot;);</span><br><span class=\"hljs-string\">\t\tvar Err=&quot;&quot;;</span><br><span class=\"hljs-string\">\t\ttry&#123;</span><br><span class=\"hljs-string\">\t\t\tawait ACME._StepAccountA(id,tag);</span><br><span class=\"hljs-string\">\t\t&#125;catch(e)&#123;</span><br><span class=\"hljs-string\">\t\t\tErr=e.message||&quot;-&quot;;</span><br><span class=\"hljs-string\">\t\t\tCLog(tag, 1, Err, e);</span><br><span class=\"hljs-string\">\t\t&#125;</span><br><span class=\"hljs-string\">\t\tCLog(tag, 0, &quot;==========Account End==========&quot;);</span><br><span class=\"hljs-string\">\t\tif(Err) False(Err)</span><br><span class=\"hljs-string\">\t\telse True();</span><br><span class=\"hljs-string\">\t&#125; , _StepAccountA:async function(id,tag)&#123;</span><br><span class=\"hljs-string\">\t\tvar url=ACME.DirData.newAccount,config=ACME.StepData.config;</span><br><span class=\"hljs-string\">\t\tvar accountData=&#123;</span><br><span class=\"hljs-string\">\t\t\tcontact:[&quot;mailto:&quot;+config.email]</span><br><span class=\"hljs-string\">\t\t\t,termsOfServiceAgreed:true</span><br><span class=\"hljs-string\">\t\t&#125;;</span><br><span class=\"hljs-string\">\t\t</span><br><span class=\"hljs-string\">\t\t//externalAccountRequired https://github.com/fszlin/certes/blob/08bf850bbed9e026c718f56f1bcc454afafb4f92/src/Certes/Acme/AccountContext.cs</span><br><span class=\"hljs-string\">\t\tif(ACME.StepData.needEAB)&#123;</span><br><span class=\"hljs-string\">\t\t\tvar eab=&#123;</span><br><span class=\"hljs-string\">\t\t\t\t&quot;protected&quot;:Json2UrlB64(&#123; alg:&quot;HS256&quot;, kid:config.eabKid, url:url &#125;)</span><br><span class=\"hljs-string\">\t\t\t\t,payload:Json2UrlB64(X509.PublicKeyJwk(config.accountKey))</span><br><span class=\"hljs-string\">\t\t\t&#125;;</span><br><span class=\"hljs-string\">\t\t\tvar key=await crypto.subtle.importKey(&quot;raw&quot;, UrlB642Bytes(config.eabKey)</span><br><span class=\"hljs-string\">\t\t\t\t,&#123;name:&quot;HMAC&quot;,hash:&quot;SHA-256&quot;&#125;, true, [&quot;sign&quot;]);</span><br><span class=\"hljs-string\">\t\t\tvar data=Str2Bytes(eab[&quot;protected&quot;]+&quot;.&quot;+eab.payload);</span><br><span class=\"hljs-string\">\t\t\tvar sign=await crypto.subtle.sign(&quot;HMAC&quot;, key, data);</span><br><span class=\"hljs-string\">\t\t\teab.signature=Bytes2UrlB64(sign);</span><br><span class=\"hljs-string\">\t\t\taccountData.externalAccountBinding=eab;</span><br><span class=\"hljs-string\">\t\t\tCLog(tag,0 ,&quot;externalAccountBinding&quot;, eab);</span><br><span class=\"hljs-string\">\t\t&#125;;</span><br><span class=\"hljs-string\">\t\t</span><br><span class=\"hljs-string\">\t\t//组装成jws，请求接口</span><br><span class=\"hljs-string\">\t\tvar sendData=await ACME.GetJwsA(&#123;</span><br><span class=\"hljs-string\">\t\t\tjwk: X509.PublicKeyJwk(config.accountKey)</span><br><span class=\"hljs-string\">\t\t\t,nonce: await ACME.GetNonceA(true)</span><br><span class=\"hljs-string\">\t\t\t,url: url</span><br><span class=\"hljs-string\">\t\t&#125;,accountData);</span><br><span class=\"hljs-string\">\t\tvar resp=await requestA(url, sendData);</span><br><span class=\"hljs-string\">\t\tif(id!=ACME.SyncID) throw new Error(&quot;cancel&quot;);</span><br><span class=\"hljs-string\">\t\tACME.StepData.account=&#123;</span><br><span class=\"hljs-string\">\t\t\turl:xhrHeader(resp.xhr, &quot;Location&quot;)</span><br><span class=\"hljs-string\">\t\t\t,data:resp.data</span><br><span class=\"hljs-string\">\t\t&#125;;</span><br><span class=\"hljs-string\">\t\tCLog(tag,0,&quot;Account OK&quot;,ACME.StepData.account);</span><br><span class=\"hljs-string\">\t&#125;</span><br><span class=\"hljs-string\">\t</span><br><span class=\"hljs-string\">\t//订单接口调用</span><br><span class=\"hljs-string\">\t,StepOrder:async function(Progress,True,False)&#123;</span><br><span class=\"hljs-string\">\t\tvar id=++ACME.SyncID;</span><br><span class=\"hljs-string\">\t\tvar tag=&quot;ACME.StepOrder&quot;;</span><br><span class=\"hljs-string\">\t\tCLog(tag, 0, &quot;==========Order Start==========&quot;);</span><br><span class=\"hljs-string\">\t\tvar Err=&quot;&quot;;</span><br><span class=\"hljs-string\">\t\ttry&#123;</span><br><span class=\"hljs-string\">\t\t\tawait ACME._StepOrderA(Progress,id,tag);</span><br><span class=\"hljs-string\">\t\t&#125;catch(e)&#123;</span><br><span class=\"hljs-string\">\t\t\tErr=e.message||&quot;-&quot;;</span><br><span class=\"hljs-string\">\t\t\tCLog(tag, 1, Err, e);</span><br><span class=\"hljs-string\">\t\t&#125;</span><br><span class=\"hljs-string\">\t\tCLog(tag, 0, &quot;==========Order End==========&quot;);</span><br><span class=\"hljs-string\">\t\tif(Err) False(Err)</span><br><span class=\"hljs-string\">\t\telse True();</span><br><span class=\"hljs-string\">\t&#125; , _StepOrderA:async function(Progress,id,tag)&#123;</span><br><span class=\"hljs-string\">\t\tvar url=ACME.DirData.newOrder,config=ACME.StepData.config;</span><br><span class=\"hljs-string\">\t\tvar dnsArr=[];</span><br><span class=\"hljs-string\">\t\tfor(var i=0;i&lt;config.domains.length;i++)&#123;</span><br><span class=\"hljs-string\">\t\t\tdnsArr.push(&#123; type:&quot;dns&quot;, value:config.domains[i] &#125;);</span><br><span class=\"hljs-string\">\t\t&#125;</span><br><span class=\"hljs-string\">\t\tvar orderData=&#123;</span><br><span class=\"hljs-string\">\t\t\tidentifiers:dnsArr</span><br><span class=\"hljs-string\">\t\t&#125;;</span><br><span class=\"hljs-string\">\t\t</span><br><span class=\"hljs-string\">\t\tProgress(&quot;newOrder...&quot;);</span><br><span class=\"hljs-string\">\t\t//组装成jws，请求接口</span><br><span class=\"hljs-string\">\t\tvar sendData=await ACME.GetJwsA(&#123;</span><br><span class=\"hljs-string\">\t\t\tkid: ACME.StepData.account.url</span><br><span class=\"hljs-string\">\t\t\t,nonce: await ACME.GetNonceA()</span><br><span class=\"hljs-string\">\t\t\t,url: url</span><br><span class=\"hljs-string\">\t\t&#125;,orderData);</span><br><span class=\"hljs-string\">\t\tvar resp=await requestA(url, sendData);</span><br><span class=\"hljs-string\">\t\tif(id!=ACME.SyncID) throw new Error(&quot;cancel&quot;);</span><br><span class=\"hljs-string\">\t\tresp.data.orderUrl=xhrHeader(resp.xhr, &quot;Location&quot;);</span><br><span class=\"hljs-string\">\t\tACME.StepData.order=resp.data;</span><br><span class=\"hljs-string\">\t\tCLog(tag,0,&quot;Order OK&quot;,ACME.StepData.order);</span><br><span class=\"hljs-string\">\t\t</span><br><span class=\"hljs-string\">\t\t//准备Key Authorizations需要的参数 参考：rfc8555 8.1</span><br><span class=\"hljs-string\">\t\tvar jwkStr=JSON.stringify(X509.PublicKeyJwk(config.accountKey));</span><br><span class=\"hljs-string\">\t\tvar thumbprint=await crypto.subtle.digest(&#123;name: &quot;SHA-256&quot;&#125;, Str2Bytes(jwkStr));</span><br><span class=\"hljs-string\">\t\tthumbprint=Bytes2UrlB64(thumbprint);</span><br><span class=\"hljs-string\">\t\t</span><br><span class=\"hljs-string\">\t\t//读取所有的验证信息</span><br><span class=\"hljs-string\">\t\tvar idfs=ACME.StepData.order.identifiers,bad=0;</span><br><span class=\"hljs-string\">\t\tvar auths=ACME.StepData.order.authorizations;</span><br><span class=\"hljs-string\">\t\tfor(var i=0;i&lt;idfs.length;i++)&#123;</span><br><span class=\"hljs-string\">\t\t\tif(config.domains.indexOf(idfs[i].value)==-1) bad=1;</span><br><span class=\"hljs-string\">\t\t&#125;</span><br><span class=\"hljs-string\">\t\tif(bad || idfs.length!=auths.length || idfs.length!=config.domains.length)</span><br><span class=\"hljs-string\">\t\t\tthrow new Error(Lang(&quot;创建的订单中的域名和配置的不一致&quot;,&quot;The domain name in the created order is inconsistent with the configuration&quot;));</span><br><span class=\"hljs-string\">\t\tif(id!=ACME.SyncID) throw new Error(&quot;cancel&quot;);</span><br><span class=\"hljs-string\">\t\tACME.StepData.auths=&#123;&#125;;</span><br><span class=\"hljs-string\">\t\tfor(var i=0;i&lt;auths.length;i++)&#123;</span><br><span class=\"hljs-string\">\t\t\tProgress(&quot;auth(&quot;+(i+1)+&quot;/&quot;+auths.length+&quot;)...&quot;);</span><br><span class=\"hljs-string\">\t\t\tvar url=auths[i];</span><br><span class=\"hljs-string\">\t\t\tvar sendData=await ACME.GetJwsA(&#123;</span><br><span class=\"hljs-string\">\t\t\t\tkid: ACME.StepData.account.url</span><br><span class=\"hljs-string\">\t\t\t\t,nonce: await ACME.GetNonceA()</span><br><span class=\"hljs-string\">\t\t\t\t,url: url</span><br><span class=\"hljs-string\">\t\t\t&#125;,&quot;&quot;);</span><br><span class=\"hljs-string\">\t\t\tvar resp=await requestA(url, sendData);</span><br><span class=\"hljs-string\">\t\t\tif(id!=ACME.SyncID) throw new Error(&quot;cancel&quot;);</span><br><span class=\"hljs-string\">\t\t\tresp.data.domain=idfs[i].value;</span><br><span class=\"hljs-string\">\t\t\tresp.data.authUrl=url;</span><br><span class=\"hljs-string\">\t\t\tACME.StepData.auths[idfs[i].value]=resp.data;</span><br><span class=\"hljs-string\">\t\t\t</span><br><span class=\"hljs-string\">\t\t\t//生成Key Authorizations</span><br><span class=\"hljs-string\">\t\t\tvar challs=resp.data.challenges;</span><br><span class=\"hljs-string\">\t\t\tfor(var i2=0;i2&lt;challs.length;i2++)&#123;</span><br><span class=\"hljs-string\">\t\t\t\tvar chall=challs[i2];</span><br><span class=\"hljs-string\">\t\t\t\tchall.authTxt=chall.token+&quot;.&quot;+thumbprint;</span><br><span class=\"hljs-string\">\t\t\t\tvar sha=await crypto.subtle.digest(&#123;name: &quot;SHA-256&quot;&#125;</span><br><span class=\"hljs-string\">\t\t\t\t\t\t\t\t, Str2Bytes(chall.authTxt));</span><br><span class=\"hljs-string\">\t\t\t\tif(id!=ACME.SyncID) throw new Error(&quot;cancel&quot;);</span><br><span class=\"hljs-string\">\t\t\t\tchall.authTxtSHA256=Bytes2UrlB64(sha);</span><br><span class=\"hljs-string\">\t\t\t\tchall.authTxtSHA256Base64=Bytes2Base64(sha);</span><br><span class=\"hljs-string\">\t\t\t&#125;</span><br><span class=\"hljs-string\">\t\t&#125;</span><br><span class=\"hljs-string\">\t\tCLog(tag,0,&quot;Order Authorizations&quot;,ACME.StepData.auths);</span><br><span class=\"hljs-string\">\t&#125;</span><br><span class=\"hljs-string\">\t</span><br><span class=\"hljs-string\">\t//验证一个域名</span><br><span class=\"hljs-string\">\t,StepVerifyAuthItem:async function(authItem, challIdx, True,False)&#123;</span><br><span class=\"hljs-string\">\t\tvar tag=&quot;ACME.verify[&quot;+authItem.challenges[challIdx].type+&quot;]:&quot;+authItem.domain;</span><br><span class=\"hljs-string\">\t\tvar Err=&quot;&quot;;</span><br><span class=\"hljs-string\">\t\ttry&#123;</span><br><span class=\"hljs-string\">\t\t\tawait ACME._StepVerifyAuthItemA(authItem,challIdx, ACME.SyncID,tag, True,False);</span><br><span class=\"hljs-string\">\t\t&#125;catch(e)&#123;</span><br><span class=\"hljs-string\">\t\t\tErr=e.message||&quot;-&quot;;</span><br><span class=\"hljs-string\">\t\t\tCLog(tag, 1, Err, e);</span><br><span class=\"hljs-string\">\t\t&#125;</span><br><span class=\"hljs-string\">\t\tif(Err) True(false, 1000, Err); //重试</span><br><span class=\"hljs-string\">\t&#125; , _StepVerifyAuthItemA:async function(authItem,challIdx, id,tag, True,False)&#123;</span><br><span class=\"hljs-string\">\t\t//先通知要用的验证方式，反复发送只要成功一次即可，不管结果</span><br><span class=\"hljs-string\">\t\tvar chall=authItem.challenges[challIdx];</span><br><span class=\"hljs-string\">\t\tif(!chall.isSend)&#123;</span><br><span class=\"hljs-string\">\t\t\tvar url=chall.url;</span><br><span class=\"hljs-string\">\t\t\tvar sendData=await ACME.GetJwsA(&#123;</span><br><span class=\"hljs-string\">\t\t\t\tkid: ACME.StepData.account.url</span><br><span class=\"hljs-string\">\t\t\t\t,nonce: await ACME.GetNonceA()</span><br><span class=\"hljs-string\">\t\t\t\t,url: url</span><br><span class=\"hljs-string\">\t\t\t&#125;,&#123;&#125;);</span><br><span class=\"hljs-string\">\t\t\tvar resp=await requestA(&#123;url:url,nocheck:true&#125;, sendData);</span><br><span class=\"hljs-string\">\t\t\tvar status=resp.xhr.status;</span><br><span class=\"hljs-string\">\t\t\tif(status&gt;=200&amp;&amp;status&lt;300)</span><br><span class=\"hljs-string\">\t\t\t\tchall.isSend=true;</span><br><span class=\"hljs-string\">\t\t&#125;</span><br><span class=\"hljs-string\">\t\t</span><br><span class=\"hljs-string\">\t\t//重新查询一下状态</span><br><span class=\"hljs-string\">\t\tvar url=authItem.authUrl;</span><br><span class=\"hljs-string\">\t\tvar sendData=await ACME.GetJwsA(&#123;</span><br><span class=\"hljs-string\">\t\t\tkid: ACME.StepData.account.url</span><br><span class=\"hljs-string\">\t\t\t,nonce: await ACME.GetNonceA()</span><br><span class=\"hljs-string\">\t\t\t,url: url</span><br><span class=\"hljs-string\">\t\t&#125;,&quot;&quot;);</span><br><span class=\"hljs-string\">\t\tvar resp=await requestA(url, sendData);</span><br><span class=\"hljs-string\">\t\tvar data=resp.data;</span><br><span class=\"hljs-string\">\t\tif(data.status==&quot;pending&quot;)&#123;</span><br><span class=\"hljs-string\">\t\t\tCLog(tag, 0, &quot;pending...&quot;);</span><br><span class=\"hljs-string\">\t\t\treturn True(false, 1000, &quot;pending...&quot;);</span><br><span class=\"hljs-string\">\t\t&#125;</span><br><span class=\"hljs-string\">\t\tif(data.status==&quot;valid&quot;)&#123;</span><br><span class=\"hljs-string\">\t\t\tCLog(tag, 0, &quot;valid OK&quot;);</span><br><span class=\"hljs-string\">\t\t\treturn True(true);</span><br><span class=\"hljs-string\">\t\t&#125;</span><br><span class=\"hljs-string\">\t\tCLog(tag, 1, &quot;Fail&quot;, data);</span><br><span class=\"hljs-string\">\t\treturn False(data.status+&quot;: &quot;+FormatText(JSON.stringify(data)));</span><br><span class=\"hljs-string\">\t&#125;</span><br><span class=\"hljs-string\">\t</span><br><span class=\"hljs-string\">\t//完成订单，生成证书</span><br><span class=\"hljs-string\">\t,StepFinalizeOrder:async function(Progress,True,False)&#123;</span><br><span class=\"hljs-string\">\t\tvar id=++ACME.SyncID;</span><br><span class=\"hljs-string\">\t\tvar tag=&quot;ACME.StepFinalizeOrder&quot;;</span><br><span class=\"hljs-string\">\t\tCLog(tag, 0, &quot;==========Finalize Start==========&quot;);</span><br><span class=\"hljs-string\">\t\tvar Err=&quot;&quot;;</span><br><span class=\"hljs-string\">\t\ttry&#123;</span><br><span class=\"hljs-string\">\t\t\tawait ACME._StepFinalizeOrderA(Progress,id,tag);</span><br><span class=\"hljs-string\">\t\t&#125;catch(e)&#123;</span><br><span class=\"hljs-string\">\t\t\tErr=e.message||&quot;-&quot;;</span><br><span class=\"hljs-string\">\t\t\tCLog(tag, 1, Err, e);</span><br><span class=\"hljs-string\">\t\t&#125;</span><br><span class=\"hljs-string\">\t\tCLog(tag, 0, &quot;==========Finalize End==========&quot;);</span><br><span class=\"hljs-string\">\t\tif(Err) False(Err)</span><br><span class=\"hljs-string\">\t\telse True();</span><br><span class=\"hljs-string\">\t&#125; , _StepFinalizeOrderA:async function(Progress,id,tag)&#123;</span><br><span class=\"hljs-string\">\t\tvar order=ACME.StepData.order,config=ACME.StepData.config,domains=config.domains;</span><br><span class=\"hljs-string\">\t\t</span><br><span class=\"hljs-string\">\t\t//先请求finalize</span><br><span class=\"hljs-string\">\t\tif(!order.finalizeIsSend)&#123;</span><br><span class=\"hljs-string\">\t\t\tProgress(&quot;finalize...&quot;);</span><br><span class=\"hljs-string\">\t\t\t//生成csr，第一个域名做CN</span><br><span class=\"hljs-string\">\t\t\tvar csr=await new Promise(function(resolve,reject)&#123;</span><br><span class=\"hljs-string\">\t\t\t\tX509.CreateCSR(config.privateKey, domains[0], domains, function(csr)&#123;</span><br><span class=\"hljs-string\">\t\t\t\t\tresolve(csr);</span><br><span class=\"hljs-string\">\t\t\t\t&#125;,function(err)&#123;</span><br><span class=\"hljs-string\">\t\t\t\t\treject(new Error(err));</span><br><span class=\"hljs-string\">\t\t\t\t&#125;);</span><br><span class=\"hljs-string\">\t\t\t&#125;);</span><br><span class=\"hljs-string\">\t\t\torder.orderCSR=csr;</span><br><span class=\"hljs-string\">\t\t\tCLog(tag,0,&quot;CSR\\\\n&quot;+csr);</span><br><span class=\"hljs-string\">\t\t\tcsr=Bytes2UrlB64(ASN1.PEM2Bytes(csr));</span><br><span class=\"hljs-string\">\t\t\t</span><br><span class=\"hljs-string\">\t\t\tvar url=order.finalize;</span><br><span class=\"hljs-string\">\t\t\t//组装成jws，请求接口</span><br><span class=\"hljs-string\">\t\t\tvar sendData=await ACME.GetJwsA(&#123;</span><br><span class=\"hljs-string\">\t\t\t\tkid: ACME.StepData.account.url</span><br><span class=\"hljs-string\">\t\t\t\t,nonce: await ACME.GetNonceA()</span><br><span class=\"hljs-string\">\t\t\t\t,url: url</span><br><span class=\"hljs-string\">\t\t\t&#125;,&#123; csr:csr &#125;);</span><br><span class=\"hljs-string\">\t\t\tvar resp=await requestA(url, sendData);</span><br><span class=\"hljs-string\">\t\t\tif(id!=ACME.SyncID) throw new Error(&quot;cancel&quot;);</span><br><span class=\"hljs-string\">\t\t\tCLog(tag,0,&quot;finalize result&quot;,resp.data);</span><br><span class=\"hljs-string\">\t\t\torder.finalizeIsSend=true;</span><br><span class=\"hljs-string\">\t\t&#125;</span><br><span class=\"hljs-string\">\t\t</span><br><span class=\"hljs-string\">\t\t//轮询订单状态，60秒超时</span><br><span class=\"hljs-string\">\t\tvar t1=Date.now(),tryCount=0;</span><br><span class=\"hljs-string\">\t\twhile(!order.checkOK &amp;&amp; Date.now()-t1&lt;60*1000)&#123;</span><br><span class=\"hljs-string\">\t\t\tif(id!=ACME.SyncID) throw new Error(&quot;cancel&quot;);</span><br><span class=\"hljs-string\">\t\t\ttryCount++;</span><br><span class=\"hljs-string\">\t\t\tProgress(&quot;check retry:&quot;+tryCount+&quot;...&quot;);</span><br><span class=\"hljs-string\">\t\t\tvar url=order.orderUrl;</span><br><span class=\"hljs-string\">\t\t\t//组装成jws，请求接口</span><br><span class=\"hljs-string\">\t\t\tvar sendData=await ACME.GetJwsA(&#123;</span><br><span class=\"hljs-string\">\t\t\t\tkid: ACME.StepData.account.url</span><br><span class=\"hljs-string\">\t\t\t\t,nonce: await ACME.GetNonceA()</span><br><span class=\"hljs-string\">\t\t\t\t,url: url</span><br><span class=\"hljs-string\">\t\t\t&#125;,&quot;&quot;);</span><br><span class=\"hljs-string\">\t\t\tvar resp=await requestA(url, sendData);</span><br><span class=\"hljs-string\">\t\t\tif(id!=ACME.SyncID) throw new Error(&quot;cancel&quot;);</span><br><span class=\"hljs-string\">\t\t\tvar data=resp.data;</span><br><span class=\"hljs-string\">\t\t\tif(data.status==&quot;valid&quot;)&#123;</span><br><span class=\"hljs-string\">\t\t\t\torder.checkOK=true;</span><br><span class=\"hljs-string\">\t\t\t\torder.certUrl=data.certificate;</span><br><span class=\"hljs-string\">\t\t\t\tCLog(tag,0,&quot;check OK&quot;,data);</span><br><span class=\"hljs-string\">\t\t\t\tbreak;</span><br><span class=\"hljs-string\">\t\t\t&#125;else if(data.status==&quot;invalid&quot;)&#123;</span><br><span class=\"hljs-string\">\t\t\t\tCLog(tag,1,&quot;check Fail&quot;,data);</span><br><span class=\"hljs-string\">\t\t\t\tthrow new Error(data.status+&quot;: &quot;+FormatText(JSON.stringify(data)));</span><br><span class=\"hljs-string\">\t\t\t&#125;else&#123;</span><br><span class=\"hljs-string\">\t\t\t\tCLog(tag,0,data.status+&quot;... wait 1s&quot;,data);</span><br><span class=\"hljs-string\">\t\t\t\tawait new Promise(function(s)&#123; setTimeout(s, 1000) &#125;);</span><br><span class=\"hljs-string\">\t\t\t&#125;</span><br><span class=\"hljs-string\">\t\t&#125;</span><br><span class=\"hljs-string\">\t\t</span><br><span class=\"hljs-string\">\t\t//下载证书</span><br><span class=\"hljs-string\">\t\tif(!order.downloadPEM)&#123;</span><br><span class=\"hljs-string\">\t\t\tProgress(&quot;download...&quot;);</span><br><span class=\"hljs-string\">\t\t\tvar url=order.certUrl;</span><br><span class=\"hljs-string\">\t\t\t//组装成jws，请求接口</span><br><span class=\"hljs-string\">\t\t\tvar sendData=await ACME.GetJwsA(&#123;</span><br><span class=\"hljs-string\">\t\t\t\tkid: ACME.StepData.account.url</span><br><span class=\"hljs-string\">\t\t\t\t,nonce: await ACME.GetNonceA()</span><br><span class=\"hljs-string\">\t\t\t\t,url: url</span><br><span class=\"hljs-string\">\t\t\t&#125;,&quot;&quot;);</span><br><span class=\"hljs-string\">\t\t\tvar resp=await requestA(&#123;url:url,response:false&#125;, sendData);</span><br><span class=\"hljs-string\">\t\t\tif(id!=ACME.SyncID) throw new Error(&quot;cancel&quot;);</span><br><span class=\"hljs-string\">\t\t\tvar pem=resp.xhr.responseText;</span><br><span class=\"hljs-string\">\t\t\torder.downloadPEM=pem;</span><br><span class=\"hljs-string\">\t\t\tCLog(tag,0,&quot;download OK\\\\n&quot;+pem);</span><br><span class=\"hljs-string\">\t\t&#125;</span><br><span class=\"hljs-string\">\t&#125;</span><br><span class=\"hljs-string\">&#125;;</span><br><span class=\"hljs-string\"></span><br><span class=\"hljs-string\"></span><br><span class=\"hljs-string\">// 读取响应头，读不到就当做跨域无法读取处理，自定义的头需要 Access-Control-Expose-Headers: Link, Replay-Nonce, Location</span><br><span class=\"hljs-string\">var xhrHeader=function(xhr,key)&#123;</span><br><span class=\"hljs-string\">\tvar val=xhr.getResponseHeader(key);</span><br><span class=\"hljs-string\">\tif(!val)&#123;</span><br><span class=\"hljs-string\">\t\tacmeReadDirGotoCORS();</span><br><span class=\"hljs-string\">\t\tthrow new Error(Lang(&quot;无法读取响应头&quot;+key+&quot;，可能是因为此ACME服务对跨域访问支持不良，请按第一步显示的提示操作。&quot;</span><br><span class=\"hljs-string\">\t\t\t,&quot;The response header &quot;+key+&quot; cannot be read, This may be because this ACME service does not support cross domain access, Please follow the prompt displayed in step 1.&quot;));</span><br><span class=\"hljs-string\">\t&#125;</span><br><span class=\"hljs-string\">\treturn val;</span><br><span class=\"hljs-string\">&#125;;</span><br><span class=\"hljs-string\"></span><br><span class=\"hljs-string\">// ajax</span><br><span class=\"hljs-string\">var requestA=function(url,post)&#123;</span><br><span class=\"hljs-string\">\treturn new Promise(function(resolve,reject)&#123;</span><br><span class=\"hljs-string\">\t\trequest(url,post,function(data,xhr)&#123;</span><br><span class=\"hljs-string\">\t\t\tresolve(&#123;data:data,xhr:xhr&#125;);</span><br><span class=\"hljs-string\">\t\t&#125;,function(err)&#123;</span><br><span class=\"hljs-string\">\t\t\treject(new Error(err));</span><br><span class=\"hljs-string\">\t\t&#125;);</span><br><span class=\"hljs-string\">\t&#125;);</span><br><span class=\"hljs-string\">&#125;</span><br><span class=\"hljs-string\">var request=function(url,post,True,False)&#123;</span><br><span class=\"hljs-string\">\tvar set=typeof(url)==&quot;string&quot;?&#123;url:url&#125;:url; url=set.url;</span><br><span class=\"hljs-string\">\tvar method=set.method||(post?&quot;POST&quot;:&quot;GET&quot;);</span><br><span class=\"hljs-string\">\tvar tag=&quot;ACME.Request&quot;; CLog(tag,4,&quot;send &quot;+method,set,post);</span><br><span class=\"hljs-string\">\t</span><br><span class=\"hljs-string\">\tvar xhr=new XMLHttpRequest();</span><br><span class=\"hljs-string\">\txhr.timeout=30000;</span><br><span class=\"hljs-string\">\txhr.open(method,url,true);</span><br><span class=\"hljs-string\">\txhr.onreadystatechange=function()&#123;</span><br><span class=\"hljs-string\">\t\tif(xhr.readyState==4)&#123;</span><br><span class=\"hljs-string\">\t\t\tACME.PrevNonce=xhr.getResponseHeader(&quot;Replay-Nonce&quot;)||&quot;&quot;;//将此值存起来</span><br><span class=\"hljs-string\">\t\t\t</span><br><span class=\"hljs-string\">\t\t\tvar isBad=xhr.status&lt;200 || xhr.status&gt;=300;</span><br><span class=\"hljs-string\">\t\t\tvar useResp=set.response==null || set.response;</span><br><span class=\"hljs-string\">\t\t\tvar err=&quot;&quot;,data,logObj;</span><br><span class=\"hljs-string\">\t\t\tif(useResp || isBad)&#123;</span><br><span class=\"hljs-string\">\t\t\t\tlogObj=xhr.responseText;</span><br><span class=\"hljs-string\">\t\t\t\ttry&#123;</span><br><span class=\"hljs-string\">\t\t\t\t\tdata=JSON.parse(logObj);</span><br><span class=\"hljs-string\">\t\t\t\t\tlogObj=data;</span><br><span class=\"hljs-string\">\t\t\t\t&#125;catch(e)&#123; &#125;;</span><br><span class=\"hljs-string\">\t\t\t&#125;</span><br><span class=\"hljs-string\">\t\t\tCLog(tag,4,&quot;send End&quot;,set, &#123;</span><br><span class=\"hljs-string\">\t\t\t\tstatus:xhr.status</span><br><span class=\"hljs-string\">\t\t\t\t,headers:xhr.getAllResponseHeaders()</span><br><span class=\"hljs-string\">\t\t\t&#125;, logObj);</span><br><span class=\"hljs-string\">\t\t\tif(set.nocheck || !isBad &amp;&amp; (!useResp || data))&#123;</span><br><span class=\"hljs-string\">\t\t\t\treturn True(data, xhr);</span><br><span class=\"hljs-string\">\t\t\t&#125;</span><br><span class=\"hljs-string\">\t\t\tFalse((isBad?&quot;[&quot;+xhr.status+&quot;]&quot;:&quot;&quot;)+FormatText(xhr.responseText), xhr.status);</span><br><span class=\"hljs-string\">\t\t&#125;</span><br><span class=\"hljs-string\">\t&#125;;</span><br><span class=\"hljs-string\">\tif(post)&#123;</span><br><span class=\"hljs-string\">\t\tif(typeof(post)==&quot;object&quot;)post=JSON.stringify(post);</span><br><span class=\"hljs-string\">\t\txhr.setRequestHeader(&quot;Content-Type&quot;,set.contentType||&quot;application/jose+json&quot;);</span><br><span class=\"hljs-string\">\t\txhr.send(post);</span><br><span class=\"hljs-string\">\t&#125;else&#123;</span><br><span class=\"hljs-string\">\t\txhr.send();</span><br><span class=\"hljs-string\">\t&#125;</span><br><span class=\"hljs-string\">&#125;;</span><br><span class=\"hljs-string\"></span><br><span class=\"hljs-string\">&#125;)();</span><br><span class=\"hljs-string\">&lt;/script&gt;</span><br><span class=\"hljs-string\"></span><br><span class=\"hljs-string\"></span><br><span class=\"hljs-string\"></span><br><span class=\"hljs-string\"></span><br><span class=\"hljs-string\"></span><br><span class=\"hljs-string\">&lt;script&gt;</span><br><span class=\"hljs-string\">//==================================================================</span><br><span class=\"hljs-string\">//================= RSA/ECC/X.509/ASN.1 functions ==================</span><br><span class=\"hljs-string\">//==================================================================</span><br><span class=\"hljs-string\">//LICENSE: GPL-3.0, https://github.com/xiangyuecn/ACME-HTML-Web-Browser-Client</span><br><span class=\"hljs-string\">(function()&#123;</span><br><span class=\"hljs-string\">&quot;use strict&quot;;</span><br><span class=\"hljs-string\"></span><br><span class=\"hljs-string\">window.X509=&#123;</span><br><span class=\"hljs-string\">\tDefaultType2_RSA:&quot;2048&quot; //默认创建RSA密钥位数</span><br><span class=\"hljs-string\">\t,DefaultType2_ECC:&quot;P-256&quot; //默认创建ECC曲线</span><br><span class=\"hljs-string\">\t,SupportECCType2:&#123; //支持的ECC曲线和常见名称</span><br><span class=\"hljs-string\">\t\t&quot;P-256&quot;:&quot;prime256v1&quot;, &quot;P-384&quot;:&quot;secp384r1&quot;, &quot;P-521&quot;:&quot;secp521r1&quot;</span><br><span class=\"hljs-string\">\t&#125;</span><br><span class=\"hljs-string\">\t,SupportECCType2Names:function()&#123; var str=[]; for(var k in X509.SupportECCType2)str.push(X509.SupportECCType2[k]); return str; &#125;</span><br><span class=\"hljs-string\">\t</span><br><span class=\"hljs-string\">\t//创建RSA/ECC密钥对 type2取值：type=RSA时为密钥位数数值，type=ECC时为支持的曲线（X509.SupportECCType2）</span><br><span class=\"hljs-string\">\t,KeyGenerate:function(type,type2,True,False)&#123;</span><br><span class=\"hljs-string\">\t\tvar algorithm=0;</span><br><span class=\"hljs-string\">\t\tif(type==&quot;RSA&quot;)&#123;</span><br><span class=\"hljs-string\">\t\t\talgorithm=&#123; publicExponent: new Uint8Array([1, 0, 1]) //E: AQAB</span><br><span class=\"hljs-string\">\t\t\t\t,name:&quot;RSASSA-PKCS1-v1_5&quot;, modulusLength:+type2, hash:&quot;SHA-256&quot; &#125;;</span><br><span class=\"hljs-string\">\t\t&#125;else if(type==&quot;ECC&quot;)&#123;</span><br><span class=\"hljs-string\">\t\t\talgorithm=&#123; name:&quot;ECDSA&quot;, namedCurve:type2 &#125;;</span><br><span class=\"hljs-string\">\t\t&#125;else&#123;</span><br><span class=\"hljs-string\">\t\t\tFalse(&quot;Not support &quot;+type);</span><br><span class=\"hljs-string\">\t\t\treturn;</span><br><span class=\"hljs-string\">\t\t&#125;;</span><br><span class=\"hljs-string\">\t\tcrypto.subtle.generateKey(algorithm,true,[&quot;sign&quot;,&quot;verify&quot;])</span><br><span class=\"hljs-string\">\t\t\t.then(function(key)&#123;</span><br><span class=\"hljs-string\">\t\t\t\t//FireFox不支持导出pkcs8参数的ECC私钥，Chrome没问题，使用jwk获得最大兼容</span><br><span class=\"hljs-string\">\t\t\t\tcrypto.subtle.exportKey(&quot;jwk&quot;, key.privateKey).then(function(jwk)&#123;</span><br><span class=\"hljs-string\">\t\t\t\t\tTrue(X509.KeyExport(jwk));</span><br><span class=\"hljs-string\">\t\t\t\t&#125;).catch(function(e)&#123;</span><br><span class=\"hljs-string\">\t\t\t\t\tFalse(Lang(&#x27;此浏览器不支持导出&#x27;+algorithm.name+&#x27;+PKCS#8格式密钥：&#x27;,&#x27;This browser does not support exporting &#x27;+algorithm.name+&#x27;+PKCS#8 format keys: &#x27;)+e.message);</span><br><span class=\"hljs-string\">\t\t\t\t&#125;);</span><br><span class=\"hljs-string\">\t\t\t&#125;).catch(function(e)&#123;</span><br><span class=\"hljs-string\">\t\t\t\tFalse(Lang(&#x27;此浏览器不支持生成&#x27;+algorithm.name+&#x27;：&#x27;,&#x27;This browser does not support generating &#x27;+algorithm.name+&#x27;: &#x27;)+e.message);</span><br><span class=\"hljs-string\">\t\t\t&#125;);</span><br><span class=\"hljs-string\">\t&#125;</span><br><span class=\"hljs-string\">\t//解析密钥，检查是否支持，通过回调返回格式或错误信息，pem支持公钥和私钥</span><br><span class=\"hljs-string\">\t,KeyParse:function(pem, True, False, mustPrivate)&#123;</span><br><span class=\"hljs-string\">\t\tvar rtv=&#123;&#125;;</span><br><span class=\"hljs-string\">\t\tvar Err=function(msg)&#123; rtv.error=msg; False(msg, rtv); &#125;;</span><br><span class=\"hljs-string\">\t\t//浏览器crypto不支持PKCS#1的pem导入，提取参数转成jwk导入</span><br><span class=\"hljs-string\">\t\t</span><br><span class=\"hljs-string\">\t\tif(!/BEGIN\\\\s*(RSA|EC)?\\\\s*(PUBLIC|PRIVATE)\\\\s*KEY/.test(pem))</span><br><span class=\"hljs-string\">\t\t\treturn Err(Lang(&#x27;不是RSA或ECC密钥&#x27;,&#x27;Not an RSA or ECC key&#x27;));</span><br><span class=\"hljs-string\">\t\trtv.type=RegExp.$1==&quot;EC&quot;?&quot;ECC&quot;:RegExp.$1;</span><br><span class=\"hljs-string\">\t\tvar isPKCS1=!!RegExp.$1;</span><br><span class=\"hljs-string\">\t\tvar isPub=RegExp.$2==&quot;PUBLIC&quot;;</span><br><span class=\"hljs-string\">\t\tif(isPub &amp;&amp; mustPrivate)</span><br><span class=\"hljs-string\">\t\t\treturn Err(Lang(&#x27;不是私钥&#x27;,&#x27;Is not a private key&#x27;));</span><br><span class=\"hljs-string\">\t\t</span><br><span class=\"hljs-string\">\t\t//解析提取参数信息</span><br><span class=\"hljs-string\">\t\ttry&#123;</span><br><span class=\"hljs-string\">\t\t\tvar paramAsn1=null;</span><br><span class=\"hljs-string\">\t\t\tvar asn1=ASN1.ParsePEM(pem);</span><br><span class=\"hljs-string\">\t\t\trtv.asn1=asn1;</span><br><span class=\"hljs-string\">\t\t\t</span><br><span class=\"hljs-string\">\t\t\tif(isPKCS1)&#123;</span><br><span class=\"hljs-string\">\t\t\t\tif(rtv.type==&quot;RSA&quot;)&#123;</span><br><span class=\"hljs-string\">\t\t\t\t\tparamAsn1=asn1; //直接按顺序存放的参数</span><br><span class=\"hljs-string\">\t\t\t\t&#125;else if(rtv.type==&quot;ECC&quot;)&#123;</span><br><span class=\"hljs-string\">\t\t\t\t\tif(isPub) //没见过这种ecc公钥</span><br><span class=\"hljs-string\">\t\t\t\t\t\treturn Err(Lang(&#x27;不支持ECC PKCS#1格式公钥&#x27;,&#x27;ECC PKCS#1 format public key is not supported&#x27;));</span><br><span class=\"hljs-string\">\t\t\t\t\tvar oid2=asn1.sub[2].sub[0].oid;</span><br><span class=\"hljs-string\">\t\t\t\t\trtv.type2=ASN1.OID[oid2]||&quot;&quot;;</span><br><span class=\"hljs-string\">\t\t\t\t\tparamAsn1=asn1;</span><br><span class=\"hljs-string\">\t\t\t\t&#125;</span><br><span class=\"hljs-string\">\t\t\t&#125;else&#123;</span><br><span class=\"hljs-string\">\t\t\t\tvar idx=isPub?0:1; //跳过私钥开头的version，就和公钥一样了</span><br><span class=\"hljs-string\">\t\t\t\tvar oid=asn1.sub[idx].sub[0].oid;</span><br><span class=\"hljs-string\">\t\t\t\tvar oid2=asn1.sub[idx].sub[1].oid;</span><br><span class=\"hljs-string\">\t\t\t\trtv.type=ASN1.OID[oid]||&quot;&quot;;</span><br><span class=\"hljs-string\">\t\t\t\trtv.type2=ASN1.OID[oid2]||&quot;&quot;;</span><br><span class=\"hljs-string\">\t\t\t\t</span><br><span class=\"hljs-string\">\t\t\t\tif(rtv.type==&quot;ECC&quot;&amp;&amp;isPub)//ECC公钥直接就是值</span><br><span class=\"hljs-string\">\t\t\t\t\tparamAsn1=asn1;</span><br><span class=\"hljs-string\">\t\t\t\telse</span><br><span class=\"hljs-string\">\t\t\t\t\tparamAsn1=new ASN1().parse(asn1.sub[idx+1].bytes);//密钥参数</span><br><span class=\"hljs-string\">\t\t\t&#125;</span><br><span class=\"hljs-string\">\t\t\trtv.paramAsn1=paramAsn1;</span><br><span class=\"hljs-string\">\t\t&#125;catch(e)&#123;</span><br><span class=\"hljs-string\">\t\t\treturn Err(Lang(&#x27;密钥解析失败：&#x27;,&#x27;Key resolution failed: &#x27;)+e.message);</span><br><span class=\"hljs-string\">\t\t&#125;</span><br><span class=\"hljs-string\">\t\tif(rtv.type==&quot;RSA&quot;)&#123;</span><br><span class=\"hljs-string\">\t\t\tvar idx=isPub?0:1; //私钥开头多一个版本号</span><br><span class=\"hljs-string\">\t\t\trtv.param=&#123;</span><br><span class=\"hljs-string\">\t\t\t\tn:paramAsn1.sub[idx].bytes //Modulus</span><br><span class=\"hljs-string\">\t\t\t\t,e:paramAsn1.sub[idx+1].bytes //Exponent</span><br><span class=\"hljs-string\">\t\t\t\t,d:isPub?null:paramAsn1.sub[idx+2].bytes //D</span><br><span class=\"hljs-string\">\t\t\t&#125;;</span><br><span class=\"hljs-string\">\t\t\tvar keys=&quot;p,q,dp,dq,qi&quot;.split(&quot;,&quot;);</span><br><span class=\"hljs-string\">\t\t\tfor(var i=0;i&lt;5;i++)</span><br><span class=\"hljs-string\">\t\t\t\trtv.param[keys[i]]=isPub?null:paramAsn1.sub[idx+3+i].bytes;</span><br><span class=\"hljs-string\">\t\t\trtv.type2=rtv.param.n.length*8+&quot;&quot;;</span><br><span class=\"hljs-string\">\t\t&#125;else if(rtv.type==&quot;ECC&quot;)&#123;</span><br><span class=\"hljs-string\">\t\t\tif(!X509.SupportECCType2[rtv.type2])&#123;</span><br><span class=\"hljs-string\">\t\t\t\treturn Err(Lang(&#x27;只支持&#x27;+X509.SupportECCType2Names().join(&quot;、&quot;)+&#x27;曲线的ECC密钥&#x27;,&#x27;ECC key only supported for &#x27;+X509.SupportECCType2Names().join(&quot;,&quot;)+&#x27; curve&#x27;));</span><br><span class=\"hljs-string\">\t\t\t&#125;</span><br><span class=\"hljs-string\">\t\t\tif(isPub)&#123;</span><br><span class=\"hljs-string\">\t\t\t\tvar b2=paramAsn1.sub[1].bytes;</span><br><span class=\"hljs-string\">\t\t\t&#125;else&#123;</span><br><span class=\"hljs-string\">\t\t\t\tvar idx=isPKCS1?3:2;</span><br><span class=\"hljs-string\">\t\t\t\tvar b2=paramAsn1.sub[idx].sub[0].bytes;</span><br><span class=\"hljs-string\">\t\t\t&#125;</span><br><span class=\"hljs-string\">\t\t\tif(b2[0]!=0x04)//0x04代表公钥未压缩 https://www.rfc-editor.org/rfc/rfc5480#section-2.2</span><br><span class=\"hljs-string\">\t\t\t\treturn Err(&quot;ECC !0x04: &quot;+b2[0]);</span><br><span class=\"hljs-string\">\t\t\tvar bits=(b2.length-1)/2;</span><br><span class=\"hljs-string\">\t\t\trtv.param=&#123;</span><br><span class=\"hljs-string\">\t\t\t\tx:b2.slice(1,1+bits) //xy为公钥</span><br><span class=\"hljs-string\">\t\t\t\t,y:b2.slice(1+bits)</span><br><span class=\"hljs-string\">\t\t\t\t,d:isPub?null:paramAsn1.sub[1].bytes //D</span><br><span class=\"hljs-string\">\t\t\t&#125;;</span><br><span class=\"hljs-string\">\t\t&#125;else&#123;</span><br><span class=\"hljs-string\">\t\t\treturn Err(Lang(&#x27;不支持的密钥类型：&#x27;,&#x27;Unsupported key type: &#x27;)+oid);</span><br><span class=\"hljs-string\">\t\t&#125;</span><br><span class=\"hljs-string\">\t\trtv.isPKCS1=isPKCS1;</span><br><span class=\"hljs-string\">\t\trtv.hasPrivate=!isPub;</span><br><span class=\"hljs-string\">\t\trtv.pem=pem;</span><br><span class=\"hljs-string\">\t\t</span><br><span class=\"hljs-string\">\t\t//转成CryptoKey</span><br><span class=\"hljs-string\">\t\tvar algorithm,jwk;</span><br><span class=\"hljs-string\">\t\tif(rtv.type==&quot;RSA&quot;)&#123;</span><br><span class=\"hljs-string\">\t\t\talgorithm=&#123; publicExponent: new Uint8Array(rtv.param.n.buffer)</span><br><span class=\"hljs-string\">\t\t\t,name:&quot;RSASSA-PKCS1-v1_5&quot;, modulusLength:+rtv.type2, hash:&quot;SHA-256&quot; &#125;;</span><br><span class=\"hljs-string\">\t\t\tjwk=&#123; kty:&quot;RSA&quot;, alg: &quot;RS256&quot; &#125;;</span><br><span class=\"hljs-string\">\t\t&#125;else if(rtv.type==&quot;ECC&quot;)&#123;</span><br><span class=\"hljs-string\">\t\t\talgorithm=&#123; name:&quot;ECDSA&quot;, namedCurve:rtv.type2 &#125;;</span><br><span class=\"hljs-string\">\t\t\tjwk=&#123; kty:&quot;EC&quot;, crv:rtv.type2 &#125;;</span><br><span class=\"hljs-string\">\t\t&#125;</span><br><span class=\"hljs-string\">\t\tjwk=Object.assign(jwk,&#123; ext:true, key_ops:[isPub?&quot;verify&quot;:&quot;sign&quot;] &#125;);</span><br><span class=\"hljs-string\">\t\tfor(var k in rtv.param)</span><br><span class=\"hljs-string\">\t\t\trtv.param[k]&amp;&amp;( jwk[k]=Bytes2UrlB64(rtv.param[k]) );</span><br><span class=\"hljs-string\">\t\t</span><br><span class=\"hljs-string\">\t\tcrypto.subtle.importKey(</span><br><span class=\"hljs-string\">\t\t\t&quot;jwk&quot;,jwk,algorithm,true,[isPub?&quot;verify&quot;:&quot;sign&quot;]</span><br><span class=\"hljs-string\">\t\t).then(function(key)&#123;</span><br><span class=\"hljs-string\">\t\t\trtv.key=key;</span><br><span class=\"hljs-string\">\t\t\tTrue(rtv);</span><br><span class=\"hljs-string\">\t\t&#125;).catch(function(e)&#123;</span><br><span class=\"hljs-string\">\t\t\tErr(Lang(&#x27;密钥转成CryptoKey失败：&#x27;,&#x27;Failed to convert key to CryptoKey: &#x27;)+e.message);</span><br><span class=\"hljs-string\">\t\t&#125;);</span><br><span class=\"hljs-string\">\t&#125;</span><br><span class=\"hljs-string\">\t//解析出来的公钥转换成JSON Web Key(JWK)</span><br><span class=\"hljs-string\">\t,PublicKeyJwk:function(info)&#123; // https://www.rfc-editor.org/rfc/rfc7638</span><br><span class=\"hljs-string\">\t\tvar p=info.param;</span><br><span class=\"hljs-string\">\t\tif(info.type==&quot;RSA&quot;)&#123;</span><br><span class=\"hljs-string\">\t\t\treturn &#123; e:Bytes2UrlB64(p.e), kty:&quot;RSA&quot;, n:Bytes2UrlB64(p.n) &#125;;</span><br><span class=\"hljs-string\">\t\t&#125;else if(info.type==&quot;ECC&quot;)&#123;</span><br><span class=\"hljs-string\">\t\t\treturn &#123; crv:info.type2, kty:&quot;EC&quot;, x:Bytes2UrlB64(p.x),y:Bytes2UrlB64(p.y) &#125;;</span><br><span class=\"hljs-string\">\t\t&#125;else&#123;</span><br><span class=\"hljs-string\">\t\t\tthrow new Error(&quot;Jwk: &quot;+info.type);</span><br><span class=\"hljs-string\">\t\t&#125;</span><br><span class=\"hljs-string\">\t&#125;</span><br><span class=\"hljs-string\">\t//解析出来的密钥或jwk对象转成PKCS#8格式 publicOnly：提供私钥时仅导出公钥 returnType：1 bytes，2 asn1，other pem</span><br><span class=\"hljs-string\">\t,KeyExport:function(info,publicOnly,returnType)&#123;</span><br><span class=\"hljs-string\">\t\tvar tag=&quot;KeyExport: &quot;, S=ASN1.S,V=ASN1.V; //ASN1快捷创建方式</span><br><span class=\"hljs-string\">\t\tvar param=info.param,type=param&amp;&amp;info.type,type2=info.type2;//解析出来的格式</span><br><span class=\"hljs-string\">\t\tif(!param)&#123;//jwk</span><br><span class=\"hljs-string\">\t\t\tif(info.kty)&#123;</span><br><span class=\"hljs-string\">\t\t\t\ttype=info.kty==&quot;EC&quot;?&quot;ECC&quot;:info.kty;</span><br><span class=\"hljs-string\">\t\t\t\tif(type==&quot;ECC&quot;)type2=info.crv;</span><br><span class=\"hljs-string\">\t\t\t&#125;else throw new Error(tag+&quot;bad key&quot;);</span><br><span class=\"hljs-string\">\t\t&#125;</span><br><span class=\"hljs-string\">\t\tvar keys=(type==&quot;ECC&quot;?&quot;x,y,d&quot;:&quot;n,e,d,p,q,dp,dq,qi&quot;).split(&quot;,&quot;);</span><br><span class=\"hljs-string\">\t\tif(!param)&#123;//jwk参数需转成二进制</span><br><span class=\"hljs-string\">\t\t\tparam=&#123;&#125;;</span><br><span class=\"hljs-string\">\t\t\tfor(var i=0;i&lt;keys.length;i++)&#123;</span><br><span class=\"hljs-string\">\t\t\t\tvar k=keys[i],b64=info[k];</span><br><span class=\"hljs-string\">\t\t\t\tif(b64)param[k]=UrlB642Bytes(b64);</span><br><span class=\"hljs-string\">\t\t\t&#125;</span><br><span class=\"hljs-string\">\t\t&#125;</span><br><span class=\"hljs-string\">\t\tvar useD=!publicOnly&amp;&amp;param.d;//导出私钥</span><br><span class=\"hljs-string\">\t\t</span><br><span class=\"hljs-string\">\t\tvar bytes;//封装参数</span><br><span class=\"hljs-string\">\t\tif(type==&quot;RSA&quot;)&#123;</span><br><span class=\"hljs-string\">\t\t\tvar asn1=S(0x30, V(0x02, param.n), V(0x02, param.e));</span><br><span class=\"hljs-string\">\t\t\tif(useD)&#123;//公钥只需n、e参数，私钥要全部</span><br><span class=\"hljs-string\">\t\t\t\tasn1.sub.splice(0,0,V(0x02, [0]));//开头插入版本号</span><br><span class=\"hljs-string\">\t\t\t\tfor(var i=2;i&lt;keys.length;i++)&#123;</span><br><span class=\"hljs-string\">\t\t\t\t\tasn1.push(V(0x02, param[keys[i]]));</span><br><span class=\"hljs-string\">\t\t\t\t&#125;</span><br><span class=\"hljs-string\">\t\t\t&#125;</span><br><span class=\"hljs-string\">\t\t\tbytes=asn1.toBytes();</span><br><span class=\"hljs-string\">\t\t&#125;else if(type==&quot;ECC&quot;)&#123; //公钥x、y参数，私钥外面再套一层d</span><br><span class=\"hljs-string\">\t\t\tvar pubB=new Uint8Array(1+param.x.length*2); pubB[0]=0x04;</span><br><span class=\"hljs-string\">\t\t\tpubB.set(param.x, 1);</span><br><span class=\"hljs-string\">\t\t\tpubB.set(param.y, 1+param.x.length);</span><br><span class=\"hljs-string\">\t\t\tif(useD)&#123;</span><br><span class=\"hljs-string\">\t\t\t\tbytes=S(0x30, V(0x02,[1]), V(0x04, param.d)</span><br><span class=\"hljs-string\">\t\t\t\t\t, S(0xA1, V(0x03, pubB)) ).toBytes();</span><br><span class=\"hljs-string\">\t\t\t&#125;else bytes=pubB;</span><br><span class=\"hljs-string\">\t\t&#125;else&#123; throw new Error(tag+type); &#125;</span><br><span class=\"hljs-string\">\t\t</span><br><span class=\"hljs-string\">\t\tvar typeASN1=S(0x30 //封装类型</span><br><span class=\"hljs-string\">\t\t\t,V(0x06, ASN1.OID2Bytes(ASN1.OID[type]))</span><br><span class=\"hljs-string\">\t\t\t,type==&quot;RSA&quot;?V(0x05,[])</span><br><span class=\"hljs-string\">\t\t\t\t\t:V(0x06, ASN1.OID2Bytes(ASN1.OID[type2]))</span><br><span class=\"hljs-string\">\t\t);</span><br><span class=\"hljs-string\">\t\t</span><br><span class=\"hljs-string\">\t\tif(useD)&#123;//封装私钥</span><br><span class=\"hljs-string\">\t\t\tvar keyA=S(0x30, V(0x02, [0]), typeASN1, V(0x04, bytes));</span><br><span class=\"hljs-string\">\t\t&#125;else&#123; //封装公钥</span><br><span class=\"hljs-string\">\t\t\tvar keyA=S(0x30 ,typeASN1, V(0x03, bytes));</span><br><span class=\"hljs-string\">\t\t&#125;;</span><br><span class=\"hljs-string\">\t\tif(returnType==2) return keyA;</span><br><span class=\"hljs-string\">\t\tbytes=keyA.toBytes();</span><br><span class=\"hljs-string\">\t\tif(returnType==1) return bytes;</span><br><span class=\"hljs-string\">\t\tvar str=Bytes2Base64(bytes).replace(/(.&#123;64&#125;)/g,&quot;$1\\\\n&quot;).trim();</span><br><span class=\"hljs-string\">\t\tvar sp=useD?&quot;PRIVATE&quot;:&quot;PUBLIC&quot;;</span><br><span class=\"hljs-string\">\t\treturn &#x27;-----BEGIN &#x27;+sp+&#x27; KEY-----\\\\n&#x27;+str+&#x27;\\\\n-----END &#x27;+sp+&#x27; KEY-----&#x27;;</span><br><span class=\"hljs-string\">\t&#125;</span><br><span class=\"hljs-string\">\t</span><br><span class=\"hljs-string\">\t</span><br><span class=\"hljs-string\">\t//创建证书请求CSR，提供私钥用于CSR签名</span><br><span class=\"hljs-string\">\t,CreateCSR:function(keyInfo,commonName,domains,True,False)&#123;</span><br><span class=\"hljs-string\">\t\t//CSR格式：rfc2986，太复杂了，直接拿openssl生成csr用ASN1.ParsePEM来观看格式</span><br><span class=\"hljs-string\">\t\tvar S=ASN1.S,V=ASN1.V; //ASN1快捷创建方式</span><br><span class=\"hljs-string\">\t\t</span><br><span class=\"hljs-string\">\t\t//封装公钥</span><br><span class=\"hljs-string\">\t\ttry&#123;</span><br><span class=\"hljs-string\">\t\t\tvar pubA=X509.KeyExport(keyInfo, true, 2);</span><br><span class=\"hljs-string\">\t\t&#125;catch(e)&#123; return False(e.message) &#125;</span><br><span class=\"hljs-string\">\t\t</span><br><span class=\"hljs-string\">\t\t//封装域名列表扩展属性</span><br><span class=\"hljs-string\">\t\tvar altNameA=S(0x30);</span><br><span class=\"hljs-string\">\t\tfor(var i=0;i&lt;domains.length;i++)</span><br><span class=\"hljs-string\">\t\t\taltNameA.push(V(0x82, Str2Bytes(domains[i])));</span><br><span class=\"hljs-string\">\t\t</span><br><span class=\"hljs-string\">\t\t//组装CSR主体</span><br><span class=\"hljs-string\">\t\tvar bodyA=S(0x30</span><br><span class=\"hljs-string\">\t\t\t,V(0x02, [0]) //版本号 固定值0</span><br><span class=\"hljs-string\">\t\t\t,S(0x30, S(0x31 ,S(0x30 //只提供一个属性：CN</span><br><span class=\"hljs-string\">\t\t\t\t,V(0x06, ASN1.OID2Bytes(&quot;2.5.4.3&quot;))</span><br><span class=\"hljs-string\">\t\t\t\t,V(0x0C, Str2Bytes(commonName))</span><br><span class=\"hljs-string\">\t\t\t)))</span><br><span class=\"hljs-string\">\t\t\t,pubA //公钥</span><br><span class=\"hljs-string\">\t\t\t,S(0xA0, S(0x30 //扩展属性，域名列表</span><br><span class=\"hljs-string\">\t\t\t\t,V(0x06, ASN1.OID2Bytes(&quot;1.2.840.113549.1.9.14&quot;))</span><br><span class=\"hljs-string\">\t\t\t\t,S(0x31, S(0x30, S(0x30</span><br><span class=\"hljs-string\">\t\t\t\t\t,V(0x06, ASN1.OID2Bytes(&quot;2.5.29.17&quot;))</span><br><span class=\"hljs-string\">\t\t\t\t\t,V(0x04, altNameA.toBytes())</span><br><span class=\"hljs-string\">\t\t\t\t)))</span><br><span class=\"hljs-string\">\t\t\t))</span><br><span class=\"hljs-string\">\t\t);</span><br><span class=\"hljs-string\">\t\t</span><br><span class=\"hljs-string\">\t\t//签名生成CSR rfc2315</span><br><span class=\"hljs-string\">\t\tvar bodyBytes=bodyA.toBytes();</span><br><span class=\"hljs-string\">\t\tvar algorithm=&#123;name:&quot;ECDSA&quot;, hash:&quot;SHA-256&quot;&#125;;</span><br><span class=\"hljs-string\">\t\tif(keyInfo.type==&quot;RSA&quot;)&#123;</span><br><span class=\"hljs-string\">\t\t\talgorithm=&#123;name:&quot;RSASSA-PKCS1-v1_5&quot;&#125;</span><br><span class=\"hljs-string\">\t\t&#125;</span><br><span class=\"hljs-string\">\t\tcrypto.subtle.sign(algorithm, keyInfo.key, bodyBytes).then(function(arr)&#123;</span><br><span class=\"hljs-string\">\t\t\tvar signBytes=new Uint8Array(arr);</span><br><span class=\"hljs-string\">\t\t\tif(keyInfo.type==&quot;ECC&quot;)&#123;//ECC分两段重新封装一下</span><br><span class=\"hljs-string\">\t\t\t\tvar s1=signBytes.subarray(0,keyInfo.param.x.length);</span><br><span class=\"hljs-string\">\t\t\t\tvar s2=signBytes.subarray(keyInfo.param.x.length);</span><br><span class=\"hljs-string\">\t\t\t\tsignBytes=S(0x30, V(0x02,s1), V(0x02,s2)).toBytes();</span><br><span class=\"hljs-string\">\t\t\t&#125;</span><br><span class=\"hljs-string\">\t\t\tvar csrA=S(0x30, bodyA</span><br><span class=\"hljs-string\">\t\t\t\t,S(0x30 //签名类型</span><br><span class=\"hljs-string\">\t\t\t\t\t,V(0x06, ASN1.OID2Bytes(ASN1.OID[&quot;SHA256_&quot;+keyInfo.type]))</span><br><span class=\"hljs-string\">\t\t\t\t\t,keyInfo.type==&quot;RSA&quot;?V(0x05,[]):null //ECC没有第二个参数</span><br><span class=\"hljs-string\">\t\t\t\t)</span><br><span class=\"hljs-string\">\t\t\t\t,V(0x03, signBytes)</span><br><span class=\"hljs-string\">\t\t\t);</span><br><span class=\"hljs-string\">\t\t\tvar bytes=csrA.toBytes();</span><br><span class=\"hljs-string\">\t\t\tvar str=Bytes2Base64(bytes).replace(/(.&#123;64&#125;)/g,&quot;$1\\\\n&quot;).trim();</span><br><span class=\"hljs-string\">\t\t\tTrue(&#x27;-----BEGIN CERTIFICATE REQUEST-----\\\\n&#x27;+str+&#x27;\\\\n-----END CERTIFICATE REQUEST-----&#x27;);</span><br><span class=\"hljs-string\">\t\t&#125;).catch(function(e)&#123;</span><br><span class=\"hljs-string\">\t\t\tFalse(&quot;CSR sign:&quot;+e.message);</span><br><span class=\"hljs-string\">\t\t&#125;);</span><br><span class=\"hljs-string\">\t&#125;</span><br><span class=\"hljs-string\">&#125;;</span><br><span class=\"hljs-string\"></span><br><span class=\"hljs-string\"></span><br><span class=\"hljs-string\"></span><br><span class=\"hljs-string\">//简单实现ASN.1解析和封包</span><br><span class=\"hljs-string\">window.ASN1=function(tag, bytes)&#123;</span><br><span class=\"hljs-string\">\tthis.sub=[];</span><br><span class=\"hljs-string\">\tif(tag)this.setTag(tag);</span><br><span class=\"hljs-string\">\tif(bytes)this.setBytes(bytes);</span><br><span class=\"hljs-string\">&#125;;</span><br><span class=\"hljs-string\">ASN1.S=function(tag)&#123; //快捷创建容器类型，并提供任意多个子元素</span><br><span class=\"hljs-string\">\tvar v=new ASN1(tag);</span><br><span class=\"hljs-string\">\tfor(var i=1,a=arguments;i&lt;a.length;i++)&#123;a[i]&amp;&amp;v.push(a[i])&#125;</span><br><span class=\"hljs-string\">\treturn v;</span><br><span class=\"hljs-string\">&#125;;</span><br><span class=\"hljs-string\">ASN1.V=function(tag, bytes)&#123; //快捷创建值类型</span><br><span class=\"hljs-string\">\treturn new ASN1(tag, bytes)\t</span><br><span class=\"hljs-string\">&#125;;</span><br><span class=\"hljs-string\">ASN1.ParsePEM=function(pem)&#123;</span><br><span class=\"hljs-string\">\treturn new ASN1().parsePEM(pem);</span><br><span class=\"hljs-string\">&#125;;</span><br><span class=\"hljs-string\">ASN1.TagNames=&#123;</span><br><span class=\"hljs-string\">\t&#x27;01&#x27;:&#x27;BOOLEAN&#x27;,&#x27;02&#x27;:&#x27;INTEGER&#x27;,&#x27;03&#x27;:&#x27;BIT_STRING&#x27;</span><br><span class=\"hljs-string\">\t,&#x27;04&#x27;:&#x27;OCTET_STRING&#x27;,&#x27;05&#x27;:&#x27;NULL&#x27;,&#x27;06&#x27;:&#x27;OID&#x27;</span><br><span class=\"hljs-string\">\t,&#x27;0C&#x27;:&#x27;UTF8String&#x27;,&#x27;13&#x27;:&#x27;Printable_String&#x27;</span><br><span class=\"hljs-string\">\t,&#x27;17&#x27;:&#x27;UTCTime&#x27;,&#x27;18&#x27;:&#x27;GeneralizedTime&#x27;,&#x27;30&#x27;:&#x27;SEQUENCE&#x27;,&#x27;31&#x27;:&#x27;SET&#x27;</span><br><span class=\"hljs-string\">&#125;;</span><br><span class=\"hljs-string\">ASN1.OID=&#123;</span><br><span class=\"hljs-string\">\t &quot;1.2.840.113549.1.1.1&quot;:&quot;RSA&quot;</span><br><span class=\"hljs-string\">\t,&quot;1.2.840.113549.1.1.11&quot;:&quot;SHA256_RSA&quot;</span><br><span class=\"hljs-string\">\t,&quot;1.2.840.10045.2.1&quot;:&quot;ECC&quot;</span><br><span class=\"hljs-string\">\t,&quot;1.2.840.10045.4.3.2&quot;:&quot;SHA256_ECC&quot;</span><br><span class=\"hljs-string\">\t,&quot;1.2.840.10045.3.1.7&quot;:&quot;P-256&quot; //secp256r1 | prime256v1</span><br><span class=\"hljs-string\">\t,&quot;1.3.132.0.34&quot;:&quot;P-384&quot; //secp384r1</span><br><span class=\"hljs-string\">\t,&quot;1.3.132.0.35&quot;:&quot;P-521&quot; //secp521r1</span><br><span class=\"hljs-string\">&#125;;\tfor(var k in ASN1.OID)ASN1.OID[ASN1.OID[k]]=k;</span><br><span class=\"hljs-string\">ASN1.OID2Bytes=function(oid)&#123;</span><br><span class=\"hljs-string\">\tvar arr = oid.split(&#x27;.&#x27;), byts = [];</span><br><span class=\"hljs-string\">\tvar v0=+arr[0],v1=+arr[1];</span><br><span class=\"hljs-string\">\tif (!/^[\\\\d\\\\.]+$/.test(oid)|| arr.length &lt; 3 || v0 &gt; 2 || v0 * 40 + v1 &gt; 0xff)</span><br><span class=\"hljs-string\">\t\tthrow new Error(&quot;bad oid: &quot;+oid);</span><br><span class=\"hljs-string\">\tbyts.push(v0 * 40 + v1);</span><br><span class=\"hljs-string\">\tfor (var i = 2, len = arr.length; i &lt; len; i++) &#123;</span><br><span class=\"hljs-string\">\t\tvar num = +arr[i], bits = [];</span><br><span class=\"hljs-string\">\t\twhile (num &gt;= 0x80) &#123; bits.push(num % 0x80); num /= 0x80; &#125;</span><br><span class=\"hljs-string\">\t\tbits.push(num); bits.reverse();</span><br><span class=\"hljs-string\">\t\tfor (var j = 0, jl = bits.length - 1; j &lt;= jl; j++) &#123;</span><br><span class=\"hljs-string\">\t\t\tif (j != jl) &#123;</span><br><span class=\"hljs-string\">\t\t\t\tbyts.push(0x80 + bits[j]);</span><br><span class=\"hljs-string\">\t\t\t&#125; else &#123;</span><br><span class=\"hljs-string\">\t\t\t\tbyts.push(bits[j]);</span><br><span class=\"hljs-string\">\t\t\t&#125;</span><br><span class=\"hljs-string\">\t\t&#125;</span><br><span class=\"hljs-string\">\t&#125;</span><br><span class=\"hljs-string\">\treturn new Uint8Array(byts);</span><br><span class=\"hljs-string\">&#125;;</span><br><span class=\"hljs-string\">ASN1.OID2Text=function(bytes)&#123;</span><br><span class=\"hljs-string\">\tvar str = &quot;&quot;, b0 = bytes[0];</span><br><span class=\"hljs-string\">\tvar m = b0 &lt; 80 ? b0 &lt; 40 ? 0 : 1 : 2;</span><br><span class=\"hljs-string\">\tstr+=m+&quot;.&quot;+(b0 - m * 40);</span><br><span class=\"hljs-string\">\tfor (var i = 1, len = bytes.length; i &lt; len; ) &#123;</span><br><span class=\"hljs-string\">\t\tvar num = 0;</span><br><span class=\"hljs-string\">\t\tfor (; i &lt; len; ) &#123;</span><br><span class=\"hljs-string\">\t\t\tvar bit = bytes[i++]; num *= 0x80;</span><br><span class=\"hljs-string\">\t\t\tif (bit &gt;= 0x80) num += bit - 0x80;</span><br><span class=\"hljs-string\">\t\t\telse &#123; num += bit; break; &#125;</span><br><span class=\"hljs-string\">\t\t&#125;</span><br><span class=\"hljs-string\">\t\tstr+=&quot;.&quot;+num;</span><br><span class=\"hljs-string\">\t&#125;</span><br><span class=\"hljs-string\">\treturn str;</span><br><span class=\"hljs-string\">&#125;;</span><br><span class=\"hljs-string\">ASN1.ParseSize=function(pos, bytes)&#123; //简单解析长度数值</span><br><span class=\"hljs-string\">\tvar bitCount=bytes[pos[0]++],size=0;</span><br><span class=\"hljs-string\">\tif(bitCount &lt; 0x80) size=bitCount;</span><br><span class=\"hljs-string\">\telse if(bitCount == 0x80) size=-404; //不定长，需搜索两个0结尾，直接拒绝支持</span><br><span class=\"hljs-string\">\telse for(var i=0,len=bitCount&amp;0x7F;i&lt;len;i++)</span><br><span class=\"hljs-string\">\t\tsize=size*256+bytes[pos[0]++];</span><br><span class=\"hljs-string\">\tif(size&lt;0 || size&gt;bytes.length-pos[0])throw new Error(&quot;ASN.1 Bad size &quot;+size);</span><br><span class=\"hljs-string\">\treturn size;</span><br><span class=\"hljs-string\">&#125;;</span><br><span class=\"hljs-string\">ASN1.ParseBlock=function(pos, bytes, sub)&#123; //简单解析一块子内容</span><br><span class=\"hljs-string\">\tsub=sub||[];</span><br><span class=\"hljs-string\">\twhile(pos[0]&lt;bytes.length)&#123;</span><br><span class=\"hljs-string\">\t\tvar idx0=pos[0],item=new ASN1();</span><br><span class=\"hljs-string\">\t\tvar tag=bytes[pos[0]++],size=ASN1.ParseSize(pos, bytes);</span><br><span class=\"hljs-string\">\t\tif((tag&amp;0x20) != 0)&#123;//结构化容器，嵌套调用</span><br><span class=\"hljs-string\">\t\t\titem.parse(bytes.slice(idx0, pos[0]+size));</span><br><span class=\"hljs-string\">\t\t&#125;else&#123;//普通内容</span><br><span class=\"hljs-string\">\t\t\tvar chunk=bytes.slice(pos[0], pos[0]+size);</span><br><span class=\"hljs-string\">\t\t\tif(tag==0x02 || tag==0x03)&#123;//去掉开头补的0，正整数</span><br><span class=\"hljs-string\">\t\t\t\tif(chunk.length&gt;1 &amp;&amp; chunk[0]==0)&#123;</span><br><span class=\"hljs-string\">\t\t\t\t\tchunk=chunk.slice(1);</span><br><span class=\"hljs-string\">\t\t\t\t&#125;</span><br><span class=\"hljs-string\">\t\t\t&#125;</span><br><span class=\"hljs-string\">\t\t\titem.setTag(tag);</span><br><span class=\"hljs-string\">\t\t\titem.setBytes(chunk);</span><br><span class=\"hljs-string\">\t\t&#125;</span><br><span class=\"hljs-string\">\t\tsub.push(item);</span><br><span class=\"hljs-string\">\t\tpos[0]+=size;</span><br><span class=\"hljs-string\">\t&#125;</span><br><span class=\"hljs-string\">\treturn sub;</span><br><span class=\"hljs-string\">&#125;;</span><br><span class=\"hljs-string\">ASN1.PEM2Bytes=function(pem)&#123;</span><br><span class=\"hljs-string\">\tpem=pem.replace(/[\\\\s\\\\r\\\\n]/g,&quot;&quot;);</span><br><span class=\"hljs-string\">\tvar m=/^-+BEGIN\\\\w*-+([^-]+)-+END\\\\w+-+$/i.exec(pem);</span><br><span class=\"hljs-string\">\ttry&#123;</span><br><span class=\"hljs-string\">\t\treturn Base642Bytes(m[1]);</span><br><span class=\"hljs-string\">\t&#125;catch(e)&#123;</span><br><span class=\"hljs-string\">\t\tthrow new Error(Lang(&#x27;不是pem格式。&#x27;,&#x27;Not a pem format.&#x27;));</span><br><span class=\"hljs-string\">\t&#125;</span><br><span class=\"hljs-string\">&#125;;</span><br><span class=\"hljs-string\">ASN1.prototype=&#123;</span><br><span class=\"hljs-string\">\tsetTag:function(tag)&#123;</span><br><span class=\"hljs-string\">\t\tvar txt=(tag&lt;16?&quot;0&quot;:&quot;&quot;)+tag.toString(16).toUpperCase();</span><br><span class=\"hljs-string\">\t\tthis.tag=tag;</span><br><span class=\"hljs-string\">\t\tthis.tagTxt=txt;</span><br><span class=\"hljs-string\">\t\tthis.tagName=ASN1.TagNames[txt]||&quot;0x&quot;+txt;</span><br><span class=\"hljs-string\">\t&#125;</span><br><span class=\"hljs-string\">\t,setBytes:function(bytes)&#123;</span><br><span class=\"hljs-string\">\t\tif(bytes.length==null||(bytes.slice==null &amp;&amp; bytes.subarray==null))</span><br><span class=\"hljs-string\">\t\t\tthrow new Error(&quot;Not Array&quot;);</span><br><span class=\"hljs-string\">\t\tif(this.tag==0x06) this.oid=ASN1.OID2Text(bytes);</span><br><span class=\"hljs-string\">\t\tif(this.tag==0x0C||this.tag==0x13) this.string=Bytes2Str(bytes);</span><br><span class=\"hljs-string\">\t\tthis.bytes=bytes;</span><br><span class=\"hljs-string\">\t&#125;</span><br><span class=\"hljs-string\">\t,push:function(asn1)&#123;</span><br><span class=\"hljs-string\">\t\tif(!asn1.parsePEM) throw new Error(&quot;Not ASN1&quot;);</span><br><span class=\"hljs-string\">\t\tthis.sub.push(asn1);</span><br><span class=\"hljs-string\">\t\treturn this;</span><br><span class=\"hljs-string\">\t&#125;</span><br><span class=\"hljs-string\">\t,parsePEM:function(pem)&#123;</span><br><span class=\"hljs-string\">\t\treturn this.parse(ASN1.PEM2Bytes(pem));</span><br><span class=\"hljs-string\">\t&#125;</span><br><span class=\"hljs-string\">\t,parse:function(bytes)&#123;</span><br><span class=\"hljs-string\">\t\tvar pos=[0];</span><br><span class=\"hljs-string\">\t\t//最外层必须是个结构化容器，第6位为1，为0为基础类型 https://www.jianshu.com/p/ce7ab5f3f33a</span><br><span class=\"hljs-string\">\t\tif((bytes[0]&amp;0x20) == 0) throw new Error(&quot;ASN.1 parse: Not SEQ&quot;);</span><br><span class=\"hljs-string\">\t\tthis.setTag(bytes[pos[0]++]);</span><br><span class=\"hljs-string\">\t\tvar size=ASN1.ParseSize(pos, bytes);</span><br><span class=\"hljs-string\">\t\tbytes=bytes.slice(pos[0], pos[0]+size);</span><br><span class=\"hljs-string\">\t\tthis.setBytes(bytes);</span><br><span class=\"hljs-string\">\t\t//解析子内容</span><br><span class=\"hljs-string\">\t\tASN1.ParseBlock([0], bytes, this.sub);</span><br><span class=\"hljs-string\">\t\treturn this;</span><br><span class=\"hljs-string\">\t&#125;</span><br><span class=\"hljs-string\">\t,toBytes:function(innerOlny)&#123;</span><br><span class=\"hljs-string\">\t\tvar chunks=[],len=0;</span><br><span class=\"hljs-string\">\t\tif(this.sub.length)&#123;//容器类型，递归调用</span><br><span class=\"hljs-string\">\t\t\tfor(var i=0;i&lt;this.sub.length;i++)&#123;</span><br><span class=\"hljs-string\">\t\t\t\tvar arr=this.sub[i].toBytes();</span><br><span class=\"hljs-string\">\t\t\t\tchunks.push(arr); len+=arr.length;</span><br><span class=\"hljs-string\">\t\t\t&#125;</span><br><span class=\"hljs-string\">\t\t&#125;else if(this.bytes&amp;&amp;this.bytes.length)&#123;//简单类型</span><br><span class=\"hljs-string\">\t\t\tif(this.tag==0x02 &amp;&amp; this.bytes[0] &gt;= 0x80 || this.tag==0x03)&#123;</span><br><span class=\"hljs-string\">\t\t\t\tchunks.push([0]);len++;  //0x02负数 0x03需要开头补0</span><br><span class=\"hljs-string\">\t\t\t&#125;</span><br><span class=\"hljs-string\">\t\t\tchunks.push(this.bytes); len+=this.bytes.length;</span><br><span class=\"hljs-string\">\t\t&#125;</span><br><span class=\"hljs-string\">\t\tif(!innerOlny)&#123;//添加标签和长度</span><br><span class=\"hljs-string\">\t\t\tvar arr=[], num=len;</span><br><span class=\"hljs-string\">\t\t\tif(num&lt;0x80) arr.push(num);</span><br><span class=\"hljs-string\">\t\t\telse &#123;</span><br><span class=\"hljs-string\">\t\t\t\twhile(num&gt;0xff)&#123; arr.push(num&amp;0xff); num=num&gt;&gt;8; &#125;</span><br><span class=\"hljs-string\">\t\t\t\tarr.push(num&amp;0xff); arr.push(0x80+arr.length);</span><br><span class=\"hljs-string\">\t\t\t&#125;</span><br><span class=\"hljs-string\">\t\t\tarr.push(this.tag); arr.reverse();</span><br><span class=\"hljs-string\">\t\t\tchunks.splice(0,0,arr); len+=arr.length;</span><br><span class=\"hljs-string\">\t\t&#125;</span><br><span class=\"hljs-string\">\t\tvar bytes=new Uint8Array(len),n=0;</span><br><span class=\"hljs-string\">\t\tfor(var i=0;i&lt;chunks.length;i++)&#123;</span><br><span class=\"hljs-string\">\t\t\tvar arr=chunks[i];</span><br><span class=\"hljs-string\">\t\t\tbytes.set(arr, n); n+=arr.length;</span><br><span class=\"hljs-string\">\t\t&#125;</span><br><span class=\"hljs-string\">\t\treturn bytes;</span><br><span class=\"hljs-string\">\t&#125;</span><br><span class=\"hljs-string\">&#125;;</span><br><span class=\"hljs-string\"></span><br><span class=\"hljs-string\">&#125;)();</span><br><span class=\"hljs-string\">&lt;/script&gt;</span><br><span class=\"hljs-string\"></span><br><span class=\"hljs-string\"></span><br><span class=\"hljs-string\"></span><br><span class=\"hljs-string\"></span><br><span class=\"hljs-string\"></span><br><span class=\"hljs-string\"></span><br><span class=\"hljs-string\"></span><br><span class=\"hljs-string\">&lt;script&gt;</span><br><span class=\"hljs-string\">//===========================================================</span><br><span class=\"hljs-string\">//================= Common functions ==================</span><br><span class=\"hljs-string\">//===========================================================</span><br><span class=\"hljs-string\">//LICENSE: GPL-3.0, https://github.com/xiangyuecn/ACME-HTML-Web-Browser-Client</span><br><span class=\"hljs-string\">(function()&#123;</span><br><span class=\"hljs-string\">&quot;use strict&quot;;</span><br><span class=\"hljs-string\"></span><br><span class=\"hljs-string\">/************** Language **************/</span><br><span class=\"hljs-string\">window.LangCur=/\\\\b(zh|cn)\\\\b/i.test(navigator.language)?&quot;cn&quot;:&quot;en&quot;;</span><br><span class=\"hljs-string\">window.Lang=function(cn,en,txt)&#123;</span><br><span class=\"hljs-string\">\tif((cn||en) &amp;&amp; (!cn||!en))throw new Error(&quot;Lang bad args&quot;);</span><br><span class=\"hljs-string\">\tif(txt)return LangCur==&quot;cn&quot;?cn:en;</span><br><span class=\"hljs-string\">\tvar html=&quot;&quot;,ks=&#123;cn:cn,en:en&#125;;</span><br><span class=\"hljs-string\">\tfor(var k in ks)&#123;</span><br><span class=\"hljs-string\">\t\thtml+=(LangCur!=k?&#x27;&lt;!--LangHide1--&gt;&#x27;:&#x27;&#x27;)</span><br><span class=\"hljs-string\">\t\t\t+&#x27;&lt;span class=&quot;lang&#x27;+k.toUpperCase()</span><br><span class=\"hljs-string\">\t\t\t+&#x27;&quot; style=&quot;&#x27;+(LangCur==k?&#x27;&#x27;:&#x27;display:none&#x27;)</span><br><span class=\"hljs-string\">\t\t\t+&#x27;&quot;&gt;&#x27;+ks[k]+&#x27;&lt;/span&gt;&#x27;</span><br><span class=\"hljs-string\">\t\t\t+(LangCur!=k?&#x27;&lt;!--LangHide2--&gt;&#x27;:&#x27;&#x27;);</span><br><span class=\"hljs-string\">\t&#125;</span><br><span class=\"hljs-string\">\treturn html;</span><br><span class=\"hljs-string\">&#125;;</span><br><span class=\"hljs-string\">window.LangReview=function(cls)&#123;</span><br><span class=\"hljs-string\">\tvar el=$(cls||&quot;body&quot;);</span><br><span class=\"hljs-string\">\tel.find(&quot;.langCN&quot;)[LangCur==&quot;cn&quot;?&quot;show&quot;:&quot;hide&quot;]();</span><br><span class=\"hljs-string\">\tel.find(&quot;.langEN&quot;)[LangCur!=&quot;cn&quot;?&quot;show&quot;:&quot;hide&quot;]();</span><br><span class=\"hljs-string\">\tvar inputs=el.find(&quot;.inputLang&quot;);</span><br><span class=\"hljs-string\">\tfor(var i=0;i&lt;inputs.length;i++)</span><br><span class=\"hljs-string\">\t\tinputs[i].setAttribute(&quot;placeholder&quot;,inputs[i].getAttribute(&quot;placeholder-&quot;+LangCur));</span><br><span class=\"hljs-string\">&#125;;</span><br><span class=\"hljs-string\">window.LangClick=function(lang)&#123;</span><br><span class=\"hljs-string\">\tLangCur=lang;</span><br><span class=\"hljs-string\">\tLangReview();</span><br><span class=\"hljs-string\">\t$(&quot;.langBtn&quot;).css(&quot;color&quot;,null);</span><br><span class=\"hljs-string\">\t$(&quot;.langBtn_&quot;+lang).css(&quot;color&quot;,&quot;#000&quot;);</span><br><span class=\"hljs-string\">\t$(&quot;body&quot;).css(&quot;wordBreak&quot;,lang==&quot;cn&quot;?&quot;break-all&quot;:null);</span><br><span class=\"hljs-string\">\t</span><br><span class=\"hljs-string\">\tif(!document.titleLang)document.titleLang=document.title;</span><br><span class=\"hljs-string\">\tvar arr=document.titleLang.split(&quot;|&quot;),t1=[],t2=[];</span><br><span class=\"hljs-string\">\tfor(var i=0;i&lt;arr.length;i++)</span><br><span class=\"hljs-string\">\t\tif(/[^\\\\x00-\\\\xff]/.test(arr[i]) == (LangCur==&quot;cn&quot;))t1.push(arr[i].trim());</span><br><span class=\"hljs-string\">\t\telse t2.push(arr[i].trim());</span><br><span class=\"hljs-string\">\tdocument.title=t1.concat(t2).join(&quot; | &quot;);</span><br><span class=\"hljs-string\">&#125;;</span><br><span class=\"hljs-string\"></span><br><span class=\"hljs-string\"></span><br><span class=\"hljs-string\">/************** Console log output **************/</span><br><span class=\"hljs-string\">window.CLog=function(tag, color, msg)&#123;</span><br><span class=\"hljs-string\">\tvar now=new Date();</span><br><span class=\"hljs-string\">\tvar t=(&quot;0&quot;+now.getMinutes()).substr(-2)</span><br><span class=\"hljs-string\">\t\t+&quot;:&quot;+(&quot;0&quot;+now.getSeconds()).substr(-2)</span><br><span class=\"hljs-string\">\t\t+&quot;.&quot;+(&quot;00&quot;+now.getMilliseconds()).substr(-3);</span><br><span class=\"hljs-string\">\tmsg=msg.replace(/&lt;!--LangHide1[\\\\S\\\\s]+?LangHide2--&gt;/g,&quot;&quot;);//去掉没有显示的语言</span><br><span class=\"hljs-string\">\tmsg=msg.replace(/&lt;[^&gt;]+&gt;/g,&quot;&quot;);</span><br><span class=\"hljs-string\">\tvar arr=[&quot;[&quot;+t+&quot; &quot;+tag+&quot;]&quot;+msg];</span><br><span class=\"hljs-string\">\tfor(var i=3;i&lt;arguments.length;i++)&#123;</span><br><span class=\"hljs-string\">\t\tarr.push(arguments[i]);</span><br><span class=\"hljs-string\">\t&#125;;</span><br><span class=\"hljs-string\">\tvar fn=color==1?console.error:color==3?console.warn:color==4?console.debug:console.log;</span><br><span class=\"hljs-string\">\tfn.apply(console,arr);</span><br><span class=\"hljs-string\">\treturn msg;</span><br><span class=\"hljs-string\">&#125;;</span><br><span class=\"hljs-string\"></span><br><span class=\"hljs-string\"></span><br><span class=\"hljs-string\">/************** $ Selector / like jQuery **************/</span><br><span class=\"hljs-string\">(function()&#123;</span><br><span class=\"hljs-string\">window.$=function(cls)&#123; if(cls&amp;&amp;cls.is$) return cls; return new fn(cls) &#125;</span><br><span class=\"hljs-string\">var fn=function(cls,node)&#123;</span><br><span class=\"hljs-string\">\tthis.length=0;</span><br><span class=\"hljs-string\">\tif(!cls)return;</span><br><span class=\"hljs-string\">\tif(cls.appendChild)&#123;this.push(cls); return&#125;</span><br><span class=\"hljs-string\">\tvar arr=(node||document).querySelectorAll(cls);</span><br><span class=\"hljs-string\">\tfor(var i=0;i&lt;arr.length;i++)this.push(arr[i]);</span><br><span class=\"hljs-string\">&#125;;</span><br><span class=\"hljs-string\">fn.prototype=&#123;</span><br><span class=\"hljs-string\">\tis$:1</span><br><span class=\"hljs-string\">\t,push:function(val)&#123; this[this.length++]=val &#125;</span><br><span class=\"hljs-string\">\t,find:function(cls)&#123; var el0=this[0]; return new fn(el0?cls:&quot;&quot;,el0) &#125;</span><br><span class=\"hljs-string\">\t,val:function(val)&#123; return this.prop(&quot;value&quot;,val) &#125;</span><br><span class=\"hljs-string\">\t,hide:function()&#123; return this.css(&quot;display&quot;,&quot;none&quot;) &#125;</span><br><span class=\"hljs-string\">\t,show:function(display)&#123; return this.css(&quot;display&quot;,display===undefined?null:display) &#125;</span><br><span class=\"hljs-string\">\t</span><br><span class=\"hljs-string\">\t,html:function(html)&#123;</span><br><span class=\"hljs-string\">\t\tvar el0=this[0];</span><br><span class=\"hljs-string\">\t\tif(html===undefined)return el0&amp;&amp;el0.innerHTML||&quot;&quot;;</span><br><span class=\"hljs-string\">\t\tfor(var i=0;i&lt;this.length;i++) this[i].innerHTML=html;</span><br><span class=\"hljs-string\">\t\treturn this;</span><br><span class=\"hljs-string\">\t&#125;</span><br><span class=\"hljs-string\">\t,append:function(html)&#123; return this._end(html) &#125;</span><br><span class=\"hljs-string\">\t,prepend:function(html)&#123; return this._end(html,1) &#125;</span><br><span class=\"hljs-string\">\t,_end:function(html,prep)&#123;</span><br><span class=\"hljs-string\">\t\tvar el0=this[0];</span><br><span class=\"hljs-string\">\t\tif(html &amp;&amp; el0)&#123;</span><br><span class=\"hljs-string\">\t\t\tvar nodes=html;</span><br><span class=\"hljs-string\">\t\t\tif(typeof(html)==&quot;string&quot;)&#123;</span><br><span class=\"hljs-string\">\t\t\t\tvar div=document.createElement(&quot;div&quot;);</span><br><span class=\"hljs-string\">\t\t\t\tdiv.innerHTML=html;</span><br><span class=\"hljs-string\">\t\t\t\tnodes=[];</span><br><span class=\"hljs-string\">\t\t\t\tfor(var i=0;i&lt;div.childNodes.length;i++)nodes.push(div.childNodes[i]);</span><br><span class=\"hljs-string\">\t\t\t&#125;else if(html.appendChild)&#123;</span><br><span class=\"hljs-string\">\t\t\t\tnodes=[html];</span><br><span class=\"hljs-string\">\t\t\t&#125;</span><br><span class=\"hljs-string\">\t\t\tif(prep)prep=el0.firstChild;</span><br><span class=\"hljs-string\">\t\t\tfor(var i=0;i&lt;nodes.length;i++)&#123;</span><br><span class=\"hljs-string\">\t\t\t\tif(prep) el0.insertBefore(nodes[i],prep);</span><br><span class=\"hljs-string\">\t\t\t\telse el0.appendChild(nodes[i])</span><br><span class=\"hljs-string\">\t\t\t&#125;</span><br><span class=\"hljs-string\">\t\t&#125;</span><br><span class=\"hljs-string\">\t\treturn this;</span><br><span class=\"hljs-string\">\t&#125;</span><br><span class=\"hljs-string\">\t,prop:function(key,val)&#123;</span><br><span class=\"hljs-string\">\t\tvar el0=this[0];</span><br><span class=\"hljs-string\">\t\tif(val===undefined)return el0&amp;&amp;el0[key];</span><br><span class=\"hljs-string\">\t\tfor(var i=0;i&lt;this.length;i++) this[i][key]=val;</span><br><span class=\"hljs-string\">\t\treturn this;</span><br><span class=\"hljs-string\">\t&#125;</span><br><span class=\"hljs-string\">\t,attr:function(key,val)&#123;</span><br><span class=\"hljs-string\">\t\tvar el0=this[0];</span><br><span class=\"hljs-string\">\t\tif(val===undefined)return el0&amp;&amp;el0.getAttribute(key);</span><br><span class=\"hljs-string\">\t\tfor(var i=0;i&lt;this.length;i++)&#123;</span><br><span class=\"hljs-string\">\t\t\tif(val==null) this[i].removeAttribute(key);</span><br><span class=\"hljs-string\">\t\t\telse this[i].setAttribute(key,val);</span><br><span class=\"hljs-string\">\t\t&#125;</span><br><span class=\"hljs-string\">\t\treturn this;</span><br><span class=\"hljs-string\">\t&#125;</span><br><span class=\"hljs-string\">\t,css:function(key,val)&#123;</span><br><span class=\"hljs-string\">\t\tfor(var i=0;i&lt;this.length;i++)</span><br><span class=\"hljs-string\">\t\t\tthis[i].style[key]=val;</span><br><span class=\"hljs-string\">\t\treturn this;</span><br><span class=\"hljs-string\">\t&#125;</span><br><span class=\"hljs-string\">\t,bind:function(type,fn)&#123;</span><br><span class=\"hljs-string\">\t\tfor(var i=0;i&lt;this.length;i++)</span><br><span class=\"hljs-string\">\t\t\tthis[i].addEventListener(type,fn);</span><br><span class=\"hljs-string\">\t\treturn this;</span><br><span class=\"hljs-string\">\t&#125;</span><br><span class=\"hljs-string\">&#125;;</span><br><span class=\"hljs-string\">&#125;)();</span><br><span class=\"hljs-string\"></span><br><span class=\"hljs-string\"></span><br><span class=\"hljs-string\">/************** functions **************/</span><br><span class=\"hljs-string\">window.FormatText=function(str)&#123;</span><br><span class=\"hljs-string\">\treturn str.replace(/[&amp;&lt;&gt;=&#x27;&quot;]/g,function(a)&#123; return &quot;&amp;#&quot; + a.charCodeAt(0) + &quot;;&quot; &#125;);</span><br><span class=\"hljs-string\">&#125;;</span><br><span class=\"hljs-string\"></span><br><span class=\"hljs-string\">window.Str2Bytes=function(str)&#123;</span><br><span class=\"hljs-string\">\tstr=unescape(encodeURIComponent(str));</span><br><span class=\"hljs-string\">\tvar u8arr=new Uint8Array(str.length);</span><br><span class=\"hljs-string\">\tfor(var i=0;i&lt;str.length;i++)u8arr[i]=str.charCodeAt(i);</span><br><span class=\"hljs-string\">\treturn u8arr;</span><br><span class=\"hljs-string\">&#125;;</span><br><span class=\"hljs-string\">window.Bytes2Str=function(bytes)&#123;</span><br><span class=\"hljs-string\">\tvar str=&quot;&quot;;</span><br><span class=\"hljs-string\">\tfor(var i=0;i&lt;bytes.length;i++) str+=String.fromCharCode(bytes[i]);</span><br><span class=\"hljs-string\">\treturn decodeURIComponent(escape(str));</span><br><span class=\"hljs-string\">&#125;;</span><br><span class=\"hljs-string\">window.Json2UrlB64=function(data)&#123;</span><br><span class=\"hljs-string\">\treturn Bytes2UrlB64(JSON.stringify(data));</span><br><span class=\"hljs-string\">&#125;;</span><br><span class=\"hljs-string\">window.Base642Bytes=function(b64)&#123;</span><br><span class=\"hljs-string\">\tvar str=atob(b64);</span><br><span class=\"hljs-string\">\tvar u8arr=new Uint8Array(str.length);</span><br><span class=\"hljs-string\">\tfor(var i=0;i&lt;str.length;i++)u8arr[i]=str.charCodeAt(i);</span><br><span class=\"hljs-string\">\treturn u8arr;</span><br><span class=\"hljs-string\">&#125;;</span><br><span class=\"hljs-string\">window.UrlB642Bytes=function(str)&#123;</span><br><span class=\"hljs-string\">\tstr=str.replace(/_/g,&quot;\\\\/&quot;).replace(/-/g,&quot;+&quot;);</span><br><span class=\"hljs-string\">\twhile(str.length%4)str+=&quot;=&quot;;</span><br><span class=\"hljs-string\">\treturn Base642Bytes(str);</span><br><span class=\"hljs-string\">&#125;;</span><br><span class=\"hljs-string\">window.Bytes2UrlB64=function(bytes)&#123;//二进制数组转成url base64</span><br><span class=\"hljs-string\">\treturn Bytes2Base64(bytes).replace(/\\\\//g,&quot;_&quot;).replace(/\\\\+/g,&quot;-&quot;).replace(/=/g,&quot;&quot;);</span><br><span class=\"hljs-string\">&#125;;</span><br><span class=\"hljs-string\">window.Bytes2Base64=function(bytes)&#123;</span><br><span class=\"hljs-string\">\tvar str=&quot;&quot;;</span><br><span class=\"hljs-string\">\tif(typeof(bytes)==&quot;string&quot;)&#123;</span><br><span class=\"hljs-string\">\t\tstr=unescape(encodeURIComponent(bytes));</span><br><span class=\"hljs-string\">\t&#125;else&#123;</span><br><span class=\"hljs-string\">\t\tif(bytes instanceof ArrayBuffer) bytes=new Uint8Array(bytes);</span><br><span class=\"hljs-string\">\t\tfor(var i=0;i&lt;bytes.length;i++) str+=String.fromCharCode(bytes[i]);</span><br><span class=\"hljs-string\">\t&#125;</span><br><span class=\"hljs-string\">\treturn btoa(str);</span><br><span class=\"hljs-string\">&#125;;</span><br><span class=\"hljs-string\"></span><br><span class=\"hljs-string\">&#125;)();</span><br><span class=\"hljs-string\">&lt;/script&gt;</span><br><span class=\"hljs-string\"></span><br><span class=\"hljs-string\"></span><br><span class=\"hljs-string\">&lt;script&gt;</span><br><span class=\"hljs-string\">//===========================================</span><br><span class=\"hljs-string\">//================= Launch ==================</span><br><span class=\"hljs-string\">//===========================================</span><br><span class=\"hljs-string\">//LICENSE: GPL-3.0, https://github.com/xiangyuecn/ACME-HTML-Web-Browser-Client</span><br><span class=\"hljs-string\">(function()&#123;</span><br><span class=\"hljs-string\">&quot;use strict&quot;;</span><br><span class=\"hljs-string\"></span><br><span class=\"hljs-string\">var msg=&quot;&quot;;</span><br><span class=\"hljs-string\">try&#123;</span><br><span class=\"hljs-string\">\twindow.PageRawHTML=window.PageRawHTML||document.documentElement.outerHTML;</span><br><span class=\"hljs-string\">\tif(window.top!=window)&#123;</span><br><span class=\"hljs-string\">\t\tmsg=Lang(</span><br><span class=\"hljs-string\">\t\t\t &#x27;不允许在IFrame内显示本页面，请直接通过网址访问！&#x27;</span><br><span class=\"hljs-string\">\t\t\t,&#x27;This page is not allowed to be displayed in IFrame, please visit it directly through the website!&#x27;);</span><br><span class=\"hljs-string\">\t\tthrow new Error();</span><br><span class=\"hljs-string\">\t&#125;</span><br><span class=\"hljs-string\">\tvar SupportCrypto=false;</span><br><span class=\"hljs-string\">\teval(&#x27;SupportCrypto=!!crypto.subtle.sign&#x27;);</span><br><span class=\"hljs-string\">\teval(&#x27;\\`\\`;(async function()&#123;class a&#123;&#125;&#125;)&#x27;);</span><br><span class=\"hljs-string\">&#125;catch(e)&#123;</span><br><span class=\"hljs-string\">\tif(!msg &amp;&amp; !SupportCrypto &amp;&amp; window.isSecureContext===false)&#123;</span><br><span class=\"hljs-string\">\t\tmsg=Lang(&#x27;浏览器禁止不安全页面调用Crypto功能，可开启https解决，或使用localhost、file://访问&#x27;, &#x27;The browser prohibits unsafe pages from calling Crypto function. You can enable https to solve the problem, or use localhost, file:// to access&#x27;);</span><br><span class=\"hljs-string\">\t&#125;</span><br><span class=\"hljs-string\">\tif(!msg)&#123;</span><br><span class=\"hljs-string\">\t\tmsg=Lang(&#x27;浏览器版本太低&#x27;+(SupportCrypto?&#x27;&#x27;:&#x27;（不支持Crypto）&#x27;)+&#x27;，请换一个浏览器再试！&#x27;, &#x27;The browser version is too low&#x27;+(SupportCrypto?&#x27;&#x27;:&#x27; (Crypto is not supported)&#x27;)+&#x27;. Please change another browser and try again!&#x27;);</span><br><span class=\"hljs-string\">\t&#125;</span><br><span class=\"hljs-string\">\tdocument.body.innerHTML=&#x27;&lt;div style=&quot;font-size:32px;color:red;font-weight:bold;text-align:center;padding-top:100px&quot;&gt;&#x27;+msg+&#x27;&lt;/div&gt;&#x27;;</span><br><span class=\"hljs-string\">\treturn;</span><br><span class=\"hljs-string\">&#125;</span><br><span class=\"hljs-string\">$(&quot;.main&quot;).html($(&quot;.main&quot;).html()); //彻底干掉输入框自动完成</span><br><span class=\"hljs-string\">$(&quot;input,textarea,select&quot;).attr(&quot;autocomplete&quot;,&quot;off&quot;);</span><br><span class=\"hljs-string\"></span><br><span class=\"hljs-string\">$(&quot;.main-load&quot;).hide();</span><br><span class=\"hljs-string\">$(&quot;.main&quot;).show();</span><br><span class=\"hljs-string\">LangClick(LangCur);</span><br><span class=\"hljs-string\"></span><br><span class=\"hljs-string\">initMainUI();</span><br><span class=\"hljs-string\"></span><br><span class=\"hljs-string\">&#125;)();</span><br><span class=\"hljs-string\">&lt;/script&gt;&lt;/body&gt;&lt;/html&gt;`</span>;<br>(<span class=\"hljs-keyword\">function</span>(<span class=\"hljs-params\"></span>)&#123;<br>\t\t<span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">clear</span>();<br>\t\t<span class=\"hljs-variable language_\">document</span>.<span class=\"hljs-property\">head</span>.<span class=\"hljs-property\">innerHTML</span>=<span class=\"hljs-regexp\">/&lt;head[^&gt;]*&gt;([\\S\\s]+?)&lt;\\/head&gt;/i</span>.<span class=\"hljs-title function_\">exec</span>(<span class=\"hljs-title class_\">PageRawHTML</span>)[<span class=\"hljs-number\">1</span>];<br>\t\t<span class=\"hljs-variable language_\">document</span>.<span class=\"hljs-property\">body</span>.<span class=\"hljs-property\">innerHTML</span>=<span class=\"hljs-regexp\">/&lt;body[^&gt;]*&gt;([\\S\\s]+)&lt;\\/body&gt;/i</span>.<span class=\"hljs-title function_\">exec</span>(<span class=\"hljs-title class_\">PageRawHTML</span>)[<span class=\"hljs-number\">1</span>];<br>\t\t<span class=\"hljs-keyword\">var</span> js=<span class=\"hljs-regexp\">/&lt;script[^&gt;]*&gt;([\\S\\s]+?)&lt;\\/script&gt;/ig</span>,m;<br>\t\t<span class=\"hljs-keyword\">while</span>(m=js.<span class=\"hljs-title function_\">exec</span>(<span class=\"hljs-title class_\">PageRawHTML</span>)) <span class=\"hljs-built_in\">eval</span>.<span class=\"hljs-title function_\">call</span>(<span class=\"hljs-variable language_\">window</span>, m[<span class=\"hljs-number\">1</span>]);<br>\t&#125;)()<br></code></pre></td></tr></table></figure>\n\n\n\n<p>等待出现：<strong>读取服务目录成功，</strong>请进行下一步操作。 URL&#x3D;<a href=\"https://acme.zerossl.com/v2/DV90/directory\">https://acme.zerossl.com/v2/DV90/directory</a></p>\n<p>即已经选择ZeroSSL作为服务商。</p>\n<h3 id=\"步骤二：证书配置\"><a href=\"#步骤二：证书配置\" class=\"headerlink\" title=\"步骤二：证书配置\"></a>步骤二：证书配置</h3><p>提示：如果上次申请过证书，可以拖拽已下载保存的记录LOG文件到本页面，将自动填充上次的配置信息。</p>\n<p>在“证书中要包含的域名：”中填写你要签发的域名。</p>\n<p>泛域名填写方式：example.com,*.example.com</p>\n<p>单域名填写方式：<a href=\"http://www.example.com/\">www.example.com</a></p>\n<p>多域名合并：<a href=\"http://www.example.com,site1.example.com,site2.example.com/\">www.example.com,site1.example.com,site2.example.com</a></p>\n<p><code>带通配符的域名只支持DNS验证，其他域名支持上传文件验证</code></p>\n<p>在 <code>证书的私钥：</code>处一般选择 <code>创建新RSA私钥</code>或 <code>创建新ECC私钥</code>，根据证书的加密形式而定。</p>\n<p>在 <code>ACME账户的私钥：</code>处一般选择 <code>创建新RSA私钥 </code>或 <code>创建新ECC私钥 </code>，根据证书的加密形式而定。</p>\n<p>在 <code> ACME账户的联系邮箱：</code>处填写你的邮箱，该邮箱必须真实存在。</p>\n<h3 id=\"步骤三：验证域名所有权\"><a href=\"#步骤三：验证域名所有权\" class=\"headerlink\" title=\"步骤三：验证域名所有权\"></a>步骤三：验证域名所有权</h3><p>请给每个域名选择一个你合适的验证方式，泛域名只能使用DNS解析方式。</p>\n<p>DNS解析方式：登陆到你的解析提供平台，如DNSPod，CloudFlare等，添加一条或多条TXT记录。</p>\n<p>文件验证方式：仅限单域名，在你域名所属的文件目录下 创建 <code>/.well-known/acme-challenge/</code>目录并在内创建验证文件。</p>\n<p>TLS-ALPN-01：使用Key Authorizations (Token+.+指纹)自行处理，Digest为Key Authorizations的SHA-256 Base64值。</p>\n<p>完成后，点击“开始验证”即可验证。</p>\n<h2 id=\"步骤四：下载保存证书PEM文件\"><a href=\"#步骤四：下载保存证书PEM文件\" class=\"headerlink\" title=\"步骤四：下载保存证书PEM文件\"></a>步骤四：下载保存证书PEM文件</h2><p>完成验证后，服务端会自动签发SSL证书，点击下载即可下载证书对应私钥，公钥和Log文件。</p>\n<h3 id=\"其他提示\"><a href=\"#其他提示\" class=\"headerlink\" title=\"其他提示\"></a>其他提示</h3><p>1.你需要其他格式的证书文件？</p>\n<p>大部分服务器程序支持直接使用 your_domain.pem+your_domain.key 来配置开启HTTPS（比如Nginx），如果你需要 <em>.pfx、</em>.p12 格式的证书（比如用于IIS），请用下面命令将PEM证书转换成 pfx&#x2F;p12 格式：</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs shell\">openssl pkcs12 -export -out your_domain.pfx -inkey your_domain.key -in your_domain.pem<br></code></pre></td></tr></table></figure>\n\n<p>2.IIS证书链缺失？</p>\n<p>对于Windows IIS服务器，你需要将证书链安装到“本地计算机”的“中间证书颁发机构”中；请将PEM证书中的所有证书拆分成单个PEM文件（后缀改成.crt或.cer），然后将系统中缺失的中间证书双击打开然后安装进去；详细参考： <a href=\"http://support.microsoft.com/kb/954755\">http://support.microsoft.com/kb/954755</a></p>\n","excerpt":"","more":"<h2 id=\"引入\"><a href=\"#引入\" class=\"headerlink\" title=\"引入\"></a>引入</h2><p>现如今，向像腾讯，阿里云等大厂的免费SSL证书，都由一年缩短为3个月。</p>\n<p><a href=\"https://cloud.tencent.com/document/product/400/104538\">https://cloud.tencent.com/document/product/400/104538</a></p>\n<p>在如今的形式下，签发免费的3个月的单域名证书显然不如直接签发Let’s Encrypt、ZeroSSL等ACME提供的泛域名证书来的方便。</p>\n<p>而acme.sh常用于Linux端上证书的自动化签发与续约，对于不使用服务器的人群，显然造成了许多麻烦，那么可以通过Web端直接签发这些ACME的泛域名证书吗？</p>\n<p>Github开源项目ACME-Web-Browser-Client告诉了我们这并非是一件不可能实现的事情。</p>\n<p>简介：</p>\n<p>本网页客户端（仅一个静态HTML网页文件）用于：向 Let’s Encrypt、ZeroSSL、Google 等支持 ACME 协议的证书颁发机构，免费申请获得用于 HTTPS 的 SSL&#x2F;TLS 域名证书（RSA、ECC&#x2F;ECDSA），支持多域名和通配符泛域名；只需在现代浏览器上操作即可获得 PEM 格式纯文本的域名证书，不依赖操作系统环境（Windows、macOS都能用），无需下载和安装软件，无需注册登录，纯手动操作，只专注于申请获得证书这一件事，简单易用，非常适用于希望手动快捷申请获得证书的使用场景。</p>\n<p>Github开源地址：<a href=\"https://github.com/xiangyuecn/ACME-HTML-Web-Browser-Client\">https://github.com/xiangyuecn/ACME-HTML-Web-Browser-Client</a></p>\n<p>Gitee开源地址：</p>\n<p><a href=\"https://gitee.com/xiangyuecn/ACME-HTML-Web-Browser-Client\">https://gitee.com/xiangyuecn/ACME-HTML-Web-Browser-Client</a></p>\n<h2 id=\"使用\"><a href=\"#使用\" class=\"headerlink\" title=\"使用\"></a>使用</h2><p>提示：可将其私有化部署到Vercel，Netlify等上，可弥补Github Pages速度的不足。</p>\n<p>任意点击下列一个网页使用：</p>\n<p><a href=\"https://xiangyuecn.github.io/ACME-HTML-Web-Browser-Client/ACME-HTML-Web-Browser-Client.html\">https://xiangyuecn.github.io/ACME-HTML-Web-Browser-Client/ACME-HTML-Web-Browser-Client.html</a> （作者Github Pages）</p>\n<p><a href=\"https://ssl.dev.inkdust.top/\">https://ssl.dev.inkdust.top/</a> （本人Vercel）</p>\n<h2 id=\"签发ZeroSSL\"><a href=\"#签发ZeroSSL\" class=\"headerlink\" title=\"签发ZeroSSL\"></a>签发ZeroSSL</h2><p>本文为签发ZeroSSL篇教程，签发Let’s Encrypt或Google，请看Let’s Encrypt篇和Google篇。</p>\n<h3 id=\"步骤一：注册ZeroSSL\"><a href=\"#步骤一：注册ZeroSSL\" class=\"headerlink\" title=\"步骤一：注册ZeroSSL\"></a>步骤一：注册ZeroSSL</h3><p>来到<a href=\"https://zerossl.com/\">https://zerossl.com/</a></p>\n<p>注册ZeroSSL，请使用魔法网络环境，如无法使用魔法网络环境，请使用<code>Header Eidtor</code> 来将 <code>reCAPTCHA</code>的地址重写到国内镜像。</p>\n<p>Header Eidtor谷歌商店：<a href=\"https://chromewebstore.google.com/detail/header-editor/eningockdidmgiojffjmkdblpjocbhgh?hl=zh-CN&utm_source=ext_sidebar\">https://chromewebstore.google.com/detail/header-editor/eningockdidmgiojffjmkdblpjocbhgh?hl=zh-CN&amp;utm_source=ext_sidebar</a></p>\n<p>Header Eidtor Edge商店：<a href=\"https://microsoftedge.microsoft.com/addons/detail/header-editor/djbcdihpmcbpkljpjibeiedjenilallo\">https://microsoftedge.microsoft.com/addons/detail/header-editor/djbcdihpmcbpkljpjibeiedjenilallo</a></p>\n<p>Header Eidtor Crx搜搜：<a href=\"https://www.crxsoso.com/webstore/detail/eningockdidmgiojffjmkdblpjocbhgh\">https://www.crxsoso.com/webstore/detail/eningockdidmgiojffjmkdblpjocbhgh</a><br><img src=\"https://cdnn.boochi.cn/gh/inkdust-dev/ink-oss@main/qexo-upload/24/8/image_38fa68a496e6a63cd50b294b0776d192.png\" alt=\"https://cdnn.boochi.cn/gh/inkdust-dev/ink-oss@main/qexo-upload/24/8/image_38fa68a496e6a63cd50b294b0776d192.png\"></p>\n<p>重写规则：</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs plaintext\">名称：reCAPTCHA<br><br>匹配类型：正则表达式<br><br>规则类型：重定向规则<br><br>匹配规则：^http(s?)://(?:www\\.|recaptcha\\.|)google\\.com/recaptcha/(.*)<br><br>执行类型：常规<br><br>重定向至：https://recaptcha.net/recaptcha/$2<br></code></pre></td></tr></table></figure>\n\n<p>导入TXT文件：</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs plaintext\">&#123;<br>\t&quot;request&quot;: [],<br>\t&quot;sendHeader&quot;: [],<br>\t&quot;receiveHeader&quot;: [<br>\t\t&#123;<br>\t\t\t&quot;enable&quot;: false,<br>\t\t\t&quot;name&quot;: &quot;Content Security Policy Header Modification&quot;,<br>\t\t\t&quot;ruleType&quot;: &quot;modifyReceiveHeader&quot;,<br>\t\t\t&quot;matchType&quot;: &quot;all&quot;,<br>\t\t\t&quot;pattern&quot;: &quot;&quot;,<br>\t\t\t&quot;exclude&quot;: &quot;&quot;,<br>\t\t\t&quot;isFunction&quot;: true,<br>\t\t\t&quot;code&quot;: &quot;let rt = detail.type;\\nif (rt === &#x27;script&#x27; || rt === &#x27;stylesheet&#x27; || rt === &#x27;main_frame&#x27; || rt === &#x27;sub_frame&#x27;) &#123;\\n  for (let i in val) &#123;\\n    if (val[i].name.toLowerCase() === &#x27;content-security-policy&#x27;) &#123;\\n      let s = val[i].value;\\n      s = s.replace(/googleapis\\\\.com/g, &#x27;$&amp; https://gapis.geekzu.org&#x27;);\\n      s = s.replace(/recaptcha\\\\.google\\\\.com/g, &#x27;$&amp; https://recaptcha.net&#x27;);\\n      s = s.replace(/google\\\\.com/g, &#x27;$&amp; https://recaptcha.net&#x27;);\\n      s = s.replace(/gstatic\\\\.com/g, &#x27;$&amp; https://*.gstatic.cn&#x27;);\\n      val[i].value = s;\\n    &#125;\\n  &#125;\\n&#125;&quot;,<br>\t\t\t&quot;group&quot;: &quot;未分组&quot;<br>\t\t&#125;<br>\t],<br>\t&quot;receiveBody&quot;: []<br>&#125;<br></code></pre></td></tr></table></figure>\n\n<p><img src=\"https://cdnn.boochi.cn/gh/inkdust-dev/ink-oss@main/qexo-upload/24/8/image_18ab541cb20291a0419ffeb09a1c83bf.png\" alt=\"https://cdnn.boochi.cn/gh/inkdust-dev/ink-oss@main/qexo-upload/24/8/image_18ab541cb20291a0419ffeb09a1c83bf.png\"></p>\n<p>注册，并登录ZeroSSL。点击<code>Developers</code>,<code>EAB Credentials for ACME Clients</code>下方的<code>Generate</code>,保存好生成的<strong>EAB KID</strong>和<strong>EAB HMAC Key</strong>。<br><img src=\"https://cdnn.boochi.cn/gh/inkdust-dev/ink-oss@main/qexo-upload/24/8/image_d8176d5822392d6870b8b1f38becddd3.png\" alt=\"https://cdnn.boochi.cn/gh/inkdust-dev/ink-oss@main/qexo-upload/24/8/image_d8176d5822392d6870b8b1f38becddd3.png\"></p>\n<p>任意点击下列一个网页打开签发SSL：</p>\n<p><a href=\"https://xiangyuecn.github.io/ACME-HTML-Web-Browser-Client/ACME-HTML-Web-Browser-Client.html\">https://xiangyuecn.github.io/ACME-HTML-Web-Browser-Client/ACME-HTML-Web-Browser-Client.html</a> （作者Github Pages）</p>\n<p><a href=\"https://ssl.dev.inkdust.top/\">https://ssl.dev.inkdust.top/</a> （本人Vercel）</p>\n<h3 id=\"步骤二：选择证书颁发机构\"><a href=\"#步骤二：选择证书颁发机构\" class=\"headerlink\" title=\"步骤二：选择证书颁发机构\"></a>步骤二：选择证书颁发机构</h3><p>在“证书颁发机构 ACME(v2, RFC 8555) 服务URL”下选择ZeroSSL，点击 <code>读取服务目录</code>并等待出现：</p>\n<p>测试此ACME服务对浏览器的支持情况，发生错误：GetNonce:** <strong>此ACME服务对浏览器访问支持太差，无法跨域获取Replay-Nonce响应头。</strong></p>\n<p>关闭改网页，直接打开<a href=\"https://acme.zerossl.com/v2/DV90/directory%EF%BC%8C%E6%8C%89%60F12%60%E9%94%AE%E6%89%93%E5%BC%80%E5%BC%80%E5%8F%91%E8%80%85%E6%8E%A7%E5%88%B6%E5%8F%B0%EF%BC%8C%E7%82%B9%E5%87%BB%60%E6%8E%A7%E5%88%B6%E5%8F%B0%60\">https://acme.zerossl.com/v2/DV90/directory，按`F12`键打开开发者控制台，点击`控制台`</a> 或<code>Console</code>，输入以下代码（代码安全开源）：</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br><span class=\"line\">121</span><br><span class=\"line\">122</span><br><span class=\"line\">123</span><br><span class=\"line\">124</span><br><span class=\"line\">125</span><br><span class=\"line\">126</span><br><span class=\"line\">127</span><br><span class=\"line\">128</span><br><span class=\"line\">129</span><br><span class=\"line\">130</span><br><span class=\"line\">131</span><br><span class=\"line\">132</span><br><span class=\"line\">133</span><br><span class=\"line\">134</span><br><span class=\"line\">135</span><br><span class=\"line\">136</span><br><span class=\"line\">137</span><br><span class=\"line\">138</span><br><span class=\"line\">139</span><br><span class=\"line\">140</span><br><span class=\"line\">141</span><br><span class=\"line\">142</span><br><span class=\"line\">143</span><br><span class=\"line\">144</span><br><span class=\"line\">145</span><br><span class=\"line\">146</span><br><span class=\"line\">147</span><br><span class=\"line\">148</span><br><span class=\"line\">149</span><br><span class=\"line\">150</span><br><span class=\"line\">151</span><br><span class=\"line\">152</span><br><span class=\"line\">153</span><br><span class=\"line\">154</span><br><span class=\"line\">155</span><br><span class=\"line\">156</span><br><span class=\"line\">157</span><br><span class=\"line\">158</span><br><span class=\"line\">159</span><br><span class=\"line\">160</span><br><span class=\"line\">161</span><br><span class=\"line\">162</span><br><span class=\"line\">163</span><br><span class=\"line\">164</span><br><span class=\"line\">165</span><br><span class=\"line\">166</span><br><span class=\"line\">167</span><br><span class=\"line\">168</span><br><span class=\"line\">169</span><br><span class=\"line\">170</span><br><span class=\"line\">171</span><br><span class=\"line\">172</span><br><span class=\"line\">173</span><br><span class=\"line\">174</span><br><span class=\"line\">175</span><br><span class=\"line\">176</span><br><span class=\"line\">177</span><br><span class=\"line\">178</span><br><span class=\"line\">179</span><br><span class=\"line\">180</span><br><span class=\"line\">181</span><br><span class=\"line\">182</span><br><span class=\"line\">183</span><br><span class=\"line\">184</span><br><span class=\"line\">185</span><br><span class=\"line\">186</span><br><span class=\"line\">187</span><br><span class=\"line\">188</span><br><span class=\"line\">189</span><br><span class=\"line\">190</span><br><span class=\"line\">191</span><br><span class=\"line\">192</span><br><span class=\"line\">193</span><br><span class=\"line\">194</span><br><span class=\"line\">195</span><br><span class=\"line\">196</span><br><span class=\"line\">197</span><br><span class=\"line\">198</span><br><span class=\"line\">199</span><br><span class=\"line\">200</span><br><span class=\"line\">201</span><br><span class=\"line\">202</span><br><span class=\"line\">203</span><br><span class=\"line\">204</span><br><span class=\"line\">205</span><br><span class=\"line\">206</span><br><span class=\"line\">207</span><br><span class=\"line\">208</span><br><span class=\"line\">209</span><br><span class=\"line\">210</span><br><span class=\"line\">211</span><br><span class=\"line\">212</span><br><span class=\"line\">213</span><br><span class=\"line\">214</span><br><span class=\"line\">215</span><br><span class=\"line\">216</span><br><span class=\"line\">217</span><br><span class=\"line\">218</span><br><span class=\"line\">219</span><br><span class=\"line\">220</span><br><span class=\"line\">221</span><br><span class=\"line\">222</span><br><span class=\"line\">223</span><br><span class=\"line\">224</span><br><span class=\"line\">225</span><br><span class=\"line\">226</span><br><span class=\"line\">227</span><br><span class=\"line\">228</span><br><span class=\"line\">229</span><br><span class=\"line\">230</span><br><span class=\"line\">231</span><br><span class=\"line\">232</span><br><span class=\"line\">233</span><br><span class=\"line\">234</span><br><span class=\"line\">235</span><br><span class=\"line\">236</span><br><span class=\"line\">237</span><br><span class=\"line\">238</span><br><span class=\"line\">239</span><br><span class=\"line\">240</span><br><span class=\"line\">241</span><br><span class=\"line\">242</span><br><span class=\"line\">243</span><br><span class=\"line\">244</span><br><span class=\"line\">245</span><br><span class=\"line\">246</span><br><span class=\"line\">247</span><br><span class=\"line\">248</span><br><span class=\"line\">249</span><br><span class=\"line\">250</span><br><span class=\"line\">251</span><br><span class=\"line\">252</span><br><span class=\"line\">253</span><br><span class=\"line\">254</span><br><span class=\"line\">255</span><br><span class=\"line\">256</span><br><span class=\"line\">257</span><br><span class=\"line\">258</span><br><span class=\"line\">259</span><br><span class=\"line\">260</span><br><span class=\"line\">261</span><br><span class=\"line\">262</span><br><span class=\"line\">263</span><br><span class=\"line\">264</span><br><span class=\"line\">265</span><br><span class=\"line\">266</span><br><span class=\"line\">267</span><br><span class=\"line\">268</span><br><span class=\"line\">269</span><br><span class=\"line\">270</span><br><span class=\"line\">271</span><br><span class=\"line\">272</span><br><span class=\"line\">273</span><br><span class=\"line\">274</span><br><span class=\"line\">275</span><br><span class=\"line\">276</span><br><span class=\"line\">277</span><br><span class=\"line\">278</span><br><span class=\"line\">279</span><br><span class=\"line\">280</span><br><span class=\"line\">281</span><br><span class=\"line\">282</span><br><span class=\"line\">283</span><br><span class=\"line\">284</span><br><span class=\"line\">285</span><br><span class=\"line\">286</span><br><span class=\"line\">287</span><br><span class=\"line\">288</span><br><span class=\"line\">289</span><br><span class=\"line\">290</span><br><span class=\"line\">291</span><br><span class=\"line\">292</span><br><span class=\"line\">293</span><br><span class=\"line\">294</span><br><span class=\"line\">295</span><br><span class=\"line\">296</span><br><span class=\"line\">297</span><br><span class=\"line\">298</span><br><span class=\"line\">299</span><br><span class=\"line\">300</span><br><span class=\"line\">301</span><br><span class=\"line\">302</span><br><span class=\"line\">303</span><br><span class=\"line\">304</span><br><span class=\"line\">305</span><br><span class=\"line\">306</span><br><span class=\"line\">307</span><br><span class=\"line\">308</span><br><span class=\"line\">309</span><br><span class=\"line\">310</span><br><span class=\"line\">311</span><br><span class=\"line\">312</span><br><span class=\"line\">313</span><br><span class=\"line\">314</span><br><span class=\"line\">315</span><br><span class=\"line\">316</span><br><span class=\"line\">317</span><br><span class=\"line\">318</span><br><span class=\"line\">319</span><br><span class=\"line\">320</span><br><span class=\"line\">321</span><br><span class=\"line\">322</span><br><span class=\"line\">323</span><br><span class=\"line\">324</span><br><span class=\"line\">325</span><br><span class=\"line\">326</span><br><span class=\"line\">327</span><br><span class=\"line\">328</span><br><span class=\"line\">329</span><br><span class=\"line\">330</span><br><span class=\"line\">331</span><br><span class=\"line\">332</span><br><span class=\"line\">333</span><br><span class=\"line\">334</span><br><span class=\"line\">335</span><br><span class=\"line\">336</span><br><span class=\"line\">337</span><br><span class=\"line\">338</span><br><span class=\"line\">339</span><br><span class=\"line\">340</span><br><span class=\"line\">341</span><br><span class=\"line\">342</span><br><span class=\"line\">343</span><br><span class=\"line\">344</span><br><span class=\"line\">345</span><br><span class=\"line\">346</span><br><span class=\"line\">347</span><br><span class=\"line\">348</span><br><span class=\"line\">349</span><br><span class=\"line\">350</span><br><span class=\"line\">351</span><br><span class=\"line\">352</span><br><span class=\"line\">353</span><br><span class=\"line\">354</span><br><span class=\"line\">355</span><br><span class=\"line\">356</span><br><span class=\"line\">357</span><br><span class=\"line\">358</span><br><span class=\"line\">359</span><br><span class=\"line\">360</span><br><span class=\"line\">361</span><br><span class=\"line\">362</span><br><span class=\"line\">363</span><br><span class=\"line\">364</span><br><span class=\"line\">365</span><br><span class=\"line\">366</span><br><span class=\"line\">367</span><br><span class=\"line\">368</span><br><span class=\"line\">369</span><br><span class=\"line\">370</span><br><span class=\"line\">371</span><br><span class=\"line\">372</span><br><span class=\"line\">373</span><br><span class=\"line\">374</span><br><span class=\"line\">375</span><br><span class=\"line\">376</span><br><span class=\"line\">377</span><br><span class=\"line\">378</span><br><span class=\"line\">379</span><br><span class=\"line\">380</span><br><span class=\"line\">381</span><br><span class=\"line\">382</span><br><span class=\"line\">383</span><br><span class=\"line\">384</span><br><span class=\"line\">385</span><br><span class=\"line\">386</span><br><span class=\"line\">387</span><br><span class=\"line\">388</span><br><span class=\"line\">389</span><br><span class=\"line\">390</span><br><span class=\"line\">391</span><br><span class=\"line\">392</span><br><span class=\"line\">393</span><br><span class=\"line\">394</span><br><span class=\"line\">395</span><br><span class=\"line\">396</span><br><span class=\"line\">397</span><br><span class=\"line\">398</span><br><span class=\"line\">399</span><br><span class=\"line\">400</span><br><span class=\"line\">401</span><br><span class=\"line\">402</span><br><span class=\"line\">403</span><br><span class=\"line\">404</span><br><span class=\"line\">405</span><br><span class=\"line\">406</span><br><span class=\"line\">407</span><br><span class=\"line\">408</span><br><span class=\"line\">409</span><br><span class=\"line\">410</span><br><span class=\"line\">411</span><br><span class=\"line\">412</span><br><span class=\"line\">413</span><br><span class=\"line\">414</span><br><span class=\"line\">415</span><br><span class=\"line\">416</span><br><span class=\"line\">417</span><br><span class=\"line\">418</span><br><span class=\"line\">419</span><br><span class=\"line\">420</span><br><span class=\"line\">421</span><br><span class=\"line\">422</span><br><span class=\"line\">423</span><br><span class=\"line\">424</span><br><span class=\"line\">425</span><br><span class=\"line\">426</span><br><span class=\"line\">427</span><br><span class=\"line\">428</span><br><span class=\"line\">429</span><br><span class=\"line\">430</span><br><span class=\"line\">431</span><br><span class=\"line\">432</span><br><span class=\"line\">433</span><br><span class=\"line\">434</span><br><span class=\"line\">435</span><br><span class=\"line\">436</span><br><span class=\"line\">437</span><br><span class=\"line\">438</span><br><span class=\"line\">439</span><br><span class=\"line\">440</span><br><span class=\"line\">441</span><br><span class=\"line\">442</span><br><span class=\"line\">443</span><br><span class=\"line\">444</span><br><span class=\"line\">445</span><br><span class=\"line\">446</span><br><span class=\"line\">447</span><br><span class=\"line\">448</span><br><span class=\"line\">449</span><br><span class=\"line\">450</span><br><span class=\"line\">451</span><br><span class=\"line\">452</span><br><span class=\"line\">453</span><br><span class=\"line\">454</span><br><span class=\"line\">455</span><br><span class=\"line\">456</span><br><span class=\"line\">457</span><br><span class=\"line\">458</span><br><span class=\"line\">459</span><br><span class=\"line\">460</span><br><span class=\"line\">461</span><br><span class=\"line\">462</span><br><span class=\"line\">463</span><br><span class=\"line\">464</span><br><span class=\"line\">465</span><br><span class=\"line\">466</span><br><span class=\"line\">467</span><br><span class=\"line\">468</span><br><span class=\"line\">469</span><br><span class=\"line\">470</span><br><span class=\"line\">471</span><br><span class=\"line\">472</span><br><span class=\"line\">473</span><br><span class=\"line\">474</span><br><span class=\"line\">475</span><br><span class=\"line\">476</span><br><span class=\"line\">477</span><br><span class=\"line\">478</span><br><span class=\"line\">479</span><br><span class=\"line\">480</span><br><span class=\"line\">481</span><br><span class=\"line\">482</span><br><span class=\"line\">483</span><br><span class=\"line\">484</span><br><span class=\"line\">485</span><br><span class=\"line\">486</span><br><span class=\"line\">487</span><br><span class=\"line\">488</span><br><span class=\"line\">489</span><br><span class=\"line\">490</span><br><span class=\"line\">491</span><br><span class=\"line\">492</span><br><span class=\"line\">493</span><br><span class=\"line\">494</span><br><span class=\"line\">495</span><br><span class=\"line\">496</span><br><span class=\"line\">497</span><br><span class=\"line\">498</span><br><span class=\"line\">499</span><br><span class=\"line\">500</span><br><span class=\"line\">501</span><br><span class=\"line\">502</span><br><span class=\"line\">503</span><br><span class=\"line\">504</span><br><span class=\"line\">505</span><br><span class=\"line\">506</span><br><span class=\"line\">507</span><br><span class=\"line\">508</span><br><span class=\"line\">509</span><br><span class=\"line\">510</span><br><span class=\"line\">511</span><br><span class=\"line\">512</span><br><span class=\"line\">513</span><br><span class=\"line\">514</span><br><span class=\"line\">515</span><br><span class=\"line\">516</span><br><span class=\"line\">517</span><br><span class=\"line\">518</span><br><span class=\"line\">519</span><br><span class=\"line\">520</span><br><span class=\"line\">521</span><br><span class=\"line\">522</span><br><span class=\"line\">523</span><br><span class=\"line\">524</span><br><span class=\"line\">525</span><br><span class=\"line\">526</span><br><span class=\"line\">527</span><br><span class=\"line\">528</span><br><span class=\"line\">529</span><br><span class=\"line\">530</span><br><span class=\"line\">531</span><br><span class=\"line\">532</span><br><span class=\"line\">533</span><br><span class=\"line\">534</span><br><span class=\"line\">535</span><br><span class=\"line\">536</span><br><span class=\"line\">537</span><br><span class=\"line\">538</span><br><span class=\"line\">539</span><br><span class=\"line\">540</span><br><span class=\"line\">541</span><br><span class=\"line\">542</span><br><span class=\"line\">543</span><br><span class=\"line\">544</span><br><span class=\"line\">545</span><br><span class=\"line\">546</span><br><span class=\"line\">547</span><br><span class=\"line\">548</span><br><span class=\"line\">549</span><br><span class=\"line\">550</span><br><span class=\"line\">551</span><br><span class=\"line\">552</span><br><span class=\"line\">553</span><br><span class=\"line\">554</span><br><span class=\"line\">555</span><br><span class=\"line\">556</span><br><span class=\"line\">557</span><br><span class=\"line\">558</span><br><span class=\"line\">559</span><br><span class=\"line\">560</span><br><span class=\"line\">561</span><br><span class=\"line\">562</span><br><span class=\"line\">563</span><br><span class=\"line\">564</span><br><span class=\"line\">565</span><br><span class=\"line\">566</span><br><span class=\"line\">567</span><br><span class=\"line\">568</span><br><span class=\"line\">569</span><br><span class=\"line\">570</span><br><span class=\"line\">571</span><br><span class=\"line\">572</span><br><span class=\"line\">573</span><br><span class=\"line\">574</span><br><span class=\"line\">575</span><br><span class=\"line\">576</span><br><span class=\"line\">577</span><br><span class=\"line\">578</span><br><span class=\"line\">579</span><br><span class=\"line\">580</span><br><span class=\"line\">581</span><br><span class=\"line\">582</span><br><span class=\"line\">583</span><br><span class=\"line\">584</span><br><span class=\"line\">585</span><br><span class=\"line\">586</span><br><span class=\"line\">587</span><br><span class=\"line\">588</span><br><span class=\"line\">589</span><br><span class=\"line\">590</span><br><span class=\"line\">591</span><br><span class=\"line\">592</span><br><span class=\"line\">593</span><br><span class=\"line\">594</span><br><span class=\"line\">595</span><br><span class=\"line\">596</span><br><span class=\"line\">597</span><br><span class=\"line\">598</span><br><span class=\"line\">599</span><br><span class=\"line\">600</span><br><span class=\"line\">601</span><br><span class=\"line\">602</span><br><span class=\"line\">603</span><br><span class=\"line\">604</span><br><span class=\"line\">605</span><br><span class=\"line\">606</span><br><span class=\"line\">607</span><br><span class=\"line\">608</span><br><span class=\"line\">609</span><br><span class=\"line\">610</span><br><span class=\"line\">611</span><br><span class=\"line\">612</span><br><span class=\"line\">613</span><br><span class=\"line\">614</span><br><span class=\"line\">615</span><br><span class=\"line\">616</span><br><span class=\"line\">617</span><br><span class=\"line\">618</span><br><span class=\"line\">619</span><br><span class=\"line\">620</span><br><span class=\"line\">621</span><br><span class=\"line\">622</span><br><span class=\"line\">623</span><br><span class=\"line\">624</span><br><span class=\"line\">625</span><br><span class=\"line\">626</span><br><span class=\"line\">627</span><br><span class=\"line\">628</span><br><span class=\"line\">629</span><br><span class=\"line\">630</span><br><span class=\"line\">631</span><br><span class=\"line\">632</span><br><span class=\"line\">633</span><br><span class=\"line\">634</span><br><span class=\"line\">635</span><br><span class=\"line\">636</span><br><span class=\"line\">637</span><br><span class=\"line\">638</span><br><span class=\"line\">639</span><br><span class=\"line\">640</span><br><span class=\"line\">641</span><br><span class=\"line\">642</span><br><span class=\"line\">643</span><br><span class=\"line\">644</span><br><span class=\"line\">645</span><br><span class=\"line\">646</span><br><span class=\"line\">647</span><br><span class=\"line\">648</span><br><span class=\"line\">649</span><br><span class=\"line\">650</span><br><span class=\"line\">651</span><br><span class=\"line\">652</span><br><span class=\"line\">653</span><br><span class=\"line\">654</span><br><span class=\"line\">655</span><br><span class=\"line\">656</span><br><span class=\"line\">657</span><br><span class=\"line\">658</span><br><span class=\"line\">659</span><br><span class=\"line\">660</span><br><span class=\"line\">661</span><br><span class=\"line\">662</span><br><span class=\"line\">663</span><br><span class=\"line\">664</span><br><span class=\"line\">665</span><br><span class=\"line\">666</span><br><span class=\"line\">667</span><br><span class=\"line\">668</span><br><span class=\"line\">669</span><br><span class=\"line\">670</span><br><span class=\"line\">671</span><br><span class=\"line\">672</span><br><span class=\"line\">673</span><br><span class=\"line\">674</span><br><span class=\"line\">675</span><br><span class=\"line\">676</span><br><span class=\"line\">677</span><br><span class=\"line\">678</span><br><span class=\"line\">679</span><br><span class=\"line\">680</span><br><span class=\"line\">681</span><br><span class=\"line\">682</span><br><span class=\"line\">683</span><br><span class=\"line\">684</span><br><span class=\"line\">685</span><br><span class=\"line\">686</span><br><span class=\"line\">687</span><br><span class=\"line\">688</span><br><span class=\"line\">689</span><br><span class=\"line\">690</span><br><span class=\"line\">691</span><br><span class=\"line\">692</span><br><span class=\"line\">693</span><br><span class=\"line\">694</span><br><span class=\"line\">695</span><br><span class=\"line\">696</span><br><span class=\"line\">697</span><br><span class=\"line\">698</span><br><span class=\"line\">699</span><br><span class=\"line\">700</span><br><span class=\"line\">701</span><br><span class=\"line\">702</span><br><span class=\"line\">703</span><br><span class=\"line\">704</span><br><span class=\"line\">705</span><br><span class=\"line\">706</span><br><span class=\"line\">707</span><br><span class=\"line\">708</span><br><span class=\"line\">709</span><br><span class=\"line\">710</span><br><span class=\"line\">711</span><br><span class=\"line\">712</span><br><span class=\"line\">713</span><br><span class=\"line\">714</span><br><span class=\"line\">715</span><br><span class=\"line\">716</span><br><span class=\"line\">717</span><br><span class=\"line\">718</span><br><span class=\"line\">719</span><br><span class=\"line\">720</span><br><span class=\"line\">721</span><br><span class=\"line\">722</span><br><span class=\"line\">723</span><br><span class=\"line\">724</span><br><span class=\"line\">725</span><br><span class=\"line\">726</span><br><span class=\"line\">727</span><br><span class=\"line\">728</span><br><span class=\"line\">729</span><br><span class=\"line\">730</span><br><span class=\"line\">731</span><br><span class=\"line\">732</span><br><span class=\"line\">733</span><br><span class=\"line\">734</span><br><span class=\"line\">735</span><br><span class=\"line\">736</span><br><span class=\"line\">737</span><br><span class=\"line\">738</span><br><span class=\"line\">739</span><br><span class=\"line\">740</span><br><span class=\"line\">741</span><br><span class=\"line\">742</span><br><span class=\"line\">743</span><br><span class=\"line\">744</span><br><span class=\"line\">745</span><br><span class=\"line\">746</span><br><span class=\"line\">747</span><br><span class=\"line\">748</span><br><span class=\"line\">749</span><br><span class=\"line\">750</span><br><span class=\"line\">751</span><br><span class=\"line\">752</span><br><span class=\"line\">753</span><br><span class=\"line\">754</span><br><span class=\"line\">755</span><br><span class=\"line\">756</span><br><span class=\"line\">757</span><br><span class=\"line\">758</span><br><span class=\"line\">759</span><br><span class=\"line\">760</span><br><span class=\"line\">761</span><br><span class=\"line\">762</span><br><span class=\"line\">763</span><br><span class=\"line\">764</span><br><span class=\"line\">765</span><br><span class=\"line\">766</span><br><span class=\"line\">767</span><br><span class=\"line\">768</span><br><span class=\"line\">769</span><br><span class=\"line\">770</span><br><span class=\"line\">771</span><br><span class=\"line\">772</span><br><span class=\"line\">773</span><br><span class=\"line\">774</span><br><span class=\"line\">775</span><br><span class=\"line\">776</span><br><span class=\"line\">777</span><br><span class=\"line\">778</span><br><span class=\"line\">779</span><br><span class=\"line\">780</span><br><span class=\"line\">781</span><br><span class=\"line\">782</span><br><span class=\"line\">783</span><br><span class=\"line\">784</span><br><span class=\"line\">785</span><br><span class=\"line\">786</span><br><span class=\"line\">787</span><br><span class=\"line\">788</span><br><span class=\"line\">789</span><br><span class=\"line\">790</span><br><span class=\"line\">791</span><br><span class=\"line\">792</span><br><span class=\"line\">793</span><br><span class=\"line\">794</span><br><span class=\"line\">795</span><br><span class=\"line\">796</span><br><span class=\"line\">797</span><br><span class=\"line\">798</span><br><span class=\"line\">799</span><br><span class=\"line\">800</span><br><span class=\"line\">801</span><br><span class=\"line\">802</span><br><span class=\"line\">803</span><br><span class=\"line\">804</span><br><span class=\"line\">805</span><br><span class=\"line\">806</span><br><span class=\"line\">807</span><br><span class=\"line\">808</span><br><span class=\"line\">809</span><br><span class=\"line\">810</span><br><span class=\"line\">811</span><br><span class=\"line\">812</span><br><span class=\"line\">813</span><br><span class=\"line\">814</span><br><span class=\"line\">815</span><br><span class=\"line\">816</span><br><span class=\"line\">817</span><br><span class=\"line\">818</span><br><span class=\"line\">819</span><br><span class=\"line\">820</span><br><span class=\"line\">821</span><br><span class=\"line\">822</span><br><span class=\"line\">823</span><br><span class=\"line\">824</span><br><span class=\"line\">825</span><br><span class=\"line\">826</span><br><span class=\"line\">827</span><br><span class=\"line\">828</span><br><span class=\"line\">829</span><br><span class=\"line\">830</span><br><span class=\"line\">831</span><br><span class=\"line\">832</span><br><span class=\"line\">833</span><br><span class=\"line\">834</span><br><span class=\"line\">835</span><br><span class=\"line\">836</span><br><span class=\"line\">837</span><br><span class=\"line\">838</span><br><span class=\"line\">839</span><br><span class=\"line\">840</span><br><span class=\"line\">841</span><br><span class=\"line\">842</span><br><span class=\"line\">843</span><br><span class=\"line\">844</span><br><span class=\"line\">845</span><br><span class=\"line\">846</span><br><span class=\"line\">847</span><br><span class=\"line\">848</span><br><span class=\"line\">849</span><br><span class=\"line\">850</span><br><span class=\"line\">851</span><br><span class=\"line\">852</span><br><span class=\"line\">853</span><br><span class=\"line\">854</span><br><span class=\"line\">855</span><br><span class=\"line\">856</span><br><span class=\"line\">857</span><br><span class=\"line\">858</span><br><span class=\"line\">859</span><br><span class=\"line\">860</span><br><span class=\"line\">861</span><br><span class=\"line\">862</span><br><span class=\"line\">863</span><br><span class=\"line\">864</span><br><span class=\"line\">865</span><br><span class=\"line\">866</span><br><span class=\"line\">867</span><br><span class=\"line\">868</span><br><span class=\"line\">869</span><br><span class=\"line\">870</span><br><span class=\"line\">871</span><br><span class=\"line\">872</span><br><span class=\"line\">873</span><br><span class=\"line\">874</span><br><span class=\"line\">875</span><br><span class=\"line\">876</span><br><span class=\"line\">877</span><br><span class=\"line\">878</span><br><span class=\"line\">879</span><br><span class=\"line\">880</span><br><span class=\"line\">881</span><br><span class=\"line\">882</span><br><span class=\"line\">883</span><br><span class=\"line\">884</span><br><span class=\"line\">885</span><br><span class=\"line\">886</span><br><span class=\"line\">887</span><br><span class=\"line\">888</span><br><span class=\"line\">889</span><br><span class=\"line\">890</span><br><span class=\"line\">891</span><br><span class=\"line\">892</span><br><span class=\"line\">893</span><br><span class=\"line\">894</span><br><span class=\"line\">895</span><br><span class=\"line\">896</span><br><span class=\"line\">897</span><br><span class=\"line\">898</span><br><span class=\"line\">899</span><br><span class=\"line\">900</span><br><span class=\"line\">901</span><br><span class=\"line\">902</span><br><span class=\"line\">903</span><br><span class=\"line\">904</span><br><span class=\"line\">905</span><br><span class=\"line\">906</span><br><span class=\"line\">907</span><br><span class=\"line\">908</span><br><span class=\"line\">909</span><br><span class=\"line\">910</span><br><span class=\"line\">911</span><br><span class=\"line\">912</span><br><span class=\"line\">913</span><br><span class=\"line\">914</span><br><span class=\"line\">915</span><br><span class=\"line\">916</span><br><span class=\"line\">917</span><br><span class=\"line\">918</span><br><span class=\"line\">919</span><br><span class=\"line\">920</span><br><span class=\"line\">921</span><br><span class=\"line\">922</span><br><span class=\"line\">923</span><br><span class=\"line\">924</span><br><span class=\"line\">925</span><br><span class=\"line\">926</span><br><span class=\"line\">927</span><br><span class=\"line\">928</span><br><span class=\"line\">929</span><br><span class=\"line\">930</span><br><span class=\"line\">931</span><br><span class=\"line\">932</span><br><span class=\"line\">933</span><br><span class=\"line\">934</span><br><span class=\"line\">935</span><br><span class=\"line\">936</span><br><span class=\"line\">937</span><br><span class=\"line\">938</span><br><span class=\"line\">939</span><br><span class=\"line\">940</span><br><span class=\"line\">941</span><br><span class=\"line\">942</span><br><span class=\"line\">943</span><br><span class=\"line\">944</span><br><span class=\"line\">945</span><br><span class=\"line\">946</span><br><span class=\"line\">947</span><br><span class=\"line\">948</span><br><span class=\"line\">949</span><br><span class=\"line\">950</span><br><span class=\"line\">951</span><br><span class=\"line\">952</span><br><span class=\"line\">953</span><br><span class=\"line\">954</span><br><span class=\"line\">955</span><br><span class=\"line\">956</span><br><span class=\"line\">957</span><br><span class=\"line\">958</span><br><span class=\"line\">959</span><br><span class=\"line\">960</span><br><span class=\"line\">961</span><br><span class=\"line\">962</span><br><span class=\"line\">963</span><br><span class=\"line\">964</span><br><span class=\"line\">965</span><br><span class=\"line\">966</span><br><span class=\"line\">967</span><br><span class=\"line\">968</span><br><span class=\"line\">969</span><br><span class=\"line\">970</span><br><span class=\"line\">971</span><br><span class=\"line\">972</span><br><span class=\"line\">973</span><br><span class=\"line\">974</span><br><span class=\"line\">975</span><br><span class=\"line\">976</span><br><span class=\"line\">977</span><br><span class=\"line\">978</span><br><span class=\"line\">979</span><br><span class=\"line\">980</span><br><span class=\"line\">981</span><br><span class=\"line\">982</span><br><span class=\"line\">983</span><br><span class=\"line\">984</span><br><span class=\"line\">985</span><br><span class=\"line\">986</span><br><span class=\"line\">987</span><br><span class=\"line\">988</span><br><span class=\"line\">989</span><br><span class=\"line\">990</span><br><span class=\"line\">991</span><br><span class=\"line\">992</span><br><span class=\"line\">993</span><br><span class=\"line\">994</span><br><span class=\"line\">995</span><br><span class=\"line\">996</span><br><span class=\"line\">997</span><br><span class=\"line\">998</span><br><span class=\"line\">999</span><br><span class=\"line\">1000</span><br><span class=\"line\">1001</span><br><span class=\"line\">1002</span><br><span class=\"line\">1003</span><br><span class=\"line\">1004</span><br><span class=\"line\">1005</span><br><span class=\"line\">1006</span><br><span class=\"line\">1007</span><br><span class=\"line\">1008</span><br><span class=\"line\">1009</span><br><span class=\"line\">1010</span><br><span class=\"line\">1011</span><br><span class=\"line\">1012</span><br><span class=\"line\">1013</span><br><span class=\"line\">1014</span><br><span class=\"line\">1015</span><br><span class=\"line\">1016</span><br><span class=\"line\">1017</span><br><span class=\"line\">1018</span><br><span class=\"line\">1019</span><br><span class=\"line\">1020</span><br><span class=\"line\">1021</span><br><span class=\"line\">1022</span><br><span class=\"line\">1023</span><br><span class=\"line\">1024</span><br><span class=\"line\">1025</span><br><span class=\"line\">1026</span><br><span class=\"line\">1027</span><br><span class=\"line\">1028</span><br><span class=\"line\">1029</span><br><span class=\"line\">1030</span><br><span class=\"line\">1031</span><br><span class=\"line\">1032</span><br><span class=\"line\">1033</span><br><span class=\"line\">1034</span><br><span class=\"line\">1035</span><br><span class=\"line\">1036</span><br><span class=\"line\">1037</span><br><span class=\"line\">1038</span><br><span class=\"line\">1039</span><br><span class=\"line\">1040</span><br><span class=\"line\">1041</span><br><span class=\"line\">1042</span><br><span class=\"line\">1043</span><br><span class=\"line\">1044</span><br><span class=\"line\">1045</span><br><span class=\"line\">1046</span><br><span class=\"line\">1047</span><br><span class=\"line\">1048</span><br><span class=\"line\">1049</span><br><span class=\"line\">1050</span><br><span class=\"line\">1051</span><br><span class=\"line\">1052</span><br><span class=\"line\">1053</span><br><span class=\"line\">1054</span><br><span class=\"line\">1055</span><br><span class=\"line\">1056</span><br><span class=\"line\">1057</span><br><span class=\"line\">1058</span><br><span class=\"line\">1059</span><br><span class=\"line\">1060</span><br><span class=\"line\">1061</span><br><span class=\"line\">1062</span><br><span class=\"line\">1063</span><br><span class=\"line\">1064</span><br><span class=\"line\">1065</span><br><span class=\"line\">1066</span><br><span class=\"line\">1067</span><br><span class=\"line\">1068</span><br><span class=\"line\">1069</span><br><span class=\"line\">1070</span><br><span class=\"line\">1071</span><br><span class=\"line\">1072</span><br><span class=\"line\">1073</span><br><span class=\"line\">1074</span><br><span class=\"line\">1075</span><br><span class=\"line\">1076</span><br><span class=\"line\">1077</span><br><span class=\"line\">1078</span><br><span class=\"line\">1079</span><br><span class=\"line\">1080</span><br><span class=\"line\">1081</span><br><span class=\"line\">1082</span><br><span class=\"line\">1083</span><br><span class=\"line\">1084</span><br><span class=\"line\">1085</span><br><span class=\"line\">1086</span><br><span class=\"line\">1087</span><br><span class=\"line\">1088</span><br><span class=\"line\">1089</span><br><span class=\"line\">1090</span><br><span class=\"line\">1091</span><br><span class=\"line\">1092</span><br><span class=\"line\">1093</span><br><span class=\"line\">1094</span><br><span class=\"line\">1095</span><br><span class=\"line\">1096</span><br><span class=\"line\">1097</span><br><span class=\"line\">1098</span><br><span class=\"line\">1099</span><br><span class=\"line\">1100</span><br><span class=\"line\">1101</span><br><span class=\"line\">1102</span><br><span class=\"line\">1103</span><br><span class=\"line\">1104</span><br><span class=\"line\">1105</span><br><span class=\"line\">1106</span><br><span class=\"line\">1107</span><br><span class=\"line\">1108</span><br><span class=\"line\">1109</span><br><span class=\"line\">1110</span><br><span class=\"line\">1111</span><br><span class=\"line\">1112</span><br><span class=\"line\">1113</span><br><span class=\"line\">1114</span><br><span class=\"line\">1115</span><br><span class=\"line\">1116</span><br><span class=\"line\">1117</span><br><span class=\"line\">1118</span><br><span class=\"line\">1119</span><br><span class=\"line\">1120</span><br><span class=\"line\">1121</span><br><span class=\"line\">1122</span><br><span class=\"line\">1123</span><br><span class=\"line\">1124</span><br><span class=\"line\">1125</span><br><span class=\"line\">1126</span><br><span class=\"line\">1127</span><br><span class=\"line\">1128</span><br><span class=\"line\">1129</span><br><span class=\"line\">1130</span><br><span class=\"line\">1131</span><br><span class=\"line\">1132</span><br><span class=\"line\">1133</span><br><span class=\"line\">1134</span><br><span class=\"line\">1135</span><br><span class=\"line\">1136</span><br><span class=\"line\">1137</span><br><span class=\"line\">1138</span><br><span class=\"line\">1139</span><br><span class=\"line\">1140</span><br><span class=\"line\">1141</span><br><span class=\"line\">1142</span><br><span class=\"line\">1143</span><br><span class=\"line\">1144</span><br><span class=\"line\">1145</span><br><span class=\"line\">1146</span><br><span class=\"line\">1147</span><br><span class=\"line\">1148</span><br><span class=\"line\">1149</span><br><span class=\"line\">1150</span><br><span class=\"line\">1151</span><br><span class=\"line\">1152</span><br><span class=\"line\">1153</span><br><span class=\"line\">1154</span><br><span class=\"line\">1155</span><br><span class=\"line\">1156</span><br><span class=\"line\">1157</span><br><span class=\"line\">1158</span><br><span class=\"line\">1159</span><br><span class=\"line\">1160</span><br><span class=\"line\">1161</span><br><span class=\"line\">1162</span><br><span class=\"line\">1163</span><br><span class=\"line\">1164</span><br><span class=\"line\">1165</span><br><span class=\"line\">1166</span><br><span class=\"line\">1167</span><br><span class=\"line\">1168</span><br><span class=\"line\">1169</span><br><span class=\"line\">1170</span><br><span class=\"line\">1171</span><br><span class=\"line\">1172</span><br><span class=\"line\">1173</span><br><span class=\"line\">1174</span><br><span class=\"line\">1175</span><br><span class=\"line\">1176</span><br><span class=\"line\">1177</span><br><span class=\"line\">1178</span><br><span class=\"line\">1179</span><br><span class=\"line\">1180</span><br><span class=\"line\">1181</span><br><span class=\"line\">1182</span><br><span class=\"line\">1183</span><br><span class=\"line\">1184</span><br><span class=\"line\">1185</span><br><span class=\"line\">1186</span><br><span class=\"line\">1187</span><br><span class=\"line\">1188</span><br><span class=\"line\">1189</span><br><span class=\"line\">1190</span><br><span class=\"line\">1191</span><br><span class=\"line\">1192</span><br><span class=\"line\">1193</span><br><span class=\"line\">1194</span><br><span class=\"line\">1195</span><br><span class=\"line\">1196</span><br><span class=\"line\">1197</span><br><span class=\"line\">1198</span><br><span class=\"line\">1199</span><br><span class=\"line\">1200</span><br><span class=\"line\">1201</span><br><span class=\"line\">1202</span><br><span class=\"line\">1203</span><br><span class=\"line\">1204</span><br><span class=\"line\">1205</span><br><span class=\"line\">1206</span><br><span class=\"line\">1207</span><br><span class=\"line\">1208</span><br><span class=\"line\">1209</span><br><span class=\"line\">1210</span><br><span class=\"line\">1211</span><br><span class=\"line\">1212</span><br><span class=\"line\">1213</span><br><span class=\"line\">1214</span><br><span class=\"line\">1215</span><br><span class=\"line\">1216</span><br><span class=\"line\">1217</span><br><span class=\"line\">1218</span><br><span class=\"line\">1219</span><br><span class=\"line\">1220</span><br><span class=\"line\">1221</span><br><span class=\"line\">1222</span><br><span class=\"line\">1223</span><br><span class=\"line\">1224</span><br><span class=\"line\">1225</span><br><span class=\"line\">1226</span><br><span class=\"line\">1227</span><br><span class=\"line\">1228</span><br><span class=\"line\">1229</span><br><span class=\"line\">1230</span><br><span class=\"line\">1231</span><br><span class=\"line\">1232</span><br><span class=\"line\">1233</span><br><span class=\"line\">1234</span><br><span class=\"line\">1235</span><br><span class=\"line\">1236</span><br><span class=\"line\">1237</span><br><span class=\"line\">1238</span><br><span class=\"line\">1239</span><br><span class=\"line\">1240</span><br><span class=\"line\">1241</span><br><span class=\"line\">1242</span><br><span class=\"line\">1243</span><br><span class=\"line\">1244</span><br><span class=\"line\">1245</span><br><span class=\"line\">1246</span><br><span class=\"line\">1247</span><br><span class=\"line\">1248</span><br><span class=\"line\">1249</span><br><span class=\"line\">1250</span><br><span class=\"line\">1251</span><br><span class=\"line\">1252</span><br><span class=\"line\">1253</span><br><span class=\"line\">1254</span><br><span class=\"line\">1255</span><br><span class=\"line\">1256</span><br><span class=\"line\">1257</span><br><span class=\"line\">1258</span><br><span class=\"line\">1259</span><br><span class=\"line\">1260</span><br><span class=\"line\">1261</span><br><span class=\"line\">1262</span><br><span class=\"line\">1263</span><br><span class=\"line\">1264</span><br><span class=\"line\">1265</span><br><span class=\"line\">1266</span><br><span class=\"line\">1267</span><br><span class=\"line\">1268</span><br><span class=\"line\">1269</span><br><span class=\"line\">1270</span><br><span class=\"line\">1271</span><br><span class=\"line\">1272</span><br><span class=\"line\">1273</span><br><span class=\"line\">1274</span><br><span class=\"line\">1275</span><br><span class=\"line\">1276</span><br><span class=\"line\">1277</span><br><span class=\"line\">1278</span><br><span class=\"line\">1279</span><br><span class=\"line\">1280</span><br><span class=\"line\">1281</span><br><span class=\"line\">1282</span><br><span class=\"line\">1283</span><br><span class=\"line\">1284</span><br><span class=\"line\">1285</span><br><span class=\"line\">1286</span><br><span class=\"line\">1287</span><br><span class=\"line\">1288</span><br><span class=\"line\">1289</span><br><span class=\"line\">1290</span><br><span class=\"line\">1291</span><br><span class=\"line\">1292</span><br><span class=\"line\">1293</span><br><span class=\"line\">1294</span><br><span class=\"line\">1295</span><br><span class=\"line\">1296</span><br><span class=\"line\">1297</span><br><span class=\"line\">1298</span><br><span class=\"line\">1299</span><br><span class=\"line\">1300</span><br><span class=\"line\">1301</span><br><span class=\"line\">1302</span><br><span class=\"line\">1303</span><br><span class=\"line\">1304</span><br><span class=\"line\">1305</span><br><span class=\"line\">1306</span><br><span class=\"line\">1307</span><br><span class=\"line\">1308</span><br><span class=\"line\">1309</span><br><span class=\"line\">1310</span><br><span class=\"line\">1311</span><br><span class=\"line\">1312</span><br><span class=\"line\">1313</span><br><span class=\"line\">1314</span><br><span class=\"line\">1315</span><br><span class=\"line\">1316</span><br><span class=\"line\">1317</span><br><span class=\"line\">1318</span><br><span class=\"line\">1319</span><br><span class=\"line\">1320</span><br><span class=\"line\">1321</span><br><span class=\"line\">1322</span><br><span class=\"line\">1323</span><br><span class=\"line\">1324</span><br><span class=\"line\">1325</span><br><span class=\"line\">1326</span><br><span class=\"line\">1327</span><br><span class=\"line\">1328</span><br><span class=\"line\">1329</span><br><span class=\"line\">1330</span><br><span class=\"line\">1331</span><br><span class=\"line\">1332</span><br><span class=\"line\">1333</span><br><span class=\"line\">1334</span><br><span class=\"line\">1335</span><br><span class=\"line\">1336</span><br><span class=\"line\">1337</span><br><span class=\"line\">1338</span><br><span class=\"line\">1339</span><br><span class=\"line\">1340</span><br><span class=\"line\">1341</span><br><span class=\"line\">1342</span><br><span class=\"line\">1343</span><br><span class=\"line\">1344</span><br><span class=\"line\">1345</span><br><span class=\"line\">1346</span><br><span class=\"line\">1347</span><br><span class=\"line\">1348</span><br><span class=\"line\">1349</span><br><span class=\"line\">1350</span><br><span class=\"line\">1351</span><br><span class=\"line\">1352</span><br><span class=\"line\">1353</span><br><span class=\"line\">1354</span><br><span class=\"line\">1355</span><br><span class=\"line\">1356</span><br><span class=\"line\">1357</span><br><span class=\"line\">1358</span><br><span class=\"line\">1359</span><br><span class=\"line\">1360</span><br><span class=\"line\">1361</span><br><span class=\"line\">1362</span><br><span class=\"line\">1363</span><br><span class=\"line\">1364</span><br><span class=\"line\">1365</span><br><span class=\"line\">1366</span><br><span class=\"line\">1367</span><br><span class=\"line\">1368</span><br><span class=\"line\">1369</span><br><span class=\"line\">1370</span><br><span class=\"line\">1371</span><br><span class=\"line\">1372</span><br><span class=\"line\">1373</span><br><span class=\"line\">1374</span><br><span class=\"line\">1375</span><br><span class=\"line\">1376</span><br><span class=\"line\">1377</span><br><span class=\"line\">1378</span><br><span class=\"line\">1379</span><br><span class=\"line\">1380</span><br><span class=\"line\">1381</span><br><span class=\"line\">1382</span><br><span class=\"line\">1383</span><br><span class=\"line\">1384</span><br><span class=\"line\">1385</span><br><span class=\"line\">1386</span><br><span class=\"line\">1387</span><br><span class=\"line\">1388</span><br><span class=\"line\">1389</span><br><span class=\"line\">1390</span><br><span class=\"line\">1391</span><br><span class=\"line\">1392</span><br><span class=\"line\">1393</span><br><span class=\"line\">1394</span><br><span class=\"line\">1395</span><br><span class=\"line\">1396</span><br><span class=\"line\">1397</span><br><span class=\"line\">1398</span><br><span class=\"line\">1399</span><br><span class=\"line\">1400</span><br><span class=\"line\">1401</span><br><span class=\"line\">1402</span><br><span class=\"line\">1403</span><br><span class=\"line\">1404</span><br><span class=\"line\">1405</span><br><span class=\"line\">1406</span><br><span class=\"line\">1407</span><br><span class=\"line\">1408</span><br><span class=\"line\">1409</span><br><span class=\"line\">1410</span><br><span class=\"line\">1411</span><br><span class=\"line\">1412</span><br><span class=\"line\">1413</span><br><span class=\"line\">1414</span><br><span class=\"line\">1415</span><br><span class=\"line\">1416</span><br><span class=\"line\">1417</span><br><span class=\"line\">1418</span><br><span class=\"line\">1419</span><br><span class=\"line\">1420</span><br><span class=\"line\">1421</span><br><span class=\"line\">1422</span><br><span class=\"line\">1423</span><br><span class=\"line\">1424</span><br><span class=\"line\">1425</span><br><span class=\"line\">1426</span><br><span class=\"line\">1427</span><br><span class=\"line\">1428</span><br><span class=\"line\">1429</span><br><span class=\"line\">1430</span><br><span class=\"line\">1431</span><br><span class=\"line\">1432</span><br><span class=\"line\">1433</span><br><span class=\"line\">1434</span><br><span class=\"line\">1435</span><br><span class=\"line\">1436</span><br><span class=\"line\">1437</span><br><span class=\"line\">1438</span><br><span class=\"line\">1439</span><br><span class=\"line\">1440</span><br><span class=\"line\">1441</span><br><span class=\"line\">1442</span><br><span class=\"line\">1443</span><br><span class=\"line\">1444</span><br><span class=\"line\">1445</span><br><span class=\"line\">1446</span><br><span class=\"line\">1447</span><br><span class=\"line\">1448</span><br><span class=\"line\">1449</span><br><span class=\"line\">1450</span><br><span class=\"line\">1451</span><br><span class=\"line\">1452</span><br><span class=\"line\">1453</span><br><span class=\"line\">1454</span><br><span class=\"line\">1455</span><br><span class=\"line\">1456</span><br><span class=\"line\">1457</span><br><span class=\"line\">1458</span><br><span class=\"line\">1459</span><br><span class=\"line\">1460</span><br><span class=\"line\">1461</span><br><span class=\"line\">1462</span><br><span class=\"line\">1463</span><br><span class=\"line\">1464</span><br><span class=\"line\">1465</span><br><span class=\"line\">1466</span><br><span class=\"line\">1467</span><br><span class=\"line\">1468</span><br><span class=\"line\">1469</span><br><span class=\"line\">1470</span><br><span class=\"line\">1471</span><br><span class=\"line\">1472</span><br><span class=\"line\">1473</span><br><span class=\"line\">1474</span><br><span class=\"line\">1475</span><br><span class=\"line\">1476</span><br><span class=\"line\">1477</span><br><span class=\"line\">1478</span><br><span class=\"line\">1479</span><br><span class=\"line\">1480</span><br><span class=\"line\">1481</span><br><span class=\"line\">1482</span><br><span class=\"line\">1483</span><br><span class=\"line\">1484</span><br><span class=\"line\">1485</span><br><span class=\"line\">1486</span><br><span class=\"line\">1487</span><br><span class=\"line\">1488</span><br><span class=\"line\">1489</span><br><span class=\"line\">1490</span><br><span class=\"line\">1491</span><br><span class=\"line\">1492</span><br><span class=\"line\">1493</span><br><span class=\"line\">1494</span><br><span class=\"line\">1495</span><br><span class=\"line\">1496</span><br><span class=\"line\">1497</span><br><span class=\"line\">1498</span><br><span class=\"line\">1499</span><br><span class=\"line\">1500</span><br><span class=\"line\">1501</span><br><span class=\"line\">1502</span><br><span class=\"line\">1503</span><br><span class=\"line\">1504</span><br><span class=\"line\">1505</span><br><span class=\"line\">1506</span><br><span class=\"line\">1507</span><br><span class=\"line\">1508</span><br><span class=\"line\">1509</span><br><span class=\"line\">1510</span><br><span class=\"line\">1511</span><br><span class=\"line\">1512</span><br><span class=\"line\">1513</span><br><span class=\"line\">1514</span><br><span class=\"line\">1515</span><br><span class=\"line\">1516</span><br><span class=\"line\">1517</span><br><span class=\"line\">1518</span><br><span class=\"line\">1519</span><br><span class=\"line\">1520</span><br><span class=\"line\">1521</span><br><span class=\"line\">1522</span><br><span class=\"line\">1523</span><br><span class=\"line\">1524</span><br><span class=\"line\">1525</span><br><span class=\"line\">1526</span><br><span class=\"line\">1527</span><br><span class=\"line\">1528</span><br><span class=\"line\">1529</span><br><span class=\"line\">1530</span><br><span class=\"line\">1531</span><br><span class=\"line\">1532</span><br><span class=\"line\">1533</span><br><span class=\"line\">1534</span><br><span class=\"line\">1535</span><br><span class=\"line\">1536</span><br><span class=\"line\">1537</span><br><span class=\"line\">1538</span><br><span class=\"line\">1539</span><br><span class=\"line\">1540</span><br><span class=\"line\">1541</span><br><span class=\"line\">1542</span><br><span class=\"line\">1543</span><br><span class=\"line\">1544</span><br><span class=\"line\">1545</span><br><span class=\"line\">1546</span><br><span class=\"line\">1547</span><br><span class=\"line\">1548</span><br><span class=\"line\">1549</span><br><span class=\"line\">1550</span><br><span class=\"line\">1551</span><br><span class=\"line\">1552</span><br><span class=\"line\">1553</span><br><span class=\"line\">1554</span><br><span class=\"line\">1555</span><br><span class=\"line\">1556</span><br><span class=\"line\">1557</span><br><span class=\"line\">1558</span><br><span class=\"line\">1559</span><br><span class=\"line\">1560</span><br><span class=\"line\">1561</span><br><span class=\"line\">1562</span><br><span class=\"line\">1563</span><br><span class=\"line\">1564</span><br><span class=\"line\">1565</span><br><span class=\"line\">1566</span><br><span class=\"line\">1567</span><br><span class=\"line\">1568</span><br><span class=\"line\">1569</span><br><span class=\"line\">1570</span><br><span class=\"line\">1571</span><br><span class=\"line\">1572</span><br><span class=\"line\">1573</span><br><span class=\"line\">1574</span><br><span class=\"line\">1575</span><br><span class=\"line\">1576</span><br><span class=\"line\">1577</span><br><span class=\"line\">1578</span><br><span class=\"line\">1579</span><br><span class=\"line\">1580</span><br><span class=\"line\">1581</span><br><span class=\"line\">1582</span><br><span class=\"line\">1583</span><br><span class=\"line\">1584</span><br><span class=\"line\">1585</span><br><span class=\"line\">1586</span><br><span class=\"line\">1587</span><br><span class=\"line\">1588</span><br><span class=\"line\">1589</span><br><span class=\"line\">1590</span><br><span class=\"line\">1591</span><br><span class=\"line\">1592</span><br><span class=\"line\">1593</span><br><span class=\"line\">1594</span><br><span class=\"line\">1595</span><br><span class=\"line\">1596</span><br><span class=\"line\">1597</span><br><span class=\"line\">1598</span><br><span class=\"line\">1599</span><br><span class=\"line\">1600</span><br><span class=\"line\">1601</span><br><span class=\"line\">1602</span><br><span class=\"line\">1603</span><br><span class=\"line\">1604</span><br><span class=\"line\">1605</span><br><span class=\"line\">1606</span><br><span class=\"line\">1607</span><br><span class=\"line\">1608</span><br><span class=\"line\">1609</span><br><span class=\"line\">1610</span><br><span class=\"line\">1611</span><br><span class=\"line\">1612</span><br><span class=\"line\">1613</span><br><span class=\"line\">1614</span><br><span class=\"line\">1615</span><br><span class=\"line\">1616</span><br><span class=\"line\">1617</span><br><span class=\"line\">1618</span><br><span class=\"line\">1619</span><br><span class=\"line\">1620</span><br><span class=\"line\">1621</span><br><span class=\"line\">1622</span><br><span class=\"line\">1623</span><br><span class=\"line\">1624</span><br><span class=\"line\">1625</span><br><span class=\"line\">1626</span><br><span class=\"line\">1627</span><br><span class=\"line\">1628</span><br><span class=\"line\">1629</span><br><span class=\"line\">1630</span><br><span class=\"line\">1631</span><br><span class=\"line\">1632</span><br><span class=\"line\">1633</span><br><span class=\"line\">1634</span><br><span class=\"line\">1635</span><br><span class=\"line\">1636</span><br><span class=\"line\">1637</span><br><span class=\"line\">1638</span><br><span class=\"line\">1639</span><br><span class=\"line\">1640</span><br><span class=\"line\">1641</span><br><span class=\"line\">1642</span><br><span class=\"line\">1643</span><br><span class=\"line\">1644</span><br><span class=\"line\">1645</span><br><span class=\"line\">1646</span><br><span class=\"line\">1647</span><br><span class=\"line\">1648</span><br><span class=\"line\">1649</span><br><span class=\"line\">1650</span><br><span class=\"line\">1651</span><br><span class=\"line\">1652</span><br><span class=\"line\">1653</span><br><span class=\"line\">1654</span><br><span class=\"line\">1655</span><br><span class=\"line\">1656</span><br><span class=\"line\">1657</span><br><span class=\"line\">1658</span><br><span class=\"line\">1659</span><br><span class=\"line\">1660</span><br><span class=\"line\">1661</span><br><span class=\"line\">1662</span><br><span class=\"line\">1663</span><br><span class=\"line\">1664</span><br><span class=\"line\">1665</span><br><span class=\"line\">1666</span><br><span class=\"line\">1667</span><br><span class=\"line\">1668</span><br><span class=\"line\">1669</span><br><span class=\"line\">1670</span><br><span class=\"line\">1671</span><br><span class=\"line\">1672</span><br><span class=\"line\">1673</span><br><span class=\"line\">1674</span><br><span class=\"line\">1675</span><br><span class=\"line\">1676</span><br><span class=\"line\">1677</span><br><span class=\"line\">1678</span><br><span class=\"line\">1679</span><br><span class=\"line\">1680</span><br><span class=\"line\">1681</span><br><span class=\"line\">1682</span><br><span class=\"line\">1683</span><br><span class=\"line\">1684</span><br><span class=\"line\">1685</span><br><span class=\"line\">1686</span><br><span class=\"line\">1687</span><br><span class=\"line\">1688</span><br><span class=\"line\">1689</span><br><span class=\"line\">1690</span><br><span class=\"line\">1691</span><br><span class=\"line\">1692</span><br><span class=\"line\">1693</span><br><span class=\"line\">1694</span><br><span class=\"line\">1695</span><br><span class=\"line\">1696</span><br><span class=\"line\">1697</span><br><span class=\"line\">1698</span><br><span class=\"line\">1699</span><br><span class=\"line\">1700</span><br><span class=\"line\">1701</span><br><span class=\"line\">1702</span><br><span class=\"line\">1703</span><br><span class=\"line\">1704</span><br><span class=\"line\">1705</span><br><span class=\"line\">1706</span><br><span class=\"line\">1707</span><br><span class=\"line\">1708</span><br><span class=\"line\">1709</span><br><span class=\"line\">1710</span><br><span class=\"line\">1711</span><br><span class=\"line\">1712</span><br><span class=\"line\">1713</span><br><span class=\"line\">1714</span><br><span class=\"line\">1715</span><br><span class=\"line\">1716</span><br><span class=\"line\">1717</span><br><span class=\"line\">1718</span><br><span class=\"line\">1719</span><br><span class=\"line\">1720</span><br><span class=\"line\">1721</span><br><span class=\"line\">1722</span><br><span class=\"line\">1723</span><br><span class=\"line\">1724</span><br><span class=\"line\">1725</span><br><span class=\"line\">1726</span><br><span class=\"line\">1727</span><br><span class=\"line\">1728</span><br><span class=\"line\">1729</span><br><span class=\"line\">1730</span><br><span class=\"line\">1731</span><br><span class=\"line\">1732</span><br><span class=\"line\">1733</span><br><span class=\"line\">1734</span><br><span class=\"line\">1735</span><br><span class=\"line\">1736</span><br><span class=\"line\">1737</span><br><span class=\"line\">1738</span><br><span class=\"line\">1739</span><br><span class=\"line\">1740</span><br><span class=\"line\">1741</span><br><span class=\"line\">1742</span><br><span class=\"line\">1743</span><br><span class=\"line\">1744</span><br><span class=\"line\">1745</span><br><span class=\"line\">1746</span><br><span class=\"line\">1747</span><br><span class=\"line\">1748</span><br><span class=\"line\">1749</span><br><span class=\"line\">1750</span><br><span class=\"line\">1751</span><br><span class=\"line\">1752</span><br><span class=\"line\">1753</span><br><span class=\"line\">1754</span><br><span class=\"line\">1755</span><br><span class=\"line\">1756</span><br><span class=\"line\">1757</span><br><span class=\"line\">1758</span><br><span class=\"line\">1759</span><br><span class=\"line\">1760</span><br><span class=\"line\">1761</span><br><span class=\"line\">1762</span><br><span class=\"line\">1763</span><br><span class=\"line\">1764</span><br><span class=\"line\">1765</span><br><span class=\"line\">1766</span><br><span class=\"line\">1767</span><br><span class=\"line\">1768</span><br><span class=\"line\">1769</span><br><span class=\"line\">1770</span><br><span class=\"line\">1771</span><br><span class=\"line\">1772</span><br><span class=\"line\">1773</span><br><span class=\"line\">1774</span><br><span class=\"line\">1775</span><br><span class=\"line\">1776</span><br><span class=\"line\">1777</span><br><span class=\"line\">1778</span><br><span class=\"line\">1779</span><br><span class=\"line\">1780</span><br><span class=\"line\">1781</span><br><span class=\"line\">1782</span><br><span class=\"line\">1783</span><br><span class=\"line\">1784</span><br><span class=\"line\">1785</span><br><span class=\"line\">1786</span><br><span class=\"line\">1787</span><br><span class=\"line\">1788</span><br><span class=\"line\">1789</span><br><span class=\"line\">1790</span><br><span class=\"line\">1791</span><br><span class=\"line\">1792</span><br><span class=\"line\">1793</span><br><span class=\"line\">1794</span><br><span class=\"line\">1795</span><br><span class=\"line\">1796</span><br><span class=\"line\">1797</span><br><span class=\"line\">1798</span><br><span class=\"line\">1799</span><br><span class=\"line\">1800</span><br><span class=\"line\">1801</span><br><span class=\"line\">1802</span><br><span class=\"line\">1803</span><br><span class=\"line\">1804</span><br><span class=\"line\">1805</span><br><span class=\"line\">1806</span><br><span class=\"line\">1807</span><br><span class=\"line\">1808</span><br><span class=\"line\">1809</span><br><span class=\"line\">1810</span><br><span class=\"line\">1811</span><br><span class=\"line\">1812</span><br><span class=\"line\">1813</span><br><span class=\"line\">1814</span><br><span class=\"line\">1815</span><br><span class=\"line\">1816</span><br><span class=\"line\">1817</span><br><span class=\"line\">1818</span><br><span class=\"line\">1819</span><br><span class=\"line\">1820</span><br><span class=\"line\">1821</span><br><span class=\"line\">1822</span><br><span class=\"line\">1823</span><br><span class=\"line\">1824</span><br><span class=\"line\">1825</span><br><span class=\"line\">1826</span><br><span class=\"line\">1827</span><br><span class=\"line\">1828</span><br><span class=\"line\">1829</span><br><span class=\"line\">1830</span><br><span class=\"line\">1831</span><br><span class=\"line\">1832</span><br><span class=\"line\">1833</span><br><span class=\"line\">1834</span><br><span class=\"line\">1835</span><br><span class=\"line\">1836</span><br><span class=\"line\">1837</span><br><span class=\"line\">1838</span><br><span class=\"line\">1839</span><br><span class=\"line\">1840</span><br><span class=\"line\">1841</span><br><span class=\"line\">1842</span><br><span class=\"line\">1843</span><br><span class=\"line\">1844</span><br><span class=\"line\">1845</span><br><span class=\"line\">1846</span><br><span class=\"line\">1847</span><br><span class=\"line\">1848</span><br><span class=\"line\">1849</span><br><span class=\"line\">1850</span><br><span class=\"line\">1851</span><br><span class=\"line\">1852</span><br><span class=\"line\">1853</span><br><span class=\"line\">1854</span><br><span class=\"line\">1855</span><br><span class=\"line\">1856</span><br><span class=\"line\">1857</span><br><span class=\"line\">1858</span><br><span class=\"line\">1859</span><br><span class=\"line\">1860</span><br><span class=\"line\">1861</span><br><span class=\"line\">1862</span><br><span class=\"line\">1863</span><br><span class=\"line\">1864</span><br><span class=\"line\">1865</span><br><span class=\"line\">1866</span><br><span class=\"line\">1867</span><br><span class=\"line\">1868</span><br><span class=\"line\">1869</span><br><span class=\"line\">1870</span><br><span class=\"line\">1871</span><br><span class=\"line\">1872</span><br><span class=\"line\">1873</span><br><span class=\"line\">1874</span><br><span class=\"line\">1875</span><br><span class=\"line\">1876</span><br><span class=\"line\">1877</span><br><span class=\"line\">1878</span><br><span class=\"line\">1879</span><br><span class=\"line\">1880</span><br><span class=\"line\">1881</span><br><span class=\"line\">1882</span><br><span class=\"line\">1883</span><br><span class=\"line\">1884</span><br><span class=\"line\">1885</span><br><span class=\"line\">1886</span><br><span class=\"line\">1887</span><br><span class=\"line\">1888</span><br><span class=\"line\">1889</span><br><span class=\"line\">1890</span><br><span class=\"line\">1891</span><br><span class=\"line\">1892</span><br><span class=\"line\">1893</span><br><span class=\"line\">1894</span><br><span class=\"line\">1895</span><br><span class=\"line\">1896</span><br><span class=\"line\">1897</span><br><span class=\"line\">1898</span><br><span class=\"line\">1899</span><br><span class=\"line\">1900</span><br><span class=\"line\">1901</span><br><span class=\"line\">1902</span><br><span class=\"line\">1903</span><br><span class=\"line\">1904</span><br><span class=\"line\">1905</span><br><span class=\"line\">1906</span><br><span class=\"line\">1907</span><br><span class=\"line\">1908</span><br><span class=\"line\">1909</span><br><span class=\"line\">1910</span><br><span class=\"line\">1911</span><br><span class=\"line\">1912</span><br><span class=\"line\">1913</span><br><span class=\"line\">1914</span><br><span class=\"line\">1915</span><br><span class=\"line\">1916</span><br><span class=\"line\">1917</span><br><span class=\"line\">1918</span><br><span class=\"line\">1919</span><br><span class=\"line\">1920</span><br><span class=\"line\">1921</span><br><span class=\"line\">1922</span><br><span class=\"line\">1923</span><br><span class=\"line\">1924</span><br><span class=\"line\">1925</span><br><span class=\"line\">1926</span><br><span class=\"line\">1927</span><br><span class=\"line\">1928</span><br><span class=\"line\">1929</span><br><span class=\"line\">1930</span><br><span class=\"line\">1931</span><br><span class=\"line\">1932</span><br><span class=\"line\">1933</span><br><span class=\"line\">1934</span><br><span class=\"line\">1935</span><br><span class=\"line\">1936</span><br><span class=\"line\">1937</span><br><span class=\"line\">1938</span><br><span class=\"line\">1939</span><br><span class=\"line\">1940</span><br><span class=\"line\">1941</span><br><span class=\"line\">1942</span><br><span class=\"line\">1943</span><br><span class=\"line\">1944</span><br><span class=\"line\">1945</span><br><span class=\"line\">1946</span><br><span class=\"line\">1947</span><br><span class=\"line\">1948</span><br><span class=\"line\">1949</span><br><span class=\"line\">1950</span><br><span class=\"line\">1951</span><br><span class=\"line\">1952</span><br><span class=\"line\">1953</span><br><span class=\"line\">1954</span><br><span class=\"line\">1955</span><br><span class=\"line\">1956</span><br><span class=\"line\">1957</span><br><span class=\"line\">1958</span><br><span class=\"line\">1959</span><br><span class=\"line\">1960</span><br><span class=\"line\">1961</span><br><span class=\"line\">1962</span><br><span class=\"line\">1963</span><br><span class=\"line\">1964</span><br><span class=\"line\">1965</span><br><span class=\"line\">1966</span><br><span class=\"line\">1967</span><br><span class=\"line\">1968</span><br><span class=\"line\">1969</span><br><span class=\"line\">1970</span><br><span class=\"line\">1971</span><br><span class=\"line\">1972</span><br><span class=\"line\">1973</span><br><span class=\"line\">1974</span><br><span class=\"line\">1975</span><br><span class=\"line\">1976</span><br><span class=\"line\">1977</span><br><span class=\"line\">1978</span><br><span class=\"line\">1979</span><br><span class=\"line\">1980</span><br><span class=\"line\">1981</span><br><span class=\"line\">1982</span><br><span class=\"line\">1983</span><br><span class=\"line\">1984</span><br><span class=\"line\">1985</span><br><span class=\"line\">1986</span><br><span class=\"line\">1987</span><br><span class=\"line\">1988</span><br><span class=\"line\">1989</span><br><span class=\"line\">1990</span><br><span class=\"line\">1991</span><br><span class=\"line\">1992</span><br><span class=\"line\">1993</span><br><span class=\"line\">1994</span><br><span class=\"line\">1995</span><br><span class=\"line\">1996</span><br><span class=\"line\">1997</span><br><span class=\"line\">1998</span><br><span class=\"line\">1999</span><br><span class=\"line\">2000</span><br><span class=\"line\">2001</span><br><span class=\"line\">2002</span><br><span class=\"line\">2003</span><br><span class=\"line\">2004</span><br><span class=\"line\">2005</span><br><span class=\"line\">2006</span><br><span class=\"line\">2007</span><br><span class=\"line\">2008</span><br><span class=\"line\">2009</span><br><span class=\"line\">2010</span><br><span class=\"line\">2011</span><br><span class=\"line\">2012</span><br><span class=\"line\">2013</span><br><span class=\"line\">2014</span><br><span class=\"line\">2015</span><br><span class=\"line\">2016</span><br><span class=\"line\">2017</span><br><span class=\"line\">2018</span><br><span class=\"line\">2019</span><br><span class=\"line\">2020</span><br><span class=\"line\">2021</span><br><span class=\"line\">2022</span><br><span class=\"line\">2023</span><br><span class=\"line\">2024</span><br><span class=\"line\">2025</span><br><span class=\"line\">2026</span><br><span class=\"line\">2027</span><br><span class=\"line\">2028</span><br><span class=\"line\">2029</span><br><span class=\"line\">2030</span><br><span class=\"line\">2031</span><br><span class=\"line\">2032</span><br><span class=\"line\">2033</span><br><span class=\"line\">2034</span><br><span class=\"line\">2035</span><br><span class=\"line\">2036</span><br><span class=\"line\">2037</span><br><span class=\"line\">2038</span><br><span class=\"line\">2039</span><br><span class=\"line\">2040</span><br><span class=\"line\">2041</span><br><span class=\"line\">2042</span><br><span class=\"line\">2043</span><br><span class=\"line\">2044</span><br><span class=\"line\">2045</span><br><span class=\"line\">2046</span><br><span class=\"line\">2047</span><br><span class=\"line\">2048</span><br><span class=\"line\">2049</span><br><span class=\"line\">2050</span><br><span class=\"line\">2051</span><br><span class=\"line\">2052</span><br><span class=\"line\">2053</span><br><span class=\"line\">2054</span><br><span class=\"line\">2055</span><br><span class=\"line\">2056</span><br><span class=\"line\">2057</span><br><span class=\"line\">2058</span><br><span class=\"line\">2059</span><br><span class=\"line\">2060</span><br><span class=\"line\">2061</span><br><span class=\"line\">2062</span><br><span class=\"line\">2063</span><br><span class=\"line\">2064</span><br><span class=\"line\">2065</span><br><span class=\"line\">2066</span><br><span class=\"line\">2067</span><br><span class=\"line\">2068</span><br><span class=\"line\">2069</span><br><span class=\"line\">2070</span><br><span class=\"line\">2071</span><br><span class=\"line\">2072</span><br><span class=\"line\">2073</span><br><span class=\"line\">2074</span><br><span class=\"line\">2075</span><br><span class=\"line\">2076</span><br><span class=\"line\">2077</span><br><span class=\"line\">2078</span><br><span class=\"line\">2079</span><br><span class=\"line\">2080</span><br><span class=\"line\">2081</span><br><span class=\"line\">2082</span><br><span class=\"line\">2083</span><br><span class=\"line\">2084</span><br><span class=\"line\">2085</span><br><span class=\"line\">2086</span><br><span class=\"line\">2087</span><br><span class=\"line\">2088</span><br><span class=\"line\">2089</span><br><span class=\"line\">2090</span><br><span class=\"line\">2091</span><br><span class=\"line\">2092</span><br><span class=\"line\">2093</span><br><span class=\"line\">2094</span><br><span class=\"line\">2095</span><br><span class=\"line\">2096</span><br><span class=\"line\">2097</span><br><span class=\"line\">2098</span><br><span class=\"line\">2099</span><br><span class=\"line\">2100</span><br><span class=\"line\">2101</span><br><span class=\"line\">2102</span><br><span class=\"line\">2103</span><br><span class=\"line\">2104</span><br><span class=\"line\">2105</span><br><span class=\"line\">2106</span><br><span class=\"line\">2107</span><br><span class=\"line\">2108</span><br><span class=\"line\">2109</span><br><span class=\"line\">2110</span><br><span class=\"line\">2111</span><br><span class=\"line\">2112</span><br><span class=\"line\">2113</span><br><span class=\"line\">2114</span><br><span class=\"line\">2115</span><br><span class=\"line\">2116</span><br><span class=\"line\">2117</span><br><span class=\"line\">2118</span><br><span class=\"line\">2119</span><br><span class=\"line\">2120</span><br><span class=\"line\">2121</span><br><span class=\"line\">2122</span><br><span class=\"line\">2123</span><br><span class=\"line\">2124</span><br><span class=\"line\">2125</span><br><span class=\"line\">2126</span><br><span class=\"line\">2127</span><br><span class=\"line\">2128</span><br><span class=\"line\">2129</span><br><span class=\"line\">2130</span><br><span class=\"line\">2131</span><br><span class=\"line\">2132</span><br><span class=\"line\">2133</span><br><span class=\"line\">2134</span><br><span class=\"line\">2135</span><br><span class=\"line\">2136</span><br><span class=\"line\">2137</span><br><span class=\"line\">2138</span><br><span class=\"line\">2139</span><br><span class=\"line\">2140</span><br><span class=\"line\">2141</span><br><span class=\"line\">2142</span><br><span class=\"line\">2143</span><br><span class=\"line\">2144</span><br><span class=\"line\">2145</span><br><span class=\"line\">2146</span><br><span class=\"line\">2147</span><br><span class=\"line\">2148</span><br><span class=\"line\">2149</span><br><span class=\"line\">2150</span><br><span class=\"line\">2151</span><br><span class=\"line\">2152</span><br><span class=\"line\">2153</span><br><span class=\"line\">2154</span><br><span class=\"line\">2155</span><br><span class=\"line\">2156</span><br><span class=\"line\">2157</span><br><span class=\"line\">2158</span><br><span class=\"line\">2159</span><br><span class=\"line\">2160</span><br><span class=\"line\">2161</span><br><span class=\"line\">2162</span><br><span class=\"line\">2163</span><br><span class=\"line\">2164</span><br><span class=\"line\">2165</span><br><span class=\"line\">2166</span><br><span class=\"line\">2167</span><br><span class=\"line\">2168</span><br><span class=\"line\">2169</span><br><span class=\"line\">2170</span><br><span class=\"line\">2171</span><br><span class=\"line\">2172</span><br><span class=\"line\">2173</span><br><span class=\"line\">2174</span><br><span class=\"line\">2175</span><br><span class=\"line\">2176</span><br><span class=\"line\">2177</span><br><span class=\"line\">2178</span><br><span class=\"line\">2179</span><br><span class=\"line\">2180</span><br><span class=\"line\">2181</span><br><span class=\"line\">2182</span><br><span class=\"line\">2183</span><br><span class=\"line\">2184</span><br><span class=\"line\">2185</span><br><span class=\"line\">2186</span><br><span class=\"line\">2187</span><br><span class=\"line\">2188</span><br><span class=\"line\">2189</span><br><span class=\"line\">2190</span><br><span class=\"line\">2191</span><br><span class=\"line\">2192</span><br><span class=\"line\">2193</span><br><span class=\"line\">2194</span><br><span class=\"line\">2195</span><br><span class=\"line\">2196</span><br><span class=\"line\">2197</span><br><span class=\"line\">2198</span><br><span class=\"line\">2199</span><br><span class=\"line\">2200</span><br><span class=\"line\">2201</span><br><span class=\"line\">2202</span><br><span class=\"line\">2203</span><br><span class=\"line\">2204</span><br><span class=\"line\">2205</span><br><span class=\"line\">2206</span><br><span class=\"line\">2207</span><br><span class=\"line\">2208</span><br><span class=\"line\">2209</span><br><span class=\"line\">2210</span><br><span class=\"line\">2211</span><br><span class=\"line\">2212</span><br><span class=\"line\">2213</span><br><span class=\"line\">2214</span><br><span class=\"line\">2215</span><br><span class=\"line\">2216</span><br><span class=\"line\">2217</span><br><span class=\"line\">2218</span><br><span class=\"line\">2219</span><br><span class=\"line\">2220</span><br><span class=\"line\">2221</span><br><span class=\"line\">2222</span><br><span class=\"line\">2223</span><br><span class=\"line\">2224</span><br><span class=\"line\">2225</span><br><span class=\"line\">2226</span><br><span class=\"line\">2227</span><br><span class=\"line\">2228</span><br><span class=\"line\">2229</span><br><span class=\"line\">2230</span><br><span class=\"line\">2231</span><br><span class=\"line\">2232</span><br><span class=\"line\">2233</span><br><span class=\"line\">2234</span><br><span class=\"line\">2235</span><br><span class=\"line\">2236</span><br><span class=\"line\">2237</span><br><span class=\"line\">2238</span><br><span class=\"line\">2239</span><br><span class=\"line\">2240</span><br><span class=\"line\">2241</span><br><span class=\"line\">2242</span><br><span class=\"line\">2243</span><br><span class=\"line\">2244</span><br><span class=\"line\">2245</span><br><span class=\"line\">2246</span><br><span class=\"line\">2247</span><br><span class=\"line\">2248</span><br><span class=\"line\">2249</span><br><span class=\"line\">2250</span><br><span class=\"line\">2251</span><br><span class=\"line\">2252</span><br><span class=\"line\">2253</span><br><span class=\"line\">2254</span><br><span class=\"line\">2255</span><br><span class=\"line\">2256</span><br><span class=\"line\">2257</span><br><span class=\"line\">2258</span><br><span class=\"line\">2259</span><br><span class=\"line\">2260</span><br><span class=\"line\">2261</span><br><span class=\"line\">2262</span><br><span class=\"line\">2263</span><br><span class=\"line\">2264</span><br><span class=\"line\">2265</span><br><span class=\"line\">2266</span><br><span class=\"line\">2267</span><br><span class=\"line\">2268</span><br><span class=\"line\">2269</span><br><span class=\"line\">2270</span><br><span class=\"line\">2271</span><br><span class=\"line\">2272</span><br><span class=\"line\">2273</span><br><span class=\"line\">2274</span><br><span class=\"line\">2275</span><br><span class=\"line\">2276</span><br><span class=\"line\">2277</span><br><span class=\"line\">2278</span><br><span class=\"line\">2279</span><br><span class=\"line\">2280</span><br><span class=\"line\">2281</span><br><span class=\"line\">2282</span><br><span class=\"line\">2283</span><br><span class=\"line\">2284</span><br><span class=\"line\">2285</span><br><span class=\"line\">2286</span><br><span class=\"line\">2287</span><br><span class=\"line\">2288</span><br><span class=\"line\">2289</span><br><span class=\"line\">2290</span><br><span class=\"line\">2291</span><br><span class=\"line\">2292</span><br><span class=\"line\">2293</span><br><span class=\"line\">2294</span><br><span class=\"line\">2295</span><br><span class=\"line\">2296</span><br><span class=\"line\">2297</span><br><span class=\"line\">2298</span><br><span class=\"line\">2299</span><br><span class=\"line\">2300</span><br><span class=\"line\">2301</span><br><span class=\"line\">2302</span><br><span class=\"line\">2303</span><br><span class=\"line\">2304</span><br><span class=\"line\">2305</span><br><span class=\"line\">2306</span><br><span class=\"line\">2307</span><br><span class=\"line\">2308</span><br><span class=\"line\">2309</span><br><span class=\"line\">2310</span><br><span class=\"line\">2311</span><br><span class=\"line\">2312</span><br><span class=\"line\">2313</span><br><span class=\"line\">2314</span><br><span class=\"line\">2315</span><br><span class=\"line\">2316</span><br><span class=\"line\">2317</span><br><span class=\"line\">2318</span><br><span class=\"line\">2319</span><br><span class=\"line\">2320</span><br><span class=\"line\">2321</span><br><span class=\"line\">2322</span><br><span class=\"line\">2323</span><br><span class=\"line\">2324</span><br><span class=\"line\">2325</span><br><span class=\"line\">2326</span><br><span class=\"line\">2327</span><br><span class=\"line\">2328</span><br><span class=\"line\">2329</span><br><span class=\"line\">2330</span><br><span class=\"line\">2331</span><br><span class=\"line\">2332</span><br><span class=\"line\">2333</span><br><span class=\"line\">2334</span><br><span class=\"line\">2335</span><br><span class=\"line\">2336</span><br><span class=\"line\">2337</span><br><span class=\"line\">2338</span><br><span class=\"line\">2339</span><br><span class=\"line\">2340</span><br><span class=\"line\">2341</span><br><span class=\"line\">2342</span><br><span class=\"line\">2343</span><br><span class=\"line\">2344</span><br><span class=\"line\">2345</span><br><span class=\"line\">2346</span><br><span class=\"line\">2347</span><br><span class=\"line\">2348</span><br><span class=\"line\">2349</span><br><span class=\"line\">2350</span><br><span class=\"line\">2351</span><br><span class=\"line\">2352</span><br><span class=\"line\">2353</span><br><span class=\"line\">2354</span><br><span class=\"line\">2355</span><br><span class=\"line\">2356</span><br><span class=\"line\">2357</span><br><span class=\"line\">2358</span><br><span class=\"line\">2359</span><br><span class=\"line\">2360</span><br><span class=\"line\">2361</span><br><span class=\"line\">2362</span><br><span class=\"line\">2363</span><br><span class=\"line\">2364</span><br><span class=\"line\">2365</span><br><span class=\"line\">2366</span><br><span class=\"line\">2367</span><br><span class=\"line\">2368</span><br><span class=\"line\">2369</span><br><span class=\"line\">2370</span><br><span class=\"line\">2371</span><br><span class=\"line\">2372</span><br><span class=\"line\">2373</span><br><span class=\"line\">2374</span><br><span class=\"line\">2375</span><br><span class=\"line\">2376</span><br><span class=\"line\">2377</span><br><span class=\"line\">2378</span><br><span class=\"line\">2379</span><br><span class=\"line\">2380</span><br><span class=\"line\">2381</span><br><span class=\"line\">2382</span><br><span class=\"line\">2383</span><br><span class=\"line\">2384</span><br><span class=\"line\">2385</span><br><span class=\"line\">2386</span><br><span class=\"line\">2387</span><br><span class=\"line\">2388</span><br><span class=\"line\">2389</span><br><span class=\"line\">2390</span><br><span class=\"line\">2391</span><br><span class=\"line\">2392</span><br><span class=\"line\">2393</span><br><span class=\"line\">2394</span><br><span class=\"line\">2395</span><br><span class=\"line\">2396</span><br><span class=\"line\">2397</span><br><span class=\"line\">2398</span><br><span class=\"line\">2399</span><br><span class=\"line\">2400</span><br><span class=\"line\">2401</span><br><span class=\"line\">2402</span><br><span class=\"line\">2403</span><br><span class=\"line\">2404</span><br><span class=\"line\">2405</span><br><span class=\"line\">2406</span><br><span class=\"line\">2407</span><br><span class=\"line\">2408</span><br><span class=\"line\">2409</span><br><span class=\"line\">2410</span><br><span class=\"line\">2411</span><br><span class=\"line\">2412</span><br><span class=\"line\">2413</span><br><span class=\"line\">2414</span><br><span class=\"line\">2415</span><br><span class=\"line\">2416</span><br><span class=\"line\">2417</span><br><span class=\"line\">2418</span><br><span class=\"line\">2419</span><br><span class=\"line\">2420</span><br><span class=\"line\">2421</span><br><span class=\"line\">2422</span><br><span class=\"line\">2423</span><br><span class=\"line\">2424</span><br><span class=\"line\">2425</span><br><span class=\"line\">2426</span><br><span class=\"line\">2427</span><br><span class=\"line\">2428</span><br><span class=\"line\">2429</span><br><span class=\"line\">2430</span><br><span class=\"line\">2431</span><br><span class=\"line\">2432</span><br><span class=\"line\">2433</span><br><span class=\"line\">2434</span><br><span class=\"line\">2435</span><br><span class=\"line\">2436</span><br><span class=\"line\">2437</span><br><span class=\"line\">2438</span><br><span class=\"line\">2439</span><br><span class=\"line\">2440</span><br><span class=\"line\">2441</span><br><span class=\"line\">2442</span><br><span class=\"line\">2443</span><br><span class=\"line\">2444</span><br><span class=\"line\">2445</span><br><span class=\"line\">2446</span><br><span class=\"line\">2447</span><br><span class=\"line\">2448</span><br><span class=\"line\">2449</span><br><span class=\"line\">2450</span><br><span class=\"line\">2451</span><br><span class=\"line\">2452</span><br><span class=\"line\">2453</span><br><span class=\"line\">2454</span><br><span class=\"line\">2455</span><br><span class=\"line\">2456</span><br><span class=\"line\">2457</span><br><span class=\"line\">2458</span><br><span class=\"line\">2459</span><br><span class=\"line\">2460</span><br><span class=\"line\">2461</span><br><span class=\"line\">2462</span><br><span class=\"line\">2463</span><br><span class=\"line\">2464</span><br><span class=\"line\">2465</span><br><span class=\"line\">2466</span><br><span class=\"line\">2467</span><br><span class=\"line\">2468</span><br><span class=\"line\">2469</span><br><span class=\"line\">2470</span><br><span class=\"line\">2471</span><br><span class=\"line\">2472</span><br><span class=\"line\">2473</span><br><span class=\"line\">2474</span><br><span class=\"line\">2475</span><br><span class=\"line\">2476</span><br><span class=\"line\">2477</span><br><span class=\"line\">2478</span><br><span class=\"line\">2479</span><br><span class=\"line\">2480</span><br><span class=\"line\">2481</span><br><span class=\"line\">2482</span><br><span class=\"line\">2483</span><br><span class=\"line\">2484</span><br><span class=\"line\">2485</span><br><span class=\"line\">2486</span><br><span class=\"line\">2487</span><br><span class=\"line\">2488</span><br><span class=\"line\">2489</span><br><span class=\"line\">2490</span><br><span class=\"line\">2491</span><br><span class=\"line\">2492</span><br><span class=\"line\">2493</span><br><span class=\"line\">2494</span><br><span class=\"line\">2495</span><br><span class=\"line\">2496</span><br><span class=\"line\">2497</span><br><span class=\"line\">2498</span><br><span class=\"line\">2499</span><br><span class=\"line\">2500</span><br><span class=\"line\">2501</span><br><span class=\"line\">2502</span><br><span class=\"line\">2503</span><br><span class=\"line\">2504</span><br><span class=\"line\">2505</span><br><span class=\"line\">2506</span><br><span class=\"line\">2507</span><br><span class=\"line\">2508</span><br><span class=\"line\">2509</span><br><span class=\"line\">2510</span><br><span class=\"line\">2511</span><br><span class=\"line\">2512</span><br><span class=\"line\">2513</span><br><span class=\"line\">2514</span><br><span class=\"line\">2515</span><br><span class=\"line\">2516</span><br><span class=\"line\">2517</span><br><span class=\"line\">2518</span><br><span class=\"line\">2519</span><br><span class=\"line\">2520</span><br><span class=\"line\">2521</span><br><span class=\"line\">2522</span><br><span class=\"line\">2523</span><br><span class=\"line\">2524</span><br><span class=\"line\">2525</span><br><span class=\"line\">2526</span><br><span class=\"line\">2527</span><br><span class=\"line\">2528</span><br><span class=\"line\">2529</span><br><span class=\"line\">2530</span><br><span class=\"line\">2531</span><br><span class=\"line\">2532</span><br><span class=\"line\">2533</span><br><span class=\"line\">2534</span><br><span class=\"line\">2535</span><br><span class=\"line\">2536</span><br><span class=\"line\">2537</span><br><span class=\"line\">2538</span><br><span class=\"line\">2539</span><br><span class=\"line\">2540</span><br><span class=\"line\">2541</span><br><span class=\"line\">2542</span><br><span class=\"line\">2543</span><br><span class=\"line\">2544</span><br><span class=\"line\">2545</span><br><span class=\"line\">2546</span><br><span class=\"line\">2547</span><br><span class=\"line\">2548</span><br><span class=\"line\">2549</span><br><span class=\"line\">2550</span><br><span class=\"line\">2551</span><br><span class=\"line\">2552</span><br><span class=\"line\">2553</span><br><span class=\"line\">2554</span><br><span class=\"line\">2555</span><br><span class=\"line\">2556</span><br><span class=\"line\">2557</span><br><span class=\"line\">2558</span><br><span class=\"line\">2559</span><br><span class=\"line\">2560</span><br><span class=\"line\">2561</span><br><span class=\"line\">2562</span><br><span class=\"line\">2563</span><br><span class=\"line\">2564</span><br><span class=\"line\">2565</span><br><span class=\"line\">2566</span><br><span class=\"line\">2567</span><br><span class=\"line\">2568</span><br><span class=\"line\">2569</span><br><span class=\"line\">2570</span><br><span class=\"line\">2571</span><br><span class=\"line\">2572</span><br><span class=\"line\">2573</span><br><span class=\"line\">2574</span><br><span class=\"line\">2575</span><br><span class=\"line\">2576</span><br><span class=\"line\">2577</span><br><span class=\"line\">2578</span><br><span class=\"line\">2579</span><br><span class=\"line\">2580</span><br><span class=\"line\">2581</span><br><span class=\"line\">2582</span><br><span class=\"line\">2583</span><br><span class=\"line\">2584</span><br><span class=\"line\">2585</span><br><span class=\"line\">2586</span><br><span class=\"line\">2587</span><br><span class=\"line\">2588</span><br><span class=\"line\">2589</span><br><span class=\"line\">2590</span><br><span class=\"line\">2591</span><br><span class=\"line\">2592</span><br><span class=\"line\">2593</span><br><span class=\"line\">2594</span><br><span class=\"line\">2595</span><br><span class=\"line\">2596</span><br><span class=\"line\">2597</span><br><span class=\"line\">2598</span><br><span class=\"line\">2599</span><br><span class=\"line\">2600</span><br><span class=\"line\">2601</span><br><span class=\"line\">2602</span><br><span class=\"line\">2603</span><br><span class=\"line\">2604</span><br><span class=\"line\">2605</span><br><span class=\"line\">2606</span><br><span class=\"line\">2607</span><br><span class=\"line\">2608</span><br><span class=\"line\">2609</span><br><span class=\"line\">2610</span><br><span class=\"line\">2611</span><br><span class=\"line\">2612</span><br><span class=\"line\">2613</span><br><span class=\"line\">2614</span><br><span class=\"line\">2615</span><br><span class=\"line\">2616</span><br><span class=\"line\">2617</span><br><span class=\"line\">2618</span><br><span class=\"line\">2619</span><br><span class=\"line\">2620</span><br><span class=\"line\">2621</span><br><span class=\"line\">2622</span><br><span class=\"line\">2623</span><br><span class=\"line\">2624</span><br><span class=\"line\">2625</span><br><span class=\"line\">2626</span><br><span class=\"line\">2627</span><br><span class=\"line\">2628</span><br><span class=\"line\">2629</span><br><span class=\"line\">2630</span><br><span class=\"line\">2631</span><br><span class=\"line\">2632</span><br><span class=\"line\">2633</span><br><span class=\"line\">2634</span><br><span class=\"line\">2635</span><br><span class=\"line\">2636</span><br><span class=\"line\">2637</span><br><span class=\"line\">2638</span><br><span class=\"line\">2639</span><br><span class=\"line\">2640</span><br><span class=\"line\">2641</span><br><span class=\"line\">2642</span><br><span class=\"line\">2643</span><br><span class=\"line\">2644</span><br><span class=\"line\">2645</span><br><span class=\"line\">2646</span><br><span class=\"line\">2647</span><br><span class=\"line\">2648</span><br><span class=\"line\">2649</span><br><span class=\"line\">2650</span><br><span class=\"line\">2651</span><br><span class=\"line\">2652</span><br><span class=\"line\">2653</span><br><span class=\"line\">2654</span><br><span class=\"line\">2655</span><br><span class=\"line\">2656</span><br><span class=\"line\">2657</span><br><span class=\"line\">2658</span><br><span class=\"line\">2659</span><br><span class=\"line\">2660</span><br><span class=\"line\">2661</span><br><span class=\"line\">2662</span><br><span class=\"line\">2663</span><br><span class=\"line\">2664</span><br><span class=\"line\">2665</span><br><span class=\"line\">2666</span><br><span class=\"line\">2667</span><br><span class=\"line\">2668</span><br><span class=\"line\">2669</span><br><span class=\"line\">2670</span><br><span class=\"line\">2671</span><br><span class=\"line\">2672</span><br><span class=\"line\">2673</span><br><span class=\"line\">2674</span><br><span class=\"line\">2675</span><br><span class=\"line\">2676</span><br><span class=\"line\">2677</span><br><span class=\"line\">2678</span><br><span class=\"line\">2679</span><br><span class=\"line\">2680</span><br><span class=\"line\">2681</span><br><span class=\"line\">2682</span><br><span class=\"line\">2683</span><br><span class=\"line\">2684</span><br><span class=\"line\">2685</span><br><span class=\"line\">2686</span><br><span class=\"line\">2687</span><br><span class=\"line\">2688</span><br><span class=\"line\">2689</span><br><span class=\"line\">2690</span><br><span class=\"line\">2691</span><br><span class=\"line\">2692</span><br><span class=\"line\">2693</span><br><span class=\"line\">2694</span><br><span class=\"line\">2695</span><br><span class=\"line\">2696</span><br><span class=\"line\">2697</span><br><span class=\"line\">2698</span><br><span class=\"line\">2699</span><br><span class=\"line\">2700</span><br><span class=\"line\">2701</span><br><span class=\"line\">2702</span><br><span class=\"line\">2703</span><br><span class=\"line\">2704</span><br><span class=\"line\">2705</span><br><span class=\"line\">2706</span><br><span class=\"line\">2707</span><br><span class=\"line\">2708</span><br><span class=\"line\">2709</span><br><span class=\"line\">2710</span><br><span class=\"line\">2711</span><br><span class=\"line\">2712</span><br><span class=\"line\">2713</span><br><span class=\"line\">2714</span><br><span class=\"line\">2715</span><br><span class=\"line\">2716</span><br><span class=\"line\">2717</span><br><span class=\"line\">2718</span><br><span class=\"line\">2719</span><br><span class=\"line\">2720</span><br><span class=\"line\">2721</span><br><span class=\"line\">2722</span><br><span class=\"line\">2723</span><br><span class=\"line\">2724</span><br><span class=\"line\">2725</span><br><span class=\"line\">2726</span><br><span class=\"line\">2727</span><br><span class=\"line\">2728</span><br><span class=\"line\">2729</span><br><span class=\"line\">2730</span><br><span class=\"line\">2731</span><br><span class=\"line\">2732</span><br><span class=\"line\">2733</span><br><span class=\"line\">2734</span><br><span class=\"line\">2735</span><br><span class=\"line\">2736</span><br><span class=\"line\">2737</span><br><span class=\"line\">2738</span><br><span class=\"line\">2739</span><br><span class=\"line\">2740</span><br><span class=\"line\">2741</span><br><span class=\"line\">2742</span><br><span class=\"line\">2743</span><br><span class=\"line\">2744</span><br><span class=\"line\">2745</span><br><span class=\"line\">2746</span><br><span class=\"line\">2747</span><br><span class=\"line\">2748</span><br><span class=\"line\">2749</span><br><span class=\"line\">2750</span><br><span class=\"line\">2751</span><br><span class=\"line\">2752</span><br><span class=\"line\">2753</span><br><span class=\"line\">2754</span><br><span class=\"line\">2755</span><br><span class=\"line\">2756</span><br><span class=\"line\">2757</span><br><span class=\"line\">2758</span><br><span class=\"line\">2759</span><br><span class=\"line\">2760</span><br><span class=\"line\">2761</span><br><span class=\"line\">2762</span><br><span class=\"line\">2763</span><br><span class=\"line\">2764</span><br><span class=\"line\">2765</span><br><span class=\"line\">2766</span><br><span class=\"line\">2767</span><br><span class=\"line\">2768</span><br><span class=\"line\">2769</span><br><span class=\"line\">2770</span><br><span class=\"line\">2771</span><br><span class=\"line\">2772</span><br><span class=\"line\">2773</span><br><span class=\"line\">2774</span><br><span class=\"line\">2775</span><br><span class=\"line\">2776</span><br><span class=\"line\">2777</span><br><span class=\"line\">2778</span><br><span class=\"line\">2779</span><br><span class=\"line\">2780</span><br><span class=\"line\">2781</span><br><span class=\"line\">2782</span><br><span class=\"line\">2783</span><br><span class=\"line\">2784</span><br><span class=\"line\">2785</span><br><span class=\"line\">2786</span><br><span class=\"line\">2787</span><br><span class=\"line\">2788</span><br><span class=\"line\">2789</span><br><span class=\"line\">2790</span><br><span class=\"line\">2791</span><br><span class=\"line\">2792</span><br><span class=\"line\">2793</span><br><span class=\"line\">2794</span><br><span class=\"line\">2795</span><br><span class=\"line\">2796</span><br><span class=\"line\">2797</span><br><span class=\"line\">2798</span><br><span class=\"line\">2799</span><br><span class=\"line\">2800</span><br><span class=\"line\">2801</span><br><span class=\"line\">2802</span><br><span class=\"line\">2803</span><br><span class=\"line\">2804</span><br><span class=\"line\">2805</span><br><span class=\"line\">2806</span><br><span class=\"line\">2807</span><br><span class=\"line\">2808</span><br><span class=\"line\">2809</span><br><span class=\"line\">2810</span><br><span class=\"line\">2811</span><br><span class=\"line\">2812</span><br><span class=\"line\">2813</span><br><span class=\"line\">2814</span><br><span class=\"line\">2815</span><br><span class=\"line\">2816</span><br><span class=\"line\">2817</span><br><span class=\"line\">2818</span><br><span class=\"line\">2819</span><br><span class=\"line\">2820</span><br><span class=\"line\">2821</span><br><span class=\"line\">2822</span><br><span class=\"line\">2823</span><br><span class=\"line\">2824</span><br><span class=\"line\">2825</span><br><span class=\"line\">2826</span><br><span class=\"line\">2827</span><br><span class=\"line\">2828</span><br><span class=\"line\">2829</span><br><span class=\"line\">2830</span><br><span class=\"line\">2831</span><br><span class=\"line\">2832</span><br><span class=\"line\">2833</span><br><span class=\"line\">2834</span><br><span class=\"line\">2835</span><br><span class=\"line\">2836</span><br><span class=\"line\">2837</span><br><span class=\"line\">2838</span><br><span class=\"line\">2839</span><br><span class=\"line\">2840</span><br><span class=\"line\">2841</span><br><span class=\"line\">2842</span><br><span class=\"line\">2843</span><br><span class=\"line\">2844</span><br><span class=\"line\">2845</span><br><span class=\"line\">2846</span><br><span class=\"line\">2847</span><br><span class=\"line\">2848</span><br><span class=\"line\">2849</span><br><span class=\"line\">2850</span><br><span class=\"line\">2851</span><br><span class=\"line\">2852</span><br><span class=\"line\">2853</span><br><span class=\"line\">2854</span><br><span class=\"line\">2855</span><br><span class=\"line\">2856</span><br><span class=\"line\">2857</span><br><span class=\"line\">2858</span><br><span class=\"line\">2859</span><br><span class=\"line\">2860</span><br><span class=\"line\">2861</span><br><span class=\"line\">2862</span><br><span class=\"line\">2863</span><br><span class=\"line\">2864</span><br><span class=\"line\">2865</span><br><span class=\"line\">2866</span><br><span class=\"line\">2867</span><br><span class=\"line\">2868</span><br><span class=\"line\">2869</span><br><span class=\"line\">2870</span><br><span class=\"line\">2871</span><br><span class=\"line\">2872</span><br><span class=\"line\">2873</span><br><span class=\"line\">2874</span><br><span class=\"line\">2875</span><br><span class=\"line\">2876</span><br><span class=\"line\">2877</span><br><span class=\"line\">2878</span><br><span class=\"line\">2879</span><br><span class=\"line\">2880</span><br><span class=\"line\">2881</span><br><span class=\"line\">2882</span><br><span class=\"line\">2883</span><br><span class=\"line\">2884</span><br><span class=\"line\">2885</span><br><span class=\"line\">2886</span><br><span class=\"line\">2887</span><br><span class=\"line\">2888</span><br><span class=\"line\">2889</span><br><span class=\"line\">2890</span><br><span class=\"line\">2891</span><br><span class=\"line\">2892</span><br><span class=\"line\">2893</span><br><span class=\"line\">2894</span><br><span class=\"line\">2895</span><br><span class=\"line\">2896</span><br><span class=\"line\">2897</span><br><span class=\"line\">2898</span><br><span class=\"line\">2899</span><br><span class=\"line\">2900</span><br><span class=\"line\">2901</span><br><span class=\"line\">2902</span><br><span class=\"line\">2903</span><br><span class=\"line\">2904</span><br><span class=\"line\">2905</span><br><span class=\"line\">2906</span><br><span class=\"line\">2907</span><br><span class=\"line\">2908</span><br><span class=\"line\">2909</span><br><span class=\"line\">2910</span><br><span class=\"line\">2911</span><br><span class=\"line\">2912</span><br><span class=\"line\">2913</span><br><span class=\"line\">2914</span><br><span class=\"line\">2915</span><br><span class=\"line\">2916</span><br><span class=\"line\">2917</span><br><span class=\"line\">2918</span><br><span class=\"line\">2919</span><br><span class=\"line\">2920</span><br><span class=\"line\">2921</span><br><span class=\"line\">2922</span><br><span class=\"line\">2923</span><br><span class=\"line\">2924</span><br><span class=\"line\">2925</span><br><span class=\"line\">2926</span><br><span class=\"line\">2927</span><br><span class=\"line\">2928</span><br><span class=\"line\">2929</span><br><span class=\"line\">2930</span><br><span class=\"line\">2931</span><br><span class=\"line\">2932</span><br><span class=\"line\">2933</span><br><span class=\"line\">2934</span><br><span class=\"line\">2935</span><br><span class=\"line\">2936</span><br><span class=\"line\">2937</span><br><span class=\"line\">2938</span><br><span class=\"line\">2939</span><br><span class=\"line\">2940</span><br><span class=\"line\">2941</span><br><span class=\"line\">2942</span><br><span class=\"line\">2943</span><br><span class=\"line\">2944</span><br><span class=\"line\">2945</span><br><span class=\"line\">2946</span><br><span class=\"line\">2947</span><br><span class=\"line\">2948</span><br><span class=\"line\">2949</span><br><span class=\"line\">2950</span><br><span class=\"line\">2951</span><br><span class=\"line\">2952</span><br><span class=\"line\">2953</span><br><span class=\"line\">2954</span><br><span class=\"line\">2955</span><br><span class=\"line\">2956</span><br><span class=\"line\">2957</span><br><span class=\"line\">2958</span><br><span class=\"line\">2959</span><br><span class=\"line\">2960</span><br><span class=\"line\">2961</span><br><span class=\"line\">2962</span><br><span class=\"line\">2963</span><br><span class=\"line\">2964</span><br><span class=\"line\">2965</span><br><span class=\"line\">2966</span><br><span class=\"line\">2967</span><br><span class=\"line\">2968</span><br><span class=\"line\">2969</span><br><span class=\"line\">2970</span><br><span class=\"line\">2971</span><br><span class=\"line\">2972</span><br><span class=\"line\">2973</span><br><span class=\"line\">2974</span><br><span class=\"line\">2975</span><br><span class=\"line\">2976</span><br><span class=\"line\">2977</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs javascript\"><span class=\"hljs-comment\">// 请复制本代码到打开的ACME服务URL页面的浏览器控制台中运行。</span><br><br><span class=\"hljs-keyword\">var</span> <span class=\"hljs-title class_\">Default</span>_ACME_URL=<span class=\"hljs-string\">&quot;https://acme.zerossl.com/v2/DV90/directory&quot;</span>;<br><span class=\"hljs-keyword\">var</span> <span class=\"hljs-title class_\">IsReadDirGotoCORS</span>=<span class=\"hljs-literal\">true</span>;<br><span class=\"hljs-keyword\">var</span> <span class=\"hljs-title class_\">PageRawHTML</span>=<span class=\"hljs-string\">`&lt;html&gt;&lt;head&gt;</span><br><span class=\"hljs-string\">&lt;meta http-equiv=&quot;Content-Type&quot; content=&quot;text/html; charset=utf-8&quot;&gt;</span><br><span class=\"hljs-string\">&lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0&quot;&gt;</span><br><span class=\"hljs-string\">&lt;link rel=&quot;shortcut icon&quot; type=&quot;image/png&quot; href=&quot;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAAe1BMVEUDuu3///8AtuwAue1c0/QAt+1a0vSZ4/gOve4Ju+4AtOzf9v31/P4iw/DS8/yf5fnE7/tNzvMsxvHw+/7t+v7k+P2U4veO4PeA3Pbp+f7h9/3Y9f3I8Pxt1/Vi1PRQz/NDzPIzyPEWv+76/v/3/f+87fqn5/mI3/Z82vb+fQDoAAAA10lEQVQ4y63T2c7CIBCGYWamUwFZurfuy7/e/xVaeySlYmJ8T78nISQgPh0xU2pGZa1EfrazHJz5an2FT3brYKoul4UqAHx5Hhqoq6VTMAc4aER9acDjEviFPd2voP9gKykGVECHkzyBsRzvI+g1jWG5BFDIPXRKjqkcTKUwPISPbvsN9XpqA9DuehXsF4g64APALAY+AHkMVm+CzToNVld1NAmwE0zaJ0DBQughAcxZ66tLAGj6f/f2NdMgewXKGHSPgOTPfG/Dh0vqlAXlluefahaLT3UDvrAKrj7jLKkAAAAASUVORK5CYII=&quot;&gt;</span><br><span class=\"hljs-string\"></span><br><span class=\"hljs-string\">&lt;title&gt;ACME Web Browser Client | ACME客户端H5网页单文件版，在线免费申请签发SSL/TLS通配符泛域名HTTPS证书，支持Let&#x27;s Encrypt、ZeroSSL，无需账号免登录注册 | Windows macOS Get Wildcard Certificates Online For Free - Single HTML File&lt;/title&gt;</span><br><span class=\"hljs-string\">&lt;/head&gt;</span><br><span class=\"hljs-string\"></span><br><span class=\"hljs-string\">&lt;body&gt;</span><br><span class=\"hljs-string\">&lt;script&gt;</span><br><span class=\"hljs-string\">var Version=&quot;1.0.230820&quot;;</span><br><span class=\"hljs-string\">console.log(&quot;LICENSE: GPL-3.0, https://github.com/xiangyuecn/ACME-HTML-Web-Browser-Client/blob/main/LICENSE&quot;);</span><br><span class=\"hljs-string\">/***********************************</span><br><span class=\"hljs-string\">中英对照翻译主要来自：Chrome自带翻译+百度翻译，由中文翻译成English（作者英文很菜）。</span><br><span class=\"hljs-string\">The Chinese-English translation is mainly from: Chrome comes with translation + Baidu translation, which is translated from Chinese to English (the author&#x27;s English level is very low)</span><br><span class=\"hljs-string\"></span><br><span class=\"hljs-string\">感谢围观本客户端源码，所有功能的代码都在本页面一个文件内，逻辑上会比较长和比较丑（关键地方或多或少有写注释），如感不适，请转头看看旁边的大长腿，再深呼吸一下继续看下一行~</span><br><span class=\"hljs-string\">Thank you for watching the source code of this client. The code of all functions is in one file on this page, which is logically long and ugly (more or less comments are written in key places). If you feel uncomfortable, please turn your head and look at the Big Long Legs next to you, take another deep breath and continue to look at the next line~</span><br><span class=\"hljs-string\">************************************/</span><br><span class=\"hljs-string\">&lt;/script&gt;</span><br><span class=\"hljs-string\"></span><br><span class=\"hljs-string\"></span><br><span class=\"hljs-string\">&lt;div class=&quot;main-load&quot; style=&quot;padding-top:40vh;text-align:center;font-size:28px&quot;&gt;Loading...&lt;/div&gt;</span><br><span class=\"hljs-string\">&lt;div class=&quot;main&quot; style=&quot;display:none&quot;&gt;</span><br><span class=\"hljs-string\">&lt;div class=&quot;mainBox acmeReadDirGotoCORSState&quot; style=&quot;display:none&quot;&gt;&lt;/div&gt;</span><br><span class=\"hljs-string\"></span><br><span class=\"hljs-string\">&lt;div class=&quot;mainBox&quot;&gt;</span><br><span class=\"hljs-string\">\t&lt;span style=&quot;font-size:32px;font-weight:bold;color:#03baed;&quot;&gt;</span><br><span class=\"hljs-string\">\t\t&lt;span class=&quot;langCN clientNameCN&quot;&gt;HTML5网页版ACME客户端&lt;/span&gt;</span><br><span class=\"hljs-string\">\t\t&lt;span class=&quot;langEN clientNameEN&quot;&gt;ACME Web Browser Client&lt;/span&gt;</span><br><span class=\"hljs-string\">\t&lt;/span&gt;</span><br><span class=\"hljs-string\">\t&lt;span class=&quot;versionBox&quot; style=&quot;font-size:14px;color:#03baed;margin-right:80px&quot;&gt;&lt;/span&gt;</span><br><span class=\"hljs-string\">\t&lt;span style=&quot;display:inline-block&quot;&gt;</span><br><span class=\"hljs-string\">\t\t&lt;span class=&quot;langCN&quot;&gt;开源代码：&lt;/span&gt;</span><br><span class=\"hljs-string\">\t\t&lt;span class=&quot;langEN&quot;&gt;Open source: &lt;/span&gt;</span><br><span class=\"hljs-string\">\t\t&lt;a href=&quot;https://github.com/xiangyuecn/ACME-HTML-Web-Browser-Client&quot; target=&quot;_blank&quot;&gt;GitHub &amp;gt;&amp;gt;&lt;/a&gt;</span><br><span class=\"hljs-string\">\t\t&lt;span class=&quot;langCN&quot;&gt;</span><br><span class=\"hljs-string\">\t\t\t| &lt;a href=&quot;https://gitee.com/xiangyuecn/ACME-HTML-Web-Browser-Client&quot; target=&quot;_blank&quot;&gt;Gitee &amp;gt;&amp;gt;&lt;/a&gt;</span><br><span class=\"hljs-string\">\t\t&lt;/span&gt;</span><br><span class=\"hljs-string\">\t&lt;/span&gt;</span><br><span class=\"hljs-string\">\t</span><br><span class=\"hljs-string\">\t&lt;ul class=&quot;itemBox feature_ul&quot; style=&quot;list-style-type: none;margin:8px 0 0 0;padding:0 8px 0 8px;color:#666&quot;&gt;</span><br><span class=\"hljs-string\">\t\t&lt;li class=&quot;langCN&quot;&gt;&lt;i&gt;功能用途&lt;/i&gt;本网页客户端用于：向 &lt;a href=&quot;https://letsencrypt.org/&quot; target=&quot;_blank&quot;&gt;Let&#x27;s Encrypt&lt;/a&gt;、&lt;a href=&quot;https://zerossl.com/&quot; target=&quot;_blank&quot;&gt;ZeroSSL&lt;/a&gt;、&lt;a href=&quot;https://pki.goog/&quot; target=&quot;_blank&quot;&gt;Google&lt;/a&gt; 等支持 ACME 协议的证书颁发机构，免费申请获得用于 HTTPS 的 SSL/TLS 域名证书（RSA、ECC/ECDSA），支持多域名和通配符泛域名；只需在现代浏览器上操作即可获得 PEM 格式纯文本的域名证书，不依赖操作系统环境，无需下载和安装软件，纯手动操作，&lt;span class=&quot;Bold&quot;&gt;只专注于申请获得证书这一件事。&lt;/span&gt;&lt;/li&gt;</span><br><span class=\"hljs-string\">\t\t&lt;li class=&quot;langEN&quot;&gt;&lt;i&gt;Functional use&lt;/i&gt;This web client is used to: apply for free SSL/TLS domain name certificates (RSA, ECC/ECDSA) for HTTPS from &lt;a href=&quot;https://letsencrypt.org/&quot; target=&quot;_blank&quot;&gt;Let&#x27;s Encrypt&lt;/a&gt; , &lt;a href=&quot;https://zerossl.com/&quot; target=&quot;_blank&quot;&gt;ZeroSSL&lt;/a&gt; , &lt;a href=&quot;https://pki.goog/&quot; target=&quot;_blank&quot;&gt;Google&lt;/a&gt; and other certificate authorities that support the ACME protocol, and support multiple domain names and wildcard pan-domain names; Simply operate on a modern browser to obtain a domain name certificate in plain text in PEM format, does not depend on the operating system environment, does not need to download and install software, and is purely manual, &lt;span class=&quot;Bold&quot;&gt;only focus on the only thing that is to apply for and obtain a certificate.&lt;/span&gt;&lt;/li&gt;</span><br><span class=\"hljs-string\">\t\t</span><br><span class=\"hljs-string\">\t\t&lt;li class=&quot;langCN&quot;&gt;&lt;i&gt;简单易用&lt;/i&gt;点点鼠标 Ctrl+C Ctrl+V 就能完成证书的申请，全程需要的操作少，每一步都有保姆级操作提示，UI友好大气美观；&lt;span class=&quot;Bold&quot;&gt;本客户端不需要注册账号、更不需要登录。&lt;/span&gt;&lt;/li&gt;</span><br><span class=\"hljs-string\">\t\t&lt;li class=&quot;langEN&quot;&gt;&lt;i&gt;Easy to use&lt;/i&gt;Click the mouse and Ctrl+C Ctrl+V to complete the certificate application. The whole process requires less operations, and there are nanny level operation prompts at each step; UI friendly, atmospheric and beautiful; &lt;span class=&quot;Bold&quot;&gt;This client does not need to register an account, and does not need to log in.&lt;/span&gt;&lt;/li&gt;</span><br><span class=\"hljs-string\">\t\t</span><br><span class=\"hljs-string\">\t\t&lt;li class=&quot;langCN&quot;&gt;&lt;i&gt;开源项目&lt;/i&gt;本网页客户端源码已开源，访问网址由托管仓库提供，源码透明可追溯。&lt;/li&gt;</span><br><span class=\"hljs-string\">\t\t&lt;li class=&quot;langEN&quot;&gt;&lt;i&gt;Open source project&lt;/i&gt;The source code of the client side of this webpage has been open sourced, and the access URL is provided by the hosting warehouse, and the source code is transparent and traceable.&lt;/li&gt;</span><br><span class=\"hljs-string\">\t\t</span><br><span class=\"hljs-string\">\t\t&lt;li class=&quot;langCN&quot;&gt;&lt;i&gt;单一文件&lt;/i&gt;本网页客户端仅一个静态 HTML 文件，不依赖其他任何文件；因此可以直接保存到你本地（右键-另存为），即可通过浏览器打开。&lt;/li&gt;</span><br><span class=\"hljs-string\">\t\t&lt;li class=&quot;langEN&quot;&gt;&lt;i&gt;A single file&lt;/i&gt;This web client is only a single static HTML web page file and does not depend on any other files; therefore, it can be directly saved to your local (right-click - save as), and you can open it through a browser.&lt;/li&gt;</span><br><span class=\"hljs-string\">\t\t</span><br><span class=\"hljs-string\">\t\t&lt;li class=&quot;langCN&quot;&gt;&lt;i&gt;数据安全&lt;/i&gt;除了你指定证书颁发机构的 ACME 接口地址外，本网页客户端不会向其他任何地址发送数据，通过浏览器控制台很容易做到网络数据审查。&lt;/li&gt;</span><br><span class=\"hljs-string\">\t\t&lt;li class=&quot;langEN&quot;&gt;&lt;i&gt;Data security&lt;/i&gt;Except for the ACME interface address of the certificate authority you specify, this web client will not send data to any other address, and it is easy to check the network data through the browser console.&lt;/li&gt;</span><br><span class=\"hljs-string\">\t\t</span><br><span class=\"hljs-string\">\t\t&lt;li class=&quot;langCN&quot;&gt;&lt;i&gt;系统安全&lt;/i&gt;纯网页应用，不会也无法对你的电脑系统做出任何修改。&lt;/li&gt;</span><br><span class=\"hljs-string\">\t\t&lt;li class=&quot;langEN&quot;&gt;&lt;i&gt;System security&lt;/i&gt;Pure web application, will not and cannot make any modification to your computer system.&lt;/li&gt;</span><br><span class=\"hljs-string\">\t\t</span><br><span class=\"hljs-string\">\t\t&lt;li class=&quot;langCN&quot; style=&quot;color:#cb1d1d&quot;&gt;&lt;i style=&quot;background:#cb1d1d&quot;&gt;证书过期风险提醒&lt;/i&gt;由于本网页客户端只能纯手动操作，不支持自动续期，需注意在证书过期前重新生申请新证书（免费证书普遍90天有效期，届时只需重复操作一遍即可），或使用 acme.sh 等客户端自动化续期。&lt;/li&gt;</span><br><span class=\"hljs-string\">\t\t&lt;li class=&quot;langEN&quot; style=&quot;color:#cb1d1d&quot;&gt;&lt;i style=&quot;background:#cb1d1d&quot;&gt;Certificate Expiration Risk Alert&lt;/i&gt;Since this web client can only be operated manually and does not support automatic renewal, you should pay attention to apply for a new certificate before the certificate expires (free certificates are generally valid for 90 days, you only need to repeat the operation at that time), or use acme.sh and other client automatic renewal.&lt;/li&gt;</span><br><span class=\"hljs-string\">\t&lt;/ul&gt;</span><br><span class=\"hljs-string\">\t&lt;style&gt;</span><br><span class=\"hljs-string\">\t\t.feature_ul li&#123;margin: 8px 0;&#125;</span><br><span class=\"hljs-string\">\t\t.feature_ul i&#123;</span><br><span class=\"hljs-string\">\t\t\tfont-style: normal;</span><br><span class=\"hljs-string\">\t\t\tmargin-right:8px;</span><br><span class=\"hljs-string\">\t\t\tdisplay: inline-block;</span><br><span class=\"hljs-string\">\t\t\tvertical-align: middle;</span><br><span class=\"hljs-string\">\t\t\tbackground: #03baed;</span><br><span class=\"hljs-string\">\t\t\tcolor: #fff;</span><br><span class=\"hljs-string\">\t\t\tfont-size: 14px;</span><br><span class=\"hljs-string\">\t\t\tpadding: 2px 8px;</span><br><span class=\"hljs-string\">\t\t\tborder-radius: 99px;</span><br><span class=\"hljs-string\">\t\t&#125;</span><br><span class=\"hljs-string\">\t&lt;/style&gt;</span><br><span class=\"hljs-string\">&lt;/div&gt;</span><br><span class=\"hljs-string\"></span><br><span class=\"hljs-string\"></span><br><span class=\"hljs-string\"></span><br><span class=\"hljs-string\"></span><br><span class=\"hljs-string\"></span><br><span class=\"hljs-string\">&lt;div class=&quot;mainBox&quot;&gt;</span><br><span class=\"hljs-string\">\t&lt;div class=&quot;pd itemTitle&quot;&gt;</span><br><span class=\"hljs-string\">\t\t&lt;span class=&quot;langCN&quot;&gt;步骤一：选择证书颁发机构&lt;/span&gt;</span><br><span class=\"hljs-string\">\t\t&lt;span class=&quot;langEN&quot;&gt;Step 1: Select a Certificate Authority&lt;/span&gt;</span><br><span class=\"hljs-string\">\t&lt;/div&gt;</span><br><span class=\"hljs-string\">\t&lt;div class=&quot;itemBox&quot;&gt;</span><br><span class=\"hljs-string\">\t\t&lt;div class=&quot;pd Bold&quot;&gt;</span><br><span class=\"hljs-string\">\t\t\t&lt;i class=&quot;must&quot;&gt;*&lt;/i&gt;</span><br><span class=\"hljs-string\">\t\t\t&lt;span class=&quot;langCN&quot;&gt;证书颁发机构 ACME(v2, &lt;a href=&quot;https://www.rfc-editor.org/rfc/rfc8555.html&quot; target=&quot;_blank&quot;&gt;RFC 8555&lt;/a&gt;) 服务URL：&lt;/span&gt;</span><br><span class=\"hljs-string\">\t\t\t&lt;span class=&quot;langEN&quot;&gt;Certificate Authority ACME (v2, &lt;a href=&quot;https://www.rfc-editor.org/rfc/rfc8555.html&quot; target=&quot;_blank&quot;&gt;RFC 8555&lt;/a&gt;) Service URL:&lt;/span&gt;</span><br><span class=\"hljs-string\">\t\t&lt;/div&gt;</span><br><span class=\"hljs-string\">\t\t&lt;div class=&quot;pd&quot;&gt;</span><br><span class=\"hljs-string\">\t\t\t&lt;label&gt;&lt;input type=&quot;radio&quot; name=&quot;choice_acmeURL&quot; value=&quot;https://acme-v02.api.letsencrypt.org/directory&quot; desckey=&quot;descLetsEncrypt&quot;&gt;Let&#x27;s Encrypt&lt;/label&gt;</span><br><span class=\"hljs-string\">\t\t\t&lt;label&gt;&lt;input type=&quot;radio&quot; name=&quot;choice_acmeURL&quot; value=&quot;https://acme.zerossl.com/v2/DV90/directory&quot; desckey=&quot;descZeroSSL&quot;&gt;ZeroSSL&lt;/label&gt;</span><br><span class=\"hljs-string\">\t\t\t&lt;label&gt;&lt;input type=&quot;radio&quot; name=&quot;choice_acmeURL&quot; value=&quot;https://dv.acme-v02.api.pki.goog/directory&quot; desckey=&quot;descGoogle&quot;&gt;Google&lt;/label&gt;</span><br><span class=\"hljs-string\">\t\t\t&lt;label&gt;</span><br><span class=\"hljs-string\">\t\t\t\t&lt;input type=&quot;radio&quot; name=&quot;choice_acmeURL&quot; value=&quot;manual&quot;&gt;</span><br><span class=\"hljs-string\">\t\t\t\t&lt;span class=&quot;langCN&quot;&gt;手动填写URL&lt;/span&gt;</span><br><span class=\"hljs-string\">\t\t\t\t&lt;span class=&quot;langEN&quot;&gt;Fill in the URL manually&lt;/span&gt;</span><br><span class=\"hljs-string\">\t\t\t&lt;/label&gt;</span><br><span class=\"hljs-string\">\t\t\t&lt;label&gt;</span><br><span class=\"hljs-string\">\t\t\t\t&lt;input type=&quot;radio&quot; name=&quot;choice_acmeURL&quot; value=&quot;https://acme-staging-v02.api.letsencrypt.org/directory&quot;&gt;</span><br><span class=\"hljs-string\">\t\t\t\t&lt;span class=&quot;langCN&quot;&gt;测试用[不要选]&lt;/span&gt;</span><br><span class=\"hljs-string\">\t\t\t\t&lt;span class=&quot;langEN&quot;&gt;For testing, don&#x27;t choose&lt;/span&gt;</span><br><span class=\"hljs-string\">\t\t\t&lt;/label&gt;</span><br><span class=\"hljs-string\">\t\t&lt;/div&gt;</span><br><span class=\"hljs-string\">\t\t</span><br><span class=\"hljs-string\">\t\t&lt;div style=&quot;font-size:13px;color:#aaa&quot;&gt;</span><br><span class=\"hljs-string\">\t\t\t&lt;div class=&quot;pd descAcmeURL descLetsEncrypt&quot; style=&quot;display:none&quot;&gt;</span><br><span class=\"hljs-string\">\t\t\t\t&lt;a href=&quot;https://letsencrypt.org/&quot; target=&quot;_blank&quot;&gt;Let&#x27;s Encrypt&lt;/a&gt;:</span><br><span class=\"hljs-string\">\t\t\t\t&lt;span class=&quot;langCN&quot;&gt;请按照下面的操作步骤提示进行申请即可得到证书，证书有效期90天。&lt;/span&gt;</span><br><span class=\"hljs-string\">\t\t\t\t&lt;span class=&quot;langEN&quot;&gt;Please follow the operation steps prompts below to apply, and you can get the certificate, which is valid for 90 days.&lt;/span&gt;</span><br><span class=\"hljs-string\">\t\t\t&lt;/div&gt;</span><br><span class=\"hljs-string\">\t\t\t&lt;div class=&quot;pd descAcmeURL descZeroSSL&quot; style=&quot;display:none&quot;&gt;</span><br><span class=\"hljs-string\">\t\t\t\t&lt;a href=&quot;https://zerossl.com/&quot; target=&quot;_blank&quot;&gt;ZeroSSL&lt;/a&gt;:</span><br><span class=\"hljs-string\">\t\t\t\t&lt;span style=&quot;color:#f80&quot;&gt;</span><br><span class=\"hljs-string\">\t\t\t\t\t&lt;span class=&quot;langCN&quot;&gt;此URL可能需要先根据下面的提示进行操作来消除跨域不能访问的问题。&lt;/span&gt;</span><br><span class=\"hljs-string\">\t\t\t\t\t&lt;span class=&quot;langEN&quot;&gt;This URL may need to be operated according to the prompts below to eliminate the problem of cross-domain inaccessibility.&lt;/span&gt;</span><br><span class=\"hljs-string\">\t\t\t\t&lt;/span&gt;</span><br><span class=\"hljs-string\">\t\t\t\t&lt;span class=&quot;langCN&quot;&gt;申请证书前，你需要根据ZeroSSL的&lt;a href=&quot;https://zerossl.com/documentation/acme/&quot; target=&quot;_blank&quot;&gt;官方文档&lt;/a&gt;，先注册ZeroSSL账号并生成一个EAB凭据，每次申请证书时使用此EAB凭据，按照下面的操作步骤提示进行申请即可得到证书，证书有效期90天。&lt;/span&gt;</span><br><span class=\"hljs-string\">\t\t\t\t&lt;span class=&quot;langEN&quot;&gt;Before applying for a certificate, you need to follow ZeroSSL&#x27;s &lt;a href=&quot;https://zerossl.com/documentation/acme/&quot; target=&quot;_blank&quot;&gt;official documents&lt;/a&gt;, register a ZeroSSL account and generate an EAB credential, and use this EAB credential every time you apply for a certificate, follow the operation steps prompts below to apply, and you can get the certificate, which is valid for 90 days.&lt;/span&gt;</span><br><span class=\"hljs-string\">\t\t\t&lt;/div&gt;</span><br><span class=\"hljs-string\">\t\t\t&lt;div class=&quot;pd descAcmeURL descGoogle&quot; style=&quot;display:none&quot;&gt;</span><br><span class=\"hljs-string\">\t\t\t\t&lt;a href=&quot;https://pki.goog/&quot; target=&quot;_blank&quot;&gt;Google Trust Services&lt;/a&gt;:</span><br><span class=\"hljs-string\">\t\t\t\t&lt;span style=&quot;color:#f80&quot;&gt;</span><br><span class=\"hljs-string\">\t\t\t\t\t&lt;span class=&quot;langCN&quot;&gt;此URL可能需要先根据下面的提示进行操作来消除跨域不能访问的问题。&lt;/span&gt;</span><br><span class=\"hljs-string\">\t\t\t\t\t&lt;span class=&quot;langEN&quot;&gt;This URL may need to be operated according to the prompts below to eliminate the problem of cross-domain inaccessibility.&lt;/span&gt;</span><br><span class=\"hljs-string\">\t\t\t\t&lt;/span&gt;</span><br><span class=\"hljs-string\">\t\t\t\t&lt;span class=&quot;langCN&quot;&gt;申请证书前，你需要根据Google的&lt;a href=&quot;https://cloud.google.com/certificate-manager/docs/public-ca-tutorial&quot; target=&quot;_blank&quot;&gt;官方文档&lt;/a&gt;，在Google Cloud中生成一个EAB凭据，每次申请证书时使用此EAB凭据，按照下面的操作步骤提示进行申请即可得到证书，证书有效期90天。&lt;/span&gt;</span><br><span class=\"hljs-string\">\t\t\t\t&lt;span class=&quot;langEN&quot;&gt;Before applying for a certificate, you need to follow Google&#x27;s &lt;a href=&quot;https://cloud.google.com/certificate-manager/docs/public-ca-tutorial&quot; target=&quot;_blank&quot;&gt;official documents&lt;/a&gt;, generate an EAB credential in Google Cloud, and use this EAB credential every time you apply for a certificate, follow the operation steps prompts below to apply, and you can get the certificate, which is valid for 90 days.&lt;/span&gt;</span><br><span class=\"hljs-string\">\t\t\t\t&lt;span style=&quot;color:#f80&quot;&gt;</span><br><span class=\"hljs-string\">\t\t\t\t\t&lt;span class=&quot;langCN&quot;&gt;注意：因为同一个Google EAB凭据只能绑定到一个ACME账户（私钥），因此你在首次申请证书时，&lt;span style=&quot;font-weight:bold;font-size:20px&quot;&gt;必须同时保存好在第二步操作中新创建的或手动填写的ACME账户私钥&lt;/span&gt;，下次申请证书时使用此EAB凭据必须和已保存的ACME账户私钥一起使用。&lt;/span&gt;</span><br><span class=\"hljs-string\">\t\t\t\t\t&lt;span class=&quot;langEN&quot;&gt;Note: Because the same Google EAB credential can only be bound to one ACME account (Private key), when you apply for a certificate for the first time, &lt;span style=&quot;font-weight:bold;font-size:20px&quot;&gt;you must also save the newly generated or manually filled ACME account private key in the second step&lt;/span&gt;, this EAB credential must be used together with the saved ACME account private key when applying for a certificate next time.&lt;/span&gt;</span><br><span class=\"hljs-string\">\t\t\t\t&lt;/span&gt;</span><br><span class=\"hljs-string\">\t\t\t&lt;/div&gt;</span><br><span class=\"hljs-string\">\t\t&lt;/div&gt;</span><br><span class=\"hljs-string\">\t\t</span><br><span class=\"hljs-string\">\t\t&lt;div class=&quot;pd FlexBox&quot;&gt;</span><br><span class=\"hljs-string\">\t\t\t&lt;div class=&quot;FlexItem&quot;&gt;</span><br><span class=\"hljs-string\">\t\t\t\t&lt;input class=&quot;in_acmeURL inputLang&quot; style=&quot;width:100%&quot; placeholder-cn=&quot;请填写证书颁发机构ACME服务URL&quot; placeholder-en=&quot;Please fill in the Certificate Authority ACME Service URL&quot;&gt;</span><br><span class=\"hljs-string\">\t\t\t&lt;/div&gt;</span><br><span class=\"hljs-string\">\t\t\t&lt;div style=&quot;padding-left:12px&quot;&gt;</span><br><span class=\"hljs-string\">\t\t\t\t&lt;span class=&quot;mainBtn mainBtnMin&quot; onclick=&quot;acmeReadDirClick()&quot; style=&quot;padding:0 50px&quot;&gt;</span><br><span class=\"hljs-string\">\t\t\t\t\t&lt;span class=&quot;langCN&quot;&gt;读取服务目录&lt;/span&gt;</span><br><span class=\"hljs-string\">\t\t\t\t\t&lt;span class=&quot;langEN&quot;&gt;Read service directory&lt;/span&gt;</span><br><span class=\"hljs-string\">\t\t\t\t&lt;/span&gt;</span><br><span class=\"hljs-string\">\t\t\t&lt;/div&gt;</span><br><span class=\"hljs-string\">\t\t&lt;/div&gt;</span><br><span class=\"hljs-string\">\t\t&lt;div class=&quot;acmeReadDirState&quot;&gt;&lt;/div&gt;</span><br><span class=\"hljs-string\">&lt;script&gt;</span><br><span class=\"hljs-string\">//跨域支持的不好的ACME服务，直接复制源码到他们网站里面运行</span><br><span class=\"hljs-string\">var acmeReadDirGotoCORSInit=function()&#123;</span><br><span class=\"hljs-string\">\tif(!window.IsReadDirGotoCORS)return;</span><br><span class=\"hljs-string\">\tvar stateEl=$(&quot;.acmeReadDirGotoCORSState&quot;).show().html(\\`</span><br><span class=\"hljs-string\">&lt;div style=&quot;color:#cb1d1d&quot;&gt;</span><br><span class=\"hljs-string\">\t&lt;span class=&quot;langCN&quot;&gt;本客户端正在以跨域兼容模式运行，请按正常流程操作即可，目标ACME服务URL=$\\&#123;window.Default_ACME_URL&#125;&lt;/span&gt;</span><br><span class=\"hljs-string\">\t&lt;span class=&quot;langEN&quot;&gt;This client is running in cross-domain compatibility mode, please follow the normal process, the target ACME service URL=$\\&#123;window.Default_ACME_URL&#125;&lt;/span&gt;</span><br><span class=\"hljs-string\">&lt;/div&gt;</span><br><span class=\"hljs-string\">\t\\`);</span><br><span class=\"hljs-string\">\tLangReview(stateEl);</span><br><span class=\"hljs-string\">&#125;;</span><br><span class=\"hljs-string\">var acmeReadDirGotoCORS=function(title)&#123;</span><br><span class=\"hljs-string\">\t&quot;use strict&quot;;</span><br><span class=\"hljs-string\">\tvar codes=&quot;// &quot;+Lang(&quot;请复制本代码到打开的ACME服务URL页面的浏览器控制台中运行。&quot;,&quot;Please copy this code to the browser console of the opened ACME service URL page to run.&quot;,true)</span><br><span class=\"hljs-string\">\t\t+&quot;\\\\n\\\\nvar Default_ACME_URL=&quot;+JSON.stringify(ACME.URL)+&quot;;&quot;</span><br><span class=\"hljs-string\">\t\t+&quot;\\\\nvar IsReadDirGotoCORS=true;&quot;</span><br><span class=\"hljs-string\">\t\t+&quot;\\\\nvar PageRawHTML=\\`&quot;</span><br><span class=\"hljs-string\">\t\t\t+PageRawHTML.replace(/\\\\\\\\/g,&quot;\\\\\\\\\\\\\\\\&quot;).replace(/\\`/g,&quot;\\\\\\\\\\`&quot;).replace(/\\\\$\\\\&#123;/g,&quot;$\\\\\\\\&#123;&quot;)</span><br><span class=\"hljs-string\">\t\t+&quot;\\`;&quot;;</span><br><span class=\"hljs-string\">\tcodes+=&quot;\\\\n(&quot;+(function()&#123;</span><br><span class=\"hljs-string\">\t\tconsole.clear();</span><br><span class=\"hljs-string\">\t\tdocument.head.innerHTML=/&lt;head[^&gt;]*&gt;([\\\\S\\\\s]+?)&lt;\\\\/head&gt;/i.exec(PageRawHTML)[1];</span><br><span class=\"hljs-string\">\t\tdocument.body.innerHTML=/&lt;body[^&gt;]*&gt;([\\\\S\\\\s]+)&lt;\\\\/body&gt;/i.exec(PageRawHTML)[1];</span><br><span class=\"hljs-string\">\t\tvar js=/&lt;script[^&gt;]*&gt;([\\\\S\\\\s]+?)&lt;\\\\/script&gt;/ig,m;</span><br><span class=\"hljs-string\">\t\twhile(m=js.exec(PageRawHTML)) eval.call(window, m[1]);</span><br><span class=\"hljs-string\">\t&#125;).toString()+&quot;)()&quot;;</span><br><span class=\"hljs-string\">\t$(&quot;.gotoCORSBox&quot;).hide();</span><br><span class=\"hljs-string\">\tvar stateEl=$(&quot;.acmeReadDirState&quot;).append(\\`</span><br><span class=\"hljs-string\">&lt;div class=&quot;gotoCORSBox&quot; style=&quot;padding-top:15px&quot;&gt;</span><br><span class=\"hljs-string\">\t&lt;div class=&quot;pd Bold&quot; style=&quot;color:red&quot;&gt;</span><br><span class=\"hljs-string\">\t\t&lt;i class=&quot;must&quot;&gt;*&lt;/i&gt;</span><br><span class=\"hljs-string\">\t\t\\`+(title||\\`</span><br><span class=\"hljs-string\">\t\t&lt;span class=&quot;langCN&quot;&gt;由于此ACME服务对跨域访问支持不良，&lt;/span&gt;</span><br><span class=\"hljs-string\">\t\t&lt;span class=&quot;langEN&quot;&gt;Because this ACME service has poor support for cross-domain access, &lt;/span&gt;</span><br><span class=\"hljs-string\">\t\t&lt;span style=&quot;font-size:24px&quot;&gt;</span><br><span class=\"hljs-string\">\t\t\t&lt;span class=&quot;langCN&quot;&gt;请按下面步骤操作：&lt;/span&gt;</span><br><span class=\"hljs-string\">\t\t\t&lt;span class=&quot;langEN&quot;&gt;please follow the steps below:&lt;/span&gt;</span><br><span class=\"hljs-string\">\t\t&lt;/span&gt;\\`)+\\`</span><br><span class=\"hljs-string\">\t&lt;/div&gt;</span><br><span class=\"hljs-string\">&lt;div style=&quot;padding-left:40px&quot;&gt;</span><br><span class=\"hljs-string\">\t&lt;div class=&quot;pd&quot;&gt;</span><br><span class=\"hljs-string\">\t\t&lt;span class=&quot;langCN&quot;&gt;1. 请在浏览器中直接打开此ACME服务URL，&lt;a href=&quot;$\\&#123;ACME.URL&#125;&quot; target=&quot;_blank&quot;&gt;点此打开&lt;/a&gt;；&lt;/span&gt;</span><br><span class=\"hljs-string\">\t\t&lt;span class=&quot;langEN&quot;&gt;1. Please open the ACME service URL directly in the browser, &lt;a href=&quot;$\\&#123;ACME.URL&#125;&quot; target=&quot;_blank&quot;&gt;click here to open&lt;/a&gt;;&lt;/span&gt;</span><br><span class=\"hljs-string\">\t&lt;/div&gt;</span><br><span class=\"hljs-string\">\t&lt;div class=&quot;pd&quot;&gt;</span><br><span class=\"hljs-string\">\t\t&lt;span class=&quot;langCN&quot;&gt;2. 在上一步打开的页面中打开浏览器控制台（需等页面加载完成后，再按F12键）；&lt;/span&gt;</span><br><span class=\"hljs-string\">\t\t&lt;span class=&quot;langEN&quot;&gt;2. Open the browser console in the page opened in the previous step (after the page is loaded, press the F12 key);&lt;/span&gt;</span><br><span class=\"hljs-string\">\t&lt;/div&gt;</span><br><span class=\"hljs-string\">\t&lt;div class=&quot;pd&quot;&gt;</span><br><span class=\"hljs-string\">\t\t&lt;span class=&quot;langCN&quot;&gt;3. 复制以下代码，在第2步打开的浏览器控制台中运行，然后就可以正常申请证书了。&lt;/span&gt;</span><br><span class=\"hljs-string\">\t\t&lt;span class=&quot;langEN&quot;&gt;3. Copy the following code, run it in the browser console opened in step 2, and then you can apply for the certificate normally.&lt;/span&gt;</span><br><span class=\"hljs-string\">\t&lt;/div&gt;</span><br><span class=\"hljs-string\">\t&lt;div class=&quot;pd&quot; style=&quot;font-size:13px;color:#aaa&quot;&gt;</span><br><span class=\"hljs-string\">\t\t&lt;span class=&quot;langCN&quot;&gt;工作原理：代码内包含了本页面源码，在目标页面内运行后将原样的显示出本客户端，然后按正常流程操作即可，此时已没有跨域问题了（既然打不过，那就加入他们）。&lt;/span&gt;</span><br><span class=\"hljs-string\">\t\t&lt;span class=&quot;langEN&quot;&gt;Working principle: The code contains the source code of this page. After running in the target page, the client will be displayed as it is, and then operate according to the normal process. At this time, there is no cross-domain problem (if we can&#x27;t beat them, we&#x27;d better join them).&lt;/span&gt;</span><br><span class=\"hljs-string\">\t&lt;/div&gt;</span><br><span class=\"hljs-string\">&lt;/div&gt;</span><br><span class=\"hljs-string\">\t&lt;div style=&quot;padding-top:20px&quot;&gt;</span><br><span class=\"hljs-string\">\t\t&lt;textarea class=&quot;gotoCORSText&quot; style=&quot;width:100%;height:200px&quot; readonly&gt;&lt;/textarea&gt;</span><br><span class=\"hljs-string\">\t&lt;/div&gt;</span><br><span class=\"hljs-string\">&lt;/div&gt;</span><br><span class=\"hljs-string\">\t\\`);</span><br><span class=\"hljs-string\">\t$(&quot;.gotoCORSText&quot;).val(codes);</span><br><span class=\"hljs-string\">\tLangReview(stateEl);</span><br><span class=\"hljs-string\">&#125;;</span><br><span class=\"hljs-string\">&lt;/script&gt;</span><br><span class=\"hljs-string\">\t&lt;/div&gt;</span><br><span class=\"hljs-string\">&lt;/div&gt;</span><br><span class=\"hljs-string\"></span><br><span class=\"hljs-string\"></span><br><span class=\"hljs-string\"></span><br><span class=\"hljs-string\"></span><br><span class=\"hljs-string\"></span><br><span class=\"hljs-string\">&lt;div class=&quot;mainBox&quot;&gt;</span><br><span class=\"hljs-string\">\t&lt;div class=&quot;pd itemTitle&quot;&gt;</span><br><span class=\"hljs-string\">\t\t&lt;span class=&quot;langCN&quot;&gt;步骤二：证书配置&lt;/span&gt;</span><br><span class=\"hljs-string\">\t\t&lt;span class=&quot;langEN&quot;&gt;Step 2: Certificate Configuration&lt;/span&gt;</span><br><span class=\"hljs-string\">\t&lt;/div&gt;</span><br><span class=\"hljs-string\">\t&lt;div class=&quot;step2Hide step1Show&quot;&gt;</span><br><span class=\"hljs-string\">\t\t&lt;div class=&quot;itemBox&quot; style=&quot;color:#999&quot;&gt;</span><br><span class=\"hljs-string\">\t\t\t&lt;span class=&quot;langCN&quot;&gt;等待中，请先完成第一步...&lt;/span&gt;</span><br><span class=\"hljs-string\">\t\t\t&lt;span class=&quot;langEN&quot;&gt;Waiting, please complete step 1 first...&lt;/span&gt;</span><br><span class=\"hljs-string\">\t\t&lt;/div&gt;</span><br><span class=\"hljs-string\">\t&lt;/div&gt;</span><br><span class=\"hljs-string\">\t&lt;div class=&quot;step1Hide step2Show&quot;&gt;</span><br><span class=\"hljs-string\">\t\t</span><br><span class=\"hljs-string\">\t\t</span><br><span class=\"hljs-string\">\t\t&lt;div class=&quot;pd&quot; style=&quot;font-size:13px;color:#aaa&quot;&gt;</span><br><span class=\"hljs-string\">\t\t\t&lt;span class=&quot;langCN&quot;&gt;温馨提示：如果上次申请过证书，可以拖拽已下载保存的记录LOG文件到本页面，将自动填充上次的配置信息。&lt;/span&gt;</span><br><span class=\"hljs-string\">\t\t\t&lt;span class=&quot;langEN&quot;&gt;Reminder: If you have applied for a certificate last time, you can drag and drop the downloaded and saved record LOG file to this page, and the last configuration information will be automatically filled in.&lt;/span&gt;</span><br><span class=\"hljs-string\">\t\t&lt;/div&gt;</span><br><span class=\"hljs-string\">\t\t</span><br><span class=\"hljs-string\">\t\t</span><br><span class=\"hljs-string\">\t\t&lt;div class=&quot;itemBox&quot;&gt;</span><br><span class=\"hljs-string\">\t\t\t&lt;div class=&quot;pd Bold&quot;&gt;</span><br><span class=\"hljs-string\">\t\t\t\t&lt;i class=&quot;must&quot;&gt;*&lt;/i&gt;</span><br><span class=\"hljs-string\">\t\t\t\t&lt;span class=&quot;langCN&quot;&gt;证书中要包含的域名：&lt;/span&gt;</span><br><span class=\"hljs-string\">\t\t\t\t&lt;span class=&quot;langEN&quot;&gt;Domain name to be included in the certificate:&lt;/span&gt;</span><br><span class=\"hljs-string\">\t\t\t&lt;/div&gt;</span><br><span class=\"hljs-string\">\t\t\t&lt;div class=&quot;pd&quot; style=&quot;font-size:13px;color:#aaa&quot;&gt;</span><br><span class=\"hljs-string\">\t\t\t\t&lt;span class=&quot;langCN&quot;&gt;一个证书可以包含多个域名（支持通配符），比如填写：&lt;i class=&quot;i&quot;&gt;a.com, *.a.com, b.com, *.b.com&lt;/i&gt;；第一个域名将作为证书的通用名称（Common Name）；带通配符的域名只支持DNS验证，其他域名支持上传文件验证；注意：填了&lt;i class=&quot;i&quot;&gt;www.a.com&lt;/i&gt;时，一般需要额外填上&lt;i class=&quot;i&quot;&gt;a.com&lt;/i&gt;。&lt;/span&gt;</span><br><span class=\"hljs-string\">\t\t\t\t&lt;span class=&quot;langEN&quot;&gt;A certificate can contain multiple domain names (wildcard are supported), for example, fill in: &lt;i class=&quot;i&quot;&gt;a.com, *.a.com, b.com, *.b.com&lt;/i&gt;; the first domain name will be used as the Common Name of the certificate; Domain names with wildcard only support DNS verification, and other domain names support upload file verification ; Note: When &lt;i class=&quot;i&quot;&gt;www.a.com&lt;/i&gt; is filled in, it is generally necessary to fill in &lt;i class=&quot;i&quot;&gt;a.com&lt;/i&gt; additionally.&lt;/span&gt;</span><br><span class=\"hljs-string\">\t\t\t&lt;/div&gt;</span><br><span class=\"hljs-string\">\t\t\t&lt;div class=&quot;FlexBox&quot;&gt;</span><br><span class=\"hljs-string\">\t\t\t\t&lt;div class=&quot;FlexItem&quot;&gt;</span><br><span class=\"hljs-string\">\t\t\t\t\t&lt;input class=&quot;in_domains inputLang&quot; style=&quot;width:100%&quot; placeholder-cn=&quot;请填写你的域名，多个用逗号隔开&quot; placeholder-en=&quot;Please fill in your domain name, multiple separated by commas&quot;&gt;</span><br><span class=\"hljs-string\">\t\t\t\t&lt;/div&gt;</span><br><span class=\"hljs-string\">\t\t\t\t&lt;div style=&quot;padding-left:15px;line-height:30px;font-size:13px;color:#aaa&quot;&gt;</span><br><span class=\"hljs-string\">\t\t\t\t\t&lt;label&gt;</span><br><span class=\"hljs-string\">\t\t\t\t\t\t&lt;input type=&quot;checkbox&quot; class=&quot;choice_domains_store&quot;&gt;</span><br><span class=\"hljs-string\">\t\t\t\t\t\t&lt;span class=&quot;langCN&quot;&gt;记住&lt;/span&gt;</span><br><span class=\"hljs-string\">\t\t\t\t\t\t&lt;span class=&quot;langEN&quot;&gt;Remember&lt;/span&gt;</span><br><span class=\"hljs-string\">\t\t\t\t\t&lt;/label&gt;</span><br><span class=\"hljs-string\">\t\t\t\t&lt;/div&gt;</span><br><span class=\"hljs-string\">\t\t\t&lt;/div&gt;</span><br><span class=\"hljs-string\">\t\t&lt;/div&gt;</span><br><span class=\"hljs-string\">\t\t</span><br><span class=\"hljs-string\">\t\t</span><br><span class=\"hljs-string\">\t\t&lt;div class=&quot;itemBox&quot;&gt;</span><br><span class=\"hljs-string\">\t\t\t&lt;div class=&quot;pd Bold&quot;&gt;</span><br><span class=\"hljs-string\">\t\t\t\t&lt;i class=&quot;must&quot;&gt;*&lt;/i&gt;</span><br><span class=\"hljs-string\">\t\t\t\t&lt;span class=&quot;langCN&quot;&gt;证书的私钥：&lt;/span&gt;</span><br><span class=\"hljs-string\">\t\t\t\t&lt;span class=&quot;langEN&quot;&gt;Private key of certificate:&lt;/span&gt;</span><br><span class=\"hljs-string\">\t\t\t&lt;/div&gt;</span><br><span class=\"hljs-string\">\t\t\t&lt;div class=&quot;pd&quot; style=&quot;font-size:13px;color:#aaa&quot;&gt;</span><br><span class=\"hljs-string\">\t\t\t\t&lt;span class=&quot;langCN&quot;&gt;生成或填写的私钥仅用于ACME接口签名，支持&lt;i class=&quot;i&quot;&gt;RSA(2048位+)&lt;/i&gt;、&lt;i class=&quot;i&quot;&gt;ECC(&lt;span class=&quot;eccCurveNames&quot;&gt;&lt;/span&gt;曲线)&lt;/i&gt;私钥；&lt;span style=&quot;color:#f80&quot;&gt;注意：证书私钥的类型决定了申请到的证书是RSA证书还是ECC(ECDSA)证书，RSA类型适用性更广也更常见&lt;/span&gt;；本客户端不会对此私钥进行保存或发送给其他任何人；证书签发后在部署到服务器时，需使用到此私钥；建议每次申请证书时均生成新的证书私钥。&lt;/span&gt;</span><br><span class=\"hljs-string\">\t\t\t\t&lt;span class=&quot;langEN&quot;&gt;The generated or filled private key is only used for ACME interface signature, and supports &lt;i class=&quot;i&quot;&gt;RSA (2048-bit+)&lt;/i&gt; and &lt;i class=&quot;i&quot;&gt;ECC (&lt;span class=&quot;eccCurveNames&quot;&gt;&lt;/span&gt; curve)&lt;/i&gt; private keys; &lt;span style=&quot;color:#f80&quot;&gt;Note: The type of certificate private key determines whether the applied certificate is an RSA certificate or a ECC(ECDSA) certificate, RSA type is more widely applicable and more common;&lt;/span&gt; this client will not save or send this private key to anyone else; this private key needs to be used when deploying to the server after the certificate is issued; it is recommended to generate a new certificate private key every time you apply for a certificate.&lt;/span&gt;</span><br><span class=\"hljs-string\">\t\t\t&lt;/div&gt;</span><br><span class=\"hljs-string\">\t\t\t&lt;div class=&quot;pd&quot;&gt;</span><br><span class=\"hljs-string\">\t\t\t\t&lt;label&gt;</span><br><span class=\"hljs-string\">\t\t\t\t\t&lt;input type=&quot;radio&quot; name=&quot;choice_privateKey&quot; value=&quot;generateRSA&quot;&gt;</span><br><span class=\"hljs-string\">\t\t\t\t\t&lt;span class=&quot;langCN&quot;&gt;创建新RSA私钥&lt;/span&gt;</span><br><span class=\"hljs-string\">\t\t\t\t\t&lt;span class=&quot;langEN&quot;&gt;Generate RSA private key&lt;/span&gt;</span><br><span class=\"hljs-string\">\t\t\t\t&lt;/label&gt;</span><br><span class=\"hljs-string\">\t\t\t\t&lt;label&gt;</span><br><span class=\"hljs-string\">\t\t\t\t\t&lt;input type=&quot;radio&quot; name=&quot;choice_privateKey&quot; value=&quot;generateECC&quot;&gt;</span><br><span class=\"hljs-string\">\t\t\t\t\t&lt;span class=&quot;langCN&quot;&gt;创建新ECC私钥&lt;/span&gt;</span><br><span class=\"hljs-string\">\t\t\t\t\t&lt;span class=&quot;langEN&quot;&gt;Generate ECC private key&lt;/span&gt;</span><br><span class=\"hljs-string\">\t\t\t\t&lt;/label&gt;</span><br><span class=\"hljs-string\">\t\t\t\t&lt;label&gt;</span><br><span class=\"hljs-string\">\t\t\t\t\t&lt;input type=&quot;radio&quot; name=&quot;choice_privateKey&quot; value=&quot;manual&quot;&gt;</span><br><span class=\"hljs-string\">\t\t\t\t\t&lt;span class=&quot;langCN&quot;&gt;手动填写私钥&lt;/span&gt;</span><br><span class=\"hljs-string\">\t\t\t\t\t&lt;span class=&quot;langEN&quot;&gt;Manually fill in the private key&lt;/span&gt;</span><br><span class=\"hljs-string\">\t\t\t\t&lt;/label&gt;</span><br><span class=\"hljs-string\">\t\t\t&lt;/div&gt;</span><br><span class=\"hljs-string\">\t\t\t&lt;div class=&quot;privateKeyBox&quot;&gt;</span><br><span class=\"hljs-string\">\t\t\t\t&lt;textarea class=&quot;in_privateKey inputLang&quot; style=&quot;width:100%;height:60px&quot; placeholder-cn=&quot;请填写pem私钥，私钥文本以 -----BEGIN PRIVATE KEY----- 开头（这是PKCS#8格式，里面带有 RSA|EC 字符的PKCS#1格式也是支持的）&quot; placeholder-en=&quot;Please fill in the pem private key. The private key text starts with -----BEGIN PRIVATE KEY----- (this is in PKCS#8 format, and PKCS#1 format with RSA|EC characters in it is also supported)&quot;&gt;&lt;/textarea&gt;</span><br><span class=\"hljs-string\">\t\t\t&lt;/div&gt;</span><br><span class=\"hljs-string\">\t\t\t&lt;div class=&quot;privateKeyState&quot;&gt;&lt;/div&gt;</span><br><span class=\"hljs-string\">\t\t&lt;/div&gt;</span><br><span class=\"hljs-string\">\t\t</span><br><span class=\"hljs-string\">\t\t</span><br><span class=\"hljs-string\">\t\t&lt;div class=&quot;itemBox&quot;&gt;</span><br><span class=\"hljs-string\">\t\t\t&lt;div class=&quot;pd Bold&quot;&gt;</span><br><span class=\"hljs-string\">\t\t\t\t&lt;i class=&quot;must&quot;&gt;*&lt;/i&gt;</span><br><span class=\"hljs-string\">\t\t\t\t&lt;span class=&quot;langCN&quot;&gt;ACME账户的私钥：&lt;/span&gt;</span><br><span class=\"hljs-string\">\t\t\t\t&lt;span class=&quot;langEN&quot;&gt;Private key of ACME account:&lt;/span&gt;</span><br><span class=\"hljs-string\">\t\t\t&lt;/div&gt;</span><br><span class=\"hljs-string\">\t\t\t&lt;div class=&quot;pd&quot; style=&quot;font-size:13px;color:#aaa&quot;&gt;</span><br><span class=\"hljs-string\">\t\t\t\t&lt;span class=&quot;langCN&quot;&gt;生成或填写的私钥仅用于ACME接口签名，支持&lt;i class=&quot;i&quot;&gt;RSA(2048位+)&lt;/i&gt;、&lt;i class=&quot;i&quot;&gt;ECC(&lt;span class=&quot;eccCurveNames&quot;&gt;&lt;/span&gt;曲线)&lt;/i&gt;私钥；账户私钥类型对证书无影响；本客户端不会对此私钥进行保存或发送给其他任何人；一个私钥相当于一个账户，可用于吊销已签发的证书；建议每次申请证书时使用相同的一个私钥（这样短期内多次申请证书时，验证域名所有权的参数极有可能会保持相同），不过每次都生成一个新的私钥大部分情况下也不会有问题。&lt;/span&gt;</span><br><span class=\"hljs-string\">\t\t\t\t&lt;span class=&quot;langEN&quot;&gt;The generated or filled private key is only used for ACME interface signature, and supports &lt;i class=&quot;i&quot;&gt;RSA (2048-bit+)&lt;/i&gt; and &lt;i class=&quot;i&quot;&gt;ECC (&lt;span class=&quot;eccCurveNames&quot;&gt;&lt;/span&gt; curve)&lt;/i&gt; private keys; the account private key type has no effect on the certificate; this client will not save or send this private key to anyone else; A private key is equivalent to an account and can be used to revoke an issued certificate; it is recommended to use the same private key every time you apply for a certificate (in this way, the parameters used to verify the domain name ownership are likely to remain identical when multiple certificate applications are made in a short period of time); However, generating a new private key every time will not be a problem in most cases.&lt;/span&gt;</span><br><span class=\"hljs-string\">\t\t\t\t&lt;span class=&quot;eabShow&quot; style=&quot;color:#f80&quot;&gt;</span><br><span class=\"hljs-string\">\t\t\t\t\t&lt;span class=&quot;langCN&quot;&gt;注意：如果你选择的ACME服务（比如Google）要求提供EAB凭据并且限制了同一个EAB凭据只能绑定到一个ACME账户（私钥），那每次使用此EAB凭据时必须使用相同的一个私钥（首次时如果新创建了私钥，此新私钥需立即保存起来下次和此EAB凭据一起使用）。&lt;/span&gt;</span><br><span class=\"hljs-string\">\t\t\t\t\t&lt;span class=&quot;langEN&quot;&gt;Note: If the ACME service you choose (such as Google) requires EAB credentials and limits the same EAB credentials to only one ACME account (private key), then you must use the same private key every time you use this EAB credential (if you generate a new private key for the first time, this new private key needs to be saved immediately and used with this EAB credential next time).&lt;/span&gt;</span><br><span class=\"hljs-string\">\t\t\t\t&lt;/span&gt;</span><br><span class=\"hljs-string\">\t\t\t&lt;/div&gt;</span><br><span class=\"hljs-string\">\t\t\t&lt;div class=&quot;pd&quot;&gt;</span><br><span class=\"hljs-string\">\t\t\t\t&lt;label&gt;</span><br><span class=\"hljs-string\">\t\t\t\t\t&lt;input type=&quot;radio&quot; name=&quot;choice_accountKey&quot; value=&quot;generateRSA&quot;&gt;</span><br><span class=\"hljs-string\">\t\t\t\t\t&lt;span class=&quot;langCN&quot;&gt;创建新RSA私钥&lt;/span&gt;</span><br><span class=\"hljs-string\">\t\t\t\t\t&lt;span class=&quot;langEN&quot;&gt;Generate RSA private key&lt;/span&gt;</span><br><span class=\"hljs-string\">\t\t\t\t&lt;/label&gt;</span><br><span class=\"hljs-string\">\t\t\t\t&lt;label&gt;</span><br><span class=\"hljs-string\">\t\t\t\t\t&lt;input type=&quot;radio&quot; name=&quot;choice_accountKey&quot; value=&quot;generateECC&quot;&gt;</span><br><span class=\"hljs-string\">\t\t\t\t\t&lt;span class=&quot;langCN&quot;&gt;创建新ECC私钥&lt;/span&gt;</span><br><span class=\"hljs-string\">\t\t\t\t\t&lt;span class=&quot;langEN&quot;&gt;Generate ECC private key&lt;/span&gt;</span><br><span class=\"hljs-string\">\t\t\t\t&lt;/label&gt;</span><br><span class=\"hljs-string\">\t\t\t\t&lt;label&gt;</span><br><span class=\"hljs-string\">\t\t\t\t\t&lt;input type=&quot;radio&quot; name=&quot;choice_accountKey&quot; value=&quot;manual&quot;&gt;</span><br><span class=\"hljs-string\">\t\t\t\t\t&lt;span class=&quot;langCN&quot;&gt;手动填写私钥&lt;/span&gt;</span><br><span class=\"hljs-string\">\t\t\t\t\t&lt;span class=&quot;langEN&quot;&gt;Manually fill in the private key&lt;/span&gt;</span><br><span class=\"hljs-string\">\t\t\t\t&lt;/label&gt;</span><br><span class=\"hljs-string\">\t\t\t&lt;/div&gt;</span><br><span class=\"hljs-string\">\t\t\t&lt;div class=&quot;accountKeyBox&quot;&gt;</span><br><span class=\"hljs-string\">\t\t\t\t&lt;textarea class=&quot;in_accountKey inputLang&quot; style=&quot;width:100%;height:60px&quot; placeholder-cn=&quot;请填写pem私钥，私钥文本以 -----BEGIN PRIVATE KEY----- 开头（这是PKCS#8格式，里面带有 RSA|EC 字符的PKCS#1格式也是支持的）&quot; placeholder-en=&quot;Please fill in the pem private key. The private key text starts with -----BEGIN PRIVATE KEY----- (this is in PKCS#8 format, and PKCS#1 format with RSA|EC characters in it is also supported)&quot;&gt;&lt;/textarea&gt;</span><br><span class=\"hljs-string\">\t\t\t&lt;/div&gt;</span><br><span class=\"hljs-string\">\t\t\t&lt;div class=&quot;accountKeyState&quot;&gt;&lt;/div&gt;</span><br><span class=\"hljs-string\">\t\t&lt;/div&gt;</span><br><span class=\"hljs-string\">\t\t</span><br><span class=\"hljs-string\">\t\t</span><br><span class=\"hljs-string\">\t\t&lt;div class=&quot;itemBox&quot;&gt;</span><br><span class=\"hljs-string\">\t\t\t&lt;div class=&quot;pd Bold&quot;&gt;</span><br><span class=\"hljs-string\">\t\t\t\t&lt;i class=&quot;must&quot;&gt;*&lt;/i&gt;</span><br><span class=\"hljs-string\">\t\t\t\t&lt;span class=&quot;langCN&quot;&gt;ACME账户的联系邮箱：&lt;/span&gt;</span><br><span class=\"hljs-string\">\t\t\t\t&lt;span class=&quot;langEN&quot;&gt;Contact email of ACME account:&lt;/span&gt;</span><br><span class=\"hljs-string\">\t\t\t&lt;/div&gt;</span><br><span class=\"hljs-string\">\t\t\t&lt;div class=&quot;pd&quot; style=&quot;font-size:13px;color:#aaa&quot;&gt;</span><br><span class=\"hljs-string\">\t\t\t\t&lt;span class=&quot;langCN&quot;&gt;此邮箱地址用于证书颁发机构给你发送邮件，比如：证书过期前的续期通知提醒。&lt;/span&gt;</span><br><span class=\"hljs-string\">\t\t\t\t&lt;span class=&quot;langEN&quot;&gt;This email address is used by the certificate authority to send you emails, such as a reminder of renewal notice before the certificate expires.&lt;/span&gt;</span><br><span class=\"hljs-string\">\t\t\t&lt;/div&gt;</span><br><span class=\"hljs-string\">\t\t\t&lt;div class=&quot;FlexBox&quot;&gt;</span><br><span class=\"hljs-string\">\t\t\t\t&lt;div class=&quot;FlexItem&quot;&gt;</span><br><span class=\"hljs-string\">\t\t\t\t\t&lt;input class=&quot;in_email inputLang&quot; style=&quot;width:100%&quot; placeholder-cn=&quot;请填写一个你的邮箱&quot; placeholder-en=&quot;Please fill in one of your email addresses&quot;&gt;</span><br><span class=\"hljs-string\">\t\t\t\t&lt;/div&gt;</span><br><span class=\"hljs-string\">\t\t\t\t&lt;div style=&quot;padding-left:15px;line-height:30px;font-size:13px;color:#aaa&quot;&gt;</span><br><span class=\"hljs-string\">\t\t\t\t\t&lt;label&gt;</span><br><span class=\"hljs-string\">\t\t\t\t\t\t&lt;input type=&quot;checkbox&quot; class=&quot;choice_email_store&quot;&gt;</span><br><span class=\"hljs-string\">\t\t\t\t\t\t&lt;span class=&quot;langCN&quot;&gt;记住&lt;/span&gt;</span><br><span class=\"hljs-string\">\t\t\t\t\t\t&lt;span class=&quot;langEN&quot;&gt;Remember&lt;/span&gt;</span><br><span class=\"hljs-string\">\t\t\t\t\t&lt;/label&gt;</span><br><span class=\"hljs-string\">\t\t\t\t&lt;/div&gt;</span><br><span class=\"hljs-string\">\t\t\t&lt;/div&gt;</span><br><span class=\"hljs-string\">\t\t&lt;/div&gt;</span><br><span class=\"hljs-string\">\t\t</span><br><span class=\"hljs-string\">\t\t</span><br><span class=\"hljs-string\">\t\t&lt;div class=&quot;itemBox eabShow&quot;&gt;</span><br><span class=\"hljs-string\">\t\t\t&lt;div class=&quot;pd Bold&quot;&gt;</span><br><span class=\"hljs-string\">\t\t\t\t&lt;span class=&quot;langCN&quot;&gt;EAB凭据：&lt;/span&gt;</span><br><span class=\"hljs-string\">\t\t\t\t&lt;span class=&quot;langEN&quot;&gt;EAB Credentials:&lt;/span&gt;</span><br><span class=\"hljs-string\">\t\t\t&lt;/div&gt;</span><br><span class=\"hljs-string\">\t\t\t&lt;div class=&quot;pd&quot; style=&quot;font-size:13px;color:#aaa&quot;&gt;</span><br><span class=\"hljs-string\">\t\t\t\t&lt;span class=&quot;langCN&quot;&gt;当前ACME服务要求提供外部账号绑定凭据（External Account Binding），比如ZeroSSL：你可以在ZeroSSL的管理控制台的 Developer 中获得此凭据，所以你需要先注册一个ZeroSSL的账号。&lt;/span&gt;</span><br><span class=\"hljs-string\">\t\t\t\t&lt;span class=&quot;langEN&quot;&gt;The current ACME service requires external account binding credentials, such as ZeroSSL: You can obtain this credentials in the Developer of the ZeroSSL management console, so you need to register a ZeroSSL account first.&lt;/span&gt;</span><br><span class=\"hljs-string\">\t\t\t&lt;/div&gt;</span><br><span class=\"hljs-string\">\t\t\t&lt;div class=&quot;FlexBox&quot; style=&quot;line-height:30px&quot;&gt;</span><br><span class=\"hljs-string\">\t\t\t\t&lt;div&gt;&lt;i class=&quot;must&quot;&gt;*&lt;/i&gt;EAB KID:&lt;/div&gt;</span><br><span class=\"hljs-string\">\t\t\t\t&lt;div class=&quot;FlexItem&quot; style=&quot;padding:0 50px 0 6px&quot;&gt;</span><br><span class=\"hljs-string\">\t\t\t\t\t&lt;input class=&quot;in_eab_kid inputLang&quot; style=&quot;width:100%&quot; placeholder-cn=&quot;请填写EAB KID&quot; placeholder-en=&quot;Please fill in EAB KID&quot;&gt;</span><br><span class=\"hljs-string\">\t\t\t\t&lt;/div&gt;</span><br><span class=\"hljs-string\">\t\t\t\t&lt;div style=&quot;padding:0 6px 0 0&quot;&gt;&lt;i class=&quot;must&quot;&gt;*&lt;/i&gt;HMAC KEY:&lt;/div&gt;</span><br><span class=\"hljs-string\">\t\t\t\t&lt;div class=&quot;FlexItem&quot;&gt;</span><br><span class=\"hljs-string\">\t\t\t\t\t&lt;input class=&quot;in_eab_key inputLang&quot; style=&quot;width:100%&quot; placeholder-cn=&quot;请填写EAB HMAC KEY&quot; placeholder-en=&quot;Please fill in EAB HMAC KEY&quot;&gt;</span><br><span class=\"hljs-string\">\t\t\t\t&lt;/div&gt;</span><br><span class=\"hljs-string\">\t\t\t&lt;/div&gt;</span><br><span class=\"hljs-string\">\t\t&lt;/div&gt;</span><br><span class=\"hljs-string\">\t\t</span><br><span class=\"hljs-string\">\t\t&lt;div class=&quot;pd termsAgreeBox&quot;&gt;</span><br><span class=\"hljs-string\">\t\t\t&lt;label&gt;</span><br><span class=\"hljs-string\">\t\t\t\t&lt;input type=&quot;checkbox&quot; class=&quot;choice_termsAgree&quot;&gt;</span><br><span class=\"hljs-string\">\t\t\t\t&lt;span class=&quot;termsAgreeTips&quot;&gt;&lt;/span&gt;</span><br><span class=\"hljs-string\">\t\t\t&lt;/label&gt;</span><br><span class=\"hljs-string\">\t\t&lt;/div&gt;</span><br><span class=\"hljs-string\">\t\t</span><br><span class=\"hljs-string\">\t\t&lt;div class=&quot;Center&quot; style=&quot;padding:15px 0 10px&quot;&gt;</span><br><span class=\"hljs-string\">\t\t\t&lt;span class=&quot;mainBtn&quot; onclick=&quot;configStepClick()&quot; style=&quot;width:300px&quot;&gt;</span><br><span class=\"hljs-string\">\t\t\t\t&lt;span class=&quot;langCN&quot;&gt;确定&lt;/span&gt;</span><br><span class=\"hljs-string\">\t\t\t\t&lt;span class=&quot;langEN&quot;&gt;OK&lt;/span&gt;</span><br><span class=\"hljs-string\">\t\t\t&lt;/span&gt;</span><br><span class=\"hljs-string\">\t\t&lt;/div&gt;</span><br><span class=\"hljs-string\">\t\t&lt;div class=&quot;configStepState&quot;&gt;&lt;/div&gt;</span><br><span class=\"hljs-string\">\t\t</span><br><span class=\"hljs-string\">\t&lt;/div&gt;</span><br><span class=\"hljs-string\">&lt;/div&gt;</span><br><span class=\"hljs-string\"></span><br><span class=\"hljs-string\"></span><br><span class=\"hljs-string\"></span><br><span class=\"hljs-string\"></span><br><span class=\"hljs-string\"></span><br><span class=\"hljs-string\"></span><br><span class=\"hljs-string\">&lt;div class=&quot;mainBox&quot;&gt;</span><br><span class=\"hljs-string\">\t&lt;div class=&quot;pd itemTitle&quot;&gt;</span><br><span class=\"hljs-string\">\t\t&lt;span class=&quot;langCN&quot;&gt;步骤三：验证域名所有权&lt;/span&gt;</span><br><span class=\"hljs-string\">\t\t&lt;span class=&quot;langEN&quot;&gt;Step 3: Verify Domain Ownership&lt;/span&gt;</span><br><span class=\"hljs-string\">\t&lt;/div&gt;</span><br><span class=\"hljs-string\">\t&lt;div class=&quot;step3Hide step2Show step1Show&quot;&gt;</span><br><span class=\"hljs-string\">\t\t&lt;div class=&quot;itemBox&quot; style=&quot;color:#999&quot;&gt;</span><br><span class=\"hljs-string\">\t\t\t&lt;span class=&quot;langCN&quot;&gt;等待中，请先完成第二步...&lt;/span&gt;</span><br><span class=\"hljs-string\">\t\t\t&lt;span class=&quot;langEN&quot;&gt;Waiting, please complete step 2 first...&lt;/span&gt;</span><br><span class=\"hljs-string\">\t\t&lt;/div&gt;</span><br><span class=\"hljs-string\">\t&lt;/div&gt;</span><br><span class=\"hljs-string\">\t&lt;div class=&quot;step1Hide step2Hide step3Show&quot;&gt;</span><br><span class=\"hljs-string\">\t\t</span><br><span class=\"hljs-string\">\t\t&lt;div class=&quot;pd&quot; style=&quot;font-size:13px;color:#f80&quot;&gt;</span><br><span class=\"hljs-string\">\t\t\t&lt;span class=&quot;langCN&quot;&gt;请给每个域名选择一个你合适的验证方式（推荐采用DNS验证，比较简单和通用），然后根据显示的提示完成对应的配置操作。&lt;/span&gt;</span><br><span class=\"hljs-string\">\t\t\t&lt;span class=&quot;langEN&quot;&gt;Please select a suitable verification method for each domain name (DNS Verify is recommended, which is relatively simple and common), and then complete the corresponding configuration operations according to the displayed prompts.&lt;/span&gt;</span><br><span class=\"hljs-string\">\t\t&lt;/div&gt;</span><br><span class=\"hljs-string\">\t\t</span><br><span class=\"hljs-string\">\t\t&lt;div class=&quot;verifyBox&quot;&gt;&lt;/div&gt;</span><br><span class=\"hljs-string\">&lt;script&gt;</span><br><span class=\"hljs-string\">//显示所有域名的验证界面，html太多</span><br><span class=\"hljs-string\">var verifyBoxShow=function()&#123;</span><br><span class=\"hljs-string\">\t&quot;use strict&quot;;</span><br><span class=\"hljs-string\">\tvar boxEl=$(&quot;.verifyBox&quot;).html(&quot;&quot;);</span><br><span class=\"hljs-string\">\tvar auths=JSON.parse(JSON.stringify(ACME.StepData.auths));//避免改动原始数据</span><br><span class=\"hljs-string\">\tvar domains=ACME.StepData.config.domains;</span><br><span class=\"hljs-string\">\tfor(var i0=0;i0&lt;domains.length;i0++)&#123;</span><br><span class=\"hljs-string\">\t\tvar domain=domains[i0],auth=auths[domain]</span><br><span class=\"hljs-string\">\t\t</span><br><span class=\"hljs-string\">\t\tvar challs=auth.challenges;</span><br><span class=\"hljs-string\">\t\tfor(var i=0;i&lt;challs.length;i++)&#123;//排序，dns排前面</span><br><span class=\"hljs-string\">\t\t\tvar o=challs[i];</span><br><span class=\"hljs-string\">\t\t\to.challIdx=i;</span><br><span class=\"hljs-string\">\t\t\to.name=ACME.ChallName(o);</span><br><span class=\"hljs-string\">\t\t\to._sort=ACME.ChallSort(o);</span><br><span class=\"hljs-string\">\t\t&#125;</span><br><span class=\"hljs-string\">\t\tchalls.sort(function(a,b)&#123;return a._sort.localeCompare(b._sort)&#125;);</span><br><span class=\"hljs-string\">\t\tvar choiceHtml=&quot;&quot;;</span><br><span class=\"hljs-string\">\t\tfor(var i=0;i&lt;challs.length;i++)&#123;</span><br><span class=\"hljs-string\">\t\t\tvar chall=challs[i];</span><br><span class=\"hljs-string\">\t\t\tchoiceHtml+=\\`</span><br><span class=\"hljs-string\">&lt;label&gt;</span><br><span class=\"hljs-string\">\t&lt;input type=&quot;radio&quot; name=&quot;choice_authItem_$\\&#123;i0&#125;&quot;</span><br><span class=\"hljs-string\">\t\tclass=&quot;choice_authChall choice_authChall_$\\&#123;i0&#125; choice_authChall_$\\&#123;i0&#125;_$\\&#123;i&#125;&quot;</span><br><span class=\"hljs-string\">\t\tvalue=&quot;$\\&#123;i0&#125;_$\\&#123;i&#125;&quot; challidx=&quot;$\\&#123;chall.challIdx&#125;&quot;&gt;$\\&#123;chall.name&#125;</span><br><span class=\"hljs-string\">&lt;/label&gt;</span><br><span class=\"hljs-string\">\t\t\t\\`;</span><br><span class=\"hljs-string\">\t\t&#125;</span><br><span class=\"hljs-string\">\t\t</span><br><span class=\"hljs-string\">\t\tboxEl.append(\\`</span><br><span class=\"hljs-string\">&lt;div class=&quot;itemBox&quot;&gt;</span><br><span class=\"hljs-string\">\t&lt;div class=&quot;pd FlexBox&quot; style=&quot;line-height:26px&quot;&gt;</span><br><span class=\"hljs-string\">\t\t&lt;div&gt;&lt;i class=&quot;must&quot;&gt;*&lt;/i&gt;&lt;/div&gt;</span><br><span class=\"hljs-string\">\t\t&lt;div style=&quot;width:180px;padding-right:5px;text-align:right;background:#03baed;color:#fff;border-radius: 4px;&quot;&gt;$\\&#123;domain&#125;&lt;/div&gt;</span><br><span class=\"hljs-string\">\t\t&lt;div class=&quot;FlexItem&quot; style=&quot;padding-left:10px;&quot;&gt;$\\&#123;choiceHtml&#125;&lt;/div&gt;</span><br><span class=\"hljs-string\">\t&lt;/div&gt;</span><br><span class=\"hljs-string\">\t&lt;div class=&quot;verifyItemBox_$\\&#123;i0&#125;&quot;&gt;&lt;/div&gt;</span><br><span class=\"hljs-string\">\t&lt;div class=&quot;verifyItemState_$\\&#123;i0&#125;&quot;&gt;&lt;/div&gt;</span><br><span class=\"hljs-string\">&lt;/div&gt;</span><br><span class=\"hljs-string\">\t\t\\`);</span><br><span class=\"hljs-string\">\t&#125;;</span><br><span class=\"hljs-string\">\tLangReview(boxEl);</span><br><span class=\"hljs-string\">\t</span><br><span class=\"hljs-string\">\t$(&quot;.choice_authChall&quot;).bind(&quot;click&quot;,function(e)&#123;</span><br><span class=\"hljs-string\">\t\tvar el=e.target,vals=el.value.split(&quot;_&quot;),i0=+vals[0],i2=+vals[1];</span><br><span class=\"hljs-string\">\t\tvar domain=domains[i0],auth=auths[domain],chall=auth.challenges[i2];</span><br><span class=\"hljs-string\">\t\tvar html=[&#x27;&lt;div class=&quot;pd&quot; style=&quot;padding-left:10px;font-size:13px;color:#aaa&quot;&gt;&#x27;];</span><br><span class=\"hljs-string\">\t\tvar nameCss=&#x27;width:195px;text-align:right;padding-right:10px&#x27;;</span><br><span class=\"hljs-string\">\t\tif(chall.type==&quot;dns-01&quot;)&#123;</span><br><span class=\"hljs-string\">\t\t\thtml.push(Lang(&#x27;请到你的域名DNS解析管理中，给下面这个子域名增加一条&lt;i class=&quot;i&quot;&gt;TXT记录&lt;/i&gt;（一个子域名可以同时存在多条TXT记录，可以修改或删除老的记录）。&#x27;,&#x27;Please go to the DNS resolution management of your domain name and add a &lt;i class=&quot;i&quot;&gt;TXT record&lt;/i&gt; for the following subdomain name (a subdomain name can have multiple TXT records at the same time, and the old records can be modified or deleted).&#x27;)+&#x27;&lt;/div&gt;&#x27;);</span><br><span class=\"hljs-string\">\t\t\thtml.push(\\`&lt;div class=&quot;pd FlexBox&quot;&gt;</span><br><span class=\"hljs-string\">\t\t\t\t&lt;div style=&quot;$\\&#123;nameCss&#125;&quot;&gt;$\\&#123;Lang(&#x27;子域名&#x27;,&#x27;Sub Domain&#x27;)&#125;:&lt;/div&gt;</span><br><span class=\"hljs-string\">\t\t\t\t&lt;div class=&quot;FlexItem&quot;&gt;</span><br><span class=\"hljs-string\">\t\t\t\t\t&lt;input style=&quot;width:100%&quot; readonly value=&quot;_acme-challenge.$\\&#123;auth.identifier.value&#125;&quot; /&gt;</span><br><span class=\"hljs-string\">\t\t\t\t&lt;/div&gt;</span><br><span class=\"hljs-string\">\t\t\t&lt;/div&gt;</span><br><span class=\"hljs-string\">\t\t\t&lt;div class=&quot;pd FlexBox&quot;&gt;</span><br><span class=\"hljs-string\">\t\t\t\t&lt;div style=&quot;$\\&#123;nameCss&#125;&quot;&gt;$\\&#123;Lang(&#x27;TXT记录&#x27;,&#x27;TXT Record&#x27;)&#125;:&lt;/div&gt;</span><br><span class=\"hljs-string\">\t\t\t\t&lt;div class=&quot;FlexItem&quot;&gt;</span><br><span class=\"hljs-string\">\t\t\t\t\t&lt;input style=&quot;width:100%&quot; readonly value=&quot;$\\&#123;chall.authTxtSHA256&#125;&quot; /&gt;</span><br><span class=\"hljs-string\">\t\t\t\t&lt;/div&gt;</span><br><span class=\"hljs-string\">\t\t\t&lt;/div&gt;\\`);</span><br><span class=\"hljs-string\">\t\t&#125;else if(chall.type==&quot;http-01&quot;)&#123;</span><br><span class=\"hljs-string\">\t\t\thtml.push(Lang(&#x27;请在你的网站根目录中创建&lt;i class=&quot;i&quot;&gt;/.well-known/acme-challenge/&lt;/i&gt;目录，目录内创建&lt;i class=&quot;i&quot;&gt;&#x27;+FormatText(chall.token)+&#x27;&lt;/i&gt;文件，文件内保存下面的文件内容，保存好后&lt;a href=&quot;http://&#x27;+auth.identifier.value+&#x27;/.well-known/acme-challenge/&#x27;+FormatText(chall.token)+&#x27;&quot; target=&quot;_blank&quot;&gt;请点此打开此文件URL&lt;/a&gt;测试能否正常访问；注意：这个文件URL必须是80端口，并且公网可以访问，否则ACME无法访问到此地址将会验证失败。Windows操作提示：Windows中用&lt;i class=&quot;i&quot;&gt;.well-known.&lt;/i&gt;作为文件夹名称就能创建&lt;i class=&quot;i&quot;&gt;.well-known&lt;/i&gt;文件夹；IIS可能需在此文件夹下的MIME类型中给 &lt;i class=&quot;i&quot;&gt;.&lt;/i&gt; （扩展名就是一个字&quot;.&quot;）添加 &lt;i class=&quot;i&quot;&gt;text/plain&lt;/i&gt; 才能正常访问。&#x27;,&#x27;Please create the &lt;i class=&quot;i&quot;&gt;/.well-known/acme-challenge/&lt;/i&gt; directory in the root directory of your website, create the &lt;i class=&quot;i&quot;&gt;&#x27;+FormatText(chall.token)+&#x27;&lt;/i&gt; file in the directory, and save the following file content in the file; After saving, &lt;a href=&quot;http://&#x27;+auth.identifier.value+&#x27;/.well-known/acme-challenge/&#x27;+FormatText(chall.token)+&#x27;&quot; target=&quot;_blank&quot;&gt;please click here to open the URL&lt;/a&gt; of this file to test whether Normal access; note: the URL of this file must be 80 The port and the public network can be accessed, otherwise ACME cannot access this address and the verification will fail. Windows operation tips: In Windows, you can create a &lt;i class=&quot;i&quot;&gt;.well-known&lt;/i&gt; folder by using &lt;i class=&quot;i&quot;&gt;.well-known.&lt;/i&gt; as the folder name; IIS may need to give &lt;i class=&quot;i&quot;&gt;.&lt;/i&gt; in the MIME type under this folder (the extension is a word &quot;.&quot;) Add &lt;i class=&quot;i&quot;&gt;text/plain&lt;/i&gt; for normal access.&#x27;)+&#x27;&lt;/div&gt;&#x27;);</span><br><span class=\"hljs-string\">\t\t\thtml.push(\\`&lt;div class=&quot;pd FlexBox&quot;&gt;</span><br><span class=\"hljs-string\">\t\t\t\t&lt;div style=&quot;$\\&#123;nameCss&#125;&quot;&gt;$\\&#123;Lang(&#x27;文件URL&#x27;,&#x27;File URL&#x27;)&#125;:&lt;/div&gt;</span><br><span class=\"hljs-string\">\t\t\t\t&lt;div class=&quot;FlexItem&quot;&gt;</span><br><span class=\"hljs-string\">\t\t\t\t\t&lt;input style=&quot;width:100%&quot; readonly value=&quot;http://$\\&#123;auth.identifier.value&#125;/.well-known/acme-challenge/$\\&#123;FormatText(chall.token)&#125;&quot; /&gt;</span><br><span class=\"hljs-string\">\t\t\t\t&lt;/div&gt;</span><br><span class=\"hljs-string\">\t\t\t&lt;/div&gt;</span><br><span class=\"hljs-string\">\t\t\t&lt;div class=&quot;pd FlexBox&quot;&gt;</span><br><span class=\"hljs-string\">\t\t\t\t&lt;div style=&quot;$\\&#123;nameCss&#125;&quot;&gt;$\\&#123;Lang(&#x27;文件内容&#x27;,&#x27;File Content&#x27;)&#125;:&lt;/div&gt;</span><br><span class=\"hljs-string\">\t\t\t\t&lt;div class=&quot;FlexItem&quot;&gt;</span><br><span class=\"hljs-string\">\t\t\t\t\t&lt;input style=&quot;width:100%&quot; readonly value=&quot;$\\&#123;chall.authTxt&#125;&quot; /&gt;</span><br><span class=\"hljs-string\">\t\t\t\t&lt;/div&gt;</span><br><span class=\"hljs-string\">\t\t\t&lt;/div&gt;\\`);</span><br><span class=\"hljs-string\">\t\t&#125;else&#123;</span><br><span class=\"hljs-string\">\t\t\thtml.push(Lang(&#x27;非预定义验证类型，请使用&lt;i class=&quot;i&quot;&gt;Key Authorizations (Token+.+指纹)&lt;/i&gt;自行处理，&lt;i class=&quot;i&quot;&gt;Digest&lt;/i&gt;为Key Authorizations的SHA-256 Base64值。&#x27;,&#x27;For non-predefined authentication types, please use &lt;i class=&quot;i&quot;&gt;Key Authorizations (Token+.+Thumbprint)&lt;/i&gt; to handle it yourself. &lt;i class=&quot;i&quot;&gt;Digest&lt;/i&gt; is the SHA-256 Base64 value of Key Authorizations.&#x27;)+&#x27;&lt;/div&gt;&#x27;);</span><br><span class=\"hljs-string\">\t\t\thtml.push(\\`&lt;div class=&quot;pd FlexBox&quot;&gt;</span><br><span class=\"hljs-string\">\t\t\t\t&lt;div style=&quot;$\\&#123;nameCss&#125;&quot;&gt;Key Authorizations:&lt;/div&gt;</span><br><span class=\"hljs-string\">\t\t\t\t&lt;div class=&quot;FlexItem&quot;&gt;</span><br><span class=\"hljs-string\">\t\t\t\t\t&lt;input style=&quot;width:100%&quot; readonly value=&quot;$\\&#123;chall.authTxt&#125;&quot; /&gt;</span><br><span class=\"hljs-string\">\t\t\t\t&lt;/div&gt;</span><br><span class=\"hljs-string\">\t\t\t&lt;/div&gt;</span><br><span class=\"hljs-string\">\t\t\t&lt;div class=&quot;pd FlexBox&quot;&gt;</span><br><span class=\"hljs-string\">\t\t\t\t&lt;div style=&quot;$\\&#123;nameCss&#125;&quot;&gt;Digest(SHA-256 Base64):&lt;/div&gt;</span><br><span class=\"hljs-string\">\t\t\t\t&lt;div class=&quot;FlexItem&quot;&gt;</span><br><span class=\"hljs-string\">\t\t\t\t\t&lt;input style=&quot;width:100%&quot; readonly value=&quot;$\\&#123;chall.authTxtSHA256Base64&#125;&quot; /&gt;</span><br><span class=\"hljs-string\">\t\t\t\t&lt;/div&gt;</span><br><span class=\"hljs-string\">\t\t\t&lt;/div&gt;\\`);</span><br><span class=\"hljs-string\">\t\t&#125;</span><br><span class=\"hljs-string\">\t\t$(&quot;.verifyItemBox_&quot;+i0).html(html.join(&#x27;\\\\n&#x27;));</span><br><span class=\"hljs-string\">\t&#125;);</span><br><span class=\"hljs-string\">\tfor(var i0=0;i0&lt;domains.length;i0++)&#123;</span><br><span class=\"hljs-string\">\t\tvar el=$(&quot;.choice_authChall_&quot;+i0+&quot;_0&quot;);</span><br><span class=\"hljs-string\">\t\tel[0]&amp;&amp;el[0].click(); //默认选中每个域名的第一个</span><br><span class=\"hljs-string\">\t&#125;</span><br><span class=\"hljs-string\">&#125;;</span><br><span class=\"hljs-string\">&lt;/script&gt;</span><br><span class=\"hljs-string\">\t\t</span><br><span class=\"hljs-string\">\t\t&lt;div class=&quot;itemBox&quot;&gt;</span><br><span class=\"hljs-string\">\t\t\t&lt;div class=&quot;pd&quot; style=&quot;font-size:15px&quot;&gt;</span><br><span class=\"hljs-string\">\t\t\t\t&lt;span class=&quot;langCN&quot;&gt;请每个域名选择好对应的验证方式，根据显示的提示进行对应的配置操作；&lt;span style=&quot;color:#cb1d1d&quot;&gt;必须所有域名配置完成后，再来点击下面的“开始验证”按钮进行验证，&lt;/span&gt;如果验证失败，需要返回第二步重新开始操作。&lt;/span&gt;</span><br><span class=\"hljs-string\">\t\t\t\t&lt;span class=&quot;langEN&quot;&gt;Please select the corresponding verify method for each domain name, and perform the corresponding configuration operation according to the displayed prompts; &lt;span style=&quot;color:#cb1d1d&quot;&gt;after all domain names are configured, click the &quot;Start Verify&quot; button below to verify,&lt;/span&gt; if the verify fails, you need to go back to the step 2 Start the operation.&lt;/span&gt;</span><br><span class=\"hljs-string\">\t\t\t&lt;/div&gt;</span><br><span class=\"hljs-string\">\t\t\t</span><br><span class=\"hljs-string\">\t\t\t&lt;div class=&quot;Center&quot; style=&quot;padding:15px 0 10px&quot;&gt;</span><br><span class=\"hljs-string\">\t\t\t\t&lt;span class=&quot;mainBtn verifyStepBtn&quot; onclick=&quot;verifyStepClick()&quot; style=&quot;width:300px&quot;&gt;</span><br><span class=\"hljs-string\">\t\t\t\t\t&lt;span class=&quot;langCN&quot;&gt;开始验证&lt;/span&gt;</span><br><span class=\"hljs-string\">\t\t\t\t\t&lt;span class=&quot;langEN&quot;&gt;Start Verify&lt;/span&gt;</span><br><span class=\"hljs-string\">\t\t\t\t&lt;/span&gt;</span><br><span class=\"hljs-string\">\t\t\t\t&lt;span class=&quot;mainBtn verifyRunStopBtn&quot; onclick=&quot;verifyRunStopClick()&quot; style=&quot;width:300px;background:#aaa&quot;&gt;</span><br><span class=\"hljs-string\">\t\t\t\t\t&lt;span class=&quot;langCN&quot;&gt;取消&lt;/span&gt;</span><br><span class=\"hljs-string\">\t\t\t\t\t&lt;span class=&quot;langEN&quot;&gt;Cancel&lt;/span&gt;</span><br><span class=\"hljs-string\">\t\t\t\t&lt;/span&gt;</span><br><span class=\"hljs-string\">\t\t\t\t&lt;span class=&quot;mainBtn finalizeOrderBtn&quot; onclick=&quot;finalizeOrderClick()&quot; style=&quot;width:300px&quot;&gt;</span><br><span class=\"hljs-string\">\t\t\t\t\t&lt;span class=&quot;langCN&quot;&gt;重试&lt;/span&gt;</span><br><span class=\"hljs-string\">\t\t\t\t\t&lt;span class=&quot;langEN&quot;&gt;Retry&lt;/span&gt;</span><br><span class=\"hljs-string\">\t\t\t\t&lt;/span&gt;</span><br><span class=\"hljs-string\">\t\t\t&lt;/div&gt;</span><br><span class=\"hljs-string\">\t\t\t&lt;div class=&quot;verifyStepState&quot;&gt;&lt;/div&gt;</span><br><span class=\"hljs-string\">\t\t&lt;/div&gt;</span><br><span class=\"hljs-string\">\t\t</span><br><span class=\"hljs-string\">\t&lt;/div&gt;</span><br><span class=\"hljs-string\">&lt;/div&gt;</span><br><span class=\"hljs-string\"></span><br><span class=\"hljs-string\"></span><br><span class=\"hljs-string\"></span><br><span class=\"hljs-string\"></span><br><span class=\"hljs-string\"></span><br><span class=\"hljs-string\"></span><br><span class=\"hljs-string\">&lt;div class=&quot;mainBox&quot;&gt;</span><br><span class=\"hljs-string\">\t&lt;div class=&quot;pd itemTitle&quot;&gt;</span><br><span class=\"hljs-string\">\t\t&lt;span class=&quot;langCN&quot;&gt;步骤四：下载保存证书PEM文件&lt;/span&gt;</span><br><span class=\"hljs-string\">\t\t&lt;span class=&quot;langEN&quot;&gt;Step 4: Download and save the certificate PEM file&lt;/span&gt;</span><br><span class=\"hljs-string\">\t&lt;/div&gt;</span><br><span class=\"hljs-string\">\t&lt;div class=&quot;step4Hide step3Show step2Show step1Show&quot;&gt;</span><br><span class=\"hljs-string\">\t\t&lt;div class=&quot;itemBox&quot; style=&quot;color:#999&quot;&gt;</span><br><span class=\"hljs-string\">\t\t\t&lt;span class=&quot;langCN&quot;&gt;等待中，请先完成第三步...&lt;/span&gt;</span><br><span class=\"hljs-string\">\t\t\t&lt;span class=&quot;langEN&quot;&gt;Waiting, please complete step 3 first...&lt;/span&gt;</span><br><span class=\"hljs-string\">\t\t&lt;/div&gt;</span><br><span class=\"hljs-string\">\t&lt;/div&gt;</span><br><span class=\"hljs-string\">\t&lt;div class=&quot;step1Hide step2Hide step3Hide step4Show&quot;&gt;</span><br><span class=\"hljs-string\">\t</span><br><span class=\"hljs-string\">\t</span><br><span class=\"hljs-string\">\t\t&lt;div class=&quot;itemBox&quot;&gt;</span><br><span class=\"hljs-string\">\t\t\t&lt;div class=&quot;pd Bold&quot;&gt;</span><br><span class=\"hljs-string\">\t\t\t\t&lt;i class=&quot;must&quot;&gt;*&lt;/i&gt;</span><br><span class=\"hljs-string\">\t\t\t\t&lt;span class=&quot;langCN&quot;&gt;保存证书PEM文件：&lt;/span&gt;</span><br><span class=\"hljs-string\">\t\t\t\t&lt;span class=&quot;langEN&quot;&gt;Save certificate PEM file: &lt;/span&gt;</span><br><span class=\"hljs-string\">\t\t\t&lt;/div&gt;</span><br><span class=\"hljs-string\">\t\t\t&lt;div class=&quot;pd&quot; style=&quot;font-size:13px;color:#aaa&quot;&gt;</span><br><span class=\"hljs-string\">\t\t\t\t&lt;span class=&quot;langCN&quot;&gt;&lt;span style=&quot;color:#f80&quot;&gt;必须保存此文件，&lt;/span&gt;请点击下载按钮下载，或者将证书文本内容复制保存为&lt;i class=&quot;i downloadCertFileName&quot;&gt;&lt;/i&gt;文件（PEM纯文本格式）；文件名后缀可改成 &lt;i class=&quot;i&quot;&gt;.crt&lt;/i&gt; 或 &lt;i class=&quot;i&quot;&gt;.cer&lt;/i&gt;，这样在Windows中能直接双击打开查看。本PEM格式文件已包含你的域名证书、和完整证书链，文本中第一个CERTIFICATE为你的域名证书，后面的为证书颁发机构的中间证书和根证书，如过有需要你可以自行拆分成多个.pem文件。&lt;/span&gt;</span><br><span class=\"hljs-string\">\t\t\t\t&lt;span class=&quot;langEN&quot;&gt;&lt;span style=&quot;color:#f80&quot;&gt;This file must be saved,&lt;/span&gt; please click the download button to download, or copy the text content of the certificate and save it as &lt;i class=&quot;i downloadCertFileName&quot;&gt;&lt;/i&gt; file (PEM plain text format); the file name suffix can be changed to &lt;i class=&quot;i&quot;&gt;.crt &lt;/i&gt; or &lt;i class=&quot;i&quot;&gt;.cer &lt;/i&gt;, so that it can be directly double-clicked to open and view in Windows. This PEM format file already contains your domain name certificate and complete certificate chain. The first CERTIFICATE in the text is your domain name certificate, followed by the intermediate certificate and root certificate of the certificate authority, if necessary, you can split it into multiple .pem files.&lt;/span&gt;</span><br><span class=\"hljs-string\">\t\t\t&lt;/div&gt;</span><br><span class=\"hljs-string\">\t\t\t&lt;div class=&quot;FlexBox&quot;&gt;</span><br><span class=\"hljs-string\">\t\t\t\t&lt;div class=&quot;FlexItem&quot;&gt;</span><br><span class=\"hljs-string\">\t\t\t\t\t&lt;textarea class=&quot;txt_downloadCert&quot; style=&quot;width:100%;height:160px&quot; readonly=&quot;&quot;&gt;&lt;/textarea&gt;</span><br><span class=\"hljs-string\">\t\t\t\t&lt;/div&gt;</span><br><span class=\"hljs-string\">\t\t\t\t&lt;div style=&quot;padding-left:10px;line-height:30px;font-size:13px;color:#aaa&quot;&gt;</span><br><span class=\"hljs-string\">\t\t\t\t\t&lt;div class=&quot;mainBtn&quot; onclick=&quot;downloadBtnClick(&#x27;Cert&#x27;)&quot;&gt;</span><br><span class=\"hljs-string\">\t\t\t\t\t\t&lt;span class=&quot;langCN&quot;&gt;下载保存&lt;/span&gt;</span><br><span class=\"hljs-string\">\t\t\t\t\t\t&lt;span class=&quot;langEN&quot;&gt;Download&lt;/span&gt;</span><br><span class=\"hljs-string\">\t\t\t\t\t&lt;/div&gt;</span><br><span class=\"hljs-string\">\t\t\t\t&lt;/div&gt;</span><br><span class=\"hljs-string\">\t\t\t&lt;/div&gt;</span><br><span class=\"hljs-string\">\t\t&lt;/div&gt;</span><br><span class=\"hljs-string\">\t\t</span><br><span class=\"hljs-string\">\t\t</span><br><span class=\"hljs-string\">\t\t&lt;div class=&quot;itemBox&quot;&gt;</span><br><span class=\"hljs-string\">\t\t\t&lt;div class=&quot;pd Bold&quot;&gt;</span><br><span class=\"hljs-string\">\t\t\t\t&lt;i class=&quot;must&quot;&gt;*&lt;/i&gt;</span><br><span class=\"hljs-string\">\t\t\t\t&lt;span class=&quot;langCN&quot;&gt;保存证书私钥KEY文件：&lt;/span&gt;</span><br><span class=\"hljs-string\">\t\t\t\t&lt;span class=&quot;langEN&quot;&gt;Save the certificate private key KEY file: &lt;/span&gt;</span><br><span class=\"hljs-string\">\t\t\t&lt;/div&gt;</span><br><span class=\"hljs-string\">\t\t\t&lt;div class=&quot;pd&quot; style=&quot;font-size:13px;color:#aaa&quot;&gt;</span><br><span class=\"hljs-string\">\t\t\t\t&lt;span class=&quot;langCN&quot;&gt;请点击下载按钮下载，或者将私钥文本内容复制保存为&lt;i class=&quot;i downloadKeyFileName&quot;&gt;&lt;/i&gt;文件（PEM纯文本格式，.key后缀可自行修改成.pem）。如果第二步操作中你手动填写了证书私钥，此处的证书私钥和你填写的是完全一样的，可以不需要重复保存；&lt;span style=&quot;color:#f80&quot;&gt;如果你是新创建的证书私钥，则你必须下载保存此证书私钥文件。&lt;/span&gt;&lt;/span&gt;</span><br><span class=\"hljs-string\">\t\t\t\t&lt;span class=&quot;langEN&quot;&gt;Please click the download button to download, or copy and save the text content of the private key as &lt;i class=&quot;i downloadKeyFileName&quot;&gt;&lt;/i&gt; file (PEM plain text format, the .key suffix can be modified to .pem by yourself). If you manually filled in the certificate private key in the step 2, the certificate private key here is exactly the same as what you filled in, and you don’t need to save it repeatedly; &lt;span style=&quot;color:#f80&quot;&gt;if you are a newly created certificate private key, you must download and save it This certificate private key file.&lt;/span&gt;&lt;/span&gt;</span><br><span class=\"hljs-string\">\t\t\t&lt;/div&gt;</span><br><span class=\"hljs-string\">\t\t\t&lt;div class=&quot;FlexBox&quot;&gt;</span><br><span class=\"hljs-string\">\t\t\t\t&lt;div class=&quot;FlexItem&quot;&gt;</span><br><span class=\"hljs-string\">\t\t\t\t\t&lt;textarea class=&quot;txt_downloadKey&quot; style=&quot;width:100%;height:80px&quot; readonly=&quot;&quot;&gt;&lt;/textarea&gt;</span><br><span class=\"hljs-string\">\t\t\t\t&lt;/div&gt;</span><br><span class=\"hljs-string\">\t\t\t\t&lt;div style=&quot;padding-left:10px;line-height:30px;font-size:13px;color:#aaa&quot;&gt;</span><br><span class=\"hljs-string\">\t\t\t\t\t&lt;div class=&quot;mainBtn&quot; onclick=&quot;downloadBtnClick(&#x27;Key&#x27;)&quot;&gt;</span><br><span class=\"hljs-string\">\t\t\t\t\t\t&lt;span class=&quot;langCN&quot;&gt;下载保存&lt;/span&gt;</span><br><span class=\"hljs-string\">\t\t\t\t\t\t&lt;span class=&quot;langEN&quot;&gt;Download&lt;/span&gt;</span><br><span class=\"hljs-string\">\t\t\t\t\t&lt;/div&gt;</span><br><span class=\"hljs-string\">\t\t\t\t&lt;/div&gt;</span><br><span class=\"hljs-string\">\t\t\t&lt;/div&gt;</span><br><span class=\"hljs-string\">\t\t&lt;/div&gt;</span><br><span class=\"hljs-string\">\t\t</span><br><span class=\"hljs-string\">\t\t</span><br><span class=\"hljs-string\">\t\t&lt;div class=&quot;itemBox&quot;&gt;</span><br><span class=\"hljs-string\">\t\t\t&lt;div class=&quot;pd Bold&quot;&gt;</span><br><span class=\"hljs-string\">\t\t\t\t&lt;i class=&quot;must&quot;&gt;*&lt;/i&gt;</span><br><span class=\"hljs-string\">\t\t\t\t&lt;span class=&quot;langCN&quot;&gt;保存记录LOG文件：&lt;/span&gt;</span><br><span class=\"hljs-string\">\t\t\t\t&lt;span class=&quot;langEN&quot;&gt;Save the record LOG file: &lt;/span&gt;</span><br><span class=\"hljs-string\">\t\t\t&lt;/div&gt;</span><br><span class=\"hljs-string\">\t\t\t&lt;div class=&quot;pd&quot; style=&quot;font-size:13px;color:#aaa&quot;&gt;</span><br><span class=\"hljs-string\">\t\t\t\t&lt;span class=&quot;langCN&quot;&gt;建议下载保存此文件，本记录文件包含了所有数据，包括：证书PEM文本、证书私钥PEM文本、账户私钥PEM文本、所有配置参数。下次你需要续签新证书时，可以将本记录文件直接拖拽进本页面，会自动填写所有参数。&lt;/span&gt;</span><br><span class=\"hljs-string\">\t\t\t\t&lt;span class=&quot;langEN&quot;&gt;It is recommended to download and save this file. This record file contains all data, including: certificate PEM text, certificate private key PEM text, account private key PEM text, and all configuration parameters. Next time you need to renew a new certificate, you can drag and drop the record file directly into this page, and all parameters will be filled in automatically.&lt;/span&gt;</span><br><span class=\"hljs-string\">\t\t\t&lt;/div&gt;</span><br><span class=\"hljs-string\">\t\t\t&lt;div class=&quot;FlexBox&quot;&gt;</span><br><span class=\"hljs-string\">\t\t\t\t&lt;div class=&quot;FlexItem&quot;&gt;</span><br><span class=\"hljs-string\">\t\t\t\t\t&lt;textarea class=&quot;txt_downloadLog&quot; style=&quot;width:100%;height:80px&quot; readonly=&quot;&quot;&gt;&lt;/textarea&gt;</span><br><span class=\"hljs-string\">\t\t\t\t&lt;/div&gt;</span><br><span class=\"hljs-string\">\t\t\t\t&lt;div style=&quot;padding-left:10px;line-height:30px;font-size:13px;color:#aaa&quot;&gt;</span><br><span class=\"hljs-string\">\t\t\t\t\t&lt;div class=&quot;mainBtn&quot; onclick=&quot;downloadBtnClick(&#x27;Log&#x27;)&quot;&gt;</span><br><span class=\"hljs-string\">\t\t\t\t\t\t&lt;span class=&quot;langCN&quot;&gt;下载保存&lt;/span&gt;</span><br><span class=\"hljs-string\">\t\t\t\t\t\t&lt;span class=&quot;langEN&quot;&gt;Download&lt;/span&gt;</span><br><span class=\"hljs-string\">\t\t\t\t\t&lt;/div&gt;</span><br><span class=\"hljs-string\">\t\t\t\t&lt;/div&gt;</span><br><span class=\"hljs-string\">\t\t\t&lt;/div&gt;</span><br><span class=\"hljs-string\">\t\t&lt;/div&gt;</span><br><span class=\"hljs-string\">\t\t</span><br><span class=\"hljs-string\">\t\t</span><br><span class=\"hljs-string\">\t&lt;/div&gt;</span><br><span class=\"hljs-string\">&lt;/div&gt;</span><br><span class=\"hljs-string\"></span><br><span class=\"hljs-string\"></span><br><span class=\"hljs-string\"></span><br><span class=\"hljs-string\"></span><br><span class=\"hljs-string\"></span><br><span class=\"hljs-string\"></span><br><span class=\"hljs-string\">&lt;div class=&quot;mainBox&quot;&gt;</span><br><span class=\"hljs-string\">\t\t</span><br><span class=\"hljs-string\">\t&lt;div class=&quot;itemBox&quot;&gt;</span><br><span class=\"hljs-string\">\t\t&lt;div class=&quot;pd Bold&quot;&gt;</span><br><span class=\"hljs-string\">\t\t\t&lt;span class=&quot;langCN&quot;&gt;你需要其他格式的证书文件？&lt;/span&gt;</span><br><span class=\"hljs-string\">\t\t\t&lt;span class=&quot;langEN&quot;&gt;Do you need certificate files in other formats?&lt;/span&gt;</span><br><span class=\"hljs-string\">\t\t&lt;/div&gt;</span><br><span class=\"hljs-string\">\t\t&lt;div class=&quot;pd&quot; style=&quot;font-size:13px;color:#aaa&quot;&gt;</span><br><span class=\"hljs-string\">\t\t\t&lt;span class=&quot;langCN&quot;&gt;大部分服务器程序支持直接使用 &lt;i class=&quot;i downloadCertFileName&quot;&gt;&lt;/i&gt;+&lt;i class=&quot;i downloadKeyFileName&quot;&gt;&lt;/i&gt; 来配置开启HTTPS（比如Nginx），如果你需要 &lt;i class=&quot;i&quot;&gt;*.pfx&lt;/i&gt;、&lt;i class=&quot;i&quot;&gt;*.p12&lt;/i&gt; 格式的证书（比如用于IIS），请用下面命令将PEM证书转换成 &lt;i class=&quot;i&quot;&gt;pfx/p12&lt;/i&gt; 格式：&lt;/span&gt;</span><br><span class=\"hljs-string\">\t\t\t&lt;span class=&quot;langEN&quot;&gt;Most server programs support directly using &lt;i class=&quot;i downloadCertFileName&quot;&gt;&lt;/i&gt;+&lt;i class=&quot;i downloadKeyFileName&quot;&gt;&lt;/i&gt; to configure and enable HTTPS (such as Nginx). If you need a certificate in &lt;i class=&quot;i&quot;&gt;*.pfx&lt;/i&gt; or &lt;i class=&quot;i&quot;&gt;*.p12&lt;/i&gt; format (such as for IIS), please use the following command to convert the PEM certificate Convert to &lt;i class=&quot;i&quot;&gt;pfx/p12&lt;/i&gt; format:&lt;/span&gt;</span><br><span class=\"hljs-string\">\t\t&lt;/div&gt;</span><br><span class=\"hljs-string\">\t\t&lt;div class=&quot;code&quot;&gt;openssl pkcs12 -export -out &lt;span class=&quot;downloadFileName&quot;&gt;&lt;/span&gt;.pfx -inkey &lt;span class=&quot;downloadKeyFileName&quot;&gt;&lt;/span&gt; -in &lt;span class=&quot;downloadCertFileName&quot;&gt;&lt;/span&gt;&lt;/div&gt;</span><br><span class=\"hljs-string\">\t&lt;/div&gt;</span><br><span class=\"hljs-string\">\t</span><br><span class=\"hljs-string\">\t&lt;div class=&quot;itemBox&quot;&gt;</span><br><span class=\"hljs-string\">\t\t&lt;div class=&quot;pd Bold&quot;&gt;</span><br><span class=\"hljs-string\">\t\t\t&lt;span class=&quot;langCN&quot;&gt;IIS证书链缺失？&lt;/span&gt;</span><br><span class=\"hljs-string\">\t\t\t&lt;span class=&quot;langEN&quot;&gt;IIS certificate chain missing?&lt;/span&gt;</span><br><span class=\"hljs-string\">\t\t&lt;/div&gt;</span><br><span class=\"hljs-string\">\t\t&lt;div class=&quot;pd&quot; style=&quot;font-size:13px;color:#aaa&quot;&gt;</span><br><span class=\"hljs-string\">\t\t\t&lt;span class=&quot;langCN&quot;&gt;对于Windows IIS服务器，你需要将证书链安装到“本地计算机”的“中间证书颁发机构”中；请将PEM证书中的所有证书拆分成单个PEM文件（后缀改成&lt;i class=&quot;i&quot;&gt;.crt&lt;/i&gt;或&lt;i class=&quot;i&quot;&gt;.cer&lt;/i&gt;），然后将系统中缺失的中间证书双击打开然后安装进去；详细参考：&lt;/span&gt;</span><br><span class=\"hljs-string\">\t\t\t&lt;span class=&quot;langEN&quot;&gt;For Windows IIS server, you need to install the certificate chain into &quot;Intermediate Certification Authorities&quot; in &quot;Local Computer&quot;; please split all certificates in PEM certificate into a single PEM file (change the suffix to &lt;i class=&quot;i&quot;&gt;.crt&lt;/i&gt; or &lt;i class=&quot;i&quot;&gt;.cer&lt;/i&gt;), then double-click to open the missing intermediate certificate in the system Then install it; detailed reference:&lt;/span&gt;</span><br><span class=\"hljs-string\">\t\t\t&lt;a href=&quot;http://support.microsoft.com/kb/954755&quot; target=&quot;_blank&quot;&gt;http://support.microsoft.com/kb/954755&lt;/a&gt;</span><br><span class=\"hljs-string\">\t\t&lt;/div&gt;</span><br><span class=\"hljs-string\">\t&lt;/div&gt;</span><br><span class=\"hljs-string\">\t</span><br><span class=\"hljs-string\">\t&lt;div class=&quot;itemBox&quot;&gt;</span><br><span class=\"hljs-string\">\t\t&lt;div class=&quot;pd Bold&quot;&gt;</span><br><span class=\"hljs-string\">\t\t\t&lt;span class=&quot;langCN&quot;&gt;本客户端部分原理简介&lt;/span&gt;</span><br><span class=\"hljs-string\">\t\t\t&lt;span class=&quot;langEN&quot;&gt;Introduction to the principle of this client&lt;/span&gt;</span><br><span class=\"hljs-string\">\t\t&lt;/div&gt;</span><br><span class=\"hljs-string\">\t\t&lt;div class=&quot;pd&quot; style=&quot;font-size:13px;color:#aaa&quot;&gt;</span><br><span class=\"hljs-string\">\t\t\t&lt;span class=&quot;langCN&quot;&gt;得益于现代浏览器的 &lt;a href=&quot;https://developer.mozilla.org/en-US/docs/Web/API/SubtleCrypto&quot; target=&quot;_blank&quot;&gt;crypto.subtle&lt;/a&gt; 对加密功能标准化，不依赖其他任何js库就能在网页上实现 &lt;i class=&quot;i&quot;&gt;RSA&lt;/i&gt;、&lt;i class=&quot;i&quot;&gt;ECC&lt;/i&gt; 的加密、解密、签名、验证、和密钥对生成。在本客户端内的 &lt;i class=&quot;i&quot;&gt;X509&lt;/i&gt; 对象中：用 X509.CreateCSR 来生成CSR，用 X509.KeyGenerate 来创建PEM格式密钥，用 X509.KeyParse 来解析PEM格式密钥，用 X509.KeyExport 来导出PEM格式密钥；这些功能都是根据相应的标准用js代码在二进制层面上实现的，二进制数据操作封装在了 &lt;i class=&quot;i&quot;&gt;ASN1&lt;/i&gt; 对象中：实现了 ASN.1 标准的二进制解析和封包，使用 ASN1.ParsePEM 方法可以解析任意的PEM格式密钥或证书。以上这些都是实现ACME网页客户端的核心基础。&lt;/span&gt;</span><br><span class=\"hljs-string\">\t\t\t&lt;span class=&quot;langEN&quot;&gt;Thanks to the standardization of encryption functions by &lt;a href=&quot;https://developer.mozilla.org/en-US/docs/Web/API/SubtleCrypto&quot; target=&quot;_blank&quot;&gt;crypto.subtle&lt;/a&gt; of modern browsers, &lt;i class=&quot;i&quot;&gt;RSA&lt;/i&gt; and &lt;i class=&quot;i&quot;&gt;ECC&lt;/i&gt; encryption, decryption, signature, verification, and key pair generation can be implemented on web pages without relying on any other js library. In the &lt;i class=&quot;i&quot;&gt;X509&lt;/i&gt; object in this client: use X509.CreateCSR to generate CSR, use X509.KeyGenerate to create PEM format key, use X509.KeyParse to parse PEM format key, use X509.KeyExport to export PEM format key; These functions are implemented at the binary level with js code according to the corresponding standards, and binary data operations are encapsulated in &lt;i class=&quot;i&quot;&gt;ASN1&lt;/i&gt; objects: ASN.1 standard binary parsing and encapsulation are implemented, Arbitrary PEM format keys or certificates can be parsed using the ASN1.ParsePEM method. These are the core foundations for implementing the ACME web client.&lt;/span&gt;</span><br><span class=\"hljs-string\">\t\t&lt;/div&gt;</span><br><span class=\"hljs-string\">\t\t&lt;div class=&quot;pd&quot; style=&quot;font-size:13px;color:#aaa&quot;&gt;</span><br><span class=\"hljs-string\">\t\t\t&lt;span class=&quot;langCN&quot;&gt;然后就是对接ACME实现证书的签发，和实现交互UI；对接ACME可以直接参考 RFC 8555 标准。有些证书颁发机构的ACME服务对浏览器支持不良，未提供齐全的 &lt;i class=&quot;i&quot;&gt;Access-Control-*&lt;/i&gt; 响应头，导致网页内无法直接调用服务接口；目前采用的解决办法非常简单粗暴，比如ZeroSSL：检测到此ACME服务存在跨域问题时，会调用 &lt;i class=&quot;i&quot;&gt;acmeReadDirGotoCORS()&lt;/i&gt; 方法告诉用户操作步骤（你可以&lt;a onclick=&quot;acmeReadDirGotoCORS();alert(&#x27;调用成功，请到第一步操作&#x27;)&quot;&gt;点此&lt;/a&gt;手动调用此方法），通过在他们的页面内运行本客户端来消除跨域问题（既然打不过，那就加入他们）。&lt;/span&gt;</span><br><span class=\"hljs-string\">\t\t\t&lt;span class=&quot;langEN&quot;&gt;Then it is to connect with ACME to realize certificate issuance and realize interactive UI; for connecting with ACME, you can directly refer to the RFC 8555 standard. The ACME services of some certificate authorities do not support browsers well, and do not provide complete &lt;i class=&quot;i&quot;&gt;Access-Control-*&lt;/i&gt; response headers, so that the service interface cannot be called directly in the web page; the current solution is very simple and rude, such as ZeroSSL: detect this ACME When there is a cross-domain problem with the service, the &lt;i class=&quot;i&quot;&gt;acmeReadDirGotoCORS()&lt;/i&gt; method will be called to tell the user the operation steps (you can call this method manually by &lt;a onclick=&quot;acmeReadDirGotoCORS();alert(&#x27;Call succeeded, please go to step 1&#x27;)&quot;&gt;clicking here&lt;/a&gt;), and the cross-domain problem will be eliminated by running this client in their page (if we can&#x27;t beat them, we&#x27;d better join them).&lt;/span&gt;</span><br><span class=\"hljs-string\">\t\t&lt;/div&gt;</span><br><span class=\"hljs-string\">\t&lt;/div&gt;</span><br><span class=\"hljs-string\">\t</span><br><span class=\"hljs-string\">\t&lt;div class=&quot;itemBox&quot;&gt;</span><br><span class=\"hljs-string\">\t\t&lt;div class=&quot;pd Bold&quot;&gt;</span><br><span class=\"hljs-string\">\t\t\t&lt;span class=&quot;langCN&quot;&gt;QQ群：交流与支持&lt;/span&gt;</span><br><span class=\"hljs-string\">\t\t\t&lt;span class=&quot;langEN&quot;&gt;QQ group: communication and support&lt;/span&gt;</span><br><span class=\"hljs-string\">\t\t&lt;/div&gt;</span><br><span class=\"hljs-string\">\t\t&lt;div class=&quot;pd&quot; style=&quot;font-size:13px;color:#aaa&quot;&gt;</span><br><span class=\"hljs-string\">\t\t\t&lt;span class=&quot;langCN&quot;&gt;欢迎加QQ群：&lt;i class=&quot;i&quot;&gt;421882406&lt;/i&gt;，纯小写口令：&lt;i class=&quot;i&quot;&gt;xiangyuecn&lt;/i&gt;。如需功能定制，网站、App、小程序、前端和后端等开发需求，请加此QQ群，联系群主（即作者），谢谢~&lt;/span&gt;</span><br><span class=\"hljs-string\">\t\t\t&lt;span class=&quot;langEN&quot;&gt;Welcome to join the QQ group: &lt;i class=&quot;i&quot;&gt;421882406&lt;/i&gt; , code: &lt;i class=&quot;i&quot;&gt;xiangyuecn&lt;/i&gt; . If you need function customization, website, app, applet, front-end and back-end development needs, please join this QQ group and contact the group owner (ie the author), thank you~&lt;/span&gt;</span><br><span class=\"hljs-string\">\t\t&lt;/div&gt;</span><br><span class=\"hljs-string\">\t&lt;/div&gt;</span><br><span class=\"hljs-string\">\t</span><br><span class=\"hljs-string\">&lt;/div&gt;</span><br><span class=\"hljs-string\"></span><br><span class=\"hljs-string\"></span><br><span class=\"hljs-string\"></span><br><span class=\"hljs-string\"></span><br><span class=\"hljs-string\">&lt;div style=&quot;padding-top:20px;font-size:13px;color:#aaa&quot;&gt;</span><br><span class=\"hljs-string\">\t&lt;div class=&quot;pd langEN&quot;&gt;The Chinese-English translation is mainly from: Chrome comes with translation + Baidu translation, which is translated from Chinese to English.&lt;/div&gt;</span><br><span class=\"hljs-string\">\t</span><br><span class=\"hljs-string\">\t&lt;div class=&quot;pd&quot;&gt;</span><br><span class=\"hljs-string\">\t\t&lt;span class=&quot;versionBox&quot;&gt;&lt;/span&gt;</span><br><span class=\"hljs-string\">\t\t&lt;a style=&quot;margin-left:15px&quot; href=&quot;https://github.com/xiangyuecn/ACME-HTML-Web-Browser-Client/blob/main/LICENSE&quot; target=&quot;_blank&quot;&gt;License: GPL-3.0&lt;/a&gt;</span><br><span class=\"hljs-string\">\t&lt;/div&gt;</span><br><span class=\"hljs-string\">&lt;/div&gt;</span><br><span class=\"hljs-string\"></span><br><span class=\"hljs-string\"></span><br><span class=\"hljs-string\"></span><br><span class=\"hljs-string\">&lt;div class=&quot;toastState&quot; style=&quot;display:none;position:fixed;padding:10px;bottom:10px;right:10px;width:360px;max-height:120px;overflow-y:auto;background:#fff;box-shadow: 0px 0px 3px #aaa;border-radius: 10px;&quot;&gt;&lt;/div&gt;</span><br><span class=\"hljs-string\"></span><br><span class=\"hljs-string\">&lt;div class=&quot;donateWidget&quot; style=&quot;position:fixed;top:30%;right:5px;width:160px&quot;&gt;</span><br><span class=\"hljs-string\">\t&lt;div style=&quot;border-radius:12px;background:linear-gradient(160deg, rgba(0,179,255,.7) 20%, rgba(177,0,255,.7) 80%);max-width:300px;padding:20px 10px;text-align: center;&quot;&gt;</span><br><span class=\"hljs-string\">\t\t&lt;div style=&quot;font-size:18px;color:#fff;&quot;&gt;</span><br><span class=\"hljs-string\">\t\t\t&lt;span class=&quot;langCN&quot;&gt;赏包辣条？&lt;/span&gt;</span><br><span class=\"hljs-string\">\t\t\t&lt;span class=&quot;langEN&quot;&gt;Donate a Coke?&lt;/span&gt;</span><br><span class=\"hljs-string\">\t\t&lt;/div&gt;</span><br><span class=\"hljs-string\">\t\t&lt;div style=&quot;font-size:14px;color:#fff;&quot;&gt;</span><br><span class=\"hljs-string\">\t\t\t&lt;div class=&quot;langCN&quot; style=&quot;padding:10px 0&quot;&gt;客户端工具开发维护不易，期望本项目对你能有所帮助，欢迎通过下面按钮打赏作者~&lt;/div&gt;</span><br><span class=\"hljs-string\">\t\t\t&lt;span class=&quot;langEN&quot;&gt;It is not easy to develop and maintain client tools. I hope this project can help you. Welcome to reward the author through the following buttons~&lt;/span&gt;</span><br><span class=\"hljs-string\">\t\t&lt;/div&gt;</span><br><span class=\"hljs-string\">\t\t&lt;div&gt;</span><br><span class=\"hljs-string\">\t\t\t&lt;span class=&quot;langCN&quot;&gt;</span><br><span class=\"hljs-string\">\t\t\t\t&lt;a id=&quot;id_ek8v&quot; target=&quot;_blank&quot; class=&quot;mainBtn mainBtnMin&quot; style=&quot;color:#fff&quot; href=&quot;https://xiangyuecn.github.io/Docs/about.html&quot;&gt;打赏 &lt;span class=&quot;donateBtnIco&quot;&gt;&lt;/span&gt;&lt;/a&gt;</span><br><span class=\"hljs-string\">\t\t\t\t&lt;script&gt; id_ek8v.href=/gitee\\\\.io/.test(location.host)?&quot;https://xiangyuecn.gitee.io/docs/about.html&quot;:&quot;https://xiangyuecn.github.io/Docs/about.html&quot; &lt;/script&gt;</span><br><span class=\"hljs-string\">\t\t\t&lt;/span&gt;</span><br><span class=\"hljs-string\">\t\t\t&lt;span class=&quot;langEN&quot;&gt;</span><br><span class=\"hljs-string\">\t\t\t\t&lt;a href=&quot;https://xiangyuecn.github.io/Docs/about.html&quot; target=&quot;_blank&quot; class=&quot;mainBtn mainBtnMin&quot; style=&quot;color:#fff&quot;&gt;Donate &lt;span class=&quot;donateBtnIco&quot;&gt;&lt;/span&gt;&lt;/a&gt;</span><br><span class=\"hljs-string\">\t\t\t&lt;/span&gt;</span><br><span class=\"hljs-string\">\t\t&lt;/div&gt;</span><br><span class=\"hljs-string\">\t&lt;/div&gt;</span><br><span class=\"hljs-string\">&lt;/div&gt;</span><br><span class=\"hljs-string\"></span><br><span class=\"hljs-string\">&lt;div class=&quot;langBtnBox&quot; style=&quot;position:fixed;top:0;right:0;padding:5px 10px;font-size:14px;border-radius:0 0 0 10px;background:#f5f5f5;&quot;&gt;</span><br><span class=\"hljs-string\">\tLanguage:</span><br><span class=\"hljs-string\">\t  &lt;a class=&quot;langBtn langBtn_cn&quot; onclick=&quot;LangClick(&#x27;cn&#x27;)&quot;&gt;中文&lt;/a&gt;</span><br><span class=\"hljs-string\">\t| &lt;a class=&quot;langBtn langBtn_en&quot; onclick=&quot;LangClick(&#x27;en&#x27;)&quot;&gt;EN&lt;/a&gt;</span><br><span class=\"hljs-string\">&lt;/div&gt;</span><br><span class=\"hljs-string\"></span><br><span class=\"hljs-string\">&lt;/div&gt;</span><br><span class=\"hljs-string\"></span><br><span class=\"hljs-string\"></span><br><span class=\"hljs-string\"></span><br><span class=\"hljs-string\">&lt;style&gt;</span><br><span class=\"hljs-string\">body&#123;</span><br><span class=\"hljs-string\">\tword-wrap: break-word;</span><br><span class=\"hljs-string\">\t--word-break: break-all;</span><br><span class=\"hljs-string\">\tbackground:#f5f5f5 center top no-repeat;</span><br><span class=\"hljs-string\">\tbackground-size: auto 680px;</span><br><span class=\"hljs-string\">&#125;</span><br><span class=\"hljs-string\">pre&#123;</span><br><span class=\"hljs-string\">\twhite-space:pre-wrap;</span><br><span class=\"hljs-string\">&#125;</span><br><span class=\"hljs-string\">label,label *&#123;</span><br><span class=\"hljs-string\">\tcursor: pointer;</span><br><span class=\"hljs-string\">&#125;</span><br><span class=\"hljs-string\">label:hover&#123;</span><br><span class=\"hljs-string\">\tcolor:#06c;</span><br><span class=\"hljs-string\">&#125;</span><br><span class=\"hljs-string\">a&#123;</span><br><span class=\"hljs-string\">\ttext-decoration: none;</span><br><span class=\"hljs-string\">\tcolor:#06c;</span><br><span class=\"hljs-string\">\tcursor: pointer;</span><br><span class=\"hljs-string\">&#125;</span><br><span class=\"hljs-string\">a:hover&#123;</span><br><span class=\"hljs-string\">\tcolor:#f00;</span><br><span class=\"hljs-string\">&#125;</span><br><span class=\"hljs-string\">input, textarea &#123;</span><br><span class=\"hljs-string\">\t--outline: 0;</span><br><span class=\"hljs-string\">\tborder: 1px solid #999;</span><br><span class=\"hljs-string\">\tpadding: 2px;</span><br><span class=\"hljs-string\">\tbox-sizing: border-box;</span><br><span class=\"hljs-string\">\tfont-size: 15px;</span><br><span class=\"hljs-string\">\tline-height:24px;</span><br><span class=\"hljs-string\">&#125;</span><br><span class=\"hljs-string\"></span><br><span class=\"hljs-string\">.main&#123;</span><br><span class=\"hljs-string\">\tmax-width:900px;</span><br><span class=\"hljs-string\">\tmargin:0 auto;</span><br><span class=\"hljs-string\">\tpadding-bottom:80px</span><br><span class=\"hljs-string\">&#125;</span><br><span class=\"hljs-string\"></span><br><span class=\"hljs-string\">.mainBox&#123;</span><br><span class=\"hljs-string\">\tmargin-top:12px;</span><br><span class=\"hljs-string\">\tpadding: 12px;</span><br><span class=\"hljs-string\">\tborder-radius: 6px;</span><br><span class=\"hljs-string\">\tbackground: #fff;</span><br><span class=\"hljs-string\">\tbox-shadow: 2px 2px 3px #aaa;</span><br><span class=\"hljs-string\">&#125;</span><br><span class=\"hljs-string\"></span><br><span class=\"hljs-string\"></span><br><span class=\"hljs-string\">.mainBtn&#123;</span><br><span class=\"hljs-string\">\tdisplay: inline-block;</span><br><span class=\"hljs-string\">\tcursor: pointer;</span><br><span class=\"hljs-string\">\tborder: none;</span><br><span class=\"hljs-string\">\tborder-radius: 3px;</span><br><span class=\"hljs-string\">\tbackground: #f80;</span><br><span class=\"hljs-string\">\tcolor:#fff;</span><br><span class=\"hljs-string\">\tpadding: 0 15px;</span><br><span class=\"hljs-string\">\tline-height: 36px;</span><br><span class=\"hljs-string\">\theight: 36px;</span><br><span class=\"hljs-string\">\toverflow: hidden;</span><br><span class=\"hljs-string\">\tvertical-align: middle;</span><br><span class=\"hljs-string\">&#125;</span><br><span class=\"hljs-string\">.mainBtnMin&#123;</span><br><span class=\"hljs-string\">\theight: 30px;</span><br><span class=\"hljs-string\">\tline-height: 30px;</span><br><span class=\"hljs-string\">\tfont-size: 14px;</span><br><span class=\"hljs-string\">\tpadding: 0 12px;</span><br><span class=\"hljs-string\">&#125;</span><br><span class=\"hljs-string\">.mainBtn:hover&#123;</span><br><span class=\"hljs-string\">\topacity:0.8;</span><br><span class=\"hljs-string\">&#125;</span><br><span class=\"hljs-string\">.mainBtn:active&#123;</span><br><span class=\"hljs-string\">\topacity:1;</span><br><span class=\"hljs-string\">\tbackground: #f00;</span><br><span class=\"hljs-string\">&#125;</span><br><span class=\"hljs-string\"></span><br><span class=\"hljs-string\">.pd&#123;</span><br><span class=\"hljs-string\">\tpadding:0 0 8px 0;</span><br><span class=\"hljs-string\">&#125;</span><br><span class=\"hljs-string\">.pdT&#123;</span><br><span class=\"hljs-string\">\tpadding:8px 0 0 0;</span><br><span class=\"hljs-string\">&#125;</span><br><span class=\"hljs-string\">.lb&#123;</span><br><span class=\"hljs-string\">\tdisplay:inline-block;</span><br><span class=\"hljs-string\">\tvertical-align: middle;</span><br><span class=\"hljs-string\">\tbackground:#00940e;</span><br><span class=\"hljs-string\">\tcolor:#fff;</span><br><span class=\"hljs-string\">\tfont-size:14px;</span><br><span class=\"hljs-string\">\tpadding:2px 8px;</span><br><span class=\"hljs-string\">\tborder-radius: 99px;</span><br><span class=\"hljs-string\">&#125;</span><br><span class=\"hljs-string\"></span><br><span class=\"hljs-string\">.Fill &#123;</span><br><span class=\"hljs-string\">\tposition: absolute;</span><br><span class=\"hljs-string\">\ttop: 0;</span><br><span class=\"hljs-string\">\tleft: 0;</span><br><span class=\"hljs-string\">\twidth: 100%;</span><br><span class=\"hljs-string\">\theight: 100%;</span><br><span class=\"hljs-string\">\toverflow: hidden;</span><br><span class=\"hljs-string\">&#125;</span><br><span class=\"hljs-string\">.Center&#123;</span><br><span class=\"hljs-string\">\ttext-align: center;</span><br><span class=\"hljs-string\">&#125;</span><br><span class=\"hljs-string\">.CenterV &#123;</span><br><span class=\"hljs-string\">\tdisplay: -webkit-flex;</span><br><span class=\"hljs-string\">\tdisplay: -ms-flex;</span><br><span class=\"hljs-string\">\tdisplay: -moz-flex;</span><br><span class=\"hljs-string\">\tdisplay: flex;</span><br><span class=\"hljs-string\">\t-webkit-align-items: center;</span><br><span class=\"hljs-string\">\t-ms-align-items: center;</span><br><span class=\"hljs-string\">\t-moz-align-items: center;</span><br><span class=\"hljs-string\">\talign-items: center;</span><br><span class=\"hljs-string\">&#125;</span><br><span class=\"hljs-string\">.FlexBox &#123;</span><br><span class=\"hljs-string\">\tdisplay: -webkit-flex;</span><br><span class=\"hljs-string\">\tdisplay: -ms-flex;</span><br><span class=\"hljs-string\">\tdisplay: -moz-flex;</span><br><span class=\"hljs-string\">\tdisplay: flex;</span><br><span class=\"hljs-string\">&#125;</span><br><span class=\"hljs-string\">.FlexBoxV&#123;</span><br><span class=\"hljs-string\">\t-webkit-flex-direction:column;</span><br><span class=\"hljs-string\">\t-ms-flex-direction:column;</span><br><span class=\"hljs-string\">\t-moz-flex-direction:column;</span><br><span class=\"hljs-string\">\tflex-direction:column;</span><br><span class=\"hljs-string\">&#125;</span><br><span class=\"hljs-string\">.FlexCenter&#123;</span><br><span class=\"hljs-string\">\t-webkit-box-pack:center;</span><br><span class=\"hljs-string\">\t-ms-box-pack:center;</span><br><span class=\"hljs-string\">\t-moz-box-pack:center;</span><br><span class=\"hljs-string\">\tbox-pack:center;</span><br><span class=\"hljs-string\">\t-webkit-justify-content:center;</span><br><span class=\"hljs-string\">\t-ms-justify-content:center;</span><br><span class=\"hljs-string\">\t-moz-justify-content:center;</span><br><span class=\"hljs-string\">\tjustify-content:center;</span><br><span class=\"hljs-string\">&#125;</span><br><span class=\"hljs-string\">.FlexCenterV&#123;</span><br><span class=\"hljs-string\">\t-webkit-box-align:center;</span><br><span class=\"hljs-string\">\t-ms-box-align:center;</span><br><span class=\"hljs-string\">\t-moz-box-align:center;</span><br><span class=\"hljs-string\">\tbox-align:center;</span><br><span class=\"hljs-string\">\t-webkit-align-items:center;</span><br><span class=\"hljs-string\">\t-ms-align-items:center;</span><br><span class=\"hljs-string\">\t-moz-align-items:center;</span><br><span class=\"hljs-string\">\talign-items:center;</span><br><span class=\"hljs-string\">&#125;</span><br><span class=\"hljs-string\">.FlexItem &#123;</span><br><span class=\"hljs-string\">\t-webkit-flex: 1;</span><br><span class=\"hljs-string\">\t-ms-flex: 1;</span><br><span class=\"hljs-string\">\t-moz-flex: 1;</span><br><span class=\"hljs-string\">\tflex: 1;</span><br><span class=\"hljs-string\">&#125;</span><br><span class=\"hljs-string\"></span><br><span class=\"hljs-string\"></span><br><span class=\"hljs-string\">.Bold&#123;</span><br><span class=\"hljs-string\">\tfont-weight: bold;</span><br><span class=\"hljs-string\">&#125;</span><br><span class=\"hljs-string\">.code&#123;</span><br><span class=\"hljs-string\">\tpadding: 15px;</span><br><span class=\"hljs-string\">\tbackground-color: #000;</span><br><span class=\"hljs-string\">\tvertical-align: middle;</span><br><span class=\"hljs-string\">\tcolor: #fff;</span><br><span class=\"hljs-string\">\tfont-size: 14px;</span><br><span class=\"hljs-string\">\twhite-space: pre-wrap;</span><br><span class=\"hljs-string\">\tborder-radius: 6px;</span><br><span class=\"hljs-string\">\tfont-style: normal;</span><br><span class=\"hljs-string\">&#125;</span><br><span class=\"hljs-string\">.i&#123;</span><br><span class=\"hljs-string\">\tpadding: 2px 4px;</span><br><span class=\"hljs-string\">\tbackground-color: #f6f6f6;</span><br><span class=\"hljs-string\">\tvertical-align: top;</span><br><span class=\"hljs-string\">\tcolor: #c7254e;</span><br><span class=\"hljs-string\">\tfont-size: 12px;</span><br><span class=\"hljs-string\">\twhite-space: pre-wrap;</span><br><span class=\"hljs-string\">\tborder-radius: 4px;</span><br><span class=\"hljs-string\">\tfont-style: normal;</span><br><span class=\"hljs-string\">&#125;</span><br><span class=\"hljs-string\">i.must&#123;</span><br><span class=\"hljs-string\">\tcolor:red;</span><br><span class=\"hljs-string\">\tfont-style:normal;</span><br><span class=\"hljs-string\">&#125;</span><br><span class=\"hljs-string\">.itemTitle&#123;</span><br><span class=\"hljs-string\">\tfont-size: 24px;</span><br><span class=\"hljs-string\">\tfont-weight: bold;</span><br><span class=\"hljs-string\">\tcolor: #03baed;</span><br><span class=\"hljs-string\">&#125;</span><br><span class=\"hljs-string\">.itemBox&#123;</span><br><span class=\"hljs-string\">\tpadding:8px;</span><br><span class=\"hljs-string\">\tmargin-bottom:6px;</span><br><span class=\"hljs-string\">\tborder:1px #ccc dashed;</span><br><span class=\"hljs-string\">\tborder-radius: 6px;</span><br><span class=\"hljs-string\">&#125;</span><br><span class=\"hljs-string\">&lt;/style&gt;</span><br><span class=\"hljs-string\"></span><br><span class=\"hljs-string\"></span><br><span class=\"hljs-string\"></span><br><span class=\"hljs-string\"></span><br><span class=\"hljs-string\">&lt;script&gt;</span><br><span class=\"hljs-string\">//=================================================</span><br><span class=\"hljs-string\">//================= UI functions ==================</span><br><span class=\"hljs-string\">//=================================================</span><br><span class=\"hljs-string\">//LICENSE: GPL-3.0, https://github.com/xiangyuecn/ACME-HTML-Web-Browser-Client</span><br><span class=\"hljs-string\">(function()&#123;</span><br><span class=\"hljs-string\">&quot;use strict&quot;;</span><br><span class=\"hljs-string\">var ChoiceAcmeURLStoreKey=&quot;ACME_HTML_choice_acmeURL&quot;;</span><br><span class=\"hljs-string\">var InputDomainsStoreKey=&quot;ACME_HTML_input_domains&quot;;</span><br><span class=\"hljs-string\">var InputEmailStoreKey=&quot;ACME_HTML_input_email&quot;;</span><br><span class=\"hljs-string\">var DropConfigFile=&#123;&#125;; //拖拽进来的上次配置文件</span><br><span class=\"hljs-string\"></span><br><span class=\"hljs-string\">/************** UI: Initialize on Launch **************/</span><br><span class=\"hljs-string\">window.initMainUI=function()&#123;</span><br><span class=\"hljs-string\">\t$(&quot;.eccCurveNames&quot;).html(X509.SupportECCType2Names().join(Lang(&quot;、&quot;,&quot;, &quot;)));</span><br><span class=\"hljs-string\">\t$(&quot;.donateBtnIco&quot;).html(unescape(&quot;%uD83D%uDE18&quot;));</span><br><span class=\"hljs-string\">\t$(&quot;.versionBox&quot;).html(Lang(&quot;版本: &quot;+Version,&quot;Ver: &quot;+Version));</span><br><span class=\"hljs-string\">\t</span><br><span class=\"hljs-string\">\tif(/mobile/i.test(navigator.userAgent))&#123;</span><br><span class=\"hljs-string\">\t\t$(&quot;.main&quot;).prepend($(&quot;.langBtnBox&quot;).css(&quot;position&quot;,null));</span><br><span class=\"hljs-string\">\t\t$(&quot;.donateWidget&quot;).css(&quot;position&quot;,null);</span><br><span class=\"hljs-string\">\t&#125;</span><br><span class=\"hljs-string\">\t</span><br><span class=\"hljs-string\">\tCLog(&quot;initMainUI&quot;,0,Lang(</span><br><span class=\"hljs-string\">\\`一些高级配置：</span><br><span class=\"hljs-string\">- 设置 X509.DefaultType2_RSA=&quot;4096&quot; 可以调整新生成的RSA密钥位数。</span><br><span class=\"hljs-string\">- 设置 X509.DefaultType2_ECC=&quot;P-384&quot; 可以调整新生成的ECC密钥曲线，X509.SupportECCType2内为支持的曲线。</span><br><span class=\"hljs-string\">- 设置 DefaultDownloadFileNames 内的属性可以修改对应下载的文件默认名称。</span><br><span class=\"hljs-string\">- UI调试：完成第二步后允许进行UI调试，手动调用 Test_AllStepData_Save() 保存数据，刷新页面可恢复界面。\\`,</span><br><span class=\"hljs-string\">\\`Some advanced configurations:</span><br><span class=\"hljs-string\">- Set X509.DefaultType2_RSA=&quot;4096&quot; The number of newly generated RSA keys can be adjusted.</span><br><span class=\"hljs-string\">- Set X509.DefaultType2_ECC=&quot;P-384&quot; The newly generated ECC key curve can be adjusted. The supported curve is in X509.SupportECCType2.</span><br><span class=\"hljs-string\">- Setting the property in DefaultDownloadFileNames can modify the default name of the corresponding downloaded file.</span><br><span class=\"hljs-string\">- UI debugging: Allow UI debugging after completing the step 2 . Manually call Test_AllStepData_Save() to save the data, and refresh the page to restore the interface.\\`));</span><br><span class=\"hljs-string\">\t</span><br><span class=\"hljs-string\">\tinitTest_Restore();</span><br><span class=\"hljs-string\">\tacmeReadDirGotoCORSInit();</span><br><span class=\"hljs-string\">\tdownloadFileNameShow();</span><br><span class=\"hljs-string\">\tinitStep1();</span><br><span class=\"hljs-string\">\tinitStep2();</span><br><span class=\"hljs-string\">\tinitStep4();</span><br><span class=\"hljs-string\">&#125;;</span><br><span class=\"hljs-string\">var initStep1=function()&#123;</span><br><span class=\"hljs-string\">\t$(&quot;input[name=choice_acmeURL]&quot;).bind(&quot;click&quot;,function(e)&#123;</span><br><span class=\"hljs-string\">\t\tvar el=e.target;</span><br><span class=\"hljs-string\">\t\tvar isManual=el.value==&quot;manual&quot;;</span><br><span class=\"hljs-string\">\t\t$(&quot;.in_acmeURL&quot;).css(&quot;opacity&quot;,isManual?1:0.4)</span><br><span class=\"hljs-string\">\t\t\t.val(isManual?step1ChoiceStoreVal:el.value)</span><br><span class=\"hljs-string\">\t\t\t.attr(&quot;readonly&quot;,isManual?null:&quot;&quot;);</span><br><span class=\"hljs-string\">\t\t</span><br><span class=\"hljs-string\">\t\tvar descKey=$(el).attr(&quot;desckey&quot;);</span><br><span class=\"hljs-string\">\t\t$(&quot;.descAcmeURL&quot;).hide();</span><br><span class=\"hljs-string\">\t\tif(descKey)$(&quot;.&quot;+descKey).show();</span><br><span class=\"hljs-string\">\t\t</span><br><span class=\"hljs-string\">\t\tstep1ChoiceStoreVal=&quot;&quot;;</span><br><span class=\"hljs-string\">\t\tchoiceAcmeURLChangeAfter();</span><br><span class=\"hljs-string\">\t&#125;);</span><br><span class=\"hljs-string\">\tresetStep1();</span><br><span class=\"hljs-string\">&#125;;</span><br><span class=\"hljs-string\">var step1ChoiceStoreVal;</span><br><span class=\"hljs-string\">var resetStep1=function()&#123;</span><br><span class=\"hljs-string\">\t//选中上次选择的证书颁发机构</span><br><span class=\"hljs-string\">\tstep1ChoiceStoreVal=DropConfigFile.acmeURL||window.Default_ACME_URL||localStorage[ChoiceAcmeURLStoreKey]||&quot;&quot;;</span><br><span class=\"hljs-string\">\tvar choices=$(&quot;input[name=choice_acmeURL]&quot;)</span><br><span class=\"hljs-string\">\tvar idx=0;</span><br><span class=\"hljs-string\">\tif(step1ChoiceStoreVal)&#123;</span><br><span class=\"hljs-string\">\t\tvar manualIdx=0;</span><br><span class=\"hljs-string\">\t\tfor(var i=0;i&lt;choices.length;i++)&#123;</span><br><span class=\"hljs-string\">\t\t\tif(choices[i].value==step1ChoiceStoreVal) idx=i+1;</span><br><span class=\"hljs-string\">\t\t\tif(choices[i].value==&quot;manual&quot;) manualIdx=i+1;</span><br><span class=\"hljs-string\">\t\t&#125;</span><br><span class=\"hljs-string\">\t\tif(!idx)idx=manualIdx //手动填写</span><br><span class=\"hljs-string\">\t\tidx--;</span><br><span class=\"hljs-string\">\t&#125;</span><br><span class=\"hljs-string\">\tchoices[idx].click();</span><br><span class=\"hljs-string\">&#125;;</span><br><span class=\"hljs-string\">var initStep2=function()&#123;</span><br><span class=\"hljs-string\">\t//证书私钥UI</span><br><span class=\"hljs-string\">\t$(&quot;.privateKeyBox&quot;).hide();</span><br><span class=\"hljs-string\">\t$(&quot;input[name=choice_privateKey]&quot;).bind(&quot;click&quot;,function(e)&#123;</span><br><span class=\"hljs-string\">\t\tvar el=e.target;</span><br><span class=\"hljs-string\">\t\tvar isManual=el.value==&quot;manual&quot;;</span><br><span class=\"hljs-string\">\t\t$(&quot;.in_privateKey&quot;).css(&quot;opacity&quot;,isManual?1:0.4)</span><br><span class=\"hljs-string\">\t\t\t.val(&quot;&quot;)</span><br><span class=\"hljs-string\">\t\t\t.attr(&quot;readonly&quot;,isManual?null:&quot;&quot;);</span><br><span class=\"hljs-string\">\t\t$(&quot;.privateKeyBox&quot;).show();</span><br><span class=\"hljs-string\">\t\t</span><br><span class=\"hljs-string\">\t\tconfigPrivateKeyGenerate(el.value);//生成密钥</span><br><span class=\"hljs-string\">\t\tconfigStepShow();//重新显示界面</span><br><span class=\"hljs-string\">\t&#125;);</span><br><span class=\"hljs-string\">\t</span><br><span class=\"hljs-string\">\t//ACME账户私钥UI</span><br><span class=\"hljs-string\">\t$(&quot;.accountKeyBox&quot;).hide();</span><br><span class=\"hljs-string\">\t$(&quot;input[name=choice_accountKey]&quot;).bind(&quot;click&quot;,function(e)&#123;</span><br><span class=\"hljs-string\">\t\tvar el=e.target;</span><br><span class=\"hljs-string\">\t\tvar isManual=el.value==&quot;manual&quot;;</span><br><span class=\"hljs-string\">\t\t$(&quot;.in_accountKey&quot;).css(&quot;opacity&quot;,isManual?1:0.4)</span><br><span class=\"hljs-string\">\t\t\t.val(&quot;&quot;)</span><br><span class=\"hljs-string\">\t\t\t.attr(&quot;readonly&quot;,isManual?null:&quot;&quot;);</span><br><span class=\"hljs-string\">\t\t$(&quot;.accountKeyBox&quot;).show();</span><br><span class=\"hljs-string\">\t\t</span><br><span class=\"hljs-string\">\t\tconfigAccountKeyGenerate(el.value);//生成密钥</span><br><span class=\"hljs-string\">\t\tconfigStepShow();//重新显示界面</span><br><span class=\"hljs-string\">\t&#125;);</span><br><span class=\"hljs-string\">&#125;;</span><br><span class=\"hljs-string\"></span><br><span class=\"hljs-string\"></span><br><span class=\"hljs-string\">//下一步操作提示</span><br><span class=\"hljs-string\">var NextStepTips=function()&#123;</span><br><span class=\"hljs-string\">\treturn &#x27;&lt;span style=&quot;font-size:24px;font-weight:bold;&quot;&gt;&#x27;+Lang(&quot;请进行下一步操作。&quot;,&quot; Please proceed to the next step.&quot;)+&#x27;&lt;/span&gt;&#x27;;</span><br><span class=\"hljs-string\">&#125;;</span><br><span class=\"hljs-string\">//请稍候提示</span><br><span class=\"hljs-string\">var PleaseWaitTips=function()&#123;</span><br><span class=\"hljs-string\">\treturn Lang(&quot; 请稍候... &quot;,&quot; Please wait... &quot;);</span><br><span class=\"hljs-string\">&#125;;</span><br><span class=\"hljs-string\">//请重试提示</span><br><span class=\"hljs-string\">var TryAgainTips=function()&#123;</span><br><span class=\"hljs-string\">\treturn Lang(&quot; 请重试！&quot;,&quot; Please try again! &quot;);</span><br><span class=\"hljs-string\">&#125;;</span><br><span class=\"hljs-string\">//每一步的状态更新显示</span><br><span class=\"hljs-string\">var ShowState=function(elem,msg,color,tag)&#123;</span><br><span class=\"hljs-string\">\tvar now=new Date();</span><br><span class=\"hljs-string\">\tvar t=(&quot;0&quot;+now.getHours()).substr(-2)</span><br><span class=\"hljs-string\">\t\t+&quot;:&quot;+(&quot;0&quot;+now.getMinutes()).substr(-2)</span><br><span class=\"hljs-string\">\t\t+&quot;:&quot;+(&quot;0&quot;+now.getSeconds()).substr(-2);</span><br><span class=\"hljs-string\">\t$(elem).html(msg===false?&#x27;&#x27;:&#x27;&lt;div style=&quot;color:&#x27;+(!color?&quot;&quot;:color==1?&quot;red&quot;:color==2?&quot;#0b1&quot;:color==3?&quot;#fa0&quot;:color)+&#x27;&quot;&gt;&#x27;+(tag==null?&#x27;[&#x27;+t+&#x27;] &#x27;:tag)+msg+&#x27;&lt;/div&gt;&#x27;);</span><br><span class=\"hljs-string\">\treturn msg;</span><br><span class=\"hljs-string\">&#125;;</span><br><span class=\"hljs-string\">window.Toast=function(msg,color,time)&#123;</span><br><span class=\"hljs-string\">\tShowState(&quot;.toastState&quot;,msg,color,&quot;&quot;);</span><br><span class=\"hljs-string\">\t</span><br><span class=\"hljs-string\">\t$(&quot;.toastState&quot;).show();</span><br><span class=\"hljs-string\">\tclearTimeout(Toast._int);</span><br><span class=\"hljs-string\">\tToast._int=setTimeout(function()&#123; $(&quot;.toastState&quot;).hide(); &#125;, time||5000);</span><br><span class=\"hljs-string\">&#125;;</span><br><span class=\"hljs-string\">window.onerror=function(message, url, lineNo, columnNo, error)&#123;</span><br><span class=\"hljs-string\">\t//https://www.cnblogs.com/xianyulaodi/p/6201829.html</span><br><span class=\"hljs-string\">\tToast(&#x27;【Uncaught Error】&#x27;+message+&#x27;&lt;pre&gt;&#x27;+&quot;at:&quot;+lineNo+&quot;:&quot;+columnNo+&quot; url:&quot;+url+&quot;\\\\n&quot;+(error&amp;&amp;error.stack||&quot;-&quot;)+&#x27;&lt;/pre&gt;&#x27;,1,15000);</span><br><span class=\"hljs-string\">&#125;;</span><br><span class=\"hljs-string\"></span><br><span class=\"hljs-string\"></span><br><span class=\"hljs-string\"></span><br><span class=\"hljs-string\">//用户点击操作同步控制，新点击操作要终止之前未完成的操作</span><br><span class=\"hljs-string\">var UserClickSyncID=0;</span><br><span class=\"hljs-string\">var UserClickSyncKill=function(id,tag,msg)&#123;</span><br><span class=\"hljs-string\">\tif(id!=UserClickSyncID)&#123;</span><br><span class=\"hljs-string\">\t\tvar abort=Lang(&quot;被终止&quot;,&quot;Abort&quot;,1);</span><br><span class=\"hljs-string\">\t\tCLog(tag+&quot; &quot;+abort,3,&quot;From: &quot;+msg+&quot; [&quot;+abort+&quot;]&quot;);</span><br><span class=\"hljs-string\">\t\treturn true;</span><br><span class=\"hljs-string\">\t&#125;</span><br><span class=\"hljs-string\">&#125;;</span><br><span class=\"hljs-string\"></span><br><span class=\"hljs-string\"></span><br><span class=\"hljs-string\"></span><br><span class=\"hljs-string\"></span><br><span class=\"hljs-string\"></span><br><span class=\"hljs-string\">/************** UI Step1: Read ACME service directory **************/</span><br><span class=\"hljs-string\">//证书颁发机构单选按钮点击后处理</span><br><span class=\"hljs-string\">var choiceAcmeURLChangeAfter=function()&#123;</span><br><span class=\"hljs-string\">\tUserClickSyncID++;</span><br><span class=\"hljs-string\">\t</span><br><span class=\"hljs-string\">\t$(&quot;.step1Hide&quot;).hide();</span><br><span class=\"hljs-string\">\t$(&quot;.step1Show&quot;).show();</span><br><span class=\"hljs-string\">\tShowState(&quot;.acmeReadDirState&quot;,false);</span><br><span class=\"hljs-string\">\t</span><br><span class=\"hljs-string\">\tif($(&quot;.in_acmeURL&quot;).val())acmeReadDirClick();</span><br><span class=\"hljs-string\">&#125;;</span><br><span class=\"hljs-string\">//点击读取服务目录按钮</span><br><span class=\"hljs-string\">window.acmeReadDirClick=function()&#123;</span><br><span class=\"hljs-string\">\tvar id=++UserClickSyncID;</span><br><span class=\"hljs-string\">\t</span><br><span class=\"hljs-string\">\t$(&quot;.step1Hide&quot;).hide();</span><br><span class=\"hljs-string\">\t$(&quot;.step1Show&quot;).show();</span><br><span class=\"hljs-string\">\tvar tag=&quot;Step-1&quot;,sEl=&quot;.acmeReadDirState&quot;;</span><br><span class=\"hljs-string\">\t</span><br><span class=\"hljs-string\">\tvar url=$(&quot;.in_acmeURL&quot;).val().trim();</span><br><span class=\"hljs-string\">\tif(!url)&#123;</span><br><span class=\"hljs-string\">\t\tShowState(sEl,Lang(&quot;请填写服务URL！&quot;,&quot;Please fill in the service URL!&quot;),1);</span><br><span class=\"hljs-string\">\t\treturn;</span><br><span class=\"hljs-string\">\t&#125;</span><br><span class=\"hljs-string\">\tlocalStorage[ChoiceAcmeURLStoreKey]=url;</span><br><span class=\"hljs-string\">\turl=ACME.URL=url.replace(/\\\\/$/,&quot;&quot;);</span><br><span class=\"hljs-string\">\t</span><br><span class=\"hljs-string\">\tvar msg0=CLog(tag,0, ShowState(sEl,PleaseWaitTips()+Lang(&quot;正在读取服务目录，&quot;,&quot;Reading service directory, &quot;)+&quot; URL=&quot;+ACME.URL, 2));</span><br><span class=\"hljs-string\">\tvar reqDir=function()&#123;</span><br><span class=\"hljs-string\">\t\tACME.Directory(function(cache,saveCache)&#123;</span><br><span class=\"hljs-string\">\t\t\tsaveCacheCors=function(corsOK,err)&#123;</span><br><span class=\"hljs-string\">\t\t\t\tcache.corsOK=corsOK?1:-1;</span><br><span class=\"hljs-string\">\t\t\t\tcache.corsError=err||&quot;&quot;;</span><br><span class=\"hljs-string\">\t\t\t\tsaveCache();</span><br><span class=\"hljs-string\">\t\t\t&#125;;</span><br><span class=\"hljs-string\">\t\t\tif(cache.corsOK==1) dirOK();//已缓存的，此ACME服务正常</span><br><span class=\"hljs-string\">\t\t\telse if(cache.corsOK==-1) testCORSFail(cache.corsError, true);//不正常已缓存</span><br><span class=\"hljs-string\">\t\t\telse testCORS();//检测是否能正常调用接口，是否支持跨域</span><br><span class=\"hljs-string\">\t\t&#125;,function(err,status)&#123;</span><br><span class=\"hljs-string\">\t\t\tif(UserClickSyncKill(id,tag,msg0+&quot; err: &quot;+err))return;</span><br><span class=\"hljs-string\">\t\t\tif(status===0)&#123; //可能是跨域无法读取到任何数据</span><br><span class=\"hljs-string\">\t\t\t\tCLog(tag,1, ShowState(sEl,Lang(&quot;读取服务目录出错：无法访问此URL。&quot;,&quot;Read service directory error: This URL cannot be accessed.&quot;)+TryAgainTips(), 1));</span><br><span class=\"hljs-string\">\t\t\t\t</span><br><span class=\"hljs-string\">\t\t\t\tacmeReadDirGotoCORS(Lang(&quot;如果你可以在浏览器中直接打开并访问此ACME服务URL，代表此ACME服务对跨域访问支持不良，则请按下面步骤操作：&quot;,&quot;If you can open and access this ACME service URL directly in your browser, it represents that this ACME service has poor support for cross-domain access, please follow the steps below:&quot;));</span><br><span class=\"hljs-string\">\t\t\t&#125;else&#123;</span><br><span class=\"hljs-string\">\t\t\t\tCLog(tag,1, ShowState(sEl,Lang(&quot;读取服务目录出错：&quot;+err,&quot;Read service directory error: &quot;+err)+TryAgainTips(), 1));</span><br><span class=\"hljs-string\">\t\t\t&#125;;</span><br><span class=\"hljs-string\">\t\t&#125;);</span><br><span class=\"hljs-string\">\t&#125;;</span><br><span class=\"hljs-string\">\tvar saveCacheCors;</span><br><span class=\"hljs-string\">\tvar dirOK=function()&#123;</span><br><span class=\"hljs-string\">\t\tif(UserClickSyncKill(id,tag,msg0))return;</span><br><span class=\"hljs-string\">\t\tconfigStepShow();</span><br><span class=\"hljs-string\">\t\tCLog(tag,0, ShowState(sEl,Lang(&quot;读取服务目录成功，&quot;,&quot;Read service directory OK,&quot;)</span><br><span class=\"hljs-string\">\t\t\t+NextStepTips()+&quot; URL=&quot;+ACME.URL, 2), ACME.DirData);</span><br><span class=\"hljs-string\">\t&#125;;</span><br><span class=\"hljs-string\">\t</span><br><span class=\"hljs-string\">\t//ZeroSSL接口跨域支持太差，发现这种就直接在他们网站里面跑</span><br><span class=\"hljs-string\">\tvar testCORS=function()&#123;</span><br><span class=\"hljs-string\">\t\tif(UserClickSyncKill(id,tag,msg0))return;</span><br><span class=\"hljs-string\">\t\tmsg0=CLog(tag,0, ShowState(sEl,PleaseWaitTips()+Lang(&quot;正在测试此ACME服务对浏览器的支持情况，&quot;,&quot;Testing browser support for this ACME service, &quot;)+&quot; URL=&quot;+ACME.URL, 2));</span><br><span class=\"hljs-string\">\t\tACME.GetNonce(true,function()&#123;</span><br><span class=\"hljs-string\">\t\t\tACME.TestAccountCORS(function()&#123;</span><br><span class=\"hljs-string\">\t\t\t\tCLog(tag,0, Lang(&quot;此ACME服务对浏览器的支持良好。&quot;,&quot;This ACME service has good browser support.&quot;));</span><br><span class=\"hljs-string\">\t\t\t\tsaveCacheCors(true);</span><br><span class=\"hljs-string\">\t\t\t\tdirOK();</span><br><span class=\"hljs-string\">\t\t\t&#125;,testCORSFail);</span><br><span class=\"hljs-string\">\t\t&#125;,function(err,corsFail)&#123; //GetNonce 能明确检测到是否支持跨域可以缓存起来，账户地址可能是网络错误不缓存</span><br><span class=\"hljs-string\">\t\t\tif(corsFail) saveCacheCors(false, err);</span><br><span class=\"hljs-string\">\t\t\ttestCORSFail(err,corsFail);</span><br><span class=\"hljs-string\">\t\t&#125;);</span><br><span class=\"hljs-string\">\t&#125;;</span><br><span class=\"hljs-string\">\tvar testCORSFail=function(err,corsFail)&#123;</span><br><span class=\"hljs-string\">\t\tif(UserClickSyncKill(id,tag,msg0+&quot; err: &quot;+err))return;</span><br><span class=\"hljs-string\">\t\tCLog(tag,1, ShowState(sEl,Lang(</span><br><span class=\"hljs-string\">\t\t\t&quot;测试此ACME服务对浏览器的支持情况，发生错误：&quot;+err</span><br><span class=\"hljs-string\">\t\t\t,&quot;Test browser support for this ACME service, An error occurred: &quot;+err)</span><br><span class=\"hljs-string\">\t\t\t+(corsFail?&quot;&quot;:TryAgainTips()), 1));</span><br><span class=\"hljs-string\">\t\tLangReview(sEl);//err from cache</span><br><span class=\"hljs-string\">\t\tif(corsFail) acmeReadDirGotoCORS();</span><br><span class=\"hljs-string\">\t&#125;;</span><br><span class=\"hljs-string\">\t</span><br><span class=\"hljs-string\">\treqDir();</span><br><span class=\"hljs-string\">&#125;;</span><br><span class=\"hljs-string\"></span><br><span class=\"hljs-string\"></span><br><span class=\"hljs-string\"></span><br><span class=\"hljs-string\"></span><br><span class=\"hljs-string\"></span><br><span class=\"hljs-string\"></span><br><span class=\"hljs-string\">/************** UI Step2: Certificate Configuration **************/</span><br><span class=\"hljs-string\">//显示第二步界面</span><br><span class=\"hljs-string\">var configStepShow=function()&#123;</span><br><span class=\"hljs-string\">\t$(&quot;.step2Hide&quot;).hide();</span><br><span class=\"hljs-string\">\t$(&quot;.step2Show&quot;).show();</span><br><span class=\"hljs-string\">\tShowState(&quot;.configStepState&quot;,false);</span><br><span class=\"hljs-string\">\t</span><br><span class=\"hljs-string\">\t$(&quot;.eabShow&quot;)[ACME.StepData.needEAB?&#x27;show&#x27;:&#x27;hide&#x27;]();</span><br><span class=\"hljs-string\">\tif(DropConfigFile.eabKid)$(&quot;.in_eab_kid&quot;).val(DropConfigFile.eabKid);</span><br><span class=\"hljs-string\">\tif(DropConfigFile.eabKey)$(&quot;.in_eab_key&quot;).val(DropConfigFile.eabKey);</span><br><span class=\"hljs-string\">\t</span><br><span class=\"hljs-string\">\t$(&quot;.termsAgreeBox&quot;)[ACME.StepData.termsURL?&#x27;show&#x27;:&#x27;hide&#x27;]();</span><br><span class=\"hljs-string\">\t$(&quot;.termsAgreeTips&quot;).html(Lang(&#x27;我同意此证书颁发机构ACME服务的&lt;a href=&quot;&#x27;+ACME.StepData.termsURL+&#x27;&quot; target=&quot;_blank&quot;&gt;服务条款&lt;/a&gt;。&#x27;, &#x27;I agree to the &lt;a href=&quot;&#x27;+ACME.StepData.termsURL+&#x27;&quot; target=&quot;_blank&quot;&gt;terms of service&lt;/a&gt; for this Certificate Authority ACME Service.&#x27;));</span><br><span class=\"hljs-string\">\t$(&quot;.choice_termsAgree&quot;).prop(&quot;checked&quot;,true);</span><br><span class=\"hljs-string\">\t</span><br><span class=\"hljs-string\">\tvar el=$(&quot;.in_domains&quot;);//填充上次填写的域名列表</span><br><span class=\"hljs-string\">\tvar valS=localStorage[InputDomainsStoreKey];</span><br><span class=\"hljs-string\">\tvar val=DropConfigFile.domains&amp;&amp;DropConfigFile.domains.join(&quot;, &quot;)||valS;</span><br><span class=\"hljs-string\">\tif(!el.val())&#123;</span><br><span class=\"hljs-string\">\t\tel.val(val||&quot;&quot;);</span><br><span class=\"hljs-string\">\t&#125;</span><br><span class=\"hljs-string\">\t$(&quot;.choice_domains_store&quot;).prop(&quot;checked&quot;, !!valS);</span><br><span class=\"hljs-string\">\t</span><br><span class=\"hljs-string\">\tvar el=$(&quot;.in_email&quot;);//填充上次填写的联系邮箱</span><br><span class=\"hljs-string\">\tvar valS=localStorage[InputEmailStoreKey];</span><br><span class=\"hljs-string\">\tvar val=DropConfigFile.email||valS;</span><br><span class=\"hljs-string\">\tif(!el.val())&#123;</span><br><span class=\"hljs-string\">\t\tel.val(val||&quot;&quot;);</span><br><span class=\"hljs-string\">\t&#125;</span><br><span class=\"hljs-string\">\t$(&quot;.choice_email_store&quot;).prop(&quot;checked&quot;, !!valS);</span><br><span class=\"hljs-string\">\t</span><br><span class=\"hljs-string\">\tvar setKey=function(k)&#123;</span><br><span class=\"hljs-string\">\t\tif(DropConfigFile[k])&#123;</span><br><span class=\"hljs-string\">\t\t\t$(&quot;input[name=choice_&quot;+k+&quot;][value=manual]&quot;)[0].click();</span><br><span class=\"hljs-string\">\t\t\t$(&quot;.in_&quot;+k).val(DropConfigFile[k]);</span><br><span class=\"hljs-string\">\t\t&#125;</span><br><span class=\"hljs-string\">\t&#125;;</span><br><span class=\"hljs-string\">\tsetKey(&quot;privateKey&quot;);setKey(&quot;accountKey&quot;);</span><br><span class=\"hljs-string\">\t</span><br><span class=\"hljs-string\">\tDropConfigFile=&#123;&#125;;//配置完成，丢弃拖拽进来的配置信息</span><br><span class=\"hljs-string\">&#125;;</span><br><span class=\"hljs-string\">//生成证书的密钥对</span><br><span class=\"hljs-string\">var configPrivateKeyGenerate=function(type)&#123;</span><br><span class=\"hljs-string\">\tvar id=++UserClickSyncID;</span><br><span class=\"hljs-string\">\tvar tag=&quot;Step-2&quot;,sEl=&quot;.privateKeyState&quot;;</span><br><span class=\"hljs-string\">\t</span><br><span class=\"hljs-string\">\tvar keyTag=&quot;&quot;,type2;</span><br><span class=\"hljs-string\">\tif(type==&quot;generateRSA&quot;)&#123;</span><br><span class=\"hljs-string\">\t\ttype=&quot;RSA&quot;;type2=X509.DefaultType2_RSA;</span><br><span class=\"hljs-string\">\t\tkeyTag=Lang(&quot;证书RSA私钥(&quot;+type2+&quot;位)&quot;,&quot;Certificate RSA private key (&quot;+type2+&quot; bits)&quot;);</span><br><span class=\"hljs-string\">\t&#125;else if(type==&quot;generateECC&quot;)&#123;</span><br><span class=\"hljs-string\">\t\ttype=&quot;ECC&quot;;type2=X509.DefaultType2_ECC; var type2N=X509.SupportECCType2[type2]||type2;</span><br><span class=\"hljs-string\">\t\tkeyTag=Lang(&quot;证书ECC私钥(&quot;+type2N+&quot;曲线)&quot;,&quot;Certificate ECC Private Key (&quot;+type2N+&quot; curve)&quot;);</span><br><span class=\"hljs-string\">\t&#125;else&#123;</span><br><span class=\"hljs-string\">\t\tShowState(sEl,false);</span><br><span class=\"hljs-string\">\t\treturn;</span><br><span class=\"hljs-string\">\t&#125;;</span><br><span class=\"hljs-string\">\t</span><br><span class=\"hljs-string\">\tvar msg0=CLog(tag,0, ShowState(sEl,PleaseWaitTips()+Lang(&quot;正在创建&quot;,&quot;Generating &quot;)+keyTag, 2));</span><br><span class=\"hljs-string\">\tX509.KeyGenerate(type,type2,function(pem)&#123;</span><br><span class=\"hljs-string\">\t\tif(UserClickSyncKill(id,tag,msg0))return;</span><br><span class=\"hljs-string\">\t\t$(&quot;.in_privateKey&quot;).val(pem);</span><br><span class=\"hljs-string\">\t\tCLog(tag,0, ShowState(sEl,keyTag+Lang(&quot;，创建成功。&quot;,&quot;, generated successfully.&quot;), 2), &#x27;\\\\n&#x27;+pem);</span><br><span class=\"hljs-string\">\t&#125;,function(err)&#123;</span><br><span class=\"hljs-string\">\t\tif(UserClickSyncKill(id,tag,msg0+&quot; err: &quot;+err))return;</span><br><span class=\"hljs-string\">\t\tCLog(tag,1, ShowState(sEl,keyTag+Lang(&quot;，发生错误：&quot;+err,&quot;, An error occurred: &quot;+err), 1));</span><br><span class=\"hljs-string\">\t&#125;);</span><br><span class=\"hljs-string\">&#125;;</span><br><span class=\"hljs-string\">//生成ACME账户的密钥对</span><br><span class=\"hljs-string\">var configAccountKeyGenerate=function(type)&#123;</span><br><span class=\"hljs-string\">\tvar id=++UserClickSyncID;</span><br><span class=\"hljs-string\">\tvar tag=&quot;Step-2&quot;,sEl=&quot;.accountKeyState&quot;;</span><br><span class=\"hljs-string\">\t</span><br><span class=\"hljs-string\">\tvar keyTag=&quot;&quot;,type2;</span><br><span class=\"hljs-string\">\tif(type==&quot;generateRSA&quot;)&#123;</span><br><span class=\"hljs-string\">\t\ttype=&quot;RSA&quot;;type2=X509.DefaultType2_RSA;</span><br><span class=\"hljs-string\">\t\tkeyTag=Lang(&quot;ACME账户RSA私钥(&quot;+type2+&quot;位)&quot;,&quot;ACME account RSA private key (&quot;+type2+&quot; bits)&quot;);</span><br><span class=\"hljs-string\">\t&#125;else if(type==&quot;generateECC&quot;)&#123;</span><br><span class=\"hljs-string\">\t\ttype=&quot;ECC&quot;;type2=X509.DefaultType2_ECC; var type2N=X509.SupportECCType2[type2]||type2;</span><br><span class=\"hljs-string\">\t\tkeyTag=Lang(&quot;ACME账户ECC私钥(&quot;+type2N+&quot;曲线)&quot;,&quot;ACME account ECC Private Key (&quot;+type2N+&quot; curve)&quot;);</span><br><span class=\"hljs-string\">\t&#125;else&#123;</span><br><span class=\"hljs-string\">\t\tShowState(sEl,false);</span><br><span class=\"hljs-string\">\t\treturn;</span><br><span class=\"hljs-string\">\t&#125;;</span><br><span class=\"hljs-string\">\t</span><br><span class=\"hljs-string\">\tvar msg0=CLog(tag,0, ShowState(sEl,PleaseWaitTips()+Lang(&quot;正在创建&quot;,&quot;Generating &quot;)+keyTag, 2));</span><br><span class=\"hljs-string\">\tX509.KeyGenerate(type,type2,function(pem)&#123;</span><br><span class=\"hljs-string\">\t\tif(UserClickSyncKill(id,tag,msg0))return;</span><br><span class=\"hljs-string\">\t\t$(&quot;.in_accountKey&quot;).val(pem);</span><br><span class=\"hljs-string\">\t\tCLog(tag,0, ShowState(sEl,keyTag+Lang(&quot;，创建成功。&quot;,&quot;, generated successfully.&quot;), 2), &#x27;\\\\n&#x27;+pem);</span><br><span class=\"hljs-string\">\t&#125;,function(err)&#123;</span><br><span class=\"hljs-string\">\t\tif(UserClickSyncKill(id,tag,msg0+&quot; err: &quot;+err))return;</span><br><span class=\"hljs-string\">\t\tCLog(tag,1, ShowState(sEl,keyTag+Lang(&quot;，发生错误：&quot;+err,&quot;, An error occurred: &quot;+err), 1));</span><br><span class=\"hljs-string\">\t&#125;);</span><br><span class=\"hljs-string\">&#125;;</span><br><span class=\"hljs-string\">//点击确定按钮，完成配置域名和私钥的配置</span><br><span class=\"hljs-string\">window.configStepClick=function()&#123;</span><br><span class=\"hljs-string\">\tvar id=++UserClickSyncID;</span><br><span class=\"hljs-string\">\tvar tag=&quot;Step-2&quot;,sEl=&quot;.configStepState&quot;;</span><br><span class=\"hljs-string\">\t</span><br><span class=\"hljs-string\">\t$(&quot;.step2Hide&quot;).hide();</span><br><span class=\"hljs-string\">\t$(&quot;.step2Show&quot;).show();</span><br><span class=\"hljs-string\">\tShowState(sEl,false);</span><br><span class=\"hljs-string\">\t</span><br><span class=\"hljs-string\">\tvar domains=$(&quot;.in_domains&quot;).val().trim();</span><br><span class=\"hljs-string\">\tvar domainsStore=$(&quot;.choice_domains_store&quot;).prop(&quot;checked&quot;);</span><br><span class=\"hljs-string\">\tvar privateKey=$(&quot;.in_privateKey&quot;).val().trim();</span><br><span class=\"hljs-string\">\tvar accountKey=$(&quot;.in_accountKey&quot;).val().trim();</span><br><span class=\"hljs-string\">\tvar email=$(&quot;.in_email&quot;).val().trim();</span><br><span class=\"hljs-string\">\tvar emailStore=$(&quot;.choice_email_store&quot;).prop(&quot;checked&quot;);</span><br><span class=\"hljs-string\">\tvar eabKid=$(&quot;.in_eab_kid&quot;).val().trim();</span><br><span class=\"hljs-string\">\tvar eabKey=$(&quot;.in_eab_key&quot;).val().trim();</span><br><span class=\"hljs-string\">\tvar termsAgree=$(&quot;.choice_termsAgree&quot;).prop(&quot;checked&quot;);</span><br><span class=\"hljs-string\">\t</span><br><span class=\"hljs-string\">\t//域名转成数组</span><br><span class=\"hljs-string\">\tdomains=domains.replace(/\\\\s+/g,&quot;,&quot;).replace(/，+/g,&quot;,&quot;).split(/,+/);</span><br><span class=\"hljs-string\">\tfor(var i=0,mp=&#123;&#125;;i&lt;domains.length;i++)&#123;</span><br><span class=\"hljs-string\">\t\tvar domain=domains[i];</span><br><span class=\"hljs-string\">\t\tif(!domain)&#123;</span><br><span class=\"hljs-string\">\t\t\tdomains.splice(i,1); i--; continue;</span><br><span class=\"hljs-string\">\t\t&#125;else if(mp[domain])</span><br><span class=\"hljs-string\">\t\t\treturn ShowState(sEl,Lang(&quot;域名&quot;+domain+&quot;重复！&quot;,&quot;Duplicate domain name &quot;+domain+&quot;!&quot;),1);</span><br><span class=\"hljs-string\">\t\tif(/[:\\\\/;]/.test(domain))//简单校验域名格式</span><br><span class=\"hljs-string\">\t\t\treturn ShowState(sEl,Lang(&quot;域名&quot;+domain+&quot;格式错误！&quot;,&quot;Format error of domain name &quot;+domain+&quot;!&quot;),1);</span><br><span class=\"hljs-string\">\t\tmp[domain]=1;</span><br><span class=\"hljs-string\">\t&#125;</span><br><span class=\"hljs-string\">\tlocalStorage[InputDomainsStoreKey]=domainsStore?domains.join(&quot;, &quot;):&quot;&quot;;</span><br><span class=\"hljs-string\">\tlocalStorage[InputEmailStoreKey]=emailStore?email:&quot;&quot;;</span><br><span class=\"hljs-string\">\t</span><br><span class=\"hljs-string\">\t//校验是否输入</span><br><span class=\"hljs-string\">\tif(!domains.length)</span><br><span class=\"hljs-string\">\t\treturn ShowState(sEl,Lang(&quot;请填写证书中要包含的域名！&quot;,&quot;Please fill in domain name to be included in the certificate!&quot;),1);</span><br><span class=\"hljs-string\">\tif(!privateKey)</span><br><span class=\"hljs-string\">\t\treturn ShowState(sEl,Lang(&quot;请选择证书的私钥！&quot;,&quot;Please select the private key of the certificate!&quot;),1);</span><br><span class=\"hljs-string\">\tif(!accountKey)</span><br><span class=\"hljs-string\">\t\treturn ShowState(sEl,Lang(&quot;请选择ACME账户的私钥！&quot;,&quot;Please select the private key of ACME account!&quot;),1);</span><br><span class=\"hljs-string\">\tif(!/.+@.+\\\\..+/.test(email) || /[\\\\s,;]/.test(email))</span><br><span class=\"hljs-string\">\t\treturn ShowState(sEl,Lang(&quot;请正确填写联系邮箱！&quot;,&quot;Please fill in the contact email correctly!&quot;),1);</span><br><span class=\"hljs-string\">\tif(ACME.StepData.needEAB &amp;&amp; !(eabKid &amp;&amp; eabKey))</span><br><span class=\"hljs-string\">\t\treturn ShowState(sEl,Lang(&quot;请填写EAB KID和HMAC KEY！&quot;,&quot;Please fill in EAB KID and HMAC KEY!&quot;),1);</span><br><span class=\"hljs-string\">\tif(ACME.StepData.termsURL &amp;&amp; !termsAgree)</span><br><span class=\"hljs-string\">\t\treturn ShowState(sEl,Lang(&quot;未同意此ACME服务的服务条款！&quot;,&quot;Do not agree to the terms of service of this acme service!&quot;),1);</span><br><span class=\"hljs-string\">\t</span><br><span class=\"hljs-string\">\t//校验私钥格式是否支持</span><br><span class=\"hljs-string\">\tvar privateKeyInfo, parsePrivateKey=function()&#123;</span><br><span class=\"hljs-string\">\t\tX509.KeyParse(privateKey,function(info)&#123;</span><br><span class=\"hljs-string\">\t\t\tprivateKeyInfo=info; parseAccountKey();</span><br><span class=\"hljs-string\">\t\t&#125;,function(err)&#123;</span><br><span class=\"hljs-string\">\t\t\tShowState(sEl,Lang(&quot;证书的私钥无效：&quot;,&quot;The private key of the certificate is invalid: &quot;)+err,1);</span><br><span class=\"hljs-string\">\t\t&#125;,1);</span><br><span class=\"hljs-string\">\t&#125;;</span><br><span class=\"hljs-string\">\tvar accountKeyInfo,parseAccountKey=function()&#123;</span><br><span class=\"hljs-string\">\t\tX509.KeyParse(accountKey,function(info)&#123;</span><br><span class=\"hljs-string\">\t\t\taccountKeyInfo=info; parseKeyOK();</span><br><span class=\"hljs-string\">\t\t&#125;,function(err)&#123;</span><br><span class=\"hljs-string\">\t\t\tShowState(sEl,Lang(&quot;ACME账户的私钥无效：&quot;,&quot;The private key of the ACME account is invalid: &quot;)+err,1);</span><br><span class=\"hljs-string\">\t\t&#125;,1);</span><br><span class=\"hljs-string\">\t&#125;;</span><br><span class=\"hljs-string\">\t</span><br><span class=\"hljs-string\">\tvar msg0=CLog(tag,0, ShowState(sEl,PleaseWaitTips(), 2));</span><br><span class=\"hljs-string\">\t//设置配置数据</span><br><span class=\"hljs-string\">\tvar parseKeyOK=function()&#123;</span><br><span class=\"hljs-string\">\t\tif(UserClickSyncKill(id,tag,msg0))return;</span><br><span class=\"hljs-string\">\t\t</span><br><span class=\"hljs-string\">\t\tACME.StepData.config=&#123;</span><br><span class=\"hljs-string\">\t\t\tdomains:domains</span><br><span class=\"hljs-string\">\t\t\t,privateKey:privateKeyInfo</span><br><span class=\"hljs-string\">\t\t\t,accountKey:accountKeyInfo</span><br><span class=\"hljs-string\">\t\t\t,email:email</span><br><span class=\"hljs-string\">\t\t\t,eabKid:eabKid</span><br><span class=\"hljs-string\">\t\t\t,eabKey:eabKey</span><br><span class=\"hljs-string\">\t\t&#125;;</span><br><span class=\"hljs-string\">\t\tCLog(tag, 0, &quot;config&quot;, ACME.StepData.config);</span><br><span class=\"hljs-string\">\t\t</span><br><span class=\"hljs-string\">\t\tacmeNewAccount();</span><br><span class=\"hljs-string\">\t&#125;;</span><br><span class=\"hljs-string\">\t</span><br><span class=\"hljs-string\">\t//ACME账户接口调用</span><br><span class=\"hljs-string\">\tvar acmeNewAccount=function()&#123;</span><br><span class=\"hljs-string\">\t\tvar msg0=CLog(tag,0, ShowState(sEl,PleaseWaitTips()+Lang(&quot;正在调用ACME服务的newAccount接口：&quot;,&quot;The newAccount interface that is calling the ACME service: &quot;)+ACME.DirData.newAccount, 2));</span><br><span class=\"hljs-string\">\t\tACME.StepAccount(function()&#123;</span><br><span class=\"hljs-string\">\t\t\tif(UserClickSyncKill(id,tag,msg0))return;</span><br><span class=\"hljs-string\">\t\t\tacmeNewOrder();</span><br><span class=\"hljs-string\">\t\t&#125;,function(err)&#123;</span><br><span class=\"hljs-string\">\t\t\tif(UserClickSyncKill(id,tag,msg0+&quot; err: &quot;+err))return;</span><br><span class=\"hljs-string\">\t\t\tCLog(tag,1, ShowState(sEl,Lang(&quot;调用ACME服务的newAccount接口：&quot;,&quot;Call the newAccount interface of the ACME service: &quot;)</span><br><span class=\"hljs-string\">\t\t\t\t+ACME.DirData.newAccount+Lang(&quot;，发生错误：&quot;+err,&quot;, An error occurred: &quot;+err), 1));</span><br><span class=\"hljs-string\">\t\t&#125;);</span><br><span class=\"hljs-string\">\t&#125;;</span><br><span class=\"hljs-string\">\t//ACME订单创建接口调用</span><br><span class=\"hljs-string\">\tvar acmeNewOrder=function()&#123;</span><br><span class=\"hljs-string\">\t\tvar msg0,onProgress=function(tips)&#123;</span><br><span class=\"hljs-string\">\t\t\tif(id!=UserClickSyncID)return;</span><br><span class=\"hljs-string\">\t\t\tmsg0=CLog(tag,0, ShowState(sEl,PleaseWaitTips()+Lang(&quot;正在调用ACME服务的订单接口。&quot;,&quot;The order interface that is calling the ACME service.&quot;)+&#x27; &#x27;+tips+&quot; URL:&quot;+ACME.DirData.newOrder, 2));</span><br><span class=\"hljs-string\">\t\t&#125;; onProgress(&quot;&quot;);</span><br><span class=\"hljs-string\">\t\tACME.StepOrder(onProgress,function()&#123;</span><br><span class=\"hljs-string\">\t\t\tif(UserClickSyncKill(id,tag,msg0))return;</span><br><span class=\"hljs-string\">\t\t\tacmeOK();</span><br><span class=\"hljs-string\">\t\t&#125;,function(err)&#123;</span><br><span class=\"hljs-string\">\t\t\tif(UserClickSyncKill(id,tag,msg0+&quot; err: &quot;+err))return;</span><br><span class=\"hljs-string\">\t\t\tCLog(tag,1, ShowState(sEl,Lang(&quot;调用ACME服务的订单接口：&quot;,&quot;Call the order interface of the ACME service: &quot;)</span><br><span class=\"hljs-string\">\t\t\t\t+ACME.DirData.newOrder+Lang(&quot;，发生错误：&quot;+err,&quot;, An error occurred: &quot;+err), 1));</span><br><span class=\"hljs-string\">\t\t&#125;);</span><br><span class=\"hljs-string\">\t&#125;;</span><br><span class=\"hljs-string\">\t//ACME接口调用完成，显示下一步</span><br><span class=\"hljs-string\">\tvar acmeOK=function()&#123;</span><br><span class=\"hljs-string\">\t\tverifyStepShow();</span><br><span class=\"hljs-string\">\t\t</span><br><span class=\"hljs-string\">\t\tCLog(tag,0, ShowState(sEl,Lang(</span><br><span class=\"hljs-string\">\t\t\t &quot;配置完成，&quot;</span><br><span class=\"hljs-string\">\t\t\t,&quot;Configuration is complete, &quot;)</span><br><span class=\"hljs-string\">\t\t\t+NextStepTips(), 2), ACME.StepData);</span><br><span class=\"hljs-string\">\t&#125;;</span><br><span class=\"hljs-string\">\t</span><br><span class=\"hljs-string\">\tparsePrivateKey();</span><br><span class=\"hljs-string\">&#125;;</span><br><span class=\"hljs-string\"></span><br><span class=\"hljs-string\"></span><br><span class=\"hljs-string\"></span><br><span class=\"hljs-string\"></span><br><span class=\"hljs-string\"></span><br><span class=\"hljs-string\"></span><br><span class=\"hljs-string\">/************** UI Step3: Verify Domain Ownership **************/</span><br><span class=\"hljs-string\">//显示第三步界面</span><br><span class=\"hljs-string\">var verifyStepShow=function()&#123;</span><br><span class=\"hljs-string\">\t$(&quot;.step3Hide&quot;).hide();</span><br><span class=\"hljs-string\">\t$(&quot;.step3Show&quot;).show();</span><br><span class=\"hljs-string\">\t$(&quot;.verifyStepBtn&quot;).show();</span><br><span class=\"hljs-string\">\t$(&quot;.verifyRunStopBtn&quot;).hide();</span><br><span class=\"hljs-string\">\t$(&quot;.finalizeOrderBtn&quot;).hide();</span><br><span class=\"hljs-string\">\tShowState(&quot;.verifyStepState&quot;,false);</span><br><span class=\"hljs-string\">\t</span><br><span class=\"hljs-string\">\t//显示所有域名的验证界面</span><br><span class=\"hljs-string\">\tverifyBoxShow();</span><br><span class=\"hljs-string\">&#125;;</span><br><span class=\"hljs-string\">//停止验证</span><br><span class=\"hljs-string\">window.verifyRunStopClick=function()&#123;</span><br><span class=\"hljs-string\">\tvar id=++UserClickSyncID;</span><br><span class=\"hljs-string\">\t$(&quot;.verifyStepBtn&quot;).show();</span><br><span class=\"hljs-string\">\t$(&quot;.verifyRunStopBtn&quot;).hide();</span><br><span class=\"hljs-string\">\t$(&quot;.finalizeOrderBtn&quot;).hide();</span><br><span class=\"hljs-string\">\tShowState(&quot;.verifyStepState&quot;,false);</span><br><span class=\"hljs-string\">\tverifyRunStopFn&amp;&amp;verifyRunStopFn();</span><br><span class=\"hljs-string\">&#125;;</span><br><span class=\"hljs-string\">var verifyRunStopFn;</span><br><span class=\"hljs-string\">//点击开始验证按钮，验证所有域名所有权</span><br><span class=\"hljs-string\">window.verifyStepClick=function()&#123;</span><br><span class=\"hljs-string\">\tvar id=++UserClickSyncID;</span><br><span class=\"hljs-string\">\tvar tag=&quot;Step-3&quot;,sEl=&quot;.verifyStepState&quot;;</span><br><span class=\"hljs-string\">\t</span><br><span class=\"hljs-string\">\t$(&quot;.step3Hide&quot;).hide();</span><br><span class=\"hljs-string\">\t$(&quot;.step3Show&quot;).show();</span><br><span class=\"hljs-string\">\t$(&quot;.verifyStepBtn&quot;).hide();</span><br><span class=\"hljs-string\">\t$(&quot;.verifyRunStopBtn&quot;).show();</span><br><span class=\"hljs-string\">\t$(&quot;.finalizeOrderBtn&quot;).hide();</span><br><span class=\"hljs-string\">\tShowState(sEl,false);</span><br><span class=\"hljs-string\">\t</span><br><span class=\"hljs-string\">\tvar domains=ACME.StepData.config.domains,auths=ACME.StepData.auths;</span><br><span class=\"hljs-string\">\t//验证中更新状态显示</span><br><span class=\"hljs-string\">\tvar updateState=function(init,stopNow,isFail)&#123;</span><br><span class=\"hljs-string\">\t\tvar isStop=stopNow||id!=UserClickSyncID;</span><br><span class=\"hljs-string\">\t\tvar okCount=0,errCount=0,execCount=0;</span><br><span class=\"hljs-string\">\t\tfor(var i0=0;i0&lt;domains.length;i0++)&#123;</span><br><span class=\"hljs-string\">\t\t\tvar domain=domains[i0],auth=auths[domain],challs=auth.challenges;</span><br><span class=\"hljs-string\">\t\t\tvar stateEl=$(&quot;.verifyItemState_&quot;+i0);</span><br><span class=\"hljs-string\">\t\t\t//authState: 0 待验证，1验证中，2等待重试authTryCount，11验证成功，12验证失败authError</span><br><span class=\"hljs-string\">\t\t\tif(auth.authState==11)&#123;//验证成功的，初始化也不要修改验证方式了</span><br><span class=\"hljs-string\">\t\t\t\tShowState(stateEl,ACME.ChallName(challs[auth.challIdx])+&quot; OK!&quot;,2,&quot;&quot;);</span><br><span class=\"hljs-string\">\t\t\t\tokCount++;</span><br><span class=\"hljs-string\">\t\t\t\tcontinue;</span><br><span class=\"hljs-string\">\t\t\t&#125;</span><br><span class=\"hljs-string\">\t\t\tif(init)&#123; //记住选中的验证类型</span><br><span class=\"hljs-string\">\t\t\t\tvar choiceEl=$(&quot;input[name=choice_authItem_&quot;+i0+&quot;]&quot;);</span><br><span class=\"hljs-string\">\t\t\t\tfor(var i=0;i&lt;choiceEl.length;i++)&#123;</span><br><span class=\"hljs-string\">\t\t\t\t\tvar el=choiceEl[i];</span><br><span class=\"hljs-string\">\t\t\t\t\tif(!el.checked)&#123; //未选中的隐藏掉</span><br><span class=\"hljs-string\">\t\t\t\t\t\t$(el.parentNode).hide();</span><br><span class=\"hljs-string\">\t\t\t\t\t&#125;else&#123;</span><br><span class=\"hljs-string\">\t\t\t\t\t\tauth.challIdx=+$(el).attr(&quot;challidx&quot;);</span><br><span class=\"hljs-string\">\t\t\t\t\t&#125;</span><br><span class=\"hljs-string\">\t\t\t\t&#125;</span><br><span class=\"hljs-string\">\t\t\t\tauth.authState=0;</span><br><span class=\"hljs-string\">\t\t\t\tauth.authTryCount=0;</span><br><span class=\"hljs-string\">\t\t\t\tauth.authError=&quot;&quot;;</span><br><span class=\"hljs-string\">\t\t\t\tauth.authTimer=0;</span><br><span class=\"hljs-string\">\t\t\t&#125;</span><br><span class=\"hljs-string\">\t\t\tvar challName=ACME.ChallName(challs[auth.challIdx]);</span><br><span class=\"hljs-string\">\t\t\tif(auth.authState==12)&#123;//验证失败</span><br><span class=\"hljs-string\">\t\t\t\tShowState(stateEl,challName+Lang(&quot;，验证失败：&quot;,&quot;, Verify failed: &quot;)</span><br><span class=\"hljs-string\">\t\t\t\t\t+auth.authError,1,&quot;&quot;);</span><br><span class=\"hljs-string\">\t\t\t\terrCount++;</span><br><span class=\"hljs-string\">\t\t\t\tcontinue;</span><br><span class=\"hljs-string\">\t\t\t&#125;</span><br><span class=\"hljs-string\">\t\t\texecCount++;</span><br><span class=\"hljs-string\">\t\t\tif(isStop)&#123;</span><br><span class=\"hljs-string\">\t\t\t\tShowState(stateEl,false);</span><br><span class=\"hljs-string\">\t\t\t\tclearTimeout(auth.authTimer); auth.authTimer=0;</span><br><span class=\"hljs-string\">\t\t\t&#125;else if(auth.authState==2)</span><br><span class=\"hljs-string\">\t\t\t\tShowState(stateEl,Lang(&quot;等待重试中...&quot;,&quot;Waiting for retry...&quot;)</span><br><span class=\"hljs-string\">\t\t\t\t\t+&quot; &quot;+auth.authTryCount+&quot; &quot;+auth.authError,3,&quot;&quot;);</span><br><span class=\"hljs-string\">\t\t\telse if(auth.authState==1)</span><br><span class=\"hljs-string\">\t\t\t\tShowState(stateEl,Lang(&quot;验证中...&quot;,&quot;Verify in progress...&quot;),0,&quot;&quot;);</span><br><span class=\"hljs-string\">\t\t\telse ShowState(stateEl,Lang(&quot;等待验证...&quot;,&quot;Waiting for verify...&quot;),0,&quot;&quot;);</span><br><span class=\"hljs-string\">\t\t&#125;</span><br><span class=\"hljs-string\">\t\tif(!isStop || stopNow)&#123;</span><br><span class=\"hljs-string\">\t\t\tvar goto2=Lang(&quot;请返回第二步重新开始操作！&quot;,&quot;Please go back to step 2 and start over! &quot;);</span><br><span class=\"hljs-string\">\t\t\tvar msg=ShowState(sEl,(isFail?Lang(&quot;验证失败，&quot;,&quot;Verify failed, &quot;)+goto2:</span><br><span class=\"hljs-string\">\t\t\t\t\tisStop?Lang(&quot;已取消，&quot;,&quot;Canceled, &quot;)+goto2:</span><br><span class=\"hljs-string\">\t\t\t\t\tLang(&quot;正在验证，请耐心等待... &quot;,&quot;Verifying, please wait... &quot;))</span><br><span class=\"hljs-string\">\t\t\t\t+&quot;&lt;div&gt;&quot;</span><br><span class=\"hljs-string\">\t\t\t\t\t+Lang(&quot;验证通过：&quot;,&quot;Verify pass: &quot;)+okCount+&quot;, &quot;</span><br><span class=\"hljs-string\">\t\t\t\t\t+Lang(&quot;未通过：&quot;,&quot;Failed: &quot;)+errCount+&quot;, &quot;</span><br><span class=\"hljs-string\">\t\t\t\t\t+Lang(&quot;验证中：&quot;,&quot;Verify in progress: &quot;)+execCount</span><br><span class=\"hljs-string\">\t\t\t\t+&quot;&lt;/div&gt;&quot;</span><br><span class=\"hljs-string\">\t\t\t\t, isStop?1:0);</span><br><span class=\"hljs-string\">\t\t\tif(isStop)&#123;</span><br><span class=\"hljs-string\">\t\t\t\tCLog(tag, 1, msg);</span><br><span class=\"hljs-string\">\t\t\t&#125;</span><br><span class=\"hljs-string\">\t\t&#125;</span><br><span class=\"hljs-string\">\t&#125;</span><br><span class=\"hljs-string\">\tupdateState(1);</span><br><span class=\"hljs-string\">\t//取一个进行验证</span><br><span class=\"hljs-string\">\tvar run=function()&#123;</span><br><span class=\"hljs-string\">\t\tif(id!=UserClickSyncID)return;</span><br><span class=\"hljs-string\">\t\tupdateState();</span><br><span class=\"hljs-string\">\t\tvar authItem,hasRunning=0,okCount=0,errCount=0;</span><br><span class=\"hljs-string\">\t\tfor(var i0=0;i0&lt;domains.length;i0++)&#123;</span><br><span class=\"hljs-string\">\t\t\tvar domain=domains[i0],auth=auths[domain];</span><br><span class=\"hljs-string\">\t\t\tif(!authItem &amp;&amp; !auth.authState) authItem=auth;</span><br><span class=\"hljs-string\">\t\t\tif(auth.authState==1)hasRunning++;</span><br><span class=\"hljs-string\">\t\t\tif(auth.authState==11)okCount++;</span><br><span class=\"hljs-string\">\t\t\tif(auth.authState==12)errCount++;</span><br><span class=\"hljs-string\">\t\t&#125;</span><br><span class=\"hljs-string\">\t\tif(okCount==domains.length)//全部验证成功</span><br><span class=\"hljs-string\">\t\t\treturn verifyOK();</span><br><span class=\"hljs-string\">\t\tif(okCount+errCount==domains.length)//全部验证完成，存在不通过的</span><br><span class=\"hljs-string\">\t\t\treturn verifyFail();</span><br><span class=\"hljs-string\">\t\tif(!authItem || hasRunning)return;//没有待验证的或已有验证中，继续等待</span><br><span class=\"hljs-string\">\t\t</span><br><span class=\"hljs-string\">\t\tauthItem.authState=1;</span><br><span class=\"hljs-string\">\t\tauthItem.authTryCount++;</span><br><span class=\"hljs-string\">\t\tauthItem.authError=&quot;&quot;;</span><br><span class=\"hljs-string\">\t\tupdateState();</span><br><span class=\"hljs-string\">\t\tACME.StepVerifyAuthItem(authItem, authItem.challIdx, function(isOk, retryTime, err)&#123;</span><br><span class=\"hljs-string\">\t\t\tif(id!=UserClickSyncID)return;</span><br><span class=\"hljs-string\">\t\t\tif(isOk)&#123;</span><br><span class=\"hljs-string\">\t\t\t\tauthItem.authState=11;</span><br><span class=\"hljs-string\">\t\t\t&#125;else&#123;</span><br><span class=\"hljs-string\">\t\t\t\tauthItem.authState=2;</span><br><span class=\"hljs-string\">\t\t\t\tauthItem.authError=err;</span><br><span class=\"hljs-string\">\t\t\t\tauthItem.authTimer=setTimeout(function()&#123;</span><br><span class=\"hljs-string\">\t\t\t\t\tauthItem.authState=0;</span><br><span class=\"hljs-string\">\t\t\t\t\tauthItem.authTimer=0;</span><br><span class=\"hljs-string\">\t\t\t\t\trun();</span><br><span class=\"hljs-string\">\t\t\t\t&#125;, retryTime);</span><br><span class=\"hljs-string\">\t\t\t&#125;</span><br><span class=\"hljs-string\">\t\t\trun();</span><br><span class=\"hljs-string\">\t\t&#125;, function(err)&#123;</span><br><span class=\"hljs-string\">\t\t\tif(id!=UserClickSyncID)return;</span><br><span class=\"hljs-string\">\t\t\tauthItem.authState=12;</span><br><span class=\"hljs-string\">\t\t\tauthItem.authError=err;</span><br><span class=\"hljs-string\">\t\t\trun();</span><br><span class=\"hljs-string\">\t\t&#125;);</span><br><span class=\"hljs-string\">\t&#125;;</span><br><span class=\"hljs-string\">\t</span><br><span class=\"hljs-string\">\tCLog(tag,0,&quot;==========Verify Start==========&quot;);</span><br><span class=\"hljs-string\">\tvar verifyEnd=function()&#123;</span><br><span class=\"hljs-string\">\t\t$(&quot;.verifyRunStopBtn&quot;).hide();</span><br><span class=\"hljs-string\">\t\tverifyRunStopFn=null;</span><br><span class=\"hljs-string\">\t\tCLog(tag,0,&quot;==========Verify End==========&quot;);</span><br><span class=\"hljs-string\">\t&#125;;</span><br><span class=\"hljs-string\">\t//中途停止控制</span><br><span class=\"hljs-string\">\tverifyRunStopFn=function()&#123;</span><br><span class=\"hljs-string\">\t\tverifyEnd();</span><br><span class=\"hljs-string\">\t\tupdateState(0,1);</span><br><span class=\"hljs-string\">\t&#125;;</span><br><span class=\"hljs-string\">\t//验证完成，存在不通过的</span><br><span class=\"hljs-string\">\tvar verifyFail=function()&#123;</span><br><span class=\"hljs-string\">\t\tCLog(tag,1,&quot;Verify Fail!&quot;);</span><br><span class=\"hljs-string\">\t\tupdateState(0,1,1);</span><br><span class=\"hljs-string\">\t\tverifyEnd();</span><br><span class=\"hljs-string\">\t&#125;;</span><br><span class=\"hljs-string\">\t//全部验证成功</span><br><span class=\"hljs-string\">\tvar verifyOK=function()&#123;</span><br><span class=\"hljs-string\">\t\tCLog(tag,0,&quot;Verify OK!&quot;);</span><br><span class=\"hljs-string\">\t\tverifyEnd();</span><br><span class=\"hljs-string\">\t\t</span><br><span class=\"hljs-string\">\t\tfinalizeOrderClick();</span><br><span class=\"hljs-string\">\t&#125;;</span><br><span class=\"hljs-string\">\t</span><br><span class=\"hljs-string\">\t//调用完成订单接口，生成证书</span><br><span class=\"hljs-string\">\twindow.finalizeOrderClick=function()&#123;</span><br><span class=\"hljs-string\">\t\t$(&quot;.finalizeOrderBtn&quot;).hide();</span><br><span class=\"hljs-string\">\t\tvar msg0,onProgress=function(tips)&#123;</span><br><span class=\"hljs-string\">\t\t\tif(id!=UserClickSyncID)return;</span><br><span class=\"hljs-string\">\t\t\tmsg0=CLog(tag,0, ShowState(sEl,PleaseWaitTips()</span><br><span class=\"hljs-string\">\t\t\t+Lang(&quot;验证已通过，正在签发证书。&quot;,&quot;Verify passed, issuing certificate.&quot;)</span><br><span class=\"hljs-string\">\t\t\t+&#x27; &#x27;+tips, 2));</span><br><span class=\"hljs-string\">\t\t&#125;; onProgress(&quot;&quot;);</span><br><span class=\"hljs-string\">\t\tACME.StepFinalizeOrder(onProgress,function()&#123;</span><br><span class=\"hljs-string\">\t\t\tif(UserClickSyncKill(id,tag,msg0))return;</span><br><span class=\"hljs-string\">\t\t\t//显示下一步</span><br><span class=\"hljs-string\">\t\t\tdownloadStepShow();</span><br><span class=\"hljs-string\">\t\t\t</span><br><span class=\"hljs-string\">\t\t\tCLog(tag,0, ShowState(sEl,Lang(</span><br><span class=\"hljs-string\">\t\t\t\t &quot;验证已通过，证书已签发，&quot;</span><br><span class=\"hljs-string\">\t\t\t\t,&quot;Verification passed, The certificate has been issued, &quot;)</span><br><span class=\"hljs-string\">\t\t\t\t+NextStepTips(), 2), ACME.StepData);</span><br><span class=\"hljs-string\">\t\t&#125;,function(err)&#123;</span><br><span class=\"hljs-string\">\t\t\tif(UserClickSyncKill(id,tag,msg0+&quot; err: &quot;+err))return;</span><br><span class=\"hljs-string\">\t\t\t$(&quot;.finalizeOrderBtn&quot;).show();</span><br><span class=\"hljs-string\">\t\t\tCLog(tag,1, ShowState(sEl,Lang(&quot;签发证书发生错误，&quot;,&quot;Error issuing certificate, &quot;)+TryAgainTips()</span><br><span class=\"hljs-string\">\t\t\t\t+Lang(&quot;如果多次重试都无法签发证书，可能需要返回第二步重新开始操作。&quot;,&quot;If the certificate cannot be issued after multiple retries, you may need to return to step 2 to restart the operation.&quot;)</span><br><span class=\"hljs-string\">\t\t\t\t+&quot; Error: &quot;+err, 1));</span><br><span class=\"hljs-string\">\t\t&#125;);</span><br><span class=\"hljs-string\">\t&#125;;</span><br><span class=\"hljs-string\">\t</span><br><span class=\"hljs-string\">\trun();</span><br><span class=\"hljs-string\">&#125;;</span><br><span class=\"hljs-string\"></span><br><span class=\"hljs-string\"></span><br><span class=\"hljs-string\"></span><br><span class=\"hljs-string\"></span><br><span class=\"hljs-string\"></span><br><span class=\"hljs-string\"></span><br><span class=\"hljs-string\"></span><br><span class=\"hljs-string\">/************** UI Step4: Download and save the certificate PEM file **************/</span><br><span class=\"hljs-string\">//显示第四步界面</span><br><span class=\"hljs-string\">var downloadStepShow=function()&#123;</span><br><span class=\"hljs-string\">\t$(&quot;.step4Hide&quot;).hide();</span><br><span class=\"hljs-string\">\t$(&quot;.step4Show&quot;).show();</span><br><span class=\"hljs-string\">\tShowState(&quot;.downloadStepState&quot;,false);</span><br><span class=\"hljs-string\">\t</span><br><span class=\"hljs-string\">\tvar config=ACME.StepData.config;</span><br><span class=\"hljs-string\">\tvar hasPEM=ACME.StepData.order.downloadPEM;</span><br><span class=\"hljs-string\">\tvar pemTxt=hasPEM||Lang(&quot;未发现证书，请到第二步重新操作！&quot;,&quot;No certificate found, please go to the step 2 to operate again!&quot;,true);</span><br><span class=\"hljs-string\">\t</span><br><span class=\"hljs-string\">\t$(&quot;.txt_downloadCert&quot;).val(pemTxt);</span><br><span class=\"hljs-string\">\t$(&quot;.txt_downloadKey&quot;).val(config.privateKey.pem);</span><br><span class=\"hljs-string\">\t</span><br><span class=\"hljs-string\">\tdownFileName=config.domains[0].replace(/^\\\\*\\\\./g,&quot;&quot;).replace(/[^\\\\w]/g,&quot;_&quot;);</span><br><span class=\"hljs-string\">\tdownloadFileNameShow(downFileName);</span><br><span class=\"hljs-string\">\t</span><br><span class=\"hljs-string\">\tvar logTxts=[];</span><br><span class=\"hljs-string\">\tvar SP=function(tag)&#123;</span><br><span class=\"hljs-string\">\t\tlogTxts.push(&quot;\\\\n=========== &quot;+tag+&quot; ===========&quot;);</span><br><span class=\"hljs-string\">\t\treturn logTxts</span><br><span class=\"hljs-string\">\t&#125;</span><br><span class=\"hljs-string\">\tvar logSet=Object.assign(&#123;</span><br><span class=\"hljs-string\">\t\tacmeURL:ACME.URL</span><br><span class=\"hljs-string\">\t\t,accountURL:ACME.StepData.account.url</span><br><span class=\"hljs-string\">\t\t,X509:&#123;</span><br><span class=\"hljs-string\">\t\t\tDefaultType2_RSA:X509.DefaultType2_RSA</span><br><span class=\"hljs-string\">\t\t\t,DefaultType2_ECC:X509.DefaultType2_ECC</span><br><span class=\"hljs-string\">\t\t&#125;</span><br><span class=\"hljs-string\">\t\t,Window:&#123;</span><br><span class=\"hljs-string\">\t\t\tDefaultDownloadFileNames:DefaultDownloadFileNames</span><br><span class=\"hljs-string\">\t\t&#125;</span><br><span class=\"hljs-string\">\t&#125;,config);</span><br><span class=\"hljs-string\">\tlogSet.privateKey=config.privateKey.pem;</span><br><span class=\"hljs-string\">\tlogSet.accountKey=config.accountKey.pem;</span><br><span class=\"hljs-string\">\t</span><br><span class=\"hljs-string\">\tvar logTitle=&#x27;/********** &#x27;+Lang($(&quot;.clientNameCN&quot;).html(),$(&quot;.clientNameEN&quot;).html(),true)+&#x27; *********/&#x27;;</span><br><span class=\"hljs-string\">\tlogTxts.push(logTitle);</span><br><span class=\"hljs-string\">\tlogTxts.push(Lang(&quot;在线网址（GitHub）：&quot;,&quot;Online website (GitHub): &quot;, true)+&#x27;https://xiangyuecn.github.io/ACME-HTML-Web-Browser-Client/ACME-HTML-Web-Browser-Client.html&#x27;);</span><br><span class=\"hljs-string\">\tlogTxts.push(Lang(&quot;在线网址（Gitee）：&quot;,&quot;Online website (Gitee): &quot;, true)+&#x27;https://xiangyuecn.gitee.io/acme-html-web-browser-client/ACME-HTML-Web-Browser-Client.html&#x27;);</span><br><span class=\"hljs-string\">\tlogTxts.push(&quot;&quot;);</span><br><span class=\"hljs-string\">\tlogTxts.push(&#x27;GitHub: https://github.com/xiangyuecn/ACME-HTML-Web-Browser-Client&#x27;);</span><br><span class=\"hljs-string\">\tlogTxts.push(&#x27;Gitee: https://gitee.com/xiangyuecn/ACME-HTML-Web-Browser-Client&#x27;);</span><br><span class=\"hljs-string\">\tlogTxts.push(&quot;&quot;);</span><br><span class=\"hljs-string\">\tlogTxts.push(Lang(&quot;提示：你可以将本文件拖拽进客户端网页内，将自动填充本次证书申请的所有配置参数。&quot;,&quot;Tip: You can drag and drop this file into the client web page, and all configuration parameters of this certificate application will be filled automatically.&quot;,true));</span><br><span class=\"hljs-string\">\tlogTxts.push(&quot;&quot;);</span><br><span class=\"hljs-string\">\tSP(Lang(&quot;证书申请时间&quot;,&quot;Certificate Application Time&quot;,true))</span><br><span class=\"hljs-string\">\t\t.push(new Date().toLocaleString());</span><br><span class=\"hljs-string\">\tSP(Lang(&quot;域名列表&quot;,&quot;Domain Name List&quot;,true))</span><br><span class=\"hljs-string\">\t\t.push(config.domains.join(&quot;, &quot;));</span><br><span class=\"hljs-string\">\tSP(Lang(&quot;ACME服务地址&quot;,&quot;ACME Service URL&quot;,true))</span><br><span class=\"hljs-string\">\t\t.push(ACME.URL);</span><br><span class=\"hljs-string\">\tSP(Lang(&quot;CSR文本&quot;,&quot;CSR Text&quot;,true))</span><br><span class=\"hljs-string\">\t\t.push(ACME.StepData.order.orderCSR);</span><br><span class=\"hljs-string\">\tSP(Lang(&quot;证书PEM文本&quot;,&quot;Certificate PEM Text&quot;,true))</span><br><span class=\"hljs-string\">\t\t.push(pemTxt);</span><br><span class=\"hljs-string\">\tSP(Lang(&quot;证书私钥PEM文本&quot;,&quot;Certificate Private Key PEM Text&quot;,true))</span><br><span class=\"hljs-string\">\t\t.push(config.privateKey.pem);</span><br><span class=\"hljs-string\">\tSP(Lang(&quot;账户私钥PEM文本&quot;,&quot;Account Private Key PEM Text&quot;,true))</span><br><span class=\"hljs-string\">\t\t.push(config.accountKey.pem);</span><br><span class=\"hljs-string\">\tSP(Lang(&quot;账户URL&quot;,&quot;Account URL&quot;,true))</span><br><span class=\"hljs-string\">\t\t.push(ACME.StepData.account.url);</span><br><span class=\"hljs-string\">\tSP(Lang(&quot;完整配置信息&quot;,&quot;Complete Configuration Information&quot;,true))</span><br><span class=\"hljs-string\">\t\t.push(&quot;&lt;ACME-HTML-Web-Browser-Client&gt;&quot;+JSON.stringify(logSet)+&quot;&lt;/ACME-HTML-Web-Browser-Client&gt;&quot;);</span><br><span class=\"hljs-string\">\tlogTxts.push(&quot;&quot;);logTxts.push(logTitle);logTxts.push(&quot;&quot;);</span><br><span class=\"hljs-string\">\t</span><br><span class=\"hljs-string\">\t$(&quot;.txt_downloadLog&quot;).val(hasPEM?logTxts.join(&quot;\\\\n&quot;):pemTxt);</span><br><span class=\"hljs-string\">&#125;;</span><br><span class=\"hljs-string\">var initStep4=function()&#123;//页面启动时初始化，绑定配置文件拖拽事件</span><br><span class=\"hljs-string\">\t$(&quot;body&quot;).bind(&quot;dragover&quot;,function(e)&#123;</span><br><span class=\"hljs-string\">\t\te.preventDefault();</span><br><span class=\"hljs-string\">\t&#125;).bind(&quot;drop&quot;,function(e)&#123;</span><br><span class=\"hljs-string\">\t\te.preventDefault();</span><br><span class=\"hljs-string\">\t\t</span><br><span class=\"hljs-string\">\t\tvar file=e.dataTransfer.files[0];</span><br><span class=\"hljs-string\">\t\tif(!file)return;</span><br><span class=\"hljs-string\">\t\tvar reader = new FileReader();</span><br><span class=\"hljs-string\">\t\treader.onload = function(e)&#123;</span><br><span class=\"hljs-string\">\t\t\tvar txt=reader.result;</span><br><span class=\"hljs-string\">\t\t\tvar m=/ACME-HTML-Web-Browser-Client&gt;(.+?)&lt;\\\\/ACME-HTML-Web-Browser-Client/.exec(txt);</span><br><span class=\"hljs-string\">\t\t\tif(!m) return Toast(Lang(&quot;拖入的文件中未发现配置信息，请拖上次申请证书时保存的记录LOG文件！&quot;,&quot;No configuration information is found in the dragged file. Please drag the LOG file saved in the last certificate application!&quot;),1);</span><br><span class=\"hljs-string\">\t\t\t</span><br><span class=\"hljs-string\">\t\t\tDropConfigFile=JSON.parse(m[1]);</span><br><span class=\"hljs-string\">\t\t\tfor(var k in DropConfigFile.X509)X509[k]=DropConfigFile.X509[k];</span><br><span class=\"hljs-string\">\t\t\tfor(var k in DropConfigFile.Window)window[k]=DropConfigFile.Window[k];</span><br><span class=\"hljs-string\">\t\t\t</span><br><span class=\"hljs-string\">\t\t\tCLog(&quot;DropConfigFile&quot;,0,&quot;Reset Config&quot;,DropConfigFile);</span><br><span class=\"hljs-string\">\t\t\tToast(Lang(&quot;识别到拖入的记录LOG文件，已填充上次申请证书时使用的配置。&quot;,&quot;The LOG file of the dragged record is identified, and the configuration used in the last certificate application has been filled.&quot;),2);</span><br><span class=\"hljs-string\">\t\t\tresetStep1();//重新初始化第1步</span><br><span class=\"hljs-string\">\t\t\tdownloadFileNameShow();</span><br><span class=\"hljs-string\">\t\t&#125;</span><br><span class=\"hljs-string\">\t\treader.readAsText(file);</span><br><span class=\"hljs-string\">\t&#125;);</span><br><span class=\"hljs-string\">&#125;;</span><br><span class=\"hljs-string\">var downFileName=&quot;&quot;;</span><br><span class=\"hljs-string\">window.DefaultDownloadFileNames=&#123; //允许设置默认的文件名，下载时自动使用此文件名</span><br><span class=\"hljs-string\">\tCert:&quot;&quot; /*domain.crt*/, Key:&quot;&quot; /*domain.key*/, Log:&quot;&quot; /*domain.log*/</span><br><span class=\"hljs-string\">&#125;;</span><br><span class=\"hljs-string\">window.downloadBtnClick=function(type)&#123;</span><br><span class=\"hljs-string\">\tvar val=$(&quot;.txt_download&quot;+type).val();</span><br><span class=\"hljs-string\">\tvar fileName=downFileName;</span><br><span class=\"hljs-string\">\tif(type==&quot;Cert&quot;) fileName+=&quot;.pem&quot;;</span><br><span class=\"hljs-string\">\tif(type==&quot;Key&quot;) fileName+=&quot;.key&quot;;</span><br><span class=\"hljs-string\">\tif(type==&quot;Log&quot;) fileName+=&quot;.log&quot;;</span><br><span class=\"hljs-string\">\tfileName=DefaultDownloadFileNames[type]||fileName;</span><br><span class=\"hljs-string\">\t</span><br><span class=\"hljs-string\">\tvar url=URL.createObjectURL(new Blob([val], &#123;&quot;type&quot;:&quot;text/plain&quot;&#125;));</span><br><span class=\"hljs-string\">\tvar downA=document.createElement(&quot;A&quot;);</span><br><span class=\"hljs-string\">\tdownA.href=url;</span><br><span class=\"hljs-string\">\tdownA.download=fileName;</span><br><span class=\"hljs-string\">\tdownA.click();</span><br><span class=\"hljs-string\">&#125;;</span><br><span class=\"hljs-string\">window.downloadFileNameShow=function(name)&#123;//显示下载文件名称，优先使用手动设置的默认名称</span><br><span class=\"hljs-string\">\tname=name||&quot;your_domain&quot;;</span><br><span class=\"hljs-string\">\tvar name2=(DefaultDownloadFileNames.Cert||&quot;&quot;).replace(/\\\\.[^\\\\.]+$/g,&quot;&quot;);</span><br><span class=\"hljs-string\">\t$(&quot;.downloadFileName&quot;).html(name2||name);</span><br><span class=\"hljs-string\">\t$(&quot;.downloadKeyFileName&quot;).html(DefaultDownloadFileNames.Key||name+&quot;.key&quot;);</span><br><span class=\"hljs-string\">\t$(&quot;.downloadCertFileName&quot;).html(DefaultDownloadFileNames.Cert||name+&quot;.pem&quot;);</span><br><span class=\"hljs-string\">&#125;;</span><br><span class=\"hljs-string\"></span><br><span class=\"hljs-string\"></span><br><span class=\"hljs-string\"></span><br><span class=\"hljs-string\"></span><br><span class=\"hljs-string\"></span><br><span class=\"hljs-string\"></span><br><span class=\"hljs-string\"></span><br><span class=\"hljs-string\"></span><br><span class=\"hljs-string\"></span><br><span class=\"hljs-string\"></span><br><span class=\"hljs-string\"></span><br><span class=\"hljs-string\"></span><br><span class=\"hljs-string\"></span><br><span class=\"hljs-string\">//Test_打头的方法仅供测试用：完成第二步后允许进行UI调试，手动调用Test_AllStepData_Save()，刷新页面可恢复界面</span><br><span class=\"hljs-string\">window.Test_AllStepData_Save=function()&#123;</span><br><span class=\"hljs-string\">\tif(!ACME.StepData.order) throw new Error(Lang(&quot;未完成第二步操作&quot;,&quot;The step 2 is not completed&quot;,true));</span><br><span class=\"hljs-string\">\t</span><br><span class=\"hljs-string\">\tvar config=ACME.StepData.config;</span><br><span class=\"hljs-string\">\tdelete ACME.PrevNonce;</span><br><span class=\"hljs-string\">\tconfig.privateKey=config.privateKey.pem;</span><br><span class=\"hljs-string\">\tconfig.accountKey=config.accountKey.pem;</span><br><span class=\"hljs-string\">\t</span><br><span class=\"hljs-string\">\tlocalStorage[Test_AllStepData_StoreKey]=JSON.stringify(ACME);</span><br><span class=\"hljs-string\">\tACME=null;</span><br><span class=\"hljs-string\">\tconsole.warn(Lang(&quot;仅供测试：已保存测试数据，需刷新页面&quot;,&quot;For testing only: the test data has been saved, and the page needs to be refreshed&quot;,true));</span><br><span class=\"hljs-string\">&#125;;</span><br><span class=\"hljs-string\">var Test_AllStepData_StoreKey=&quot;ACME_HTML_Test_AllStepData&quot;;</span><br><span class=\"hljs-string\">var initTest_Restore=function()&#123;</span><br><span class=\"hljs-string\">\tif(localStorage[Test_AllStepData_StoreKey])&#123;</span><br><span class=\"hljs-string\">\t\tconsole.warn(Lang(&quot;仅供测试：已保存测试数据，调用Test_Restore_StepXXX()进行恢复步骤界面&quot;,&quot;For testing only: test data has been saved, call Test_Restore_StepXXX() to restore the step interface&quot;,true));</span><br><span class=\"hljs-string\">\t&#125;</span><br><span class=\"hljs-string\">&#125;</span><br><span class=\"hljs-string\">var Test_AllStepData_Restore=function(next)&#123;</span><br><span class=\"hljs-string\">\tvar data=JSON.parse(localStorage[Test_AllStepData_StoreKey]||&quot;&#123;&#125;&quot;);</span><br><span class=\"hljs-string\">\tif(!data.StepData) throw new Error(Lang(&quot;未保存数据&quot;,&quot;No data saved&quot;,true));</span><br><span class=\"hljs-string\">\tfor(var k in data) ACME[k]=data[k];</span><br><span class=\"hljs-string\">\t</span><br><span class=\"hljs-string\">\tvar config=ACME.StepData.config;</span><br><span class=\"hljs-string\">\tX509.KeyParse(config.privateKey,function(info)&#123;</span><br><span class=\"hljs-string\">\t\tconfig.privateKey=info;</span><br><span class=\"hljs-string\">\t\tX509.KeyParse(config.accountKey,function(info)&#123;</span><br><span class=\"hljs-string\">\t\t\tconfig.accountKey=info;</span><br><span class=\"hljs-string\">\t\t\tconsole.log(&quot;ACME.StepData&quot;, ACME.StepData);</span><br><span class=\"hljs-string\">\t\t\tsetTimeout(function()&#123;next()&#125;);</span><br><span class=\"hljs-string\">\t\t&#125;);</span><br><span class=\"hljs-string\">\t&#125;);</span><br><span class=\"hljs-string\">&#125;;</span><br><span class=\"hljs-string\">window.Test_Restore_StepAuth=function()&#123;</span><br><span class=\"hljs-string\">\tTest_AllStepData_Restore(function()&#123;</span><br><span class=\"hljs-string\">\t\tconsole.warn(Lang(&quot;仅供测试：已手动恢复步骤三界面&quot;,&quot;For testing only: Step 3 interface has been manually restored&quot;,true));</span><br><span class=\"hljs-string\">\t\tverifyStepShow();</span><br><span class=\"hljs-string\">\t&#125;);</span><br><span class=\"hljs-string\">&#125;;</span><br><span class=\"hljs-string\">window.Test_Restore_StepDownload=function()&#123;</span><br><span class=\"hljs-string\">\tTest_AllStepData_Restore(function()&#123;</span><br><span class=\"hljs-string\">\t\tconsole.warn(Lang(&quot;仅供测试：已手动恢复步骤四界面&quot;,&quot;For testing only: Step 4 interface has been manually restored&quot;,true));</span><br><span class=\"hljs-string\">\t\tdownloadStepShow();</span><br><span class=\"hljs-string\">\t&#125;);</span><br><span class=\"hljs-string\">&#125;;</span><br><span class=\"hljs-string\"></span><br><span class=\"hljs-string\"></span><br><span class=\"hljs-string\"></span><br><span class=\"hljs-string\">&#125;)();</span><br><span class=\"hljs-string\">&lt;/script&gt;</span><br><span class=\"hljs-string\"></span><br><span class=\"hljs-string\"></span><br><span class=\"hljs-string\"></span><br><span class=\"hljs-string\"></span><br><span class=\"hljs-string\"></span><br><span class=\"hljs-string\">&lt;script&gt;</span><br><span class=\"hljs-string\">//===================================================</span><br><span class=\"hljs-string\">//================= ACME functions ==================</span><br><span class=\"hljs-string\">//===================================================</span><br><span class=\"hljs-string\">//LICENSE: GPL-3.0, https://github.com/xiangyuecn/ACME-HTML-Web-Browser-Client</span><br><span class=\"hljs-string\">(function()&#123;</span><br><span class=\"hljs-string\">&quot;use strict&quot;;</span><br><span class=\"hljs-string\"></span><br><span class=\"hljs-string\">/************** ACME client implementation **************/</span><br><span class=\"hljs-string\">//RFC8555: https://www.rfc-editor.org/rfc/rfc8555.html</span><br><span class=\"hljs-string\">window.ACME=&#123;</span><br><span class=\"hljs-string\">\tURL:&quot;&quot;</span><br><span class=\"hljs-string\">\t,SyncID:0</span><br><span class=\"hljs-string\">\t,DirData:&#123;&#125;</span><br><span class=\"hljs-string\">\t,Directory:function(True,False)&#123;</span><br><span class=\"hljs-string\">\t\tvar id=++ACME.SyncID;</span><br><span class=\"hljs-string\">\t\tvar url=ACME.URL,dirStoreKey=&quot;ACME_HTML_cache_&quot;+url;</span><br><span class=\"hljs-string\">\t\tvar ok=function(cache)&#123;</span><br><span class=\"hljs-string\">\t\t\tvar data=cache.data;</span><br><span class=\"hljs-string\">\t\t\tif(id!=ACME.SyncID) return False(&quot;cancel&quot;);</span><br><span class=\"hljs-string\">\t\t\tvar meta=data.meta||&#123;&#125;;</span><br><span class=\"hljs-string\">\t\t\tif(!data.newOrder)</span><br><span class=\"hljs-string\">\t\t\t\treturn False(&quot;Not newOrder found: &quot;+FormatText(JSON.stringify(data)));</span><br><span class=\"hljs-string\">\t\t\tACME.DirData=data;</span><br><span class=\"hljs-string\">\t\t\tACME.StepData.termsURL=meta.termsOfService;</span><br><span class=\"hljs-string\">\t\t\tACME.StepData.needEAB=!!meta.externalAccountRequired;</span><br><span class=\"hljs-string\">\t\t\tvar saveCache=function()&#123;</span><br><span class=\"hljs-string\">\t\t\t\tlocalStorage[dirStoreKey]=JSON.stringify(cache);</span><br><span class=\"hljs-string\">\t\t\t&#125;;</span><br><span class=\"hljs-string\">\t\t\tsaveCache();</span><br><span class=\"hljs-string\">\t\t\tTrue(cache,saveCache);</span><br><span class=\"hljs-string\">\t\t&#125;;</span><br><span class=\"hljs-string\">\t\tvar cache=JSON.parse(localStorage[dirStoreKey]||&#x27;&#123;&#125;&#x27;);//先读缓存</span><br><span class=\"hljs-string\">\t\tif(cache.time &amp;&amp; Date.now()-cache.time&lt;24*60*60*1000)&#123;</span><br><span class=\"hljs-string\">\t\t\treturn ok(cache);</span><br><span class=\"hljs-string\">\t\t&#125;</span><br><span class=\"hljs-string\">\t\trequest(url,null,function(data)&#123;</span><br><span class=\"hljs-string\">\t\t\tok(&#123;data:data,time:Date.now()&#125;);</span><br><span class=\"hljs-string\">\t\t&#125;,False);</span><br><span class=\"hljs-string\">\t&#125;</span><br><span class=\"hljs-string\">\t</span><br><span class=\"hljs-string\">\t,StepData:&#123;&#125;</span><br><span class=\"hljs-string\">\t,ChallName:function(chall)&#123; //验证类型名称</span><br><span class=\"hljs-string\">\t\tif(chall.type==&quot;dns-01&quot;)&#123; // https://letsencrypt.org/docs/challenge-types/</span><br><span class=\"hljs-string\">\t\t\treturn Lang(&quot;DNS验证&quot;,&quot;DNS Verify&quot;);</span><br><span class=\"hljs-string\">\t\t&#125;else if(chall.type==&quot;http-01&quot;)&#123;</span><br><span class=\"hljs-string\">\t\t\treturn Lang(&quot;文件URL验证&quot;,&quot;File URL Verify&quot;);</span><br><span class=\"hljs-string\">\t\t&#125; // tls-alpn-01 https://www.rfc-editor.org/rfc/rfc8737</span><br><span class=\"hljs-string\">\t\treturn chall.type.toUpperCase();</span><br><span class=\"hljs-string\">\t&#125;</span><br><span class=\"hljs-string\">\t,ChallSort:function(chall)&#123; //验证类型排序</span><br><span class=\"hljs-string\">\t\tif(chall.type==&quot;dns-01&quot;) return 1+&quot;_&quot;+chall.type;</span><br><span class=\"hljs-string\">\t\telse if(chall.type==&quot;http-01&quot;) return 2+&quot;_&quot;+chall.type;</span><br><span class=\"hljs-string\">\t\treturn 3+&quot;_&quot;+chall.type;</span><br><span class=\"hljs-string\">\t&#125;</span><br><span class=\"hljs-string\">\t// 生成JSON Web Signature(JWS)，用账户私钥签名</span><br><span class=\"hljs-string\">\t,GetJwsA:async function(Protected, Payload)&#123;</span><br><span class=\"hljs-string\">\t\tvar key=ACME.StepData.config.accountKey;</span><br><span class=\"hljs-string\">\t\tvar alg=&quot;ES256&quot;,algorithm=&#123;name:&quot;ECDSA&quot;, hash:&quot;SHA-256&quot;&#125;;</span><br><span class=\"hljs-string\">\t\tif(key.type==&quot;RSA&quot;)&#123;</span><br><span class=\"hljs-string\">\t\t\talg=&quot;RS256&quot;;algorithm=&#123;name:&quot;RSASSA-PKCS1-v1_5&quot;&#125;</span><br><span class=\"hljs-string\">\t\t&#125;</span><br><span class=\"hljs-string\">\t\tProtected.alg=alg;</span><br><span class=\"hljs-string\">\t\tvar rtv=&#123;</span><br><span class=\"hljs-string\">\t\t\t&quot;protected&quot;:Json2UrlB64(Protected)</span><br><span class=\"hljs-string\">\t\t\t, payload:Payload?Json2UrlB64(Payload):&quot;&quot;</span><br><span class=\"hljs-string\">\t\t&#125;;</span><br><span class=\"hljs-string\">\t\tvar data=Str2Bytes(rtv[&quot;protected&quot;]+&quot;.&quot;+rtv.payload);</span><br><span class=\"hljs-string\">\t\tvar sign=await crypto.subtle.sign(algorithm, key.key, data);</span><br><span class=\"hljs-string\">\t\trtv.signature=Bytes2UrlB64(sign);</span><br><span class=\"hljs-string\">\t\treturn rtv;</span><br><span class=\"hljs-string\">\t&#125;</span><br><span class=\"hljs-string\">\t// 获得随机数Nonce</span><br><span class=\"hljs-string\">\t,GetNonceA:function(useNew)&#123;</span><br><span class=\"hljs-string\">\t\treturn new Promise(function(resolve,reject)&#123;</span><br><span class=\"hljs-string\">\t\t\tACME.GetNonce(useNew,function(val)&#123;</span><br><span class=\"hljs-string\">\t\t\t\tresolve(val);</span><br><span class=\"hljs-string\">\t\t\t&#125;,function(err)&#123;</span><br><span class=\"hljs-string\">\t\t\t\treject(new Error(err));</span><br><span class=\"hljs-string\">\t\t\t&#125;);</span><br><span class=\"hljs-string\">\t\t&#125;);</span><br><span class=\"hljs-string\">\t&#125;</span><br><span class=\"hljs-string\">\t,GetNonce:function(useNew, True, False)&#123;</span><br><span class=\"hljs-string\">\t\tvar old=ACME.PrevNonce;ACME.PrevNonce=&quot;&quot;;</span><br><span class=\"hljs-string\">\t\tif(!useNew &amp;&amp; old) return True(old);//使用上次调用返回的值</span><br><span class=\"hljs-string\">\t\trequest(&#123;url:ACME.DirData.newNonce</span><br><span class=\"hljs-string\">\t\t\t,method:&quot;HEAD&quot;,response:false</span><br><span class=\"hljs-string\">\t\t&#125;, null, function(data,xhr)&#123;</span><br><span class=\"hljs-string\">\t\t\tACME.PrevNonce=&quot;&quot;;</span><br><span class=\"hljs-string\">\t\t\t//跨域无解 Chrome ZeroSSL: Refused to get unsafe header &quot;Replay-Nonce&quot; , 需要 Access-Control-Expose-Headers: Link, Replay-Nonce, Location</span><br><span class=\"hljs-string\">\t\t\tvar val=xhr.getResponseHeader(&quot;Replay-Nonce&quot;);</span><br><span class=\"hljs-string\">\t\t\tif(!val)&#123;</span><br><span class=\"hljs-string\">\t\t\t\tFalse(&quot;GetNonce: &quot;+Lang(&#x27;此ACME服务对浏览器访问支持太差，无法跨域获取Replay-Nonce响应头。&#x27;,&#x27;This ACME service has too poor browser access support to get the Replay-Nonce response header across domains.&#x27;), true);</span><br><span class=\"hljs-string\">\t\t\t\treturn;</span><br><span class=\"hljs-string\">\t\t\t&#125;</span><br><span class=\"hljs-string\">\t\t\tTrue(val);</span><br><span class=\"hljs-string\">\t\t&#125;,function(err)&#123;</span><br><span class=\"hljs-string\">\t\t\tFalse(&quot;GetNonce: &quot;+err);</span><br><span class=\"hljs-string\">\t\t&#125;);</span><br><span class=\"hljs-string\">\t&#125;</span><br><span class=\"hljs-string\">\t//测试账户接口的跨域访问</span><br><span class=\"hljs-string\">\t,TestAccountCORS:function(True,False)&#123;</span><br><span class=\"hljs-string\">\t\trequest(&#123;url:ACME.DirData.newAccount</span><br><span class=\"hljs-string\">\t\t\t,method:&quot;POST&quot;,response:false,nocheck:true</span><br><span class=\"hljs-string\">\t\t&#125;, &#123;&#125;, function(data,xhr)&#123;</span><br><span class=\"hljs-string\">\t\t\tif(xhr.status&gt;0)&#123;</span><br><span class=\"hljs-string\">\t\t\t\tTrue();</span><br><span class=\"hljs-string\">\t\t\t&#125;else&#123;</span><br><span class=\"hljs-string\">\t\t\t\tFalse(&quot;[&quot;+xhr.status+&quot;]&quot;,true);</span><br><span class=\"hljs-string\">\t\t\t&#125;</span><br><span class=\"hljs-string\">\t\t&#125;,function(err)&#123;</span><br><span class=\"hljs-string\">\t\t\tFalse(err);</span><br><span class=\"hljs-string\">\t\t&#125;);</span><br><span class=\"hljs-string\">\t&#125;</span><br><span class=\"hljs-string\">\t</span><br><span class=\"hljs-string\">\t//账户接口调用</span><br><span class=\"hljs-string\">\t,StepAccount:async function(True,False)&#123;</span><br><span class=\"hljs-string\">\t\tvar id=++ACME.SyncID;</span><br><span class=\"hljs-string\">\t\tvar tag=&quot;ACME.StepAccount&quot;;</span><br><span class=\"hljs-string\">\t\tCLog(tag, 0, &quot;==========Account Start==========&quot;);</span><br><span class=\"hljs-string\">\t\tvar Err=&quot;&quot;;</span><br><span class=\"hljs-string\">\t\ttry&#123;</span><br><span class=\"hljs-string\">\t\t\tawait ACME._StepAccountA(id,tag);</span><br><span class=\"hljs-string\">\t\t&#125;catch(e)&#123;</span><br><span class=\"hljs-string\">\t\t\tErr=e.message||&quot;-&quot;;</span><br><span class=\"hljs-string\">\t\t\tCLog(tag, 1, Err, e);</span><br><span class=\"hljs-string\">\t\t&#125;</span><br><span class=\"hljs-string\">\t\tCLog(tag, 0, &quot;==========Account End==========&quot;);</span><br><span class=\"hljs-string\">\t\tif(Err) False(Err)</span><br><span class=\"hljs-string\">\t\telse True();</span><br><span class=\"hljs-string\">\t&#125; , _StepAccountA:async function(id,tag)&#123;</span><br><span class=\"hljs-string\">\t\tvar url=ACME.DirData.newAccount,config=ACME.StepData.config;</span><br><span class=\"hljs-string\">\t\tvar accountData=&#123;</span><br><span class=\"hljs-string\">\t\t\tcontact:[&quot;mailto:&quot;+config.email]</span><br><span class=\"hljs-string\">\t\t\t,termsOfServiceAgreed:true</span><br><span class=\"hljs-string\">\t\t&#125;;</span><br><span class=\"hljs-string\">\t\t</span><br><span class=\"hljs-string\">\t\t//externalAccountRequired https://github.com/fszlin/certes/blob/08bf850bbed9e026c718f56f1bcc454afafb4f92/src/Certes/Acme/AccountContext.cs</span><br><span class=\"hljs-string\">\t\tif(ACME.StepData.needEAB)&#123;</span><br><span class=\"hljs-string\">\t\t\tvar eab=&#123;</span><br><span class=\"hljs-string\">\t\t\t\t&quot;protected&quot;:Json2UrlB64(&#123; alg:&quot;HS256&quot;, kid:config.eabKid, url:url &#125;)</span><br><span class=\"hljs-string\">\t\t\t\t,payload:Json2UrlB64(X509.PublicKeyJwk(config.accountKey))</span><br><span class=\"hljs-string\">\t\t\t&#125;;</span><br><span class=\"hljs-string\">\t\t\tvar key=await crypto.subtle.importKey(&quot;raw&quot;, UrlB642Bytes(config.eabKey)</span><br><span class=\"hljs-string\">\t\t\t\t,&#123;name:&quot;HMAC&quot;,hash:&quot;SHA-256&quot;&#125;, true, [&quot;sign&quot;]);</span><br><span class=\"hljs-string\">\t\t\tvar data=Str2Bytes(eab[&quot;protected&quot;]+&quot;.&quot;+eab.payload);</span><br><span class=\"hljs-string\">\t\t\tvar sign=await crypto.subtle.sign(&quot;HMAC&quot;, key, data);</span><br><span class=\"hljs-string\">\t\t\teab.signature=Bytes2UrlB64(sign);</span><br><span class=\"hljs-string\">\t\t\taccountData.externalAccountBinding=eab;</span><br><span class=\"hljs-string\">\t\t\tCLog(tag,0 ,&quot;externalAccountBinding&quot;, eab);</span><br><span class=\"hljs-string\">\t\t&#125;;</span><br><span class=\"hljs-string\">\t\t</span><br><span class=\"hljs-string\">\t\t//组装成jws，请求接口</span><br><span class=\"hljs-string\">\t\tvar sendData=await ACME.GetJwsA(&#123;</span><br><span class=\"hljs-string\">\t\t\tjwk: X509.PublicKeyJwk(config.accountKey)</span><br><span class=\"hljs-string\">\t\t\t,nonce: await ACME.GetNonceA(true)</span><br><span class=\"hljs-string\">\t\t\t,url: url</span><br><span class=\"hljs-string\">\t\t&#125;,accountData);</span><br><span class=\"hljs-string\">\t\tvar resp=await requestA(url, sendData);</span><br><span class=\"hljs-string\">\t\tif(id!=ACME.SyncID) throw new Error(&quot;cancel&quot;);</span><br><span class=\"hljs-string\">\t\tACME.StepData.account=&#123;</span><br><span class=\"hljs-string\">\t\t\turl:xhrHeader(resp.xhr, &quot;Location&quot;)</span><br><span class=\"hljs-string\">\t\t\t,data:resp.data</span><br><span class=\"hljs-string\">\t\t&#125;;</span><br><span class=\"hljs-string\">\t\tCLog(tag,0,&quot;Account OK&quot;,ACME.StepData.account);</span><br><span class=\"hljs-string\">\t&#125;</span><br><span class=\"hljs-string\">\t</span><br><span class=\"hljs-string\">\t//订单接口调用</span><br><span class=\"hljs-string\">\t,StepOrder:async function(Progress,True,False)&#123;</span><br><span class=\"hljs-string\">\t\tvar id=++ACME.SyncID;</span><br><span class=\"hljs-string\">\t\tvar tag=&quot;ACME.StepOrder&quot;;</span><br><span class=\"hljs-string\">\t\tCLog(tag, 0, &quot;==========Order Start==========&quot;);</span><br><span class=\"hljs-string\">\t\tvar Err=&quot;&quot;;</span><br><span class=\"hljs-string\">\t\ttry&#123;</span><br><span class=\"hljs-string\">\t\t\tawait ACME._StepOrderA(Progress,id,tag);</span><br><span class=\"hljs-string\">\t\t&#125;catch(e)&#123;</span><br><span class=\"hljs-string\">\t\t\tErr=e.message||&quot;-&quot;;</span><br><span class=\"hljs-string\">\t\t\tCLog(tag, 1, Err, e);</span><br><span class=\"hljs-string\">\t\t&#125;</span><br><span class=\"hljs-string\">\t\tCLog(tag, 0, &quot;==========Order End==========&quot;);</span><br><span class=\"hljs-string\">\t\tif(Err) False(Err)</span><br><span class=\"hljs-string\">\t\telse True();</span><br><span class=\"hljs-string\">\t&#125; , _StepOrderA:async function(Progress,id,tag)&#123;</span><br><span class=\"hljs-string\">\t\tvar url=ACME.DirData.newOrder,config=ACME.StepData.config;</span><br><span class=\"hljs-string\">\t\tvar dnsArr=[];</span><br><span class=\"hljs-string\">\t\tfor(var i=0;i&lt;config.domains.length;i++)&#123;</span><br><span class=\"hljs-string\">\t\t\tdnsArr.push(&#123; type:&quot;dns&quot;, value:config.domains[i] &#125;);</span><br><span class=\"hljs-string\">\t\t&#125;</span><br><span class=\"hljs-string\">\t\tvar orderData=&#123;</span><br><span class=\"hljs-string\">\t\t\tidentifiers:dnsArr</span><br><span class=\"hljs-string\">\t\t&#125;;</span><br><span class=\"hljs-string\">\t\t</span><br><span class=\"hljs-string\">\t\tProgress(&quot;newOrder...&quot;);</span><br><span class=\"hljs-string\">\t\t//组装成jws，请求接口</span><br><span class=\"hljs-string\">\t\tvar sendData=await ACME.GetJwsA(&#123;</span><br><span class=\"hljs-string\">\t\t\tkid: ACME.StepData.account.url</span><br><span class=\"hljs-string\">\t\t\t,nonce: await ACME.GetNonceA()</span><br><span class=\"hljs-string\">\t\t\t,url: url</span><br><span class=\"hljs-string\">\t\t&#125;,orderData);</span><br><span class=\"hljs-string\">\t\tvar resp=await requestA(url, sendData);</span><br><span class=\"hljs-string\">\t\tif(id!=ACME.SyncID) throw new Error(&quot;cancel&quot;);</span><br><span class=\"hljs-string\">\t\tresp.data.orderUrl=xhrHeader(resp.xhr, &quot;Location&quot;);</span><br><span class=\"hljs-string\">\t\tACME.StepData.order=resp.data;</span><br><span class=\"hljs-string\">\t\tCLog(tag,0,&quot;Order OK&quot;,ACME.StepData.order);</span><br><span class=\"hljs-string\">\t\t</span><br><span class=\"hljs-string\">\t\t//准备Key Authorizations需要的参数 参考：rfc8555 8.1</span><br><span class=\"hljs-string\">\t\tvar jwkStr=JSON.stringify(X509.PublicKeyJwk(config.accountKey));</span><br><span class=\"hljs-string\">\t\tvar thumbprint=await crypto.subtle.digest(&#123;name: &quot;SHA-256&quot;&#125;, Str2Bytes(jwkStr));</span><br><span class=\"hljs-string\">\t\tthumbprint=Bytes2UrlB64(thumbprint);</span><br><span class=\"hljs-string\">\t\t</span><br><span class=\"hljs-string\">\t\t//读取所有的验证信息</span><br><span class=\"hljs-string\">\t\tvar idfs=ACME.StepData.order.identifiers,bad=0;</span><br><span class=\"hljs-string\">\t\tvar auths=ACME.StepData.order.authorizations;</span><br><span class=\"hljs-string\">\t\tfor(var i=0;i&lt;idfs.length;i++)&#123;</span><br><span class=\"hljs-string\">\t\t\tif(config.domains.indexOf(idfs[i].value)==-1) bad=1;</span><br><span class=\"hljs-string\">\t\t&#125;</span><br><span class=\"hljs-string\">\t\tif(bad || idfs.length!=auths.length || idfs.length!=config.domains.length)</span><br><span class=\"hljs-string\">\t\t\tthrow new Error(Lang(&quot;创建的订单中的域名和配置的不一致&quot;,&quot;The domain name in the created order is inconsistent with the configuration&quot;));</span><br><span class=\"hljs-string\">\t\tif(id!=ACME.SyncID) throw new Error(&quot;cancel&quot;);</span><br><span class=\"hljs-string\">\t\tACME.StepData.auths=&#123;&#125;;</span><br><span class=\"hljs-string\">\t\tfor(var i=0;i&lt;auths.length;i++)&#123;</span><br><span class=\"hljs-string\">\t\t\tProgress(&quot;auth(&quot;+(i+1)+&quot;/&quot;+auths.length+&quot;)...&quot;);</span><br><span class=\"hljs-string\">\t\t\tvar url=auths[i];</span><br><span class=\"hljs-string\">\t\t\tvar sendData=await ACME.GetJwsA(&#123;</span><br><span class=\"hljs-string\">\t\t\t\tkid: ACME.StepData.account.url</span><br><span class=\"hljs-string\">\t\t\t\t,nonce: await ACME.GetNonceA()</span><br><span class=\"hljs-string\">\t\t\t\t,url: url</span><br><span class=\"hljs-string\">\t\t\t&#125;,&quot;&quot;);</span><br><span class=\"hljs-string\">\t\t\tvar resp=await requestA(url, sendData);</span><br><span class=\"hljs-string\">\t\t\tif(id!=ACME.SyncID) throw new Error(&quot;cancel&quot;);</span><br><span class=\"hljs-string\">\t\t\tresp.data.domain=idfs[i].value;</span><br><span class=\"hljs-string\">\t\t\tresp.data.authUrl=url;</span><br><span class=\"hljs-string\">\t\t\tACME.StepData.auths[idfs[i].value]=resp.data;</span><br><span class=\"hljs-string\">\t\t\t</span><br><span class=\"hljs-string\">\t\t\t//生成Key Authorizations</span><br><span class=\"hljs-string\">\t\t\tvar challs=resp.data.challenges;</span><br><span class=\"hljs-string\">\t\t\tfor(var i2=0;i2&lt;challs.length;i2++)&#123;</span><br><span class=\"hljs-string\">\t\t\t\tvar chall=challs[i2];</span><br><span class=\"hljs-string\">\t\t\t\tchall.authTxt=chall.token+&quot;.&quot;+thumbprint;</span><br><span class=\"hljs-string\">\t\t\t\tvar sha=await crypto.subtle.digest(&#123;name: &quot;SHA-256&quot;&#125;</span><br><span class=\"hljs-string\">\t\t\t\t\t\t\t\t, Str2Bytes(chall.authTxt));</span><br><span class=\"hljs-string\">\t\t\t\tif(id!=ACME.SyncID) throw new Error(&quot;cancel&quot;);</span><br><span class=\"hljs-string\">\t\t\t\tchall.authTxtSHA256=Bytes2UrlB64(sha);</span><br><span class=\"hljs-string\">\t\t\t\tchall.authTxtSHA256Base64=Bytes2Base64(sha);</span><br><span class=\"hljs-string\">\t\t\t&#125;</span><br><span class=\"hljs-string\">\t\t&#125;</span><br><span class=\"hljs-string\">\t\tCLog(tag,0,&quot;Order Authorizations&quot;,ACME.StepData.auths);</span><br><span class=\"hljs-string\">\t&#125;</span><br><span class=\"hljs-string\">\t</span><br><span class=\"hljs-string\">\t//验证一个域名</span><br><span class=\"hljs-string\">\t,StepVerifyAuthItem:async function(authItem, challIdx, True,False)&#123;</span><br><span class=\"hljs-string\">\t\tvar tag=&quot;ACME.verify[&quot;+authItem.challenges[challIdx].type+&quot;]:&quot;+authItem.domain;</span><br><span class=\"hljs-string\">\t\tvar Err=&quot;&quot;;</span><br><span class=\"hljs-string\">\t\ttry&#123;</span><br><span class=\"hljs-string\">\t\t\tawait ACME._StepVerifyAuthItemA(authItem,challIdx, ACME.SyncID,tag, True,False);</span><br><span class=\"hljs-string\">\t\t&#125;catch(e)&#123;</span><br><span class=\"hljs-string\">\t\t\tErr=e.message||&quot;-&quot;;</span><br><span class=\"hljs-string\">\t\t\tCLog(tag, 1, Err, e);</span><br><span class=\"hljs-string\">\t\t&#125;</span><br><span class=\"hljs-string\">\t\tif(Err) True(false, 1000, Err); //重试</span><br><span class=\"hljs-string\">\t&#125; , _StepVerifyAuthItemA:async function(authItem,challIdx, id,tag, True,False)&#123;</span><br><span class=\"hljs-string\">\t\t//先通知要用的验证方式，反复发送只要成功一次即可，不管结果</span><br><span class=\"hljs-string\">\t\tvar chall=authItem.challenges[challIdx];</span><br><span class=\"hljs-string\">\t\tif(!chall.isSend)&#123;</span><br><span class=\"hljs-string\">\t\t\tvar url=chall.url;</span><br><span class=\"hljs-string\">\t\t\tvar sendData=await ACME.GetJwsA(&#123;</span><br><span class=\"hljs-string\">\t\t\t\tkid: ACME.StepData.account.url</span><br><span class=\"hljs-string\">\t\t\t\t,nonce: await ACME.GetNonceA()</span><br><span class=\"hljs-string\">\t\t\t\t,url: url</span><br><span class=\"hljs-string\">\t\t\t&#125;,&#123;&#125;);</span><br><span class=\"hljs-string\">\t\t\tvar resp=await requestA(&#123;url:url,nocheck:true&#125;, sendData);</span><br><span class=\"hljs-string\">\t\t\tvar status=resp.xhr.status;</span><br><span class=\"hljs-string\">\t\t\tif(status&gt;=200&amp;&amp;status&lt;300)</span><br><span class=\"hljs-string\">\t\t\t\tchall.isSend=true;</span><br><span class=\"hljs-string\">\t\t&#125;</span><br><span class=\"hljs-string\">\t\t</span><br><span class=\"hljs-string\">\t\t//重新查询一下状态</span><br><span class=\"hljs-string\">\t\tvar url=authItem.authUrl;</span><br><span class=\"hljs-string\">\t\tvar sendData=await ACME.GetJwsA(&#123;</span><br><span class=\"hljs-string\">\t\t\tkid: ACME.StepData.account.url</span><br><span class=\"hljs-string\">\t\t\t,nonce: await ACME.GetNonceA()</span><br><span class=\"hljs-string\">\t\t\t,url: url</span><br><span class=\"hljs-string\">\t\t&#125;,&quot;&quot;);</span><br><span class=\"hljs-string\">\t\tvar resp=await requestA(url, sendData);</span><br><span class=\"hljs-string\">\t\tvar data=resp.data;</span><br><span class=\"hljs-string\">\t\tif(data.status==&quot;pending&quot;)&#123;</span><br><span class=\"hljs-string\">\t\t\tCLog(tag, 0, &quot;pending...&quot;);</span><br><span class=\"hljs-string\">\t\t\treturn True(false, 1000, &quot;pending...&quot;);</span><br><span class=\"hljs-string\">\t\t&#125;</span><br><span class=\"hljs-string\">\t\tif(data.status==&quot;valid&quot;)&#123;</span><br><span class=\"hljs-string\">\t\t\tCLog(tag, 0, &quot;valid OK&quot;);</span><br><span class=\"hljs-string\">\t\t\treturn True(true);</span><br><span class=\"hljs-string\">\t\t&#125;</span><br><span class=\"hljs-string\">\t\tCLog(tag, 1, &quot;Fail&quot;, data);</span><br><span class=\"hljs-string\">\t\treturn False(data.status+&quot;: &quot;+FormatText(JSON.stringify(data)));</span><br><span class=\"hljs-string\">\t&#125;</span><br><span class=\"hljs-string\">\t</span><br><span class=\"hljs-string\">\t//完成订单，生成证书</span><br><span class=\"hljs-string\">\t,StepFinalizeOrder:async function(Progress,True,False)&#123;</span><br><span class=\"hljs-string\">\t\tvar id=++ACME.SyncID;</span><br><span class=\"hljs-string\">\t\tvar tag=&quot;ACME.StepFinalizeOrder&quot;;</span><br><span class=\"hljs-string\">\t\tCLog(tag, 0, &quot;==========Finalize Start==========&quot;);</span><br><span class=\"hljs-string\">\t\tvar Err=&quot;&quot;;</span><br><span class=\"hljs-string\">\t\ttry&#123;</span><br><span class=\"hljs-string\">\t\t\tawait ACME._StepFinalizeOrderA(Progress,id,tag);</span><br><span class=\"hljs-string\">\t\t&#125;catch(e)&#123;</span><br><span class=\"hljs-string\">\t\t\tErr=e.message||&quot;-&quot;;</span><br><span class=\"hljs-string\">\t\t\tCLog(tag, 1, Err, e);</span><br><span class=\"hljs-string\">\t\t&#125;</span><br><span class=\"hljs-string\">\t\tCLog(tag, 0, &quot;==========Finalize End==========&quot;);</span><br><span class=\"hljs-string\">\t\tif(Err) False(Err)</span><br><span class=\"hljs-string\">\t\telse True();</span><br><span class=\"hljs-string\">\t&#125; , _StepFinalizeOrderA:async function(Progress,id,tag)&#123;</span><br><span class=\"hljs-string\">\t\tvar order=ACME.StepData.order,config=ACME.StepData.config,domains=config.domains;</span><br><span class=\"hljs-string\">\t\t</span><br><span class=\"hljs-string\">\t\t//先请求finalize</span><br><span class=\"hljs-string\">\t\tif(!order.finalizeIsSend)&#123;</span><br><span class=\"hljs-string\">\t\t\tProgress(&quot;finalize...&quot;);</span><br><span class=\"hljs-string\">\t\t\t//生成csr，第一个域名做CN</span><br><span class=\"hljs-string\">\t\t\tvar csr=await new Promise(function(resolve,reject)&#123;</span><br><span class=\"hljs-string\">\t\t\t\tX509.CreateCSR(config.privateKey, domains[0], domains, function(csr)&#123;</span><br><span class=\"hljs-string\">\t\t\t\t\tresolve(csr);</span><br><span class=\"hljs-string\">\t\t\t\t&#125;,function(err)&#123;</span><br><span class=\"hljs-string\">\t\t\t\t\treject(new Error(err));</span><br><span class=\"hljs-string\">\t\t\t\t&#125;);</span><br><span class=\"hljs-string\">\t\t\t&#125;);</span><br><span class=\"hljs-string\">\t\t\torder.orderCSR=csr;</span><br><span class=\"hljs-string\">\t\t\tCLog(tag,0,&quot;CSR\\\\n&quot;+csr);</span><br><span class=\"hljs-string\">\t\t\tcsr=Bytes2UrlB64(ASN1.PEM2Bytes(csr));</span><br><span class=\"hljs-string\">\t\t\t</span><br><span class=\"hljs-string\">\t\t\tvar url=order.finalize;</span><br><span class=\"hljs-string\">\t\t\t//组装成jws，请求接口</span><br><span class=\"hljs-string\">\t\t\tvar sendData=await ACME.GetJwsA(&#123;</span><br><span class=\"hljs-string\">\t\t\t\tkid: ACME.StepData.account.url</span><br><span class=\"hljs-string\">\t\t\t\t,nonce: await ACME.GetNonceA()</span><br><span class=\"hljs-string\">\t\t\t\t,url: url</span><br><span class=\"hljs-string\">\t\t\t&#125;,&#123; csr:csr &#125;);</span><br><span class=\"hljs-string\">\t\t\tvar resp=await requestA(url, sendData);</span><br><span class=\"hljs-string\">\t\t\tif(id!=ACME.SyncID) throw new Error(&quot;cancel&quot;);</span><br><span class=\"hljs-string\">\t\t\tCLog(tag,0,&quot;finalize result&quot;,resp.data);</span><br><span class=\"hljs-string\">\t\t\torder.finalizeIsSend=true;</span><br><span class=\"hljs-string\">\t\t&#125;</span><br><span class=\"hljs-string\">\t\t</span><br><span class=\"hljs-string\">\t\t//轮询订单状态，60秒超时</span><br><span class=\"hljs-string\">\t\tvar t1=Date.now(),tryCount=0;</span><br><span class=\"hljs-string\">\t\twhile(!order.checkOK &amp;&amp; Date.now()-t1&lt;60*1000)&#123;</span><br><span class=\"hljs-string\">\t\t\tif(id!=ACME.SyncID) throw new Error(&quot;cancel&quot;);</span><br><span class=\"hljs-string\">\t\t\ttryCount++;</span><br><span class=\"hljs-string\">\t\t\tProgress(&quot;check retry:&quot;+tryCount+&quot;...&quot;);</span><br><span class=\"hljs-string\">\t\t\tvar url=order.orderUrl;</span><br><span class=\"hljs-string\">\t\t\t//组装成jws，请求接口</span><br><span class=\"hljs-string\">\t\t\tvar sendData=await ACME.GetJwsA(&#123;</span><br><span class=\"hljs-string\">\t\t\t\tkid: ACME.StepData.account.url</span><br><span class=\"hljs-string\">\t\t\t\t,nonce: await ACME.GetNonceA()</span><br><span class=\"hljs-string\">\t\t\t\t,url: url</span><br><span class=\"hljs-string\">\t\t\t&#125;,&quot;&quot;);</span><br><span class=\"hljs-string\">\t\t\tvar resp=await requestA(url, sendData);</span><br><span class=\"hljs-string\">\t\t\tif(id!=ACME.SyncID) throw new Error(&quot;cancel&quot;);</span><br><span class=\"hljs-string\">\t\t\tvar data=resp.data;</span><br><span class=\"hljs-string\">\t\t\tif(data.status==&quot;valid&quot;)&#123;</span><br><span class=\"hljs-string\">\t\t\t\torder.checkOK=true;</span><br><span class=\"hljs-string\">\t\t\t\torder.certUrl=data.certificate;</span><br><span class=\"hljs-string\">\t\t\t\tCLog(tag,0,&quot;check OK&quot;,data);</span><br><span class=\"hljs-string\">\t\t\t\tbreak;</span><br><span class=\"hljs-string\">\t\t\t&#125;else if(data.status==&quot;invalid&quot;)&#123;</span><br><span class=\"hljs-string\">\t\t\t\tCLog(tag,1,&quot;check Fail&quot;,data);</span><br><span class=\"hljs-string\">\t\t\t\tthrow new Error(data.status+&quot;: &quot;+FormatText(JSON.stringify(data)));</span><br><span class=\"hljs-string\">\t\t\t&#125;else&#123;</span><br><span class=\"hljs-string\">\t\t\t\tCLog(tag,0,data.status+&quot;... wait 1s&quot;,data);</span><br><span class=\"hljs-string\">\t\t\t\tawait new Promise(function(s)&#123; setTimeout(s, 1000) &#125;);</span><br><span class=\"hljs-string\">\t\t\t&#125;</span><br><span class=\"hljs-string\">\t\t&#125;</span><br><span class=\"hljs-string\">\t\t</span><br><span class=\"hljs-string\">\t\t//下载证书</span><br><span class=\"hljs-string\">\t\tif(!order.downloadPEM)&#123;</span><br><span class=\"hljs-string\">\t\t\tProgress(&quot;download...&quot;);</span><br><span class=\"hljs-string\">\t\t\tvar url=order.certUrl;</span><br><span class=\"hljs-string\">\t\t\t//组装成jws，请求接口</span><br><span class=\"hljs-string\">\t\t\tvar sendData=await ACME.GetJwsA(&#123;</span><br><span class=\"hljs-string\">\t\t\t\tkid: ACME.StepData.account.url</span><br><span class=\"hljs-string\">\t\t\t\t,nonce: await ACME.GetNonceA()</span><br><span class=\"hljs-string\">\t\t\t\t,url: url</span><br><span class=\"hljs-string\">\t\t\t&#125;,&quot;&quot;);</span><br><span class=\"hljs-string\">\t\t\tvar resp=await requestA(&#123;url:url,response:false&#125;, sendData);</span><br><span class=\"hljs-string\">\t\t\tif(id!=ACME.SyncID) throw new Error(&quot;cancel&quot;);</span><br><span class=\"hljs-string\">\t\t\tvar pem=resp.xhr.responseText;</span><br><span class=\"hljs-string\">\t\t\torder.downloadPEM=pem;</span><br><span class=\"hljs-string\">\t\t\tCLog(tag,0,&quot;download OK\\\\n&quot;+pem);</span><br><span class=\"hljs-string\">\t\t&#125;</span><br><span class=\"hljs-string\">\t&#125;</span><br><span class=\"hljs-string\">&#125;;</span><br><span class=\"hljs-string\"></span><br><span class=\"hljs-string\"></span><br><span class=\"hljs-string\">// 读取响应头，读不到就当做跨域无法读取处理，自定义的头需要 Access-Control-Expose-Headers: Link, Replay-Nonce, Location</span><br><span class=\"hljs-string\">var xhrHeader=function(xhr,key)&#123;</span><br><span class=\"hljs-string\">\tvar val=xhr.getResponseHeader(key);</span><br><span class=\"hljs-string\">\tif(!val)&#123;</span><br><span class=\"hljs-string\">\t\tacmeReadDirGotoCORS();</span><br><span class=\"hljs-string\">\t\tthrow new Error(Lang(&quot;无法读取响应头&quot;+key+&quot;，可能是因为此ACME服务对跨域访问支持不良，请按第一步显示的提示操作。&quot;</span><br><span class=\"hljs-string\">\t\t\t,&quot;The response header &quot;+key+&quot; cannot be read, This may be because this ACME service does not support cross domain access, Please follow the prompt displayed in step 1.&quot;));</span><br><span class=\"hljs-string\">\t&#125;</span><br><span class=\"hljs-string\">\treturn val;</span><br><span class=\"hljs-string\">&#125;;</span><br><span class=\"hljs-string\"></span><br><span class=\"hljs-string\">// ajax</span><br><span class=\"hljs-string\">var requestA=function(url,post)&#123;</span><br><span class=\"hljs-string\">\treturn new Promise(function(resolve,reject)&#123;</span><br><span class=\"hljs-string\">\t\trequest(url,post,function(data,xhr)&#123;</span><br><span class=\"hljs-string\">\t\t\tresolve(&#123;data:data,xhr:xhr&#125;);</span><br><span class=\"hljs-string\">\t\t&#125;,function(err)&#123;</span><br><span class=\"hljs-string\">\t\t\treject(new Error(err));</span><br><span class=\"hljs-string\">\t\t&#125;);</span><br><span class=\"hljs-string\">\t&#125;);</span><br><span class=\"hljs-string\">&#125;</span><br><span class=\"hljs-string\">var request=function(url,post,True,False)&#123;</span><br><span class=\"hljs-string\">\tvar set=typeof(url)==&quot;string&quot;?&#123;url:url&#125;:url; url=set.url;</span><br><span class=\"hljs-string\">\tvar method=set.method||(post?&quot;POST&quot;:&quot;GET&quot;);</span><br><span class=\"hljs-string\">\tvar tag=&quot;ACME.Request&quot;; CLog(tag,4,&quot;send &quot;+method,set,post);</span><br><span class=\"hljs-string\">\t</span><br><span class=\"hljs-string\">\tvar xhr=new XMLHttpRequest();</span><br><span class=\"hljs-string\">\txhr.timeout=30000;</span><br><span class=\"hljs-string\">\txhr.open(method,url,true);</span><br><span class=\"hljs-string\">\txhr.onreadystatechange=function()&#123;</span><br><span class=\"hljs-string\">\t\tif(xhr.readyState==4)&#123;</span><br><span class=\"hljs-string\">\t\t\tACME.PrevNonce=xhr.getResponseHeader(&quot;Replay-Nonce&quot;)||&quot;&quot;;//将此值存起来</span><br><span class=\"hljs-string\">\t\t\t</span><br><span class=\"hljs-string\">\t\t\tvar isBad=xhr.status&lt;200 || xhr.status&gt;=300;</span><br><span class=\"hljs-string\">\t\t\tvar useResp=set.response==null || set.response;</span><br><span class=\"hljs-string\">\t\t\tvar err=&quot;&quot;,data,logObj;</span><br><span class=\"hljs-string\">\t\t\tif(useResp || isBad)&#123;</span><br><span class=\"hljs-string\">\t\t\t\tlogObj=xhr.responseText;</span><br><span class=\"hljs-string\">\t\t\t\ttry&#123;</span><br><span class=\"hljs-string\">\t\t\t\t\tdata=JSON.parse(logObj);</span><br><span class=\"hljs-string\">\t\t\t\t\tlogObj=data;</span><br><span class=\"hljs-string\">\t\t\t\t&#125;catch(e)&#123; &#125;;</span><br><span class=\"hljs-string\">\t\t\t&#125;</span><br><span class=\"hljs-string\">\t\t\tCLog(tag,4,&quot;send End&quot;,set, &#123;</span><br><span class=\"hljs-string\">\t\t\t\tstatus:xhr.status</span><br><span class=\"hljs-string\">\t\t\t\t,headers:xhr.getAllResponseHeaders()</span><br><span class=\"hljs-string\">\t\t\t&#125;, logObj);</span><br><span class=\"hljs-string\">\t\t\tif(set.nocheck || !isBad &amp;&amp; (!useResp || data))&#123;</span><br><span class=\"hljs-string\">\t\t\t\treturn True(data, xhr);</span><br><span class=\"hljs-string\">\t\t\t&#125;</span><br><span class=\"hljs-string\">\t\t\tFalse((isBad?&quot;[&quot;+xhr.status+&quot;]&quot;:&quot;&quot;)+FormatText(xhr.responseText), xhr.status);</span><br><span class=\"hljs-string\">\t\t&#125;</span><br><span class=\"hljs-string\">\t&#125;;</span><br><span class=\"hljs-string\">\tif(post)&#123;</span><br><span class=\"hljs-string\">\t\tif(typeof(post)==&quot;object&quot;)post=JSON.stringify(post);</span><br><span class=\"hljs-string\">\t\txhr.setRequestHeader(&quot;Content-Type&quot;,set.contentType||&quot;application/jose+json&quot;);</span><br><span class=\"hljs-string\">\t\txhr.send(post);</span><br><span class=\"hljs-string\">\t&#125;else&#123;</span><br><span class=\"hljs-string\">\t\txhr.send();</span><br><span class=\"hljs-string\">\t&#125;</span><br><span class=\"hljs-string\">&#125;;</span><br><span class=\"hljs-string\"></span><br><span class=\"hljs-string\">&#125;)();</span><br><span class=\"hljs-string\">&lt;/script&gt;</span><br><span class=\"hljs-string\"></span><br><span class=\"hljs-string\"></span><br><span class=\"hljs-string\"></span><br><span class=\"hljs-string\"></span><br><span class=\"hljs-string\"></span><br><span class=\"hljs-string\">&lt;script&gt;</span><br><span class=\"hljs-string\">//==================================================================</span><br><span class=\"hljs-string\">//================= RSA/ECC/X.509/ASN.1 functions ==================</span><br><span class=\"hljs-string\">//==================================================================</span><br><span class=\"hljs-string\">//LICENSE: GPL-3.0, https://github.com/xiangyuecn/ACME-HTML-Web-Browser-Client</span><br><span class=\"hljs-string\">(function()&#123;</span><br><span class=\"hljs-string\">&quot;use strict&quot;;</span><br><span class=\"hljs-string\"></span><br><span class=\"hljs-string\">window.X509=&#123;</span><br><span class=\"hljs-string\">\tDefaultType2_RSA:&quot;2048&quot; //默认创建RSA密钥位数</span><br><span class=\"hljs-string\">\t,DefaultType2_ECC:&quot;P-256&quot; //默认创建ECC曲线</span><br><span class=\"hljs-string\">\t,SupportECCType2:&#123; //支持的ECC曲线和常见名称</span><br><span class=\"hljs-string\">\t\t&quot;P-256&quot;:&quot;prime256v1&quot;, &quot;P-384&quot;:&quot;secp384r1&quot;, &quot;P-521&quot;:&quot;secp521r1&quot;</span><br><span class=\"hljs-string\">\t&#125;</span><br><span class=\"hljs-string\">\t,SupportECCType2Names:function()&#123; var str=[]; for(var k in X509.SupportECCType2)str.push(X509.SupportECCType2[k]); return str; &#125;</span><br><span class=\"hljs-string\">\t</span><br><span class=\"hljs-string\">\t//创建RSA/ECC密钥对 type2取值：type=RSA时为密钥位数数值，type=ECC时为支持的曲线（X509.SupportECCType2）</span><br><span class=\"hljs-string\">\t,KeyGenerate:function(type,type2,True,False)&#123;</span><br><span class=\"hljs-string\">\t\tvar algorithm=0;</span><br><span class=\"hljs-string\">\t\tif(type==&quot;RSA&quot;)&#123;</span><br><span class=\"hljs-string\">\t\t\talgorithm=&#123; publicExponent: new Uint8Array([1, 0, 1]) //E: AQAB</span><br><span class=\"hljs-string\">\t\t\t\t,name:&quot;RSASSA-PKCS1-v1_5&quot;, modulusLength:+type2, hash:&quot;SHA-256&quot; &#125;;</span><br><span class=\"hljs-string\">\t\t&#125;else if(type==&quot;ECC&quot;)&#123;</span><br><span class=\"hljs-string\">\t\t\talgorithm=&#123; name:&quot;ECDSA&quot;, namedCurve:type2 &#125;;</span><br><span class=\"hljs-string\">\t\t&#125;else&#123;</span><br><span class=\"hljs-string\">\t\t\tFalse(&quot;Not support &quot;+type);</span><br><span class=\"hljs-string\">\t\t\treturn;</span><br><span class=\"hljs-string\">\t\t&#125;;</span><br><span class=\"hljs-string\">\t\tcrypto.subtle.generateKey(algorithm,true,[&quot;sign&quot;,&quot;verify&quot;])</span><br><span class=\"hljs-string\">\t\t\t.then(function(key)&#123;</span><br><span class=\"hljs-string\">\t\t\t\t//FireFox不支持导出pkcs8参数的ECC私钥，Chrome没问题，使用jwk获得最大兼容</span><br><span class=\"hljs-string\">\t\t\t\tcrypto.subtle.exportKey(&quot;jwk&quot;, key.privateKey).then(function(jwk)&#123;</span><br><span class=\"hljs-string\">\t\t\t\t\tTrue(X509.KeyExport(jwk));</span><br><span class=\"hljs-string\">\t\t\t\t&#125;).catch(function(e)&#123;</span><br><span class=\"hljs-string\">\t\t\t\t\tFalse(Lang(&#x27;此浏览器不支持导出&#x27;+algorithm.name+&#x27;+PKCS#8格式密钥：&#x27;,&#x27;This browser does not support exporting &#x27;+algorithm.name+&#x27;+PKCS#8 format keys: &#x27;)+e.message);</span><br><span class=\"hljs-string\">\t\t\t\t&#125;);</span><br><span class=\"hljs-string\">\t\t\t&#125;).catch(function(e)&#123;</span><br><span class=\"hljs-string\">\t\t\t\tFalse(Lang(&#x27;此浏览器不支持生成&#x27;+algorithm.name+&#x27;：&#x27;,&#x27;This browser does not support generating &#x27;+algorithm.name+&#x27;: &#x27;)+e.message);</span><br><span class=\"hljs-string\">\t\t\t&#125;);</span><br><span class=\"hljs-string\">\t&#125;</span><br><span class=\"hljs-string\">\t//解析密钥，检查是否支持，通过回调返回格式或错误信息，pem支持公钥和私钥</span><br><span class=\"hljs-string\">\t,KeyParse:function(pem, True, False, mustPrivate)&#123;</span><br><span class=\"hljs-string\">\t\tvar rtv=&#123;&#125;;</span><br><span class=\"hljs-string\">\t\tvar Err=function(msg)&#123; rtv.error=msg; False(msg, rtv); &#125;;</span><br><span class=\"hljs-string\">\t\t//浏览器crypto不支持PKCS#1的pem导入，提取参数转成jwk导入</span><br><span class=\"hljs-string\">\t\t</span><br><span class=\"hljs-string\">\t\tif(!/BEGIN\\\\s*(RSA|EC)?\\\\s*(PUBLIC|PRIVATE)\\\\s*KEY/.test(pem))</span><br><span class=\"hljs-string\">\t\t\treturn Err(Lang(&#x27;不是RSA或ECC密钥&#x27;,&#x27;Not an RSA or ECC key&#x27;));</span><br><span class=\"hljs-string\">\t\trtv.type=RegExp.$1==&quot;EC&quot;?&quot;ECC&quot;:RegExp.$1;</span><br><span class=\"hljs-string\">\t\tvar isPKCS1=!!RegExp.$1;</span><br><span class=\"hljs-string\">\t\tvar isPub=RegExp.$2==&quot;PUBLIC&quot;;</span><br><span class=\"hljs-string\">\t\tif(isPub &amp;&amp; mustPrivate)</span><br><span class=\"hljs-string\">\t\t\treturn Err(Lang(&#x27;不是私钥&#x27;,&#x27;Is not a private key&#x27;));</span><br><span class=\"hljs-string\">\t\t</span><br><span class=\"hljs-string\">\t\t//解析提取参数信息</span><br><span class=\"hljs-string\">\t\ttry&#123;</span><br><span class=\"hljs-string\">\t\t\tvar paramAsn1=null;</span><br><span class=\"hljs-string\">\t\t\tvar asn1=ASN1.ParsePEM(pem);</span><br><span class=\"hljs-string\">\t\t\trtv.asn1=asn1;</span><br><span class=\"hljs-string\">\t\t\t</span><br><span class=\"hljs-string\">\t\t\tif(isPKCS1)&#123;</span><br><span class=\"hljs-string\">\t\t\t\tif(rtv.type==&quot;RSA&quot;)&#123;</span><br><span class=\"hljs-string\">\t\t\t\t\tparamAsn1=asn1; //直接按顺序存放的参数</span><br><span class=\"hljs-string\">\t\t\t\t&#125;else if(rtv.type==&quot;ECC&quot;)&#123;</span><br><span class=\"hljs-string\">\t\t\t\t\tif(isPub) //没见过这种ecc公钥</span><br><span class=\"hljs-string\">\t\t\t\t\t\treturn Err(Lang(&#x27;不支持ECC PKCS#1格式公钥&#x27;,&#x27;ECC PKCS#1 format public key is not supported&#x27;));</span><br><span class=\"hljs-string\">\t\t\t\t\tvar oid2=asn1.sub[2].sub[0].oid;</span><br><span class=\"hljs-string\">\t\t\t\t\trtv.type2=ASN1.OID[oid2]||&quot;&quot;;</span><br><span class=\"hljs-string\">\t\t\t\t\tparamAsn1=asn1;</span><br><span class=\"hljs-string\">\t\t\t\t&#125;</span><br><span class=\"hljs-string\">\t\t\t&#125;else&#123;</span><br><span class=\"hljs-string\">\t\t\t\tvar idx=isPub?0:1; //跳过私钥开头的version，就和公钥一样了</span><br><span class=\"hljs-string\">\t\t\t\tvar oid=asn1.sub[idx].sub[0].oid;</span><br><span class=\"hljs-string\">\t\t\t\tvar oid2=asn1.sub[idx].sub[1].oid;</span><br><span class=\"hljs-string\">\t\t\t\trtv.type=ASN1.OID[oid]||&quot;&quot;;</span><br><span class=\"hljs-string\">\t\t\t\trtv.type2=ASN1.OID[oid2]||&quot;&quot;;</span><br><span class=\"hljs-string\">\t\t\t\t</span><br><span class=\"hljs-string\">\t\t\t\tif(rtv.type==&quot;ECC&quot;&amp;&amp;isPub)//ECC公钥直接就是值</span><br><span class=\"hljs-string\">\t\t\t\t\tparamAsn1=asn1;</span><br><span class=\"hljs-string\">\t\t\t\telse</span><br><span class=\"hljs-string\">\t\t\t\t\tparamAsn1=new ASN1().parse(asn1.sub[idx+1].bytes);//密钥参数</span><br><span class=\"hljs-string\">\t\t\t&#125;</span><br><span class=\"hljs-string\">\t\t\trtv.paramAsn1=paramAsn1;</span><br><span class=\"hljs-string\">\t\t&#125;catch(e)&#123;</span><br><span class=\"hljs-string\">\t\t\treturn Err(Lang(&#x27;密钥解析失败：&#x27;,&#x27;Key resolution failed: &#x27;)+e.message);</span><br><span class=\"hljs-string\">\t\t&#125;</span><br><span class=\"hljs-string\">\t\tif(rtv.type==&quot;RSA&quot;)&#123;</span><br><span class=\"hljs-string\">\t\t\tvar idx=isPub?0:1; //私钥开头多一个版本号</span><br><span class=\"hljs-string\">\t\t\trtv.param=&#123;</span><br><span class=\"hljs-string\">\t\t\t\tn:paramAsn1.sub[idx].bytes //Modulus</span><br><span class=\"hljs-string\">\t\t\t\t,e:paramAsn1.sub[idx+1].bytes //Exponent</span><br><span class=\"hljs-string\">\t\t\t\t,d:isPub?null:paramAsn1.sub[idx+2].bytes //D</span><br><span class=\"hljs-string\">\t\t\t&#125;;</span><br><span class=\"hljs-string\">\t\t\tvar keys=&quot;p,q,dp,dq,qi&quot;.split(&quot;,&quot;);</span><br><span class=\"hljs-string\">\t\t\tfor(var i=0;i&lt;5;i++)</span><br><span class=\"hljs-string\">\t\t\t\trtv.param[keys[i]]=isPub?null:paramAsn1.sub[idx+3+i].bytes;</span><br><span class=\"hljs-string\">\t\t\trtv.type2=rtv.param.n.length*8+&quot;&quot;;</span><br><span class=\"hljs-string\">\t\t&#125;else if(rtv.type==&quot;ECC&quot;)&#123;</span><br><span class=\"hljs-string\">\t\t\tif(!X509.SupportECCType2[rtv.type2])&#123;</span><br><span class=\"hljs-string\">\t\t\t\treturn Err(Lang(&#x27;只支持&#x27;+X509.SupportECCType2Names().join(&quot;、&quot;)+&#x27;曲线的ECC密钥&#x27;,&#x27;ECC key only supported for &#x27;+X509.SupportECCType2Names().join(&quot;,&quot;)+&#x27; curve&#x27;));</span><br><span class=\"hljs-string\">\t\t\t&#125;</span><br><span class=\"hljs-string\">\t\t\tif(isPub)&#123;</span><br><span class=\"hljs-string\">\t\t\t\tvar b2=paramAsn1.sub[1].bytes;</span><br><span class=\"hljs-string\">\t\t\t&#125;else&#123;</span><br><span class=\"hljs-string\">\t\t\t\tvar idx=isPKCS1?3:2;</span><br><span class=\"hljs-string\">\t\t\t\tvar b2=paramAsn1.sub[idx].sub[0].bytes;</span><br><span class=\"hljs-string\">\t\t\t&#125;</span><br><span class=\"hljs-string\">\t\t\tif(b2[0]!=0x04)//0x04代表公钥未压缩 https://www.rfc-editor.org/rfc/rfc5480#section-2.2</span><br><span class=\"hljs-string\">\t\t\t\treturn Err(&quot;ECC !0x04: &quot;+b2[0]);</span><br><span class=\"hljs-string\">\t\t\tvar bits=(b2.length-1)/2;</span><br><span class=\"hljs-string\">\t\t\trtv.param=&#123;</span><br><span class=\"hljs-string\">\t\t\t\tx:b2.slice(1,1+bits) //xy为公钥</span><br><span class=\"hljs-string\">\t\t\t\t,y:b2.slice(1+bits)</span><br><span class=\"hljs-string\">\t\t\t\t,d:isPub?null:paramAsn1.sub[1].bytes //D</span><br><span class=\"hljs-string\">\t\t\t&#125;;</span><br><span class=\"hljs-string\">\t\t&#125;else&#123;</span><br><span class=\"hljs-string\">\t\t\treturn Err(Lang(&#x27;不支持的密钥类型：&#x27;,&#x27;Unsupported key type: &#x27;)+oid);</span><br><span class=\"hljs-string\">\t\t&#125;</span><br><span class=\"hljs-string\">\t\trtv.isPKCS1=isPKCS1;</span><br><span class=\"hljs-string\">\t\trtv.hasPrivate=!isPub;</span><br><span class=\"hljs-string\">\t\trtv.pem=pem;</span><br><span class=\"hljs-string\">\t\t</span><br><span class=\"hljs-string\">\t\t//转成CryptoKey</span><br><span class=\"hljs-string\">\t\tvar algorithm,jwk;</span><br><span class=\"hljs-string\">\t\tif(rtv.type==&quot;RSA&quot;)&#123;</span><br><span class=\"hljs-string\">\t\t\talgorithm=&#123; publicExponent: new Uint8Array(rtv.param.n.buffer)</span><br><span class=\"hljs-string\">\t\t\t,name:&quot;RSASSA-PKCS1-v1_5&quot;, modulusLength:+rtv.type2, hash:&quot;SHA-256&quot; &#125;;</span><br><span class=\"hljs-string\">\t\t\tjwk=&#123; kty:&quot;RSA&quot;, alg: &quot;RS256&quot; &#125;;</span><br><span class=\"hljs-string\">\t\t&#125;else if(rtv.type==&quot;ECC&quot;)&#123;</span><br><span class=\"hljs-string\">\t\t\talgorithm=&#123; name:&quot;ECDSA&quot;, namedCurve:rtv.type2 &#125;;</span><br><span class=\"hljs-string\">\t\t\tjwk=&#123; kty:&quot;EC&quot;, crv:rtv.type2 &#125;;</span><br><span class=\"hljs-string\">\t\t&#125;</span><br><span class=\"hljs-string\">\t\tjwk=Object.assign(jwk,&#123; ext:true, key_ops:[isPub?&quot;verify&quot;:&quot;sign&quot;] &#125;);</span><br><span class=\"hljs-string\">\t\tfor(var k in rtv.param)</span><br><span class=\"hljs-string\">\t\t\trtv.param[k]&amp;&amp;( jwk[k]=Bytes2UrlB64(rtv.param[k]) );</span><br><span class=\"hljs-string\">\t\t</span><br><span class=\"hljs-string\">\t\tcrypto.subtle.importKey(</span><br><span class=\"hljs-string\">\t\t\t&quot;jwk&quot;,jwk,algorithm,true,[isPub?&quot;verify&quot;:&quot;sign&quot;]</span><br><span class=\"hljs-string\">\t\t).then(function(key)&#123;</span><br><span class=\"hljs-string\">\t\t\trtv.key=key;</span><br><span class=\"hljs-string\">\t\t\tTrue(rtv);</span><br><span class=\"hljs-string\">\t\t&#125;).catch(function(e)&#123;</span><br><span class=\"hljs-string\">\t\t\tErr(Lang(&#x27;密钥转成CryptoKey失败：&#x27;,&#x27;Failed to convert key to CryptoKey: &#x27;)+e.message);</span><br><span class=\"hljs-string\">\t\t&#125;);</span><br><span class=\"hljs-string\">\t&#125;</span><br><span class=\"hljs-string\">\t//解析出来的公钥转换成JSON Web Key(JWK)</span><br><span class=\"hljs-string\">\t,PublicKeyJwk:function(info)&#123; // https://www.rfc-editor.org/rfc/rfc7638</span><br><span class=\"hljs-string\">\t\tvar p=info.param;</span><br><span class=\"hljs-string\">\t\tif(info.type==&quot;RSA&quot;)&#123;</span><br><span class=\"hljs-string\">\t\t\treturn &#123; e:Bytes2UrlB64(p.e), kty:&quot;RSA&quot;, n:Bytes2UrlB64(p.n) &#125;;</span><br><span class=\"hljs-string\">\t\t&#125;else if(info.type==&quot;ECC&quot;)&#123;</span><br><span class=\"hljs-string\">\t\t\treturn &#123; crv:info.type2, kty:&quot;EC&quot;, x:Bytes2UrlB64(p.x),y:Bytes2UrlB64(p.y) &#125;;</span><br><span class=\"hljs-string\">\t\t&#125;else&#123;</span><br><span class=\"hljs-string\">\t\t\tthrow new Error(&quot;Jwk: &quot;+info.type);</span><br><span class=\"hljs-string\">\t\t&#125;</span><br><span class=\"hljs-string\">\t&#125;</span><br><span class=\"hljs-string\">\t//解析出来的密钥或jwk对象转成PKCS#8格式 publicOnly：提供私钥时仅导出公钥 returnType：1 bytes，2 asn1，other pem</span><br><span class=\"hljs-string\">\t,KeyExport:function(info,publicOnly,returnType)&#123;</span><br><span class=\"hljs-string\">\t\tvar tag=&quot;KeyExport: &quot;, S=ASN1.S,V=ASN1.V; //ASN1快捷创建方式</span><br><span class=\"hljs-string\">\t\tvar param=info.param,type=param&amp;&amp;info.type,type2=info.type2;//解析出来的格式</span><br><span class=\"hljs-string\">\t\tif(!param)&#123;//jwk</span><br><span class=\"hljs-string\">\t\t\tif(info.kty)&#123;</span><br><span class=\"hljs-string\">\t\t\t\ttype=info.kty==&quot;EC&quot;?&quot;ECC&quot;:info.kty;</span><br><span class=\"hljs-string\">\t\t\t\tif(type==&quot;ECC&quot;)type2=info.crv;</span><br><span class=\"hljs-string\">\t\t\t&#125;else throw new Error(tag+&quot;bad key&quot;);</span><br><span class=\"hljs-string\">\t\t&#125;</span><br><span class=\"hljs-string\">\t\tvar keys=(type==&quot;ECC&quot;?&quot;x,y,d&quot;:&quot;n,e,d,p,q,dp,dq,qi&quot;).split(&quot;,&quot;);</span><br><span class=\"hljs-string\">\t\tif(!param)&#123;//jwk参数需转成二进制</span><br><span class=\"hljs-string\">\t\t\tparam=&#123;&#125;;</span><br><span class=\"hljs-string\">\t\t\tfor(var i=0;i&lt;keys.length;i++)&#123;</span><br><span class=\"hljs-string\">\t\t\t\tvar k=keys[i],b64=info[k];</span><br><span class=\"hljs-string\">\t\t\t\tif(b64)param[k]=UrlB642Bytes(b64);</span><br><span class=\"hljs-string\">\t\t\t&#125;</span><br><span class=\"hljs-string\">\t\t&#125;</span><br><span class=\"hljs-string\">\t\tvar useD=!publicOnly&amp;&amp;param.d;//导出私钥</span><br><span class=\"hljs-string\">\t\t</span><br><span class=\"hljs-string\">\t\tvar bytes;//封装参数</span><br><span class=\"hljs-string\">\t\tif(type==&quot;RSA&quot;)&#123;</span><br><span class=\"hljs-string\">\t\t\tvar asn1=S(0x30, V(0x02, param.n), V(0x02, param.e));</span><br><span class=\"hljs-string\">\t\t\tif(useD)&#123;//公钥只需n、e参数，私钥要全部</span><br><span class=\"hljs-string\">\t\t\t\tasn1.sub.splice(0,0,V(0x02, [0]));//开头插入版本号</span><br><span class=\"hljs-string\">\t\t\t\tfor(var i=2;i&lt;keys.length;i++)&#123;</span><br><span class=\"hljs-string\">\t\t\t\t\tasn1.push(V(0x02, param[keys[i]]));</span><br><span class=\"hljs-string\">\t\t\t\t&#125;</span><br><span class=\"hljs-string\">\t\t\t&#125;</span><br><span class=\"hljs-string\">\t\t\tbytes=asn1.toBytes();</span><br><span class=\"hljs-string\">\t\t&#125;else if(type==&quot;ECC&quot;)&#123; //公钥x、y参数，私钥外面再套一层d</span><br><span class=\"hljs-string\">\t\t\tvar pubB=new Uint8Array(1+param.x.length*2); pubB[0]=0x04;</span><br><span class=\"hljs-string\">\t\t\tpubB.set(param.x, 1);</span><br><span class=\"hljs-string\">\t\t\tpubB.set(param.y, 1+param.x.length);</span><br><span class=\"hljs-string\">\t\t\tif(useD)&#123;</span><br><span class=\"hljs-string\">\t\t\t\tbytes=S(0x30, V(0x02,[1]), V(0x04, param.d)</span><br><span class=\"hljs-string\">\t\t\t\t\t, S(0xA1, V(0x03, pubB)) ).toBytes();</span><br><span class=\"hljs-string\">\t\t\t&#125;else bytes=pubB;</span><br><span class=\"hljs-string\">\t\t&#125;else&#123; throw new Error(tag+type); &#125;</span><br><span class=\"hljs-string\">\t\t</span><br><span class=\"hljs-string\">\t\tvar typeASN1=S(0x30 //封装类型</span><br><span class=\"hljs-string\">\t\t\t,V(0x06, ASN1.OID2Bytes(ASN1.OID[type]))</span><br><span class=\"hljs-string\">\t\t\t,type==&quot;RSA&quot;?V(0x05,[])</span><br><span class=\"hljs-string\">\t\t\t\t\t:V(0x06, ASN1.OID2Bytes(ASN1.OID[type2]))</span><br><span class=\"hljs-string\">\t\t);</span><br><span class=\"hljs-string\">\t\t</span><br><span class=\"hljs-string\">\t\tif(useD)&#123;//封装私钥</span><br><span class=\"hljs-string\">\t\t\tvar keyA=S(0x30, V(0x02, [0]), typeASN1, V(0x04, bytes));</span><br><span class=\"hljs-string\">\t\t&#125;else&#123; //封装公钥</span><br><span class=\"hljs-string\">\t\t\tvar keyA=S(0x30 ,typeASN1, V(0x03, bytes));</span><br><span class=\"hljs-string\">\t\t&#125;;</span><br><span class=\"hljs-string\">\t\tif(returnType==2) return keyA;</span><br><span class=\"hljs-string\">\t\tbytes=keyA.toBytes();</span><br><span class=\"hljs-string\">\t\tif(returnType==1) return bytes;</span><br><span class=\"hljs-string\">\t\tvar str=Bytes2Base64(bytes).replace(/(.&#123;64&#125;)/g,&quot;$1\\\\n&quot;).trim();</span><br><span class=\"hljs-string\">\t\tvar sp=useD?&quot;PRIVATE&quot;:&quot;PUBLIC&quot;;</span><br><span class=\"hljs-string\">\t\treturn &#x27;-----BEGIN &#x27;+sp+&#x27; KEY-----\\\\n&#x27;+str+&#x27;\\\\n-----END &#x27;+sp+&#x27; KEY-----&#x27;;</span><br><span class=\"hljs-string\">\t&#125;</span><br><span class=\"hljs-string\">\t</span><br><span class=\"hljs-string\">\t</span><br><span class=\"hljs-string\">\t//创建证书请求CSR，提供私钥用于CSR签名</span><br><span class=\"hljs-string\">\t,CreateCSR:function(keyInfo,commonName,domains,True,False)&#123;</span><br><span class=\"hljs-string\">\t\t//CSR格式：rfc2986，太复杂了，直接拿openssl生成csr用ASN1.ParsePEM来观看格式</span><br><span class=\"hljs-string\">\t\tvar S=ASN1.S,V=ASN1.V; //ASN1快捷创建方式</span><br><span class=\"hljs-string\">\t\t</span><br><span class=\"hljs-string\">\t\t//封装公钥</span><br><span class=\"hljs-string\">\t\ttry&#123;</span><br><span class=\"hljs-string\">\t\t\tvar pubA=X509.KeyExport(keyInfo, true, 2);</span><br><span class=\"hljs-string\">\t\t&#125;catch(e)&#123; return False(e.message) &#125;</span><br><span class=\"hljs-string\">\t\t</span><br><span class=\"hljs-string\">\t\t//封装域名列表扩展属性</span><br><span class=\"hljs-string\">\t\tvar altNameA=S(0x30);</span><br><span class=\"hljs-string\">\t\tfor(var i=0;i&lt;domains.length;i++)</span><br><span class=\"hljs-string\">\t\t\taltNameA.push(V(0x82, Str2Bytes(domains[i])));</span><br><span class=\"hljs-string\">\t\t</span><br><span class=\"hljs-string\">\t\t//组装CSR主体</span><br><span class=\"hljs-string\">\t\tvar bodyA=S(0x30</span><br><span class=\"hljs-string\">\t\t\t,V(0x02, [0]) //版本号 固定值0</span><br><span class=\"hljs-string\">\t\t\t,S(0x30, S(0x31 ,S(0x30 //只提供一个属性：CN</span><br><span class=\"hljs-string\">\t\t\t\t,V(0x06, ASN1.OID2Bytes(&quot;2.5.4.3&quot;))</span><br><span class=\"hljs-string\">\t\t\t\t,V(0x0C, Str2Bytes(commonName))</span><br><span class=\"hljs-string\">\t\t\t)))</span><br><span class=\"hljs-string\">\t\t\t,pubA //公钥</span><br><span class=\"hljs-string\">\t\t\t,S(0xA0, S(0x30 //扩展属性，域名列表</span><br><span class=\"hljs-string\">\t\t\t\t,V(0x06, ASN1.OID2Bytes(&quot;1.2.840.113549.1.9.14&quot;))</span><br><span class=\"hljs-string\">\t\t\t\t,S(0x31, S(0x30, S(0x30</span><br><span class=\"hljs-string\">\t\t\t\t\t,V(0x06, ASN1.OID2Bytes(&quot;2.5.29.17&quot;))</span><br><span class=\"hljs-string\">\t\t\t\t\t,V(0x04, altNameA.toBytes())</span><br><span class=\"hljs-string\">\t\t\t\t)))</span><br><span class=\"hljs-string\">\t\t\t))</span><br><span class=\"hljs-string\">\t\t);</span><br><span class=\"hljs-string\">\t\t</span><br><span class=\"hljs-string\">\t\t//签名生成CSR rfc2315</span><br><span class=\"hljs-string\">\t\tvar bodyBytes=bodyA.toBytes();</span><br><span class=\"hljs-string\">\t\tvar algorithm=&#123;name:&quot;ECDSA&quot;, hash:&quot;SHA-256&quot;&#125;;</span><br><span class=\"hljs-string\">\t\tif(keyInfo.type==&quot;RSA&quot;)&#123;</span><br><span class=\"hljs-string\">\t\t\talgorithm=&#123;name:&quot;RSASSA-PKCS1-v1_5&quot;&#125;</span><br><span class=\"hljs-string\">\t\t&#125;</span><br><span class=\"hljs-string\">\t\tcrypto.subtle.sign(algorithm, keyInfo.key, bodyBytes).then(function(arr)&#123;</span><br><span class=\"hljs-string\">\t\t\tvar signBytes=new Uint8Array(arr);</span><br><span class=\"hljs-string\">\t\t\tif(keyInfo.type==&quot;ECC&quot;)&#123;//ECC分两段重新封装一下</span><br><span class=\"hljs-string\">\t\t\t\tvar s1=signBytes.subarray(0,keyInfo.param.x.length);</span><br><span class=\"hljs-string\">\t\t\t\tvar s2=signBytes.subarray(keyInfo.param.x.length);</span><br><span class=\"hljs-string\">\t\t\t\tsignBytes=S(0x30, V(0x02,s1), V(0x02,s2)).toBytes();</span><br><span class=\"hljs-string\">\t\t\t&#125;</span><br><span class=\"hljs-string\">\t\t\tvar csrA=S(0x30, bodyA</span><br><span class=\"hljs-string\">\t\t\t\t,S(0x30 //签名类型</span><br><span class=\"hljs-string\">\t\t\t\t\t,V(0x06, ASN1.OID2Bytes(ASN1.OID[&quot;SHA256_&quot;+keyInfo.type]))</span><br><span class=\"hljs-string\">\t\t\t\t\t,keyInfo.type==&quot;RSA&quot;?V(0x05,[]):null //ECC没有第二个参数</span><br><span class=\"hljs-string\">\t\t\t\t)</span><br><span class=\"hljs-string\">\t\t\t\t,V(0x03, signBytes)</span><br><span class=\"hljs-string\">\t\t\t);</span><br><span class=\"hljs-string\">\t\t\tvar bytes=csrA.toBytes();</span><br><span class=\"hljs-string\">\t\t\tvar str=Bytes2Base64(bytes).replace(/(.&#123;64&#125;)/g,&quot;$1\\\\n&quot;).trim();</span><br><span class=\"hljs-string\">\t\t\tTrue(&#x27;-----BEGIN CERTIFICATE REQUEST-----\\\\n&#x27;+str+&#x27;\\\\n-----END CERTIFICATE REQUEST-----&#x27;);</span><br><span class=\"hljs-string\">\t\t&#125;).catch(function(e)&#123;</span><br><span class=\"hljs-string\">\t\t\tFalse(&quot;CSR sign:&quot;+e.message);</span><br><span class=\"hljs-string\">\t\t&#125;);</span><br><span class=\"hljs-string\">\t&#125;</span><br><span class=\"hljs-string\">&#125;;</span><br><span class=\"hljs-string\"></span><br><span class=\"hljs-string\"></span><br><span class=\"hljs-string\"></span><br><span class=\"hljs-string\">//简单实现ASN.1解析和封包</span><br><span class=\"hljs-string\">window.ASN1=function(tag, bytes)&#123;</span><br><span class=\"hljs-string\">\tthis.sub=[];</span><br><span class=\"hljs-string\">\tif(tag)this.setTag(tag);</span><br><span class=\"hljs-string\">\tif(bytes)this.setBytes(bytes);</span><br><span class=\"hljs-string\">&#125;;</span><br><span class=\"hljs-string\">ASN1.S=function(tag)&#123; //快捷创建容器类型，并提供任意多个子元素</span><br><span class=\"hljs-string\">\tvar v=new ASN1(tag);</span><br><span class=\"hljs-string\">\tfor(var i=1,a=arguments;i&lt;a.length;i++)&#123;a[i]&amp;&amp;v.push(a[i])&#125;</span><br><span class=\"hljs-string\">\treturn v;</span><br><span class=\"hljs-string\">&#125;;</span><br><span class=\"hljs-string\">ASN1.V=function(tag, bytes)&#123; //快捷创建值类型</span><br><span class=\"hljs-string\">\treturn new ASN1(tag, bytes)\t</span><br><span class=\"hljs-string\">&#125;;</span><br><span class=\"hljs-string\">ASN1.ParsePEM=function(pem)&#123;</span><br><span class=\"hljs-string\">\treturn new ASN1().parsePEM(pem);</span><br><span class=\"hljs-string\">&#125;;</span><br><span class=\"hljs-string\">ASN1.TagNames=&#123;</span><br><span class=\"hljs-string\">\t&#x27;01&#x27;:&#x27;BOOLEAN&#x27;,&#x27;02&#x27;:&#x27;INTEGER&#x27;,&#x27;03&#x27;:&#x27;BIT_STRING&#x27;</span><br><span class=\"hljs-string\">\t,&#x27;04&#x27;:&#x27;OCTET_STRING&#x27;,&#x27;05&#x27;:&#x27;NULL&#x27;,&#x27;06&#x27;:&#x27;OID&#x27;</span><br><span class=\"hljs-string\">\t,&#x27;0C&#x27;:&#x27;UTF8String&#x27;,&#x27;13&#x27;:&#x27;Printable_String&#x27;</span><br><span class=\"hljs-string\">\t,&#x27;17&#x27;:&#x27;UTCTime&#x27;,&#x27;18&#x27;:&#x27;GeneralizedTime&#x27;,&#x27;30&#x27;:&#x27;SEQUENCE&#x27;,&#x27;31&#x27;:&#x27;SET&#x27;</span><br><span class=\"hljs-string\">&#125;;</span><br><span class=\"hljs-string\">ASN1.OID=&#123;</span><br><span class=\"hljs-string\">\t &quot;1.2.840.113549.1.1.1&quot;:&quot;RSA&quot;</span><br><span class=\"hljs-string\">\t,&quot;1.2.840.113549.1.1.11&quot;:&quot;SHA256_RSA&quot;</span><br><span class=\"hljs-string\">\t,&quot;1.2.840.10045.2.1&quot;:&quot;ECC&quot;</span><br><span class=\"hljs-string\">\t,&quot;1.2.840.10045.4.3.2&quot;:&quot;SHA256_ECC&quot;</span><br><span class=\"hljs-string\">\t,&quot;1.2.840.10045.3.1.7&quot;:&quot;P-256&quot; //secp256r1 | prime256v1</span><br><span class=\"hljs-string\">\t,&quot;1.3.132.0.34&quot;:&quot;P-384&quot; //secp384r1</span><br><span class=\"hljs-string\">\t,&quot;1.3.132.0.35&quot;:&quot;P-521&quot; //secp521r1</span><br><span class=\"hljs-string\">&#125;;\tfor(var k in ASN1.OID)ASN1.OID[ASN1.OID[k]]=k;</span><br><span class=\"hljs-string\">ASN1.OID2Bytes=function(oid)&#123;</span><br><span class=\"hljs-string\">\tvar arr = oid.split(&#x27;.&#x27;), byts = [];</span><br><span class=\"hljs-string\">\tvar v0=+arr[0],v1=+arr[1];</span><br><span class=\"hljs-string\">\tif (!/^[\\\\d\\\\.]+$/.test(oid)|| arr.length &lt; 3 || v0 &gt; 2 || v0 * 40 + v1 &gt; 0xff)</span><br><span class=\"hljs-string\">\t\tthrow new Error(&quot;bad oid: &quot;+oid);</span><br><span class=\"hljs-string\">\tbyts.push(v0 * 40 + v1);</span><br><span class=\"hljs-string\">\tfor (var i = 2, len = arr.length; i &lt; len; i++) &#123;</span><br><span class=\"hljs-string\">\t\tvar num = +arr[i], bits = [];</span><br><span class=\"hljs-string\">\t\twhile (num &gt;= 0x80) &#123; bits.push(num % 0x80); num /= 0x80; &#125;</span><br><span class=\"hljs-string\">\t\tbits.push(num); bits.reverse();</span><br><span class=\"hljs-string\">\t\tfor (var j = 0, jl = bits.length - 1; j &lt;= jl; j++) &#123;</span><br><span class=\"hljs-string\">\t\t\tif (j != jl) &#123;</span><br><span class=\"hljs-string\">\t\t\t\tbyts.push(0x80 + bits[j]);</span><br><span class=\"hljs-string\">\t\t\t&#125; else &#123;</span><br><span class=\"hljs-string\">\t\t\t\tbyts.push(bits[j]);</span><br><span class=\"hljs-string\">\t\t\t&#125;</span><br><span class=\"hljs-string\">\t\t&#125;</span><br><span class=\"hljs-string\">\t&#125;</span><br><span class=\"hljs-string\">\treturn new Uint8Array(byts);</span><br><span class=\"hljs-string\">&#125;;</span><br><span class=\"hljs-string\">ASN1.OID2Text=function(bytes)&#123;</span><br><span class=\"hljs-string\">\tvar str = &quot;&quot;, b0 = bytes[0];</span><br><span class=\"hljs-string\">\tvar m = b0 &lt; 80 ? b0 &lt; 40 ? 0 : 1 : 2;</span><br><span class=\"hljs-string\">\tstr+=m+&quot;.&quot;+(b0 - m * 40);</span><br><span class=\"hljs-string\">\tfor (var i = 1, len = bytes.length; i &lt; len; ) &#123;</span><br><span class=\"hljs-string\">\t\tvar num = 0;</span><br><span class=\"hljs-string\">\t\tfor (; i &lt; len; ) &#123;</span><br><span class=\"hljs-string\">\t\t\tvar bit = bytes[i++]; num *= 0x80;</span><br><span class=\"hljs-string\">\t\t\tif (bit &gt;= 0x80) num += bit - 0x80;</span><br><span class=\"hljs-string\">\t\t\telse &#123; num += bit; break; &#125;</span><br><span class=\"hljs-string\">\t\t&#125;</span><br><span class=\"hljs-string\">\t\tstr+=&quot;.&quot;+num;</span><br><span class=\"hljs-string\">\t&#125;</span><br><span class=\"hljs-string\">\treturn str;</span><br><span class=\"hljs-string\">&#125;;</span><br><span class=\"hljs-string\">ASN1.ParseSize=function(pos, bytes)&#123; //简单解析长度数值</span><br><span class=\"hljs-string\">\tvar bitCount=bytes[pos[0]++],size=0;</span><br><span class=\"hljs-string\">\tif(bitCount &lt; 0x80) size=bitCount;</span><br><span class=\"hljs-string\">\telse if(bitCount == 0x80) size=-404; //不定长，需搜索两个0结尾，直接拒绝支持</span><br><span class=\"hljs-string\">\telse for(var i=0,len=bitCount&amp;0x7F;i&lt;len;i++)</span><br><span class=\"hljs-string\">\t\tsize=size*256+bytes[pos[0]++];</span><br><span class=\"hljs-string\">\tif(size&lt;0 || size&gt;bytes.length-pos[0])throw new Error(&quot;ASN.1 Bad size &quot;+size);</span><br><span class=\"hljs-string\">\treturn size;</span><br><span class=\"hljs-string\">&#125;;</span><br><span class=\"hljs-string\">ASN1.ParseBlock=function(pos, bytes, sub)&#123; //简单解析一块子内容</span><br><span class=\"hljs-string\">\tsub=sub||[];</span><br><span class=\"hljs-string\">\twhile(pos[0]&lt;bytes.length)&#123;</span><br><span class=\"hljs-string\">\t\tvar idx0=pos[0],item=new ASN1();</span><br><span class=\"hljs-string\">\t\tvar tag=bytes[pos[0]++],size=ASN1.ParseSize(pos, bytes);</span><br><span class=\"hljs-string\">\t\tif((tag&amp;0x20) != 0)&#123;//结构化容器，嵌套调用</span><br><span class=\"hljs-string\">\t\t\titem.parse(bytes.slice(idx0, pos[0]+size));</span><br><span class=\"hljs-string\">\t\t&#125;else&#123;//普通内容</span><br><span class=\"hljs-string\">\t\t\tvar chunk=bytes.slice(pos[0], pos[0]+size);</span><br><span class=\"hljs-string\">\t\t\tif(tag==0x02 || tag==0x03)&#123;//去掉开头补的0，正整数</span><br><span class=\"hljs-string\">\t\t\t\tif(chunk.length&gt;1 &amp;&amp; chunk[0]==0)&#123;</span><br><span class=\"hljs-string\">\t\t\t\t\tchunk=chunk.slice(1);</span><br><span class=\"hljs-string\">\t\t\t\t&#125;</span><br><span class=\"hljs-string\">\t\t\t&#125;</span><br><span class=\"hljs-string\">\t\t\titem.setTag(tag);</span><br><span class=\"hljs-string\">\t\t\titem.setBytes(chunk);</span><br><span class=\"hljs-string\">\t\t&#125;</span><br><span class=\"hljs-string\">\t\tsub.push(item);</span><br><span class=\"hljs-string\">\t\tpos[0]+=size;</span><br><span class=\"hljs-string\">\t&#125;</span><br><span class=\"hljs-string\">\treturn sub;</span><br><span class=\"hljs-string\">&#125;;</span><br><span class=\"hljs-string\">ASN1.PEM2Bytes=function(pem)&#123;</span><br><span class=\"hljs-string\">\tpem=pem.replace(/[\\\\s\\\\r\\\\n]/g,&quot;&quot;);</span><br><span class=\"hljs-string\">\tvar m=/^-+BEGIN\\\\w*-+([^-]+)-+END\\\\w+-+$/i.exec(pem);</span><br><span class=\"hljs-string\">\ttry&#123;</span><br><span class=\"hljs-string\">\t\treturn Base642Bytes(m[1]);</span><br><span class=\"hljs-string\">\t&#125;catch(e)&#123;</span><br><span class=\"hljs-string\">\t\tthrow new Error(Lang(&#x27;不是pem格式。&#x27;,&#x27;Not a pem format.&#x27;));</span><br><span class=\"hljs-string\">\t&#125;</span><br><span class=\"hljs-string\">&#125;;</span><br><span class=\"hljs-string\">ASN1.prototype=&#123;</span><br><span class=\"hljs-string\">\tsetTag:function(tag)&#123;</span><br><span class=\"hljs-string\">\t\tvar txt=(tag&lt;16?&quot;0&quot;:&quot;&quot;)+tag.toString(16).toUpperCase();</span><br><span class=\"hljs-string\">\t\tthis.tag=tag;</span><br><span class=\"hljs-string\">\t\tthis.tagTxt=txt;</span><br><span class=\"hljs-string\">\t\tthis.tagName=ASN1.TagNames[txt]||&quot;0x&quot;+txt;</span><br><span class=\"hljs-string\">\t&#125;</span><br><span class=\"hljs-string\">\t,setBytes:function(bytes)&#123;</span><br><span class=\"hljs-string\">\t\tif(bytes.length==null||(bytes.slice==null &amp;&amp; bytes.subarray==null))</span><br><span class=\"hljs-string\">\t\t\tthrow new Error(&quot;Not Array&quot;);</span><br><span class=\"hljs-string\">\t\tif(this.tag==0x06) this.oid=ASN1.OID2Text(bytes);</span><br><span class=\"hljs-string\">\t\tif(this.tag==0x0C||this.tag==0x13) this.string=Bytes2Str(bytes);</span><br><span class=\"hljs-string\">\t\tthis.bytes=bytes;</span><br><span class=\"hljs-string\">\t&#125;</span><br><span class=\"hljs-string\">\t,push:function(asn1)&#123;</span><br><span class=\"hljs-string\">\t\tif(!asn1.parsePEM) throw new Error(&quot;Not ASN1&quot;);</span><br><span class=\"hljs-string\">\t\tthis.sub.push(asn1);</span><br><span class=\"hljs-string\">\t\treturn this;</span><br><span class=\"hljs-string\">\t&#125;</span><br><span class=\"hljs-string\">\t,parsePEM:function(pem)&#123;</span><br><span class=\"hljs-string\">\t\treturn this.parse(ASN1.PEM2Bytes(pem));</span><br><span class=\"hljs-string\">\t&#125;</span><br><span class=\"hljs-string\">\t,parse:function(bytes)&#123;</span><br><span class=\"hljs-string\">\t\tvar pos=[0];</span><br><span class=\"hljs-string\">\t\t//最外层必须是个结构化容器，第6位为1，为0为基础类型 https://www.jianshu.com/p/ce7ab5f3f33a</span><br><span class=\"hljs-string\">\t\tif((bytes[0]&amp;0x20) == 0) throw new Error(&quot;ASN.1 parse: Not SEQ&quot;);</span><br><span class=\"hljs-string\">\t\tthis.setTag(bytes[pos[0]++]);</span><br><span class=\"hljs-string\">\t\tvar size=ASN1.ParseSize(pos, bytes);</span><br><span class=\"hljs-string\">\t\tbytes=bytes.slice(pos[0], pos[0]+size);</span><br><span class=\"hljs-string\">\t\tthis.setBytes(bytes);</span><br><span class=\"hljs-string\">\t\t//解析子内容</span><br><span class=\"hljs-string\">\t\tASN1.ParseBlock([0], bytes, this.sub);</span><br><span class=\"hljs-string\">\t\treturn this;</span><br><span class=\"hljs-string\">\t&#125;</span><br><span class=\"hljs-string\">\t,toBytes:function(innerOlny)&#123;</span><br><span class=\"hljs-string\">\t\tvar chunks=[],len=0;</span><br><span class=\"hljs-string\">\t\tif(this.sub.length)&#123;//容器类型，递归调用</span><br><span class=\"hljs-string\">\t\t\tfor(var i=0;i&lt;this.sub.length;i++)&#123;</span><br><span class=\"hljs-string\">\t\t\t\tvar arr=this.sub[i].toBytes();</span><br><span class=\"hljs-string\">\t\t\t\tchunks.push(arr); len+=arr.length;</span><br><span class=\"hljs-string\">\t\t\t&#125;</span><br><span class=\"hljs-string\">\t\t&#125;else if(this.bytes&amp;&amp;this.bytes.length)&#123;//简单类型</span><br><span class=\"hljs-string\">\t\t\tif(this.tag==0x02 &amp;&amp; this.bytes[0] &gt;= 0x80 || this.tag==0x03)&#123;</span><br><span class=\"hljs-string\">\t\t\t\tchunks.push([0]);len++;  //0x02负数 0x03需要开头补0</span><br><span class=\"hljs-string\">\t\t\t&#125;</span><br><span class=\"hljs-string\">\t\t\tchunks.push(this.bytes); len+=this.bytes.length;</span><br><span class=\"hljs-string\">\t\t&#125;</span><br><span class=\"hljs-string\">\t\tif(!innerOlny)&#123;//添加标签和长度</span><br><span class=\"hljs-string\">\t\t\tvar arr=[], num=len;</span><br><span class=\"hljs-string\">\t\t\tif(num&lt;0x80) arr.push(num);</span><br><span class=\"hljs-string\">\t\t\telse &#123;</span><br><span class=\"hljs-string\">\t\t\t\twhile(num&gt;0xff)&#123; arr.push(num&amp;0xff); num=num&gt;&gt;8; &#125;</span><br><span class=\"hljs-string\">\t\t\t\tarr.push(num&amp;0xff); arr.push(0x80+arr.length);</span><br><span class=\"hljs-string\">\t\t\t&#125;</span><br><span class=\"hljs-string\">\t\t\tarr.push(this.tag); arr.reverse();</span><br><span class=\"hljs-string\">\t\t\tchunks.splice(0,0,arr); len+=arr.length;</span><br><span class=\"hljs-string\">\t\t&#125;</span><br><span class=\"hljs-string\">\t\tvar bytes=new Uint8Array(len),n=0;</span><br><span class=\"hljs-string\">\t\tfor(var i=0;i&lt;chunks.length;i++)&#123;</span><br><span class=\"hljs-string\">\t\t\tvar arr=chunks[i];</span><br><span class=\"hljs-string\">\t\t\tbytes.set(arr, n); n+=arr.length;</span><br><span class=\"hljs-string\">\t\t&#125;</span><br><span class=\"hljs-string\">\t\treturn bytes;</span><br><span class=\"hljs-string\">\t&#125;</span><br><span class=\"hljs-string\">&#125;;</span><br><span class=\"hljs-string\"></span><br><span class=\"hljs-string\">&#125;)();</span><br><span class=\"hljs-string\">&lt;/script&gt;</span><br><span class=\"hljs-string\"></span><br><span class=\"hljs-string\"></span><br><span class=\"hljs-string\"></span><br><span class=\"hljs-string\"></span><br><span class=\"hljs-string\"></span><br><span class=\"hljs-string\"></span><br><span class=\"hljs-string\"></span><br><span class=\"hljs-string\">&lt;script&gt;</span><br><span class=\"hljs-string\">//===========================================================</span><br><span class=\"hljs-string\">//================= Common functions ==================</span><br><span class=\"hljs-string\">//===========================================================</span><br><span class=\"hljs-string\">//LICENSE: GPL-3.0, https://github.com/xiangyuecn/ACME-HTML-Web-Browser-Client</span><br><span class=\"hljs-string\">(function()&#123;</span><br><span class=\"hljs-string\">&quot;use strict&quot;;</span><br><span class=\"hljs-string\"></span><br><span class=\"hljs-string\">/************** Language **************/</span><br><span class=\"hljs-string\">window.LangCur=/\\\\b(zh|cn)\\\\b/i.test(navigator.language)?&quot;cn&quot;:&quot;en&quot;;</span><br><span class=\"hljs-string\">window.Lang=function(cn,en,txt)&#123;</span><br><span class=\"hljs-string\">\tif((cn||en) &amp;&amp; (!cn||!en))throw new Error(&quot;Lang bad args&quot;);</span><br><span class=\"hljs-string\">\tif(txt)return LangCur==&quot;cn&quot;?cn:en;</span><br><span class=\"hljs-string\">\tvar html=&quot;&quot;,ks=&#123;cn:cn,en:en&#125;;</span><br><span class=\"hljs-string\">\tfor(var k in ks)&#123;</span><br><span class=\"hljs-string\">\t\thtml+=(LangCur!=k?&#x27;&lt;!--LangHide1--&gt;&#x27;:&#x27;&#x27;)</span><br><span class=\"hljs-string\">\t\t\t+&#x27;&lt;span class=&quot;lang&#x27;+k.toUpperCase()</span><br><span class=\"hljs-string\">\t\t\t+&#x27;&quot; style=&quot;&#x27;+(LangCur==k?&#x27;&#x27;:&#x27;display:none&#x27;)</span><br><span class=\"hljs-string\">\t\t\t+&#x27;&quot;&gt;&#x27;+ks[k]+&#x27;&lt;/span&gt;&#x27;</span><br><span class=\"hljs-string\">\t\t\t+(LangCur!=k?&#x27;&lt;!--LangHide2--&gt;&#x27;:&#x27;&#x27;);</span><br><span class=\"hljs-string\">\t&#125;</span><br><span class=\"hljs-string\">\treturn html;</span><br><span class=\"hljs-string\">&#125;;</span><br><span class=\"hljs-string\">window.LangReview=function(cls)&#123;</span><br><span class=\"hljs-string\">\tvar el=$(cls||&quot;body&quot;);</span><br><span class=\"hljs-string\">\tel.find(&quot;.langCN&quot;)[LangCur==&quot;cn&quot;?&quot;show&quot;:&quot;hide&quot;]();</span><br><span class=\"hljs-string\">\tel.find(&quot;.langEN&quot;)[LangCur!=&quot;cn&quot;?&quot;show&quot;:&quot;hide&quot;]();</span><br><span class=\"hljs-string\">\tvar inputs=el.find(&quot;.inputLang&quot;);</span><br><span class=\"hljs-string\">\tfor(var i=0;i&lt;inputs.length;i++)</span><br><span class=\"hljs-string\">\t\tinputs[i].setAttribute(&quot;placeholder&quot;,inputs[i].getAttribute(&quot;placeholder-&quot;+LangCur));</span><br><span class=\"hljs-string\">&#125;;</span><br><span class=\"hljs-string\">window.LangClick=function(lang)&#123;</span><br><span class=\"hljs-string\">\tLangCur=lang;</span><br><span class=\"hljs-string\">\tLangReview();</span><br><span class=\"hljs-string\">\t$(&quot;.langBtn&quot;).css(&quot;color&quot;,null);</span><br><span class=\"hljs-string\">\t$(&quot;.langBtn_&quot;+lang).css(&quot;color&quot;,&quot;#000&quot;);</span><br><span class=\"hljs-string\">\t$(&quot;body&quot;).css(&quot;wordBreak&quot;,lang==&quot;cn&quot;?&quot;break-all&quot;:null);</span><br><span class=\"hljs-string\">\t</span><br><span class=\"hljs-string\">\tif(!document.titleLang)document.titleLang=document.title;</span><br><span class=\"hljs-string\">\tvar arr=document.titleLang.split(&quot;|&quot;),t1=[],t2=[];</span><br><span class=\"hljs-string\">\tfor(var i=0;i&lt;arr.length;i++)</span><br><span class=\"hljs-string\">\t\tif(/[^\\\\x00-\\\\xff]/.test(arr[i]) == (LangCur==&quot;cn&quot;))t1.push(arr[i].trim());</span><br><span class=\"hljs-string\">\t\telse t2.push(arr[i].trim());</span><br><span class=\"hljs-string\">\tdocument.title=t1.concat(t2).join(&quot; | &quot;);</span><br><span class=\"hljs-string\">&#125;;</span><br><span class=\"hljs-string\"></span><br><span class=\"hljs-string\"></span><br><span class=\"hljs-string\">/************** Console log output **************/</span><br><span class=\"hljs-string\">window.CLog=function(tag, color, msg)&#123;</span><br><span class=\"hljs-string\">\tvar now=new Date();</span><br><span class=\"hljs-string\">\tvar t=(&quot;0&quot;+now.getMinutes()).substr(-2)</span><br><span class=\"hljs-string\">\t\t+&quot;:&quot;+(&quot;0&quot;+now.getSeconds()).substr(-2)</span><br><span class=\"hljs-string\">\t\t+&quot;.&quot;+(&quot;00&quot;+now.getMilliseconds()).substr(-3);</span><br><span class=\"hljs-string\">\tmsg=msg.replace(/&lt;!--LangHide1[\\\\S\\\\s]+?LangHide2--&gt;/g,&quot;&quot;);//去掉没有显示的语言</span><br><span class=\"hljs-string\">\tmsg=msg.replace(/&lt;[^&gt;]+&gt;/g,&quot;&quot;);</span><br><span class=\"hljs-string\">\tvar arr=[&quot;[&quot;+t+&quot; &quot;+tag+&quot;]&quot;+msg];</span><br><span class=\"hljs-string\">\tfor(var i=3;i&lt;arguments.length;i++)&#123;</span><br><span class=\"hljs-string\">\t\tarr.push(arguments[i]);</span><br><span class=\"hljs-string\">\t&#125;;</span><br><span class=\"hljs-string\">\tvar fn=color==1?console.error:color==3?console.warn:color==4?console.debug:console.log;</span><br><span class=\"hljs-string\">\tfn.apply(console,arr);</span><br><span class=\"hljs-string\">\treturn msg;</span><br><span class=\"hljs-string\">&#125;;</span><br><span class=\"hljs-string\"></span><br><span class=\"hljs-string\"></span><br><span class=\"hljs-string\">/************** $ Selector / like jQuery **************/</span><br><span class=\"hljs-string\">(function()&#123;</span><br><span class=\"hljs-string\">window.$=function(cls)&#123; if(cls&amp;&amp;cls.is$) return cls; return new fn(cls) &#125;</span><br><span class=\"hljs-string\">var fn=function(cls,node)&#123;</span><br><span class=\"hljs-string\">\tthis.length=0;</span><br><span class=\"hljs-string\">\tif(!cls)return;</span><br><span class=\"hljs-string\">\tif(cls.appendChild)&#123;this.push(cls); return&#125;</span><br><span class=\"hljs-string\">\tvar arr=(node||document).querySelectorAll(cls);</span><br><span class=\"hljs-string\">\tfor(var i=0;i&lt;arr.length;i++)this.push(arr[i]);</span><br><span class=\"hljs-string\">&#125;;</span><br><span class=\"hljs-string\">fn.prototype=&#123;</span><br><span class=\"hljs-string\">\tis$:1</span><br><span class=\"hljs-string\">\t,push:function(val)&#123; this[this.length++]=val &#125;</span><br><span class=\"hljs-string\">\t,find:function(cls)&#123; var el0=this[0]; return new fn(el0?cls:&quot;&quot;,el0) &#125;</span><br><span class=\"hljs-string\">\t,val:function(val)&#123; return this.prop(&quot;value&quot;,val) &#125;</span><br><span class=\"hljs-string\">\t,hide:function()&#123; return this.css(&quot;display&quot;,&quot;none&quot;) &#125;</span><br><span class=\"hljs-string\">\t,show:function(display)&#123; return this.css(&quot;display&quot;,display===undefined?null:display) &#125;</span><br><span class=\"hljs-string\">\t</span><br><span class=\"hljs-string\">\t,html:function(html)&#123;</span><br><span class=\"hljs-string\">\t\tvar el0=this[0];</span><br><span class=\"hljs-string\">\t\tif(html===undefined)return el0&amp;&amp;el0.innerHTML||&quot;&quot;;</span><br><span class=\"hljs-string\">\t\tfor(var i=0;i&lt;this.length;i++) this[i].innerHTML=html;</span><br><span class=\"hljs-string\">\t\treturn this;</span><br><span class=\"hljs-string\">\t&#125;</span><br><span class=\"hljs-string\">\t,append:function(html)&#123; return this._end(html) &#125;</span><br><span class=\"hljs-string\">\t,prepend:function(html)&#123; return this._end(html,1) &#125;</span><br><span class=\"hljs-string\">\t,_end:function(html,prep)&#123;</span><br><span class=\"hljs-string\">\t\tvar el0=this[0];</span><br><span class=\"hljs-string\">\t\tif(html &amp;&amp; el0)&#123;</span><br><span class=\"hljs-string\">\t\t\tvar nodes=html;</span><br><span class=\"hljs-string\">\t\t\tif(typeof(html)==&quot;string&quot;)&#123;</span><br><span class=\"hljs-string\">\t\t\t\tvar div=document.createElement(&quot;div&quot;);</span><br><span class=\"hljs-string\">\t\t\t\tdiv.innerHTML=html;</span><br><span class=\"hljs-string\">\t\t\t\tnodes=[];</span><br><span class=\"hljs-string\">\t\t\t\tfor(var i=0;i&lt;div.childNodes.length;i++)nodes.push(div.childNodes[i]);</span><br><span class=\"hljs-string\">\t\t\t&#125;else if(html.appendChild)&#123;</span><br><span class=\"hljs-string\">\t\t\t\tnodes=[html];</span><br><span class=\"hljs-string\">\t\t\t&#125;</span><br><span class=\"hljs-string\">\t\t\tif(prep)prep=el0.firstChild;</span><br><span class=\"hljs-string\">\t\t\tfor(var i=0;i&lt;nodes.length;i++)&#123;</span><br><span class=\"hljs-string\">\t\t\t\tif(prep) el0.insertBefore(nodes[i],prep);</span><br><span class=\"hljs-string\">\t\t\t\telse el0.appendChild(nodes[i])</span><br><span class=\"hljs-string\">\t\t\t&#125;</span><br><span class=\"hljs-string\">\t\t&#125;</span><br><span class=\"hljs-string\">\t\treturn this;</span><br><span class=\"hljs-string\">\t&#125;</span><br><span class=\"hljs-string\">\t,prop:function(key,val)&#123;</span><br><span class=\"hljs-string\">\t\tvar el0=this[0];</span><br><span class=\"hljs-string\">\t\tif(val===undefined)return el0&amp;&amp;el0[key];</span><br><span class=\"hljs-string\">\t\tfor(var i=0;i&lt;this.length;i++) this[i][key]=val;</span><br><span class=\"hljs-string\">\t\treturn this;</span><br><span class=\"hljs-string\">\t&#125;</span><br><span class=\"hljs-string\">\t,attr:function(key,val)&#123;</span><br><span class=\"hljs-string\">\t\tvar el0=this[0];</span><br><span class=\"hljs-string\">\t\tif(val===undefined)return el0&amp;&amp;el0.getAttribute(key);</span><br><span class=\"hljs-string\">\t\tfor(var i=0;i&lt;this.length;i++)&#123;</span><br><span class=\"hljs-string\">\t\t\tif(val==null) this[i].removeAttribute(key);</span><br><span class=\"hljs-string\">\t\t\telse this[i].setAttribute(key,val);</span><br><span class=\"hljs-string\">\t\t&#125;</span><br><span class=\"hljs-string\">\t\treturn this;</span><br><span class=\"hljs-string\">\t&#125;</span><br><span class=\"hljs-string\">\t,css:function(key,val)&#123;</span><br><span class=\"hljs-string\">\t\tfor(var i=0;i&lt;this.length;i++)</span><br><span class=\"hljs-string\">\t\t\tthis[i].style[key]=val;</span><br><span class=\"hljs-string\">\t\treturn this;</span><br><span class=\"hljs-string\">\t&#125;</span><br><span class=\"hljs-string\">\t,bind:function(type,fn)&#123;</span><br><span class=\"hljs-string\">\t\tfor(var i=0;i&lt;this.length;i++)</span><br><span class=\"hljs-string\">\t\t\tthis[i].addEventListener(type,fn);</span><br><span class=\"hljs-string\">\t\treturn this;</span><br><span class=\"hljs-string\">\t&#125;</span><br><span class=\"hljs-string\">&#125;;</span><br><span class=\"hljs-string\">&#125;)();</span><br><span class=\"hljs-string\"></span><br><span class=\"hljs-string\"></span><br><span class=\"hljs-string\">/************** functions **************/</span><br><span class=\"hljs-string\">window.FormatText=function(str)&#123;</span><br><span class=\"hljs-string\">\treturn str.replace(/[&amp;&lt;&gt;=&#x27;&quot;]/g,function(a)&#123; return &quot;&amp;#&quot; + a.charCodeAt(0) + &quot;;&quot; &#125;);</span><br><span class=\"hljs-string\">&#125;;</span><br><span class=\"hljs-string\"></span><br><span class=\"hljs-string\">window.Str2Bytes=function(str)&#123;</span><br><span class=\"hljs-string\">\tstr=unescape(encodeURIComponent(str));</span><br><span class=\"hljs-string\">\tvar u8arr=new Uint8Array(str.length);</span><br><span class=\"hljs-string\">\tfor(var i=0;i&lt;str.length;i++)u8arr[i]=str.charCodeAt(i);</span><br><span class=\"hljs-string\">\treturn u8arr;</span><br><span class=\"hljs-string\">&#125;;</span><br><span class=\"hljs-string\">window.Bytes2Str=function(bytes)&#123;</span><br><span class=\"hljs-string\">\tvar str=&quot;&quot;;</span><br><span class=\"hljs-string\">\tfor(var i=0;i&lt;bytes.length;i++) str+=String.fromCharCode(bytes[i]);</span><br><span class=\"hljs-string\">\treturn decodeURIComponent(escape(str));</span><br><span class=\"hljs-string\">&#125;;</span><br><span class=\"hljs-string\">window.Json2UrlB64=function(data)&#123;</span><br><span class=\"hljs-string\">\treturn Bytes2UrlB64(JSON.stringify(data));</span><br><span class=\"hljs-string\">&#125;;</span><br><span class=\"hljs-string\">window.Base642Bytes=function(b64)&#123;</span><br><span class=\"hljs-string\">\tvar str=atob(b64);</span><br><span class=\"hljs-string\">\tvar u8arr=new Uint8Array(str.length);</span><br><span class=\"hljs-string\">\tfor(var i=0;i&lt;str.length;i++)u8arr[i]=str.charCodeAt(i);</span><br><span class=\"hljs-string\">\treturn u8arr;</span><br><span class=\"hljs-string\">&#125;;</span><br><span class=\"hljs-string\">window.UrlB642Bytes=function(str)&#123;</span><br><span class=\"hljs-string\">\tstr=str.replace(/_/g,&quot;\\\\/&quot;).replace(/-/g,&quot;+&quot;);</span><br><span class=\"hljs-string\">\twhile(str.length%4)str+=&quot;=&quot;;</span><br><span class=\"hljs-string\">\treturn Base642Bytes(str);</span><br><span class=\"hljs-string\">&#125;;</span><br><span class=\"hljs-string\">window.Bytes2UrlB64=function(bytes)&#123;//二进制数组转成url base64</span><br><span class=\"hljs-string\">\treturn Bytes2Base64(bytes).replace(/\\\\//g,&quot;_&quot;).replace(/\\\\+/g,&quot;-&quot;).replace(/=/g,&quot;&quot;);</span><br><span class=\"hljs-string\">&#125;;</span><br><span class=\"hljs-string\">window.Bytes2Base64=function(bytes)&#123;</span><br><span class=\"hljs-string\">\tvar str=&quot;&quot;;</span><br><span class=\"hljs-string\">\tif(typeof(bytes)==&quot;string&quot;)&#123;</span><br><span class=\"hljs-string\">\t\tstr=unescape(encodeURIComponent(bytes));</span><br><span class=\"hljs-string\">\t&#125;else&#123;</span><br><span class=\"hljs-string\">\t\tif(bytes instanceof ArrayBuffer) bytes=new Uint8Array(bytes);</span><br><span class=\"hljs-string\">\t\tfor(var i=0;i&lt;bytes.length;i++) str+=String.fromCharCode(bytes[i]);</span><br><span class=\"hljs-string\">\t&#125;</span><br><span class=\"hljs-string\">\treturn btoa(str);</span><br><span class=\"hljs-string\">&#125;;</span><br><span class=\"hljs-string\"></span><br><span class=\"hljs-string\">&#125;)();</span><br><span class=\"hljs-string\">&lt;/script&gt;</span><br><span class=\"hljs-string\"></span><br><span class=\"hljs-string\"></span><br><span class=\"hljs-string\">&lt;script&gt;</span><br><span class=\"hljs-string\">//===========================================</span><br><span class=\"hljs-string\">//================= Launch ==================</span><br><span class=\"hljs-string\">//===========================================</span><br><span class=\"hljs-string\">//LICENSE: GPL-3.0, https://github.com/xiangyuecn/ACME-HTML-Web-Browser-Client</span><br><span class=\"hljs-string\">(function()&#123;</span><br><span class=\"hljs-string\">&quot;use strict&quot;;</span><br><span class=\"hljs-string\"></span><br><span class=\"hljs-string\">var msg=&quot;&quot;;</span><br><span class=\"hljs-string\">try&#123;</span><br><span class=\"hljs-string\">\twindow.PageRawHTML=window.PageRawHTML||document.documentElement.outerHTML;</span><br><span class=\"hljs-string\">\tif(window.top!=window)&#123;</span><br><span class=\"hljs-string\">\t\tmsg=Lang(</span><br><span class=\"hljs-string\">\t\t\t &#x27;不允许在IFrame内显示本页面，请直接通过网址访问！&#x27;</span><br><span class=\"hljs-string\">\t\t\t,&#x27;This page is not allowed to be displayed in IFrame, please visit it directly through the website!&#x27;);</span><br><span class=\"hljs-string\">\t\tthrow new Error();</span><br><span class=\"hljs-string\">\t&#125;</span><br><span class=\"hljs-string\">\tvar SupportCrypto=false;</span><br><span class=\"hljs-string\">\teval(&#x27;SupportCrypto=!!crypto.subtle.sign&#x27;);</span><br><span class=\"hljs-string\">\teval(&#x27;\\`\\`;(async function()&#123;class a&#123;&#125;&#125;)&#x27;);</span><br><span class=\"hljs-string\">&#125;catch(e)&#123;</span><br><span class=\"hljs-string\">\tif(!msg &amp;&amp; !SupportCrypto &amp;&amp; window.isSecureContext===false)&#123;</span><br><span class=\"hljs-string\">\t\tmsg=Lang(&#x27;浏览器禁止不安全页面调用Crypto功能，可开启https解决，或使用localhost、file://访问&#x27;, &#x27;The browser prohibits unsafe pages from calling Crypto function. You can enable https to solve the problem, or use localhost, file:// to access&#x27;);</span><br><span class=\"hljs-string\">\t&#125;</span><br><span class=\"hljs-string\">\tif(!msg)&#123;</span><br><span class=\"hljs-string\">\t\tmsg=Lang(&#x27;浏览器版本太低&#x27;+(SupportCrypto?&#x27;&#x27;:&#x27;（不支持Crypto）&#x27;)+&#x27;，请换一个浏览器再试！&#x27;, &#x27;The browser version is too low&#x27;+(SupportCrypto?&#x27;&#x27;:&#x27; (Crypto is not supported)&#x27;)+&#x27;. Please change another browser and try again!&#x27;);</span><br><span class=\"hljs-string\">\t&#125;</span><br><span class=\"hljs-string\">\tdocument.body.innerHTML=&#x27;&lt;div style=&quot;font-size:32px;color:red;font-weight:bold;text-align:center;padding-top:100px&quot;&gt;&#x27;+msg+&#x27;&lt;/div&gt;&#x27;;</span><br><span class=\"hljs-string\">\treturn;</span><br><span class=\"hljs-string\">&#125;</span><br><span class=\"hljs-string\">$(&quot;.main&quot;).html($(&quot;.main&quot;).html()); //彻底干掉输入框自动完成</span><br><span class=\"hljs-string\">$(&quot;input,textarea,select&quot;).attr(&quot;autocomplete&quot;,&quot;off&quot;);</span><br><span class=\"hljs-string\"></span><br><span class=\"hljs-string\">$(&quot;.main-load&quot;).hide();</span><br><span class=\"hljs-string\">$(&quot;.main&quot;).show();</span><br><span class=\"hljs-string\">LangClick(LangCur);</span><br><span class=\"hljs-string\"></span><br><span class=\"hljs-string\">initMainUI();</span><br><span class=\"hljs-string\"></span><br><span class=\"hljs-string\">&#125;)();</span><br><span class=\"hljs-string\">&lt;/script&gt;&lt;/body&gt;&lt;/html&gt;`</span>;<br>(<span class=\"hljs-keyword\">function</span>(<span class=\"hljs-params\"></span>)&#123;<br>\t\t<span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">clear</span>();<br>\t\t<span class=\"hljs-variable language_\">document</span>.<span class=\"hljs-property\">head</span>.<span class=\"hljs-property\">innerHTML</span>=<span class=\"hljs-regexp\">/&lt;head[^&gt;]*&gt;([\\S\\s]+?)&lt;\\/head&gt;/i</span>.<span class=\"hljs-title function_\">exec</span>(<span class=\"hljs-title class_\">PageRawHTML</span>)[<span class=\"hljs-number\">1</span>];<br>\t\t<span class=\"hljs-variable language_\">document</span>.<span class=\"hljs-property\">body</span>.<span class=\"hljs-property\">innerHTML</span>=<span class=\"hljs-regexp\">/&lt;body[^&gt;]*&gt;([\\S\\s]+)&lt;\\/body&gt;/i</span>.<span class=\"hljs-title function_\">exec</span>(<span class=\"hljs-title class_\">PageRawHTML</span>)[<span class=\"hljs-number\">1</span>];<br>\t\t<span class=\"hljs-keyword\">var</span> js=<span class=\"hljs-regexp\">/&lt;script[^&gt;]*&gt;([\\S\\s]+?)&lt;\\/script&gt;/ig</span>,m;<br>\t\t<span class=\"hljs-keyword\">while</span>(m=js.<span class=\"hljs-title function_\">exec</span>(<span class=\"hljs-title class_\">PageRawHTML</span>)) <span class=\"hljs-built_in\">eval</span>.<span class=\"hljs-title function_\">call</span>(<span class=\"hljs-variable language_\">window</span>, m[<span class=\"hljs-number\">1</span>]);<br>\t&#125;)()<br></code></pre></td></tr></table></figure>\n\n\n\n<p>等待出现：<strong>读取服务目录成功，</strong>请进行下一步操作。 URL&#x3D;<a href=\"https://acme.zerossl.com/v2/DV90/directory\">https://acme.zerossl.com/v2/DV90/directory</a></p>\n<p>即已经选择ZeroSSL作为服务商。</p>\n<h3 id=\"步骤二：证书配置\"><a href=\"#步骤二：证书配置\" class=\"headerlink\" title=\"步骤二：证书配置\"></a>步骤二：证书配置</h3><p>提示：如果上次申请过证书，可以拖拽已下载保存的记录LOG文件到本页面，将自动填充上次的配置信息。</p>\n<p>在“证书中要包含的域名：”中填写你要签发的域名。</p>\n<p>泛域名填写方式：example.com,*.example.com</p>\n<p>单域名填写方式：<a href=\"http://www.example.com/\">www.example.com</a></p>\n<p>多域名合并：<a href=\"http://www.example.com,site1.example.com,site2.example.com/\">www.example.com,site1.example.com,site2.example.com</a></p>\n<p><code>带通配符的域名只支持DNS验证，其他域名支持上传文件验证</code></p>\n<p>在 <code>证书的私钥：</code>处一般选择 <code>创建新RSA私钥</code>或 <code>创建新ECC私钥</code>，根据证书的加密形式而定。</p>\n<p>在 <code>ACME账户的私钥：</code>处一般选择 <code>创建新RSA私钥 </code>或 <code>创建新ECC私钥 </code>，根据证书的加密形式而定。</p>\n<p>在 <code> ACME账户的联系邮箱：</code>处填写你的邮箱，该邮箱必须真实存在。</p>\n<h3 id=\"步骤三：验证域名所有权\"><a href=\"#步骤三：验证域名所有权\" class=\"headerlink\" title=\"步骤三：验证域名所有权\"></a>步骤三：验证域名所有权</h3><p>请给每个域名选择一个你合适的验证方式，泛域名只能使用DNS解析方式。</p>\n<p>DNS解析方式：登陆到你的解析提供平台，如DNSPod，CloudFlare等，添加一条或多条TXT记录。</p>\n<p>文件验证方式：仅限单域名，在你域名所属的文件目录下 创建 <code>/.well-known/acme-challenge/</code>目录并在内创建验证文件。</p>\n<p>TLS-ALPN-01：使用Key Authorizations (Token+.+指纹)自行处理，Digest为Key Authorizations的SHA-256 Base64值。</p>\n<p>完成后，点击“开始验证”即可验证。</p>\n<h2 id=\"步骤四：下载保存证书PEM文件\"><a href=\"#步骤四：下载保存证书PEM文件\" class=\"headerlink\" title=\"步骤四：下载保存证书PEM文件\"></a>步骤四：下载保存证书PEM文件</h2><p>完成验证后，服务端会自动签发SSL证书，点击下载即可下载证书对应私钥，公钥和Log文件。</p>\n<h3 id=\"其他提示\"><a href=\"#其他提示\" class=\"headerlink\" title=\"其他提示\"></a>其他提示</h3><p>1.你需要其他格式的证书文件？</p>\n<p>大部分服务器程序支持直接使用 your_domain.pem+your_domain.key 来配置开启HTTPS（比如Nginx），如果你需要 <em>.pfx、</em>.p12 格式的证书（比如用于IIS），请用下面命令将PEM证书转换成 pfx&#x2F;p12 格式：</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs shell\">openssl pkcs12 -export -out your_domain.pfx -inkey your_domain.key -in your_domain.pem<br></code></pre></td></tr></table></figure>\n\n<p>2.IIS证书链缺失？</p>\n<p>对于Windows IIS服务器，你需要将证书链安装到“本地计算机”的“中间证书颁发机构”中；请将PEM证书中的所有证书拆分成单个PEM文件（后缀改成.crt或.cer），然后将系统中缺失的中间证书双击打开然后安装进去；详细参考： <a href=\"http://support.microsoft.com/kb/954755\">http://support.microsoft.com/kb/954755</a></p>\n"}],"PostAsset":[],"PostCategory":[{"post_id":"cm1xg6mt300079a9o6sfn9gz6","category_id":"cm1xg6mt200059a9o5tswbptm","_id":"cm1xg6mt9000f9a9o4sxk25dp"},{"post_id":"cm1xg6mt7000d9a9ogtet1qur","category_id":"cm1xg6mt200059a9o5tswbptm","_id":"cm1xg6mta000k9a9o5xxtfx7r"},{"post_id":"cm1xg6msw00019a9odqlp2g0f","category_id":"cm1xg6mt200059a9o5tswbptm","_id":"cm1xg6mtb000m9a9o9d176e4l"},{"post_id":"cm1xg6msw00019a9odqlp2g0f","category_id":"cm1xg6mt6000b9a9o056hagcx","_id":"cm1xg6mtb000n9a9oei7y29pm"},{"post_id":"cm1xg6mt8000e9a9o7jq1hj5o","category_id":"cm1xg6mt200059a9o5tswbptm","_id":"cm1xg6mtb000p9a9o67q71764"}],"PostTag":[{"post_id":"cm1xg6msw00019a9odqlp2g0f","tag_id":"cm1xg6mt000039a9o9uj6aper","_id":"cm1xg6mta000h9a9o6739ageu"},{"post_id":"cm1xg6msw00019a9odqlp2g0f","tag_id":"cm1xg6mt400089a9ogd1ic4wp","_id":"cm1xg6mta000i9a9ocplf9prm"},{"post_id":"cm1xg6msw00019a9odqlp2g0f","tag_id":"cm1xg6mt7000c9a9ogy80duxf","_id":"cm1xg6mta000l9a9oguzhes6c"},{"post_id":"cm1xg6mt300079a9o6sfn9gz6","tag_id":"cm1xg6mt9000g9a9ockmsglq1","_id":"cm1xg6mtc000r9a9o9apxg1th"},{"post_id":"cm1xg6mt300079a9o6sfn9gz6","tag_id":"cm1xg6mta000j9a9o3vphdlmd","_id":"cm1xg6mtc000s9a9o3inwalyn"},{"post_id":"cm1xg6mt300079a9o6sfn9gz6","tag_id":"cm1xg6mtb000o9a9o7lh8donx","_id":"cm1xg6mtc000u9a9o5bao8ika"},{"post_id":"cm1xg6mt400099a9oemay1k6p","tag_id":"cm1xg6mtb000q9a9o514fcwnk","_id":"cm1xg6mtc000v9a9obe703gjn"},{"post_id":"cm1xg6mt7000d9a9ogtet1qur","tag_id":"cm1xg6mtc000t9a9ohr9iaqf8","_id":"cm1xg6mtf000z9a9obwzt1vm8"},{"post_id":"cm1xg6mt7000d9a9ogtet1qur","tag_id":"cm1xg6mtd000w9a9o2t6r9kqn","_id":"cm1xg6mtf00109a9o6v7thhc8"},{"post_id":"cm1xg6mt7000d9a9ogtet1qur","tag_id":"cm1xg6mtd000x9a9o7953460j","_id":"cm1xg6mtg00129a9o5f1eaob3"},{"post_id":"cm1xg6mt8000e9a9o7jq1hj5o","tag_id":"cm1xg6mtd000x9a9o7953460j","_id":"cm1xg6mtg00139a9o5n6f6qg0"},{"post_id":"cm1xg6mt8000e9a9o7jq1hj5o","tag_id":"cm1xg6mtf00119a9obep4expm","_id":"cm1xg6mtg00149a9obrsu437e"}],"Tag":[{"name":"Cloudflare","_id":"cm1xg6mt000039a9o9uj6aper"},{"name":"免费CDN","_id":"cm1xg6mt400089a9ogd1ic4wp"},{"name":"CNAME接入","_id":"cm1xg6mt7000c9a9ogy80duxf"},{"name":"Minecarft","_id":"cm1xg6mt9000g9a9ockmsglq1"},{"name":"游戏","_id":"cm1xg6mta000j9a9o3vphdlmd"},{"name":"私有化","_id":"cm1xg6mtb000o9a9o7lh8donx"},{"name":"随记","_id":"cm1xg6mtb000q9a9o514fcwnk"},{"name":"Docker","_id":"cm1xg6mtc000t9a9ohr9iaqf8"},{"name":"Oneinstack","_id":"cm1xg6mtd000w9a9o2t6r9kqn"},{"name":"WordPress","_id":"cm1xg6mtd000x9a9o7953460j"},{"name":"加速","_id":"cm1xg6mtf00119a9obep4expm"}]}}